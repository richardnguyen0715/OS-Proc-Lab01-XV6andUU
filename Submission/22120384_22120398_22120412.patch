diff --git a/.gitmodules b/.gitmodules
new file mode 100644
index 0000000..8b13789
--- /dev/null
+++ b/.gitmodules
@@ -0,0 +1 @@
+
diff --git a/.vscode/settings.json b/.vscode/settings.json
new file mode 100644
index 0000000..bfe7e6a
--- /dev/null
+++ b/.vscode/settings.json
@@ -0,0 +1,8 @@
+{
+    "files.associations": {
+        "user.h": "c",
+        "stat.h": "c",
+        "param.h": "c",
+        "types.h": "c"
+    }
+}
\ No newline at end of file
diff --git a/.vscode/tasks.json b/.vscode/tasks.json
new file mode 100644
index 0000000..08d9005
--- /dev/null
+++ b/.vscode/tasks.json
@@ -0,0 +1,28 @@
+{
+    "tasks": [
+        {
+            "type": "cppbuild",
+            "label": "C/C++: gcc build active file",
+            "command": "/usr/bin/gcc",
+            "args": [
+                "-fdiagnostics-color=always",
+                "-g",
+                "${file}",
+                "-o",
+                "${fileDirname}/${fileBasenameNoExtension}"
+            ],
+            "options": {
+                "cwd": "${fileDirname}"
+            },
+            "problemMatcher": [
+                "$gcc"
+            ],
+            "group": {
+                "kind": "build",
+                "isDefault": true
+            },
+            "detail": "Task generated by Debugger."
+        }
+    ],
+    "version": "2.0.0"
+}
\ No newline at end of file
diff --git a/Project Requirements/CQ_Lab01.pdf b/Project Requirements/CQ_Lab01.pdf
new file mode 100644
index 0000000..7ed8ff7
--- /dev/null
+++ b/Project Requirements/CQ_Lab01.pdf	
@@ -0,0 +1,246 @@
+                            OPERATING SYSTEM
+
+          PROJECT 1 – Xv6 and Unix utilities
+
+  1. General rule:
+
+- The project is done in groups: each group has a maximum of 3 students
+
+- The same exercises will all be scored 0 for the entire practice (even though there are
+scores for other exercises and practice projects).
+
+- Môi trường lập trình: Linux
+
+  2. Submission:
+
+Submit assignments directly on the course website (MOODLE), not accepting
+submissions via email or other forms.
+
+Filename: StudentID1_StudentID2_StudentID3.zip (with StudentID1 < StudentID2<
+StudentID3)
+
+Ex: Your group has 2 students: 2312001 and 2312002, the filename is:
+2312001_2312002_2312003.zip
+
+Include:
+
+    ● StudentID1_StudentID2_StudentID3_Report.pdf: Writeups should be short and
+         sweet. Do not spend too much effort or include your source code on your writeups. The
+         purpose of the report is to give you an opportunity to clarify your solution, any problems
+         with your work, and to add information that may be useful in grading. If you had specific
+         problems or issues, approaches you tried that didn’t work, or concepts that were not fully
+         implemented, then an explanation in your report may help us to assign partial credit
+
+    ● Release: File diff (diff patch, Ex: $ git diff >
+         <StudentID1_StudentID2_StudentID3.patch)
+
+    ● Source: Zip file of xv6 (the version is made clean)
+
+Lưu ý: Cần thực hiện đúng các yêu cầu trên, nếu không, bài làm sẽ không được chấm.
+  3. Demo Interviews
+
+Your implementation is graded on completeness, correctness, programming style, thoroughness
+of testing, your solution, and code understanding.
+
+When administering this course, we do our best to give a fair assessment to each individual
+based on each person's contribution to the project
+
+  4. Requirements
+
+This lab will familiarize you with xv6 and its system calls.
+
+1. pingpong
+
+Write a user-level program that uses xv6 system calls to ''ping-pong'' a byte between two
+processes over a pair of pipes, one for each direction. The parent should send a byte to the
+child; the child should print "<pid>: received ping", where <pid> is its process ID, write the
+byte on the pipe to the parent, and exit; the parent should read the byte from the child, print
+"<pid>: received pong", and exit. Your solution should be in the file user/pingpong.c.
+
+Some hints:
+
+    ● Add the program to UPROGS in Makefile.
+    ● You'll need to use the pipe, fork, write, read, and getpid system calls.
+    ● User programs on xv6 have a limited set of library functions available to them. You can
+
+         see the list in user/user.h; the source (other than for system calls) is in user/ulib.c,
+         user/printf.c, and user/umalloc.c.
+
+Run the program from the xv6 shell and it should produce the following output:
+
+        $ make qemu
+        ...
+        init: starting sh
+        $ pingpong
+        4: received ping
+        3: received pong
+        $
+
+Your program should exchange a byte between two processes and produces output as shown
+above. Run make grade to check.
+2. primes
+
+Write a concurrent prime sieve program for xv6 using pipes and the design illustrated in the
+picture halfway down this page and the surrounding text. This idea is due to Doug McIlroy,
+inventor of Unix pipes. Your solution should be in the file user/primes.c.
+
+Your goal is to use pipe and fork to set up the pipeline. The first process feeds the numbers 2
+through 280 into the pipeline. For each prime number, you will arrange to create one process
+that reads from its left neighbor over a pipe and writes to its right neighbor over another pipe.
+Since xv6 has a limited number of file descriptors and processes, the first process can stop at
+280.
+
+Some hints:
+
+    ● Be careful to close file descriptors that a process doesn't need, because otherwise your
+         program will run xv6 out of resources before the first process reaches 280.
+
+    ● Once the first process reaches 280, it should wait until the entire pipeline terminates,
+         including all children, grandchildren, &c. Thus the main primes process should only exit
+         after all the output has been printed, and after all the other primes processes have
+         exited.
+
+    ● Hint: read returns zero when the write-side of a pipe is closed.
+    ● It's simplest to directly write 32-bit (4-byte) ints to the pipes, rather than using formatted
+
+         ASCII I/O.
+    ● You should create the processes in the pipeline only as they are needed.
+    ● Add the program to UPROGS in Makefile.
+    ● If you get an infinite recursion error from the compiler for the function primes, you may
+
+         have to declare void primes(int) __attribute__((noreturn)); to indicate that primes doesn't
+         return.
+
+Your solution should implement a pipe-based sieve and produce the following output:
+
+        $ make qemu
+        ...
+        init: starting sh
+        $ primes
+        prime 2
+        prime 3
+        prime 5
+        prime 7
+        prime 11
+        prime 13
+        prime 17
+        prime 19
+        prime 23
+        prime 29
+        prime 31
+        ...
+        $
+
+3. find
+
+Write a simple version of the UNIX find program for xv6: find all the files in a directory tree with a
+specific name. Your solution should be in the file user/find.c.
+
+Some hints:
+
+    ● Look at user/ls.c to see how to read directories.
+    ● Use recursion to allow find to descend into sub-directories.
+    ● Don't recurse into "." and "..".
+    ● Changes to the file system persist across runs of qemu; to get a clean file system run
+
+         make clean and then make qemu.
+    ● You'll need to use C strings. Have a look at K&R (the C book), for example Section 5.5.
+    ● Note that == does not compare strings like in Python. Use strcmp() instead.
+    ● Add the program to UPROGS in Makefile.
+
+Your solution should produce the following output (when the file system contains the files b, a/b
+and a/aa/b):
+
+        $ make qemu
+        ...
+        init: starting sh
+        $ echo > b
+        $ mkdir a
+        $ echo > a/b
+        $ mkdir a/aa
+        $ echo > a/aa/b
+        $ find . b
+        ./b
+        ./a/b
+        ./a/aa/b
+        $
+
+Run make grade to see what our tests think.
+4. xargs
+
+Write a simple version of the UNIX xargs program for xv6: its arguments describe a command to
+run, it reads lines from the standard input, and it runs the command for each line, appending the
+line to the command's arguments. Your solution should be in the file user/xargs.c.
+
+The following example illustrates xarg's behavior:
+      $ echo hello too | xargs echo bye
+        bye hello too
+      $
+
+Note that the command here is "echo bye" and the additional arguments are "hello too", making
+the command "echo bye hello too", which outputs "bye hello too".
+
+Please note that xargs on UNIX makes an optimization where it will feed more than one
+argument to the command at a time. We don't expect you to make this optimization. To make
+xargs on UNIX behave the way we want it to for this lab, please run it with the -n option set to 1.
+For instance
+
+      $ (echo 1 ; echo 2) | xargs -n 1 echo
+      1
+      2
+      $
+
+Some hints:
+
+    ● Use fork and exec to invoke the command on each line of input. Use wait in the parent to
+         wait for the child to complete the command.
+
+    ● To read individual lines of input, read a character at a time until a newline ('\n') appears.
+    ● kernel/param.h declares MAXARG, which may be useful if you need to declare an argv
+
+         array.
+    ● Add the program to UPROGS in Makefile.
+    ● Changes to the file system persist across runs of qemu; to get a clean file system run
+
+         make clean and then make qemu.
+
+xargs, find, and grep combine well:
+
+   $ find . b | xargs grep hello
+
+will run "grep hello" on each file named b in the directories below ".".
+To test your solution for xargs, run the shell script xargstest.sh. Your solution should produce the
+following output:
+
+    $ make qemu
+    ...
+    init: starting sh
+    $ sh < xargstest.sh
+    $ $ $ $ $ $ hello
+    hello
+    hello
+    $$
+
+You may have to go back and fix bugs in your find program. The output has many $ because the
+xv6 shell doesn't realize it is processing commands from a file instead of from the console, and
+prints a $ for each command in the file.
+
+   6. Grade:
+
+No. Exercise  Grade
+              2.5
+1  pingpong   2.5
+              2.5
+2  primes     2.5
+
+3  find
+
+4  xargs
+
+   7. Reference:
+
+       1. https://pdos.csail.mit.edu/6.1810/2024/labs/util.html
+       2. [File Descriptors and Open Files]
+
+            https://www.youtube.com/watch?v=oWuVGDese4k
+
diff --git a/README.md b/README.md
index 64f96d5..df4e5a8 100644
--- a/README.md
+++ b/README.md
@@ -1,2 +1,12 @@
 # OS-Proc-Lab01-XV6andUU
-Operating System Laboratory 01 - HCMUS - Oct 2024.
+***Lab01** - **XV6 and Unix Utilities** - Theory Class - Operating System Course - HCMUS - Oct 2024*
+## Group Information
+1. **Class:** 22_4.
+2. **Theory Class Lectuer:** Mr. Tran Trung Dung.
+3. **Group ID:** 
+4. **Member's information:** ID - Name
+    * 22120384 - [Nguyễn Đình Trí.](https://github.com/dinhtri2305)
+    * 22120387 - [Vũ Hoàng Nhật Trường.](https://github.com/Truong5724)
+    * 22120412 - [Nguyễn Anh Tường.](https://github.com/richardnguyen0715)
+5. **Time**: Oct 01, 2024 - Otc 20, 2024.
+6. **Instructor's Drive Link:** [Mr.Nguyen_Thanh_Quan_Drive_Instructions.](https://drive.google.com/drive/folders/10SSqgquSRVlz_aQUGkF4Xhf6UG4vnyU2)
\ No newline at end of file
diff --git a/Reference Documents/book-xv6-riscv-rev4.pdf b/Reference Documents/book-xv6-riscv-rev4.pdf
new file mode 100644
index 0000000..853a4f1
--- /dev/null
+++ b/Reference Documents/book-xv6-riscv-rev4.pdf	
@@ -0,0 +1,4859 @@
+xv6: a simple, Unix-like teaching operating system
+
+Russ Cox  Frans Kaashoek   Robert Morris
+
+          August 31, 2024
+2
+Contents
+
+1 Operating system interfaces       9
+
+1.1 Processes and memory . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
+
+1.2 I/O and File descriptors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
+
+1.3 Pipes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
+
+1.4 File system . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
+
+1.5 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
+
+1.6 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
+
+2 Operating system organization     21
+
+2.1 Abstracting physical resources . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
+
+2.2 User mode, supervisor mode, and system calls . . . . . . . . . . . . . . . . . . . . 22
+
+2.3 Kernel organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
+
+2.4 Code: xv6 organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
+
+2.5 Process overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
+
+2.6 Code: starting xv6, the first process and system call . . . . . . . . . . . . . . . . . 28
+
+2.7 Security Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
+
+2.8 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
+
+2.9 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
+
+3 Page tables                       31
+
+3.1 Paging hardware . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
+
+3.2 Kernel address space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34
+
+3.3 Code: creating an address space . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
+
+3.4 Physical memory allocation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
+
+3.5 Code: Physical memory allocator . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
+
+3.6 Process address space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
+
+3.7 Code: sbrk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
+
+3.8 Code: exec . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
+
+3.9 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41
+
+3.10 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
+
+                                 3
+4 Traps and system calls            43
+
+4.1 RISC-V trap machinery . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
+
+4.2 Traps from user space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45
+
+4.3 Code: Calling system calls . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
+
+4.4 Code: System call arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
+
+4.5 Traps from kernel space . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
+
+4.6 Page-fault exceptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
+
+4.7 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
+
+4.8 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
+
+5 Interrupts and device drivers     53
+
+5.1 Code: Console input . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
+
+5.2 Code: Console output . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
+
+5.3 Concurrency in drivers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
+
+5.4 Timer interrupts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55
+
+5.5 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56
+
+5.6 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57
+
+6 Locking                           59
+
+6.1 Races . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60
+
+6.2 Code: Locks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63
+
+6.3 Code: Using locks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
+
+6.4 Deadlock and lock ordering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
+
+6.5 Re-entrant locks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66
+
+6.6 Locks and interrupt handlers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
+
+6.7 Instruction and memory ordering . . . . . . . . . . . . . . . . . . . . . . . . . . . 67
+
+6.8 Sleep locks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68
+
+6.9 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
+
+6.10 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69
+
+7 Scheduling                        71
+
+7.1 Multiplexing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
+
+7.2 Code: Context switching . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
+
+7.3 Code: Scheduling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
+
+7.4 Code: mycpu and myproc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74
+
+7.5 Sleep and wakeup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75
+
+7.6 Code: Sleep and wakeup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78
+
+7.7 Code: Pipes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
+
+7.8 Code: Wait, exit, and kill . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
+
+7.9 Process Locking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
+
+7.10 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
+
+7.11 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
+
+                                 4
+8 File system               85
+
+8.1 Overview . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
+
+8.2 Buffer cache layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
+
+8.3 Code: Buffer cache . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87
+
+8.4 Logging layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88
+
+8.5 Log design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
+
+8.6 Code: logging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90
+
+8.7 Code: Block allocator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91
+
+8.8 Inode layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
+
+8.9 Code: Inodes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93
+
+8.10 Code: Inode content . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
+
+8.11 Code: directory layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95
+
+8.12 Code: Path names . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96
+
+8.13 File descriptor layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97
+
+8.14 Code: System calls . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98
+
+8.15 Real world . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99
+
+8.16 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
+
+9 Concurrency revisited     103
+
+9.1 Locking patterns . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103
+
+9.2 Lock-like patterns . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
+
+9.3 No locks at all . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
+
+9.4 Parallelism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105
+
+9.5 Exercises . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
+
+10 Summary                  107
+
+                         5
+6
+Foreword and acknowledgments
+
+This is a draft text intended for a class on operating systems. It explains the main concepts of
+operating systems by studying an example kernel, named xv6. Xv6 is modeled on Dennis Ritchie’s
+and Ken Thompson’s Unix Version 6 (v6) [17]. Xv6 loosely follows the structure and style of v6,
+but is implemented in ANSI C [7] for a multi-core RISC-V [15].
+
+    This text should be read along with the source code for xv6, an approach inspired by John Li-
+ons’ Commentary on UNIX 6th Edition [11]; the text has hyperlinks to the source code at https:
+//github.com/mit-pdos/xv6-riscv. See https://pdos.csail.mit.edu/6.1810
+for additional pointers to on-line resources for v6 and xv6, including several lab assignments using
+xv6.
+
+    We have used this text in 6.828 and 6.1810, the operating system classes at MIT. We thank the
+faculty, teaching assistants, and students of those classes who have all directly or indirectly con-
+tributed to xv6. In particular, we would like to thank Adam Belay, Austin Clements, and Nickolai
+Zeldovich. Finally, we would like to thank people who emailed us bugs in the text or suggestions
+for improvements: Abutalib Aghayev, Sebastian Boehm, brandb97, Anton Burtsev, Raphael Car-
+valho, Tej Chajed,Brendan Davidson, Rasit Eskicioglu, Color Fuzzy, Wojciech Gac, Giuseppe,
+Tao Guo, Haibo Hao, Naoki Hayama, Chris Henderson, Robert Hilderman, Eden Hochbaum,
+Wolfgang Keller, Paweł Kraszewski, Henry Laih, Jin Li, Austin Liew, lyazj@github.com, Pavan
+Maddamsetti, Jacek Masiulaniec, Michael McConville, m3hm00d, miguelgvieira, Mark Morrissey,
+Muhammed Mourad, Harry Pan, Harry Porter, Siyuan Qian, Zhefeng Qiao, Askar Safin, Salman
+Shah, Huang Sha, Vikram Shenoy, Adeodato Simó, Ruslan Savchenko, Pawel Szczurko, Warren
+Toomey, tyfkda, tzerbib, Vanush Vaswani, Xi Wang, and Zou Chang Wei, Sam Whitlock, Qiongsi
+Wu, LucyShawYang, ykf1114@gmail.com, and Meng Zhou
+
+    If you spot errors or have suggestions for improvement, please send email to Frans Kaashoek
+and Robert Morris (kaashoek,rtm@csail.mit.edu).
+
+                                                          7
+8
+Chapter 1
+
+Operating system interfaces
+
+The job of an operating system is to share a computer among multiple programs and to provide a
+more useful set of services than the hardware alone supports. An operating system manages and
+abstracts the low-level hardware, so that, for example, a word processor need not concern itself
+with which type of disk hardware is being used. An operating system shares the hardware among
+multiple programs so that they run (or appear to run) at the same time. Finally, operating systems
+provide controlled ways for programs to interact, so that they can share data or work together.
+
+    An operating system provides services to user programs through an interface. Designing a good
+interface turns out to be difficult. On the one hand, we would like the interface to be simple and
+narrow because that makes it easier to get the implementation right. On the other hand, we may be
+tempted to offer many sophisticated features to applications. The trick in resolving this tension is to
+design interfaces that rely on a few mechanisms that can be combined to provide much generality.
+
+    This book uses a single operating system as a concrete example to illustrate operating system
+concepts. That operating system, xv6, provides the basic interfaces introduced by Ken Thompson
+and Dennis Ritchie’s Unix operating system [17], as well as mimicking Unix’s internal design.
+Unix provides a narrow interface whose mechanisms combine well, offering a surprising degree
+of generality. This interface has been so successful that modern operating systems—BSD, Linux,
+macOS, Solaris, and even, to a lesser extent, Microsoft Windows—have Unix-like interfaces. Un-
+derstanding xv6 is a good start toward understanding any of these systems and many others.
+
+    As Figure 1.1 shows, xv6 takes the traditional form of a kernel, a special program that provides
+services to running programs. Each running program, called a process, has memory containing
+instructions, data, and a stack. The instructions implement the program’s computation. The data
+are the variables on which the computation acts. The stack organizes the program’s procedure calls.
+A given computer typically has many processes but only a single kernel.
+
+    When a process needs to invoke a kernel service, it invokes a system call, one of the calls in
+the operating system’s interface. The system call enters the kernel; the kernel performs the service
+and returns. Thus a process alternates between executing in user space and kernel space.
+
+    As described in detail in subsequent chapters, the kernel uses the hardware protection mech-
+anisms provided by a CPU1 to ensure that each process executing in user space can access only
+
+    1This text generally refers to the hardware element that executes a computation with the term CPU, an acronym
+
+                                                          9
+user    shell                       cat
+space          system
+               call
+kernel
+space                Kernel
+
+Figure 1.1: A kernel and two user processes.
+
+its own memory. The kernel executes with the hardware privileges required to implement these
+protections; user programs execute without those privileges. When a user program invokes a sys-
+tem call, the hardware raises the privilege level and starts executing a pre-arranged function in the
+kernel.
+
+    The collection of system calls that a kernel provides is the interface that user programs see. The
+xv6 kernel provides a subset of the services and system calls that Unix kernels traditionally offer.
+Figure 1.2 lists all of xv6’s system calls.
+
+    The rest of this chapter outlines xv6’s services—processes, memory, file descriptors, pipes,
+and a file system—and illustrates them with code snippets and discussions of how the shell, Unix’s
+command-line user interface, uses them. The shell’s use of system calls illustrates how carefully
+they have been designed.
+
+    The shell is an ordinary program that reads commands from the user and executes them. The
+fact that the shell is a user program, and not part of the kernel, illustrates the power of the system
+call interface: there is nothing special about the shell. It also means that the shell is easy to replace;
+as a result, modern Unix systems have a variety of shells to choose from, each with its own user
+interface and scripting features. The xv6 shell is a simple implementation of the essence of the
+Unix Bourne shell. Its implementation can be found at (user/sh.c:1).
+
+1.1 Processes and memory
+
+An xv6 process consists of user-space memory (instructions, data, and stack) and per-process state
+private to the kernel. Xv6 time-shares processes: it transparently switches the available CPUs
+among the set of processes waiting to execute. When a process is not executing, xv6 saves the
+process’s CPU registers, restoring them when it next runs the process. The kernel associates a
+process identifier, or PID, with each process.
+
+    A process may create a new process using the fork system call. fork gives the new process an
+exact copy of the calling process’s memory: it copies the instructions, data, and stack of the calling
+process into the new process’s memory. fork returns in both the original and new processes. In
+the original process, fork returns the new process’s PID. In the new process, fork returns zero.
+The original and new processes are often called the parent and child.
+
+for central processing unit. Other documentation (e.g., the RISC-V specification) also uses the words processor, core,
+and hart instead of CPU.
+
+                                                         10
+System call                          Description
+
+int fork()                           Create a process, return child’s PID.
+int exit(int status)                 Terminate the current process; status reported to wait(). No return.
+int wait(int *status)                Wait for a child to exit; exit status in *status; returns child PID.
+int kill(int pid)                    Terminate process PID. Returns 0, or -1 for error.
+int getpid()                         Return the current process’s PID.
+int sleep(int n)                     Pause for n clock ticks.
+int exec(char *file, char *argv[])   Load a file and execute it with arguments; only returns if error.
+char *sbrk(int n)                    Grow process’s memory by n zero bytes. Returns start of new memory.
+int open(char *file, int flags)      Open a file; flags indicate read/write; returns an fd (file descriptor).
+int write(int fd, char *buf, int n)  Write n bytes from buf to file descriptor fd; returns n.
+int read(int fd, char *buf, int n)   Read n bytes into buf; returns number read; or 0 if end of file.
+int close(int fd)                    Release open file fd.
+int dup(int fd)                      Return a new file descriptor referring to the same file as fd.
+int pipe(int p[])                    Create a pipe, put read/write file descriptors in p[0] and p[1].
+int chdir(char *dir)                 Change the current directory.
+int mkdir(char *dir)                 Create a new directory.
+int mknod(char *file, int, int)      Create a device file.
+int fstat(int fd, struct stat *st)   Place info about an open file into *st.
+int link(char *file1, char *file2)   Create another name (file2) for the file file1.
+int unlink(char *file)               Remove a file.
+
+Figure 1.2: Xv6 system calls. If not otherwise stated, these calls return 0 for no error, and -1 if
+there’s an error.
+
+    For example, consider the following program fragment written in the C programming lan-
+guage [7]:
+
+      int pid = fork();
+      if(pid > 0){
+
+          printf("parent: child=%d\n", pid);
+          pid = wait((int *) 0);
+          printf("child %d is done\n", pid);
+      } else if(pid == 0){
+          printf("child: exiting\n");
+          exit(0);
+      } else {
+          printf("fork error\n");
+      }
+
+The exit system call causes the calling process to stop executing and to release resources such as
+memory and open files. Exit takes an integer status argument, conventionally 0 to indicate success
+and 1 to indicate failure. The wait system call returns the PID of an exited (or killed) child of
+the current process and copies the exit status of the child to the address passed to wait; if none of
+
+                                                         11
+the caller’s children has exited, wait waits for one to do so. If the caller has no children, wait
+immediately returns -1. If the parent doesn’t care about the exit status of a child, it can pass a 0
+address to wait.
+
+    In the example, the output lines
+
+      parent: child=1234
+      child: exiting
+
+might come out in either order (or even intermixed), depending on whether the parent or child gets
+to its printf call first. After the child exits, the parent’s wait returns, causing the parent to print
+
+      parent: child 1234 is done
+
+Although the child has the same memory contents as the parent initially, the parent and child are
+executing with separate memory and separate registers: changing a variable in one does not affect
+the other. For example, when the return value of wait is stored into pid in the parent process, it
+doesn’t change the variable pid in the child. The value of pid in the child will still be zero.
+
+    The exec system call replaces the calling process’s memory with a new memory image loaded
+from a file stored in the file system. The file must have a particular format, which specifies which
+part of the file holds instructions, which part is data, at which instruction to start, etc. Xv6 uses the
+ELF format, which Chapter 3 discusses in more detail. Usually the file is the result of compiling
+a program’s source code. When exec succeeds, it does not return to the calling program; instead,
+the instructions loaded from the file start executing at the entry point declared in the ELF header.
+exec takes two arguments: the name of the file containing the executable and an array of string
+arguments. For example:
+
+      char *argv[3];
+
+      argv[0] = "echo";
+      argv[1] = "hello";
+      argv[2] = 0;
+      exec("/bin/echo", argv);
+      printf("exec error\n");
+
+This fragment replaces the calling program with an instance of the program /bin/echo running
+with the argument list echo hello. Most programs ignore the first element of the argument array,
+which is conventionally the name of the program.
+
+    The xv6 shell uses the above calls to run programs on behalf of users. The main structure of
+the shell is simple; see main (user/sh.c:146). The main loop reads a line of input from the user with
+getcmd. Then it calls fork, which creates a copy of the shell process. The parent calls wait,
+while the child runs the command. For example, if the user had typed “echo hello” to the shell,
+runcmd would have been called with “echo hello” as the argument. runcmd (user/sh.c:55) runs
+the actual command. For “echo hello”, it would call exec (user/sh.c:79). If exec succeeds then
+the child will execute instructions from echo instead of runcmd. At some point echo will call
+exit, which will cause the parent to return from wait in main (user/sh.c:146).
+
+    You might wonder why fork and exec are not combined in a single call; we will see later that
+the shell exploits the separation in its implementation of I/O redirection. To avoid the wastefulness
+
+                                                         12
+of creating a duplicate process and then immediately replacing it (with exec), operating kernels
+optimize the implementation of fork for this use case by using virtual memory techniques such
+as copy-on-write (see Section 4.6).
+
+    Xv6 allocates most user-space memory implicitly: fork allocates the memory required for the
+child’s copy of the parent’s memory, and exec allocates enough memory to hold the executable
+file. A process that needs more memory at run-time (perhaps for malloc) can call sbrk(n) to
+grow its data memory by n zero bytes; sbrk returns the location of the new memory.
+
+1.2 I/O and File descriptors
+
+A file descriptor is a small integer representing a kernel-managed object that a process may read
+from or write to. A process may obtain a file descriptor by opening a file, directory, or device,
+or by creating a pipe, or by duplicating an existing descriptor. For simplicity we’ll often refer
+to the object a file descriptor refers to as a “file”; the file descriptor interface abstracts away the
+differences between files, pipes, and devices, making them all look like streams of bytes. We’ll
+refer to input and output as I/O.
+
+    Internally, the xv6 kernel uses the file descriptor as an index into a per-process table, so that
+every process has a private space of file descriptors starting at zero. By convention, a process reads
+from file descriptor 0 (standard input), writes output to file descriptor 1 (standard output), and
+writes error messages to file descriptor 2 (standard error). As we will see, the shell exploits the
+convention to implement I/O redirection and pipelines. The shell ensures that it always has three
+file descriptors open (user/sh.c:152), which are by default file descriptors for the console.
+
+    The read and write system calls read bytes from and write bytes to open files named by file
+descriptors. The call read(fd, buf, n) reads at most n bytes from the file descriptor fd, copies
+them into buf, and returns the number of bytes read. Each file descriptor that refers to a file has an
+offset associated with it. read reads data from the current file offset and then advances that offset
+by the number of bytes read: a subsequent read will return the bytes following the ones returned
+by the first read. When there are no more bytes to read, read returns zero to indicate the end of
+the file.
+
+    The call write(fd, buf, n) writes n bytes from buf to the file descriptor fd and returns the
+number of bytes written. Fewer than n bytes are written only when an error occurs. Like read,
+write writes data at the current file offset and then advances that offset by the number of bytes
+written: each write picks up where the previous one left off.
+
+    The following program fragment (which forms the essence of the program cat) copies data
+from its standard input to its standard output. If an error occurs, it writes a message to the standard
+error.
+
+      char buf[512];
+      int n;
+
+      for(;;){
+          n = read(0, buf, sizeof buf);
+          if(n == 0)
+
+                                                         13
+             break;
+          if(n < 0){
+
+             fprintf(2, "read error\n");
+             exit(1);
+          }
+          if(write(1, buf, n) != n){
+             fprintf(2, "write error\n");
+             exit(1);
+          }
+      }
+
+The important thing to note in the code fragment is that cat doesn’t know whether it is reading
+from a file, console, or a pipe. Similarly cat doesn’t know whether it is printing to a console, a
+file, or whatever. The use of file descriptors and the convention that file descriptor 0 is input and
+file descriptor 1 is output allows a simple implementation of cat.
+
+    The close system call releases a file descriptor, making it free for reuse by a future open,
+pipe, or dup system call (see below). A newly allocated file descriptor is always the lowest-
+numbered unused descriptor of the current process.
+
+    File descriptors and fork interact to make I/O redirection easy to implement. fork copies
+the parent’s file descriptor table along with its memory, so that the child starts with exactly the
+same open files as the parent. The system call exec replaces the calling process’s memory but
+preserves its file table. This behavior allows the shell to implement I/O redirection by forking, re-
+opening chosen file descriptors in the child, and then calling exec to run the new program. Here
+is a simplified version of the code a shell runs for the command cat < input.txt:
+
+      char *argv[2];
+
+      argv[0] = "cat";
+      argv[1] = 0;
+      if(fork() == 0) {
+
+          close(0);
+          open("input.txt", O_RDONLY);
+          exec("cat", argv);
+      }
+
+After the child closes file descriptor 0, open is guaranteed to use that file descriptor for the newly
+opened input.txt: 0 will be the smallest available file descriptor. cat then executes with file
+descriptor 0 (standard input) referring to input.txt. The parent process’s file descriptors are not
+changed by this sequence, since it modifies only the child’s descriptors.
+
+    The code for I/O redirection in the xv6 shell works in exactly this way (user/sh.c:83). Recall that
+at this point in the code the shell has already forked the child shell and that runcmd will call exec
+to load the new program.
+
+    The second argument to open consists of a set of flags, expressed as bits, that control what
+open does. The possible values are defined in the file control (fcntl) header (kernel/fcntl.h:1-5):
+O_RDONLY, O_WRONLY, O_RDWR, O_CREATE, and O_TRUNC, which instruct open to open the file
+
+                                                         14
+for reading, or for writing, or for both reading and writing, to create the file if it doesn’t exist, and
+to truncate the file to zero length.
+
+    Now it should be clear why it is helpful that fork and exec are separate calls: between the
+two, the shell has a chance to redirect the child’s I/O without disturbing the I/O setup of the main
+shell. One could instead imagine a hypothetical combined forkexec system call, but the options
+for doing I/O redirection with such a call seem awkward. The shell could modify its own I/O
+setup before calling forkexec (and then un-do those modifications); or forkexec could take
+instructions for I/O redirection as arguments; or (least attractively) every program like cat could
+be taught to do its own I/O redirection.
+
+    Although fork copies the file descriptor table, each underlying file offset is shared between
+parent and child. Consider this example:
+
+      if(fork() == 0) {
+          write(1, "hello ", 6);
+          exit(0);
+
+      } else {
+          wait(0);
+          write(1, "world\n", 6);
+
+      }
+
+At the end of this fragment, the file attached to file descriptor 1 will contain the data hello world.
+The write in the parent (which, thanks to wait, runs only after the child is done) picks up where
+the child’s write left off. This behavior helps produce sequential output from sequences of shell
+commands, like (echo hello; echo world) >output.txt.
+
+    The dup system call duplicates an existing file descriptor, returning a new one that refers to
+the same underlying I/O object. Both file descriptors share an offset, just as the file descriptors
+duplicated by fork do. This is another way to write hello world into a file:
+
+      fd = dup(1);
+      write(1, "hello ", 6);
+      write(fd, "world\n", 6);
+
+    Two file descriptors share an offset if they were derived from the same original file descriptor
+by a sequence of fork and dup calls. Otherwise file descriptors do not share offsets, even if they
+resulted from open calls for the same file. dup allows shells to implement commands like this:
+ls existing-file non-existing-file > tmp1 2>&1. The 2>&1 tells the shell to give the
+command a file descriptor 2 that is a duplicate of descriptor 1. Both the name of the existing file
+and the error message for the non-existing file will show up in the file tmp1. The xv6 shell doesn’t
+support I/O redirection for the error file descriptor, but now you know how to implement it.
+
+    File descriptors are a powerful abstraction, because they hide the details of what they are con-
+nected to: a process writing to file descriptor 1 may be writing to a file, to a device like the console,
+or to a pipe.
+
+                                                         15
+1.3 Pipes
+
+A pipe is a small kernel buffer exposed to processes as a pair of file descriptors, one for reading
+and one for writing. Writing data to one end of the pipe makes that data available for reading from
+the other end of the pipe. Pipes provide a way for processes to communicate.
+
+    The following example code runs the program wc with standard input connected to the read
+end of a pipe.
+
+      int p[2];
+      char *argv[2];
+
+      argv[0] = "wc";
+      argv[1] = 0;
+
+      pipe(p);
+      if(fork() == 0) {
+
+          close(0);
+          dup(p[0]);
+          close(p[0]);
+          close(p[1]);
+          exec("/bin/wc", argv);
+      } else {
+          close(p[0]);
+          write(p[1], "hello world\n", 12);
+          close(p[1]);
+      }
+
+The program calls pipe, which creates a new pipe and records the read and write file descriptors
+in the array p. After fork, both parent and child have file descriptors referring to the pipe. The
+child calls close and dup to make file descriptor zero refer to the read end of the pipe, closes the
+file descriptors in p, and calls exec to run wc. When wc reads from its standard input, it reads from
+the pipe. The parent closes the read side of the pipe, writes to the pipe, and then closes the write
+side.
+
+    If no data is available, a read on a pipe waits for either data to be written or for all file descrip-
+tors referring to the write end to be closed; in the latter case, read will return 0, just as if the end of
+a data file had been reached. The fact that read blocks until it is impossible for new data to arrive
+is one reason that it’s important for the child to close the write end of the pipe before executing
+wc above: if one of wc ’s file descriptors referred to the write end of the pipe, wc would never see
+end-of-file.
+
+    The xv6 shell implements pipelines such as grep fork sh.c | wc -l in a manner similar
+to the above code (user/sh.c:101). The child process creates a pipe to connect the left end of the
+pipeline with the right end. Then it calls fork and runcmd for the left end of the pipeline and
+fork and runcmd for the right end, and waits for both to finish. The right end of the pipeline
+may be a command that itself includes a pipe (e.g., a | b | c), which itself forks two new child
+processes (one for b and one for c). Thus, the shell may create a tree of processes. The leaves
+
+                                                         16
+of this tree are commands and the interior nodes are processes that wait until the left and right
+children complete.
+
+    Pipes may seem no more powerful than temporary files: the pipeline
+
+      echo hello world | wc
+
+could be implemented without pipes as
+
+      echo hello world >/tmp/xyz; wc </tmp/xyz
+
+Pipes have at least three advantages over temporary files in this situation. First, pipes automatically
+clean themselves up; with the file redirection, a shell would have to be careful to remove /tmp/xyz
+when done. Second, pipes can pass arbitrarily long streams of data, while file redirection requires
+enough free space on disk to store all the data. Third, pipes allow for parallel execution of pipeline
+stages, while the file approach requires the first program to finish before the second starts.
+
+1.4 File system
+
+The xv6 file system provides data files, which contain uninterpreted byte arrays, and directories,
+which contain named references to data files and other directories. The directories form a tree,
+starting at a special directory called the root. A path like /a/b/c refers to the file or directory
+named c inside the directory named b inside the directory named a in the root directory /. Paths
+that don’t begin with / are evaluated relative to the calling process’s current directory, which can
+be changed with the chdir system call. Both these code fragments open the same file (assuming
+all the directories involved exist):
+
+      chdir("/a");
+      chdir("b");
+      open("c", O_RDONLY);
+
+      open("/a/b/c", O_RDONLY);
+
+The first fragment changes the process’s current directory to /a/b; the second neither refers to nor
+changes the process’s current directory.
+
+    There are system calls to create new files and directories: mkdir creates a new directory, open
+with the O_CREATE flag creates a new data file, and mknod creates a new device file. This example
+illustrates all three:
+
+      mkdir("/dir");
+      fd = open("/dir/file", O_CREATE|O_WRONLY);
+      close(fd);
+      mknod("/console", 1, 1);
+
+mknod creates a special file that refers to a device. Associated with a device file are the major and
+minor device numbers (the two arguments to mknod), which uniquely identify a kernel device.
+When a process later opens a device file, the kernel diverts read and write system calls to the
+kernel device implementation instead of passing them to the file system.
+
+                                                         17
+    A file’s name is distinct from the file itself; the same underlying file, called an inode, can have
+multiple names, called links. Each link consists of an entry in a directory; the entry contains a file
+name and a reference to an inode. An inode holds metadata about a file, including its type (file or
+directory or device), its length, the location of the file’s content on disk, and the number of links to
+a file.
+
+    The fstat system call retrieves information from the inode that a file descriptor refers to. It
+fills in a struct stat, defined in stat.h (kernel/stat.h) as:
+
+#define T_DIR  1    // Directory
+                    // File
+#define T_FILE 2    // Device
+
+#define T_DEVICE 3
+
+struct stat {
+
+    int dev;   // File system’s disk device
+
+    uint ino; // Inode number
+
+    short type; // Type of file
+
+    short nlink; // Number of links to file
+
+    uint64 size; // Size of file in bytes
+
+};
+
+    The link system call creates another file system name referring to the same inode as an exist-
+ing file. This fragment creates a new file named both a and b.
+
+open("a", O_CREATE|O_WRONLY);
+link("a", "b");
+
+Reading from or writing to a is the same as reading from or writing to b. Each inode is identified
+by a unique inode number. After the code sequence above, it is possible to determine that a and b
+refer to the same underlying contents by inspecting the result of fstat: both will return the same
+inode number (ino), and the nlink count will be set to 2.
+
+    The unlink system call removes a name from the file system. The file’s inode and the disk
+space holding its content are only freed when the file’s link count is zero and no file descriptors
+refer to it. Thus adding
+
+unlink("a");
+
+to the last code sequence leaves the inode and file content accessible as b. Furthermore,
+
+fd = open("/tmp/xyz", O_CREATE|O_RDWR);
+unlink("/tmp/xyz");
+
+is an idiomatic way to create a temporary inode with no name that will be cleaned up when the
+process closes fd or exits.
+
+    Unix provides file utilities callable from the shell as user-level programs, for example mkdir,
+ln, and rm. This design allows anyone to extend the command-line interface by adding new user-
+level programs. In hindsight this plan seems obvious, but other systems designed at the time of
+Unix often built such commands into the shell (and built the shell into the kernel).
+
+    One exception is cd, which is built into the shell (user/sh.c:161). cd must change the current
+working directory of the shell itself. If cd were run as a regular command, then the shell would
+
+                                 18
+fork a child process, the child process would run cd, and cd would change the child ’s working
+directory. The parent’s (i.e., the shell’s) working directory would not change.
+
+1.5 Real world
+
+Unix’s combination of “standard” file descriptors, pipes, and convenient shell syntax for operations
+on them was a major advance in writing general-purpose reusable programs. The idea sparked a
+culture of “software tools” that was responsible for much of Unix’s power and popularity, and the
+shell was the first so-called “scripting language.” The Unix system call interface persists today in
+systems like BSD, Linux, and macOS.
+
+    The Unix system call interface has been standardized through the Portable Operating System
+Interface (POSIX) standard. Xv6 is not POSIX compliant: it is missing many system calls (in-
+cluding basic ones such as lseek), and many of the system calls it does provide differ from the
+standard. Our main goals for xv6 are simplicity and clarity while providing a simple UNIX-like
+system-call interface. Several people have extended xv6 with a few more system calls and a sim-
+ple C library in order to run basic Unix programs. Modern kernels, however, provide many more
+system calls, and many more kinds of kernel services, than xv6. For example, they support net-
+working, windowing systems, user-level threads, drivers for many devices, and so on. Modern
+kernels evolve continuously and rapidly, and offer many features beyond POSIX.
+
+    Unix unified access to multiple types of resources (files, directories, and devices) with a single
+set of file-name and file-descriptor interfaces. This idea can be extended to more kinds of resources;
+a good example is Plan 9 [16], which applied the “resources are files” concept to networks, graph-
+ics, and more. However, most Unix-derived operating systems have not followed this route.
+
+    The file system and file descriptors have been powerful abstractions. Even so, there are other
+models for operating system interfaces. Multics, a predecessor of Unix, abstracted file storage in a
+way that made it look like memory, producing a very different flavor of interface. The complexity
+of the Multics design had a direct influence on the designers of Unix, who aimed to build something
+simpler.
+
+    Xv6 does not provide a notion of users or of protecting one user from another; in Unix terms,
+all xv6 processes run as root.
+
+    This book examines how xv6 implements its Unix-like interface, but the ideas and concepts
+apply to more than just Unix. Any operating system must multiplex processes onto the underlying
+hardware, isolate processes from each other, and provide mechanisms for controlled inter-process
+communication. After studying xv6, you should be able to look at other, more complex operating
+systems and see the concepts underlying xv6 in those systems as well.
+
+1.6 Exercises
+
+   1. Write a program that uses UNIX system calls to “ping-pong” a byte between two processes
+       over a pair of pipes, one for each direction. Measure the program’s performance, in ex-
+       changes per second.
+
+                                                         19
+20
+Chapter 2
+
+Operating system organization
+
+A key requirement for an operating system is to support several activities at once. For example,
+using the system call interface described in Chapter 1 a process can start new processes with fork.
+The operating system must time-share the resources of the computer among these processes. For
+example, even if there are more processes than there are hardware CPUs, the operating system
+must ensure that all of the processes get a chance to execute. The operating system must also
+arrange for isolation between the processes. That is, if one process has a bug and malfunctions, it
+shouldn’t affect processes that don’t depend on the buggy process. Complete isolation, however,
+is too strong, since it should be possible for processes to intentionally interact; pipelines are an
+example. Thus an operating system must fulfill three requirements: multiplexing, isolation, and
+interaction.
+
+    This chapter provides an overview of how operating systems are organized to achieve these
+three requirements. It turns out there are many ways to do so, but this text focuses on mainstream
+designs centered around a monolithic kernel, which is used by many Unix operating systems. This
+chapter also provides an overview of an xv6 process, which is the unit of isolation in xv6, and the
+creation of the first process when xv6 starts.
+
+    Xv6 runs on a multi-core1 RISC-V microprocessor, and much of its low-level functionality
+(for example, its process implementation) is specific to RISC-V. RISC-V is a 64-bit CPU, and xv6
+is written in “LP64” C, which means long (L) and pointers (P) in the C programming language
+are 64 bits, but an int is 32 bits. This book assumes the reader has done a bit of machine-level
+programming on some architecture, and will introduce RISC-V-specific ideas as they come up. The
+user-level ISA [2] and privileged architecture [3] documents are the complete specifications. You
+may also refer to “The RISC-V Reader: An Open Architecture Atlas” [15].
+
+    The CPU in a complete computer is surrounded by support hardware, much of it in the form
+of I/O interfaces. Xv6 is written for the support hardware simulated by qemu’s “-machine virt”
+option. This includes RAM, a ROM containing boot code, a serial connection to the user’s key-
+board/screen, and a disk for storage.
+
+    1By “multi-core” this text means multiple CPUs that share memory but execute in parallel, each with its own set of
+registers. This text sometimes uses the term multiprocessor as a synonym for multi-core, though multiprocessor can
+also refer more specifically to a computer with several distinct processor chips.
+
+                                                         21
+2.1 Abstracting physical resources
+
+The first question one might ask when encountering an operating system is why have it at all? That
+is, one could implement the system calls in Figure 1.2 as a library, with which applications link. In
+this plan, each application could even have its own library tailored to its needs. Applications could
+directly interact with hardware resources and use those resources in the best way for the application
+(e.g., to achieve high or predictable performance). Some operating systems for embedded devices
+or real-time systems are organized in this way.
+
+    The downside of this library approach is that, if there is more than one application running, the
+applications must be well-behaved. For example, each application must periodically give up the
+CPU so that other applications can run. Such a cooperative time-sharing scheme may be OK if all
+applications trust each other and have no bugs. It’s more typical for applications to not trust each
+other, and to have bugs, so one often wants stronger isolation than a cooperative scheme provides.
+
+    To achieve strong isolation it’s helpful to forbid applications from directly accessing sensitive
+hardware resources, and instead to abstract the resources into services. For example, Unix applica-
+tions interact with storage only through the file system’s open, read, write, and close system
+calls, instead of reading and writing the disk directly. This provides the application with the con-
+venience of pathnames, and it allows the operating system (as the implementer of the interface)
+to manage the disk. Even if isolation is not a concern, programs that interact intentionally (or just
+wish to keep out of each other’s way) are likely to find a file system a more convenient abstraction
+than direct use of the disk.
+
+    Similarly, Unix transparently switches hardware CPUs among processes, saving and restor-
+ing register state as necessary, so that applications don’t have to be aware of time-sharing. This
+transparency allows the operating system to share CPUs even if some applications are in infinite
+loops.
+
+    As another example, Unix processes use exec to build up their memory image, instead of
+directly interacting with physical memory. This allows the operating system to decide where to
+place a process in memory; if memory is tight, the operating system might even store some of a
+process’s data on disk. exec also provides users with the convenience of a file system to store
+executable program images.
+
+    Many forms of interaction among Unix processes occur via file descriptors. Not only do file
+descriptors abstract away many details (e.g., where data in a pipe or file is stored), they are also
+defined in a way that simplifies interaction. For example, if one application in a pipeline fails, the
+kernel generates an end-of-file signal for the next process in the pipeline.
+
+    The system-call interface in Figure 1.2 is carefully designed to provide both programmer con-
+venience and the possibility of strong isolation. The Unix interface is not the only way to abstract
+resources, but it has proved to be a good one.
+
+2.2 User mode, supervisor mode, and system calls
+
+Strong isolation requires a hard boundary between applications and the operating system. If the
+application makes a mistake, we don’t want the operating system to fail or other applications to
+
+                                                         22
+fail. Instead, the operating system should be able to clean up the failed application and continue
+running other applications. To achieve strong isolation, the operating system must arrange that
+applications cannot modify (or even read) the operating system’s data structures and instructions
+and that applications cannot access other processes’ memory.
+
+    CPUs provide hardware support for strong isolation. For example, RISC-V has three modes in
+which the CPU can execute instructions: machine mode, supervisor mode, and user mode. Instruc-
+tions executing in machine mode have full privilege; a CPU starts in machine mode. Machine mode
+is mostly intended for setting up the computer during boot. Xv6 executes a few lines in machine
+mode and then changes to supervisor mode.
+
+    In supervisor mode the CPU is allowed to execute privileged instructions: for example, en-
+abling and disabling interrupts, reading and writing the register that holds the address of a page
+table, etc. If an application in user mode attempts to execute a privileged instruction, then the CPU
+doesn’t execute the instruction, but switches to supervisor mode so that supervisor-mode code can
+terminate the application, because it did something it shouldn’t be doing. Figure 1.1 in Chapter 1
+illustrates this organization. An application can execute only user-mode instructions (e.g., adding
+numbers, etc.) and is said to be running in user space, while the software in supervisor mode can
+also execute privileged instructions and is said to be running in kernel space. The software running
+in kernel space (or in supervisor mode) is called the kernel.
+
+    An application that wants to invoke a kernel function (e.g., the read system call in xv6) must
+transition to the kernel; an application cannot invoke a kernel function directly. CPUs provide a
+special instruction that switches the CPU from user mode to supervisor mode and enters the kernel
+at an entry point specified by the kernel. (RISC-V provides the ecall instruction for this purpose.)
+Once the CPU has switched to supervisor mode, the kernel can then validate the arguments of the
+system call (e.g., check if the address passed to the system call is part of the application’s memory),
+decide whether the application is allowed to perform the requested operation (e.g., check if the
+application is allowed to write the specified file), and then deny it or execute it. It is important that
+the kernel control the entry point for transitions to supervisor mode; if the application could decide
+the kernel entry point, a malicious application could, for example, enter the kernel at a point where
+the validation of arguments is skipped.
+
+2.3 Kernel organization
+
+A key design question is what part of the operating system should run in supervisor mode. One
+possibility is that the entire operating system resides in the kernel, so that the implementations of
+all system calls run in supervisor mode. This organization is called a monolithic kernel.
+
+    In this organization the entire operating system consists of a single program running with full
+hardware privilege. This organization is convenient because the OS designer doesn’t have to decide
+which parts of the operating system don’t need full hardware privilege. Furthermore, it is easier for
+different parts of the operating system to cooperate. For example, an operating system might have
+a buffer cache that can be shared both by the file system and the virtual memory system.
+
+    A downside of the monolithic organization is that the interactions among different parts of
+the operating system are often complex (as we will see in the rest of this text), and therefore it
+
+                                                         23
+user    shell                        File server
+space          Send message
+
+kernel         Microkernel
+space
+
+                            Figure 2.1: A microkernel with a file-system server
+
+is easy for an operating system developer to make a mistake. In a monolithic kernel, a mistake is
+fatal, because an error in supervisor mode will often cause the kernel to fail. If the kernel fails,
+the computer stops working, and thus all applications fail too. The computer must reboot to start
+again.
+
+    To reduce the risk of mistakes in the kernel, OS designers can minimize the amount of operating
+system code that runs in supervisor mode, and execute the bulk of the operating system in user
+mode. This kernel organization is called a microkernel.
+
+    Figure 2.1 illustrates this microkernel design. In the figure, the file system runs as a user-level
+process. OS services running as processes are called servers. To allow applications to interact with
+the file server, the kernel provides an inter-process communication mechanism to send messages
+from one user-mode process to another. For example, if an application like the shell wants to read
+or write a file, it sends a message to the file server and waits for a response.
+
+    In a microkernel, the kernel interface consists of a few low-level functions for starting applica-
+tions, sending messages, accessing device hardware, etc. This organization allows the kernel to be
+relatively simple, as most of the operating system resides in user-level servers.
+
+    In the real world, both monolithic kernels and microkernels are popular. Many Unix kernels
+are monolithic. For example, Linux has a monolithic kernel, although some OS functions run as
+user-level servers (e.g., the window system). Linux delivers high performance to OS-intensive
+applications, partially because the subsystems of the kernel can be tightly integrated.
+
+    Operating systems such as Minix, L4, and QNX are organized as a microkernel with servers,
+and have seen wide deployment in embedded settings. A variant of L4, seL4, is small enough that
+it has been verified for memory safety and other security properties [8].
+
+    There is much debate among developers of operating systems about which organization is
+better, and there is no conclusive evidence one way or the other. Furthermore, it depends much on
+what “better” means: faster performance, smaller code size, reliability of the kernel, reliability of
+the complete operating system (including user-level services), etc.
+
+    There are also practical considerations that may be more important than the question of which
+organization. Some operating systems have a microkernel but run some of the user-level services
+in kernel space for performance reasons. Some operating systems have monolithic kernels because
+that is how they started and there is little incentive to move to a pure microkernel organization,
+because new features may be more important than rewriting the existing operating system to fit a
+microkernel design.
+
+    From this book’s perspective, microkernel and monolithic operating systems share many key
+ideas. They implement system calls, they use page tables, they handle interrupts, they support
+
+                                                         24
+File           Description
+
+bio.c          Disk block cache for the file system.
+console.c      Connect to the user keyboard and screen.
+entry.S        Very first boot instructions.
+exec.c         exec() system call.
+file.c         File descriptor support.
+fs.c           File system.
+kalloc.c       Physical page allocator.
+kernelvec.S    Handle traps from kernel.
+log.c          File system logging and crash recovery.
+main.c         Control initialization of other modules during boot.
+pipe.c         Pipes.
+plic.c         RISC-V interrupt controller.
+printf.c       Formatted output to the console.
+proc.c         Processes and scheduling.
+sleeplock.c    Locks that yield the CPU.
+spinlock.c     Locks that don’t yield the CPU.
+start.c        Early machine-mode boot code.
+string.c       C string and byte-array library.
+swtch.S        Thread switching.
+syscall.c      Dispatch system calls to handling function.
+sysfile.c      File-related system calls.
+sysproc.c      Process-related system calls.
+trampoline.S   Assembly code to switch between user and kernel.
+trap.c         C code to handle and return from traps and interrupts.
+uart.c         Serial-port console device driver.
+virtio_disk.c  Disk device driver.
+vm.c           Manage page tables and address spaces.
+
+               Figure 2.2: Xv6 kernel source files.
+
+processes, they use locks for concurrency control, they implement a file system, etc. This book
+focuses on these core ideas.
+
+    Xv6 is implemented as a monolithic kernel, like most Unix operating systems. Thus, the xv6
+kernel interface corresponds to the operating system interface, and the kernel implements the com-
+plete operating system. Since xv6 doesn’t provide many services, its kernel is smaller than some
+microkernels, but conceptually xv6 is monolithic.
+
+2.4 Code: xv6 organization
+
+The xv6 kernel source is in the kernel/ sub-directory. The source is divided into files, following
+a rough notion of modularity; Figure 2.2 lists the files. The inter-module interfaces are defined in
+
+                                                         25
+MAXVA  trampoline
+       trapframe
+
+       heap
+
+                                                                              user stack
+
+                                                                                user text
+                                                                                and data
+                                                                  0
+
+                          Figure 2.3: Layout of a process’s virtual address space
+
+defs.h (kernel/defs.h).
+
+2.5 Process overview
+
+The unit of isolation in xv6 (as in other Unix operating systems) is a process. The process ab-
+straction prevents one process from wrecking or spying on another process’s memory, CPU, file
+descriptors, etc. It also prevents a process from wrecking the kernel itself, so that a process can’t
+subvert the kernel’s isolation mechanisms. The kernel must implement the process abstraction
+with care because a buggy or malicious application may trick the kernel or hardware into doing
+something bad (e.g., circumventing isolation). The mechanisms used by the kernel to implement
+processes include the user/supervisor mode flag, address spaces, and time-slicing of threads.
+
+    To help enforce isolation, the process abstraction provides the illusion to a program that it has
+its own private machine. A process provides a program with what appears to be a private memory
+system, or address space, which other processes cannot read or write. A process also provides the
+program with what appears to be its own CPU to execute the program’s instructions.
+
+    Xv6 uses page tables (which are implemented by hardware) to give each process its own ad-
+dress space. The RISC-V page table translates (or “maps”) a virtual address (the address that an
+RISC-V instruction manipulates) to a physical address (an address that the CPU sends to main
+memory).
+
+    Xv6 maintains a separate page table for each process that defines that process’s address space.
+As illustrated in Figure 2.3, an address space includes the process’s user memory starting at virtual
+address zero. Instructions come first, followed by global variables, then the stack, and finally a
+“heap” area (for malloc) that the process can expand as needed. There are a number of factors
+that limit the maximum size of a process’s address space: pointers on the RISC-V are 64 bits
+wide; the hardware uses only the low 39 bits when looking up virtual addresses in page tables;
+and xv6 uses only 38 of those 39 bits. Thus, the maximum address is 238 − 1 = 0x3fffffffff, which
+
+                                                         26
+is MAXVA (kernel/riscv.h:378). At the top of the address space xv6 places a trampoline page (4096
+bytes) and a trapframe page. Xv6 uses these two pages to transition into the kernel and back; the
+trampoline page contains the code to transition in and out of the kernel, and the trapframe is where
+the kernel saves the process’s user registers, as Chapter 4 explains.
+
+    The xv6 kernel maintains many pieces of state for each process, which it gathers into a struct proc
+(kernel/proc.h:85). A process’s most important pieces of kernel state are its page table, its kernel
+stack, and its run state. We’ll use the notation p->xxx to refer to elements of the proc structure;
+for example, p->pagetable is a pointer to the process’s page table.
+
+    Each process has a thread of control (or thread for short) that holds the state needed to ex-
+ecute the process. At any given time, a thread might be executing on a CPU, or suspended (not
+executing, but capable of resuming executing in the future). To switch a CPU between processes,
+the kernel suspends the thread currently running on that CPU and saves its state, and restores the
+state of another process’s previously-suspended thread. Much of the state of a thread (local vari-
+ables, function call return addresses) is stored on the thread’s stacks. Each process has two stacks:
+a user stack and a kernel stack (p->kstack). When the process is executing user instructions,
+only its user stack is in use, and its kernel stack is empty. When the process enters the kernel (for
+a system call or interrupt), the kernel code executes on the process’s kernel stack; while a process
+is in the kernel, its user stack still contains saved data, but isn’t actively used. A process’s thread
+alternates between actively using its user stack and its kernel stack. The kernel stack is separate
+(and protected from user code) so that the kernel can execute even if a process has wrecked its user
+stack.
+
+    A process can make a system call by executing the RISC-V ecall instruction. This instruction
+raises the hardware privilege level and changes the program counter to a kernel-defined entry
+point. The code at the entry point switches to the process’s kernel stack and executes the kernel
+instructions that implement the system call. When the system call completes, the kernel switches
+back to the user stack and returns to user space by calling the sret instruction, which lowers
+the hardware privilege level and resumes executing user instructions just after the system call
+instruction. A process’s thread can “block” in the kernel to wait for I/O, and resume where it left
+off when the I/O has finished.
+
+    p->state indicates whether the process is allocated, ready to run, currently running on a CPU,
+waiting for I/O, or exiting.
+
+    p->pagetable holds the process’s page table, in the format that the RISC-V hardware ex-
+pects. Xv6 causes the paging hardware to use a process’s p->pagetable when executing that
+process in user space. A process’s page table also serves as the record of the addresses of the
+physical pages allocated to store the process’s memory.
+
+    In summary, a process bundles two design ideas: an address space to give a process the illusion
+of its own memory, and a thread to give the process the illusion of its own CPU. In xv6, a process
+consists of one address space and one thread. In real operating systems a process may have more
+than one thread to take advantage of multiple CPUs.
+
+                                                         27
+2.6 Code: starting xv6, the first process and system call
+
+To make xv6 more concrete, we’ll outline how the kernel starts and runs the first process. The
+subsequent chapters will describe the mechanisms that show up in this overview in more detail.
+
+    When the RISC-V computer powers on, it initializes itself and runs a boot loader which is
+stored in read-only memory. The boot loader loads the xv6 kernel into memory. Then, in machine
+mode, the CPU executes xv6 starting at _entry (kernel/entry.S:7). The RISC-V starts with paging
+hardware disabled: virtual addresses map directly to physical addresses.
+
+    The loader loads the xv6 kernel into memory at physical address 0x80000000. The reason it
+places the kernel at 0x80000000 rather than 0x0 is because the address range 0x0:0x80000000
+contains I/O devices.
+
+    The instructions at _entry set up a stack so that xv6 can run C code. Xv6 declares space
+for an initial stack, stack0, in the file start.c (kernel/start.c:11). The code at _entry loads the
+stack pointer register sp with the address stack0+4096, the top of the stack, because the stack
+on RISC-V grows down. Now that the kernel has a stack, _entry calls into C code at start
+(kernel/start.c:15).
+
+    The function start performs some configuration that is only allowed in machine mode, and
+then switches to supervisor mode. To enter supervisor mode, RISC-V provides the instruction
+mret. This instruction is most often used to return from a previous call from supervisor mode to
+machine mode. start isn’t returning from such a call, but sets things up as if it were: it sets the
+previous privilege mode to supervisor in the register mstatus, it sets the return address to main
+by writing main’s address into the register mepc, disables virtual address translation in supervisor
+mode by writing 0 into the page-table register satp, and delegates all interrupts and exceptions to
+supervisor mode.
+
+    Before jumping into supervisor mode, start performs one more task: it programs the clock
+chip to generate timer interrupts. With this housekeeping out of the way, start “returns” to super-
+visor mode by calling mret. This causes the program counter to change to main (kernel/main.c:11),
+the address previously stored in mepc.
+
+    After main (kernel/main.c:11) initializes several devices and subsystems, it creates the first pro-
+cess by calling userinit (kernel/proc.c:233). The first process executes a small program written in
+RISC-V assembly, which makes the first system call in xv6. initcode.S (user/initcode.S:3) loads
+the number for the exec system call, SYS_EXEC (kernel/syscall.h:8), into register a7, and then calls
+ecall to re-enter the kernel.
+
+    The kernel uses the number in register a7 in syscall (kernel/syscall.c:132) to call the desired
+system call. The system call table (kernel/syscall.c:107) maps SYS_EXEC to the function sys_exec,
+which the kernel invokes. As we saw in Chapter 1, exec replaces the memory and registers of the
+current process with a new program (in this case, /init).
+
+    Once the kernel has completed exec, it returns to user space in the /init process. init
+(user/init.c:15) creates a new console device file if needed and then opens it as file descriptors 0, 1,
+and 2. Then it starts a shell on the console. The system is up.
+
+                                                         28
+2.7 Security Model
+
+You may wonder how the operating system deals with buggy or malicious code. Because coping
+with malice is strictly harder than dealing with accidental bugs, it’s reasonable to focus mostly
+on providing security against malice. Here’s a high-level view of typical security assumptions and
+goals in operating system design.
+
+    The operating system must assume that a process’s user-level code will do its best to wreck the
+kernel or other processes. User code may try to dereference pointers outside its allowed address
+space; it may attempt to execute any RISC-V instructions, even those not intended for user code;
+it may try to read and write any RISC-V control register; it may try to directly access device
+hardware; and it may pass clever values to system calls in an attempt to trick the kernel into
+crashing or doing something stupid. The kernel’s goal is to restrict each user processes so that all
+it can do is read/write/execute its own user memory, use the 32 general-purpose RISC-V registers,
+and affect the kernel and other processes in the ways that system calls are intended to allow. The
+kernel must prevent any other actions. This is typically an absolute requirement in kernel design.
+
+    The expectations for the kernel’s own code are quite different. Kernel code is assumed to be
+written by well-meaning and careful programmers. Kernel code is expected to be bug-free, and
+certainly to contain nothing malicious. This assumption affects how we analyze kernel code. For
+example, there are many internal kernel functions (e.g., the spin locks) that would cause serious
+problems if kernel code used them incorrectly. When examining any specific piece of kernel code,
+we’ll want to convince ourselves that it behaves correctly. We assume, however, that kernel code
+in general is correctly written, and follows all the rules about use of the kernel’s own functions and
+data structures. At the hardware level, the RISC-V CPU, RAM, disk, etc. are assumed to operate
+as advertised in the documentation, with no hardware bugs.
+
+    Of course in real life things are not so straightforward. It’s difficult to prevent clever user code
+from making a system unusable (or causing it to panic) by consuming kernel-protected resources
+– disk space, CPU time, process table slots, etc. It’s usually impossible to write bug-free kernel
+code or design bug-free hardware; if the writers of malicious user code are aware of kernel or
+hardware bugs, they will exploit them. Even in mature, widely-used kernels, such as Linux, people
+discover new vulnerabilities continuously [1]. It’s worthwhile to design safeguards into the kernel
+against the possibility that it has bugs: assertions, type checking, stack guard pages, etc. Finally,
+the distinction between user and kernel code is sometimes blurred: some privileged user-level
+processes may provide essential services and effectively be part of the operating system, and in
+some operating systems privileged user code can insert new code into the kernel (as with Linux’s
+loadable kernel modules).
+
+2.8 Real world
+
+Most operating systems have adopted the process concept, and most processes look similar to
+xv6’s. Modern operating systems, however, support several threads within a process, to allow a
+single process to exploit multiple CPUs. Supporting multiple threads in a process involves quite a
+bit of machinery that xv6 doesn’t have, often including interface changes (e.g., Linux’s clone, a
+
+                                                         29
+variant of fork), to control which aspects of a process threads share.
+
+2.9 Exercises
+
+   1. Add a system call to xv6 that returns the amount of free memory available.
+
+                                                         30
+Chapter 3
+
+Page tables
+
+Page tables are the most popular mechanism through which the operating system provides each
+process with its own private address space and memory. Page tables determine what memory ad-
+dresses mean, and what parts of physical memory can be accessed. They allow xv6 to isolate
+different process’s address spaces and to multiplex them onto a single physical memory. Page ta-
+bles are a popular design because they provide a level of indirection that allow operating systems
+to perform many tricks. Xv6 performs a few tricks: mapping the same memory (a trampoline page)
+in several address spaces, and guarding kernel and user stacks with an unmapped page. The rest of
+this chapter explains the page tables that the RISC-V hardware provides and how xv6 uses them.
+
+3.1 Paging hardware
+
+As a reminder, RISC-V instructions (both user and kernel) manipulate virtual addresses. The ma-
+chine’s RAM, or physical memory, is indexed with physical addresses. The RISC-V page table
+hardware connects these two kinds of addresses, by mapping each virtual address to a physical
+address.
+
+    Xv6 runs on Sv39 RISC-V, which means that only the bottom 39 bits of a 64-bit virtual address
+are used; the top 25 bits are not used. In this Sv39 configuration, a RISC-V page table is logically
+an array of 227 (134,217,728) page table entries (PTEs). Each PTE contains a 44-bit physical page
+number (PPN) and some flags. The paging hardware translates a virtual address by using the top 27
+bits of the 39 bits to index into the page table to find a PTE, and making a 56-bit physical address
+whose top 44 bits come from the PPN in the PTE and whose bottom 12 bits are copied from the
+original virtual address. Figure 3.1 shows this process with a logical view of the page table as a
+simple array of PTEs (see Figure 3.2 for a fuller story). A page table gives the operating system
+control over virtual-to-physical address translations at the granularity of aligned chunks of 4096
+(212) bytes. Such a chunk is called a page.
+
+    In Sv39 RISC-V, the top 25 bits of a virtual address are not used for translation. The physical
+address also has room for growth: there is room in the PTE format for the physical page number
+to grow by another 10 bits. The designers of RISC-V chose these numbers based on technology
+predictions. 239 bytes is 512 GB, which should be enough address space for applications running
+
+                                                         31
+        Virtual address
+
+25      27                       12
+
+64 EXT  Index                Oﬀset
+
+                         44  10      2^27
+
+               PPN Flags             56
+
+        1
+        0
+
+               Page table
+
+                                           44  12
+
+                                           Physical Address
+
+Figure 3.1: RISC-V virtual and physical addresses, with a simplified logical page table.
+
+on RISC-V computers. 256 is enough physical memory space for the near future to fit many I/O
+devices and RAM chips. If more is needed, the RISC-V designers have defined Sv48 with 48-bit
+virtual addresses [3].
+
+    As Figure 3.2 shows, a RISC-V CPU translates a virtual address into a physical in three steps.
+A page table is stored in physical memory as a three-level tree. The root of the tree is a 4096-byte
+page-table page that contains 512 PTEs, which contain the physical addresses for page-table pages
+in the next level of the tree. Each of those pages contains 512 PTEs for the final level in the tree.
+The paging hardware uses the top 9 bits of the 27 bits to select a PTE in the root page-table page,
+the middle 9 bits to select a PTE in a page-table page in the next level of the tree, and the bottom
+9 bits to select the final PTE. (In Sv48 RISC-V a page table has four levels, and bits 39 through 47
+of a virtual address index into the top-level.)
+
+    If any of the three PTEs required to translate an address is not present, the paging hardware
+raises a page-fault exception, leaving it up to the kernel to handle the exception (see Chapter 4).
+
+    The three-level structure of Figure 3.2 allows a memory-efficient way of recording PTEs, com-
+pared to the single-level design of Figure 3.1. In the common case in which large ranges of virtual
+addresses have no mappings, the three-level structure can omit entire page directories. For exam-
+ple, if an application uses only a few pages starting at address zero, then the entries 1 through 511
+of the top-level page directory are invalid, and the kernel doesn’t have to allocate pages those for
+511 intermediate page directories. Furthermore, the kernel also doesn’t have to allocate pages for
+the bottom-level page directories for those 511 intermediate page directories. So, in this example,
+the three-level design saves 511 pages for intermediate page directories and 511 × 512 pages for
+bottom-level page directories.
+
+    Although a CPU walks the three-level structure in hardware as part of executing a load or store
+instruction, a potential downside of three levels is that the CPU must load three PTEs from memory
+to perform the translation of the virtual address in the load/store instruction to a physical address.
+To avoid the cost of loading PTEs from physical memory, a RISC-V CPU caches page table entries
+in a Translation Look-aside Buffer (TLB).
+
+                                                         32
+                         Virtual address                              Physical Address
+
+                                       9  9   9  12                   44   12
+
+                    EXT L2                L1 L0 Oﬀset                 PPN  Oﬀset
+
+     44         10
+
+511
+
+                         44               10
+
+                    511
+
+     PPN Flags                                         44         10
+
+1                          PPN Flags             511
+0
+                    1                                   PPN Flags
+   Page Directory   0
+                                                 1
+ satp                  Page Directory            0
+
+                                                    Page Directory
+
+63              53                        10 9 8 7 6 5 4 3 2 1 0
+
+      Reserved  Physical Page Number RSWD A G U X WR V
+
+                                                                V - Valid
+                                                                R - Readable
+                                                                W - Writable
+                                                                X - Executable
+                                                                U - User
+                                                                G - Global
+
+                                                                 A - Accessed
+                                                                 D - Dirty (0 in page directory)
+                                                      Reserved for supervisor software
+
+     Figure 3.2: RISC-V address translation details.
+
+    Each PTE contains flag bits that tell the paging hardware how the associated virtual address is
+allowed to be used. PTE_V indicates whether the PTE is present: if it is not set, a reference to the
+page causes an exception (i.e., is not allowed). PTE_R controls whether instructions are allowed
+to read to the page. PTE_W controls whether instructions are allowed to write to the page. PTE_X
+controls whether the CPU may interpret the content of the page as instructions and execute them.
+PTE_U controls whether instructions in user mode are allowed to access the page; if PTE_U is not
+set, the PTE can be used only in supervisor mode. Figure 3.2 shows how it all works. The flags and
+all other page hardware-related structures are defined in (kernel/riscv.h)
+
+    To tell a CPU to use a page table, the kernel must write the physical address of the root page-
+table page into the satp register. A CPU will translate all addresses generated by subsequent
+instructions using the page table pointed to by its own satp. Each CPU has its own satp so that
+different CPUs can run different processes, each with a private address space described by its own
+page table.
+
+    From the kernel’s point of view, a page table is data stored in memory, and the kernel creates
+and modifies page tables using code much like you might see for any tree-shaped data structure.
+
+    A few notes about terms used in this book. Physical memory refers to storage cells in RAM.
+A byte of physical memory has an address, called a physical address. Instructions that dereference
+addresses (such as loads, stores, jumps, and function calls) use only virtual addresses, which the
+paging hardware translates to physical addresses, and then sends to the RAM hardware to read or
+write storage. An address space is the set of virtual addresses that are valid in a given page table;
+
+                                                         33
+each xv6 process has a separate user address space, and the xv6 kernel has its own address space as
+well. User memory refers to a process’s user address space plus the physical memory that the page
+table allows the process to access. Virtual memory refers to the ideas and techniques associated
+with managing page tables and using them to achieve goals such as isolation.
+
+                                          2^56-1               Physical Addresses
+
+    MAXVA         Virtual Addresses  R-X                       Unused
+                                     ---
+PHYSTOP                 Trampoline   RW-
+(0x88000000)            Guard page   ---
+                                     RW-
+                         Kstack 0
+                        Guard page
+
+                      ... Kstack 1
+
+                  Free memory        RW-
+
+                                                               Physical memory (RAM)
+
+                  Kernel data        RW-
+
+                  Kernel text        R-X
+
+KERNBASE                                                       Unused
+(0x80000000)                                                   and other I/O devices
+
+0x10001000        VIRTIO disk        RW-                       VIRTIO disk
+0x10000000         UART0             RW-                         UART0
+0x0C000000                           RW-
+                     PLIC                                        PLIC
+               0                                   0x02000000    CLINT
+
+                                          0x1000                 Unused
+                                                   0             boot ROM
+
+                                                                    Unused
+
+Figure 3.3: On the left, xv6’s kernel address space. RWX refer to PTE read, write, and execute
+permissions. On the right, the RISC-V physical address space that xv6 expects to see.
+
+3.2 Kernel address space
+
+Xv6 maintains one page table per process, describing each process’s user address space, plus a sin-
+gle page table that describes the kernel’s address space. The kernel configures the layout of its ad-
+dress space to give itself access to physical memory and various hardware resources at predictable
+
+                                                         34
+virtual addresses. Figure 3.3 shows how this layout maps kernel virtual addresses to physical ad-
+dresses. The file (kernel/memlayout.h) declares the constants for xv6’s kernel memory layout.
+
+    QEMU simulates a computer that includes RAM (physical memory) starting at physical ad-
+dress 0x80000000 and continuing through at least 0x88000000, which xv6 calls PHYSTOP.
+The QEMU simulation also includes I/O devices such as a disk interface. QEMU exposes the de-
+vice interfaces to software as memory-mapped control registers that sit below 0x80000000 in the
+physical address space. The kernel can interact with the devices by reading/writing these special
+physical addresses; such reads and writes communicate with the device hardware rather than with
+RAM. Chapter 4 explains how xv6 interacts with devices.
+
+    The kernel gets at RAM and memory-mapped device registers using “direct mapping;” that
+is, mapping the resources at virtual addresses that are equal to the physical address. For example,
+the kernel itself is located at KERNBASE=0x80000000 in both the virtual address space and in
+physical memory. Direct mapping simplifies kernel code that reads or writes physical memory. For
+example, when fork allocates user memory for the child process, the allocator returns the physical
+address of that memory; fork uses that address directly as a virtual address when it is copying the
+parent’s user memory to the child.
+
+    There are a couple of kernel virtual addresses that aren’t direct-mapped:
+
+    • The trampoline page. It is mapped at the top of the virtual address space; user page tables
+       have this same mapping. Chapter 4 discusses the role of the trampoline page, but we see
+       here an interesting use case of page tables; a physical page (holding the trampoline code) is
+       mapped twice in the virtual address space of the kernel: once at top of the virtual address
+       space and once with a direct mapping.
+
+    • The kernel stack pages. Each process has its own kernel stack, which is mapped high so
+       that below it xv6 can leave an unmapped guard page. The guard page’s PTE is invalid (i.e.,
+       PTE_V is not set), so that if the kernel overflows a kernel stack, it will likely cause an excep-
+       tion and the kernel will panic. Without a guard page an overflowing stack would overwrite
+       other kernel memory, resulting in incorrect operation. A panic crash is preferable.
+
+    While the kernel uses its stacks via the high-memory mappings, they are also accessible to the
+kernel through a direct-mapped address. An alternate design might have just the direct mapping,
+and use the stacks at the direct-mapped address. In that arrangement, however, providing guard
+pages would involve unmapping virtual addresses that would otherwise refer to physical memory,
+which would then be hard to use.
+
+    The kernel maps the pages for the trampoline and the kernel text with the permissions PTE_R
+and PTE_X. The kernel reads and executes instructions from these pages. The kernel maps the other
+pages with the permissions PTE_R and PTE_W, so that it can read and write the memory in those
+pages. The mappings for the guard pages are invalid.
+
+3.3 Code: creating an address space
+
+Most of the xv6 code for manipulating address spaces and page tables resides in vm.c (ker-
+nel/vm.c:1). The central data structure is pagetable_t, which is really a pointer to a RISC-V
+
+                                                         35
+root page-table page; a pagetable_t may be either the kernel page table, or one of the per-
+process page tables. The central functions are walk, which finds the PTE for a virtual address,
+and mappages, which installs PTEs for new mappings. Functions starting with kvm manipulate
+the kernel page table; functions starting with uvm manipulate a user page table; other functions are
+used for both. copyout and copyin copy data to and from user virtual addresses provided as
+system call arguments; they are in vm.c because they need to explicitly translate those addresses
+in order to find the corresponding physical memory.
+
+    Early in the boot sequence, main calls kvminit (kernel/vm.c:54) to create the kernel’s page ta-
+ble using kvmmake (kernel/vm.c:20). This call occurs before xv6 has enabled paging on the RISC-V,
+so addresses refer directly to physical memory. kvmmake first allocates a page of physical mem-
+ory to hold the root page-table page. Then it calls kvmmap to install the translations that the kernel
+needs. The translations include the kernel’s instructions and data, physical memory up to PHYSTOP,
+and memory ranges which are actually devices. proc_mapstacks (kernel/proc.c:33) allocates a
+kernel stack for each process. It calls kvmmap to map each stack at the virtual address generated
+by KSTACK, which leaves room for the invalid stack-guard pages.
+
+    kvmmap (kernel/vm.c:132) calls mappages (kernel/vm.c:144), which installs mappings into a
+page table for a range of virtual addresses to a corresponding range of physical addresses. It does
+this separately for each virtual address in the range, at page intervals. For each virtual address to
+be mapped, mappages calls walk to find the address of the PTE for that address. It then initializes
+the PTE to hold the relevant physical page number, the desired permissions (PTE_W, PTE_X, and/or
+PTE_R), and PTE_V to mark the PTE as valid (kernel/vm.c:165).
+
+    walk (kernel/vm.c:86) mimics the RISC-V paging hardware as it looks up the PTE for a virtual
+address (see Figure 3.2). walk descends the page table one level at a time, using each level’s 9
+bits of virtual address to index into the relevant page directory page. At each level it finds either
+the PTE of the next level’s page directory page, or the PTE of final page (kernel/vm.c:92). If a PTE
+in a first or second level page directory page isn’t valid, then the required directory page hasn’t
+yet been allocated; if the alloc argument is set, walk allocates a new page-table page and puts
+its physical address in the PTE. It returns the address of the PTE in the lowest layer in the tree
+(kernel/vm.c:102).
+
+    The above code depends on physical memory being direct-mapped into the kernel virtual ad-
+dress space. For example, as walk descends levels of the page table, it pulls the (physical) address
+of the next-level-down page table from a PTE (kernel/vm.c:94), and then uses that address as a
+virtual address to fetch the PTE at the next level down (kernel/vm.c:92).
+
+    main calls kvminithart (kernel/vm.c:62) to install the kernel page table. It writes the physical
+address of the root page-table page into the register satp. After this the CPU will translate ad-
+dresses using the kernel page table. Since the kernel uses a direct mapping, the now virtual address
+of the next instruction will map to the right physical memory address.
+
+    Each RISC-V CPU caches page table entries in a Translation Look-aside Buffer (TLB), and
+when xv6 changes a page table, it must tell the CPU to invalidate corresponding cached TLB
+entries. If it didn’t, then at some point later the TLB might use an old cached mapping, point-
+ing to a physical page that in the meantime has been allocated to another process, and as a re-
+sult, a process might be able to scribble on some other process’s memory. The RISC-V has an
+
+                                                         36
+instruction sfence.vma that flushes the current CPU’s TLB. Xv6 executes sfence.vma in
+kvminithart after reloading the satp register, and in the trampoline code that switches to a
+user page table before returning to user space (kernel/trampoline.S:89).
+
+    It is also necessary to issue sfence.vma before changing satp, in order to wait for comple-
+tion of all outstanding loads and stores. This wait ensures that preceding updates to the page table
+have completed, and ensures that preceding loads and stores use the old page table, not the new
+one.
+
+    To avoid flushing the complete TLB, RISC-V CPUs may support address space identifiers
+(ASIDs) [3]. The kernel can then flush just the TLB entries for a particular address space. Xv6
+does not use this feature.
+
+3.4 Physical memory allocation
+
+The kernel must allocate and free physical memory at run-time for page tables, user memory,
+kernel stacks, and pipe buffers.
+
+    Xv6 uses the physical memory between the end of the kernel and PHYSTOP for run-time alloca-
+tion. It allocates and frees whole 4096-byte pages at a time. It keeps track of which pages are free
+by threading a linked list through the pages themselves. Allocation consists of removing a page
+from the linked list; freeing consists of adding the freed page to the list.
+
+3.5 Code: Physical memory allocator
+
+The allocator resides in kalloc.c (kernel/kalloc.c:1). The allocator’s data structure is a free list
+of physical memory pages that are available for allocation. Each free page’s list element is a
+struct run (kernel/kalloc.c:17). Where does the allocator get the memory to hold that data struc-
+ture? It store each free page’s run structure in the free page itself, since there’s nothing else stored
+there. The free list is protected by a spin lock (kernel/kalloc.c:21-24). The list and the lock are
+wrapped in a struct to make clear that the lock protects the fields in the struct. For now, ignore the
+lock and the calls to acquire and release; Chapter 6 will examine locking in detail.
+
+    The function main calls kinit to initialize the allocator (kernel/kalloc.c:27). kinit initializes
+the free list to hold every page between the end of the kernel and PHYSTOP. Xv6 ought to de-
+termine how much physical memory is available by parsing configuration information provided
+by the hardware. Instead xv6 assumes that the machine has 128 megabytes of RAM. kinit calls
+freerange to add memory to the free list via per-page calls to kfree. A PTE can only refer to
+a physical address that is aligned on a 4096-byte boundary (is a multiple of 4096), so freerange
+uses PGROUNDUP to ensure that it frees only aligned physical addresses. The allocator starts with
+no memory; these calls to kfree give it some to manage.
+
+    The allocator sometimes treats addresses as integers in order to perform arithmetic on them
+(e.g., traversing all pages in freerange), and sometimes uses addresses as pointers to read and
+write memory (e.g., manipulating the run structure stored in each page); this dual use of addresses
+is the main reason that the allocator code is full of C type casts.
+
+                                                         37
+    The function kfree (kernel/kalloc.c:47) begins by setting every byte in the memory being freed
+to the value 1. This will cause code that uses memory after freeing it (uses “dangling references”)
+to read garbage instead of the old valid contents; hopefully that will cause such code to break faster.
+Then kfree prepends the page to the free list: it casts pa to a pointer to struct run, records the
+old start of the free list in r->next, and sets the free list equal to r. kalloc removes and returns
+the first element in the free list.
+
+3.6 Process address space
+
+Each process has its own page table, and when xv6 switches between processes, it also changes
+page tables. Figure 3.4 shows a process’s address space in more detail than Figure 2.3. A process’s
+user memory starts at virtual address zero and can grow up to MAXVA (kernel/riscv.h:375), allowing
+a process to address in principle 256 Gigabytes of memory.
+
+    A process’s address space consists of pages that contain the text of the program (which xv6
+maps with the permissions PTE_R, PTE_X, and PTE_U), pages that contain the pre-initialized data
+of the program, a page for the stack, and pages for the heap. Xv6 maps the data, stack, and heap
+with the permissions PTE_R, PTE_W, and PTE_U.
+
+    Using permissions within a user address space is a common technique to harden a user process.
+If the text were mapped with PTE_W, then a process could accidentally modify its own program;
+for example, a programming error may cause the program to write to a null pointer, modifying
+instructions at address 0, and then continue running, perhaps creating more havoc. To detect such
+errors immediately, xv6 maps the text without PTE_W; if a program accidentally attempts to store
+to address 0, the hardware will refuse to execute the store and raises a page fault (see Section 4.6).
+The kernel then kills the process and prints out an informative message so that the developer can
+track down the problem.
+
+    Similarly, by mapping data without PTE_X, a user program cannot accidentally jump to an
+address in the program’s data and start executing at that address.
+
+    In the real world, hardening a process by setting permissions carefully also aids in defending
+against security attacks. An adversary may feed carefully-constructed input to a program (e.g., a
+Web server) that triggers a bug in the program in the hope of turning that bug into an exploit [14].
+Setting permissions carefully and other techniques, such as randomizing of the layout of the user
+address space, make such attacks harder.
+
+    The stack is a single page, and is shown with the initial contents as created by exec. Strings
+containing the command-line arguments, as well as an array of pointers to them, are at the very
+top of the stack. Just under that are values that allow a program to start at main as if the function
+main(argc, argv) had just been called.
+
+    To detect a user stack overflowing the allocated stack memory, xv6 places an inaccessible guard
+page right below the stack by clearing the PTE_U flag. If the user stack overflows and the process
+tries to use an address below the stack, the hardware will generate a page-fault exception because
+the guard page is inaccessible to a program running in user mode. A real-world operating system
+might instead automatically allocate more memory for the user stack when it overflows.
+
+    When a process asks xv6 for more user memory, xv6 grows the process’s heap. Xv6 first uses
+
+                                                         38
+                    Figure 3.4: A process’s user address space, with its initial stack.
+
+kalloc to allocate physical pages. It then adds PTEs to the process’s page table that point to the
+new physical pages. Xv6 sets the PTE_W, PTE_R, PTE_U, and PTE_V flags in these PTEs. Most
+processes do not use the entire user address space; xv6 leaves PTE_V clear in unused PTEs.
+
+    We see here a few nice examples of use of page tables. First, different processes’ page tables
+translate user addresses to different pages of physical memory, so that each process has private user
+memory. Second, each process sees its memory as having contiguous virtual addresses starting at
+zero, while the process’s physical memory can be non-contiguous. Third, the kernel maps a page
+with trampoline code at the top of the user address space (without PTE_U), thus a single page of
+physical memory shows up in all address spaces, but can be used only by the kernel.
+
+3.7 Code: sbrk
+
+sbrk is the system call for a process to shrink or grow its memory. The system call is implemented
+by the function growproc (kernel/proc.c:260). growproc calls uvmalloc or uvmdealloc, de-
+pending on whether n is positive or negative. uvmalloc (kernel/vm.c:233) allocates physical mem-
+ory with kalloc, zeros the allocated memory, and adds PTEs to the user page table with mappages.
+uvmdealloc calls uvmunmap (kernel/vm.c:178), which uses walk to find PTEs and kfree to
+free the physical memory they refer to.
+
+    Xv6 uses a process’s page table not just to tell the hardware how to map user virtual addresses,
+
+                                                         39
+but also as the only record of which physical memory pages are allocated to that process. That is
+the reason why freeing user memory (in uvmunmap) requires examination of the user page table.
+
+3.8 Code: exec
+
+exec is a system call that replaces a process’s user address space with data read from a file, called
+a binary or executable file. A binary is typically the output of the compiler and linker, and holds
+machine instructions and program data. exec (kernel/exec.c:23) opens the named binary path using
+namei (kernel/exec.c:36), which is explained in Chapter 8. Then, it reads the ELF header. Xv6
+binaries are formatted in the widely-used ELF format, defined in (kernel/elf.h). An ELF binary
+consists of an ELF header, struct elfhdr (kernel/elf.h:6), followed by a sequence of program
+section headers, struct proghdr (kernel/elf.h:25). Each progvhdr describes a section of the
+application that must be loaded into memory; xv6 programs have two program section headers:
+one for instructions and one for data.
+
+    The first step is a quick check that the file probably contains an ELF binary. An ELF binary
+starts with the four-byte “magic number” 0x7F, ‘E’, ‘L’, ‘F’, or ELF_MAGIC (kernel/elf.h:3). If
+the ELF header has the right magic number, exec assumes that the binary is well-formed.
+
+    exec allocates a new page table with no user mappings with proc_pagetable (kernel/exec.c:49),
+allocates memory for each ELF segment with uvmalloc (kernel/exec.c:65), and loads each segment
+into memory with loadseg (kernel/exec.c:10). loadseg uses walkaddr to find the physical ad-
+dress of the allocated memory at which to write each page of the ELF segment, and readi to read
+from the file.
+
+    The program section header for /init, the first user program created with exec, looks like
+this:
+
+# objdump -p user/_init
+
+user/_init:  file format elf64-little
+
+Program Header:
+0x70000003 off 0x0000000000006bb0 vaddr 0x0000000000000000
+
+                                                                      paddr 0x0000000000000000 align 2**0
+                filesz 0x000000000000004a memsz 0x0000000000000000 flags r--
+       LOAD off 0x0000000000001000 vaddr 0x0000000000000000
+
+                                                                      paddr 0x0000000000000000 align 2**12
+                filesz 0x0000000000001000 memsz 0x0000000000001000 flags r-x
+       LOAD off 0x0000000000002000 vaddr 0x0000000000001000
+
+                                                                      paddr 0x0000000000001000 align 2**12
+                filesz 0x0000000000000010 memsz 0x0000000000000030 flags rw-
+     STACK off 0x0000000000000000 vaddr 0x0000000000000000
+
+                                                                      paddr 0x0000000000000000 align 2**4
+                filesz 0x0000000000000000 memsz 0x0000000000000000 flags rw-
+
+    We see that the text segment should be loaded at virtual address 0x0 in memory (without write
+permissions) from content at offset 0x1000 in the file. We also see that the data should be loaded
+at address 0x1000, which is at a page boundary, and without executable permissions.
+
+                         40
+    A program section header’s filesz may be less than the memsz, indicating that the gap be-
+tween them should be filled with zeroes (for C global variables) rather than read from the file. For
+/init, the data filesz is 0x10 bytes and memsz is 0x30 bytes, and thus uvmalloc allocates
+enough physical memory to hold 0x30 bytes, but reads only 0x10 bytes from the file /init.
+
+    Now exec allocates and initializes the user stack. It allocates just one stack page. exec copies
+the argument strings to the top of the stack one at a time, recording the pointers to them in ustack.
+It places a null pointer at the end of what will be the argv list passed to main. The values for argc
+and argv are passed to main through the system-call return path: argc is passed via the system
+call return value, which goes in a0, and argv is passed through the a1 entry of the process’s
+trapframe.
+
+    exec places an inaccessible page just below the stack page, so that programs that try to use
+more than one page will fault. This inaccessible page also allows exec to deal with arguments
+that are too large; in that situation, the copyout (kernel/vm.c:359) function that exec uses to copy
+arguments to the stack will notice that the destination page is not accessible, and will return -1.
+
+    During the preparation of the new memory image, if exec detects an error like an invalid
+program segment, it jumps to the label bad, frees the new image, and returns -1. exec must wait
+to free the old image until it is sure that the system call will succeed: if the old image is gone, the
+system call cannot return -1 to it. The only error cases in exec happen during the creation of the
+image. Once the image is complete, exec can commit to the new page table (kernel/exec.c:125) and
+free the old one (kernel/exec.c:129).
+
+    exec loads bytes from the ELF file into memory at addresses specified by the ELF file. Users
+or processes can place whatever addresses they want into an ELF file. Thus exec is risky, because
+the addresses in the ELF file may refer to the kernel, accidentally or on purpose. The consequences
+for an unwary kernel could range from a crash to a malicious subversion of the kernel’s isolation
+mechanisms (i.e., a security exploit). Xv6 performs a number of checks to avoid these risks. For
+example if(ph.vaddr + ph.memsz < ph.vaddr) checks for whether the sum overflows a
+64-bit integer. The danger is that a user could construct an ELF binary with a ph.vaddr that
+points to a user-chosen address, and ph.memsz large enough that the sum overflows to 0x1000,
+which will look like a valid value. In an older version of xv6 in which the user address space also
+contained the kernel (but not readable/writable in user mode), the user could choose an address that
+corresponded to kernel memory and would thus copy data from the ELF binary into the kernel. In
+the RISC-V version of xv6 this cannot happen, because the kernel has its own separate page table;
+loadseg loads into the process’s page table, not in the kernel’s page table.
+
+    It is easy for a kernel developer to omit a crucial check, and real-world kernels have a long
+history of missing checks whose absence can be exploited by user programs to obtain kernel priv-
+ileges. It is likely that xv6 doesn’t do a complete job of validating user-level data supplied to the
+kernel, which a malicious user program might be able to exploit to circumvent xv6’s isolation.
+
+3.9 Real world
+
+Like most operating systems, xv6 uses the paging hardware for memory protection and mapping.
+Most operating systems make far more sophisticated use of paging than xv6 by combining paging
+
+                                                         41
+and page-fault exceptions, which we will discuss in Chapter 4.
+    Xv6 is simplified by the kernel’s use of a direct map between virtual and physical addresses, and
+
+by its assumption that there is physical RAM at address 0x80000000, where the kernel expects to
+be loaded. This works with QEMU, but on real hardware it turns out to be a bad idea; real hardware
+places RAM and devices at unpredictable physical addresses, so that (for example) there might be
+no RAM at 0x80000000, where xv6 expect to be able to store the kernel. More serious kernel
+designs exploit the page table to turn arbitrary hardware physical memory layouts into predictable
+kernel virtual address layouts.
+
+    RISC-V supports protection at the level of physical addresses, but xv6 doesn’t use that feature.
+    On machines with lots of memory it might make sense to use RISC-V’s support for “super
+pages.” Small pages make sense when physical memory is small, to allow allocation and page-out
+to disk with fine granularity. For example, if a program uses only 8 kilobytes of memory, giving
+it a whole 4-megabyte super-page of physical memory is wasteful. Larger pages make sense on
+machines with lots of RAM, and may reduce overhead for page-table manipulation.
+    The xv6 kernel’s lack of a malloc-like allocator that can provide memory for small objects
+prevents the kernel from using sophisticated data structures that would require dynamic allocation.
+A more elaborate kernel would likely allocate many different sizes of small blocks, rather than (as
+in xv6) just 4096-byte blocks; a real kernel allocator would need to handle small allocations as
+well as large ones.
+    Memory allocation is a perennial hot topic, the basic problems being efficient use of limited
+memory and preparing for unknown future requests [9]. Today people care more about speed than
+space efficiency.
+
+3.10 Exercises
+
+   1. Parse RISC-V’s device tree to find the amount of physical memory the computer has.
+
+   2. Write a user program that grows its address space by one byte by calling sbrk(1). Run
+       the program and investigate the page table for the program before the call to sbrk and after
+       the call to sbrk. How much space has the kernel allocated? What does the PTE for the new
+       memory contain?
+
+   3. Modify xv6 to use super pages for the kernel.
+
+   4. Unix implementations of exec traditionally include special handling for shell scripts. If the
+       file to execute begins with the text #!, then the first line is taken to be a program to run to
+       interpret the file. For example, if exec is called to run myprog arg1 and myprog ’s first
+       line is #!/interp, then exec runs /interp with command line /interp myprog arg1.
+       Implement support for this convention in xv6.
+
+   5. Implement address space layout randomization for the kernel.
+
+                                                         42
+Chapter 4
+
+Traps and system calls
+
+There are three kinds of event which cause the CPU to set aside ordinary execution of instructions
+and force a transfer of control to special code that handles the event. One situation is a system
+call, when a user program executes the ecall instruction to ask the kernel to do something for
+it. Another situation is an exception: an instruction (user or kernel) does something illegal, such as
+divide by zero or use an invalid virtual address. The third situation is a device interrupt, when a
+device signals that it needs attention, for example when the disk hardware finishes a read or write
+request.
+
+    This book uses trap as a generic term for these situations. Typically whatever code was execut-
+ing at the time of the trap will later need to resume, and shouldn’t need to be aware that anything
+special happened. That is, we often want traps to be transparent; this is particularly important for
+device interrupts, which the interrupted code typically doesn’t expect. The usual sequence is that
+a trap forces a transfer of control into the kernel; the kernel saves registers and other state so that
+execution can be resumed; the kernel executes appropriate handler code (e.g., a system call imple-
+mentation or device driver); the kernel restores the saved state and returns from the trap; and the
+original code resumes where it left off.
+
+    Xv6 handles all traps in the kernel; traps are not delivered to user code. Handling traps in the
+kernel is natural for system calls. It makes sense for interrupts since isolation demands that only
+the kernel be allowed to use devices, and because the kernel is a convenient mechanism with which
+to share devices among multiple processes. It also makes sense for exceptions since xv6 responds
+to all exceptions from user space by killing the offending program.
+
+    Xv6 trap handling proceeds in four stages: hardware actions taken by the RISC-V CPU, some
+assembly instructions that prepare the way for kernel C code, a C function that decides what to do
+with the trap, and the system call or device-driver service routine. While commonality among the
+three trap types suggests that a kernel could handle all traps with a single code path, it turns out to
+be convenient to have separate code for two distinct cases: traps from user space, and traps from
+kernel space. Kernel code (assembler or C) that processes a trap is often called a handler; the first
+handler instructions are usually written in assembler (rather than C) and are sometimes called a
+vector.
+
+                                                         43
+4.1 RISC-V trap machinery
+
+Each RISC-V CPU has a set of control registers that the kernel writes to tell the CPU how to
+handle traps, and that the kernel can read to find out about a trap that has occurred. The RISC-V
+documents contain the full story [3]. riscv.h (kernel/riscv.h:1) contains definitions that xv6 uses.
+Here’s an outline of the most important registers:
+
+    • stvec: The kernel writes the address of its trap handler here; the RISC-V jumps to the
+       address in stvec to handle a trap.
+
+    • sepc: When a trap occurs, RISC-V saves the program counter here (since the pc is then
+       overwritten with the value in stvec). The sret (return from trap) instruction copies sepc
+       to the pc. The kernel can write sepc to control where sret goes.
+
+    • scause: RISC-V puts a number here that describes the reason for the trap.
+
+    • sscratch: The trap handler code uses sscratch to help it avoid overwriting user registers
+       before saving them.
+
+    • sstatus: The SIE bit in sstatus controls whether device interrupts are enabled. If the
+       kernel clears SIE, the RISC-V will defer device interrupts until the kernel sets SIE. The SPP
+       bit indicates whether a trap came from user mode or supervisor mode, and controls to what
+       mode sret returns.
+
+    The above registers relate to traps handled in supervisor mode, and they cannot be read or
+written in user mode.
+
+    Each CPU on a multi-core chip has its own set of these registers, and more than one CPU may
+be handling a trap at any given time.
+
+    When it needs to force a trap, the RISC-V hardware does the following for all trap types:
+
+   1. If the trap is a device interrupt, and the sstatus SIE bit is clear, don’t do any of the
+       following.
+
+   2. Disable interrupts by clearing the SIE bit in sstatus.
+
+   3. Copy the pc to sepc.
+
+   4. Save the current mode (user or supervisor) in the SPP bit in sstatus.
+
+   5. Set scause to reflect the trap’s cause.
+
+   6. Set the mode to supervisor.
+
+   7. Copy stvec to the pc.
+
+   8. Start executing at the new pc.
+
+                                                         44
+    Note that the CPU doesn’t switch to the kernel page table, doesn’t switch to a stack in the
+kernel, and doesn’t save any registers other than the pc. Kernel software must perform these tasks.
+One reason that the CPU does minimal work during a trap is to provide flexibility to software;
+for example, some operating systems omit a page table switch in some situations to increase trap
+performance.
+
+    It’s worth thinking about whether any of the steps listed above could be omitted, perhaps in
+search of faster traps. Though there are situations in which a simpler sequence can work, many
+of the steps would be dangerous to omit in general. For example, suppose that the CPU didn’t
+switch program counters. Then a trap from user space could switch to supervisor mode while still
+running user instructions. Those user instructions could break user/kernel isolation, for example by
+modifying the satp register to point to a page table that allowed accessing all of physical memory.
+It is thus important that the CPU switch to a kernel-specified instruction address, namely stvec.
+
+4.2 Traps from user space
+
+Xv6 handles traps differently depending on whether the trap occurs while executing in the kernel
+or in user code. Here is the story for traps from user code; Section 4.5 describes traps from kernel
+code.
+
+    A trap may occur while executing in user space if the user program makes a system call (ecall
+instruction), or does something illegal, or if a device interrupts. The high-level path of a trap from
+user space is uservec (kernel/trampoline.S:22), then usertrap (kernel/trap.c:37); and when re-
+turning, usertrapret (kernel/trap.c:90) and then userret (kernel/trampoline.S:101).
+
+    A major constraint on the design of xv6’s trap handling is the fact that the RISC-V hardware
+does not switch page tables when it forces a trap. This means that the trap handler address in
+stvec must have a valid mapping in the user page table, since that’s the page table in force when
+the trap handling code starts executing. Furthermore, xv6’s trap handling code needs to switch to
+the kernel page table; in order to be able to continue executing after that switch, the kernel page
+table must also have a mapping for the handler pointed to by stvec.
+
+    Xv6 satisfies these requirements using a trampoline page. The trampoline page contains uservec,
+the xv6 trap handling code that stvec points to. The trampoline page is mapped in every process’s
+page table at address TRAMPOLINE, which is at the top of the virtual address space so that it will be
+above memory that programs use for themselves. The trampoline page is also mapped at address
+TRAMPOLINE in the kernel page table. See Figure 2.3 and Figure 3.3. Because the trampoline
+page is mapped in the user page table, traps can start executing there in supervisor mode. Because
+the trampoline page is mapped at the same address in the kernel address space, the trap handler
+can continue to execute after it switches to the kernel page table.
+
+    The code for the uservec trap handler is in trampoline.S (kernel/trampoline.S:22). When
+uservec starts, all 32 registers contain values owned by the interrupted user code. These 32
+values need to be saved somewhere in memory, so that later on the kernel can restore them before
+returning to user space. Storing to memory requires use of a register to hold the address, but at this
+point there are no general-purpose registers available! Luckily RISC-V provides a helping hand in
+the form of the sscratch register. The csrw instruction at the start of uservec saves a0 in
+
+                                                         45
+sscratch. Now uservec has one register (a0) to play with.
+
+    uservec’s next task is to save the 32 user registers. The kernel allocates, for each process, a
+page of memory for a trapframe structure that (among other things) has space to save the 32
+user registers (kernel/proc.h:43). Because satp still refers to the user page table, uservec needs
+the trapframe to be mapped in the user address space. Xv6 maps each process’s trapframe at virtual
+address TRAPFRAME in that process’s user page table; TRAPFRAME is just below TRAMPOLINE.
+The process’s p->trapframe also points to the trapframe, though at its physical address so the
+kernel can use it through the kernel page table.
+
+    Thus uservec loads address TRAPFRAME into a0 and saves all the user registers there,
+including the user’s a0, read back from sscratch.
+
+    The trapframe contains the address of the current process’s kernel stack, the current CPU’s
+hartid, the address of the usertrap function, and the address of the kernel page table. uservec
+retrieves these values, switches satp to the kernel page table, and jumps to usertrap.
+
+    The job of usertrap is to determine the cause of the trap, process it, and return (kernel/-
+trap.c:37). It first changes stvec so that a trap while in the kernel will be handled by kernelvec
+rather than uservec. It saves the sepc register (the saved user program counter), because
+usertrap might call yield to switch to another process’s kernel thread, and that process might
+return to user space, in the process of which it will modify sepc. If the trap is a system call,
+usertrap calls syscall to handle it; if a device interrupt, devintr; otherwise it’s an ex-
+ception, and the kernel kills the faulting process. The system call path adds four to the saved user
+program counter because RISC-V, in the case of a system call, leaves the program pointer pointing
+to the ecall instruction but user code needs to resume executing at the subsequent instruction.
+On the way out, usertrap checks if the process has been killed or should yield the CPU (if this
+trap is a timer interrupt).
+
+    The first step in returning to user space is the call to usertrapret (kernel/trap.c:90). This
+function sets up the RISC-V control registers to prepare for a future trap from user space: setting
+stvec to uservec and preparing the trapframe fields that uservec relies on. usertrapret
+sets sepc to the previously saved user program counter. At the end, usertrapret calls userret
+on the trampoline page that is mapped in both user and kernel page tables; the reason is that as-
+sembly code in userret will switch page tables.
+
+    usertrapret’s call to userret passes a pointer to the process’s user page table in a0
+(kernel/trampoline.S:101). userret switches satp to the process’s user page table. Recall that the
+user page table maps both the trampoline page and TRAPFRAME, but nothing else from the kernel.
+The trampoline page mapping at the same virtual address in user and kernel page tables allows
+userret to keep executing after changing satp. From this point on, the only data userret
+can use is the register contents and the content of the trapframe. userret loads the TRAPFRAME
+address into a0, restores saved user registers from the trapframe via a0, restores the saved user
+a0, and executes sret to return to user space.
+
+                                                         46
+4.3 Code: Calling system calls
+
+Chapter 2 ended with initcode.S invoking the exec system call (user/initcode.S:11). Let’s look
+at how the user call makes its way to the exec system call’s implementation in the kernel.
+
+    initcode.S places the arguments for exec in registers a0 and a1, and puts the system call
+number in a7. System call numbers match the entries in the syscalls array, a table of function
+pointers (kernel/syscall.c:107). The ecall instruction traps into the kernel and causes uservec,
+usertrap, and then syscall to execute, as we saw above.
+
+    syscall (kernel/syscall.c:132) retrieves the system call number from the saved a7 in the trapframe
+and uses it to index into syscalls. For the first system call, a7 contains SYS_exec (ker-
+nel/syscall.h:8), resulting in a call to the system call implementation function sys_exec.
+
+    When sys_exec returns, syscall records its return value in p->trapframe->a0. This will
+cause the original user-space call to exec() to return that value, since the C calling convention
+on RISC-V places return values in a0. System calls conventionally return negative numbers to
+indicate errors, and zero or positive numbers for success. If the system call number is invalid,
+syscall prints an error and returns −1.
+
+4.4 Code: System call arguments
+
+System call implementations in the kernel need to find the arguments passed by user code. Because
+user code calls system call wrapper functions, the arguments are initially where the RISC-V C
+calling convention places them: in registers. The kernel trap code saves user registers to the current
+process’s trap frame, where kernel code can find them. The kernel functions argint, argaddr,
+and argfd retrieve the n ’th system call argument from the trap frame as an integer, pointer, or a file
+descriptor. They all call argraw to retrieve the appropriate saved user register (kernel/syscall.c:34).
+
+    Some system calls pass pointers as arguments, and the kernel must use those pointers to read
+or write user memory. The exec system call, for example, passes the kernel an array of pointers
+referring to string arguments in user space. These pointers pose two challenges. First, the user pro-
+gram may be buggy or malicious, and may pass the kernel an invalid pointer or a pointer intended
+to trick the kernel into accessing kernel memory instead of user memory. Second, the xv6 kernel
+page table mappings are not the same as the user page table mappings, so the kernel cannot use
+ordinary instructions to load or store from user-supplied addresses.
+
+    The kernel implements functions that safely transfer data to and from user-supplied addresses.
+fetchstr is an example (kernel/syscall.c:25). File system calls such as exec use fetchstr to
+retrieve string file-name arguments from user space. fetchstr calls copyinstr to do the hard
+work.
+
+    copyinstr (kernel/vm.c:415) copies up to max bytes to dst from virtual address srcva in
+the user page table pagetable. Since pagetable is not the current page table, copyinstr
+uses walkaddr (which calls walk) to look up srcva in pagetable, yielding physical address
+pa0. The kernel’s page table maps all of physical RAM at virtual addresses that are equal to the
+RAM’s physical address. This allows copyinstr to directly copy string bytes from pa0 to dst.
+walkaddr (kernel/vm.c:109) checks that the user-supplied virtual address is part of the process’s
+
+                                                         47
+user address space, so programs cannot trick the kernel into reading other memory. A similar
+function, copyout, copies data from the kernel to a user-supplied address.
+
+4.5 Traps from kernel space
+
+Xv6 handles traps from kernel code in a different way than traps from user code. When entering
+the kernel, usertrap points stvec to the assembly code at kernelvec (kernel/kernelvec.S:12).
+Since kernelvec only executes if xv6 was already in the kernel, kernelvec can rely on
+satp being set to the kernel page table, and on the stack pointer referring to a valid kernel stack.
+kernelvec pushes all 32 registers onto the stack, from which it will later restore them so that
+the interrupted kernel code can resume without disturbance.
+
+    kernelvec saves the registers on the stack of the interrupted kernel thread, which makes
+sense because the register values belong to that thread. This is particularly important if the trap
+causes a switch to a different thread – in that case the trap will actually return from the stack of the
+new thread, leaving the interrupted thread’s saved registers safely on its stack.
+
+    kernelvec jumps to kerneltrap (kernel/trap.c:135) after saving registers. kerneltrap
+is prepared for two types of traps: device interrupts and exceptions. It calls devintr (kernel/-
+trap.c:185) to check for and handle the former. If the trap isn’t a device interrupt, it must be an
+exception, and that is always a fatal error if it occurs in the xv6 kernel; the kernel calls panic and
+stops executing.
+
+    If kerneltrap was called due to a timer interrupt, and a process’s kernel thread is running
+(as opposed to a scheduler thread), kerneltrap calls yield to give other threads a chance to
+run. At some point one of those threads will yield, and let our thread and its kerneltrap resume
+again. Chapter 7 explains what happens in yield.
+
+    When kerneltrap’s work is done, it needs to return to whatever code was interrupted
+by the trap. Because a yield may have disturbed sepc and the previous mode in sstatus,
+kerneltrap saves them when it starts. It now restores those control registers and returns to
+kernelvec (kernel/kernelvec.S:38). kernelvec pops the saved registers from the stack and ex-
+ecutes sret, which copies sepc to pc and resumes the interrupted kernel code.
+
+    It’s worth thinking through how the trap return happens if kerneltrap called yield due to
+a timer interrupt.
+
+    Xv6 sets a CPU’s stvec to kernelvec when that CPU enters the kernel from user space;
+you can see this in usertrap (kernel/trap.c:29). There’s a window of time when the kernel has
+started executing but stvec is still set to uservec, and it’s crucial that no device interrupt occur
+during that window. Luckily the RISC-V always disables interrupts when it starts to take a trap,
+and usertrap doesn’t enable them again until after it sets stvec.
+
+4.6 Page-fault exceptions
+
+Xv6’s response to exceptions is quite boring: if an exception happens in user space, the kernel
+kills the faulting process. If an exception happens in the kernel, the kernel panics. Real operating
+
+                                                         48
+systems often respond in much more interesting ways.
+
+    As an example, many kernels use page faults to implement copy-on-write (COW) fork. To
+explain copy-on-write fork, consider xv6’s fork, described in Chapter 3. fork causes the child’s
+initial memory content to be the same as the parent’s at the time of the fork. Xv6 implements fork
+with uvmcopy (kernel/vm.c:313), which allocates physical memory for the child and copies the
+parent’s memory into it. It would be more efficient if the child and parent could share the parent’s
+physical memory. A straightforward implementation of this would not work, however, since it
+would cause the parent and child to disrupt each other’s execution with their writes to the shared
+stack and heap.
+
+    Parent and child can safely share physical memory by appropriate use of page-table permissions
+and page faults. The CPU raises a page-fault exception when a virtual address is used that has no
+mapping in the page table, or has a mapping whose PTE_V flag is clear, or a mapping whose
+permission bits (PTE_R, PTE_W, PTE_X, PTE_U) forbid the operation being attempted. RISC-V
+distinguishes three kinds of page fault: load page faults (caused by load instructions), store page
+faults (caused by store instructions), and instruction page faults (caused by fetches of instructions
+to be executed). The scause register indicates the type of the page fault and the stval register
+contains the address that couldn’t be translated.
+
+    The basic plan in COW fork is for the parent and child to initially share all physical pages,
+but for each to map them read-only (with the PTE_W flag clear). Parent and child can read from
+the shared physical memory. If either writes a given page, the RISC-V CPU raises a page-fault
+exception. The kernel’s trap handler responds by allocating a new page of physical memory and
+copying into it the physical page that the faulted address maps to. The kernel changes the relevant
+PTE in the faulting process’s page table to point to the copy and to allow writes as well as reads,
+and then resumes the faulting process at the instruction that caused the fault. Because the PTE
+now allows writes, the re-executed instruction will execute without a fault. Copy-on-write requires
+book-keeping to help decide when physical pages can be freed, since each page can be referenced
+by a varying number of page tables depending on the history of forks, page faults, execs, and exits.
+This book-keeping allows an important optimization: if a process incurs a store page fault and the
+physical page is only referred to from that process’s page table, no copy is needed.
+
+    Copy-on-write makes fork faster, since fork need not copy memory. Some of the memory
+will have to be copied later, when written, but it’s often the case that most of the memory never
+has to be copied. A common example is fork followed by exec: a few pages may be written after
+the fork, but then the child’s exec releases the bulk of the memory inherited from the parent.
+Copy-on-write fork eliminates the need to ever copy this memory. Furthermore, COW fork is
+transparent: no modifications to applications are necessary for them to benefit.
+
+    The combination of page tables and page faults opens up a wide range of interesting possibil-
+ities in addition to COW fork. Another widely-used feature is called lazy allocation, which has
+two parts. First, when an application asks for more memory by calling sbrk, the kernel notes the
+increase in size, but does not allocate physical memory and does not create PTEs for the new range
+of virtual addresses. Second, on a page fault on one of those new addresses, the kernel allocates a
+page of physical memory and maps it into the page table. Like COW fork, the kernel can implement
+lazy allocation transparently to applications.
+
+                                                         49
+    Since applications often ask for more memory than they need, lazy allocation is a win: the
+kernel doesn’t have to do any work at all for pages that the application never uses. Furthermore,
+if the application is asking to grow the address space by a lot, then sbrk without lazy allocation
+is expensive: if an application asks for a gigabyte of memory, the kernel has to allocate and zero
+262,144 4096-byte pages. Lazy allocation allows this cost to be spread over time. On the other
+hand, lazy allocation incurs the extra overhead of page faults, which involve a user/kernel transi-
+tion. Operating systems can reduce this cost by allocating a batch of consecutive pages per page
+fault instead of one page and by specializing the kernel entry/exit code for such page-faults.
+
+    Yet another widely-used feature that exploits page faults is demand paging. In exec, xv6 loads
+all of an application’s text and data into memory before starting the application. Since applications
+can be large and reading from disk takes time, this startup cost can be noticeable to users. To
+decrease startup time, a modern kernel doesn’t initially load the executable file into memory, but
+just creates the user page table with all PTEs marked invalid. The kernel starts the program running;
+each time the program uses a page for the first time, a page fault occurs, and in response the kernel
+reads the content of the page from disk and maps it into the user address space. Like COW fork
+and lazy allocation, the kernel can implement this feature transparently to applications.
+
+    The programs running on a computer may need more memory than the computer has RAM.
+To cope gracefully, the operating system may implement paging to disk. The idea is to store only
+a fraction of user pages in RAM, and to store the rest on disk in a paging area. The kernel marks
+PTEs that correspond to memory stored in the paging area (and thus not in RAM) as invalid. If an
+application tries to use one of the pages that has been paged out to disk, the application will incur
+a page fault, and the page must be paged in: the kernel trap handler will allocate a page of physical
+RAM, read the page from disk into the RAM, and modify the relevant PTE to point to the RAM.
+
+    What happens if a page needs to be paged in, but there is no free physical RAM? In that case,
+the kernel must first free a physical page by paging it out or evicting it to the paging area on disk,
+and marking the PTEs referring to that physical page as invalid. Eviction is expensive, so paging
+performs best if it’s infrequent: if applications use only a subset of their memory pages and the
+union of the subsets fits in RAM. This property is often referred to as having good locality of
+reference. As with many virtual memory techniques, kernels usually implement paging to disk in
+a way that’s transparent to applications.
+
+    Computers often operate with little or no free physical memory, regardless of how much RAM
+the hardware provides. For example, cloud providers multiplex many customers on a single ma-
+chine to use their hardware cost-effectively. As another example, users run many applications on
+smart phones in a small amount of physical memory. In such settings allocating a page may require
+first evicting an existing page. Thus, when free physical memory is scarce, allocation is expensive.
+
+    Lazy allocation and demand paging are particularly advantageous when free memory is scarce
+and programs actively use only a fraction of their allocated memory. These techniques can also
+avoid the work wasted when a page is allocated or loaded but either never used or evicted before it
+can be used.
+
+    Other features that combine paging and page-fault exceptions include automatically extending
+stacks and memory-mapped files, which are files that a program mapped into its address space
+using the mmap system call so that the program can read and write them using load and store
+
+                                                         50
+instructions.
+
+4.7 Real world
+
+The trampoline and trapframe may seem excessively complex. A driving force is that the RISC-
+V intentionally does as little as it can when forcing a trap, to allow the possibility of very fast
+trap handling, which turns out to be important. As a result, the first few instructions of the kernel
+trap handler effectively have to execute in the user environment: the user page table, and user
+register contents. And the trap handler is initially ignorant of useful facts such as the identity of
+the process that’s running or the address of the kernel page table. A solution is possible because
+RISC-V provides protected places in which the kernel can stash away information before entering
+user space: the sscratch register, and user page table entries that point to kernel memory but
+are protected by lack of PTE_U. Xv6’s trampoline and trapframe exploit these RISC-V features.
+
+    The need for special trampoline pages could be eliminated if kernel memory were mapped
+into every process’s user page table (with PTE_U clear). That would also eliminate the need for a
+page table switch when trapping from user space into the kernel. That in turn would allow system
+call implementations in the kernel to take advantage of the current process’s user memory being
+mapped, allowing kernel code to directly dereference user pointers. Many operating systems have
+used these ideas to increase efficiency. Xv6 avoids them in order to reduce the chances of security
+bugs in the kernel due to inadvertent use of user pointers, and to reduce some complexity that
+would be required to ensure that user and kernel virtual addresses don’t overlap.
+
+    Production operating systems implement copy-on-write fork, lazy allocation, demand paging,
+paging to disk, memory-mapped files, etc. Furthermore, production operating systems try to store
+something useful in all areas of physical memory, typically caching file content in memory that
+isn’t used by processes.
+
+    Production operating systems also provide applications with system calls to manage their
+address spaces and implement their own page-fault handling through the mmap, munmap, and
+sigaction system calls, as well as providing calls to pin memory into RAM (see mlock) and
+to advise the kernel how an application plans to use its memory (see madvise).
+
+4.8 Exercises
+
+   1. The functions copyin and copyinstr walk the user page table in software. Set up
+       the kernel page table so that the kernel has the user program mapped, and copyin and
+       copyinstr can use memcpy to copy system call arguments into kernel space, relying on
+       the hardware to do the page table walk.
+
+   2. Implement lazy memory allocation.
+
+   3. Implement COW fork.
+
+                                                         51
+4. Is there a way to eliminate the special TRAPFRAME page mapping in every user address
+   space? For example, could uservec be modified to simply push the 32 user registers onto
+   the kernel stack, or store them in the proc structure?
+
+5. Could xv6 be modified to eliminate the special TRAMPOLINE page mapping?
+6. Implement mmap.
+
+                                                      52
+Chapter 5
+
+Interrupts and device drivers
+
+A driver is the code in an operating system that manages a particular device: it configures the device
+hardware, tells the device to perform operations, handles the resulting interrupts, and interacts with
+processes that may be waiting for I/O from the device. Driver code can be tricky because a driver
+executes concurrently with the device that it manages. In addition, the driver must understand the
+device’s hardware interface, which can be complex and poorly documented.
+
+    Devices that need attention from the operating system can usually be configured to generate
+interrupts, which are one type of trap. The kernel trap handling code recognizes when a device
+has raised an interrupt and calls the driver’s interrupt handler; in xv6, this dispatch happens in
+devintr (kernel/trap.c:185).
+
+    Many device drivers execute code in two contexts: a top half that runs in a process’s kernel
+thread, and a bottom half that executes at interrupt time. The top half is called via system calls
+such as read and write that want the device to perform I/O. This code may ask the hardware
+to start an operation (e.g., ask the disk to read a block); then the code waits for the operation
+to complete. Eventually the device completes the operation and raises an interrupt. The driver’s
+interrupt handler, acting as the bottom half, figures out what operation has completed, wakes up a
+waiting process if appropriate, and tells the hardware to start work on any waiting next operation.
+
+5.1 Code: Console input
+
+The console driver (kernel/console.c) is a simple illustration of driver structure. The console driver
+accepts characters typed by a human, via the UART serial-port hardware attached to the RISC-V.
+The console driver accumulates a line of input at a time, processing special input characters such as
+backspace and control-u. User processes, such as the shell, use the read system call to fetch lines
+of input from the console. When you type input to xv6 in QEMU, your keystrokes are delivered to
+xv6 by way of QEMU’s simulated UART hardware.
+
+    The UART hardware that the driver talks to is a 16550 chip [13] emulated by QEMU. On a real
+computer, a 16550 would manage an RS232 serial link connecting to a terminal or other computer.
+When running QEMU, it’s connected to your keyboard and display.
+
+    The UART hardware appears to software as a set of memory-mapped control registers. That
+
+                                                         53
+is, there are some physical addresses that RISC-V hardware connects to the UART device, so that
+loads and stores interact with the device hardware rather than RAM. The memory-mapped ad-
+dresses for the UART start at 0x10000000, or UART0 (kernel/memlayout.h:21). There are a handful
+of UART control registers, each the width of a byte. Their offsets from UART0 are defined in
+(kernel/uart.c:22). For example, the LSR register contains bits that indicate whether input characters
+are waiting to be read by the software. These characters (if any) are available for reading from
+the RHR register. Each time one is read, the UART hardware deletes it from an internal FIFO of
+waiting characters, and clears the “ready” bit in LSR when the FIFO is empty. The UART transmit
+hardware is largely independent of the receive hardware; if software writes a byte to the THR, the
+UART transmits that byte.
+
+    Xv6’s main calls consoleinit (kernel/console.c:182) to initialize the UART hardware. This
+code configures the UART to generate a receive interrupt when the UART receives each byte of
+input, and a transmit complete interrupt each time the UART finishes sending a byte of output
+(kernel/uart.c:53).
+
+    The xv6 shell reads from the console by way of a file descriptor opened by init.c (user/init.c:19).
+Calls to the read system call make their way through the kernel to consoleread (kernel/con-
+sole.c:80). consoleread waits for input to arrive (via interrupts) and be buffered in cons.buf,
+copies the input to user space, and (after a whole line has arrived) returns to the user process. If
+the user hasn’t typed a full line yet, any reading processes will wait in the sleep call (kernel/con-
+sole.c:96) (Chapter 7 explains the details of sleep).
+
+    When the user types a character, the UART hardware asks the RISC-V to raise an interrupt,
+which activates xv6’s trap handler. The trap handler calls devintr (kernel/trap.c:185), which looks
+at the RISC-V scause register to discover that the interrupt is from an external device. Then it
+asks a hardware unit called the PLIC [3] to tell it which device interrupted (kernel/trap.c:193). If it
+was the UART, devintr calls uartintr.
+
+    uartintr (kernel/uart.c:177) reads any waiting input characters from the UART hardware and
+hands them to consoleintr (kernel/console.c:136); it doesn’t wait for characters, since future
+input will raise a new interrupt. The job of consoleintr is to accumulate input characters in
+cons.buf until a whole line arrives. consoleintr treats backspace and a few other characters
+specially. When a newline arrives, consoleintr wakes up a waiting consoleread (if there
+is one).
+
+    Once woken, consoleread will observe a full line in cons.buf, copy it to user space, and
+return (via the system call machinery) to user space.
+
+5.2 Code: Console output
+
+A write system call on a file descriptor connected to the console eventually arrives at uartputc
+(kernel/uart.c:87). The device driver maintains an output buffer (uart_tx_buf) so that writing
+processes do not have to wait for the UART to finish sending; instead, uartputc appends each
+character to the buffer, calls uartstart to start the device transmitting (if it isn’t already), and
+returns. The only situation in which uartputc waits is if the buffer is already full.
+
+    Each time the UART finishes sending a byte, it generates an interrupt. uartintr calls uartstart,
+
+                                                         54
+which checks that the device really has finished sending, and hands the device the next buffered
+output character. Thus if a process writes multiple bytes to the console, typically the first byte will
+be sent by uartputc’s call to uartstart, and the remaining buffered bytes will be sent by
+uartstart calls from uartintr as transmit complete interrupts arrive.
+
+    A general pattern to note is the decoupling of device activity from process activity via buffering
+and interrupts. The console driver can process input even when no process is waiting to read it; a
+subsequent read will see the input. Similarly, processes can send output without having to wait for
+the device. This decoupling can increase performance by allowing processes to execute concur-
+rently with device I/O, and is particularly important when the device is slow (as with the UART)
+or needs immediate attention (as with echoing typed characters). This idea is sometimes called I/O
+concurrency.
+
+5.3 Concurrency in drivers
+
+You may have noticed calls to acquire in consoleread and in consoleintr. These calls
+acquire a lock, which protects the console driver’s data structures from concurrent access. There
+are three concurrency dangers here: two processes on different CPUs might call consoleread
+at the same time; the hardware might ask a CPU to deliver a console (really UART) interrupt while
+that CPU is already executing inside consoleread; and the hardware might deliver a console
+interrupt on a different CPU while consoleread is executing. Chapter 6 explains how to use
+locks to ensure that these dangers don’t lead to incorrect results.
+
+    Another way in which concurrency requires care in drivers is that one process may be waiting
+for input from a device, but the interrupt signaling arrival of the input may arrive when a different
+process (or no process at all) is running. Thus interrupt handlers are not allowed to think about
+the process or code that they have interrupted. For example, an interrupt handler cannot safely
+call copyout with the current process’s page table. Interrupt handlers typically do relatively little
+work (e.g., just copy the input data to a buffer), and wake up top-half code to do the rest.
+
+5.4 Timer interrupts
+
+Xv6 uses timer interrupts to maintain its idea of the current time and to switch among compute-
+bound processes. Timer interrupts come from clock hardware attached to each RISC-V CPU. Xv6
+programs each CPU’s clock hardware to interrupt the CPU periodically.
+
+    Code in start.c (kernel/start.c:53) sets some control bits that allow supervisor-mode access
+to the timer control registers, and then asks for the first timer interrupt. The time control register
+contains a count that the hardware increments at a steady rate; this serves as a notion of the current
+time. The stimecmp register contains a time at which the the CPU will raise a timer interrupt;
+setting stimecmp to the current value of time plus x will schedule an interrupt x time units in
+the future. For qemu’s RISC-V emulation, 1000000 time units is roughly a tenth of second.
+
+    Timer interrupts arrive via usertrap or kerneltrap and devintr, like other device in-
+terrupts. Timer interrupts arrive with scause’s low bits set to five; devintr in trap.c detects
+
+                                                         55
+this situation and calls clockintr (kernel/trap.c:164). The latter function increments ticks, al-
+lowing the kernel to track the passage of time. The increment occurs on only one CPU, to avoid
+time passing faster if there are multiple CPUs. clockintr wakes up any processes waiting in
+the sleep system call, and schedules the next timer interrupt by writing stimecmp.
+
+    devintr returns 2 for a timer interrupt in order to indicate to kerneltrap or usertrap
+that they should call yield so that CPUs can be multiplexed among runnable processes.
+
+    The fact that kernel code can be interrupted by a timer interrupt that forces a context switch via
+yield is part of the reason why early code in usertrap is careful to save state such as sepc
+before enabling interrupts. These context switches also mean that kernel code must be written in
+the knowledge that it may move from one CPU to another without warning.
+
+5.5 Real world
+
+Xv6, like many operating systems, allows interrupts and even context switches (via yield) while
+executing in the kernel. The reason for this is to retain quick response times during complex sys-
+tem calls that run for a long time. However, as noted above, allowing interrupts in the kernel is
+the source of some complexity; as a result, a few operating systems allow interrupts only while
+executing user code.
+
+    Supporting all the devices on a typical computer in its full glory is much work, because there
+are many devices, the devices have many features, and the protocol between device and driver can
+be complex and poorly documented. In many operating systems, the drivers account for more code
+than the core kernel.
+
+    The UART driver retrieves data a byte at a time by reading the UART control registers; this
+pattern is called programmed I/O, since software is driving the data movement. Programmed I/O
+is simple, but too slow to be used at high data rates. Devices that need to move lots of data at high
+speed typically use direct memory access (DMA). DMA device hardware directly writes incoming
+data to RAM, and reads outgoing data from RAM. Modern disk and network devices use DMA.
+A driver for a DMA device would prepare data in RAM, and then use a single write to a control
+register to tell the device to process the prepared data.
+
+    Interrupts make sense when a device needs attention at unpredictable times, and not too often.
+But interrupts have high CPU overhead. Thus high speed devices, such as network and disk con-
+trollers, use tricks that reduce the need for interrupts. One trick is to raise a single interrupt for a
+whole batch of incoming or outgoing requests. Another trick is for the driver to disable interrupts
+entirely, and to check the device periodically to see if it needs attention. This technique is called
+polling. Polling makes sense if the device performs operations at a high rate, but it wastes CPU
+time if the device is mostly idle. Some drivers dynamically switch between polling and interrupts
+depending on the current device load.
+
+    The UART driver copies incoming data first to a buffer in the kernel, and then to user space.
+This makes sense at low data rates, but such a double copy can significantly reduce performance
+for devices that generate or consume data very quickly. Some operating systems are able to directly
+move data between user-space buffers and device hardware, often with DMA.
+
+                                                         56
+    As mentioned in Chapter 1, the console appears to applications as a regular file, and applica-
+tions read input and write output using the read and write system calls. Applications may want
+to control aspects of a device that cannot be expressed through the standard file system calls (e.g.,
+enabling/disabling line buffering in the console driver). Unix operating systems support the ioctl
+system call for such cases.
+
+    Some usages of computers require that the system must respond in a bounded time. For exam-
+ple, in safety-critical systems missing a deadline can lead to disasters. Xv6 is not suitable for hard
+real-time settings. Operating systems for hard real-time tend to be libraries that link with the appli-
+cation in a way that allows for an analysis to determine the worst-case response time. Xv6 is also
+not suitable for soft real-time applications, when missing a deadline occasionally is acceptable,
+because xv6’s scheduler is too simplistic and it has kernel code path where interrupts are disabled
+for a long time.
+
+5.6 Exercises
+
+   1. Modify uart.c to not use interrupts at all. You may need to modify console.c as well.
+   2. Add a driver for an Ethernet card.
+
+                                                         57
+58
+Chapter 6
+
+Locking
+
+Most kernels, including xv6, interleave the execution of multiple activities. One source of inter-
+leaving is multiprocessor hardware: computers with multiple CPUs executing independently, such
+as xv6’s RISC-V. These multiple CPUs share physical RAM, and xv6 exploits the sharing to main-
+tain data structures that all CPUs read and write. This sharing raises the possibility of one CPU
+reading a data structure while another CPU is mid-way through updating it, or even multiple CPUs
+updating the same data simultaneously; without careful design such parallel access is likely to
+yield incorrect results or a broken data structure. Even on a uniprocessor, the kernel may switch
+the CPU among a number of threads, causing their execution to be interleaved. Finally, a device
+interrupt handler that modifies the same data as some interruptible code could damage the data
+if the interrupt occurs at just the wrong time. The word concurrency refers to situations in which
+multiple instruction streams are interleaved, due to multiprocessor parallelism, thread switching,
+or interrupts.
+
+    Kernels are full of concurrently-accessed data. For example, two CPUs could simultaneously
+call kalloc, thereby concurrently popping from the head of the free list. Kernel designers like
+to allow for lots of concurrency, since it can yield increased performance through parallelism,
+and increased responsiveness. However, as a result kernel designers must convince themselves of
+correctness despite such concurrency. There are many ways to arrive at correct code, some easier
+to reason about than others. Strategies aimed at correctness under concurrency, and abstractions
+that support them, are called concurrency control techniques.
+
+    Xv6 uses a number of concurrency control techniques, depending on the situation; many more
+are possible. This chapter focuses on a widely used technique: the lock. A lock provides mutual
+exclusion, ensuring that only one CPU at a time can hold the lock. If the programmer associates a
+lock with each shared data item, and the code always holds the associated lock when using an item,
+then the item will be used by only one CPU at a time. In this situation, we say that the lock pro-
+tects the data item. Although locks are an easy-to-understand concurrency control mechanism, the
+downside of locks is that they can limit performance, because they serialize concurrent operations.
+
+    The rest of this chapter explains why xv6 needs locks, how xv6 implements them, and how it
+uses them.
+
+                                                         59
+                              Memory
+
+                         list
+                                                       BUS
+
+                    l->next = list      l->next = list
+
+                         CPU            CPU
+
+                   Figure 6.1: Simplified SMP architecture
+
+6.1 Races
+
+As an example of why we need locks, consider two processes with exited children calling wait on
+two different CPUs. wait frees the child’s memory. Thus on each CPU, the kernel will call kfree
+to free the children’s memory pages. The kernel allocator maintains a linked list: kalloc() (ker-
+nel/kalloc.c:69) pops a page of memory from a list of free pages, and kfree() (kernel/kalloc.c:47)
+pushes a page onto the free list. For best performance, we might hope that the kfrees of the
+two parent processes would execute in parallel without either having to wait for the other, but this
+would not be correct given xv6’s kfree implementation.
+
+    Figure 6.1 illustrates the setting in more detail: the linked list of free pages is in memory that is
+shared by the two CPUs, which manipulate the list using load and store instructions. (In reality, the
+processors have caches, but conceptually multiprocessor systems behave as if there were a single,
+shared memory.) If there were no concurrent requests, you might implement a list push operation
+as follows:
+
+1   struct element {
+
+2       int data;
+
+3       struct element *next;
+
+4   };
+
+5
+
+6   struct element *list = 0;
+
+7
+
+8   void
+
+9   push(int data)
+
+10  {
+
+11      struct element *l;
+
+12
+
+13      l = malloc(sizeof *l);
+
+14      l->data = data;
+
+15      l->next = list;
+
+16      list = l;
+
+                                    60
+       CPU 1            15                    16
+
+       Memory               l->next               list
+
+                                     l->next            list
+
+       CPU2         15
+
+                                         16
+
+                                                                                     Time
+
+                            Figure 6.2: Example race
+
+17  }
+
+    This implementation is correct if executed in isolation. However, the code is not correct if more
+than one copy executes concurrently. If two CPUs execute push at the same time, both might
+execute line 15 as shown in Fig 6.1, before either executes line 16, which results in an incorrect
+outcome as illustrated by Figure 6.2. There would then be two list elements with next set to the
+former value of list. When the two assignments to list happen at line 16, the second one will
+overwrite the first; the element involved in the first assignment will be lost.
+
+    The lost update at line 16 is an example of a race. A race is a situation in which a memory
+location is accessed concurrently, and at least one access is a write. A race is often a sign of a bug,
+either a lost update (if the accesses are writes) or a read of an incompletely-updated data structure.
+The outcome of a race depends on the machine code generated by the compiler, the timing of
+the two CPUs involved, and how their memory operations are ordered by the memory system,
+which can make race-induced errors difficult to reproduce and debug. For example, adding print
+statements while debugging push might change the timing of the execution enough to make the
+race disappear.
+
+    The usual way to avoid races is to use a lock. Locks ensure mutual exclusion, so that only one
+CPU at a time can execute the sensitive lines of push; this makes the scenario above impossible.
+The correctly locked version of the above code adds just a few lines (highlighted in yellow):
+
+6   struct element *list = 0;
+
+7   struct lock listlock;
+
+8
+
+9   void
+
+10  push(int data)
+
+11  {
+
+12     struct element *l;
+
+13     l = malloc(sizeof *l);
+
+14     l->data = data;
+
+                                     61
+15
+
+16     acquire(&listlock);
+
+17     l->next = list;
+
+18     list = l;
+
+19     release(&listlock);
+
+20  }
+
+The sequence of instructions between acquire and release is often called a critical section.
+The lock is typically said to be protecting list.
+
+    When we say that a lock protects data, we really mean that the lock protects some collection
+of invariants that apply to the data. Invariants are properties of data structures that are maintained
+across operations. Typically, an operation’s correct behavior depends on the invariants being true
+when the operation begins. The operation may temporarily violate the invariants but must reestab-
+lish them before finishing. For example, in the linked list case, the invariant is that list points
+at the first element in the list and that each element’s next field points at the next element. The
+implementation of push violates this invariant temporarily: in line 17, l points to the next list
+element, but list does not point at l yet (reestablished at line 18). The race we examined above
+happened because a second CPU executed code that depended on the list invariants while they
+were (temporarily) violated. Proper use of a lock ensures that only one CPU at a time can operate
+on the data structure in the critical section, so that no CPU will execute a data structure operation
+when the data structure’s invariants do not hold.
+
+    You can think of a lock as serializing concurrent critical sections so that they run one at a time,
+and thus preserve invariants (assuming the critical sections are correct in isolation). You can also
+think of critical sections guarded by the same lock as being atomic with respect to each other,
+so that each sees only the complete set of changes from earlier critical sections, and never sees
+partially-completed updates.
+
+    Though useful for correctness, locks inherently limit performance. For example, if two pro-
+cesses call kfree concurrently, the locks will serialize the two critical sections, so that there is
+no benefit from running them on different CPUs. We say that multiple processes conflict if they
+want the same lock at the same time, or that the lock experiences contention. A major challenge in
+kernel design is avoidance of lock contention in pursuit of parallelism. Xv6 does little of that, but
+sophisticated kernels organize data structures and algorithms specifically to avoid lock contention.
+In the list example, a kernel may maintain a separate free list per CPU and only touch another
+CPU’s free list if the current CPU’s list is empty and it must steal memory from another CPU.
+Other use cases may require more complicated designs.
+
+    The placement of locks is also important for performance. For example, it would be correct to
+move acquire earlier in push, before line 13. But this would likely reduce performance because
+then the calls to malloc would be serialized. The section “Using locks” below provides some
+guidelines for where to insert acquire and release invocations.
+
+                                                         62
+6.2 Code: Locks
+
+Xv6 has two types of locks: spinlocks and sleep-locks. We’ll start with spinlocks. Xv6 represents
+a spinlock as a struct spinlock (kernel/spinlock.h:2). The important field in the structure is
+locked, a word that is zero when the lock is available and non-zero when it is held. Logically, xv6
+should acquire a lock by executing code like
+
+21  void
+
+22  acquire(struct spinlock *lk) // does not work!
+
+23  {
+
+24     for(;;) {
+
+25        if(lk->locked == 0) {
+
+26           lk->locked = 1;
+
+27           break;
+
+28        }
+
+29     }
+
+30  }
+
+Unfortunately, this implementation does not guarantee mutual exclusion on a multiprocessor. It
+could happen that two CPUs simultaneously reach line 25, see that lk->locked is zero, and then
+both grab the lock by executing line 26. At this point, two different CPUs hold the lock, which
+violates the mutual exclusion property. What we need is a way to make lines 25 and 26 execute as
+an atomic (i.e., indivisible) step.
+
+    Because locks are widely used, multi-core processors usually provide instructions that imple-
+ment an atomic version of lines 25 and 26. On the RISC-V this instruction is amoswap r, a.
+amoswap reads the value at the memory address a, writes the contents of register r to that address,
+and puts the value it read into r. That is, it swaps the contents of the register and the memory
+address. It performs this sequence atomically, using special hardware to prevent any other CPU
+from using the memory address between the read and the write.
+
+    Xv6’s acquire (kernel/spinlock.c:22) uses the portable C library call __sync_lock_test_and_set,
+which boils down to the amoswap instruction; the return value is the old (swapped) contents of
+lk->locked. The acquire function wraps the swap in a loop, retrying (spinning) until it has
+acquired the lock. Each iteration swaps one into lk->locked and checks the previous value; if
+the previous value is zero, then we’ve acquired the lock, and the swap will have set lk->locked
+to one. If the previous value is one, then some other CPU holds the lock, and the fact that we
+atomically swapped one into lk->locked didn’t change its value.
+
+    Once the lock is acquired, acquire records, for debugging, the CPU that acquired the lock.
+The lk->cpu field is protected by the lock and must only be changed while holding the lock.
+
+    The function release (kernel/spinlock.c:47) is the opposite of acquire: it clears the lk->cpu
+field and then releases the lock. Conceptually, the release just requires assigning zero to lk->locked.
+The C standard allows compilers to implement an assignment with multiple store instructions, so a
+C assignment might be non-atomic with respect to concurrent code. Instead, release uses the C
+library function __sync_lock_release that performs an atomic assignment. This function also
+boils down to a RISC-V amoswap instruction.
+
+                                 63
+6.3 Code: Using locks
+
+Xv6 uses locks in many places to avoid races. As described above, kalloc (kernel/kalloc.c:69) and
+kfree (kernel/kalloc.c:47) form a good example. Try Exercises 1 and 2 to see what happens if those
+functions omit the locks. You’ll likely find that it’s difficult to trigger incorrect behavior, suggesting
+that it’s hard to reliably test whether code is free from locking errors and races. Xv6 may well have
+as-yet-undiscovered races.
+
+    A hard part about using locks is deciding how many locks to use and which data and invariants
+each lock should protect. There are a few basic principles. First, any time a variable can be written
+by one CPU at the same time that another CPU can read or write it, a lock should be used to
+keep the two operations from overlapping. Second, remember that locks protect invariants: if an
+invariant involves multiple memory locations, typically all of them need to be protected by a single
+lock to ensure the invariant is maintained.
+
+    The rules above say when locks are necessary but say nothing about when locks are unneces-
+sary, and it is important for efficiency not to lock too much, because locks reduce parallelism. If
+parallelism isn’t important, then one could arrange to have only a single thread and not worry about
+locks. A simple kernel can do this on a multiprocessor by having a single lock that must be ac-
+quired on entering the kernel and released on exiting the kernel (though blocking system calls such
+as pipe reads or wait would pose a problem). Many uniprocessor operating systems have been
+converted to run on multiprocessors using this approach, sometimes called a “big kernel lock,” but
+the approach sacrifices parallelism: only one CPU can execute in the kernel at a time. If the kernel
+does any heavy computation, it would be more efficient to use a larger set of more fine-grained
+locks, so that the kernel could execute on multiple CPUs simultaneously.
+
+    As an example of coarse-grained locking, xv6’s kalloc.c allocator has a single free list pro-
+tected by a single lock. If multiple processes on different CPUs try to allocate pages at the same
+time, each will have to wait for its turn by spinning in acquire. Spinning wastes CPU time, since
+it’s not useful work. If contention for the lock wasted a significant fraction of CPU time, perhaps
+performance could be improved by changing the allocator design to have multiple free lists, each
+with its own lock, to allow truly parallel allocation.
+
+    As an example of fine-grained locking, xv6 has a separate lock for each file, so that processes
+that manipulate different files can often proceed without waiting for each other’s locks. The file
+locking scheme could be made even more fine-grained if one wanted to allow processes to simul-
+taneously write different areas of the same file. Ultimately lock granularity decisions need to be
+driven by performance measurements as well as complexity considerations.
+
+    As subsequent chapters explain each part of xv6, they will mention examples of xv6’s use of
+locks to deal with concurrency. As a preview, Figure 6.3 lists all of the locks in xv6.
+
+6.4 Deadlock and lock ordering
+
+If a code path through the kernel must hold several locks at the same time, it is important that all
+code paths acquire those locks in the same order. If they don’t, there is a risk of deadlock. Let’s
+say two code paths in xv6 need locks A and B, but code path 1 acquires locks in the order A then
+
+                                                         64
+Lock              Description
+
+bcache.lock       Protects allocation of block buffer cache entries
+cons.lock         Serializes access to console hardware, avoids intermixed output
+ftable.lock       Serializes allocation of a struct file in file table
+itable.lock       Protects allocation of in-memory inode entries
+vdisk_lock        Serializes access to disk hardware and queue of DMA descriptors
+kmem.lock         Serializes allocation of memory
+log.lock          Serializes operations on the transaction log
+pipe’s pi->lock   Serializes operations on each pipe
+pid_lock          Serializes increments of next_pid
+proc’s p->lock    Serializes changes to process’s state
+wait_lock         Helps wait avoid lost wakeups
+tickslock         Serializes operations on the ticks counter
+inode’s ip->lock  Serializes operations on each inode and its content
+buf’s b->lock     Serializes operations on each block buffer
+
+                  Figure 6.3: Locks in xv6
+
+B, and the other path acquires them in the order B then A. Suppose thread T1 executes code path 1
+and acquires lock A, and thread T2 executes code path 2 and acquires lock B. Next T1 will try to
+acquire lock B, and T2 will try to acquire lock A. Both acquires will block indefinitely, because in
+both cases the other thread holds the needed lock, and won’t release it until its acquire returns. To
+avoid such deadlocks, all code paths must acquire locks in the same order. The need for a global
+lock acquisition order means that locks are effectively part of each function’s specification: callers
+must invoke functions in a way that causes locks to be acquired in the agreed-on order.
+
+    Xv6 has many lock-order chains of length two involving per-process locks (the lock in each
+struct proc) due to the way that sleep works (see Chapter 7). For example, consoleintr
+(kernel/console.c:136) is the interrupt routine which handles typed characters. When a newline ar-
+rives, any process that is waiting for console input should be woken up. To do this, consoleintr
+holds cons.lock while calling wakeup, which acquires the waiting process’s lock in order to
+wake it up. In consequence, the global deadlock-avoiding lock order includes the rule that cons.lock
+must be acquired before any process lock. The file-system code contains xv6’s longest lock chains.
+For example, creating a file requires simultaneously holding a lock on the directory, a lock on the
+new file’s inode, a lock on a disk block buffer, the disk driver’s vdisk_lock, and the calling pro-
+cess’s p->lock. To avoid deadlock, file-system code always acquires locks in the order mentioned
+in the previous sentence.
+
+    Honoring a global deadlock-avoiding order can be surprisingly difficult. Sometimes the lock
+order conflicts with logical program structure, e.g., perhaps code module M1 calls module M2, but
+the lock order requires that a lock in M2 be acquired before a lock in M1. Sometimes the identities
+of locks aren’t known in advance, perhaps because one lock must be held in order to discover the
+identity of the lock to be acquired next. This kind of situation arises in the file system as it looks up
+successive components in a path name, and in the code for wait and exit as they search the table
+
+                                                         65
+of processes looking for child processes. Finally, the danger of deadlock is often a constraint on
+how fine-grained one can make a locking scheme, since more locks often means more opportunity
+for deadlock. The need to avoid deadlock is often a major factor in kernel implementation.
+
+6.5 Re-entrant locks
+
+It might appear that some deadlocks and lock-ordering challenges could be avoided by using re-
+entrant locks, which are also called recursive locks. The idea is that if the lock is held by a process
+and if that process attempts to acquire the lock again, then the kernel could just allow this (since
+the process already has the lock), instead of calling panic, as the xv6 kernel does.
+
+    It turns out, however, that re-entrant locks make it harder to reason about concurrency: re-
+entrant locks break the intuition that locks cause critical sections to be atomic with respect to other
+critical sections. Consider the following functions f and g, and a hypothetical function h:
+
+      struct spinlock lock;
+      int data = 0; // protected by lock
+
+      f() {
+          acquire(&lock);
+          if(data == 0){
+             call_once();
+             h();
+             data = 1;
+          }
+          release(&lock);
+
+      }
+
+      g() {
+          aquire(&lock);
+          if(data == 0){
+             call_once();
+             data = 1;
+          }
+          release(&lock);
+
+      }
+
+      h() {
+             ...
+
+      }
+
+    Looking at this code fragment, the intuition is that call_once will be called only once: either
+by f, or by g, but not by both.
+
+    But if re-entrant locks are allowed, and h happens to call g, call_once will be called twice.
+    If re-entrant locks aren’t allowed, then h calling g results in a deadlock, which is not great
+either. But, assuming it would be a serious error to call call_once, a deadlock is preferable. The
+
+                                                         66
+kernel developer will observe the deadlock (the kernel panics) and can fix the code to avoid it,
+while calling call_once twice may silently result in an error that is difficult to track down.
+
+    For this reason, xv6 uses the simpler to understand non-re-entrant locks. As long as program-
+mers keep the locking rules in mind, however, either approach can be made to work. If xv6 were to
+use re-entrant locks, one would have to modify acquire to notice that the lock is currently held
+by the calling thread. One would also have to add a count of nested acquires to struct spinlock, in
+similar style to push_off, which is discussed next.
+
+6.6 Locks and interrupt handlers
+
+Some xv6 spinlocks protect data that is used by both threads and interrupt handlers. For example,
+the clockintr timer interrupt handler might increment ticks (kernel/trap.c:164) at about the same
+time that a kernel thread reads ticks in sys_sleep (kernel/sysproc.c:61). The lock tickslock
+serializes the two accesses.
+
+    The interaction of spinlocks and interrupts raises a potential danger. Suppose sys_sleep holds
+tickslock, and its CPU is interrupted by a timer interrupt. clockintr would try to acquire
+tickslock, see it was held, and wait for it to be released. In this situation, tickslock will
+never be released: only sys_sleep can release it, but sys_sleep will not continue running until
+clockintr returns. So the CPU will deadlock, and any code that needs either lock will also freeze.
+
+    To avoid this situation, if a spinlock is used by an interrupt handler, a CPU must never hold
+that lock with interrupts enabled. Xv6 is more conservative: when a CPU acquires any lock, xv6
+always disables interrupts on that CPU. Interrupts may still occur on other CPUs, so an interrupt’s
+acquire can wait for a thread to release a spinlock; just not on the same CPU.
+
+    Xv6 re-enables interrupts when a CPU holds no spinlocks; it must do a little book-keeping to
+cope with nested critical sections. acquire calls push_off (kernel/spinlock.c:89) and release
+calls pop_off (kernel/spinlock.c:100) to track the nesting level of locks on the current CPU. When
+that count reaches zero, pop_off restores the interrupt enable state that existed at the start of the
+outermost critical section. The intr_off and intr_on functions execute RISC-V instructions to
+disable and enable interrupts, respectively.
+
+    It is important that acquire call push_off strictly before setting lk->locked (kernel/spin-
+lock.c:28). If the two were reversed, there would be a brief window when the lock was held with
+interrupts enabled, and an unfortunately timed interrupt would deadlock the system. Similarly, it is
+important that release call pop_off only after releasing the lock (kernel/spinlock.c:66).
+
+6.7 Instruction and memory ordering
+
+It is natural to think of programs executing in the order in which source code statements appear.
+That’s a reasonable mental model for single-threaded code, but is incorrect when multiple threads
+interact through shared memory [2, 4]. One reason is that compilers emit load and store instructions
+in orders different from those implied by the source code, and may entirely omit them (for example
+by caching data in registers). Another reason is that the CPU may execute instructions out of order
+
+                                                         67
+to increase performance. For example, a CPU may notice that in a serial sequence of instructions
+A and B are not dependent on each other. The CPU may start instruction B first, either because its
+inputs are ready before A’s inputs, or in order to overlap execution of A and B.
+
+    As an example of what could go wrong, in this code for push, it would be a disaster if the
+compiler or CPU moved the store corresponding to line 4 to a point after the release on line 6:
+
+1  l = malloc(sizeof *l);
+
+2  l->data = data;
+
+3  acquire(&listlock);
+
+4  l->next = list;
+
+5  list = l;
+
+6  release(&listlock);
+
+If such a re-ordering occurred, there would be a window during which another CPU could acquire
+the lock and observe the updated list, but see an uninitialized list->next.
+
+    The good news is that compilers and CPUs help concurrent programmers by following a set
+of rules called the memory model, and by providing some primitives to help programmers control
+re-ordering.
+
+    To tell the hardware and compiler not to re-order, xv6 uses __sync_synchronize() in both
+acquire (kernel/spinlock.c:22) and release (kernel/spinlock.c:47). __sync_synchronize() is a
+memory barrier: it tells the compiler and CPU to not reorder loads or stores across the barrier. The
+barriers in xv6’s acquire and release force order in almost all cases where it matters, since xv6
+uses locks around accesses to shared data. Chapter 9 discusses a few exceptions.
+
+6.8 Sleep locks
+
+Sometimes xv6 needs to hold a lock for a long time. For example, the file system (Chapter 8) keeps
+a file locked while reading and writing its content on the disk, and these disk operations can take
+tens of milliseconds. Holding a spinlock that long would lead to waste if another process wanted to
+acquire it, since the acquiring process would waste CPU for a long time while spinning. Another
+drawback of spinlocks is that a process cannot yield the CPU while retaining a spinlock; we’d like
+to do this so that other processes can use the CPU while the process with the lock waits for the disk.
+Yielding while holding a spinlock is illegal because it might lead to deadlock if a second thread then
+tried to acquire the spinlock; since acquire doesn’t yield the CPU, the second thread’s spinning
+might prevent the first thread from running and releasing the lock. Yielding while holding a lock
+would also violate the requirement that interrupts must be off while a spinlock is held. Thus we’d
+like a type of lock that yields the CPU while waiting to acquire, and allows yields (and interrupts)
+while the lock is held.
+
+    Xv6 provides such locks in the form of sleep-locks. acquiresleep (kernel/sleeplock.c:22)
+yields the CPU while waiting, using techniques that will be explained in Chapter 7. At a high
+level, a sleep-lock has a locked field that is protected by a spinlock, and acquiresleep ’s call
+to sleep atomically yields the CPU and releases the spinlock. The result is that other threads can
+execute while acquiresleep waits.
+
+                                                         68
+    Because sleep-locks leave interrupts enabled, they cannot be used in interrupt handlers. Be-
+cause acquiresleep may yield the CPU, sleep-locks cannot be used inside spinlock critical
+sections (though spinlocks can be used inside sleep-lock critical sections).
+
+    Spin-locks are best suited to short critical sections, since waiting for them wastes CPU time;
+sleep-locks work well for lengthy operations.
+
+6.9 Real world
+
+Programming with locks remains challenging despite years of research into concurrency primitives
+and parallelism. It is often best to conceal locks within higher-level constructs like synchronized
+queues, although xv6 does not do this. If you program with locks, it is wise to use a tool that
+attempts to identify races, because it is easy to miss an invariant that requires a lock.
+
+    Most operating systems support POSIX threads (Pthreads), which allow a user process to have
+several threads running concurrently on different CPUs. Pthreads has support for user-level locks,
+barriers, etc. Pthreads also allows a programmer to optionally specify that a lock should be re-
+entrant.
+
+    Supporting Pthreads at user level requires support from the operating system. For example, it
+should be the case that if one pthread blocks in a system call, another pthread of the same process
+should be able to run on that CPU. As another example, if a pthread changes its process’s address
+space (e.g., maps or unmaps memory), the kernel must arrange that other CPUs that run threads of
+the same process update their hardware page tables to reflect the change in the address space.
+
+    It is possible to implement locks without atomic instructions [10], but it is expensive, and most
+operating systems use atomic instructions.
+
+    Locks can be expensive if many CPUs try to acquire the same lock at the same time. If one
+CPU has a lock cached in its local cache, and another CPU must acquire the lock, then the atomic
+instruction to update the cache line that holds the lock must move the line from the one CPU’s
+cache to the other CPU’s cache, and perhaps invalidate any other copies of the cache line. Fetching
+a cache line from another CPU’s cache can be orders of magnitude more expensive than fetching a
+line from a local cache.
+
+    To avoid the expenses associated with locks, many operating systems use lock-free data struc-
+tures and algorithms [6, 12]. For example, it is possible to implement a linked list like the one in the
+beginning of the chapter that requires no locks during list searches, and one atomic instruction to
+insert an item in a list. Lock-free programming is more complicated, however, than programming
+locks; for example, one must worry about instruction and memory reordering. Programming with
+locks is already hard, so xv6 avoids the additional complexity of lock-free programming.
+
+6.10 Exercises
+
+   1. Comment out the calls to acquire and release in kalloc (kernel/kalloc.c:69). This seems
+       like it should cause problems for kernel code that calls kalloc; what symptoms do you
+       expect to see? When you run xv6, do you see these symptoms? How about when running
+
+                                                         69
+   usertests? If you don’t see a problem, why not? See if you can provoke a problem by
+   inserting dummy loops into the critical section of kalloc.
+2. Suppose that you instead commented out the locking in kfree (after restoring locking
+   in kalloc). What might now go wrong? Is lack of locks in kfree less harmful than in
+   kalloc?
+3. If two CPUs call kalloc at the same time, one will have to wait for the other, which is bad
+   for performance. Modify kalloc.c to have more parallelism, so that simultaneous calls to
+   kalloc from different CPUs can proceed without waiting for each other.
+4. Write a parallel program using POSIX threads, which is supported on most operating sys-
+   tems. For example, implement a parallel hash table and measure if the number of puts/gets
+   scales with increasing number of CPUs.
+5. Implement a subset of Pthreads in xv6. That is, implement a user-level thread library so that
+   a user process can have more than 1 thread and arrange that these threads can run in parallel
+   on different CPUs. Come up with a design that correctly handles a thread making a blocking
+   system call and changing its shared address space.
+
+                                                      70
+Chapter 7
+
+Scheduling
+
+Any operating system is likely to run with more processes than the computer has CPUs, so a plan
+is needed to time-share the CPUs among the processes. Ideally the sharing would be transparent to
+user processes. A common approach is to provide each process with the illusion that it has its own
+virtual CPU by multiplexing the processes onto the hardware CPUs. This chapter explains how xv6
+achieves this multiplexing.
+
+7.1 Multiplexing
+
+Xv6 multiplexes by switching each CPU from one process to another in two situations. First, xv6’s
+sleep and wakeup mechanism switches when a process makes a system call that blocks (has to
+wait for an event), typically in read, wait, or sleep. Second, xv6 periodically forces a switch
+to cope with processes that compute for long periods without blocking. The former are voluntary
+switches; the latter are called involuntary. This multiplexing creates the illusion that each process
+has its own CPU.
+
+    Implementing multiplexing poses a few challenges. First, how to switch from one process to
+another? The basic idea is to save and restore CPU registers, though the fact that this cannot be
+expressed in C makes it tricky. Second, how to force switches in a way that is transparent to user
+processes? Xv6 uses the standard technique in which a hardware timer’s interrupts drive context
+switches. Third, all of the CPUs switch among the same set of processes, so a locking plan is
+necessary to avoid races. Fourth, a process’s memory and other resources must be freed when the
+process exits, but it cannot do all of this itself because (for example) it can’t free its own kernel stack
+while still using it. Fifth, each CPU of a multi-core machine must remember which process it is
+executing so that system calls affect the correct process’s kernel state. Finally, sleep and wakeup
+allow a process to give up the CPU and wait to be woken up by another process or interrupt. Care
+is needed to avoid races that result in the loss of wakeup notifications.
+
+                                                         71
+user
+
+space           shell                       cat
+
+          save         swtch         swtch          restore
+
+kernel          kstack        kstack        kstack
+space           shell
+
+                              scheduler cat
+
+                             Kernel
+
+Figure 7.1: Switching from one user process to another. In this example, xv6 runs with one CPU
+(and thus one scheduler thread).
+
+7.2 Code: Context switching
+
+Figure 7.1 outlines the steps involved in switching from one user process to another: a trap (system
+call or interrupt) from user space to the old process’s kernel thread, a context switch to the current
+CPU’s scheduler thread, a context switch to a new process’s kernel thread, and a trap return to the
+user-level process. Xv6 has separate threads (saved registers and stacks) in which to execute the
+scheduler because it is not safe for the scheduler to execute on any process’s kernel stack: some
+other CPU might wake the process up and run it, and it would be a disaster to use the same stack
+on two different CPUs. There is a separate scheduler thread for each CPU to cope with situations
+in which more than one CPU is running a process that wants to give up the CPU. In this section
+we’ll examine the mechanics of switching between a kernel thread and a scheduler thread.
+
+    Switching from one thread to another involves saving the old thread’s CPU registers, and restor-
+ing the previously-saved registers of the new thread; the fact that the stack pointer and program
+counter are saved and restored means that the CPU will switch stacks and switch what code it is
+executing.
+
+    The function swtch saves and restores registers for a kernel thread switch. swtch doesn’t
+directly know about threads; it just saves and restores sets of RISC-V registers, called contexts.
+When it is time for a process to give up the CPU, the process’s kernel thread calls swtch to
+save its own context and restore the scheduler’s context. Each context is contained in a struct
+context (kernel/proc.h:2), itself contained in a process’s struct proc or a CPU’s struct cpu.
+swtch takes two arguments: struct context *old and struct context *new. It saves the
+current registers in old, loads registers from new, and returns.
+
+    Let’s follow a process through swtch into the scheduler. We saw in Chapter 4 that one possibil-
+ity at the end of an interrupt is that usertrap calls yield. yield in turn calls sched, which calls
+swtch to save the current context in p->context and switch to the scheduler context previously
+saved in cpu->context (kernel/proc.c:506).
+
+    swtch (kernel/swtch.S:3) saves only callee-saved registers; the C compiler generates code in the
+caller to save caller-saved registers on the stack. swtch knows the offset of each register’s field
+in struct context. It does not save the program counter. Instead, swtch saves the ra register,
+
+                              72
+which holds the return address from which swtch was called. Now swtch restores registers from
+the new context, which holds register values saved by a previous swtch. When swtch returns, it
+returns to the instructions pointed to by the restored ra register, that is, the instruction from which
+the new thread previously called swtch. In addition, it returns on the new thread’s stack, since
+that’s where the restored sp points.
+
+    In our example, sched called swtch to switch to cpu->context, the per-CPU scheduler
+context. That context was saved at the point in the past when scheduler called swtch (ker-
+nel/proc.c:466) to switch to the process that’s now giving up the CPU. When the swtch we have
+been tracing returns, it returns not to sched but to scheduler, with the stack pointer in the current
+CPU’s scheduler stack.
+
+7.3 Code: Scheduling
+
+The last section looked at the low-level details of swtch; now let’s take swtch as a given and
+examine switching from one process’s kernel thread through the scheduler to another process. The
+scheduler exists in the form of a special thread per CPU, each running the scheduler func-
+tion. This function is in charge of choosing which process to run next. A process that wants
+to give up the CPU must acquire its own process lock p->lock, release any other locks it is
+holding, update its own state (p->state), and then call sched. You can see this sequence in
+yield (kernel/proc.c:512), sleep and exit. sched double-checks some of those requirements
+(kernel/proc.c:496-501) and then checks an implication: since a lock is held, interrupts should be
+disabled. Finally, sched calls swtch to save the current context in p->context and switch
+to the scheduler context in cpu->context. swtch returns on the scheduler’s stack as though
+scheduler’s swtch had returned (kernel/proc.c:466). The scheduler continues its for loop, finds
+a process to run, switches to it, and the cycle repeats.
+
+    We just saw that xv6 holds p->lock across calls to swtch: the caller of swtch must already
+hold the lock, and control of the lock passes to the switched-to code. This arrangement is unusual:
+it’s more common for the thread that acquires a lock to also release it. Xv6’s context switching must
+break this convention because p->lock protects invariants on the process’s state and context
+fields that are not true while executing in swtch. For example, if p->lock were not held during
+swtch, a different CPU might decide to run the process after yield had set its state to RUNNABLE,
+but before swtch caused it to stop using its own kernel stack. The result would be two CPUs
+running on the same stack, which would cause chaos. Once yield has started to modify a running
+process’s state to make it RUNNABLE, p->lock must remain held until the invariants are restored:
+the earliest correct release point is after scheduler (running on its own stack) clears c->proc.
+Similarly, once scheduler starts to convert a RUNNABLE process to RUNNING, the lock cannot be
+released until the process’s kernel thread is completely running (after the swtch, for example in
+yield).
+
+    The only place a kernel thread gives up its CPU is in sched, and it always switches to
+the same location in scheduler, which (almost) always switches to some kernel thread that
+previously called sched. Thus, if one were to print out the line numbers where xv6 switches
+threads, one would observe the following simple pattern: (kernel/proc.c:466), (kernel/proc.c:506),
+
+                                                         73
+(kernel/proc.c:466), (kernel/proc.c:506), and so on. Procedures that intentionally transfer control to
+each other via thread switch are sometimes referred to as coroutines; in this example, sched and
+scheduler are co-routines of each other.
+
+    There is one case when the scheduler’s call to swtch does not end up in sched. allocproc
+sets the context ra register of a new process to forkret (kernel/proc.c:524), so that its first swtch
+“returns” to the start of that function. forkret exists to release the p->lock; otherwise, since
+the new process needs to return to user space as if returning from fork, it could instead start at
+usertrapret.
+
+    scheduler (kernel/proc.c:445) runs a loop: find a process to run, run it until it yields, repeat.
+The scheduler loops over the process table looking for a runnable process, one that has p->state
+== RUNNABLE. Once it finds a process, it sets the per-CPU current process variable c->proc,
+marks the process as RUNNING, and then calls swtch to start running it (kernel/proc.c:461-466).
+
+7.4 Code: mycpu and myproc
+
+Xv6 often needs a pointer to the current process’s proc structure. On a uniprocessor one could
+have a global variable pointing to the current proc. This doesn’t work on a multi-core machine,
+since each CPU executes a different process. The way to solve this problem is to exploit the fact
+that each CPU has its own set of registers.
+
+    While a given CPU is executing in the kernel, xv6 ensures that the CPU’s tp register always
+holds the CPU’s hartid. RISC-V numbers its CPUs, giving each a unique hartid. mycpu (ker-
+nel/proc.c:74) uses tp to index an array of cpu structures and return the one for the current CPU. A
+struct cpu (kernel/proc.h:22) holds a pointer to the proc structure of the process currently run-
+ning on that CPU (if any), saved registers for the CPU’s scheduler thread, and the count of nested
+spinlocks needed to manage interrupt disabling.
+
+    Ensuring that a CPU’s tp holds the CPU’s hartid is a little involved, since user code is free to
+modify tp. start sets the tp register early in the CPU’s boot sequence, while still in machine
+mode (kernel/start.c:45). usertrapret saves tp in the trampoline page, in case user code modifies
+it. Finally, uservec restores that saved tp when entering the kernel from user space (kernel/trampo-
+line.S:78). The compiler guarantees never to modify tp in kernel code. It would be more convenient
+if xv6 could ask the RISC-V hardware for the current hartid whenever needed, but RISC-V allows
+that only in machine mode, not in supervisor mode.
+
+    The return values of cpuid and mycpu are fragile: if the timer were to interrupt and cause the
+thread to yield and later resume execution on a different CPU, a previously returned value would
+no longer be correct. To avoid this problem, xv6 requires that callers disable interrupts, and only
+enable them after they finish using the returned struct cpu.
+
+    The function myproc (kernel/proc.c:83) returns the struct proc pointer for the process that
+is running on the current CPU. myproc disables interrupts, invokes mycpu, fetches the current
+process pointer (c->proc) out of the struct cpu, and then enables interrupts. The return value
+of myproc is safe to use even if interrupts are enabled: if a timer interrupt moves the calling process
+to a different CPU, its struct proc pointer will stay the same.
+
+                                                         74
+7.5 Sleep and wakeup
+
+Scheduling and locks help conceal the actions of one thread from another, but we also need ab-
+stractions that help threads intentionally interact. For example, the reader of a pipe in xv6 may need
+to wait for a writing process to produce data; a parent’s call to wait may need to wait for a child
+to exit; and a process reading the disk needs to wait for the disk hardware to finish the read. The
+xv6 kernel uses a mechanism called sleep and wakeup in these situations (and many others). Sleep
+allows a kernel thread to wait for a specific event; another thread can call wakeup to indicate that
+threads waiting for a specified event should resume. Sleep and wakeup are often called sequence
+coordination or conditional synchronization mechanisms.
+
+    Sleep and wakeup provide a relatively low-level synchronization interface. To motivate the
+way they work in xv6, we’ll use them to build a higher-level synchronization mechanism called
+a semaphore [5] that coordinates producers and consumers (xv6 does not use semaphores). A
+semaphore maintains a count and provides two operations. The “V” operation (for the producer)
+increments the count. The “P” operation (for the consumer) waits until the count is non-zero,
+and then decrements it and returns. If there were only one producer thread and one consumer
+thread, and they executed on different CPUs, and the compiler didn’t optimize too aggressively,
+this implementation would be correct:
+
+100 struct semaphore {
+
+101     struct spinlock lock;
+
+102     int count;
+
+103 };
+
+104
+
+105 void
+
+106 V(struct semaphore *s)
+107 {
+
+108     acquire(&s->lock);
+
+109     s->count += 1;
+
+110     release(&s->lock);
+
+111 }
+
+112
+
+113 void
+
+114 P(struct semaphore *s)
+115 {
+
+116     while(s->count == 0)
+
+117       ;
+
+118     acquire(&s->lock);
+
+119     s->count -= 1;
+
+120     release(&s->lock);
+
+121 }
+
+    The implementation above is expensive. If the producer acts rarely, the consumer will spend
+most of its time spinning in the while loop hoping for a non-zero count. The consumer’s CPU
+could probably find more productive work than busy waiting by repeatedly polling s->count.
+
+                               75
+Avoiding busy waiting requires a way for the consumer to yield the CPU and resume only after V
+increments the count.
+
+    Here’s a step in that direction, though as we will see it is not enough. Let’s imagine a pair of
+calls, sleep and wakeup, that work as follows. sleep(chan) waits for an event designated by
+the value of chan, called the wait channel. sleep puts the calling process to sleep, releasing the
+CPU for other work. wakeup(chan) wakes all processes that are in calls to sleep with the same
+chan (if any), causing their sleep calls to return. If no processes are waiting on chan, wakeup
+does nothing. We can change the semaphore implementation to use sleep and wakeup (changes
+highlighted in yellow):
+
+200 void
+
+201 V(struct semaphore *s)
+202 {
+
+203    acquire(&s->lock);
+
+204    s->count += 1;
+
+205    wakeup(s);
+
+206    release(&s->lock);
+
+207 }
+
+208
+
+209 void
+
+210 P(struct semaphore *s)
+211 {
+
+212    while(s->count == 0)
+
+213       sleep(s);
+
+214    acquire(&s->lock);
+
+215    s->count -= 1;
+
+216    release(&s->lock);
+
+217 }
+
+    P now gives up the CPU instead of spinning, which is nice. However, it turns out not to be
+straightforward to design sleep and wakeup with this interface without suffering from what is
+known as the lost wake-up problem. Suppose that P finds that s->count == 0 on line 212. While
+P is between lines 212 and 213, V runs on another CPU: it changes s->count to be nonzero and
+calls wakeup, which finds no processes sleeping and thus does nothing. Now P continues executing
+at line 213: it calls sleep and goes to sleep. This causes a problem: P is asleep waiting for a V call
+that has already happened. Unless we get lucky and the producer calls V again, the consumer will
+wait forever even though the count is non-zero.
+
+    The root of this problem is that the invariant that P sleeps only when s->count == 0 is violated
+by V running at just the wrong moment. An incorrect way to protect the invariant would be to move
+the lock acquisition (highlighted in yellow below) in P so that its check of the count and its call to
+sleep are atomic:
+
+300 void
+
+301 V(struct semaphore *s)
+
+302 {
+
+303    acquire(&s->lock);
+
+                             76
+304    s->count += 1;
+
+305    wakeup(s);
+
+306    release(&s->lock);
+
+307 }
+
+308
+
+309 void
+
+310 P(struct semaphore *s)
+
+311 {
+
+312    acquire(&s->lock);
+
+313    while(s->count == 0)
+
+314       sleep(s);
+
+315    s->count -= 1;
+
+316    release(&s->lock);
+
+317 }
+
+One might hope that this version of P would avoid the lost wakeup because the lock prevents V
+from executing between lines 313 and 314. It does that, but it also deadlocks: P holds the lock
+while it sleeps, so V will block forever waiting for the lock.
+
+    We’ll fix the preceding scheme by changing sleep’s interface: the caller must pass the con-
+dition lock to sleep so it can release the lock after the calling process is marked as asleep and
+waiting on the sleep channel. The lock will force a concurrent V to wait until P has finished putting
+itself to sleep, so that the wakeup will find the sleeping consumer and wake it up. Once the con-
+sumer is awake again sleep reacquires the lock before returning. Our new correct sleep/wakeup
+scheme is usable as follows (change highlighted in yellow):
+
+400 void
+
+401 V(struct semaphore *s)
+402 {
+
+403    acquire(&s->lock);
+
+404    s->count += 1;
+
+405    wakeup(s);
+
+406    release(&s->lock);
+
+407 }
+
+408
+
+409 void
+
+410 P(struct semaphore *s)
+411 {
+
+412    acquire(&s->lock);
+
+413    while(s->count == 0)
+
+414       sleep(s, &s->lock);
+
+415    s->count -= 1;
+
+416    release(&s->lock);
+
+417 }
+
+    The fact that P holds s->lock prevents V from trying to wake it up between P’s check of
+s->count and its call to sleep. However, sleep must release s->lock and put the consuming
+
+                               77
+process to sleep in a way that’s atomic from the point of view of wakeup, in order to avoid lost
+wakeups.
+
+7.6 Code: Sleep and wakeup
+
+Xv6’s sleep (kernel/proc.c:548) and wakeup (kernel/proc.c:579) provide the interface used in the
+last example above. The basic idea is to have sleep mark the current process as SLEEPING and
+then call sched to release the CPU; wakeup looks for a process sleeping on the given wait channel
+and marks it as RUNNABLE. Callers of sleep and wakeup can use any mutually convenient number
+as the channel. Xv6 often uses the address of a kernel data structure involved in the waiting.
+
+    sleep acquires p->lock (kernel/proc.c:559) and only then releases lk. As we’ll see, the fact
+that sleep holds one or the other of these locks at all times is what prevents a concurrent wakeup
+(which must acquire and hold both) from acting. Now that sleep holds just p->lock, it can put
+the process to sleep by recording the sleep channel, changing the process state to SLEEPING, and
+calling sched (kernel/proc.c:563-566). In a moment it will be clear why it’s critical that p->lock is
+not released (by scheduler) until after the process is marked SLEEPING.
+
+    At some point, a process will acquire the condition lock, set the condition that the sleeper
+is waiting for, and call wakeup(chan). It’s important that wakeup is called while holding the
+condition lock1. wakeup loops over the process table (kernel/proc.c:579). It acquires the p->lock
+of each process it inspects. When wakeup finds a process in state SLEEPING with a matching
+chan, it changes that process’s state to RUNNABLE. The next time scheduler runs, it will see that
+the process is ready to be run.
+
+    Why do the locking rules for sleep and wakeup ensure that a process that’s going to sleep
+won’t miss a concurrent wakeup? The going-to-sleep process holds either the condition lock or
+its own p->lock or both from before it checks the condition until after it is marked SLEEPING.
+The process calling wakeup holds both locks in wakeup’s loop. Thus the waker either makes the
+condition true before the consuming thread checks the condition; or the waker’s wakeup examines
+the sleeping thread strictly after it has been marked SLEEPING. Then wakeup will see the sleeping
+process and wake it up (unless something else wakes it up first).
+
+    Sometimes multiple processes are sleeping on the same channel; for example, more than one
+process reading from a pipe. A single call to wakeup will wake them all up. One of them will run
+first and acquire the lock that sleep was called with, and (in the case of pipes) read whatever data
+is waiting. The other processes will find that, despite being woken up, there is no data to be read.
+From their point of view the wakeup was “spurious,” and they must sleep again. For this reason
+sleep is always called inside a loop that checks the condition.
+
+    No harm is done if two uses of sleep/wakeup accidentally choose the same channel: they will
+see spurious wakeups, but looping as described above will tolerate this problem. Much of the
+charm of sleep/wakeup is that it is both lightweight (no need to create special data structures to
+act as sleep channels) and provides a layer of indirection (callers need not know which specific
+process they are interacting with).
+
+   1Strictly speaking it is sufficient if wakeup merely follows the acquire (that is, one could call wakeup after
+the release).
+
+                                                         78
+7.7 Code: Pipes
+
+A more complex example that uses sleep and wakeup to synchronize producers and consumers
+is xv6’s implementation of pipes. We saw the interface for pipes in Chapter 1: bytes written to one
+end of a pipe are copied to an in-kernel buffer and then can be read from the other end of the pipe.
+Future chapters will examine the file descriptor support surrounding pipes, but let’s look now at
+the implementations of pipewrite and piperead.
+
+    Each pipe is represented by a struct pipe, which contains a lock and a data buffer.
+The fields nread and nwrite count the total number of bytes read from and written to the
+buffer. The buffer wraps around: the next byte written after buf[PIPESIZE-1] is buf[0]. The
+counts do not wrap. This convention lets the implementation distinguish a full buffer (nwrite ==
+nread+PIPESIZE) from an empty buffer (nwrite == nread), but it means that indexing into
+the buffer must use buf[nread % PIPESIZE] instead of just buf[nread] (and similarly for
+nwrite).
+
+    Let’s suppose that calls to piperead and pipewrite happen simultaneously on two different
+CPUs. pipewrite (kernel/pipe.c:77) begins by acquiring the pipe’s lock, which protects the counts,
+the data, and their associated invariants. piperead (kernel/pipe.c:106) then tries to acquire the lock
+too, but cannot. It spins in acquire (kernel/spinlock.c:22) waiting for the lock. While piperead
+waits, pipewrite loops over the bytes being written (addr[0..n-1]), adding each to the pipe in
+turn (kernel/pipe.c:95). During this loop, it could happen that the buffer fills (kernel/pipe.c:88). In this
+case, pipewrite calls wakeup to alert any sleeping readers to the fact that there is data waiting
+in the buffer and then sleeps on &pi->nwrite to wait for a reader to take some bytes out of the
+buffer. sleep releases the pipe’s lock as part of putting pipewrite’s process to sleep.
+
+    piperead now acquires the pipe’s lock and enters its critical section: it finds that pi->nread
+!= pi->nwrite (kernel/pipe.c:113) (pipewrite went to sleep because pi->nwrite == pi->nread
++ PIPESIZE (kernel/pipe.c:88)), so it falls through to the for loop, copies data out of the pipe (ker-
+nel/pipe.c:120), and increments nread by the number of bytes copied. That many bytes are now
+available for writing, so piperead calls wakeup (kernel/pipe.c:127) to wake any sleeping writers
+before it returns. wakeup finds a process sleeping on &pi->nwrite, the process that was running
+pipewrite but stopped when the buffer filled. It marks that process as RUNNABLE.
+
+    The pipe code uses separate sleep channels for reader and writer (pi->nread and pi->nwrite);
+this might make the system more efficient in the unlikely event that there are lots of readers and
+writers waiting for the same pipe. The pipe code sleeps inside a loop checking the sleep condition;
+if there are multiple readers or writers, all but the first process to wake up will see the condition is
+still false and sleep again.
+
+7.8 Code: Wait, exit, and kill
+
+sleep and wakeup can be used for many kinds of waiting. An interesting example, introduced
+in Chapter 1, is the interaction between a child’s exit and its parent’s wait. At the time of the
+child’s death, the parent may already be sleeping in wait, or may be doing something else; in the
+latter case, a subsequent call to wait must observe the child’s death, perhaps long after it calls
+
+                                                         79
+exit. The way that xv6 records the child’s demise until wait observes it is for exit to put the
+caller into the ZOMBIE state, where it stays until the parent’s wait notices it, changes the child’s
+state to UNUSED, copies the child’s exit status, and returns the child’s process ID to the parent. If
+the parent exits before the child, the parent gives the child to the init process, which perpetually
+calls wait; thus every child has a parent to clean up after it. A challenge is to avoid races and
+deadlock between simultaneous parent and child wait and exit, as well as simultaneous exit
+and exit.
+
+    wait starts by acquiring wait_lock (kernel/proc.c:391), which acts as the condition lock that
+helps ensure that wait doesn’t miss a wakeup from an exiting child. Then wait scans the process
+table. If it finds a child in ZOMBIE state, it frees that child’s resources and its proc structure,
+copies the child’s exit status to the address supplied to wait (if it is not 0), and returns the child’s
+process ID. If wait finds children but none have exited, it calls sleep to wait for any of them
+to exit (kernel/proc.c:433), then scans again. wait often holds two locks, wait_lock and some
+process’s pp->lock; the deadlock-avoiding order is first wait_lock and then pp->lock.
+
+    exit (kernel/proc.c:347) records the exit status, frees some resources, calls reparent to give
+its children to the init process, wakes up the parent in case it is in wait, marks the caller as
+a zombie, and permanently yields the CPU. exit holds both wait_lock and p->lock during
+this sequence. It holds wait_lock because it’s the condition lock for the wakeup(p->parent),
+preventing a parent in wait from losing the wakeup. exit must hold p->lock for this sequence
+also, to prevent a parent in wait from seeing that the child is in state ZOMBIE before the child has
+finally called swtch. exit acquires these locks in the same order as wait to avoid deadlock.
+
+    It may look incorrect for exit to wake up the parent before setting its state to ZOMBIE, but that
+is safe: although wakeup may cause the parent to run, the loop in wait cannot examine the child
+until the child’s p->lock is released by scheduler, so wait can’t look at the exiting process
+until well after exit has set its state to ZOMBIE (kernel/proc.c:379).
+
+    While exit allows a process to terminate itself, kill (kernel/proc.c:598) lets one process re-
+quest that another terminate. It would be too complex for kill to directly destroy the victim
+process, since the victim might be executing on another CPU, perhaps in the middle of a sensitive
+sequence of updates to kernel data structures. Thus kill does very little: it just sets the victim’s
+p->killed and, if it is sleeping, wakes it up. Eventually the victim will enter or leave the kernel,
+at which point code in usertrap will call exit if p->killed is set (it checks by calling killed
+(kernel/proc.c:627)). If the victim is running in user space, it will soon enter the kernel by making a
+system call or because the timer (or some other device) interrupts.
+
+    If the victim process is in sleep, kill’s call to wakeup will cause the victim to return from
+sleep. This is potentially dangerous because the condition being waited for for may not be true.
+However, xv6 calls to sleep are always wrapped in a while loop that re-tests the condition after
+sleep returns. Some calls to sleep also test p->killed in the loop, and abandon the current
+activity if it is set. This is only done when such abandonment would be correct. For example, the
+pipe read and write code (kernel/pipe.c:84) returns if the killed flag is set; eventually the code will
+return back to trap, which will again check p->killed and exit.
+
+    Some xv6 sleep loops do not check p->killed because the code is in the middle of a multi-
+step system call that should be atomic. The virtio driver (kernel/virtio_disk.c:285) is an example: it
+
+                                                         80
+does not check p->killed because a disk operation may be one of a set of writes that are all
+needed in order for the file system to be left in a correct state. A process that is killed while waiting
+for disk I/O won’t exit until it completes the current system call and usertrap sees the killed flag.
+
+7.9 Process Locking
+
+The lock associated with each process (p->lock) is the most complex lock in xv6. A simple
+way to think about p->lock is that it must be held while reading or writing any of the following
+struct proc fields: p->state, p->chan, p->killed, p->xstate, and p->pid. These fields
+can be used by other processes, or by scheduler threads on other CPUs, so it’s natural that they
+must be protected by a lock.
+
+    However, most uses of p->lock are protecting higher-level aspects of xv6’s process data struc-
+tures and algorithms. Here’s the full set of things that p->lock does:
+
+    • Along with p->state, it prevents races in allocating proc[] slots for new processes.
+
+    • It conceals a process from view while it is being created or destroyed.
+
+    • It prevents a parent’s wait from collecting a process that has set its state to ZOMBIE but has
+       not yet yielded the CPU.
+
+    • It prevents another CPU’s scheduler from deciding to run a yielding process after it sets its
+       state to RUNNABLE but before it finishes swtch.
+
+    • It ensures that only one CPU’s scheduler decides to run a RUNNABLE processes.
+
+    • It prevents a timer interrupt from causing a process to yield while it is in swtch.
+
+    • Along with the condition lock, it helps prevent wakeup from overlooking a process that is
+       calling sleep but has not finished yielding the CPU.
+
+    • It prevents the victim process of kill from exiting and perhaps being re-allocated between
+       kill’s check of p->pid and setting p->killed.
+
+    • It makes kill’s check and write of p->state atomic.
+
+    The p->parent field is protected by the global lock wait_lock rather than by p->lock.
+Only a process’s parent modifies p->parent, though the field is read both by the process it-
+self and by other processes searching for their children. The purpose of wait_lock is to act as
+the condition lock when wait sleeps waiting for any child to exit. An exiting child holds either
+wait_lock or p->lock until after it has set its state to ZOMBIE, woken up its parent, and yielded
+the CPU. wait_lock also serializes concurrent exits by a parent and child, so that the init
+process (which inherits the child) is guaranteed to be woken up from its wait. wait_lock is a
+global lock rather than a per-process lock in each parent, because, until a process acquires it, it
+cannot know who its parent is.
+
+                                                         81
+7.10 Real world
+
+The xv6 scheduler implements a simple scheduling policy, which runs each process in turn. This
+policy is called round robin. Real operating systems implement more sophisticated policies that,
+for example, allow processes to have priorities. The idea is that a runnable high-priority process
+will be preferred by the scheduler over a runnable low-priority process. These policies can become
+complex quickly because there are often competing goals: for example, the operating system might
+also want to guarantee fairness and high throughput. In addition, complex policies may lead to
+unintended interactions such as priority inversion and convoys. Priority inversion can happen when
+a low-priority and high-priority process both use a particular lock, which when acquired by the
+low-priority process can prevent the high-priority process from making progress. A long convoy
+of waiting processes can form when many high-priority processes are waiting for a low-priority
+process that acquires a shared lock; once a convoy has formed it can persist for long time. To avoid
+these kinds of problems additional mechanisms are necessary in sophisticated schedulers.
+
+    sleep and wakeup are a simple and effective synchronization method, but there are many
+others. The first challenge in all of them is to avoid the “lost wakeups” problem we saw at the
+beginning of the chapter. The original Unix kernel’s sleep simply disabled interrupts, which suf-
+ficed because Unix ran on a single-CPU system. Because xv6 runs on multiprocessors, it adds
+an explicit lock to sleep. FreeBSD’s msleep takes the same approach. Plan 9’s sleep uses a
+callback function that runs with the scheduling lock held just before going to sleep; the function
+serves as a last-minute check of the sleep condition, to avoid lost wakeups. The Linux kernel’s
+sleep uses an explicit process queue, called a wait queue, instead of a wait channel; the queue has
+its own internal lock.
+
+    Scanning the entire set of processes in wakeup is inefficient. A better solution is to replace
+the chan in both sleep and wakeup with a data structure that holds a list of processes sleeping
+on that structure, such as Linux’s wait queue. Plan 9’s sleep and wakeup call that structure a
+rendezvous point. Many thread libraries refer to the same structure as a condition variable; in that
+context, the operations sleep and wakeup are called wait and signal. All of these mechanisms
+share the same flavor: the sleep condition is protected by some kind of lock dropped atomically
+during sleep.
+
+    The implementation of wakeup wakes up all processes that are waiting on a particular chan-
+nel, and it might be the case that many processes are waiting for that particular channel. The
+operating system will schedule all these processes and they will race to check the sleep condition.
+Processes that behave in this way are sometimes called a thundering herd, and it is best avoided.
+Most condition variables have two primitives for wakeup: signal, which wakes up one process,
+and broadcast, which wakes up all waiting processes.
+
+    Semaphores are often used for synchronization. The count typically corresponds to something
+like the number of bytes available in a pipe buffer or the number of zombie children that a process
+has. Using an explicit count as part of the abstraction avoids the “lost wakeup” problem: there is
+an explicit count of the number of wakeups that have occurred. The count also avoids the spurious
+wakeup and thundering herd problems.
+
+    Terminating processes and cleaning them up introduces much complexity in xv6. In most op-
+erating systems it is even more complex, because, for example, the victim process may be deep
+
+                                                         82
+inside the kernel sleeping, and unwinding its stack requires care, since each function on the call
+stack may need to do some clean-up. Some languages help out by providing an exception mecha-
+nism, but not C. Furthermore, there are other events that can cause a sleeping process to be woken
+up, even though the event it is waiting for has not happened yet. For example, when a Unix process
+is sleeping, another process may send a signal to it. In this case, the process will return from the
+interrupted system call with the value -1 and with the error code set to EINTR. The application
+can check for these values and decide what to do. Xv6 doesn’t support signals and this complexity
+doesn’t arise.
+
+    Xv6’s support for kill is not entirely satisfactory: there are sleep loops which probably should
+check for p->killed. A related problem is that, even for sleep loops that check p->killed,
+there is a race between sleep and kill; the latter may set p->killed and try to wake up the
+victim just after the victim’s loop checks p->killed but before it calls sleep. If this problem
+occurs, the victim won’t notice the p->killed until the condition it is waiting for occurs. This
+may be quite a bit later or even never (e.g., if the victim is waiting for input from the console, but
+the user doesn’t type any input).
+
+    A real operating system would find free proc structures with an explicit free list in constant
+time instead of the linear-time search in allocproc; xv6 uses the linear scan for simplicity.
+
+7.11 Exercises
+
+   1. Implement semaphores in xv6 without using sleep and wakeup (but it is OK to use spin
+       locks). Choose a few of xv6’s uses of sleep and wakeup and replace them with semaphores.
+       Judge the result.
+
+   2. Fix the race mentioned above between kill and sleep, so that a kill that occurs after
+       the victim’s sleep loop checks p->killed but before it calls sleep results in the victim
+       abandoning the current system call.
+
+   3. Design a plan so that every sleep loop checks p->killed so that, for example, a process
+       that is in the virtio driver can return quickly from the while loop if it is killed by another
+       process.
+
+   4. Modify xv6 to use only one context switch when switching from one process’s kernel thread
+       to another, rather than switching through the scheduler thread. The yielding thread will need
+       to select the next thread itself and call swtch. The challenges will be to prevent multiple
+       CPUs from executing the same thread accidentally; to get the locking right; and to avoid
+       deadlocks.
+
+   5. Modify xv6’s scheduler to use the RISC-V WFI (wait for interrupt) instruction when no
+       processes are runnable. Try to ensure that, any time there are runnable processes waiting to
+       run, no CPUs are pausing in WFI.
+
+                                                         83
+84
+Chapter 8
+
+File system
+
+The purpose of a file system is to organize and store data. File systems typically support sharing
+of data among users and applications, as well as persistence so that data is still available after a
+reboot.
+
+    The xv6 file system provides Unix-like files, directories, and pathnames (see Chapter 1), and
+stores its data on a virtio disk for persistence. The file system addresses several challenges:
+
+    • The file system needs on-disk data structures to represent the tree of named directories and
+       files, to record the identities of the blocks that hold each file’s content, and to record which
+       areas of the disk are free.
+
+    • The file system must support crash recovery. That is, if a crash (e.g., power failure) occurs,
+       the file system must still work correctly after a restart. The risk is that a crash might interrupt
+       a sequence of updates and leave inconsistent on-disk data structures (e.g., a block that is both
+       used in a file and marked free).
+
+    • Different processes may operate on the file system at the same time, so the file-system code
+       must coordinate to maintain invariants.
+
+    • Accessing a disk is orders of magnitude slower than accessing memory, so the file system
+       must maintain an in-memory cache of popular blocks.
+
+    The rest of this chapter explains how xv6 addresses these challenges.
+
+8.1 Overview
+
+The xv6 file system implementation is organized in seven layers, shown in Figure 8.1. The disk
+layer reads and writes blocks on an virtio hard drive. The buffer cache layer caches disk blocks
+and synchronizes access to them, making sure that only one kernel process at a time can modify
+the data stored in any particular block. The logging layer allows higher layers to wrap updates
+to several blocks in a transaction, and ensures that the blocks are updated atomically in the face
+of crashes (i.e., all of them are updated or none). The inode layer provides individual files, each
+
+                                                         85
+                                                                    File descriptor
+
+                                                                       Pathname
+
+                                                                       Directory
+
+                                                                          Inode
+
+                                                                        Logging
+
+                                                                     Buﬀer cache
+
+                                                                           Disk
+
+                                  Figure 8.1: Layers of the xv6 file system.
+
+represented as an inode with a unique i-number and some blocks holding the file’s data. The di-
+rectory layer implements each directory as a special kind of inode whose content is a sequence of
+directory entries, each of which contains a file’s name and i-number. The pathname layer provides
+hierarchical path names like /usr/rtm/xv6/fs.c, and resolves them with recursive lookup. The
+file descriptor layer abstracts many Unix resources (e.g., pipes, devices, files, etc.) using the file
+system interface, simplifying the lives of application programmers.
+
+    Disk hardware traditionally presents the data on the disk as a numbered sequence of 512-byte
+blocks (also called sectors): sector 0 is the first 512 bytes, sector 1 is the next, and so on. The block
+size that an operating system uses for its file system maybe different than the sector size that a
+disk uses, but typically the block size is a multiple of the sector size. Xv6 holds copies of blocks
+that it has read into memory in objects of type struct buf (kernel/buf.h:1). The data stored in this
+structure is sometimes out of sync with the disk: it might have not yet been read in from disk (the
+disk is working on it but hasn’t returned the sector’s content yet), or it might have been updated by
+software but not yet written to the disk.
+
+    The file system must have a plan for where it stores inodes and content blocks on the disk. To
+do so, xv6 divides the disk into several sections, as Figure 8.2 shows. The file system does not use
+block 0 (it holds the boot sector). Block 1 is called the superblock; it contains metadata about the
+file system (the file system size in blocks, the number of data blocks, the number of inodes, and
+the number of blocks in the log). Blocks starting at 2 hold the log. After the log are the inodes,
+with multiple inodes per block. After those come bitmap blocks tracking which data blocks are
+in use. The remaining blocks are data blocks; each is either marked free in the bitmap block, or
+holds content for a file or directory. The superblock is filled in by a separate program, called mkfs,
+which builds an initial file system.
+
+    The rest of this chapter discusses each layer, starting with the buffer cache. Look out for situa-
+tions where well-chosen abstractions at lower layers ease the design of higher ones.
+
+                                                         86
+boot super log  inodes  bit map data  ....     data
+
+01 2
+
+Figure 8.2: Structure of the xv6 file system.
+
+8.2 Buffer cache layer
+
+The buffer cache has two jobs: (1) synchronize access to disk blocks to ensure that only one copy
+of a block is in memory and that only one kernel thread at a time uses that copy; (2) cache popular
+blocks so that they don’t need to be re-read from the slow disk. The code is in bio.c.
+
+    The main interface exported by the buffer cache consists of bread and bwrite; the former
+obtains a buf containing a copy of a block which can be read or modified in memory, and the latter
+writes a modified buffer to the appropriate block on the disk. A kernel thread must release a buffer
+by calling brelse when it is done with it. The buffer cache uses a per-buffer sleep-lock to ensure
+that only one thread at a time uses each buffer (and thus each disk block); bread returns a locked
+buffer, and brelse releases the lock.
+
+    Let’s return to the buffer cache. The buffer cache has a fixed number of buffers to hold disk
+blocks, which means that if the file system asks for a block that is not already in the cache, the
+buffer cache must recycle a buffer currently holding some other block. The buffer cache recycles
+the least recently used buffer for the new block. The assumption is that the least recently used
+buffer is the one least likely to be used again soon.
+
+8.3 Code: Buffer cache
+
+The buffer cache is a doubly-linked list of buffers. The function binit, called by main (kernel/-
+main.c:27), initializes the list with the NBUF buffers in the static array buf (kernel/bio.c:43-52). All
+other access to the buffer cache refer to the linked list via bcache.head, not the buf array.
+
+    A buffer has two state fields associated with it. The field valid indicates that the buffer con-
+tains a copy of the block. The field disk indicates that the buffer content has been handed to the
+disk, which may change the buffer (e.g., write data from the disk into data).
+
+    bread (kernel/bio.c:93) calls bget to get a buffer for the given sector (kernel/bio.c:97). If the
+buffer needs to be read from disk, bread calls virtio_disk_rw to do that before returning the
+buffer.
+
+    bget (kernel/bio.c:59) scans the buffer list for a buffer with the given device and sector numbers
+(kernel/bio.c:65-73). If there is such a buffer, bget acquires the sleep-lock for the buffer. bget then
+returns the locked buffer.
+
+    If there is no cached buffer for the given sector, bget must make one, possibly reusing a buffer
+that held a different sector. It scans the buffer list a second time, looking for a buffer that is not in use
+(b->refcnt = 0); any such buffer can be used. bget edits the buffer metadata to record the new
+device and sector number and acquires its sleep-lock. Note that the assignment b->valid = 0
+ensures that bread will read the block data from disk rather than incorrectly using the buffer’s
+
+                                                         87
+previous contents.
+    It is important that there is at most one cached buffer per disk sector, to ensure that readers see
+
+writes, and because the file system uses locks on buffers for synchronization. bget ensures this
+invariant by holding the bache.lock bcache.lock continuously from the first loop’s check of
+whether the block is cached through the second loop’s declaration that the block is now cached
+(by setting dev, blockno, and refcnt). This causes the check for a block’s presence and (if not
+present) the designation of a buffer to hold the block to be atomic.
+
+    It is safe for bget to acquire the buffer’s sleep-lock outside of the bcache.lock critical
+section, since the non-zero b->refcnt prevents the buffer from being re-used for a different
+disk block. The sleep-lock protects reads and writes of the block’s buffered content, while the
+bcache.lock protects information about which blocks are cached.
+
+    If all the buffers are busy, then too many processes are simultaneously executing file system
+calls; bget panics. A more graceful response might be to sleep until a buffer became free, though
+there would then be a possibility of deadlock.
+
+    Once bread has read the disk (if needed) and returned the buffer to its caller, the caller has
+exclusive use of the buffer and can read or write the data bytes. If the caller does modify the
+buffer, it must call bwrite to write the changed data to disk before releasing the buffer. bwrite
+(kernel/bio.c:107) calls virtio_disk_rw to talk to the disk hardware.
+
+    When the caller is done with a buffer, it must call brelse to release it. (The name brelse,
+a shortening of b-release, is cryptic but worth learning: it originated in Unix and is used in BSD,
+Linux, and Solaris too.) brelse (kernel/bio.c:117) releases the sleep-lock and moves the buffer to
+the front of the linked list (kernel/bio.c:128-133). Moving the buffer causes the list to be ordered
+by how recently the buffers were used (meaning released): the first buffer in the list is the most
+recently used, and the last is the least recently used. The two loops in bget take advantage of this:
+the scan for an existing buffer must process the entire list in the worst case, but checking the most
+recently used buffers first (starting at bcache.head and following next pointers) will reduce
+scan time when there is good locality of reference. The scan to pick a buffer to reuse picks the least
+recently used buffer by scanning backward (following prev pointers).
+
+8.4 Logging layer
+
+One of the most interesting problems in file system design is crash recovery. The problem arises
+because many file-system operations involve multiple writes to the disk, and a crash after a subset
+of the writes may leave the on-disk file system in an inconsistent state. For example, suppose
+a crash occurs during file truncation (setting the length of a file to zero and freeing its content
+blocks). Depending on the order of the disk writes, the crash may either leave an inode with a
+reference to a content block that is marked free, or it may leave an allocated but unreferenced
+content block.
+
+    The latter is relatively benign, but an inode that refers to a freed block is likely to cause serious
+problems after a reboot. After reboot, the kernel might allocate that block to another file, and now
+we have two different files pointing unintentionally to the same block. If xv6 supported multiple
+users, this situation could be a security problem, since the old file’s owner would be able to read
+
+                                                         88
+and write blocks in the new file, owned by a different user.
+    Xv6 solves the problem of crashes during file-system operations with a simple form of logging.
+
+An xv6 system call does not directly write the on-disk file system data structures. Instead, it places
+a description of all the disk writes it wishes to make in a log on the disk. Once the system call has
+logged all of its writes, it writes a special commit record to the disk indicating that the log contains
+a complete operation. At that point the system call copies the writes to the on-disk file system data
+structures. After those writes have completed, the system call erases the log on disk.
+
+    If the system should crash and reboot, the file-system code recovers from the crash as follows,
+before running any processes. If the log is marked as containing a complete operation, then the
+recovery code copies the writes to where they belong in the on-disk file system. If the log is not
+marked as containing a complete operation, the recovery code ignores the log. The recovery code
+finishes by erasing the log.
+
+    Why does xv6’s log solve the problem of crashes during file system operations? If the crash
+occurs before the operation commits, then the log on disk will not be marked as complete, the re-
+covery code will ignore it, and the state of the disk will be as if the operation had not even started. If
+the crash occurs after the operation commits, then recovery will replay all of the operation’s writes,
+perhaps repeating them if the operation had started to write them to the on-disk data structure. In
+either case, the log makes operations atomic with respect to crashes: after recovery, either all of
+the operation’s writes appear on the disk, or none of them appear.
+
+8.5 Log design
+
+The log resides at a known fixed location, specified in the superblock. It consists of a header block
+followed by a sequence of updated block copies (“logged blocks”). The header block contains an
+array of sector numbers, one for each of the logged blocks, and the count of log blocks. The count
+in the header block on disk is either zero, indicating that there is no transaction in the log, or non-
+zero, indicating that the log contains a complete committed transaction with the indicated number
+of logged blocks. Xv6 writes the header block when a transaction commits, but not before, and sets
+the count to zero after copying the logged blocks to the file system. Thus a crash midway through
+a transaction will result in a count of zero in the log’s header block; a crash after a commit will
+result in a non-zero count.
+
+    Each system call’s code indicates the start and end of the sequence of writes that must be atomic
+with respect to crashes. To allow concurrent execution of file-system operations by different pro-
+cesses, the logging system can accumulate the writes of multiple system calls into one transaction.
+Thus a single commit may involve the writes of multiple complete system calls. To avoid splitting
+a system call across transactions, the logging system only commits when no file-system system
+calls are underway.
+
+    The idea of committing several transactions together is known as group commit. Group commit
+reduces the number of disk operations because it amortizes the fixed cost of a commit over multiple
+operations. Group commit also hands the disk system more concurrent writes at the same time,
+perhaps allowing the disk to write them all during a single disk rotation. Xv6’s virtio driver doesn’t
+support this kind of batching, but xv6’s file system design allows for it.
+
+                                                         89
+    Xv6 dedicates a fixed amount of space on the disk to hold the log. The total number of blocks
+written by the system calls in a transaction must fit in that space. This has two consequences.
+No single system call can be allowed to write more distinct blocks than there is space in the log.
+This is not a problem for most system calls, but two of them can potentially write many blocks:
+write and unlink. A large file write may write many data blocks and many bitmap blocks as
+well as an inode block; unlinking a large file might write many bitmap blocks and an inode. Xv6’s
+write system call breaks up large writes into multiple smaller writes that fit in the log, and unlink
+doesn’t cause problems because in practice the xv6 file system uses only one bitmap block. The
+other consequence of limited log space is that the logging system cannot allow a system call to
+start unless it is certain that the system call’s writes will fit in the space remaining in the log.
+
+8.6 Code: logging
+
+A typical use of the log in a system call looks like this:
+
+          begin_op();
+          ...
+          bp = bread(...);
+          bp->data[...] = ...;
+          log_write(bp);
+          ...
+          end_op();
+
+    begin_op (kernel/log.c:127) waits until the logging system is not currently committing, and
+until there is enough unreserved log space to hold the writes from this call. log.outstanding
+counts the number of system calls that have reserved log space; the total reserved space is log.outstanding
+times MAXOPBLOCKS. Incrementing log.outstanding both reserves space and prevents a com-
+mit from occurring during this system call. The code conservatively assumes that each system call
+might write up to MAXOPBLOCKS distinct blocks.
+
+    log_write (kernel/log.c:215) acts as a proxy for bwrite. It records the block’s sector number
+in memory, reserving it a slot in the log on disk, and pins the buffer in the block cache to prevent
+the block cache from evicting it. The block must stay in the cache until committed: until then, the
+cached copy is the only record of the modification; it cannot be written to its place on disk until after
+commit; and other reads in the same transaction must see the modifications. log_write notices
+when a block is written multiple times during a single transaction, and allocates that block the
+same slot in the log. This optimization is often called absorption. It is common that, for example,
+the disk block containing inodes of several files is written several times within a transaction. By
+absorbing several disk writes into one, the file system can save log space and can achieve better
+performance because only one copy of the disk block must be written to disk.
+
+    end_op (kernel/log.c:147) first decrements the count of outstanding system calls. If the count is
+now zero, it commits the current transaction by calling commit(). There are four stages in this
+process. write_log() (kernel/log.c:179) copies each block modified in the transaction from the
+buffer cache to its slot in the log on disk. write_head() (kernel/log.c:103) writes the header block
+to disk: this is the commit point, and a crash after the write will result in recovery replaying the
+
+                                                         90
+transaction’s writes from the log. install_trans (kernel/log.c:69) reads each block from the log
+and writes it to the proper place in the file system. Finally end_op writes the log header with a
+count of zero; this has to happen before the next transaction starts writing logged blocks, so that
+a crash doesn’t result in recovery using one transaction’s header with the subsequent transaction’s
+logged blocks.
+
+    recover_from_log (kernel/log.c:117) is called from initlog (kernel/log.c:55), which is called
+from fsinit(kernel/fs.c:42) during boot before the first user process runs (kernel/proc.c:535). It
+reads the log header, and mimics the actions of end_op if the header indicates that the log con-
+tains a committed transaction.
+
+    An example use of the log occurs in filewrite (kernel/file.c:135). The transaction looks like
+this:
+
+                 begin_op();
+                 ilock(f->ip);
+                 r = writei(f->ip, ...);
+                 iunlock(f->ip);
+                 end_op();
+
+This code is wrapped in a loop that breaks up large writes into individual transactions of just a few
+sectors at a time, to avoid overflowing the log. The call to writei writes many blocks as part of
+this transaction: the file’s inode, one or more bitmap blocks, and some data blocks.
+
+8.7 Code: Block allocator
+
+File and directory content is stored in disk blocks, which must be allocated from a free pool. Xv6’s
+block allocator maintains a free bitmap on disk, with one bit per block. A zero bit indicates that
+the corresponding block is free; a one bit indicates that it is in use. The program mkfs sets the bits
+corresponding to the boot sector, superblock, log blocks, inode blocks, and bitmap blocks.
+
+    The block allocator provides two functions: balloc allocates a new disk block, and bfree
+frees a block. balloc The loop in balloc at (kernel/fs.c:72) considers every block, starting at
+block 0 up to sb.size, the number of blocks in the file system. It looks for a block whose bitmap
+bit is zero, indicating that it is free. If balloc finds such a block, it updates the bitmap and returns
+the block. For efficiency, the loop is split into two pieces. The outer loop reads each block of bitmap
+bits. The inner loop checks all Bits-Per-Block (BPB) bits in a single bitmap block. The race that
+might occur if two processes try to allocate a block at the same time is prevented by the fact that
+the buffer cache only lets one process use any one bitmap block at a time.
+
+    bfree (kernel/fs.c:92) finds the right bitmap block and clears the right bit. Again the exclusive
+use implied by bread and brelse avoids the need for explicit locking.
+
+    As with much of the code described in the remainder of this chapter, balloc and bfree must
+be called inside a transaction.
+
+                                                         91
+8.8 Inode layer
+
+The term inode can have one of two related meanings. It might refer to the on-disk data structure
+containing a file’s size and list of data block numbers. Or “inode” might refer to an in-memory
+inode, which contains a copy of the on-disk inode as well as extra information needed within the
+kernel.
+
+    The on-disk inodes are packed into a contiguous area of disk called the inode blocks. Every
+inode is the same size, so it is easy, given a number n, to find the nth inode on the disk. In fact, this
+number n, called the inode number or i-number, is how inodes are identified in the implementation.
+
+    The on-disk inode is defined by a struct dinode (kernel/fs.h:32). The type field distin-
+guishes between files, directories, and special files (devices). A type of zero indicates that an on-
+disk inode is free. The nlink field counts the number of directory entries that refer to this inode,
+in order to recognize when the on-disk inode and its data blocks should be freed. The size field
+records the number of bytes of content in the file. The addrs array records the block numbers of
+the disk blocks holding the file’s content.
+
+    The kernel keeps the set of active inodes in memory in a table called itable; struct inode
+(kernel/file.h:17) is the in-memory copy of a struct dinode on disk. The kernel stores an inode
+in memory only if there are C pointers referring to that inode. The ref field counts the number
+of C pointers referring to the in-memory inode, and the kernel discards the inode from memory if
+the reference count drops to zero. The iget and iput functions acquire and release pointers to an
+inode, modifying the reference count. Pointers to an inode can come from file descriptors, current
+working directories, and transient kernel code such as exec.
+
+    There are four lock or lock-like mechanisms in xv6’s inode code. itable.lock protects the
+invariant that an inode is present in the inode table at most once, and the invariant that an in-
+memory inode’s ref field counts the number of in-memory pointers to the inode. Each in-memory
+inode has a lock field containing a sleep-lock, which ensures exclusive access to the inode’s fields
+(such as file length) as well as to the inode’s file or directory content blocks. An inode’s ref, if it is
+greater than zero, causes the system to maintain the inode in the table, and not re-use the table entry
+for a different inode. Finally, each inode contains a nlink field (on disk and copied in memory if
+in memory) that counts the number of directory entries that refer to a file; xv6 won’t free an inode
+if its link count is greater than zero.
+
+    A struct inode pointer returned by iget() is guaranteed to be valid until the corresponding
+call to iput(); the inode won’t be deleted, and the memory referred to by the pointer won’t be
+re-used for a different inode. iget() provides non-exclusive access to an inode, so that there can
+be many pointers to the same inode. Many parts of the file-system code depend on this behavior of
+iget(), both to hold long-term references to inodes (as open files and current directories) and to
+prevent races while avoiding deadlock in code that manipulates multiple inodes (such as pathname
+lookup).
+
+    The struct inode that iget returns may not have any useful content. In order to ensure it
+holds a copy of the on-disk inode, code must call ilock. This locks the inode (so that no other
+process can ilock it) and reads the inode from the disk, if it has not already been read. iunlock
+releases the lock on the inode. Separating acquisition of inode pointers from locking helps avoid
+deadlock in some situations, for example during directory lookup. Multiple processes can hold a
+
+                                                         92
+C pointer to an inode returned by iget, but only one process can lock the inode at a time.
+    The inode table only stores inodes to which kernel code or data structures hold C pointers. Its
+
+main job is synchronizing access by multiple processes. The inode table also happens to cache
+frequently-used inodes, but caching is secondary; if an inode is used frequently, the buffer cache
+will probably keep it in memory. Code that modifies an in-memory inode writes it to disk with
+iupdate.
+
+8.9 Code: Inodes
+
+To allocate a new inode (for example, when creating a file), xv6 calls ialloc (kernel/fs.c:199).
+ialloc is similar to balloc: it loops over the inode structures on the disk, one block at a time,
+looking for one that is marked free. When it finds one, it claims it by writing the new type to the
+disk and then returns an entry from the inode table with the tail call to iget (kernel/fs.c:213). The
+correct operation of ialloc depends on the fact that only one process at a time can be holding a
+reference to bp: ialloc can be sure that some other process does not simultaneously see that the
+inode is available and try to claim it.
+
+    iget (kernel/fs.c:247) looks through the inode table for an active entry (ip->ref > 0) with
+the desired device and inode number. If it finds one, it returns a new reference to that inode
+(kernel/fs.c:256-260). As iget scans, it records the position of the first empty slot (kernel/fs.c:261-
+262), which it uses if it needs to allocate a table entry.
+
+    Code must lock the inode using ilock before reading or writing its metadata or content. ilock
+(kernel/fs.c:293) uses a sleep-lock for this purpose. Once ilock has exclusive access to the inode,
+it reads the inode from disk (more likely, the buffer cache) if needed. The function iunlock
+(kernel/fs.c:321) releases the sleep-lock, which may cause any processes sleeping to be woken up.
+
+    iput (kernel/fs.c:337) releases a C pointer to an inode by decrementing the reference count
+(kernel/fs.c:360). If this is the last reference, the inode’s slot in the inode table is now free and can
+be re-used for a different inode.
+
+    If iput sees that there are no C pointer references to an inode and that the inode has no links
+to it (occurs in no directory), then the inode and its data blocks must be freed. iput calls itrunc
+to truncate the file to zero bytes, freeing the data blocks; sets the inode type to 0 (unallocated); and
+writes the inode to disk (kernel/fs.c:342).
+
+    The locking protocol in iput in the case in which it frees the inode deserves a closer look. One
+danger is that a concurrent thread might be waiting in ilock to use this inode (e.g., to read a file
+or list a directory), and won’t be prepared to find that the inode is no longer allocated. This can’t
+happen because there is no way for a system call to get a pointer to an in-memory inode if it has
+no links to it and ip->ref is one. That one reference is the reference owned by the thread calling
+iput. The other main danger is that a concurrent call to ialloc might choose the same inode that
+iput is freeing. This can happen only after the iupdate writes the disk so that the inode has type
+zero. This race is benign; the allocating thread will politely wait to acquire the inode’s sleep-lock
+before reading or writing the inode, at which point iput is done with it.
+
+    iput() can write to the disk. This means that any system call that uses the file system may
+write to the disk, because the system call may be the last one having a reference to the file. Even
+
+                                                         93
+calls like read() that appear to be read-only, may end up calling iput(). This, in turn, means
+that even read-only system calls must be wrapped in transactions if they use the file system.
+
+    There is a challenging interaction between iput() and crashes. iput() doesn’t truncate a file
+immediately when the link count for the file drops to zero, because some process might still hold a
+reference to the inode in memory: a process might still be reading and writing to the file, because
+it successfully opened it. But, if a crash happens before the last process closes the file descriptor
+for the file, then the file will be marked allocated on disk but no directory entry will point to it.
+
+    File systems handle this case in one of two ways. The simple solution is that on recovery, after
+reboot, the file system scans the whole file system for files that are marked allocated, but have no
+directory entry pointing to them. If any such file exists, then it can free those files.
+
+    The second solution doesn’t require scanning the file system. In this solution, the file system
+records on disk (e.g., in the super block) the inode inumber of a file whose link count drops to zero
+but whose reference count isn’t zero. If the file system removes the file when its reference count
+reaches 0, then it updates the on-disk list by removing that inode from the list. On recovery, the file
+system frees any file in the list.
+
+    Xv6 implements neither solution, which means that inodes may be marked allocated on disk,
+even though they are not in use anymore. This means that over time xv6 runs the risk that it may
+run out of disk space.
+
+8.10 Code: Inode content
+
+The on-disk inode structure, struct dinode, contains a size and an array of block numbers (see
+Figure 8.3). The inode data is found in the blocks listed in the dinode ’s addrs array. The first
+NDIRECT blocks of data are listed in the first NDIRECT entries in the array; these blocks are called
+direct blocks. The next NINDIRECT blocks of data are listed not in the inode but in a data block
+called the indirect block. The last entry in the addrs array gives the address of the indirect block.
+Thus the first 12 kB ( NDIRECT x BSIZE) bytes of a file can be loaded from blocks listed in the
+inode, while the next 256 kB ( NINDIRECT x BSIZE) bytes can only be loaded after consulting the
+indirect block. This is a good on-disk representation but a complex one for clients. The function
+bmap manages the representation so that higher-level routines, such as readi and writei, which
+we will see shortly, do not need to manage this complexity. bmap returns the disk block number of
+the bn’th data block for the inode ip. If ip does not have such a block yet, bmap allocates one.
+
+    The function bmap (kernel/fs.c:383) begins by picking off the easy case: the first NDIRECT
+blocks are listed in the inode itself (kernel/fs.c:388-396). The next NINDIRECT blocks are listed
+in the indirect block at ip->addrs[NDIRECT]. bmap reads the indirect block (kernel/fs.c:407) and
+then reads a block number from the right position within the block (kernel/fs.c:408). If the block
+number exceeds NDIRECT+NINDIRECT, bmap panics; writei contains the check that prevents
+this from happening (kernel/fs.c:513).
+
+    bmap allocates blocks as needed. An ip->addrs[] or indirect entry of zero indicates that no
+block is allocated. As bmap encounters zeros, it replaces them with the numbers of fresh blocks,
+allocated on demand (kernel/fs.c:389-390) (kernel/fs.c:401-402).
+
+    itrunc frees a file’s blocks, resetting the inode’s size to zero. itrunc (kernel/fs.c:426) starts by
+
+                                                         94
+  dinode         data
+
+  type        ...
+ major
+ minor           data
+  nlink
+            indirect block
+   size       address 1
+                 .....
+address 1
+   .....     address 256
+
+address 12
+indirect
+
+                            data
+
+                            ...
+
+                            data
+
+                              Figure 8.3: The representation of a file on disk.
+
+freeing the direct blocks (kernel/fs.c:432-437), then the ones listed in the indirect block (kernel/fs.c:442-
+445), and finally the indirect block itself (kernel/fs.c:447-448).
+
+    bmap makes it easy for readi and writei to get at an inode’s data. readi (kernel/fs.c:472)
+starts by making sure that the offset and count are not beyond the end of the file. Reads that
+start beyond the end of the file return an error (kernel/fs.c:477-478) while reads that start at or
+cross the end of the file return fewer bytes than requested (kernel/fs.c:479-480). The main loop
+processes each block of the file, copying data from the buffer into dst (kernel/fs.c:482-494). writei
+(kernel/fs.c:506) is identical to readi, with three exceptions: writes that start at or cross the end of
+the file grow the file, up to the maximum file size (kernel/fs.c:513-514); the loop copies data into the
+buffers instead of out (kernel/fs.c:522); and if the write has extended the file, writei must update
+its size (kernel/fs.c:530-531).
+
+    The function stati (kernel/fs.c:458) copies inode metadata into the stat structure, which is
+exposed to user programs via the stat system call.
+
+8.11 Code: directory layer
+
+A directory is implemented internally much like a file. Its inode has type T_DIR and its data is a
+sequence of directory entries. Each entry is a struct dirent (kernel/fs.h:56), which contains a
+
+                                                         95
+name and an inode number. The name is at most DIRSIZ (14) characters; if shorter, it is terminated
+by a NULL (0) byte. Directory entries with inode number zero are free.
+
+    The function dirlookup (kernel/fs.c:552) searches a directory for an entry with the given name.
+If it finds one, it returns a pointer to the corresponding inode, unlocked, and sets *poff to the byte
+offset of the entry within the directory, in case the caller wishes to edit it. If dirlookup finds
+an entry with the right name, it updates *poff and returns an unlocked inode obtained via iget.
+dirlookup is the reason that iget returns unlocked inodes. The caller has locked dp, so if the
+lookup was for ., an alias for the current directory, attempting to lock the inode before returning
+would try to re-lock dp and deadlock. (There are more complicated deadlock scenarios involving
+multiple processes and .., an alias for the parent directory; . is not the only problem.) The caller
+can unlock dp and then lock ip, ensuring that it only holds one lock at a time.
+
+    The function dirlink (kernel/fs.c:580) writes a new directory entry with the given name and in-
+ode number into the directory dp. If the name already exists, dirlink returns an error (kernel/fs.c:586-
+590). The main loop reads directory entries looking for an unallocated entry. When it finds one, it
+stops the loop early (kernel/fs.c:592-597), with off set to the offset of the available entry. Other-
+wise, the loop ends with off set to dp->size. Either way, dirlink then adds a new entry to the
+directory by writing at offset off (kernel/fs.c:602-603).
+
+8.12 Code: Path names
+
+Path name lookup involves a succession of calls to dirlookup, one for each path component.
+namei (kernel/fs.c:687) evaluates path and returns the corresponding inode. The function nameiparent
+is a variant: it stops before the last element, returning the inode of the parent directory and copying
+the final element into name. Both call the generalized function namex to do the real work.
+
+    namex (kernel/fs.c:652) starts by deciding where the path evaluation begins. If the path begins
+with a slash, evaluation begins at the root; otherwise, the current directory (kernel/fs.c:656-659).
+Then it uses skipelem to consider each element of the path in turn (kernel/fs.c:661). Each iteration
+of the loop must look up name in the current inode ip. The iteration begins by locking ip and
+checking that it is a directory. If not, the lookup fails (kernel/fs.c:662-666). (Locking ip is necessary
+not because ip->type can change underfoot—it can’t—but because until ilock runs, ip->type
+is not guaranteed to have been loaded from disk.) If the call is nameiparent and this is the last
+path element, the loop stops early, as per the definition of nameiparent; the final path element has
+already been copied into name, so namex need only return the unlocked ip (kernel/fs.c:667-671).
+Finally, the loop looks for the path element using dirlookup and prepares for the next iteration
+by setting ip = next (kernel/fs.c:672-677). When the loop runs out of path elements, it returns ip.
+
+    The procedure namex may take a long time to complete: it could involve several disk opera-
+tions to read inodes and directory blocks for the directories traversed in the pathname (if they are
+not in the buffer cache). Xv6 is carefully designed so that if an invocation of namex by one kernel
+thread is blocked on a disk I/O, another kernel thread looking up a different pathname can pro-
+ceed concurrently. namex locks each directory in the path separately so that lookups in different
+directories can proceed in parallel.
+
+    This concurrency introduces some challenges. For example, while one kernel thread is looking
+
+                                                         96
+up a pathname another kernel thread may be changing the directory tree by unlinking a directory.
+A potential risk is that a lookup may be searching a directory that has been deleted by another
+kernel thread and its blocks have been re-used for another directory or file.
+
+    Xv6 avoids such races. For example, when executing dirlookup in namex, the lookup thread
+holds the lock on the directory and dirlookup returns an inode that was obtained using iget.
+iget increases the reference count of the inode. Only after receiving the inode from dirlookup
+does namex release the lock on the directory. Now another thread may unlink the inode from the
+directory but xv6 will not delete the inode yet, because the reference count of the inode is still
+larger than zero.
+
+    Another risk is deadlock. For example, next points to the same inode as ip when looking
+up ".". Locking next before releasing the lock on ip would result in a deadlock. To avoid this
+deadlock, namex unlocks the directory before obtaining a lock on next. Here again we see why
+the separation between iget and ilock is important.
+
+8.13 File descriptor layer
+
+A cool aspect of the Unix interface is that most resources in Unix are represented as files, including
+devices such as the console, pipes, and of course, real files. The file descriptor layer is the layer
+that achieves this uniformity.
+
+    Xv6 gives each process its own table of open files, or file descriptors, as we saw in Chapter 1.
+Each open file is represented by a struct file (kernel/file.h:1), which is a wrapper around either
+an inode or a pipe, plus an I/O offset. Each call to open creates a new open file (a new struct
+file): if multiple processes open the same file independently, the different instances will have
+different I/O offsets. On the other hand, a single open file (the same struct file) can appear
+multiple times in one process’s file table and also in the file tables of multiple processes. This
+would happen if one process used open to open the file and then created aliases using dup or
+shared it with a child using fork. A reference count tracks the number of references to a particular
+open file. A file can be open for reading or writing or both. The readable and writable fields
+track this.
+
+    All the open files in the system are kept in a global file table, the ftable. The file table
+has functions to allocate a file (filealloc), create a duplicate reference (filedup), release a
+reference (fileclose), and read and write data (fileread and filewrite).
+
+    The first three follow the now-familiar form. filealloc (kernel/file.c:30) scans the file table for
+an unreferenced file (f->ref == 0) and returns a new reference; filedup (kernel/file.c:48) incre-
+ments the reference count; and fileclose (kernel/file.c:60) decrements it. When a file’s reference
+count reaches zero, fileclose releases the underlying pipe or inode, according to the type.
+
+    The functions filestat, fileread, and filewrite implement the stat, read, and write
+operations on files. filestat (kernel/file.c:88) is only allowed on inodes and calls stati. fileread
+and filewrite check that the operation is allowed by the open mode and then pass the call
+through to either the pipe or inode implementation. If the file represents an inode, fileread and
+filewrite use the I/O offset as the offset for the operation and then advance it (kernel/file.c:122-
+123) (kernel/file.c:153-154). Pipes have no concept of offset. Recall that the inode functions require
+
+                                                         97
+the caller to handle locking (kernel/file.c:94-96) (kernel/file.c:121-124) (kernel/file.c:163-166). The in-
+ode locking has the convenient side effect that the read and write offsets are updated atomically,
+so that multiple writing to the same file simultaneously cannot overwrite each other’s data, though
+their writes may end up interlaced.
+
+8.14 Code: System calls
+
+With the functions that the lower layers provide, the implementation of most system calls is trivial
+(see (kernel/sysfile.c)). There are a few calls that deserve a closer look.
+
+    The functions sys_link and sys_unlink edit directories, creating or removing references to
+inodes. They are another good example of the power of using transactions. sys_link (kernel/sys-
+file.c:124) begins by fetching its arguments, two strings old and new (kernel/sysfile.c:129). Assuming
+old exists and is not a directory (kernel/sysfile.c:133-136), sys_link increments its ip->nlink
+count. Then sys_link calls nameiparent to find the parent directory and final path element
+of new (kernel/sysfile.c:149) and creates a new directory entry pointing at old ’s inode (kernel/sys-
+file.c:152). The new parent directory must exist and be on the same device as the existing inode:
+inode numbers only have a unique meaning on a single disk. If an error like this occurs, sys_link
+must go back and decrement ip->nlink.
+
+    Transactions simplify the implementation because it requires updating multiple disk blocks,
+but we don’t have to worry about the order in which we do them. They either will all succeed or
+none. For example, without transactions, updating ip->nlink before creating a link, would put
+the file system temporarily in an unsafe state, and a crash in between could result in havoc. With
+transactions we don’t have to worry about this.
+
+    sys_link creates a new name for an existing inode. The function create (kernel/sysfile.c:246)
+creates a new name for a new inode. It is a generalization of the three file creation system calls:
+open with the O_CREATE flag makes a new ordinary file, mkdir makes a new directory, and
+mkdev makes a new device file. Like sys_link, create starts by calling nameiparent to get
+the inode of the parent directory. It then calls dirlookup to check whether the name already
+exists (kernel/sysfile.c:256). If the name does exist, create’s behavior depends on which system
+call it is being used for: open has different semantics from mkdir and mkdev. If create is being
+used on behalf of open (type == T_FILE) and the name that exists is itself a regular file, then
+open treats that as a success, so create does too (kernel/sysfile.c:260). Otherwise, it is an error
+(kernel/sysfile.c:261-262). If the name does not already exist, create now allocates a new inode
+with ialloc (kernel/sysfile.c:265). If the new inode is a directory, create initializes it with . and
+.. entries. Finally, now that the data is initialized properly, create can link it into the parent
+directory (kernel/sysfile.c:278). create, like sys_link, holds two inode locks simultaneously: ip
+and dp. There is no possibility of deadlock because the inode ip is freshly allocated: no other
+process in the system will hold ip ’s lock and then try to lock dp.
+
+    Using create, it is easy to implement sys_open, sys_mkdir, and sys_mknod. sys_open
+(kernel/sysfile.c:305) is the most complex, because creating a new file is only a small part of what
+it can do. If open is passed the O_CREATE flag, it calls create (kernel/sysfile.c:320). Otherwise, it
+calls namei (kernel/sysfile.c:326). create returns a locked inode, but namei does not, so sys_open
+
+                                                         98
+must lock the inode itself. This provides a convenient place to check that directories are only
+opened for reading, not writing. Assuming the inode was obtained one way or the other, sys_open
+allocates a file and a file descriptor (kernel/sysfile.c:344) and then fills in the file (kernel/sysfile.c:356-
+361). Note that no other process can access the partially initialized file since it is only in the current
+process’s table.
+
+    Chapter 7 examined the implementation of pipes before we even had a file system. The function
+sys_pipe connects that implementation to the file system by providing a way to create a pipe pair.
+Its argument is a pointer to space for two integers, where it will record the two new file descriptors.
+Then it allocates the pipe and installs the file descriptors.
+
+8.15 Real world
+
+The buffer cache in a real-world operating system is significantly more complex than xv6’s, but it
+serves the same two purposes: caching and synchronizing access to the disk. Xv6’s buffer cache,
+like V6’s, uses a simple least recently used (LRU) eviction policy; there are many more complex
+policies that can be implemented, each good for some workloads and not as good for others. A more
+efficient LRU cache would eliminate the linked list, instead using a hash table for lookups and a
+heap for LRU evictions. Modern buffer caches are typically integrated with the virtual memory
+system to support memory-mapped files.
+
+    Xv6’s logging system is inefficient. A commit cannot occur concurrently with file-system sys-
+tem calls. The system logs entire blocks, even if only a few bytes in a block are changed. It performs
+synchronous log writes, a block at a time, each of which is likely to require an entire disk rotation
+time. Real logging systems address all of these problems.
+
+    Logging is not the only way to provide crash recovery. Early file systems used a scavenger
+during reboot (for example, the UNIX fsck program) to examine every file and directory and the
+block and inode free lists, looking for and resolving inconsistencies. Scavenging can take hours
+for large file systems, and there are situations where it is not possible to resolve inconsistencies in
+a way that causes the original system calls to be atomic. Recovery from a log is much faster and
+causes system calls to be atomic in the face of crashes.
+
+    Xv6 uses the same basic on-disk layout of inodes and directories as early UNIX; this scheme
+has been remarkably persistent over the years. BSD’s UFS/FFS and Linux’s ext2/ext3 use essen-
+tially the same data structures. The most inefficient part of the file system layout is the directory,
+which requires a linear scan over all the disk blocks during each lookup. This is reasonable when
+directories are only a few disk blocks, but is expensive for directories holding many files. Microsoft
+Windows’s NTFS, macOS’s HFS, and Solaris’s ZFS, just to name a few, implement a directory as
+an on-disk balanced tree of blocks. This is complicated but guarantees logarithmic-time directory
+lookups.
+
+    Xv6 is naive about disk failures: if a disk operation fails, xv6 panics. Whether this is reasonable
+depends on the hardware: if an operating systems sits atop special hardware that uses redundancy
+to mask disk failures, perhaps the operating system sees failures so infrequently that panicking is
+okay. On the other hand, operating systems using plain disks should expect failures and handle
+them more gracefully, so that the loss of a block in one file doesn’t affect the use of the rest of the
+
+                                                         99
+file system.
+    Xv6 requires that the file system fit on one disk device and not change in size. As large
+
+databases and multimedia files drive storage requirements ever higher, operating systems are de-
+veloping ways to eliminate the “one disk per file system” bottleneck. The basic approach is to
+combine many disks into a single logical disk. Hardware solutions such as RAID are still the most
+popular, but the current trend is moving toward implementing as much of this logic in software as
+possible. These software implementations typically allow rich functionality like growing or shrink-
+ing the logical device by adding or removing disks on the fly. Of course, a storage layer that can
+grow or shrink on the fly requires a file system that can do the same: the fixed-size array of inode
+blocks used by xv6 would not work well in such environments. Separating disk management from
+the file system may be the cleanest design, but the complex interface between the two has led some
+systems, like Sun’s ZFS, to combine them.
+
+    Xv6’s file system lacks many other features of modern file systems; for example, it lacks sup-
+port for snapshots and incremental backup.
+
+    Modern Unix systems allow many kinds of resources to be accessed with the same system calls
+as on-disk storage: named pipes, network connections, remotely-accessed network file systems,
+and monitoring and control interfaces such as /proc. Instead of xv6’s if statements in fileread
+and filewrite, these systems typically give each open file a table of function pointers, one per
+operation, and call the function pointer to invoke that inode’s implementation of the call. Network
+file systems and user-level file systems provide functions that turn those calls into network RPCs
+and wait for the response before returning.
+
+8.16 Exercises
+
+   1. Why panic in balloc ? Can xv6 recover?
+
+   2. Why panic in ialloc ? Can xv6 recover?
+
+   3. Why doesn’t filealloc panic when it runs out of files? Why is this more common and
+       therefore worth handling?
+
+   4. Suppose the file corresponding to ip gets unlinked by another process between sys_link
+       ’s calls to iunlock(ip) and dirlink. Will the link be created correctly? Why or why not?
+
+   5. create makes four function calls (one to ialloc and three to dirlink) that it requires
+       to succeed. If any doesn’t, create calls panic. Why is this acceptable? Why can’t any of
+       those four calls fail?
+
+   6. sys_chdir calls iunlock(ip) before iput(cp->cwd), which might try to lock cp->cwd,
+       yet postponing iunlock(ip) until after the iput would not cause deadlocks. Why not?
+
+   7. Implement the lseek system call. Supporting lseek will also require that you modify
+       filewrite to fill holes in the file with zero if lseek sets off beyond f->ip->size.
+
+                                                         100
+ 8. Add O_TRUNC and O_APPEND to open, so that > and >> operators work in the shell.
+ 9. Modify the file system to support symbolic links.
+10. Modify the file system to support named pipes.
+11. Modify the file and VM system to support memory-mapped files.
+
+                                                      101
+102
+Chapter 9
+
+Concurrency revisited
+
+Simultaneously obtaining good parallel performance, correctness despite concurrency, and under-
+standable code is a big challenge in kernel design. Straightforward use of locks is the best path to
+correctness, but is not always possible. This chapter highlights examples in which xv6 is forced to
+use locks in an involved way, and examples where xv6 uses lock-like techniques but not locks.
+
+9.1 Locking patterns
+
+Cached items are often a challenge to lock. For example, the file system’s block cache (ker-
+nel/bio.c:26) stores copies of up to NBUF disk blocks. It’s vital that a given disk block have at
+most one copy in the cache; otherwise, different processes might make conflicting changes to dif-
+ferent copies of what ought to be the same block. Each cached block is stored in a struct buf
+(kernel/buf.h:1). A struct buf has a lock field which helps ensure that only one process uses
+a given disk block at a time. However, that lock is not enough: what if a block is not present in
+the cache at all, and two processes want to use it at the same time? There is no struct buf
+(since the block isn’t yet cached), and thus there is nothing to lock. Xv6 deals with this situation
+by associating an additional lock (bcache.lock) with the set of identities of cached blocks.
+Code that needs to check if a block is cached (e.g., bget (kernel/bio.c:59)), or change the set of
+cached blocks, must hold bcache.lock; after that code has found the block and struct buf
+it needs, it can release bcache.lock and lock just the specific block. This is a common pattern:
+one lock for the set of items, plus one lock per item.
+
+    Ordinarily the same function that acquires a lock will release it. But a more precise way to view
+things is that a lock is acquired at the start of a sequence that must appear atomic, and released
+when that sequence ends. If the sequence starts and ends in different functions, or different threads,
+or on different CPUs, then the lock acquire and release must do the same. The function of the lock
+is to force other uses to wait, not to pin a piece of data to a particular agent. One example is the
+acquire in yield (kernel/proc.c:512), which is released in the scheduler thread rather than in the
+acquiring process. Another example is the acquiresleep in ilock (kernel/fs.c:293); this code
+often sleeps while reading the disk; it may wake up on a different CPU, which means the lock may
+be acquired and released on different CPUs.
+
+                                                         103
+    Freeing an object that is protected by a lock embedded in the object is a delicate business,
+since owning the lock is not enough to guarantee that freeing would be correct. The problem
+case arises when some other thread is waiting in acquire to use the object; freeing the object
+implicitly frees the embedded lock, which will cause the waiting thread to malfunction. One so-
+lution is to track how many references to the object exist, so that it is only freed when the last
+reference disappears. See pipeclose (kernel/pipe.c:59) for an example; pi->readopen and
+pi->writeopen track whether the pipe has file descriptors referring to it.
+
+    Usually one sees locks around sequences of reads and writes to sets of related items; the locks
+ensure that other threads see only completed sequences of updates (as long as they, too, lock).
+What about situations where the update is a simple write to a single shared variable? For example,
+setkilled and killed (kernel/proc.c:619) lock around their simple uses of p->killed. If
+there were no lock, one thread could write p->killed at the same time that another thread reads
+it. This is a race, and the C language specification says that a race yields undefined behavior, which
+means the program may crash or yield incorrect results1. The locks prevent the race and avoid the
+undefined behavior.
+
+    One reason races can break programs is that, if there are no locks or equivalent constructs,
+the compiler may generate machine code that reads and writes memory in ways quite different
+than the original C code. For example, the machine code of a thread calling killed could copy
+p->killed to a register and read only that cached value; this would mean that the thread might
+never see any writes to p->killed. The locks prevent such caching.
+
+9.2 Lock-like patterns
+
+In many places xv6 uses a reference count or a flag in a lock-like way to indicate that an object is
+allocated and should not be freed or re-used. A process’s p->state acts in this way, as do the
+reference counts in file, inode, and buf structures. While in each case a lock protects the flag
+or reference count, it is the latter that prevents the object from being prematurely freed.
+
+    The file system uses struct inode reference counts as a kind of shared lock that can be held
+by multiple processes, in order to avoid deadlocks that would occur if the code used ordinary locks.
+For example, the loop in namex (kernel/fs.c:652) locks the directory named by each pathname
+component in turn. However, namex must release each lock at the end of the loop, since if it held
+multiple locks it could deadlock with itself if the pathname included a dot (e.g., a/./b). It might
+also deadlock with a concurrent lookup involving the directory and ... As Chapter 8 explains,
+the solution is for the loop to carry the directory inode over to the next iteration with its reference
+count incremented, but not locked.
+
+    Some data items are protected by different mechanisms at different times, and may at times be
+protected from concurrent access implicitly by the structure of the xv6 code rather than by explicit
+locks. For example, when a physical page is free, it is protected by kmem.lock (kernel/kalloc.c:24).
+If the page is then allocated as a pipe (kernel/pipe.c:23), it is protected by a different lock (the em-
+bedded pi->lock). If the page is re-allocated for a new process’s user memory, it is not protected
+
+    1“Threads and data races” in https://en.cppreference.com/w/c/language/memory_model
+
+                                                         104
+by a lock at all. Instead, the fact that the allocator won’t give that page to any other process (until it
+is freed) protects it from concurrent access. The ownership of a new process’s memory is complex:
+first the parent allocates and manipulates it in fork, then the child uses it, and (after the child
+exits) the parent again owns the memory and passes it to kfree. There are two lessons here: a
+data object may be protected from concurrency in different ways at different points in its lifetime,
+and the protection may take the form of implicit structure rather than explicit locks.
+
+    A final lock-like example is the need to disable interrupts around calls to mycpu() (ker-
+nel/proc.c:83). Disabling interrupts causes the calling code to be atomic with respect to timer in-
+terrupts that could force a context switch, and thus move the process to a different CPU.
+
+9.3 No locks at all
+
+There are a few places where xv6 shares mutable data with no locks at all. One is in the implemen-
+tation of spinlocks, although one could view the RISC-V atomic instructions as relying on locks
+implemented in hardware. Another is the started variable in main.c (kernel/main.c:7), used
+to prevent other CPUs from running until CPU zero has finished initializing xv6; the volatile
+ensures that the compiler actually generates load and store instructions.
+
+    Xv6 contains cases in which one CPU or thread writes some data, and another CPU or thread
+reads the data, but there is no specific lock dedicated to protecting that data. For example, in
+fork, the parent writes the child’s user memory pages, and the child (a different thread, perhaps
+on a different CPU) reads those pages; no lock explicitly protects those pages. This is not strictly a
+locking problem, since the child doesn’t start executing until after the parent has finished writing. It
+is a potential memory ordering problem (see Chapter 6), since without a memory barrier there’s no
+reason to expect one CPU to see another CPU’s writes. However, since the parent releases locks,
+and the child acquires locks as it starts up, the memory barriers in acquire and release ensure
+that the child’s CPU sees the parent’s writes.
+
+9.4 Parallelism
+
+Locking is primarily about suppressing parallelism in the interests of correctness. Because per-
+formance is also important, kernel designers often have to think about how to use locks in a way
+that both achieves correctness and allows parallelism. While xv6 is not systematically designed for
+high performance, it’s still worth considering which xv6 operations can execute in parallel, and
+which might conflict on locks.
+
+    Pipes in xv6 are an example of fairly good parallelism. Each pipe has its own lock, so that dif-
+ferent processes can read and write different pipes in parallel on different CPUs. For a given pipe,
+however, the writer and reader must wait for each other to release the lock; they can’t read/write
+the same pipe at the same time. It is also the case that a read from an empty pipe (or a write to a
+full pipe) must block, but this is not due to the locking scheme.
+
+    Context switching is a more complex example. Two kernel threads, each executing on its own
+CPU, can call yield, sched, and swtch at the same time, and the calls will execute in parallel.
+
+                                                         105
+The threads each hold a lock, but they are different locks, so they don’t have to wait for each other.
+Once in scheduler, however, the two CPUs may conflict on locks while searching the table
+of processes for one that is RUNNABLE. That is, xv6 is likely to get a performance benefit from
+multiple CPUs during context switch, but perhaps not as much as it could.
+
+    Another example is concurrent calls to fork from different processes on different CPUs. The
+calls may have to wait for each other for pid_lock and kmem.lock, and for per-process locks
+needed to search the process table for an UNUSED process. On the other hand, the two forking
+processes can copy user memory pages and format page-table pages fully in parallel.
+
+    The locking scheme in each of the above examples sacrifices parallel performance in certain
+cases. In each case it’s possible to obtain more parallelism using a more elaborate design. Whether
+it’s worthwhile depends on details: how often the relevant operations are invoked, how long the
+code spends with a contended lock held, how many CPUs might be running conflicting operations
+at the same time, whether other parts of the code are more restrictive bottlenecks. It can be difficult
+to guess whether a given locking scheme might cause performance problems, or whether a new
+design is significantly better, so measurement on realistic workloads is often required.
+
+9.5 Exercises
+
+   1. Modify xv6’s pipe implementation to allow a read and a write to the same pipe to proceed in
+       parallel on different CPUs.
+
+   2. Modify xv6’s scheduler() to reduce lock contention when different CPUs are looking
+       for runnable processes at the same time.
+
+   3. Eliminate some of the serialization in xv6’s fork().
+
+                                                         106
+Chapter 10
+Summary
+
+This text introduced the main ideas in operating systems by studying one operating system, xv6,
+line by line. Some code lines embody the essence of the main ideas (e.g., context switching, user/k-
+ernel boundary, locks, etc.) and each line is important; other code lines provide an illustration of
+how to implement a particular operating system idea and could easily be done in different ways
+(e.g., a better algorithm for scheduling, better on-disk data structures to represent files, better log-
+ging to allow for concurrent transactions, etc.). All the ideas were illustrated in the context of one
+particular, very successful system call interface, the Unix interface, but those ideas carry over to
+the design of other operating systems.
+
+                                                         107
+108
+Bibliography
+
+ [1] Linux common vulnerabilities and exposures (CVEs). https://cve.mitre.org/
+      cgi-bin/cvekey.cgi?keyword=linux.
+
+ [2] The RISC-V instruction set manual Volume I: unprivileged specification ISA. https:
+      //drive.google.com/file/d/17GeetSnT5wW3xNuAHI95-SI1gPGd5sJ_
+      /view?usp=drive_link, 2024.
+
+ [3] The RISC-V instruction set manual Volume II: privileged specification. https:
+      //drive.google.com/file/d/1uviu1nH-tScFfgrovvFCrj7Omv8tFtkp/
+      view?usp=drive_link, 2024.
+
+ [4] Hans-J Boehm. Threads cannot be implemented as a library. ACM PLDI Conference, 2005.
+
+ [5] Edsger Dijkstra. Cooperating sequential processes. https://www.cs.utexas.edu/
+      users/EWD/transcriptions/EWD01xx/EWD123.html, 1965.
+
+ [6] Maurice Herlihy and Nir Shavit. The Art of Multiprocessor Programming, Revised Reprint.
+      2012.
+
+ [7] Brian W. Kernighan. The C Programming Language. Prentice Hall Professional Technical
+      Reference, 2nd edition, 1988.
+
+ [8] Gerwin Klein, Kevin Elphinstone, Gernot Heiser, June Andronick, David Cock, Philip Derrin,
+      Dhammika Elkaduwe, Kai Engelhardt, Rafal Kolanski, Michael Norrish, Thomas Sewell,
+      Harvey Tuch, and Simon Winwood. Sel4: Formal verification of an OS kernel. In Proceedings
+      of the ACM SIGOPS 22nd Symposium on Operating Systems Principles, page 207–220, 2009.
+
+ [9] Donald Knuth. Fundamental Algorithms. The Art of Computer Programming. (Second ed.),
+      volume 1. 1997.
+
+[10] L Lamport. A new solution of dijkstra’s concurrent programming problem. Communications
+      of the ACM, 1974.
+
+[11] John Lions. Commentary on UNIX 6th Edition. Peer to Peer Communications, 2000.
+
+[12] Paul E. Mckenney, Silas Boyd-wickizer, and Jonathan Walpole. RCU usage in the linux
+      kernel: One decade later, 2013.
+
+                                                         109
+[13] Martin Michael and Daniel Durich. The NS16550A: UART design and application consid-
+      erations. http://bitsavers.trailing-edge.com/components/national/
+      _appNotes/AN-0491.pdf, 1987.
+
+[14] Aleph One. Smashing the stack for fun and profit. http://phrack.org/issues/49/
+      14.html#article.
+
+[15] David Patterson and Andrew Waterman. The RISC-V Reader: an open architecture Atlas.
+      Strawberry Canyon, 2017.
+
+[16] Dave Presotto, Rob Pike, Ken Thompson, and Howard Trickey. Plan 9, a distributed system.
+      In In Proceedings of the Spring 1991 EurOpen Conference, pages 43–50, 1991.
+
+[17] Dennis M. Ritchie and Ken Thompson. The UNIX time-sharing system. Commun. ACM,
+      17(7):365–375, July 1974.
+
+                                                         110
+Index                          condition lock, 77
+                               conditional synchronization, 75
+., 96, 98                      conflict, 62
+.., 96, 98                     contention, 62
+/init, 28, 40                  contexts, 72
+_entry, 28                     convoys, 82
+                               copy-on-write (COW) fork, 49
+absorption, 90                 copyinstr, 47
+acquire, 63, 67                copyout, 41
+address space, 26              coroutines, 74
+argc, 41                       CPU, 9
+argv, 41                       cpu->context, 72, 73
+atomic, 63                     crash recovery, 85
+                               create, 98
+balloc, 91, 93                 critical section, 62
+batching, 89                   current directory, 17
+bcache.head, 87
+begin_op, 90                   deadlock, 64
+bfree, 91                      demand paging, 50
+bget, 87                       direct blocks, 94
+binit, 87                      direct memory access (DMA), 56
+block, 86                      dirlink, 96
+bmap, 94                       dirlookup, 96, 98
+bottom half, 53                DIRSIZ, 96
+bread, 87, 88                  disk, 87
+brelse, 87, 88                 driver, 53
+BSIZE, 94                      dup, 97
+buf, 87
+busy waiting, 75               ecall, 23, 27
+bwrite, 87, 88, 90             ELF format, 40
+                               ELF_MAGIC, 40
+chan, 76, 78                   end_op, 90
+child, 10                      exception, 43
+commit, 89                     exec, 12–14, 28, 41, 47
+concurrency, 59
+concurrency control, 59  111
+exit, 11, 79                  kernel space, 9, 23
+                              kfree, 37
+file descriptor, 13           kinit, 37
+filealloc, 97                 kvminit, 36
+fileclose, 97                 kvminithart, 36
+filedup, 97                   kvmmake, 36
+fileread, 97, 100             kvmmap, 36
+filestat, 97
+filewrite, 91, 97, 100        lazy allocation, 49
+fork, 10, 12–14, 97           links, 18
+forkret, 74                   loadseg, 40
+freerange, 37                 lock, 59
+fsck, 99                      log, 89
+fsinit, 91                    log_write, 90
+ftable, 97                    lost wake-up, 76
+
+getcmd, 12                    machine mode, 23
+group commit, 89              main, 36, 37, 87
+guard page, 35                malloc, 13
+                              mappages, 36
+handler, 43                   memory barrier, 68
+hartid, 74                    memory model, 68
+                              memory-mapped, 35, 53
+I/O, 13                       memory-mapped files, 50
+I/O concurrency, 55           metadata, 18
+I/O redirection, 14           microkernel, 24
+ialloc, 93, 98                mkdev, 98
+iget, 92, 93, 96              mkdir, 98
+ilock, 92, 93, 96             mkfs, 86
+indirect block, 94            monolithic kernel, 21, 23
+initcode.S, 28, 47            multi-core, 21
+initlog, 91                   multiplexing, 71
+inode, 18, 86, 92             multiprocessor, 21
+install_trans, 91             mutual exclusion, 61
+interface design, 9           mycpu, 74
+interrupt, 43                 myproc, 74
+iput, 92, 93
+isolation, 21                 namei, 40, 98
+itable, 92                    nameiparent, 96, 98
+itrunc, 93, 94                namex, 96
+iunlock, 93                   NBUF, 87
+                              NDIRECT, 94
+kalloc, 38                    NINDIRECT, 94
+kernel, 9, 23
+                        112
+O_CREATE, 98                         readi, 40, 94, 95
+open, 97, 98                         recover_from_log, 91
+                                     recursive locks, 66
+p->killed, 80                        release, 63, 67
+p->kstack, 27                        root, 17
+p->lock, 73, 74, 78                  round robin, 82
+p->pagetable, 27                     RUNNABLE, 78, 79
+p->state, 27
+p->xxx, 27                           satp, 33
+page, 31                             sbrk, 13
+page table entries (PTEs), 31        scause, 44
+page-fault exception, 32, 49         sched, 72–74, 78
+paging area, 50                      scheduler, 73, 74
+paging to disk, 50                   sector, 86
+parent, 10                           semaphore, 75
+path, 17                             sepc, 44
+persistence, 85                      sequence coordination, 75
+PGROUNDUP, 37                        serializing, 62
+physical address, 26                 sfence.vma, 37
+PHYSTOP, 36, 37                      shell, 10
+PID, 10                              signal, 83
+pipe, 16                             skipelem, 96
+piperead, 79                         sleep, 76–78
+pipewrite, 79                        sleep-locks, 68
+polling, 56, 75                      SLEEPING, 78
+pop_off, 67                          sret, 27
+printf, 12                           sscratch, 44
+priority inversion, 82               sstatus, 44
+privileged instructions, 23          stat, 95, 97
+proc_mapstacks, 36                   stati, 95, 97
+proc_pagetable, 40                   struct context, 72
+process, 9, 26                       struct cpu, 74
+programmed I/O, 56                   struct dinode, 92, 94
+PTE_R, 33                            struct dirent, 95
+PTE_U, 33                            struct elfhdr, 40
+PTE_V, 33                            struct file, 97
+PTE_W, 33                            struct inode, 92
+PTE_X, 33                            struct pipe, 79
+push_off, 67                         struct proc, 27
+                                     struct run, 37
+race, 61, 104                        struct spinlock, 63
+re-entrant locks, 66                 stval, 49
+read, 97                             stvec, 44
+
+                               113
+superblock, 86                                    trapframe, 27
+supervisor mode, 23                               type cast, 37
+swtch, 72–74
+SYS_exec, 47                                      UART, 53
+sys_link, 98                                      undefined behavior, 104
+sys_mkdir, 98                                     unlink, 90
+sys_mknod, 98                                     user memory, 26
+sys_open, 98                                      user mode, 23
+sys_pipe, 99                                      user space, 9, 23
+sys_sleep, 67                                     usertrap, 72
+sys_unlink, 98                                    ustack, 41
+syscall, 47                                       uvmalloc, 40, 41
+system call, 9
+                                                  valid, 87
+T_DIR, 95                                         vector, 43
+T_FILE, 98                                        virtio_disk_rw, 87, 88
+thread, 27                                        virtual address, 26
+thundering herd, 82
+ticks, 67                                         wait, 11, 12, 79
+tickslock, 67                                     wait channel, 76
+time-share, 10, 21                                wakeup, 65, 76, 78
+top half, 53                                      walk, 36
+TRAMPOLINE, 45                                    walkaddr, 40
+trampoline, 27, 45                                write, 90, 97
+transaction, 85                                   writei, 91, 94, 95
+Translation Look-aside Buffer (TLB), 32, 36
+transmit complete, 54                             yield, 72, 73
+trap, 43
+                                                  ZOMBIE, 80
+
+                                             114
+
diff --git a/Report/22120384_22120387_22120412.pdf b/Report/22120384_22120387_22120412.pdf
new file mode 100644
index 0000000..8784887
--- /dev/null
+++ b/Report/22120384_22120387_22120412.pdf
@@ -0,0 +1,523 @@
+Trường Đại học Khoa học tự nhiên – Khoa Công nghệ thông tin.
+
+Đồ án số 01
+
+HỆ ĐIỀU HÀNH – Operating System
+
+ Richard Nguyen
+ Tháng 10, 2024.
+TRƯỜNG ĐẠI HỌC KHOA HỌC TỰ NHIÊN
+       KHOA CÔNG NGHỆ THÔNG TIN
+                        ‍
+
+             ĐỒ ÁN THỰC HÀNH SỐ 01
+
+Bộ môn: Hệ điều hành.
+
+Tên đề tài:
+
+             “XV6 and Unix Utilities”.
+
+Tên nhóm: 3T.
+
+Thành viên:
+
+               1. Trần Đức Trí – 22120387.
+               2. Vũ Hoàng Nhật Trường – 22120398.
+               3. Nguyễn Anh Tường – 22120412.
+                                                                        RICHARD NGUYEN
+                                                                          THÁNG 10, 2024.
+
+                          ĐỒ ÁN SỐ 01
+
+                          Thông tin chung:
+
+1. Bộ môn: Hệ điều hành.
+
+2. Giảng viên lý thuyết: Thầy Trần Trung Dũng.
+
+3. Giảng viên thực hành: Thầy Nguyễn Thanh Quân.
+
+4. Mã lớp: 22_4.
+
+5. Tên nhóm: 3T.
+
+6. Danh sách thành viên:
+
+a. Nguyễn Đình Trí – 22120384.
+
+b. Vũ Hoàng Nhật Trường – 22120398.
+
+c. Nguyễn Anh Tường – 22120412.
+
+7. Link github repository: “Click here to go to our github repository”
+                             MỤC LỤC
+
+ĐỒ ÁN THỰC HÀNH SỐ 01............................................................................................................. 2
+Thông tin chung:............................................................................................................................... 3
+Phần giới thiệu:................................................................................................................................. 5
+
+   Giới thiệu về các thành phần được sử dụng. .................................................................................... 6
+Yêu cầu 1:......................................................................................................................................... 7
+
+   I. Thành viên thực hiện: ........................................................................................................... 8
+   II. Mô tả thực hiện:.................................................................................................................... 8
+   III. Kết quả chương trình:......................................................................................................10
+Yêu cầu 2:........................................................................................................................................11
+   I. Thành viên thực hiện: ..........................................................................................................12
+   II. Mô tả thực hiện:...................................................................................................................12
+   III. Một số vấn đề đáng chú ý để hoàn thành yêu cầu 2 ( đã được giải quyết ): ..........................17
+   IV. Kết quả chương trình:......................................................................................................19
+Yêu cầu 3:........................................................................................................................................20
+   I. Thành viên thực hiện: ..........................................................................................................21
+   II. Mô tả thực hiện:...................................................................................................................21
+   III. Một số lưu ý.....................................................................................................................25
+   IV. Kết quả chương trình .......................................................................................................26
+Yêu cầu 4:........................................................................................................................................27
+   I. Thành viên thực hiện: ..........................................................................................................28
+   II. Các bước thực hiện và kết quả chương trình: ........................................................................28
+Phần giới thiệu:
+
+ GIỚI THIỆU CHUNG
+            Giới thiệu về các thành phần được sử dụng.
+
+1. Môi trường lập trình:
+           • Linux: Máy ảo ( Ubuntu 24.04.1 LTS ).
+           • WSL: Ubuntu - Phiên bản 24.04.5 LTS.
+           • Qemu: QEMU emulator version 7.2.0.
+
+2. Công cụ lập trình:
+           • Visual Studio Code.
+           • Riscv64-linux-gnu-gcc ( Debian 10.3.0-8) 10.3.0.
+           • Riscv64-unknown-elf-gcc ( GCC ) 10.1.0.
+           • Riscv64-unknown-linux-gnu-gcc ( GCC ) 10.1.0.
+
+3. Phiên bản XV6:
+           • XV6 - UNIX 6th Edition – 2024.
+                   o 1st Edition ( June 14, 2000 ).
+                   o ISBN: 1-57398-013-7
+                   o Link xv6 repo: Link here.
+
+4. Link github repository: “Click here to go to our github repository”
+Yêu cầu 1:
+
+  PINGPONG
+   I. Thành viên thực hiện:
+               • Nguyễn Anh Tường – 22120412.
+
+   II. Mô tả thực hiện:
+   Bước 1: Tạo file pingpong.c trong thư mục user của XV6.
+
+Bước 2: Vào môi trường VS code để lập trình cho file pingpong.c trên.
+Bước 3: Sử dụng các thư viện được cung cấp bởi hệ điều hành XV6.
+
+          #include "kernel/types.h"
+          #include "kernel/stat.h"
+          #include "user/user.h"
+
+Bước 4: Tạo tiến trình con bằng hàm fork(). Tạo 2 pipe bằng hàm pipe(<pipe>).
+
+          int proc = fork();
+          ...
+          int check_pipe1 = pipe(pipe_one); // Create a parent-to-child pipe.
+          int check_pipe2 = pipe(pipe_two); // Create a child-to-parent pipe.
+Bước 5: Kiểm tra việc tạo pipe và fork có thành công hay không?
+
+          if (check_pipe1 == -1 || check_pipe2 == -1) {
+                printf("Cannot create pipe! - Error: pipe() function failed!");
+                return 0;
+
+          }
+          if (proc < 0) {
+
+                printf("Cannot create a child process! - Error: fork() function
+          failed!");
+
+                return 0;
+          }
+
+Bước 6: Kiểm tra pid, nếu bằng 0 tức là ta đang ở tiến trình con.
+
+               • Vì tiến trình con đọc trước nên ta đóng đầu ghi của pipe_one.
+               • Đọc kí tự được gởi từ tiến trình cha.
+               • Sau khi nhận được ta in ra màn hình lệnh ping.
+               • Đóng đầu đọc của pipe_one ngay sau đó.
+               • Ta đóng đầu đọc của pipe_two để tiến hành ghi kí tự gởi đến cha.
+               • Sau khi ghi xong thì ta đóng đầu ghi của pipe_two lại.
+
+          else if (proc == 0) { // Child process.
+                       char mess;
+
+pipe.  close(pipe_one[1]); // Close the write end of parent-to-child
+       read(pipe_one[0], &mess, 1); // Read from parent-to-child pipe.
+
+       printf("%d: received ping\n", getpid());
+
+       close(pipe_one[0]); // Close the read end of parent-to-child pipe.
+
+       close(pipe_two[0]); // Close the read end of child-to-parent pipe.
+       write(pipe_two[1], &mess, 1); // Write to child-to-parent pipe.
+       close(pipe_two[1]); // Close the write end of child-to-parent
+
+pipe.
+}
+
+Bước 6.2: Kiểm tra nếu pid là một con số bất kì ( > 0 ) thì ta đang ở tiến trình cha.
+
+               • Ta tiến hành đóng đầu đọc của pipe_one.
+               • Tiến hành viết kí tự vào đầu ghi của pipe_one để gởi đến tiến trình
+
+                   con.
+               • Đóng đầu ghi của pipe_one sau khi ghi xong.
+               • Đóng đầu ghi của pipe_two.
+               • Mở đầu đọc của pipe_two để tiến hành nhận thông tin từ tiến trình
+
+                   con.
+               • Sau khi nhận được thì ta in ra màn hình lệnh “pong”.
+               • Đóng đầu đọc của pipe_two.
+               • Chờ cho tiến trình con kết thúc để kết thúc chương trình.
+
+                else { // Parent process
+                       char mess = 'T'; // Because all of the member's name starts by 'T'
+
+          letter
+                       close(pipe_one[0]); // Close the read end of parent-to-child pipe.
+                       write(pipe_one[1], &mess, 1); // Write to parent-to-child pipe.
+                       close(pipe_one[1]); // Close the write end of parent-to-child
+
+          pipe.
+                       close(pipe_two[1]); // Close the write end of child-to-parent
+
+          pipe.
+                       read(pipe_two[0], &mess, 1); // Read from child-to-parent pipe.
+                       printf("%d: received pong\n", getpid());
+                       close(pipe_two[0]); // Close the read end of child-to-parent pipe.
+                       wait(0); // Wait for child process to finish.
+                       }
+
+Bước 7: Hoàn thành chương trình.
+
+   III. Kết quả chương trình:
+Yêu cầu 2:
+
+    PRIMES
+   I. Thành viên thực hiện:
+
+             Nguyễn Anh Tường – 22120412.
+
+   II. Mô tả thực hiện:
+Bước 1: Tạo file primes.c trong thư mục user của XV6.
+
+Bước 2: Vào môi trường VS code để lập trình cho file primes.c trên.
+Bước 3: Sử dụng các thư viện được cung cấp bởi hệ điều hành XV6.
+
+          #include "kernel/types.h"
+          #include "kernel/stat.h"
+          #include "user/user.h"
+Bước 4: Tạo tiến trình con và pipe đầu tiên lần lượt bằng hàm fork() và pipe().
+Đồng thời kiểm tra xem có tại được không?
+
+      int fd[2];
+      int c_pipe = pipe(fd); //fd[0]: read | fd[1]: write
+      if(c_pipe == -1){
+
+             printf("Cannot create pipe! - Error: pipe() function failed!");
+             exit(0);
+      }
+
+      int pid = fork();
+
+      if(pid < 0){
+             printf("RaiseError: Cannot create process!");
+             exit(0);
+
+      }
+
+Bước 5: Kiểm tra tiến trình bằng PID, nếu là tiến trình con thì bằng 0, lớn hơn
+không là tiến trình cha.
+
+Nếu là tiến trình con.
+
+               • Tiến hành đóng đầu ghi của pipe lại.
+               • Ta chạy hàm primes – là một hàm đệ quy – để thực hiện tìm kiếm
+
+                   các số nguyên tố.
+
+Nếu là tiến trình cha.
+
+               • Tiến hành đóng đầu đọc của pipe lại.
+               • Chạy một vòng lặp FOR từ 2 đến 280, bước nhảy là 1.
+
+                       o Với mỗi vòng lặp ta tiến hành ghi số nguyên ghi số nguyên
+                           hiện tại vào trong pipe.
+
+               • Sau khi hết vòng lặp, ta tiến hành đóng pipe lại.
+               • Đợi tiến trình con kết thúc.
+else if (pid == 0){
+
+             //This is the child process
+             close(fd[1]);
+             primes(fd[0]);
+
+    }
+else{
+
+       //This is the parent process
+       close(fd[0]);
+
+       for( int i = 2; i <= 280; i++){
+             write(fd[1], &i, sizeof(i));
+
+       }
+
+       close(fd[1]);
+
+         wait(0);
+}
+
+Bước 6: Thực thi hàm Primes. Có tham số là một pipe và không có giá trị trả về.
+
+       Lưu ý: Ta thêm dòng code sau để tránh bị lỗi vòng lặp vô hạn trong Qemu.
+
+void primes(int cur_pipe)__attribute__((noreturn));
+
+void primes(int cur_pipe){
+...
+}
+
+Bước 7: Ta nhận dữ liệu được gởi từ cha thông qua pipe được truyền vào. Sau đó
+ta kiểm tra xem có nhận dữ liệu được không, nếu không thì ta đóng pipe và thoát
+hàm. Nếu dữ liệu nhận được ok thì ta tiến hành in ra màn hình.
+
+int val;
+int c_read = read(cur_pipe, &val, sizeof(val)); // c_read: check_read
+if(c_read == 0){
+
+    close(cur_pipe);
+    exit(0);
+}
+printf("prime: %d\n",val);
+Bước 8: Tiến hành tạo pipe, fork tiếp theo và kiếm tra. Nếu tạo không được thì ta
+in ra lỗi, đóng các pipe hiện có và thoát chương trình.
+
+int fd[2];
+if (pipe(fd) == -1) {
+
+    printf("Error: pipe creation failed!\n");
+    close(cur_pipe);
+    exit(1);
+}
+
+int pid = fork();
+if(pid < 0){
+
+    printf("Error: fork failed!\n");
+    close(fd[0]);
+    close(fd[1]);
+    close(cur_pipe);
+    exit(1);
+}
+
+Bước 9: Kiểm tra xem ta đang ở tiến trình nào?
+
+Nếu là tiến trình con: PID = 0.
+
+               • Ta đóng pipe ghi của pipe hiện tại.
+               • Tiến hành gọi đệ quy hàm primes với tham số là pipe đọc của pipe
+
+                   hiện tại
+
+else if(pid == 0){
+      close(fd[1]); // Close write pipe in child process.
+      close(curr_pipe); // Close curr_pipe in child process. Got the Buffer
+
+overflows if you don’t close.
+      primes(fd[0]);
+
+}
+Nếu là tiến trình cha: PID > 0.
+
+               • Tiến hành đọc pipe tham số cho đến khi gặp được một số nguyên
+
+                   tố thì sẽ tiến hành ghi số nguyên tố đó vào pipe tiếp theo và dừng
+
+                   vòng lặp lại.
+
+               • Nếu gặp lỗi thì in lỗi ra màn hình, ngược lại chạy tiếp.
+
+               • Đóng các pipe hiện tại và đợi cho tiến trình con kết thúc.
+
+               • Cuối cùng là thoát hàm.
+
+      else {
+             int check_prime;
+             close(fd[0]); // Close read pipe in parent process.
+             while((c_read = read(cur_pipe, &check_prime, sizeof(check_prime))) > 0){
+                   if(check_prime % val != 0){
+                          if (write(fd[1], &check_prime, sizeof(check_prime)) == -1) {
+                                 printf("Error writing to pipe\n");
+                                 break;
+                          }
+                   }
+             }
+             if(c_read == -1) {
+                   printf("Error reading from pipe\n");
+             }
+             close(fd[1]);
+             close(cur_pipe);
+             wait(0);
+             exit(0);
+
+      }
+III. Một số vấn đề đáng chú ý để hoàn thành yêu cầu 2 ( đã được giải
+       quyết ):
+
+Vì XV6 là một hệ điều hành khá đơn giản và nhẹ nhàng, nên việc tạo nhiều pipe
+và nhiều tiến trình, gọi đệ quy,… đã tốn không ít tài nguyên. Do đó ta phải
+chỉnh sửa lại một số thông số của hệ điều hành để chương trình có thể chạy một
+cách yêm xuôi.
+
+       a. Vấn đề ban đầu:
+
+➔ Chương trình không thể tạo thêm pipe do không đủ tài nguyên.
+           b. Hướng khắc phục số 1:
+Điều chỉnh thông số cho hệ điều hành để trành tình trạng Buffer Overflow này.
+Thông số ban đầu:
+
+Thông số sau khi tuỳ chỉnh:
+           c. Hướng khắc phục số 2:
+
+Điều chỉnh lại tính hợp lý của việc đóng, mở của các pipe.
+
+Đặc biệt là trong phần gọi đệ quy ở tiến trình con.
+
+else if(pid == 0){
+      close(fd[1]); // Close write pipe in child process.
+      close(curr_pipe); // Close curr_pipe in child process. Got the Buffer
+
+overflows if you don’t close.
+      primes(fd[0]);
+
+}
+
+    Ở đây phải đóng curr_pipe, nếu không sẽ bị buffer overflow.
+   IV. Kết quả chương trình:
+Yêu cầu 3:
+
+      FIND
+I. Thành viên thực hiện:
+       Vũ Hoàng Nhật Trường – 22120398
+
+II. Mô tả thực hiện:
+       Bước 1: Thêm file find.c vào thư mục user.
+
+       Bước 2: Thêm chương trình find.c vào UPROGS (trong Makefile) để
+       QEMU có thể thực hiện.
+    Bước 3: Lập trình thuật toán:
+▪ Ở đây ta xem xét cấu trúc 1 câu lệnh find trong QEMU như sau:
+
+    bao gồm chỉ thị thực hiện find, thư mục gốc đại diện cho dấu . và thư mục
+    cần tìm là b. Từ đó ta kết luận rằng số lượng argument cần thiết sẽ là 3+.
+
+ Nếu người dùng cố tình nhập không đủ 3 arguments như định dạng trên thì
+   chương trình sẽ báo lỗi và thoát.
+
+▪ Thuật toán trong find.c như sau:
+   Sau khi ta có đường dẫn của thư mục gốc ban đầu (argv[1]), ta sẽ cho đọc
+   nội dung thư mục đó bằng các lệnh fd(), fstat() và read(), kết quả trả về là 1
+   list chứa thông tin các thư mục con (tương tự như lệnh ls).
+▪ Sau đó ta sẽ tìm file giống với tên ta cần tìm (argv[2], argv[3],…). Nếu nó là
+   1 định dạng thư mục (st.type của nó là T_DIR), sau khi kiểm tra xong thì sẽ
+   đệ quy vào bên trong để tìm kiếm thêm, cuối cùng lặp đến khi nào không có
+   thư mục nào khác nữa. Lưu ý là khi chạy đến 2 thư mục . và .. thì ta sẽ
+   không đệ quy vì đây là thư mục dẫn tới thư mục cha và chính nó, nếu đệ quy
+   sẽ ra vòng lặp vô tận.
+▪ Các hàm hỗ trợ:
+
+   Hàm dùng để kiểm tra 2 chuỗi có trùng tên hay không.
+
+   Hàm dùng để tìm kiểm địa chỉ thư mục đích. Hàm này có 2 tham số: chuỗi
+   chứa địa chỉ cần tìm và chuỗi chứa tên thư mục hiện tại (để tiện cho việc đệ
+   quy).
+
+   Nếu là . và .. thì không vào vòng lặp đề quy.
+       Nếu đúng là thư mục cần tìm thì in ra màn hình.
+
+       Khi nội tại chính nó là thư mục thì sẽ đệ quy vào bên trong.
+III. Một số lưu ý
+
+   ▪ Khi ta truyền 1 địa chỉ ban đầu để tìm kiếm thư mục con, ta phải chắc chắn
+       rằng địa chỉ ấy phải có trong thư mục gốc. Nếu ta lỡ cd vào thư mục con rồi
+       tìm, chương trình sẽ báo lỗi.
+
+   ▪ Vì trong thư mục con ta không thể chạy các lệnh cơ bản của chương trình
+       được, do chương trình không biết các lệnh đó lấy ở đâu. Nếu ta muốn bắt
+       đầu địa chỉ là ở thư mục con, ta phải thêm đường dẫn từ gốc vào trong thì
+       chương trình mới chạy được bình thường.
+IV. Kết quả chương trình
+       Đối với lệnh find có 3 arguments (tìm file b).
+       Đối với lệnh find có 4 arguments (tìm file b và c).
+Yêu cầu 4:
+
+     XARGS
+   I. Thành viên thực hiện:
+Nguyễn Đình Trí, MSSV:22120384
+
+   II. Các bước thực hiện và kết quả chương trình:
+Bước 1: Tạo file xargs.c trong thư mục user.
+
+Bước 2: Thêm chương trình xargs.c vào UPROGS (trong Makefile) để QEMU có
+thể thực thi lệnh.
+Bước 3: Tiến hành lập trình file xargs.c trên VS Code
+       Bước 3.1: Các thư viện được sử dụng
+
+       #include "kernel/types.h": Bao gồm các định nghĩa về kiểu dữ liệu cơ bản.
+       #include "kernel/stat.h": Chứa các thông tin về trạng thái tệp.
+       #include "user/user.h": Cung cấp các chức năng liên quan đến hệ thống
+       người dùng như fork(), exec(), exit(), v.v.
+#include "kernel/param.h": Định nghĩa số lượng đối số tối đa
+(MAXARG).
+#include "kernel/fcntl.h": Chứa các định nghĩa về quyền truy cập tệp.
+Bước 3.2: Xây dựng hàm để đọc lệnh từ cmd
+
+Bước 3.3: Tạo mảng : char whitespace[] = " \t\r\n\v"; chứa các kí tự khoảng
+trắng như dấu cách, mũi tên tới, dấu tab, xuống hàng. Mảng này phục vụ cho
+việc tách các đối số trong input.
+
+Bước 3.4: Xây dựng hàm để tách chuỗi các đối số từ input thành các token.
+- Hàm này sử dụng các con trỏ ps, es, q, eq.
+- Con trỏ ps trỏ tới con trỏ, *ps chính là con trỏ tới vị trí đầu trong chuỗi đầu
+vào.
+- Biến s trỏ đến cùng vị trí trong chuỗi mà ps đang trỏ tới. Biến này sẽ được
+dùng để dịch chuyển qua từng ký tự trong chuỗi, giúp phân tích chuỗi từ vị
+trí hiện tại
+- Sau khi loại bỏ các ký tự trắng, q sẽ được gán bằng s, tức là q sẽ trỏ đến vị
+trí bắt đầu của từ mới (đối số mới) trong chuỗi
+
+- Vòng lặp này sẽ duyệt qua chuỗi cho đến khi nó gặp kí tự trắng tiếp theo, s
+sẽ trỏ đến cuối của từ/đối số hiện tại
+
+- eq sẽ được gán bằng s, tức là trỏ đến vị trí ngay sau từ/đối số đó trong
+chuỗi
+
+- Sau khi xử lý xong một đối số, con trỏ ps sẽ được cập nhật để trỏ đến vị trí
+tiếp theo trong chuỗi (vị trí sau khoảng trắng tiếp theo)
+Bước 3.5: Xây dựng hàm main
+- Ta tạo biến flag, biến này sẽ kiểm tra xem có điều kiện về số đối số truyền
+vào hay không. Lúc này ta chia ra trường hợp:
+
+       + Nếu flag = 1 (tức là có điều kiện): Ta sẽ thêm từng đối số vào mảng
+       xargs, nếu đủ số lượng đối số, thì ta tạo tiến trình con và thực thi, sau
+       đó tiếp tục thực hiện quá trình trên, cho đến khi số đối số còn lại nhỏ
+       hợn n, thì tạo tiến trình con bên ngoài và thực hiện.
+       + Nếu flag = 0 (tức là không có điều kiện): Ta sẽ thêm tất cả đối số
+       vào mảng xargs rồi sau đó tạo tiến trình con thực hiện 1 lần.
+Bước 4: Test kết quả
+- Yêu cầu 1:
+➔ Kết quả:
+- Yêu cầu 2:
+
+➔ Kết quả:
+- Yêu cầu 3:
+➔ Kết quả:
+
diff --git a/Report/Image for Report/Screenshot 2024-10-11 211101.png b/Report/Image for Report/Screenshot 2024-10-11 211101.png
new file mode 100644
index 0000000..5b86018
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 211101.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 212236.png b/Report/Image for Report/Screenshot 2024-10-11 212236.png
new file mode 100644
index 0000000..93181b3
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 212236.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213211.png b/Report/Image for Report/Screenshot 2024-10-11 213211.png
new file mode 100644
index 0000000..eb1a051
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213211.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213254.png b/Report/Image for Report/Screenshot 2024-10-11 213254.png
new file mode 100644
index 0000000..28333ac
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213254.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213432.png b/Report/Image for Report/Screenshot 2024-10-11 213432.png
new file mode 100644
index 0000000..a58d428
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213432.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213541.png b/Report/Image for Report/Screenshot 2024-10-11 213541.png
new file mode 100644
index 0000000..4b38444
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213541.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213651.png b/Report/Image for Report/Screenshot 2024-10-11 213651.png
new file mode 100644
index 0000000..c96c52e
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213651.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213715.png b/Report/Image for Report/Screenshot 2024-10-11 213715.png
new file mode 100644
index 0000000..dafa098
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213715.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 213731.png b/Report/Image for Report/Screenshot 2024-10-11 213731.png
new file mode 100644
index 0000000..8af1a77
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 213731.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 215058.png b/Report/Image for Report/Screenshot 2024-10-11 215058.png
new file mode 100644
index 0000000..0eb1566
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 215058.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 215458.png b/Report/Image for Report/Screenshot 2024-10-11 215458.png
new file mode 100644
index 0000000..80dc996
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 215458.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 220029.png b/Report/Image for Report/Screenshot 2024-10-11 220029.png
new file mode 100644
index 0000000..5ada0da
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 220029.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 220052.png b/Report/Image for Report/Screenshot 2024-10-11 220052.png
new file mode 100644
index 0000000..279343d
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 220052.png differ
diff --git a/Report/Image for Report/Screenshot 2024-10-11 220059.png b/Report/Image for Report/Screenshot 2024-10-11 220059.png
new file mode 100644
index 0000000..8d9e2c5
Binary files /dev/null and b/Report/Image for Report/Screenshot 2024-10-11 220059.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-03 22-36-27.png b/Report/Image for Report/Screenshot from 2024-10-03 22-36-27.png
new file mode 100644
index 0000000..4a30d71
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-03 22-36-27.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-03 22-40-48.png b/Report/Image for Report/Screenshot from 2024-10-03 22-40-48.png
new file mode 100644
index 0000000..69a644d
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-03 22-40-48.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-04 21-41-56.png b/Report/Image for Report/Screenshot from 2024-10-04 21-41-56.png
new file mode 100644
index 0000000..c0d699a
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-04 21-41-56.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-04 21-51-15.png b/Report/Image for Report/Screenshot from 2024-10-04 21-51-15.png
new file mode 100644
index 0000000..8111a8b
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-04 21-51-15.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-04 21-59-34.png b/Report/Image for Report/Screenshot from 2024-10-04 21-59-34.png
new file mode 100644
index 0000000..c135ca2
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-04 21-59-34.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-04 22-00-48.png b/Report/Image for Report/Screenshot from 2024-10-04 22-00-48.png
new file mode 100644
index 0000000..62fbea2
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-04 22-00-48.png differ
diff --git a/Report/Image for Report/Screenshot from 2024-10-04 22-02-34.png b/Report/Image for Report/Screenshot from 2024-10-04 22-02-34.png
new file mode 100644
index 0000000..254451e
Binary files /dev/null and b/Report/Image for Report/Screenshot from 2024-10-04 22-02-34.png differ
diff --git a/Report/Image for Report/image.png b/Report/Image for Report/image.png
new file mode 100644
index 0000000..31c92e1
Binary files /dev/null and b/Report/Image for Report/image.png differ
diff --git a/Report/Report [Rename Needed].docx b/Report/Report [Rename Needed].docx
new file mode 100644
index 0000000..9884f1f
--- /dev/null
+++ b/Report/Report [Rename Needed].docx	
@@ -0,0 +1,665 @@
+
+Trường Đại học Khoa học tự nhiên  -  Khoa Công nghệ thông tin.
+Đồ án số 01
+HỆ ĐIỀU HÀNH  -  Operating System
+Richard Nguyen
+Tháng 10, 2024.
+
+
+                 TRƯỜNG ĐẠI HỌC KHOA HỌC TỰ NHIÊN
+                         KHOA CÔNG NGHỆ THÔNG TIN
+                              📖👨‍💻📖
+                                       
+                        ĐỒ ÁN THỰC HÀNH SỐ 01
+   Bộ môn: Hệ điều hành.
+   Tên đề tài:  
+                          "XV6 and Unix Utilities".
+   Tên nhóm: 3T.
+   Thành viên:
+ Trần Đức Trí  -  22120387.
+ Vũ Hoàng Nhật Trường  -  22120398.
+ Nguyễn Anh Tường  -  22120412.
+Thông tin chung:
+ Bộ môn: Hệ điều hành.
+ Giảng viên lý thuyết: Thầy Trần Trung Dũng.
+ Giảng viên thực hành: Thầy Nguyễn Thanh Quân.
+ Mã lớp: 22_4.
+ Tên nhóm: 3T.
+ Danh sách thành viên:
+ Nguyễn Đình Trí  -  22120384.
+ Vũ Hoàng Nhật Trường  -  22120398.
+ Nguyễn Anh Tường  -  22120412.
+ Link github repository: "Click here to go to our github repository" [HYPERLINK: https://github.com/richardnguyen0715/OS-Proc-Lab01-XV6andUU.git]
+
+MỤC LỤC
+ĐỒ ÁN THỰC HÀNH SỐ 01	2
+Thông tin chung:	3
+Phần giới thiệu:	5
+Giới thiệu về các thành phần được sử dụng.	6
+Yêu cầu 1:	7
+I.	Thành viên thực hiện:	8
+II.	Mô tả thực hiện:	8
+III.	Kết quả chương trình:	10
+Yêu cầu 2:	11
+I.	Thành viên thực hiện:	12
+II.	Mô tả thực hiện:	12
+III.	Một số vấn đề đáng chú ý để hoàn thành yêu cầu 2 ( đã được giải quyết ):	17
+IV.	Kết quả chương trình:	19
+Yêu cầu 3:	20
+I.	Thành viên thực hiện:	21
+II.	Mô tả thực hiện:	21
+III.	Một số lưu ý	25
+IV.	Kết quả chương trình	26
+Yêu cầu 4:	27
+I.	Thành viên thực hiện:	28
+II.	Các bước thực hiện và kết quả chương trình:	28
+
+
+
+
+
+Phần giới thiệu:
+                             GIỚI THIỆU CHUNG
+
+
+Giới thiệu về các thành phần được sử dụng.
+
+ Môi trường lập trình: 
+ Linux: Máy ảo ( Ubuntu 24.04.1 LTS ).
+ WSL: Ubuntu - Phiên bản 24.04.5 LTS.
+ Qemu: QEMU emulator version 7.2.0.
+ Công cụ lập trình:
+ Visual Studio Code.
+ Riscv64-linux-gnu-gcc ( Debian 10.3.0-8) 10.3.0.
+ Riscv64-unknown-elf-gcc ( GCC ) 10.1.0.
+ Riscv64-unknown-linux-gnu-gcc ( GCC ) 10.1.0.
+ Phiên bản XV6:
+ XV6 - UNIX 6th Edition  -  2024.
+ 1st Edition ( June 14, 2000 ).
+ ISBN: 1-57398-013-7
+ Link xv6 repo: Link here. [HYPERLINK: git://g.csail.mit.edu/xv6-labs-2024] 
+ Link github repository: "Click here to go to our github repository" [HYPERLINK: https://github.com/richardnguyen0715/OS-Proc-Lab01-XV6andUU.git]
+
+Yêu cầu 1:
+                                  PINGPONG 
+
+
+
+ Thành viên thực hiện:
+ Nguyễn Anh Tường  -  22120412.
+ Mô tả thực hiện:
+  Bước 1: Tạo file pingpong.c trong thư mục user của XV6.
+     
+Bước 2: Vào môi trường VS code để lập trình cho file pingpong.c trên.
+Bước 3: Sử dụng các thư viện được cung cấp bởi hệ điều hành XV6.
+--------------------------------------------------------------------------------
+   #include "kernel/types.h"
+--------------------------------------------------------------------------------
+   #include "kernel/stat.h"
+--------------------------------------------------------------------------------
+   #include "user/user.h"
+  
+Bước 4: Tạo tiến trình con bằng hàm fork(). Tạo 2 pipe bằng hàm pipe(<pipe>).
+--------------------------------------------------------------------------------
+   int proc = fork();
+--------------------------------------------------------------------------------
+   ...
+--------------------------------------------------------------------------------
+   int check_pipe1 = pipe(pipe_one); // Create a parent-to-child pipe.
+--------------------------------------------------------------------------------
+   int check_pipe2 = pipe(pipe_two); // Create a child-to-parent pipe.
+
+  
+Bước 5: Kiểm tra việc tạo pipe và fork có thành công hay không?
+--------------------------------------------------------------------------------
+   if (check_pipe1 == -1 || check_pipe2 == -1) {
+--------------------------------------------------------------------------------
+       printf("Cannot create pipe! - Error: pipe() function failed!");
+--------------------------------------------------------------------------------
+       return 0;
+--------------------------------------------------------------------------------
+   }
+--------------------------------------------------------------------------------
+   if (proc < 0) {
+--------------------------------------------------------------------------------
+       printf("Cannot create a child process! - Error: fork() function failed!");
+--------------------------------------------------------------------------------
+       return 0;   
+--------------------------------------------------------------------------------
+   }
+
+Bước 6: Kiểm tra pid, nếu bằng 0 tức là ta đang ở tiến trình con.
+ Vì tiến trình con đọc trước nên ta đóng đầu ghi của pipe_one.
+ Đọc kí tự được gởi từ tiến trình cha.
+ Sau khi nhận được ta in ra màn hình lệnh ping.
+ Đóng đầu đọc của pipe_one ngay sau đó.
+ Ta đóng đầu đọc của pipe_two để tiến hành ghi kí tự gởi đến cha.
+ Sau khi ghi xong thì ta đóng đầu ghi của pipe_two lại.
+--------------------------------------------------------------------------------
+   else if (proc == 0) { // Child process.
+--------------------------------------------------------------------------------
+           char mess;
+--------------------------------------------------------------------------------
+   
+--------------------------------------------------------------------------------
+           close(pipe_one[1]); // Close the write end of parent-to-child pipe.
+--------------------------------------------------------------------------------
+           read(pipe_one[0], &mess, 1); // Read from parent-to-child pipe.
+--------------------------------------------------------------------------------
+   
+--------------------------------------------------------------------------------
+           printf("%d: received ping\n", getpid());
+--------------------------------------------------------------------------------
+           
+--------------------------------------------------------------------------------
+           close(pipe_one[0]); // Close the read end of parent-to-child pipe.
+--------------------------------------------------------------------------------
+   
+--------------------------------------------------------------------------------
+           close(pipe_two[0]); // Close the read end of child-to-parent pipe.
+--------------------------------------------------------------------------------
+           write(pipe_two[1], &mess, 1); // Write to child-to-parent pipe.
+--------------------------------------------------------------------------------
+           close(pipe_two[1]); // Close the write end of child-to-parent pipe.
+--------------------------------------------------------------------------------
+   }
+
+Bước 6.2: Kiểm tra nếu pid là một con số bất kì ( > 0 ) thì ta đang ở tiến trình cha. 
+ Ta tiến hành đóng đầu đọc của pipe_one.
+ Tiến hành viết kí tự vào đầu ghi của pipe_one để gởi đến tiến trình con.
+ Đóng đầu ghi của pipe_one sau khi ghi xong.
+ Đóng đầu ghi của pipe_two.
+ Mở đầu đọc của pipe_two để tiến hành nhận thông tin từ tiến trình con.
+ Sau khi nhận được thì ta in ra màn hình lệnh "pong".
+ Đóng đầu đọc của pipe_two.
+ Chờ cho tiến trình con kết thúc để kết thúc chương trình.
+--------------------------------------------------------------------------------
+       else { // Parent process
+--------------------------------------------------------------------------------
+           char mess = 'T'; // Because all of the member's name starts by 'T' letter 
+--------------------------------------------------------------------------------
+           close(pipe_one[0]); // Close the read end of parent-to-child pipe.
+--------------------------------------------------------------------------------
+           write(pipe_one[1], &mess, 1); // Write to parent-to-child pipe.
+--------------------------------------------------------------------------------
+           close(pipe_one[1]); // Close the write end of parent-to-child pipe.
+--------------------------------------------------------------------------------
+           close(pipe_two[1]); // Close the write end of child-to-parent pipe.
+--------------------------------------------------------------------------------
+           read(pipe_two[0], &mess, 1); // Read from child-to-parent pipe.
+--------------------------------------------------------------------------------
+           printf("%d: received pong\n", getpid());
+--------------------------------------------------------------------------------
+           close(pipe_two[0]); // Close the read end of child-to-parent pipe.
+--------------------------------------------------------------------------------
+           wait(0); // Wait for child process to finish.
+--------------------------------------------------------------------------------
+           }
+
+Bước 7: Hoàn thành chương trình.
+ Kết quả chương trình:
+                                       
+Yêu cầu 2:
+                                   PRIMES 
+
+
+ Thành viên thực hiện:
+     Nguyễn Anh Tường  -  22120412.
+ Mô tả thực hiện:
+Bước 1: Tạo file primes.c trong thư mục user của XV6.
+     
+Bước 2: Vào môi trường VS code để lập trình cho file primes.c trên.
+Bước 3: Sử dụng các thư viện được cung cấp bởi hệ điều hành XV6.
+--------------------------------------------------------------------------------
+   #include "kernel/types.h"
+--------------------------------------------------------------------------------
+   #include "kernel/stat.h"
+--------------------------------------------------------------------------------
+   #include "user/user.h"
+
+Bước 4: Tạo tiến trình con và pipe đầu tiên lần lượt bằng hàm fork() và pipe(). Đồng thời kiểm tra xem có tại được không?
+--------------------------------------------------------------------------------
+    int fd[2];
+--------------------------------------------------------------------------------
+    int c_pipe = pipe(fd); //fd[0]: read | fd[1]: write
+--------------------------------------------------------------------------------
+    if(c_pipe == -1){
+--------------------------------------------------------------------------------
+        printf("Cannot create pipe! - Error: pipe() function failed!");
+--------------------------------------------------------------------------------
+        exit(0);
+--------------------------------------------------------------------------------
+    }
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+    int pid = fork();
+--------------------------------------------------------------------------------
+    
+--------------------------------------------------------------------------------
+    if(pid < 0){
+--------------------------------------------------------------------------------
+        printf("RaiseError: Cannot create process!");
+--------------------------------------------------------------------------------
+        exit(0);
+--------------------------------------------------------------------------------
+    }
+
+Bước 5: Kiểm tra tiến trình bằng PID, nếu là tiến trình con thì bằng 0, lớn hơn không là tiến trình cha.
+Nếu là tiến trình con.
+ Tiến hành đóng đầu ghi của pipe lại.
+ Ta chạy hàm primes  -  là một hàm đệ quy  -  để thực hiện tìm kiếm các số nguyên tố.
+Nếu là tiến trình cha.
+ Tiến hành đóng đầu đọc của pipe lại.
+ Chạy một vòng lặp FOR từ 2 đến 280, bước nhảy là 1.
+ Với mỗi vòng lặp ta tiến hành ghi số nguyên ghi số nguyên hiện tại vào trong pipe.
+ Sau khi hết vòng lặp, ta tiến hành đóng pipe lại.
+ Đợi tiến trình con kết thúc.
+
+--------------------------------------------------------------------------------
+else if (pid == 0){
+--------------------------------------------------------------------------------
+        //This is the child process
+--------------------------------------------------------------------------------
+        close(fd[1]);
+--------------------------------------------------------------------------------
+        primes(fd[0]);
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+    }
+--------------------------------------------------------------------------------
+ else{
+--------------------------------------------------------------------------------
+        //This is the parent process    
+--------------------------------------------------------------------------------
+        close(fd[0]);
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+        for( int i = 2; i <= 280; i++){
+--------------------------------------------------------------------------------
+            write(fd[1], &i, sizeof(i));
+--------------------------------------------------------------------------------
+        }
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+        close(fd[1]);
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+        wait(0);
+--------------------------------------------------------------------------------
+  }
+
+Bước 6: Thực thi hàm Primes. Có tham số là một pipe và không có giá trị trả về.
+   Lưu ý: Ta thêm dòng code sau để tránh bị lỗi vòng lặp vô hạn trong Qemu.
+--------------------------------------------------------------------------------
+void primes(int cur_pipe)__attribute__((noreturn)); 
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+void primes(int cur_pipe){
+--------------------------------------------------------------------------------
+...
+--------------------------------------------------------------------------------
+}
+
+Bước 7: Ta nhận dữ liệu được gởi từ cha thông qua pipe được truyền vào. Sau đó ta kiểm tra xem có nhận dữ liệu được không, nếu không thì ta đóng pipe và thoát hàm. Nếu dữ liệu nhận được ok thì ta tiến hành in ra màn hình.
+--------------------------------------------------------------------------------
+int val;
+--------------------------------------------------------------------------------
+int c_read = read(cur_pipe, &val, sizeof(val)); // c_read: check_read
+--------------------------------------------------------------------------------
+if(c_read == 0){
+--------------------------------------------------------------------------------
+   close(cur_pipe);
+--------------------------------------------------------------------------------
+   exit(0);
+--------------------------------------------------------------------------------
+}
+--------------------------------------------------------------------------------
+printf("prime: %d\n",val);
+Bước 8: Tiến hành tạo pipe, fork tiếp theo và kiếm tra. Nếu tạo không được thì ta in ra lỗi, đóng các pipe hiện có và thoát chương trình.
+--------------------------------------------------------------------------------
+int fd[2];
+--------------------------------------------------------------------------------
+if (pipe(fd) == -1) {
+--------------------------------------------------------------------------------
+   printf("Error: pipe creation failed!\n");
+--------------------------------------------------------------------------------
+   close(cur_pipe);
+--------------------------------------------------------------------------------
+   exit(1);
+--------------------------------------------------------------------------------
+}
+--------------------------------------------------------------------------------
+
+--------------------------------------------------------------------------------
+int pid = fork(); 
+--------------------------------------------------------------------------------
+if(pid < 0){
+--------------------------------------------------------------------------------
+   printf("Error: fork failed!\n");
+--------------------------------------------------------------------------------
+   close(fd[0]);
+--------------------------------------------------------------------------------
+   close(fd[1]);
+--------------------------------------------------------------------------------
+   close(cur_pipe);
+--------------------------------------------------------------------------------
+   exit(1);
+--------------------------------------------------------------------------------
+}
+
+Bước 9: Kiểm tra xem ta đang ở tiến trình nào?
+Nếu là tiến trình con: PID = 0.
+ Ta đóng pipe ghi của pipe hiện tại.
+ Tiến hành gọi đệ quy hàm primes với tham số là pipe đọc của pipe hiện tại
+--------------------------------------------------------------------------------
+else if(pid == 0){
+--------------------------------------------------------------------------------
+    close(fd[1]); // Close write pipe in child process.
+--------------------------------------------------------------------------------
+    close(curr_pipe); // Close curr_pipe in child process. Got the Buffer overflows if you don't close.
+--------------------------------------------------------------------------------
+    primes(fd[0]);
+--------------------------------------------------------------------------------
+}
+
+
+Nếu là tiến trình cha: PID > 0.
+ Tiến hành đọc pipe tham số cho đến khi gặp được một số nguyên tố thì sẽ tiến hành ghi số nguyên tố đó vào pipe tiếp theo và dừng vòng lặp lại.
+ Nếu gặp lỗi thì in lỗi ra màn hình, ngược lại chạy tiếp.
+ Đóng các pipe hiện tại và đợi cho tiến trình con kết thúc. 
+ Cuối cùng là thoát hàm.
+--------------------------------------------------------------------------------
+    else {
+--------------------------------------------------------------------------------
+        int check_prime;
+--------------------------------------------------------------------------------
+        close(fd[0]); // Close read pipe in parent process.
+--------------------------------------------------------------------------------
+        while((c_read = read(cur_pipe, &check_prime, sizeof(check_prime))) > 0){
+--------------------------------------------------------------------------------
+            if(check_prime % val != 0){
+--------------------------------------------------------------------------------
+                if (write(fd[1], &check_prime, sizeof(check_prime)) == -1) {
+--------------------------------------------------------------------------------
+                    printf("Error writing to pipe\n");
+--------------------------------------------------------------------------------
+                    break;
+--------------------------------------------------------------------------------
+                }
+--------------------------------------------------------------------------------
+            }
+--------------------------------------------------------------------------------
+        }
+--------------------------------------------------------------------------------
+        if(c_read == -1) {
+--------------------------------------------------------------------------------
+            printf("Error reading from pipe\n");
+--------------------------------------------------------------------------------
+        }
+--------------------------------------------------------------------------------
+        close(fd[1]);
+--------------------------------------------------------------------------------
+        close(cur_pipe);
+--------------------------------------------------------------------------------
+        wait(0);
+--------------------------------------------------------------------------------
+        exit(0);
+--------------------------------------------------------------------------------
+    }
+
+ Một số vấn đề đáng chú ý để hoàn thành yêu cầu 2 ( đã được giải quyết ):
+  Vì XV6 là một hệ điều hành khá đơn giản và nhẹ nhàng, nên việc tạo nhiều pipe và nhiều tiến trình, gọi đệ quy,... đã tốn không ít tài nguyên. Do đó ta phải chỉnh sửa lại một số thông số của hệ điều hành để chương trình có thể chạy một cách yêm xuôi.
+ Vấn đề ban đầu:
+
+ Chương trình không thể tạo thêm pipe do không đủ tài nguyên.
+
+ Hướng khắc phục số 1:
+Điều chỉnh thông số cho hệ điều hành để trành tình trạng Buffer Overflow này.
+Thông số ban đầu:
+
+Thông số sau khi tuỳ chỉnh:
+
+ Hướng khắc phục số 2:
+Điều chỉnh lại tính hợp lý của việc đóng, mở của các pipe.
+Đặc biệt là trong phần gọi đệ quy ở tiến trình con.
+--------------------------------------------------------------------------------
+else if(pid == 0){
+--------------------------------------------------------------------------------
+    close(fd[1]); // Close write pipe in child process.
+--------------------------------------------------------------------------------
+    close(curr_pipe); // Close curr_pipe in child process. Got the Buffer overflows if you don't close.
+--------------------------------------------------------------------------------
+    primes(fd[0]);
+--------------------------------------------------------------------------------
+}
+ Ở đây phải đóng curr_pipe, nếu không sẽ bị buffer overflow.
+ Kết quả chương trình:
+
+
+
+Yêu cầu 3:
+                                    FIND 
+
+
+    Thành viên thực hiện:
+   Vũ Hoàng Nhật Trường  -  22120398
+   
+    Mô tả thực hiện:
+   Bước 1: Thêm file find.c vào thư mục user.
+   
+   
+   Bước 2: Thêm chương trình find.c vào UPROGS (trong Makefile) để QEMU có thể thực hiện.
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   
+   Bước 3: Lập trình thuật toán:
+    Ở đây ta xem xét cấu trúc 1 câu lệnh find trong QEMU như sau:
+                                         
+   bao gồm chỉ thị thực hiện find, thư mục gốc đại diện cho dấu . và thư mục cần tìm là b. Từ đó ta kết luận rằng số lượng argument cần thiết sẽ là 3+.
+   
+   
+   
+   
+
+
+ Nếu người dùng cố tình nhập không đủ 3 arguments như định dạng trên thì chương trình sẽ báo lỗi và thoát.
+
+    Thuật toán trong find.c như sau:
+Sau khi ta có đường dẫn của thư mục gốc ban đầu (argv[1]), ta sẽ cho đọc nội dung thư mục đó bằng các lệnh fd(), fstat() và read(), kết quả trả về là 1 list chứa thông tin các thư mục con (tương tự như lệnh ls).
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+    Sau đó ta sẽ tìm file giống với tên ta cần tìm (argv[2], argv[3],...). Nếu nó là 1 định dạng thư mục (st.type của nó là T_DIR), sau khi kiểm tra xong thì sẽ đệ quy vào bên trong để tìm kiếm thêm, cuối cùng lặp đến khi nào không có thư mục nào khác nữa. Lưu ý là khi chạy đến 2 thư mục . và .. thì ta sẽ không đệ quy vì đây là thư mục dẫn tới thư mục cha và chính nó, nếu đệ quy sẽ ra vòng lặp vô tận. 
+
+
+    Các hàm hỗ trợ:
+
+
+
+
+Hàm dùng để kiểm tra 2 chuỗi có trùng tên hay không.
+
+
+
+
+
+Hàm dùng để tìm kiểm địa chỉ thư mục đích. Hàm này có 2 tham số: chuỗi chứa địa chỉ cần tìm và chuỗi chứa tên thư mục hiện tại (để tiện cho việc đệ quy).
+
+
+
+
+
+
+
+Nếu là . và .. thì không vào vòng lặp đề quy.
+
+
+
+
+
+
+
+
+Nếu đúng là thư mục cần tìm thì in ra màn hình.
+
+
+
+
+
+
+
+Khi nội tại chính nó là thư mục thì sẽ đệ quy vào bên trong.
+
+
+    Một số lưu ý
+    Khi ta truyền 1 địa chỉ ban đầu để tìm kiếm thư mục con, ta phải chắc chắn rằng địa chỉ ấy phải có trong thư mục gốc. Nếu ta lỡ cd vào thư mục con rồi tìm, chương trình sẽ báo lỗi.
+     
+      
+
+
+
+
+    Vì trong thư mục con ta không thể chạy các lệnh cơ bản của chương trình được, do chương trình không biết các lệnh đó lấy ở đâu. Nếu ta muốn bắt đầu địa chỉ là ở thư mục con, ta phải thêm đường dẫn từ gốc vào trong thì chương trình mới chạy được bình thường.
+
+
+
+
+ Kết quả chương trình
+     
+     
+     
+     
+     
+     
+     
+     
+     
+     Đối với lệnh find có 3 arguments (tìm file b).
+     
+     
+     
+     
+     
+     
+
+     
+     Đối với lệnh find có 4 arguments (tìm file b và c).
+
+
+
+
+
+
+Yêu cầu 4:
+                                    XARGS 
+
+
+ Thành viên thực hiện:
+Nguyễn Đình Trí, MSSV:22120384
+
+ Các bước thực hiện và kết quả chương trình:
+Bước 1: Tạo file xargs.c trong thư mục user.
+
+Bước 2: Thêm chương trình xargs.c vào UPROGS (trong Makefile) để QEMU có thể thực thi lệnh.
+
+Bước 3: Tiến hành lập trình file xargs.c trên VS Code
+	Bước 3.1: Các thư viện được sử dụng
+		
+	#include "kernel/types.h": Bao gồm các định nghĩa về kiểu dữ liệu cơ bản.
+	#include "kernel/stat.h": Chứa các thông tin về trạng thái tệp.
+   #include "user/user.h": Cung cấp các chức năng liên quan đến hệ thống người dùng như fork(), exec(), exit(), v.v.             
+   #include "kernel/param.h": Định nghĩa số lượng đối số tối đa (MAXARG).
+   #include "kernel/fcntl.h": Chứa các định nghĩa về quyền truy cập tệp.
+	Bước 3.2: Xây dựng hàm để đọc lệnh từ cmd
+	
+   Bước 3.3: Tạo mảng : char whitespace[] = " \t\r\n\v"; chứa các kí tự khoảng trắng như dấu cách, mũi tên tới, dấu tab, xuống hàng. Mảng này phục vụ cho việc tách các đối số trong input.
+   
+   Bước 3.4: Xây dựng hàm  để tách chuỗi các đối số từ input thành các token.
+   - Hàm này sử dụng các con trỏ ps, es, q, eq.
+   - Con trỏ ps trỏ tới con trỏ, *ps chính là con trỏ tới vị trí đầu trong chuỗi đầu vào.
+   - Biến s trỏ đến cùng vị trí trong chuỗi mà ps đang trỏ tới. Biến này sẽ được dùng để dịch chuyển qua từng ký tự trong chuỗi, giúp phân tích chuỗi từ vị trí hiện tại
+   
+   
+   - Sau khi loại bỏ các ký tự trắng, q sẽ được gán bằng s, tức là q sẽ trỏ đến vị trí bắt đầu của từ mới (đối số mới) trong chuỗi
+   
+   - Vòng lặp này sẽ duyệt qua chuỗi cho đến khi nó gặp kí tự trắng tiếp theo, s sẽ trỏ đến cuối của từ/đối số hiện tại
+    
+   - eq sẽ được gán bằng s, tức là trỏ đến vị trí ngay sau từ/đối số đó trong chuỗi
+   
+   - Sau khi xử lý xong một đối số, con trỏ ps sẽ được cập nhật để trỏ đến vị trí tiếp theo trong chuỗi (vị trí sau khoảng trắng tiếp theo)
+   
+   
+
+
+
+	Bước 3.5: Xây dựng hàm main
+	- Ta tạo biến flag, biến này sẽ kiểm tra xem có điều kiện về số đối số truyền 	
+	vào hay không. Lúc này ta chia ra trường hợp:
+      + Nếu flag = 1 (tức là có điều kiện): Ta sẽ thêm từng đối số vào mảng xargs, nếu đủ số lượng đối số, thì ta tạo tiến trình con và thực thi, sau đó tiếp tục thực hiện quá trình trên, cho đến khi số đối số còn lại nhỏ hợn n, thì tạo tiến trình con bên ngoài và thực hiện.
+      + Nếu flag = 0 (tức là không có điều kiện): Ta sẽ thêm tất cả đối số vào mảng xargs rồi sau đó tạo tiến trình con thực hiện 1 lần.
+
+      
+	
+	
+
+Bước 4: Test kết quả
+- Yêu cầu 1:
+ Kết quả: 
+
+- Yêu cầu 2:
+
+ Kết quả:
+
+
+- Yêu cầu 3:
+
+ Kết quả:
+
+
+
diff --git a/Setup Instructions/Setup-lab.pdf b/Setup Instructions/Setup-lab.pdf
new file mode 100644
index 0000000..7b75e6a
--- /dev/null
+++ b/Setup Instructions/Setup-lab.pdf	
@@ -0,0 +1,196 @@
+Tools Used
+
+You'll need the RISC-V versions of QEMU 7.2+, GDB 8.3+, GCC, and Binutils.
+
+Ubuntu 24 (or later)
+
+ sudo apt-get update && apt-get install git build-essential gdb-multiarch
+ qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
+
+Installing on Windows
+
+Students running Windows are encouraged to either install Linux on their local machine or use
+WSL 2 (Windows Subsystem for Linux 2).
+
+We also encourage students to install the Windows Terminal tool in lieu of using
+Powershell/Command Prompt.
+
+To use WSL 2, first make sure you have the Windows Subsystem for Linux installed. Then add
+Ubuntu 24.04 from the Microsoft Store. Afterwards you should be able to launch Ubuntu and
+interact with the machine.
+
+IMPORTANT: Make sure that you are running version 2 of WSL. WSL 1 does not work with the
+labs. To check, run wsl -l -v in a Windows terminal to confirm that WSL 2 and the correct
+Ubuntu version are installed.
+
+To install all the software you need for this class, run:
+
+ $ sudo apt-get update && sudo apt-get upgrade
+ $ sudo apt-get install git build-essential gdb-multiarch qemu-system-misc
+ gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
+
+From Windows, you can access all of your WSL files under the "\\wsl$\" directory. For instance,
+the home directory for an Ubuntu 24.04 installation should be at
+"\\wsl$\Ubuntu-24.04\home\<username>\".
+
+Running a Linux VM
+
+If you're running an operating system on which it's not convenient to install the RISC-V tools,
+you may find it useful to run a Linux virtual machine (VM) and install the tools in the VM.
+Installing a Linux virtual machine is a two step process. First, get a virtualization platform; we
+suggest:
+
+    ● VirtualBox (free for Mac, Linux, Windows) — Download page
+Once the virtualization platform is installed, fetch a boot disk image for the Linux distribution of
+your choice.
+
+    ● Ubuntu Desktop is one option.
+    ● Ubuntu Server (No GUI)
+This will download a file named something like ubuntu-24.04.1-desktop-amd64.iso. Start up
+your virtualization platform and create a new (64-bit) virtual machine. Use the Ubuntu image as
+a boot disk; the procedure differs among VMs but shouldn't be too difficult.
+
+Installing on macOS
+
+First, install developer tools:
+
+ $ xcode-select --install
+
+Next, install Homebrew, a package manager for macOS:
+
+ $ /bin/bash -c "$(curl -fsSL
+ https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
+
+Next, install the RISC-V compiler toolchain:
+
+ $ brew tap riscv/riscv
+ $ brew install riscv-tools
+
+The brew formula may not link into /usr/local. You will need to update your shell's rc file (e.g.
+~/.bashrc) to add the appropriate directory to $PATH.
+
+ PATH=$PATH:/usr/local/opt/riscv-gnu-toolchain/bin
+
+Finally, install QEMU:
+
+ brew install qemu
+Testing your Installation
+
+To test your installation, you can double check your installation is correct by running the
+following:
+
+ $ qemu-system-riscv64 --version
+ QEMU emulator version 7.2.0
+
+And at least one RISC-V version of GCC:
+
+ $ riscv64-linux-gnu-gcc --version
+ riscv64-linux-gnu-gcc (Debian 10.3.0-8) 10.3.0
+ ...
+
+ $ riscv64-unknown-elf-gcc --version
+ riscv64-unknown-elf-gcc (GCC) 10.1.0
+ ...
+
+ $ riscv64-unknown-linux-gnu-gcc --version
+ riscv64-unknown-linux-gnu-gcc (GCC) 10.1.0
+ ...
+
+Boot xv6
+
+You should be able to compile and run xv6. You can try this by following the instructions:
+Fetch the git repository for the xv6 source for the lab:
+
+ $ git clone git://g.csail.mit.edu/xv6-labs-2024
+ Cloning into 'xv6-labs-2024'...
+ ...
+ $ cd xv6-labs-2024
+
+The files you will need for this and subsequent labs are distributed using the Git version control
+system. For each of the labs you will check out a version of xv6 tailored for that lab. To learn
+more about Git, take a look at the Git user's manual, or this CS-oriented overview of Git. Git
+allows you to keep track of the changes you make to the code. For example, if you are finished
+with one of the exercises, and want to checkpoint your progress, you can commit your changes
+by running:
+
+ $ git commit -am 'my solution for util lab exercise 1'
+ Created commit 60d2135: my solution for util lab exercise 1
+
+   1 files changed, 1 insertions(+), 0 deletions(-)
+ $
+
+You can view your changes with git diff, which displays changes since your last commit. git diff
+origin/util displays changes relative to the initial util code. origin/util is the name of the git branch
+for this lab.
+
+Build and run xv6:
+
+ $ make qemu
+ riscv64-unknown-elf-gcc -c -o kernel/entry.o kernel/entry.S
+ riscv64-unknown-elf-gcc -Wall -Werror -O -fno-omit-frame-pointer -ggdb
+ -DSOL_UTIL -MD -mcmodel=medany -ffreestanding -fno-common -nostdlib
+ -mno-relax -I. -fno-stack-protector -fno-pie -no-pie -c -o kernel/start.o
+ kernel/start.c
+ ...
+ riscv64-unknown-elf-ld -z max-page-size=4096 -N -e main -Ttext 0 -o
+ user/_zombie user/zombie.o user/ulib.o user/usys.o user/printf.o
+ user/umalloc.o
+ riscv64-unknown-elf-objdump -S user/_zombie > user/zombie.asm
+ riscv64-unknown-elf-objdump -t user/_zombie | sed '1,/SYMBOL TABLE/d; s/ .*
+ / /; /^$/d' > user/zombie.sym
+ mkfs/mkfs fs.img README user/xargstest.sh user/_cat user/_echo
+ user/_forktest user/_grep user/_init user/_kill user/_ln user/_ls
+ user/_mkdir user/_rm user/_sh user/_stressfs user/_usertests user/_grind
+ user/_wc user/_zombie
+ nmeta 46 (boot, super, log blocks 30 inode blocks 13, bitmap blocks 1)
+ blocks 954 total 1000
+ balloc: first 591 blocks have been allocated
+ balloc: write bitmap block at sector 45
+ qemu-system-riscv64 -machine virt -bios none -kernel kernel/kernel -m 128M
+ -smp 3 -nographic -drive file=fs.img,if=none,format=raw,id=x0 -device
+ virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
+
+ xv6 kernel is booting
+
+ hart 2 starting
+ hart 1 starting
+init: starting sh
+$
+
+If you type ls at the prompt, you should see output similar to the following:
+
+$ ls          1 1 1024
+.             1 1 1024
+..            2 2 2227
+README        2 3 93
+xargstest.sh  2 4 32864
+cat           2 5 31720
+echo          2 6 15856
+forktest      2 7 36240
+grep          2 8 32216
+init          2 9 31680
+kill          2 10 31504
+ln            2 11 34808
+ls            2 12 31736
+mkdir         2 13 31720
+rm            2 14 54168
+sh            2 15 32608
+stressfs      2 16 178800
+usertests     2 17 47528
+grind         2 18 33816
+wc            2 19 31080
+zombie        3 20 0
+console
+
+These are the files that mkfs includes in the initial file system; most are programs you can run.
+You just ran one of them: ls.
+
+xv6 has no ps command, but, if you type Ctrl-p, the kernel will print information about each
+process. If you try it now, you'll see two lines: one for init, and one for sh.
+
+To quit qemu type: Ctrl-a x (press Ctrl and a at the same time, followed by x).
+
+References:
+    1. https://pdos.csail.mit.edu/6.1810/2024/tools.html
+    2. https://www.qemu.org/docs/master/system/targets.html
+
diff --git a/Teamwork Policy/Git&Github Teamwork Policy.md b/Teamwork Policy/Git&Github Teamwork Policy.md
new file mode 100644
index 0000000..f941138
--- /dev/null
+++ b/Teamwork Policy/Git&Github Teamwork Policy.md	
@@ -0,0 +1,42 @@
+# Git&Github Team Work Policy
+**Author:** Richard Nguyen.
+## Commit Policy:
+### Syntax:
+```bash
+<name>_<action>_<files,folders>_<description (if needed)>
+```
+### Details:
+1. Name: Tên của bạn.
+2. Action: ADD (**ID: A**), UPDATE (**ID: U**), REMOVE (**ID: RM**), FIX (**ID: F**), RENAME (**ID: RN**), MERGE (**ID: M**), REVERT (**ID: RE**), PUSH (**ID: PS**), PULL (**ID: PL**), etc.
+   * **ADD:** Thêm các tệp mới vào kho lưu trữ.
+   * **UPDATE:** Cập nhật các tệp hiện có.
+   * **REMOVE:** Xóa các tệp khỏi kho lưu trữ.
+   * **RENAME:** Đổi tên các tệp.
+   * **MERGE:** Kết hợp các nhánh.
+
+        **Chú ý:** Với lệnh merge thì ghi với cú pháp **\<branch1>_\<branch2>**
+
+   * **REVERT:** Hoàn tác các thay đổi từ một commit trước đó.
+
+        ***Chú ý:** Phải ghi thêm thông tin là revert nhánh nào.*
+   
+   * **PUSH:** Đẩy các thay đổi lên Repo.
+
+     ***Chú ý:** Phải ghi thêm thông tin là push nhánh nào.*
+   
+   * **PULL:** Kéo các thay đổi từ Repo về.
+3. Notice:
+
+    * Đối với các lệnh có tương tác ( **2 tham số trở lên** ) - ví dụ như MERGE,REVERT - thì cần commit luôn cả 2 tham số đó, cách nhau bởi **dấu gạch dưới.**
+
+    * Khi công việc của bạn có nhiều phần thì ta sẽ **ghi theo ID** của các Action - mục 2. Các kí tự phân nhau bởi **dấu phẩy**.
+
+4. Files | Folders: Là file thì ghi tiền tố Fi , là folder thì ghi tiền tố Fo. 
+
+    **Ví dụ:** Fi-ReadMe.md , Fo-Requirements.
+
+6. Description: Đây là phần mô tả ngắn gọn cho commit của mình. Viết ngắn thôi nhé! Nếu **không cần ghi** thì mình ghi **None**.
+
+### Example:
+1. **Tuong_ADD_Fi-README.md_Init-File-Readme:** Tường đã thêm một file readme.md vào trong repo.
+2. **Tuong_A,U_Fi-README.md, Fo-Requirements_None:** Tường đã làm các hành động là thêm (**A**) và chỉnh sửa (**U**), nơi tác động là File README.md, Folder Requirements, Discription là None ( không có gì cả ). **(Không cần quan tâm đến action nào cho file nào ).**
\ No newline at end of file
diff --git a/xv6-labs-2024/.dir-locals.el b/xv6-labs-2024/.dir-locals.el
new file mode 100644
index 0000000..da72247
--- /dev/null
+++ b/xv6-labs-2024/.dir-locals.el
@@ -0,0 +1,4 @@
+((c-mode
+  (indent-tabs-mode . nil)
+  (c-file-style . "bsd")
+  (c-basic-offset . 2)))
diff --git a/xv6-labs-2024/.editorconfig b/xv6-labs-2024/.editorconfig
new file mode 100644
index 0000000..c47611e
--- /dev/null
+++ b/xv6-labs-2024/.editorconfig
@@ -0,0 +1,22 @@
+; https://editorconfig.org
+
+root = true
+
+[*]
+end_of_line = lf
+insert_final_newline = true
+indent_style = space
+indent_size = 4
+
+[*.{c,h}]
+indent_size = 2
+
+[*.S]
+indent_size = 8
+
+[*.ld]
+indent_size = 2
+
+[Makefile]
+indent_style = tab
+indent_size = 8
diff --git a/xv6-labs-2024/.gdbinit.tmpl-riscv b/xv6-labs-2024/.gdbinit.tmpl-riscv
new file mode 100644
index 0000000..a2bfde3
--- /dev/null
+++ b/xv6-labs-2024/.gdbinit.tmpl-riscv
@@ -0,0 +1,6 @@
+set confirm off
+set architecture riscv:rv64
+target remote 127.0.0.1:1234
+symbol-file kernel/kernel
+set disassemble-next-line auto
+set riscv use-compressed-breakpoints yes
diff --git a/xv6-labs-2024/Makefile b/xv6-labs-2024/Makefile
new file mode 100644
index 0000000..f2576f8
--- /dev/null
+++ b/xv6-labs-2024/Makefile
@@ -0,0 +1,379 @@
+
+# To compile and run with a lab solution, set the lab name in conf/lab.mk
+# (e.g., LAB=util).  Run make grade to test solution with the lab's
+# grade script (e.g., grade-lab-util).
+
+-include conf/lab.mk
+
+K=kernel
+U=user
+
+OBJS = \
+  $K/entry.o \
+  $K/kalloc.o \
+  $K/string.o \
+  $K/main.o \
+  $K/vm.o \
+  $K/proc.o \
+  $K/swtch.o \
+  $K/trampoline.o \
+  $K/trap.o \
+  $K/syscall.o \
+  $K/sysproc.o \
+  $K/bio.o \
+  $K/fs.o \
+  $K/log.o \
+  $K/sleeplock.o \
+  $K/file.o \
+  $K/pipe.o \
+  $K/exec.o \
+  $K/sysfile.o \
+  $K/kernelvec.o \
+  $K/plic.o \
+  $K/virtio_disk.o
+
+OBJS_KCSAN = \
+  $K/start.o \
+  $K/console.o \
+  $K/printf.o \
+  $K/uart.o \
+  $K/spinlock.o
+
+ifdef KCSAN
+OBJS_KCSAN += \
+	$K/kcsan.o
+endif
+
+ifeq ($(LAB),lock)
+OBJS += \
+	$K/stats.o\
+	$K/sprintf.o
+endif
+
+
+ifeq ($(LAB),net)
+OBJS += \
+	$K/e1000.o \
+	$K/net.o \
+	$K/pci.o
+endif
+
+
+# riscv64-unknown-elf- or riscv64-linux-gnu-
+# perhaps in /opt/riscv/bin
+#TOOLPREFIX = 
+
+# Try to infer the correct TOOLPREFIX if not set
+ifndef TOOLPREFIX
+TOOLPREFIX := $(shell if riscv64-unknown-elf-objdump -i 2>&1 | grep 'elf64-big' >/dev/null 2>&1; \
+	then echo 'riscv64-unknown-elf-'; \
+	elif riscv64-linux-gnu-objdump -i 2>&1 | grep 'elf64-big' >/dev/null 2>&1; \
+	then echo 'riscv64-linux-gnu-'; \
+	elif riscv64-unknown-linux-gnu-objdump -i 2>&1 | grep 'elf64-big' >/dev/null 2>&1; \
+	then echo 'riscv64-unknown-linux-gnu-'; \
+	else echo "***" 1>&2; \
+	echo "*** Error: Couldn't find a riscv64 version of GCC/binutils." 1>&2; \
+	echo "*** To turn off this error, run 'gmake TOOLPREFIX= ...'." 1>&2; \
+	echo "***" 1>&2; exit 1; fi)
+endif
+
+QEMU = qemu-system-riscv64
+
+CC = $(TOOLPREFIX)gcc
+AS = $(TOOLPREFIX)gas
+LD = $(TOOLPREFIX)ld
+OBJCOPY = $(TOOLPREFIX)objcopy
+OBJDUMP = $(TOOLPREFIX)objdump
+
+CFLAGS = -Wall -Werror -O -fno-omit-frame-pointer -ggdb -gdwarf-2
+
+ifdef LAB
+LABUPPER = $(shell echo $(LAB) | tr a-z A-Z)
+XCFLAGS += -DSOL_$(LABUPPER) -DLAB_$(LABUPPER)
+endif
+
+CFLAGS += $(XCFLAGS)
+CFLAGS += -MD
+CFLAGS += -mcmodel=medany
+# CFLAGS += -ffreestanding -fno-common -nostdlib -mno-relax
+CFLAGS += -fno-common -nostdlib
+CFLAGS += -fno-builtin-strncpy -fno-builtin-strncmp -fno-builtin-strlen -fno-builtin-memset
+CFLAGS += -fno-builtin-memmove -fno-builtin-memcmp -fno-builtin-log -fno-builtin-bzero
+CFLAGS += -fno-builtin-strchr -fno-builtin-exit -fno-builtin-malloc -fno-builtin-putc
+CFLAGS += -fno-builtin-free
+CFLAGS += -fno-builtin-memcpy -Wno-main
+CFLAGS += -fno-builtin-printf -fno-builtin-fprintf -fno-builtin-vprintf
+CFLAGS += -I.
+CFLAGS += $(shell $(CC) -fno-stack-protector -E -x c /dev/null >/dev/null 2>&1 && echo -fno-stack-protector)
+
+ifeq ($(LAB),net)
+CFLAGS += -DNET_TESTS_PORT=$(SERVERPORT)
+endif
+
+ifdef KCSAN
+CFLAGS += -DKCSAN
+KCSANFLAG = -fsanitize=thread -fno-inline
+endif
+
+# Disable PIE when possible (for Ubuntu 16.10 toolchain)
+ifneq ($(shell $(CC) -dumpspecs 2>/dev/null | grep -e '[^f]no-pie'),)
+CFLAGS += -fno-pie -no-pie
+endif
+ifneq ($(shell $(CC) -dumpspecs 2>/dev/null | grep -e '[^f]nopie'),)
+CFLAGS += -fno-pie -nopie
+endif
+
+LDFLAGS = -z max-page-size=4096
+
+$K/kernel: $(OBJS) $(OBJS_KCSAN) $K/kernel.ld $U/initcode
+	$(LD) $(LDFLAGS) -T $K/kernel.ld -o $K/kernel $(OBJS) $(OBJS_KCSAN)
+	$(OBJDUMP) -S $K/kernel > $K/kernel.asm
+	$(OBJDUMP) -t $K/kernel | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > $K/kernel.sym
+
+$(OBJS): EXTRAFLAG := $(KCSANFLAG)
+
+$K/%.o: $K/%.c
+	$(CC) $(CFLAGS) $(EXTRAFLAG) -c -o $@ $<
+
+
+$U/initcode: $U/initcode.S
+	$(CC) $(CFLAGS) -march=rv64g -nostdinc -I. -Ikernel -c $U/initcode.S -o $U/initcode.o
+	$(LD) $(LDFLAGS) -N -e start -Ttext 0 -o $U/initcode.out $U/initcode.o
+	$(OBJCOPY) -S -O binary $U/initcode.out $U/initcode
+	$(OBJDUMP) -S $U/initcode.o > $U/initcode.asm
+
+tags: $(OBJS) _init
+	etags *.S *.c
+
+ULIB = $U/ulib.o $U/usys.o $U/printf.o $U/umalloc.o
+
+ifeq ($(LAB),lock)
+ULIB += $U/statistics.o
+endif
+
+_%: %.o $(ULIB)
+	$(LD) $(LDFLAGS) -T $U/user.ld -o $@ $^
+	$(OBJDUMP) -S $@ > $*.asm
+	$(OBJDUMP) -t $@ | sed '1,/SYMBOL TABLE/d; s/ .* / /; /^$$/d' > $*.sym
+
+$U/usys.S : $U/usys.pl
+	perl $U/usys.pl > $U/usys.S
+
+$U/usys.o : $U/usys.S
+	$(CC) $(CFLAGS) -c -o $U/usys.o $U/usys.S
+
+$U/_forktest: $U/forktest.o $(ULIB)
+	# forktest has less library code linked in - needs to be small
+	# in order to be able to max out the proc table.
+	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $U/_forktest $U/forktest.o $U/ulib.o $U/usys.o
+	$(OBJDUMP) -S $U/_forktest > $U/forktest.asm
+
+mkfs/mkfs: mkfs/mkfs.c $K/fs.h $K/param.h
+	gcc $(XCFLAGS) -Werror -Wall -I. -o mkfs/mkfs mkfs/mkfs.c
+
+# Prevent deletion of intermediate files, e.g. cat.o, after first build, so
+# that disk image changes after first build are persistent until clean.  More
+# details:
+# http://www.gnu.org/software/make/manual/html_node/Chained-Rules.html
+.PRECIOUS: %.o
+
+UPROGS=\
+	$U/_cat\
+	$U/_echo\
+	$U/_forktest\
+	$U/_grep\
+	$U/_init\
+	$U/_kill\
+	$U/_ln\
+	$U/_ls\
+	$U/_mkdir\
+	$U/_rm\
+	$U/_sh\
+	$U/_stressfs\
+	$U/_usertests\
+	$U/_grind\
+	$U/_wc\
+	$U/_zombie\
+	$U/_pingpong\
+	$U/_primes\
+	$U/_find\
+	$U/_xargs\
+
+
+ifeq ($(LAB),syscall)
+UPROGS += \
+	$U/_attack\
+	$U/_attacktest\
+	$U/_secret
+endif
+
+ifeq ($(LAB),lock)
+UPROGS += \
+	$U/_stats
+endif
+
+ifeq ($(LAB),traps)
+UPROGS += \
+	$U/_call\
+	$U/_bttest
+endif
+
+ifeq ($(LAB),lazy)
+UPROGS += \
+	$U/_lazytests
+endif
+
+ifeq ($(LAB),cow)
+UPROGS += \
+	$U/_cowtest
+endif
+
+ifeq ($(LAB),thread)
+UPROGS += \
+	$U/_uthread
+
+$U/uthread_switch.o : $U/uthread_switch.S
+	$(CC) $(CFLAGS) -c -o $U/uthread_switch.o $U/uthread_switch.S
+
+$U/_uthread: $U/uthread.o $U/uthread_switch.o $(ULIB)
+	$(LD) $(LDFLAGS) -N -e main -Ttext 0 -o $U/_uthread $U/uthread.o $U/uthread_switch.o $(ULIB)
+	$(OBJDUMP) -S $U/_uthread > $U/uthread.asm
+
+ph: notxv6/ph.c
+	gcc -o ph -g -O2 $(XCFLAGS) notxv6/ph.c -pthread
+
+barrier: notxv6/barrier.c
+	gcc -o barrier -g -O2 $(XCFLAGS) notxv6/barrier.c -pthread
+endif
+
+ifeq ($(LAB),pgtbl)
+UPROGS += \
+	$U/_pgtbltest
+endif
+
+ifeq ($(LAB),lock)
+UPROGS += \
+	$U/_kalloctest\
+	$U/_bcachetest
+endif
+
+ifeq ($(LAB),fs)
+UPROGS += \
+	$U/_bigfile
+endif
+
+
+
+ifeq ($(LAB),net)
+UPROGS += \
+	$U/_nettest
+endif
+
+UEXTRA=
+ifeq ($(LAB),util)
+	UEXTRA += user/xargstest.sh
+endif
+
+
+fs.img: mkfs/mkfs README $(UEXTRA) $(UPROGS)
+	mkfs/mkfs fs.img README $(UEXTRA) $(UPROGS)
+
+-include kernel/*.d user/*.d
+
+clean:
+	rm -rf *.tex *.dvi *.idx *.aux *.log *.ind *.ilg *.dSYM *.zip *.pcap \
+	*/*.o */*.d */*.asm */*.sym \
+	$U/initcode $U/initcode.out $U/usys.S $U/_* \
+	$K/kernel \
+	mkfs/mkfs fs.img .gdbinit __pycache__ xv6.out* \
+	ph barrier
+
+# try to generate a unique GDB port
+GDBPORT = $(shell expr `id -u` % 5000 + 25000)
+# QEMU's gdb stub command line changed in 0.11
+QEMUGDB = $(shell if $(QEMU) -help | grep -q '^-gdb'; \
+	then echo "-gdb tcp::$(GDBPORT)"; \
+	else echo "-s -p $(GDBPORT)"; fi)
+ifndef CPUS
+CPUS := 3
+endif
+ifeq ($(LAB),fs)
+CPUS := 1
+endif
+
+FWDPORT1 = $(shell expr `id -u` % 5000 + 25999)
+FWDPORT2 = $(shell expr `id -u` % 5000 + 30999)
+
+QEMUOPTS = -machine virt -bios none -kernel $K/kernel -m 128M -smp $(CPUS) -nographic
+QEMUOPTS += -global virtio-mmio.force-legacy=false
+QEMUOPTS += -drive file=fs.img,if=none,format=raw,id=x0
+QEMUOPTS += -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
+
+ifeq ($(LAB),net)
+QEMUOPTS += -netdev user,id=net0,hostfwd=udp::$(FWDPORT1)-:2000,hostfwd=udp::$(FWDPORT2)-:2001 -object filter-dump,id=net0,netdev=net0,file=packets.pcap
+QEMUOPTS += -device e1000,netdev=net0,bus=pcie.0
+endif
+
+qemu: $K/kernel fs.img
+	$(QEMU) $(QEMUOPTS)
+
+.gdbinit: .gdbinit.tmpl-riscv
+	sed "s/:1234/:$(GDBPORT)/" < $^ > $@
+
+qemu-gdb: $K/kernel .gdbinit fs.img
+	@echo "*** Now run 'gdb' in another window." 1>&2
+	$(QEMU) $(QEMUOPTS) -S $(QEMUGDB)
+
+ifeq ($(LAB),net)
+# try to generate a unique port for the echo server
+SERVERPORT = $(shell expr `id -u` % 5000 + 25099)
+
+endif
+
+##
+##  FOR testing lab grading script
+##
+
+ifneq ($(V),@)
+GRADEFLAGS += -v
+endif
+
+print-gdbport:
+	@echo $(GDBPORT)
+
+grade:
+	@echo $(MAKE) clean
+	@$(MAKE) clean || \
+          (echo "'make clean' failed.  HINT: Do you have another running instance of xv6?" && exit 1)
+	./grade-lab-$(LAB) $(GRADEFLAGS)
+
+##
+## FOR submissions
+##
+
+submit-check:
+	@if ! test -d .git; then \
+		echo No .git directory, is this a git repository?; \
+		false; \
+	fi
+	@if test "$$(git symbolic-ref HEAD)" != refs/heads/$(LAB); then \
+		git branch; \
+		read -p "You are not on the $(LAB) branch.  Hand-in the current branch? [y/N] " r; \
+		test "$$r" = y; \
+	fi
+	@if ! git diff-files --quiet || ! git diff-index --quiet --cached HEAD; then \
+		git status -s; \
+		echo; \
+		echo "You have uncomitted changes.  Please commit or stash them."; \
+		false; \
+	fi
+	@if test -n "`git status -s`"; then \
+		git status -s; \
+		read -p "Untracked files will not be handed in.  Continue? [y/N] " r; \
+		test "$$r" = y; \
+	fi
+
+zipball: clean submit-check
+	git archive --verbose --format zip --output lab.zip HEAD
+
+.PHONY: zipball clean grade submit-check
diff --git a/xv6-labs-2024/README b/xv6-labs-2024/README
new file mode 100644
index 0000000..5a5d695
--- /dev/null
+++ b/xv6-labs-2024/README
@@ -0,0 +1,49 @@
+xv6 is a re-implementation of Dennis Ritchie's and Ken Thompson's Unix
+Version 6 (v6).  xv6 loosely follows the structure and style of v6,
+but is implemented for a modern RISC-V multiprocessor using ANSI C.
+
+ACKNOWLEDGMENTS
+
+xv6 is inspired by John Lions's Commentary on UNIX 6th Edition (Peer
+to Peer Communications; ISBN: 1-57398-013-7; 1st edition (June 14,
+2000)).  See also https://pdos.csail.mit.edu/6.1810/, which provides
+pointers to on-line resources for v6.
+
+The following people have made contributions: Russ Cox (context switching,
+locking), Cliff Frey (MP), Xiao Yu (MP), Nickolai Zeldovich, and Austin
+Clements.
+
+We are also grateful for the bug reports and patches contributed by
+Takahiro Aoyagi, Marcelo Arroyo, Silas Boyd-Wickizer, Anton Burtsev,
+carlclone, Ian Chen, Dan Cross, Cody Cutler, Mike CAT, Tej Chajed,
+Asami Doi,Wenyang Duan, eyalz800, Nelson Elhage, Saar Ettinger, Alice
+Ferrazzi, Nathaniel Filardo, flespark, Peter Froehlich, Yakir Goaron,
+Shivam Handa, Matt Harvey, Bryan Henry, jaichenhengjie, Jim Huang,
+Matúš Jókay, John Jolly, Alexander Kapshuk, Anders Kaseorg, kehao95,
+Wolfgang Keller, Jungwoo Kim, Jonathan Kimmitt, Eddie Kohler, Vadim
+Kolontsov, Austin Liew, l0stman, Pavan Maddamsetti, Imbar Marinescu,
+Yandong Mao, Matan Shabtay, Hitoshi Mitake, Carmi Merimovich, Mark
+Morrissey, mtasm, Joel Nider, Hayato Ohhashi, OptimisticSide,
+phosphagos, Harry Porter, Greg Price, RayAndrew, Jude Rich, segfault,
+Ayan Shafqat, Eldar Sehayek, Yongming Shen, Fumiya Shigemitsu, snoire,
+Taojie, Cam Tenny, tyfkda, Warren Toomey, Stephen Tu, Alissa Tung,
+Rafael Ubal, Amane Uehara, Pablo Ventura, Xi Wang, WaheedHafez,
+Keiichi Watanabe, Lucas Wolf, Nicolas Wolovick, wxdao, Grant Wu, x653,
+Jindong Zhang, Icenowy Zheng, ZhUyU1997, and Zou Chang Wei.
+
+The code in the files that constitute xv6 is
+Copyright 2006-2024 Frans Kaashoek, Robert Morris, and Russ Cox.
+
+ERROR REPORTS
+
+Please send errors and suggestions to Frans Kaashoek and Robert Morris
+(kaashoek,rtm@mit.edu).  The main purpose of xv6 is as a teaching
+operating system for MIT's 6.1810, so we are more interested in
+simplifications and clarifications than new features.
+
+BUILDING AND RUNNING XV6
+
+You will need a RISC-V "newlib" tool chain from
+https://github.com/riscv/riscv-gnu-toolchain, and qemu compiled for
+riscv64-softmmu.  Once they are installed, and in your shell
+search path, you can run "make qemu".
diff --git a/xv6-labs-2024/conf/lab.mk b/xv6-labs-2024/conf/lab.mk
new file mode 100644
index 0000000..05e8b8d
--- /dev/null
+++ b/xv6-labs-2024/conf/lab.mk
@@ -0,0 +1 @@
+LAB=util
diff --git a/xv6-labs-2024/fs.img b/xv6-labs-2024/fs.img
new file mode 100644
index 0000000..49a14d3
Binary files /dev/null and b/xv6-labs-2024/fs.img differ
diff --git a/xv6-labs-2024/grade-lab-util b/xv6-labs-2024/grade-lab-util
new file mode 100644
index 0000000..9ba6e37
--- /dev/null
+++ b/xv6-labs-2024/grade-lab-util
@@ -0,0 +1,105 @@
+#!/usr/bin/env python3
+
+import re
+from gradelib import *
+
+r = Runner(save("xv6.out"))
+
+@test(5, "sleep, no arguments")
+def test_sleep_no_args():
+    r.run_qemu(shell_script([
+        'sleep'
+    ]))
+    r.match(no=["exec .* failed", "$ sleep\n$"])
+
+@test(5, "sleep, returns")
+def test_sleep_no_args():
+    r.run_qemu(shell_script([
+        'sleep',
+        'echo OK'
+    ]))
+    r.match('^OK$', no=["exec .* failed", "$ sleep\n$"])
+
+@test(10, "sleep, makes syscall")
+def test_sleep():
+    r.run_qemu(shell_script([
+        'sleep 10',
+        'echo FAIL'
+    ]), stop_breakpoint('sys_sleep'))
+    r.match('\\$ sleep 10', no=['FAIL'])
+
+@test(20, "pingpong")
+def test_pingpong():
+    r.run_qemu(shell_script([
+        'pingpong', 'echo OK'
+    ]))
+    r.match('^\\d+: received ping$', '^\\d+: received pong$', '^OK$')
+
+@test(20, "primes")
+def test_primes():
+    r.run_qemu(shell_script([
+        'primes', 'echo OK'
+    ]))
+    args = ['prime %d' % i for i in [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269]]
+    args.append('^OK$')
+    r.match(*args)
+
+@test(10, "find, in current directory")
+def test_find_curdir():
+    fn = random_str()
+    r.run_qemu(shell_script([
+        'echo > %s' % fn,
+        'find . %s' % fn
+    ]))
+    r.match('./%s' % fn)
+    r.match(no=["./README", "README"])
+
+@test(10, "find, in sub-directory")
+def test_find_curdir():
+    dd = random_str()
+    fn = random_str()
+    r.run_qemu(shell_script([
+        'echo > %s' % fn,
+        'mkdir %s' % dd,
+        'echo > %s/%s' % (dd, fn),
+        'find %s %s' % (dd, fn)
+    ]))
+    r.match('%s/%s' % (dd, fn))
+    r.match(no=['./%s' % fn])
+
+@test(10, "find, recursive")
+def test_find_recursive():
+    needle = random_str()
+    dirs = [random_str() for _ in range(3)]
+    r.run_qemu(shell_script([
+        'mkdir %s' % dirs[0],
+        'echo > %s/%s' % (dirs[0], needle),
+        'mkdir %s/%s' % (dirs[0], dirs[1]),
+        'echo > %s/%s/%s' % (dirs[0], dirs[1], needle),
+        'mkdir %s' % dirs[2],
+        'echo > %s/%s' % (dirs[2], needle),
+        'find . %s' % needle
+    ]))
+    r.match('./%s/%s' % (dirs[0], needle),
+            './%s/%s/%s' % (dirs[0], dirs[1], needle),
+            './%s/%s' % (dirs[2], needle))
+
+@test(10, "xargs")
+def test_xargs():
+    r.run_qemu(shell_script([
+        'sh < xargstest.sh',
+        'echo DONE',
+    ], 'DONE'))
+    matches = re.findall("hello", r.qemu.output)
+    assert_equal(len(matches), 3, "Number of appearances of 'hello'")
+
+@test(9, "xargs, multi-line echo")
+def test_xargs_multiline():
+    r.run_qemu(shell_script(['(echo 1 ; echo 2) | xargs echo']))
+    r.match('^1$', '^2$')
+
+@test(1, "time")
+def test_time():
+    check_time()
+    
+run_tests()
diff --git a/xv6-labs-2024/gradelib.py b/xv6-labs-2024/gradelib.py
new file mode 100644
index 0000000..f0d4934
--- /dev/null
+++ b/xv6-labs-2024/gradelib.py
@@ -0,0 +1,628 @@
+from __future__ import print_function
+
+import sys, os, re, time, socket, select, subprocess, errno, shutil, random, string, json
+from subprocess import check_call, Popen
+from optparse import OptionParser
+
+__all__ = []
+
+##################################################################
+# Test structure
+#
+
+__all__ += ["test", "end_part", "run_tests", "get_current_test"]
+
+TESTS = []
+TOTAL = POSSIBLE = 0
+PART_TOTAL = PART_POSSIBLE = 0
+CURRENT_TEST = None
+GRADES = {}
+
+def test(points, title=None, parent=None):
+    """Decorator for declaring test functions.  If title is None, the
+    title of the test will be derived from the function name by
+    stripping the leading "test_" and replacing underscores with
+    spaces."""
+
+    def register_test(fn, title=title):
+        if not title:
+            assert fn.__name__.startswith("test_")
+            title = fn.__name__[5:].replace("_", " ")
+        if parent:
+            title = "  " + title
+
+        def run_test():
+            global TOTAL, POSSIBLE, CURRENT_TEST, GRADES
+
+            # Handle test dependencies
+            if run_test.complete:
+                return run_test.ok
+            run_test.complete = True
+            parent_failed = False
+            if parent:
+                parent_failed = not parent()
+
+            # Run the test
+            fail = None
+            start = time.time()
+            CURRENT_TEST = run_test
+            sys.stdout.write("== Test %s == " % title)
+            if parent:
+                sys.stdout.write("\n")
+            sys.stdout.flush()
+            try:
+                if parent_failed:
+                    raise AssertionError('Parent failed: %s' % parent.__name__)
+                fn()
+            except AssertionError as e:
+                fail = str(e)
+
+            # Display and handle test result
+            POSSIBLE += points
+            if points:
+                print("%s: %s" % (title, \
+                    (color("red", "FAIL") if fail else color("green", "OK"))), end=' ')
+            if time.time() - start > 0.1:
+                print("(%.1fs)" % (time.time() - start), end=' ')
+            print()
+            if fail:
+                print("    %s" % fail.replace("\n", "\n    "))
+            else:
+                TOTAL += points
+            if points:
+                GRADES[title] = 0 if fail else points
+
+            for callback in run_test.on_finish:
+                callback(fail)
+            CURRENT_TEST = None
+
+            run_test.ok = not fail
+            return run_test.ok
+
+        # Record test metadata on the test wrapper function
+        run_test.__name__ = fn.__name__
+        run_test.title = title
+        run_test.complete = False
+        run_test.ok = False
+        run_test.on_finish = []
+        TESTS.append(run_test)
+        return run_test
+    return register_test
+
+def end_part(name):
+    def show_part():
+        global PART_TOTAL, PART_POSSIBLE
+        print("Part %s score: %d/%d" % \
+            (name, TOTAL - PART_TOTAL, POSSIBLE - PART_POSSIBLE))
+        print()
+        PART_TOTAL, PART_POSSIBLE = TOTAL, POSSIBLE
+    show_part.title = ""
+    TESTS.append(show_part)
+
+def write_results():
+    global options
+    if not options.results:
+        return
+    try:
+        with open(options.results, "w") as f:
+            f.write(json.dumps(GRADES))
+    except OSError as e:
+        print("Provided a bad results path. Error:", e)
+
+def run_tests():
+    """Set up for testing and run the registered test functions."""
+
+    # Handle command line
+    global options
+    parser = OptionParser(usage="usage: %prog [-v] [filters...]")
+    parser.add_option("-v", "--verbose", action="store_true",
+                      help="print commands")
+    parser.add_option("--color", choices=["never", "always", "auto"],
+                      default="auto", help="never, always, or auto")
+    parser.add_option("--results", help="results file path")
+    (options, args) = parser.parse_args()
+
+    # Start with a full build to catch build errors
+    make()
+
+    # Clean the file system if there is one
+    reset_fs()
+
+    # Run tests
+    limit = list(map(str.lower, args))
+    try:
+        for test in TESTS:
+            if not limit or any(l in test.title.lower() for l in limit):
+                test()
+        if not limit:
+            write_results()
+            print("Score: %d/%d" % (TOTAL, POSSIBLE))
+    except KeyboardInterrupt:
+        pass
+    if TOTAL < POSSIBLE:
+        sys.exit(1)
+
+def get_current_test():
+    if not CURRENT_TEST:
+        raise RuntimeError("No test is running")
+    return CURRENT_TEST
+
+##################################################################
+# Assertions
+#
+
+__all__ += ["assert_equal", "assert_lines_match"]
+
+def assert_equal(got, expect, msg=""):
+    if got == expect:
+        return
+    if msg:
+        msg += "\n"
+    raise AssertionError("%sgot:\n  %s\nexpected:\n  %s" %
+                         (msg, str(got).replace("\n", "\n  "),
+                          str(expect).replace("\n", "\n  ")))
+
+def assert_lines_match(text, *regexps, **kw):
+    """Assert that all of regexps match some line in text.  If a 'no'
+    keyword argument is given, it must be a list of regexps that must
+    *not* match any line in text."""
+
+    def assert_lines_match_kw(no=[]):
+        return no
+    no = assert_lines_match_kw(**kw)
+
+    # Check text against regexps
+    lines = text.splitlines()
+    good = set()
+    bad = set()
+    for i, line in enumerate(lines):
+        if any(re.match(r, line) for r in regexps):
+            good.add(i)
+            regexps = [r for r in regexps if not re.match(r, line)]
+        if any(re.match(r, line) for r in no):
+            bad.add(i)
+
+    if not regexps and not bad:
+        return
+
+    # We failed; construct an informative failure message
+    show = set()
+    for lineno in good.union(bad):
+        for offset in range(-2, 3):
+            show.add(lineno + offset)
+    if regexps:
+        show.update(n for n in range(len(lines) - 5, len(lines)))
+
+    msg = []
+    last = -1
+    for lineno in sorted(show):
+        if 0 <= lineno < len(lines):
+            if lineno != last + 1:
+                msg.append("...")
+            last = lineno
+            msg.append("%s %s" % (color("red", "BAD ") if lineno in bad else
+                                  color("green", "GOOD") if lineno in good
+                                  else "    ",
+                                  lines[lineno]))
+    if last != len(lines) - 1:
+        msg.append("...")
+    if bad:
+        msg.append("unexpected lines in output")
+    for r in regexps:
+        msg.append(color("red", "MISSING") + " '%s'" % r)
+    raise AssertionError("\n".join(msg))
+
+##################################################################
+# Utilities
+#
+
+__all__ += ["make", "maybe_unlink", "reset_fs", "color", "random_str", "check_time", "check_answers"]
+
+MAKE_TIMESTAMP = 0
+
+def pre_make():
+    """Delay prior to running make to ensure file mtimes change."""
+    while int(time.time()) == MAKE_TIMESTAMP:
+        time.sleep(0.1)
+
+def post_make():
+    """Record the time after make completes so that the next run of
+    make can be delayed if needed."""
+    global MAKE_TIMESTAMP
+    MAKE_TIMESTAMP = int(time.time())
+
+def make(*target):
+    pre_make()
+    if Popen(("make",) + target).wait():
+        sys.exit(1)
+    post_make()
+
+def show_command(cmd):
+    from pipes import quote
+    print("\n$", " ".join(map(quote, cmd)))
+
+def maybe_unlink(*paths):
+    for path in paths:
+        try:
+            os.unlink(path)
+        except EnvironmentError as e:
+            if e.errno != errno.ENOENT:
+                raise
+
+COLORS = {"default": "\033[0m", "red": "\033[31m", "green": "\033[32m"}
+
+def color(name, text):
+    if options.color == "always" or (options.color == "auto" and os.isatty(1)):
+        return COLORS[name] + text + COLORS["default"]
+    return text
+
+def reset_fs():
+    if os.path.exists("obj/fs/clean-fs.img"):
+        shutil.copyfile("obj/fs/clean-fs.img", "obj/fs/fs.img")
+
+def random_str(n=8):
+    letters = string.ascii_letters + string.digits
+    return ''.join(random.choice(letters) for _ in range(n))
+
+def check_time():
+    try:
+        print("")
+        with open('time.txt') as f:
+            d = f.read().strip()
+            if not re.match(r'^\d+$', d):
+                raise AssertionError('time.txt does not contain a single integer (number of hours spent on the lab)')
+    except IOError:
+        raise AssertionError('Cannot read time.txt')
+
+def check_answers(file, n=10):
+    try:
+        print("")
+        with open(file) as f:
+            d = f.read().strip()
+            if len(d) < n:
+                raise AssertionError('%s does not seem to contain enough text' % file)
+    except IOError:
+        raise AssertionError('Cannot read %s' % file)
+
+
+##################################################################
+# Controllers
+#
+
+__all__ += ["QEMU", "GDBClient"]
+
+class QEMU(object):
+    _GDBPORT = None
+
+    def __init__(self, *make_args):
+        # Check that QEMU is not currently running
+        try:
+            GDBClient(self.get_gdb_port(), timeout=0).close()
+        except socket.error:
+            pass
+        else:
+            print("""\
+GDB stub found on port %d.
+QEMU appears to already be running.  Please exit it if possible or use
+'killall qemu' or 'killall qemu.real'.""" % self.get_gdb_port(), file=sys.stderr)
+            sys.exit(1)
+
+        if options.verbose:
+            show_command(("make",) + make_args)
+        cmd = ("make", "-s", "--no-print-directory") + make_args
+        self.proc = Popen(cmd, stdout=subprocess.PIPE,
+                          stderr=subprocess.STDOUT,
+                          stdin=subprocess.PIPE)
+        # Accumulated output as a string
+        self.output = ""
+        # Accumulated output as a bytearray
+        self.outbytes = bytearray()
+        self.on_output = []
+
+    @staticmethod
+    def get_gdb_port():
+        if QEMU._GDBPORT is None:
+            p = Popen(["make", "-s", "--no-print-directory", "print-gdbport"],
+                      stdout=subprocess.PIPE)
+            (out, _) = p.communicate()
+            if p.returncode:
+                raise RuntimeError(
+                    "Failed to get gdbport: make exited with %d" %
+                    p.returncode)
+            QEMU._GDBPORT = int(out)
+        return QEMU._GDBPORT
+
+    def fileno(self):
+        if self.proc:
+            return self.proc.stdout.fileno()
+
+    def handle_read(self):
+        buf = os.read(self.proc.stdout.fileno(), 4096)
+        self.outbytes.extend(buf)
+        self.output = self.outbytes.decode("utf-8", "replace")
+        for callback in self.on_output:
+            callback(buf)
+        if buf == b"":
+            self.wait()
+            return
+
+    def write(self, buf):
+        if isinstance(buf, str):
+            buf = buf.encode('utf-8')
+        self.proc.stdin.write(buf)
+        self.proc.stdin.flush()
+
+    def wait(self):
+        if self.proc:
+            self.proc.wait()
+            self.proc = None
+
+    def kill(self):
+        if self.proc:
+            self.proc.terminate()
+
+class GDBClient(object):
+    def __init__(self, port, timeout=15):
+        start = time.time()
+        while True:
+            self.sock = socket.socket()
+            try:
+                self.sock.settimeout(1)
+                self.sock.connect(("localhost", port))
+                break
+            except socket.error:
+                if time.time() >= start + timeout:
+                    raise
+        self.__buf = ""
+
+    def fileno(self):
+        if self.sock:
+            return self.sock.fileno()
+
+    def handle_read(self):
+        try:
+            data = self.sock.recv(4096).decode("ascii", "replace")
+        except socket.error:
+            data = ""
+        if data == "":
+            self.sock.close()
+            self.sock = None
+            return
+        self.__buf += data
+
+        while True:
+            m = re.search(r"\$([^#]*)#[0-9a-zA-Z]{2}", self.__buf)
+            if not m:
+                break
+            pkt = m.group(1)
+            self.__buf = self.__buf[m.end():]
+
+            if pkt.startswith("T05"):
+                # Breakpoint
+                raise TerminateTest
+
+    def __send(self, cmd):
+        packet = "$%s#%02x" % (cmd, sum(map(ord, cmd)) % 256)
+        self.sock.sendall(packet.encode("ascii"))
+
+    def __send_break(self):
+        self.sock.sendall(b"\x03")
+
+    def close(self):
+        if self.sock:
+            self.sock.close()
+            self.sock = None
+
+    def cont(self):
+        self.__send("c")
+
+    def breakpoint(self, addr):
+        self.__send("Z1,%x,1" % addr)
+
+
+##################################################################
+# QEMU test runner
+#
+
+__all__ += ["TerminateTest", "Runner"]
+
+class TerminateTest(Exception):
+    pass
+
+class Runner():
+    def __init__(self, *default_monitors):
+        self.__default_monitors = default_monitors
+
+    def run_qemu(self, *monitors, **kw):
+        """Run a QEMU-based test.  monitors should functions that will
+        be called with this Runner instance once QEMU and GDB are
+        started.  Typically, they should register callbacks that throw
+        TerminateTest when stop events occur.  The target_base
+        argument gives the make target to run.  The make_args argument
+        should be a list of additional arguments to pass to make.  The
+        timeout argument bounds how long to run before returning."""
+
+        def run_qemu_kw(target_base="qemu", make_args=[], timeout=30):
+            return target_base, make_args, timeout
+        target_base, make_args, timeout = run_qemu_kw(**kw)
+
+        # Start QEMU
+        pre_make()
+        self.qemu = QEMU(target_base + "-gdb", *make_args)
+        self.gdb = None
+
+        try:
+            # Wait for QEMU to start or make to fail.  This will set
+            # self.gdb if QEMU starts.
+            self.qemu.on_output = [self.__monitor_start]
+            self.__react([self.qemu], timeout=90)
+            self.qemu.on_output = []
+            if self.gdb is None:
+                print("Failed to connect to QEMU; output:")
+                print(self.qemu.output)
+                sys.exit(1)
+            post_make()
+
+            # QEMU and GDB are up
+            self.reactors = [self.qemu, self.gdb]
+
+            # Start monitoring
+            for m in self.__default_monitors + monitors:
+                m(self)
+
+            # Run and react
+            self.gdb.cont()
+            self.__react(self.reactors, timeout)
+        finally:
+            # Shutdown QEMU
+            try:
+                if self.gdb is None:
+                    sys.exit(1)
+                self.qemu.kill()
+                self.__react(self.reactors, 5)
+                self.gdb.close()
+                self.qemu.wait()
+            except:
+                print("""\
+Failed to shutdown QEMU.  You might need to 'killall qemu' or
+'killall qemu.real'.
+""")
+                raise
+
+    def __monitor_start(self, output):
+        if b"\n" in output:
+            try:
+                self.gdb = GDBClient(self.qemu.get_gdb_port(), timeout=2)
+                raise TerminateTest
+            except socket.error:
+                pass
+        if not len(output):
+            raise TerminateTest
+
+    def __react(self, reactors, timeout):
+        deadline = time.time() + timeout
+        try:
+            while True:
+                timeleft = deadline - time.time()
+                if timeleft < 0:
+                    sys.stdout.write("Timeout! ")
+                    sys.stdout.flush()
+                    return
+
+                rset = [r for r in reactors if r.fileno() is not None]
+                if not rset:
+                    return
+
+                rset, _, _ = select.select(rset, [], [], timeleft)
+                for reactor in rset:
+                    reactor.handle_read()
+        except TerminateTest:
+            pass
+
+    def user_test(self, binary, *monitors, **kw):
+        """Run a user test using the specified binary.  Monitors and
+        keyword arguments are as for run_qemu.  This runs on a disk
+        snapshot unless the keyword argument 'snapshot' is False."""
+
+        maybe_unlink("obj/kern/init.o", "obj/kern/kernel")
+        if kw.pop("snapshot", True):
+            kw.setdefault("make_args", []).append("QEMUEXTRA+=-snapshot")
+        self.run_qemu(target_base="run-%s" % binary, *monitors, **kw)
+
+    def match(self, *args, **kwargs):
+        """Shortcut to call assert_lines_match on the most recent QEMU
+        output."""
+
+        assert_lines_match(self.qemu.output, *args, **kwargs)
+
+##################################################################
+# Monitors
+#
+
+__all__ += ["save", "stop_breakpoint", "call_on_line", "stop_on_line", "shell_script"]
+
+def save(path):
+    """Return a monitor that writes QEMU's output to path.  If the
+    test fails, copy the output to path.test-name."""
+
+    def setup_save(runner):
+        f.seek(0)
+        f.truncate()
+        runner.qemu.on_output.append(f.write)
+        get_current_test().on_finish.append(save_on_finish)
+
+    def save_on_finish(fail):
+        f.flush()
+        save_path = path + "." + get_current_test().__name__[5:]
+        if fail:
+            shutil.copyfile(path, save_path)
+            print("    QEMU output saved to %s" % save_path)
+        elif os.path.exists(save_path):
+            os.unlink(save_path)
+            print("    (Old %s failure log removed)" % save_path)
+
+    f = open(path, "wb")
+    return setup_save
+
+def stop_breakpoint(addr):
+    """Returns a monitor that stops when addr is reached.  addr may be
+    a number or the name of a symbol."""
+
+    def setup_breakpoint(runner):
+        if isinstance(addr, str):
+            addrs = [int(sym[:16], 16) for sym in open("kernel/kernel.sym")
+                     if sym[17:].strip() == addr]
+            assert len(addrs), "Symbol %s not found" % addr
+            runner.gdb.breakpoint(addrs[0])
+        else:
+            runner.gdb.breakpoint(addr)
+    return setup_breakpoint
+
+def call_on_line(regexp, callback):
+    """Returns a monitor that calls 'callback' when QEMU prints a line
+    matching 'regexp'."""
+
+    def setup_call_on_line(runner):
+        buf = bytearray()
+        def handle_output(output):
+            buf.extend(output)
+            while b"\n" in buf:
+                line, buf[:] = buf.split(b"\n", 1)
+                line = line.decode("utf-8", "replace")
+                if re.match(regexp, line):
+                    callback(line)
+        runner.qemu.on_output.append(handle_output)
+    return setup_call_on_line
+
+def stop_on_line(regexp):
+    """Returns a monitor that stops when QEMU prints a line matching
+    'regexp'."""
+
+    def stop(line):
+        raise TerminateTest
+    return call_on_line(regexp, stop)
+
+def shell_script(script, terminate_match=None):
+    """Returns a monitor that plays the script, and stops when the script is
+    done executing."""
+
+    def setup_call_on_line(runner):
+        class context:
+            n = 0
+            buf = bytearray()
+        def handle_output(output):
+            context.buf.extend(output)
+            if terminate_match is not None:
+                if re.match(terminate_match, context.buf.decode('utf-8', 'replace')):
+                    raise TerminateTest
+            if b'$ ' in context.buf:
+                context.buf = bytearray()
+                if context.n < len(script):
+                    runner.qemu.write(script[context.n])
+                    runner.qemu.write('\n')
+                    context.n += 1
+                else:
+                    if terminate_match is None:
+                        raise TerminateTest
+        runner.qemu.on_output.append(handle_output)
+    return setup_call_on_line
diff --git a/xv6-labs-2024/kernel/bio.c b/xv6-labs-2024/kernel/bio.c
new file mode 100644
index 0000000..60d91a6
--- /dev/null
+++ b/xv6-labs-2024/kernel/bio.c
@@ -0,0 +1,153 @@
+// Buffer cache.
+//
+// The buffer cache is a linked list of buf structures holding
+// cached copies of disk block contents.  Caching disk blocks
+// in memory reduces the number of disk reads and also provides
+// a synchronization point for disk blocks used by multiple processes.
+//
+// Interface:
+// * To get a buffer for a particular disk block, call bread.
+// * After changing buffer data, call bwrite to write it to disk.
+// * When done with the buffer, call brelse.
+// * Do not use the buffer after calling brelse.
+// * Only one process at a time can use a buffer,
+//     so do not keep them longer than necessary.
+
+
+#include "types.h"
+#include "param.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "riscv.h"
+#include "defs.h"
+#include "fs.h"
+#include "buf.h"
+
+struct {
+  struct spinlock lock;
+  struct buf buf[NBUF];
+
+  // Linked list of all buffers, through prev/next.
+  // Sorted by how recently the buffer was used.
+  // head.next is most recent, head.prev is least.
+  struct buf head;
+} bcache;
+
+void
+binit(void)
+{
+  struct buf *b;
+
+  initlock(&bcache.lock, "bcache");
+
+  // Create linked list of buffers
+  bcache.head.prev = &bcache.head;
+  bcache.head.next = &bcache.head;
+  for(b = bcache.buf; b < bcache.buf+NBUF; b++){
+    b->next = bcache.head.next;
+    b->prev = &bcache.head;
+    initsleeplock(&b->lock, "buffer");
+    bcache.head.next->prev = b;
+    bcache.head.next = b;
+  }
+}
+
+// Look through buffer cache for block on device dev.
+// If not found, allocate a buffer.
+// In either case, return locked buffer.
+static struct buf*
+bget(uint dev, uint blockno)
+{
+  struct buf *b;
+
+  acquire(&bcache.lock);
+
+  // Is the block already cached?
+  for(b = bcache.head.next; b != &bcache.head; b = b->next){
+    if(b->dev == dev && b->blockno == blockno){
+      b->refcnt++;
+      release(&bcache.lock);
+      acquiresleep(&b->lock);
+      return b;
+    }
+  }
+
+  // Not cached.
+  // Recycle the least recently used (LRU) unused buffer.
+  for(b = bcache.head.prev; b != &bcache.head; b = b->prev){
+    if(b->refcnt == 0) {
+      b->dev = dev;
+      b->blockno = blockno;
+      b->valid = 0;
+      b->refcnt = 1;
+      release(&bcache.lock);
+      acquiresleep(&b->lock);
+      return b;
+    }
+  }
+  panic("bget: no buffers");
+}
+
+// Return a locked buf with the contents of the indicated block.
+struct buf*
+bread(uint dev, uint blockno)
+{
+  struct buf *b;
+
+  b = bget(dev, blockno);
+  if(!b->valid) {
+    virtio_disk_rw(b, 0);
+    b->valid = 1;
+  }
+  return b;
+}
+
+// Write b's contents to disk.  Must be locked.
+void
+bwrite(struct buf *b)
+{
+  if(!holdingsleep(&b->lock))
+    panic("bwrite");
+  virtio_disk_rw(b, 1);
+}
+
+// Release a locked buffer.
+// Move to the head of the most-recently-used list.
+void
+brelse(struct buf *b)
+{
+  if(!holdingsleep(&b->lock))
+    panic("brelse");
+
+  releasesleep(&b->lock);
+
+  acquire(&bcache.lock);
+  b->refcnt--;
+  if (b->refcnt == 0) {
+    // no one is waiting for it.
+    b->next->prev = b->prev;
+    b->prev->next = b->next;
+    b->next = bcache.head.next;
+    b->prev = &bcache.head;
+    bcache.head.next->prev = b;
+    bcache.head.next = b;
+  }
+  
+  release(&bcache.lock);
+}
+
+void
+bpin(struct buf *b) {
+  acquire(&bcache.lock);
+  b->refcnt++;
+  release(&bcache.lock);
+}
+
+void
+bunpin(struct buf *b) {
+  acquire(&bcache.lock);
+  b->refcnt--;
+  release(&bcache.lock);
+}
+
+
diff --git a/xv6-labs-2024/kernel/bio.d b/xv6-labs-2024/kernel/bio.d
new file mode 100644
index 0000000..8d73dc8
--- /dev/null
+++ b/xv6-labs-2024/kernel/bio.d
@@ -0,0 +1,3 @@
+kernel/bio.o: kernel/bio.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/spinlock.h kernel/sleeplock.h \
+ kernel/riscv.h kernel/defs.h kernel/fs.h kernel/buf.h
diff --git a/xv6-labs-2024/kernel/bio.o b/xv6-labs-2024/kernel/bio.o
new file mode 100644
index 0000000..cf784dc
Binary files /dev/null and b/xv6-labs-2024/kernel/bio.o differ
diff --git a/xv6-labs-2024/kernel/buf.h b/xv6-labs-2024/kernel/buf.h
new file mode 100644
index 0000000..4616e9e
--- /dev/null
+++ b/xv6-labs-2024/kernel/buf.h
@@ -0,0 +1,12 @@
+struct buf {
+  int valid;   // has data been read from disk?
+  int disk;    // does disk "own" buf?
+  uint dev;
+  uint blockno;
+  struct sleeplock lock;
+  uint refcnt;
+  struct buf *prev; // LRU cache list
+  struct buf *next;
+  uchar data[BSIZE];
+};
+
diff --git a/xv6-labs-2024/kernel/console.c b/xv6-labs-2024/kernel/console.c
new file mode 100644
index 0000000..05dc526
--- /dev/null
+++ b/xv6-labs-2024/kernel/console.c
@@ -0,0 +1,192 @@
+//
+// Console input and output, to the uart.
+// Reads are line at a time.
+// Implements special input characters:
+//   newline -- end of line
+//   control-h -- backspace
+//   control-u -- kill line
+//   control-d -- end of file
+//   control-p -- print process list
+//
+
+#include <stdarg.h>
+
+#include "types.h"
+#include "param.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "fs.h"
+#include "file.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "defs.h"
+#include "proc.h"
+
+#define BACKSPACE 0x100
+#define C(x)  ((x)-'@')  // Control-x
+
+//
+// send one character to the uart.
+// called by printf(), and to echo input characters,
+// but not from write().
+//
+void
+consputc(int c)
+{
+  if(c == BACKSPACE){
+    // if the user typed backspace, overwrite with a space.
+    uartputc_sync('\b'); uartputc_sync(' '); uartputc_sync('\b');
+  } else {
+    uartputc_sync(c);
+  }
+}
+
+struct {
+  struct spinlock lock;
+  
+  // input
+#define INPUT_BUF_SIZE 128
+  char buf[INPUT_BUF_SIZE];
+  uint r;  // Read index
+  uint w;  // Write index
+  uint e;  // Edit index
+} cons;
+
+//
+// user write()s to the console go here.
+//
+int
+consolewrite(int user_src, uint64 src, int n)
+{
+  int i;
+
+  for(i = 0; i < n; i++){
+    char c;
+    if(either_copyin(&c, user_src, src+i, 1) == -1)
+      break;
+    uartputc(c);
+  }
+
+  return i;
+}
+
+//
+// user read()s from the console go here.
+// copy (up to) a whole input line to dst.
+// user_dist indicates whether dst is a user
+// or kernel address.
+//
+int
+consoleread(int user_dst, uint64 dst, int n)
+{
+  uint target;
+  int c;
+  char cbuf;
+
+  target = n;
+  acquire(&cons.lock);
+  while(n > 0){
+    // wait until interrupt handler has put some
+    // input into cons.buffer.
+    while(cons.r == cons.w){
+      if(killed(myproc())){
+        release(&cons.lock);
+        return -1;
+      }
+      sleep(&cons.r, &cons.lock);
+    }
+
+    c = cons.buf[cons.r++ % INPUT_BUF_SIZE];
+
+    if(c == C('D')){  // end-of-file
+      if(n < target){
+        // Save ^D for next time, to make sure
+        // caller gets a 0-byte result.
+        cons.r--;
+      }
+      break;
+    }
+
+    // copy the input byte to the user-space buffer.
+    cbuf = c;
+    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
+      break;
+
+    dst++;
+    --n;
+
+    if(c == '\n'){
+      // a whole line has arrived, return to
+      // the user-level read().
+      break;
+    }
+  }
+  release(&cons.lock);
+
+  return target - n;
+}
+
+//
+// the console input interrupt handler.
+// uartintr() calls this for input character.
+// do erase/kill processing, append to cons.buf,
+// wake up consoleread() if a whole line has arrived.
+//
+void
+consoleintr(int c)
+{
+  acquire(&cons.lock);
+
+  switch(c){
+  case C('P'):  // Print process list.
+    procdump();
+    break;
+  case C('U'):  // Kill line.
+    while(cons.e != cons.w &&
+          cons.buf[(cons.e-1) % INPUT_BUF_SIZE] != '\n'){
+      cons.e--;
+      consputc(BACKSPACE);
+    }
+    break;
+  case C('H'): // Backspace
+  case '\x7f': // Delete key
+    if(cons.e != cons.w){
+      cons.e--;
+      consputc(BACKSPACE);
+    }
+    break;
+  default:
+    if(c != 0 && cons.e-cons.r < INPUT_BUF_SIZE){
+      c = (c == '\r') ? '\n' : c;
+
+      // echo back to the user.
+      consputc(c);
+
+      // store for consumption by consoleread().
+      cons.buf[cons.e++ % INPUT_BUF_SIZE] = c;
+
+      if(c == '\n' || c == C('D') || cons.e-cons.r == INPUT_BUF_SIZE){
+        // wake up consoleread() if a whole line (or end-of-file)
+        // has arrived.
+        cons.w = cons.e;
+        wakeup(&cons.r);
+      }
+    }
+    break;
+  }
+  
+  release(&cons.lock);
+}
+
+void
+consoleinit(void)
+{
+  initlock(&cons.lock, "cons");
+
+  uartinit();
+
+  // connect read and write system calls
+  // to consoleread and consolewrite.
+  devsw[CONSOLE].read = consoleread;
+  devsw[CONSOLE].write = consolewrite;
+}
diff --git a/xv6-labs-2024/kernel/console.d b/xv6-labs-2024/kernel/console.d
new file mode 100644
index 0000000..5e51b69
--- /dev/null
+++ b/xv6-labs-2024/kernel/console.d
@@ -0,0 +1,6 @@
+kernel/console.o: kernel/console.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ /usr/lib/gcc-cross/riscv64-linux-gnu/13/include/stdarg.h kernel/types.h \
+ kernel/param.h kernel/spinlock.h kernel/sleeplock.h kernel/fs.h \
+ kernel/file.h kernel/memlayout.h kernel/riscv.h kernel/defs.h \
+ kernel/proc.h
diff --git a/xv6-labs-2024/kernel/console.o b/xv6-labs-2024/kernel/console.o
new file mode 100644
index 0000000..d36deb4
Binary files /dev/null and b/xv6-labs-2024/kernel/console.o differ
diff --git a/xv6-labs-2024/kernel/defs.h b/xv6-labs-2024/kernel/defs.h
new file mode 100644
index 0000000..d1b6bb9
--- /dev/null
+++ b/xv6-labs-2024/kernel/defs.h
@@ -0,0 +1,189 @@
+struct buf;
+struct context;
+struct file;
+struct inode;
+struct pipe;
+struct proc;
+struct spinlock;
+struct sleeplock;
+struct stat;
+struct superblock;
+
+// bio.c
+void            binit(void);
+struct buf*     bread(uint, uint);
+void            brelse(struct buf*);
+void            bwrite(struct buf*);
+void            bpin(struct buf*);
+void            bunpin(struct buf*);
+
+// console.c
+void            consoleinit(void);
+void            consoleintr(int);
+void            consputc(int);
+
+// exec.c
+int             exec(char*, char**);
+
+// file.c
+struct file*    filealloc(void);
+void            fileclose(struct file*);
+struct file*    filedup(struct file*);
+void            fileinit(void);
+int             fileread(struct file*, uint64, int n);
+int             filestat(struct file*, uint64 addr);
+int             filewrite(struct file*, uint64, int n);
+
+// fs.c
+void            fsinit(int);
+int             dirlink(struct inode*, char*, uint);
+struct inode*   dirlookup(struct inode*, char*, uint*);
+struct inode*   ialloc(uint, short);
+struct inode*   idup(struct inode*);
+void            iinit();
+void            ilock(struct inode*);
+void            iput(struct inode*);
+void            iunlock(struct inode*);
+void            iunlockput(struct inode*);
+void            iupdate(struct inode*);
+int             namecmp(const char*, const char*);
+struct inode*   namei(char*);
+struct inode*   nameiparent(char*, char*);
+int             readi(struct inode*, int, uint64, uint, uint);
+void            stati(struct inode*, struct stat*);
+int             writei(struct inode*, int, uint64, uint, uint);
+void            itrunc(struct inode*);
+
+// ramdisk.c
+void            ramdiskinit(void);
+void            ramdiskintr(void);
+void            ramdiskrw(struct buf*);
+
+// kalloc.c
+void*           kalloc(void);
+void            kfree(void *);
+void            kinit(void);
+
+// log.c
+void            initlog(int, struct superblock*);
+void            log_write(struct buf*);
+void            begin_op(void);
+void            end_op(void);
+
+// pipe.c
+int             pipealloc(struct file**, struct file**);
+void            pipeclose(struct pipe*, int);
+int             piperead(struct pipe*, uint64, int);
+int             pipewrite(struct pipe*, uint64, int);
+
+// printf.c
+int            printf(char*, ...) __attribute__ ((format (printf, 1, 2)));
+void            panic(char*) __attribute__((noreturn));
+void            printfinit(void);
+
+// proc.c
+int             cpuid(void);
+void            exit(int);
+int             fork(void);
+int             growproc(int);
+void            proc_mapstacks(pagetable_t);
+pagetable_t     proc_pagetable(struct proc *);
+void            proc_freepagetable(pagetable_t, uint64);
+int             kill(int);
+int             killed(struct proc*);
+void            setkilled(struct proc*);
+struct cpu*     mycpu(void);
+struct cpu*     getmycpu(void);
+struct proc*    myproc();
+void            procinit(void);
+void            scheduler(void) __attribute__((noreturn));
+void            sched(void);
+void            sleep(void*, struct spinlock*);
+void            userinit(void);
+int             wait(uint64);
+void            wakeup(void*);
+void            yield(void);
+int             either_copyout(int user_dst, uint64 dst, void *src, uint64 len);
+int             either_copyin(void *dst, int user_src, uint64 src, uint64 len);
+void            procdump(void);
+
+// swtch.S
+void            swtch(struct context*, struct context*);
+
+// spinlock.c
+void            acquire(struct spinlock*);
+int             holding(struct spinlock*);
+void            initlock(struct spinlock*, char*);
+void            release(struct spinlock*);
+void            push_off(void);
+void            pop_off(void);
+
+// sleeplock.c
+void            acquiresleep(struct sleeplock*);
+void            releasesleep(struct sleeplock*);
+int             holdingsleep(struct sleeplock*);
+void            initsleeplock(struct sleeplock*, char*);
+
+// string.c
+int             memcmp(const void*, const void*, uint);
+void*           memmove(void*, const void*, uint);
+void*           memset(void*, int, uint);
+char*           safestrcpy(char*, const char*, int);
+int             strlen(const char*);
+int             strncmp(const char*, const char*, uint);
+char*           strncpy(char*, const char*, int);
+
+// syscall.c
+void            argint(int, int*);
+int             argstr(int, char*, int);
+void            argaddr(int, uint64 *);
+int             fetchstr(uint64, char*, int);
+int             fetchaddr(uint64, uint64*);
+void            syscall();
+
+// trap.c
+extern uint     ticks;
+void            trapinit(void);
+void            trapinithart(void);
+extern struct spinlock tickslock;
+void            usertrapret(void);
+
+// uart.c
+void            uartinit(void);
+void            uartintr(void);
+void            uartputc(int);
+void            uartputc_sync(int);
+int             uartgetc(void);
+
+// vm.c
+void            kvminit(void);
+void            kvminithart(void);
+void            kvmmap(pagetable_t, uint64, uint64, uint64, int);
+int             mappages(pagetable_t, uint64, uint64, uint64, int);
+pagetable_t     uvmcreate(void);
+void            uvmfirst(pagetable_t, uchar *, uint);
+uint64          uvmalloc(pagetable_t, uint64, uint64, int);
+uint64          uvmdealloc(pagetable_t, uint64, uint64);
+int             uvmcopy(pagetable_t, pagetable_t, uint64);
+void            uvmfree(pagetable_t, uint64);
+void            uvmunmap(pagetable_t, uint64, uint64, int);
+void            uvmclear(pagetable_t, uint64);
+pte_t *         walk(pagetable_t, uint64, int);
+uint64          walkaddr(pagetable_t, uint64);
+int             copyout(pagetable_t, uint64, char *, uint64);
+int             copyin(pagetable_t, char *, uint64, uint64);
+int             copyinstr(pagetable_t, char *, uint64, uint64);
+
+// plic.c
+void            plicinit(void);
+void            plicinithart(void);
+int             plic_claim(void);
+void            plic_complete(int);
+
+// virtio_disk.c
+void            virtio_disk_init(void);
+void            virtio_disk_rw(struct buf *, int);
+void            virtio_disk_intr(void);
+
+// number of elements in fixed-size array
+#define NELEM(x) (sizeof(x)/sizeof((x)[0]))
diff --git a/xv6-labs-2024/kernel/elf.h b/xv6-labs-2024/kernel/elf.h
new file mode 100644
index 0000000..84555fa
--- /dev/null
+++ b/xv6-labs-2024/kernel/elf.h
@@ -0,0 +1,42 @@
+// Format of an ELF executable file
+
+#define ELF_MAGIC 0x464C457FU  // "\x7FELF" in little endian
+
+// File header
+struct elfhdr {
+  uint magic;  // must equal ELF_MAGIC
+  uchar elf[12];
+  ushort type;
+  ushort machine;
+  uint version;
+  uint64 entry;
+  uint64 phoff;
+  uint64 shoff;
+  uint flags;
+  ushort ehsize;
+  ushort phentsize;
+  ushort phnum;
+  ushort shentsize;
+  ushort shnum;
+  ushort shstrndx;
+};
+
+// Program section header
+struct proghdr {
+  uint32 type;
+  uint32 flags;
+  uint64 off;
+  uint64 vaddr;
+  uint64 paddr;
+  uint64 filesz;
+  uint64 memsz;
+  uint64 align;
+};
+
+// Values for Proghdr type
+#define ELF_PROG_LOAD           1
+
+// Flag bits for Proghdr flags
+#define ELF_PROG_FLAG_EXEC      1
+#define ELF_PROG_FLAG_WRITE     2
+#define ELF_PROG_FLAG_READ      4
diff --git a/xv6-labs-2024/kernel/entry.S b/xv6-labs-2024/kernel/entry.S
new file mode 100644
index 0000000..5ab365e
--- /dev/null
+++ b/xv6-labs-2024/kernel/entry.S
@@ -0,0 +1,21 @@
+        # qemu -kernel loads the kernel at 0x80000000
+        # and causes each hart (i.e. CPU) to jump there.
+        # kernel.ld causes the following code to
+        # be placed at 0x80000000.
+.section .text
+.global _entry
+_entry:
+        # set up a stack for C.
+        # stack0 is declared in start.c,
+        # with a 4096-byte stack per CPU.
+        # sp = stack0 + (hartid * 4096)
+        la sp, stack0
+        li a0, 1024*4
+        csrr a1, mhartid
+        addi a1, a1, 1
+        mul a0, a0, a1
+        add sp, sp, a0
+        # jump to start() in start.c
+        call start
+spin:
+        j spin
diff --git a/xv6-labs-2024/kernel/entry.o b/xv6-labs-2024/kernel/entry.o
new file mode 100644
index 0000000..cc730af
Binary files /dev/null and b/xv6-labs-2024/kernel/entry.o differ
diff --git a/xv6-labs-2024/kernel/exec.c b/xv6-labs-2024/kernel/exec.c
new file mode 100644
index 0000000..6d7c452
--- /dev/null
+++ b/xv6-labs-2024/kernel/exec.c
@@ -0,0 +1,166 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "defs.h"
+#include "elf.h"
+
+static int loadseg(pde_t *, uint64, struct inode *, uint, uint);
+
+int flags2perm(int flags)
+{
+    int perm = 0;
+    if(flags & 0x1)
+      perm = PTE_X;
+    if(flags & 0x2)
+      perm |= PTE_W;
+    return perm;
+}
+
+int
+exec(char *path, char **argv)
+{
+  char *s, *last;
+  int i, off;
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+  struct elfhdr elf;
+  struct inode *ip;
+  struct proghdr ph;
+  pagetable_t pagetable = 0, oldpagetable;
+  struct proc *p = myproc();
+
+  begin_op();
+
+  if((ip = namei(path)) == 0){
+    end_op();
+    return -1;
+  }
+  ilock(ip);
+
+  // Check ELF header
+  if(readi(ip, 0, (uint64)&elf, 0, sizeof(elf)) != sizeof(elf))
+    goto bad;
+
+  if(elf.magic != ELF_MAGIC)
+    goto bad;
+
+  if((pagetable = proc_pagetable(p)) == 0)
+    goto bad;
+
+  // Load program into memory.
+  for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
+    if(readi(ip, 0, (uint64)&ph, off, sizeof(ph)) != sizeof(ph))
+      goto bad;
+    if(ph.type != ELF_PROG_LOAD)
+      continue;
+    if(ph.memsz < ph.filesz)
+      goto bad;
+    if(ph.vaddr + ph.memsz < ph.vaddr)
+      goto bad;
+    if(ph.vaddr % PGSIZE != 0)
+      goto bad;
+    uint64 sz1;
+    if((sz1 = uvmalloc(pagetable, sz, ph.vaddr + ph.memsz, flags2perm(ph.flags))) == 0)
+      goto bad;
+    sz = sz1;
+    if(loadseg(pagetable, ph.vaddr, ip, ph.off, ph.filesz) < 0)
+      goto bad;
+  }
+  iunlockput(ip);
+  end_op();
+  ip = 0;
+
+  p = myproc();
+  uint64 oldsz = p->sz;
+
+  // Allocate some pages at the next page boundary.
+  // Make the first inaccessible as a stack guard.
+  // Use the rest as the user stack.
+  sz = PGROUNDUP(sz);
+  uint64 sz1;
+  if((sz1 = uvmalloc(pagetable, sz, sz + (USERSTACK+1)*PGSIZE, PTE_W)) == 0)
+    goto bad;
+  sz = sz1;
+  uvmclear(pagetable, sz-(USERSTACK+1)*PGSIZE);
+  sp = sz;
+  stackbase = sp - USERSTACK*PGSIZE;
+
+  // Push argument strings, prepare rest of stack in ustack.
+  for(argc = 0; argv[argc]; argc++) {
+    if(argc >= MAXARG)
+      goto bad;
+    sp -= strlen(argv[argc]) + 1;
+    sp -= sp % 16; // riscv sp must be 16-byte aligned
+    if(sp < stackbase)
+      goto bad;
+    if(copyout(pagetable, sp, argv[argc], strlen(argv[argc]) + 1) < 0)
+      goto bad;
+    ustack[argc] = sp;
+  }
+  ustack[argc] = 0;
+
+  // push the array of argv[] pointers.
+  sp -= (argc+1) * sizeof(uint64);
+  sp -= sp % 16;
+  if(sp < stackbase)
+    goto bad;
+  if(copyout(pagetable, sp, (char *)ustack, (argc+1)*sizeof(uint64)) < 0)
+    goto bad;
+
+  // arguments to user main(argc, argv)
+  // argc is returned via the system call return
+  // value, which goes in a0.
+  p->trapframe->a1 = sp;
+
+  // Save program name for debugging.
+  for(last=s=path; *s; s++)
+    if(*s == '/')
+      last = s+1;
+  safestrcpy(p->name, last, sizeof(p->name));
+    
+  // Commit to the user image.
+  oldpagetable = p->pagetable;
+  p->pagetable = pagetable;
+  p->sz = sz;
+  p->trapframe->epc = elf.entry;  // initial program counter = main
+  p->trapframe->sp = sp; // initial stack pointer
+  proc_freepagetable(oldpagetable, oldsz);
+
+  return argc; // this ends up in a0, the first argument to main(argc, argv)
+
+ bad:
+  if(pagetable)
+    proc_freepagetable(pagetable, sz);
+  if(ip){
+    iunlockput(ip);
+    end_op();
+  }
+  return -1;
+}
+
+// Load a program segment into pagetable at virtual address va.
+// va must be page-aligned
+// and the pages from va to va+sz must already be mapped.
+// Returns 0 on success, -1 on failure.
+static int
+loadseg(pagetable_t pagetable, uint64 va, struct inode *ip, uint offset, uint sz)
+{
+  uint i, n;
+  uint64 pa;
+
+  for(i = 0; i < sz; i += PGSIZE){
+    pa = walkaddr(pagetable, va + i);
+    if(pa == 0)
+      panic("loadseg: address should exist");
+    if(sz - i < PGSIZE)
+      n = sz - i;
+    else
+      n = PGSIZE;
+    if(readi(ip, 0, (uint64)pa, offset+i, n) != n)
+      return -1;
+  }
+  
+  return 0;
+}
diff --git a/xv6-labs-2024/kernel/exec.d b/xv6-labs-2024/kernel/exec.d
new file mode 100644
index 0000000..75a3efe
--- /dev/null
+++ b/xv6-labs-2024/kernel/exec.d
@@ -0,0 +1,3 @@
+kernel/exec.o: kernel/exec.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/spinlock.h kernel/proc.h kernel/defs.h kernel/elf.h
diff --git a/xv6-labs-2024/kernel/exec.o b/xv6-labs-2024/kernel/exec.o
new file mode 100644
index 0000000..9d5d783
Binary files /dev/null and b/xv6-labs-2024/kernel/exec.o differ
diff --git a/xv6-labs-2024/kernel/fcntl.h b/xv6-labs-2024/kernel/fcntl.h
new file mode 100644
index 0000000..44861b9
--- /dev/null
+++ b/xv6-labs-2024/kernel/fcntl.h
@@ -0,0 +1,5 @@
+#define O_RDONLY  0x000
+#define O_WRONLY  0x001
+#define O_RDWR    0x002
+#define O_CREATE  0x200
+#define O_TRUNC   0x400
diff --git a/xv6-labs-2024/kernel/file.c b/xv6-labs-2024/kernel/file.c
new file mode 100644
index 0000000..25fa226
--- /dev/null
+++ b/xv6-labs-2024/kernel/file.c
@@ -0,0 +1,182 @@
+//
+// Support functions for system calls that involve file descriptors.
+//
+
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "fs.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "file.h"
+#include "stat.h"
+#include "proc.h"
+
+struct devsw devsw[NDEV];
+struct {
+  struct spinlock lock;
+  struct file file[NFILE];
+} ftable;
+
+void
+fileinit(void)
+{
+  initlock(&ftable.lock, "ftable");
+}
+
+// Allocate a file structure.
+struct file*
+filealloc(void)
+{
+  struct file *f;
+
+  acquire(&ftable.lock);
+  for(f = ftable.file; f < ftable.file + NFILE; f++){
+    if(f->ref == 0){
+      f->ref = 1;
+      release(&ftable.lock);
+      return f;
+    }
+  }
+  release(&ftable.lock);
+  return 0;
+}
+
+// Increment ref count for file f.
+struct file*
+filedup(struct file *f)
+{
+  acquire(&ftable.lock);
+  if(f->ref < 1)
+    panic("filedup");
+  f->ref++;
+  release(&ftable.lock);
+  return f;
+}
+
+// Close file f.  (Decrement ref count, close when reaches 0.)
+void
+fileclose(struct file *f)
+{
+  struct file ff;
+
+  acquire(&ftable.lock);
+  if(f->ref < 1)
+    panic("fileclose");
+  if(--f->ref > 0){
+    release(&ftable.lock);
+    return;
+  }
+  ff = *f;
+  f->ref = 0;
+  f->type = FD_NONE;
+  release(&ftable.lock);
+
+  if(ff.type == FD_PIPE){
+    pipeclose(ff.pipe, ff.writable);
+  } else if(ff.type == FD_INODE || ff.type == FD_DEVICE){
+    begin_op();
+    iput(ff.ip);
+    end_op();
+  }
+}
+
+// Get metadata about file f.
+// addr is a user virtual address, pointing to a struct stat.
+int
+filestat(struct file *f, uint64 addr)
+{
+  struct proc *p = myproc();
+  struct stat st;
+  
+  if(f->type == FD_INODE || f->type == FD_DEVICE){
+    ilock(f->ip);
+    stati(f->ip, &st);
+    iunlock(f->ip);
+    if(copyout(p->pagetable, addr, (char *)&st, sizeof(st)) < 0)
+      return -1;
+    return 0;
+  }
+  return -1;
+}
+
+// Read from file f.
+// addr is a user virtual address.
+int
+fileread(struct file *f, uint64 addr, int n)
+{
+  int r = 0;
+
+  if(f->readable == 0)
+    return -1;
+
+  if(f->type == FD_PIPE){
+    r = piperead(f->pipe, addr, n);
+  } else if(f->type == FD_DEVICE){
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].read)
+      return -1;
+    r = devsw[f->major].read(1, addr, n);
+  } else if(f->type == FD_INODE){
+    ilock(f->ip);
+    if((r = readi(f->ip, 1, addr, f->off, n)) > 0)
+      f->off += r;
+    iunlock(f->ip);
+  } else {
+    panic("fileread");
+  }
+
+  return r;
+}
+
+// Write to file f.
+// addr is a user virtual address.
+int
+filewrite(struct file *f, uint64 addr, int n)
+{
+  int r, ret = 0;
+
+  if(f->writable == 0)
+    return -1;
+
+  if(f->type == FD_PIPE){
+    ret = pipewrite(f->pipe, addr, n);
+  } else if(f->type == FD_DEVICE){
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].write)
+      return -1;
+    ret = devsw[f->major].write(1, addr, n);
+  } else if(f->type == FD_INODE){
+    // write a few blocks at a time to avoid exceeding
+    // the maximum log transaction size, including
+    // i-node, indirect block, allocation blocks,
+    // and 2 blocks of slop for non-aligned writes.
+    // this really belongs lower down, since writei()
+    // might be writing a device like the console.
+    int max = ((MAXOPBLOCKS-1-1-2) / 2) * BSIZE;
+    int i = 0;
+    while(i < n){
+      int n1 = n - i;
+      if(n1 > max)
+        n1 = max;
+
+      begin_op();
+      ilock(f->ip);
+      if ((r = writei(f->ip, 1, addr + i, f->off, n1)) > 0)
+        f->off += r;
+      iunlock(f->ip);
+      end_op();
+
+      if(r != n1){
+        // error from writei
+        break;
+      }
+      i += r;
+    }
+    ret = (i == n ? n : -1);
+  } else {
+    panic("filewrite");
+  }
+
+  return ret;
+}
+
diff --git a/xv6-labs-2024/kernel/file.d b/xv6-labs-2024/kernel/file.d
new file mode 100644
index 0000000..235efb6
--- /dev/null
+++ b/xv6-labs-2024/kernel/file.d
@@ -0,0 +1,4 @@
+kernel/file.o: kernel/file.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/riscv.h kernel/defs.h kernel/param.h kernel/fs.h \
+ kernel/spinlock.h kernel/sleeplock.h kernel/file.h kernel/stat.h \
+ kernel/proc.h
diff --git a/xv6-labs-2024/kernel/file.h b/xv6-labs-2024/kernel/file.h
new file mode 100644
index 0000000..b076d1d
--- /dev/null
+++ b/xv6-labs-2024/kernel/file.h
@@ -0,0 +1,40 @@
+struct file {
+  enum { FD_NONE, FD_PIPE, FD_INODE, FD_DEVICE } type;
+  int ref; // reference count
+  char readable;
+  char writable;
+  struct pipe *pipe; // FD_PIPE
+  struct inode *ip;  // FD_INODE and FD_DEVICE
+  uint off;          // FD_INODE
+  short major;       // FD_DEVICE
+};
+
+#define major(dev)  ((dev) >> 16 & 0xFFFF)
+#define minor(dev)  ((dev) & 0xFFFF)
+#define	mkdev(m,n)  ((uint)((m)<<16| (n)))
+
+// in-memory copy of an inode
+struct inode {
+  uint dev;           // Device number
+  uint inum;          // Inode number
+  int ref;            // Reference count
+  struct sleeplock lock; // protects everything below here
+  int valid;          // inode has been read from disk?
+
+  short type;         // copy of disk inode
+  short major;
+  short minor;
+  short nlink;
+  uint size;
+  uint addrs[NDIRECT+1];
+};
+
+// map major device number to device functions.
+struct devsw {
+  int (*read)(int, uint64, int);
+  int (*write)(int, uint64, int);
+};
+
+extern struct devsw devsw[];
+
+#define CONSOLE 1
diff --git a/xv6-labs-2024/kernel/file.o b/xv6-labs-2024/kernel/file.o
new file mode 100644
index 0000000..da867bb
Binary files /dev/null and b/xv6-labs-2024/kernel/file.o differ
diff --git a/xv6-labs-2024/kernel/fs.c b/xv6-labs-2024/kernel/fs.c
new file mode 100644
index 0000000..c6bab15
--- /dev/null
+++ b/xv6-labs-2024/kernel/fs.c
@@ -0,0 +1,697 @@
+// File system implementation.  Five layers:
+//   + Blocks: allocator for raw disk blocks.
+//   + Log: crash recovery for multi-step updates.
+//   + Files: inode allocator, reading, writing, metadata.
+//   + Directories: inode with special contents (list of other inodes!)
+//   + Names: paths like /usr/rtm/xv6/fs.c for convenient naming.
+//
+// This file contains the low-level file system manipulation
+// routines.  The (higher-level) system call implementations
+// are in sysfile.c.
+
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "stat.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "sleeplock.h"
+#include "fs.h"
+#include "buf.h"
+#include "file.h"
+
+#define min(a, b) ((a) < (b) ? (a) : (b))
+// there should be one superblock per disk device, but we run with
+// only one device
+struct superblock sb; 
+
+// Read the super block.
+static void
+readsb(int dev, struct superblock *sb)
+{
+  struct buf *bp;
+
+  bp = bread(dev, 1);
+  memmove(sb, bp->data, sizeof(*sb));
+  brelse(bp);
+}
+
+// Init fs
+void
+fsinit(int dev) {
+  readsb(dev, &sb);
+  if(sb.magic != FSMAGIC)
+    panic("invalid file system");
+  initlog(dev, &sb);
+}
+
+// Zero a block.
+static void
+bzero(int dev, int bno)
+{
+  struct buf *bp;
+
+  bp = bread(dev, bno);
+  memset(bp->data, 0, BSIZE);
+  log_write(bp);
+  brelse(bp);
+}
+
+// Blocks.
+
+// Allocate a zeroed disk block.
+// returns 0 if out of disk space.
+static uint
+balloc(uint dev)
+{
+  int b, bi, m;
+  struct buf *bp;
+
+  bp = 0;
+  for(b = 0; b < sb.size; b += BPB){
+    bp = bread(dev, BBLOCK(b, sb));
+    for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
+      m = 1 << (bi % 8);
+      if((bp->data[bi/8] & m) == 0){  // Is block free?
+        bp->data[bi/8] |= m;  // Mark block in use.
+        log_write(bp);
+        brelse(bp);
+        bzero(dev, b + bi);
+        return b + bi;
+      }
+    }
+    brelse(bp);
+  }
+  printf("balloc: out of blocks\n");
+  return 0;
+}
+
+// Free a disk block.
+static void
+bfree(int dev, uint b)
+{
+  struct buf *bp;
+  int bi, m;
+
+  bp = bread(dev, BBLOCK(b, sb));
+  bi = b % BPB;
+  m = 1 << (bi % 8);
+  if((bp->data[bi/8] & m) == 0)
+    panic("freeing free block");
+  bp->data[bi/8] &= ~m;
+  log_write(bp);
+  brelse(bp);
+}
+
+// Inodes.
+//
+// An inode describes a single unnamed file.
+// The inode disk structure holds metadata: the file's type,
+// its size, the number of links referring to it, and the
+// list of blocks holding the file's content.
+//
+// The inodes are laid out sequentially on disk at block
+// sb.inodestart. Each inode has a number, indicating its
+// position on the disk.
+//
+// The kernel keeps a table of in-use inodes in memory
+// to provide a place for synchronizing access
+// to inodes used by multiple processes. The in-memory
+// inodes include book-keeping information that is
+// not stored on disk: ip->ref and ip->valid.
+//
+// An inode and its in-memory representation go through a
+// sequence of states before they can be used by the
+// rest of the file system code.
+//
+// * Allocation: an inode is allocated if its type (on disk)
+//   is non-zero. ialloc() allocates, and iput() frees if
+//   the reference and link counts have fallen to zero.
+//
+// * Referencing in table: an entry in the inode table
+//   is free if ip->ref is zero. Otherwise ip->ref tracks
+//   the number of in-memory pointers to the entry (open
+//   files and current directories). iget() finds or
+//   creates a table entry and increments its ref; iput()
+//   decrements ref.
+//
+// * Valid: the information (type, size, &c) in an inode
+//   table entry is only correct when ip->valid is 1.
+//   ilock() reads the inode from
+//   the disk and sets ip->valid, while iput() clears
+//   ip->valid if ip->ref has fallen to zero.
+//
+// * Locked: file system code may only examine and modify
+//   the information in an inode and its content if it
+//   has first locked the inode.
+//
+// Thus a typical sequence is:
+//   ip = iget(dev, inum)
+//   ilock(ip)
+//   ... examine and modify ip->xxx ...
+//   iunlock(ip)
+//   iput(ip)
+//
+// ilock() is separate from iget() so that system calls can
+// get a long-term reference to an inode (as for an open file)
+// and only lock it for short periods (e.g., in read()).
+// The separation also helps avoid deadlock and races during
+// pathname lookup. iget() increments ip->ref so that the inode
+// stays in the table and pointers to it remain valid.
+//
+// Many internal file system functions expect the caller to
+// have locked the inodes involved; this lets callers create
+// multi-step atomic operations.
+//
+// The itable.lock spin-lock protects the allocation of itable
+// entries. Since ip->ref indicates whether an entry is free,
+// and ip->dev and ip->inum indicate which i-node an entry
+// holds, one must hold itable.lock while using any of those fields.
+//
+// An ip->lock sleep-lock protects all ip-> fields other than ref,
+// dev, and inum.  One must hold ip->lock in order to
+// read or write that inode's ip->valid, ip->size, ip->type, &c.
+
+struct {
+  struct spinlock lock;
+  struct inode inode[NINODE];
+} itable;
+
+void
+iinit()
+{
+  int i = 0;
+  
+  initlock(&itable.lock, "itable");
+  for(i = 0; i < NINODE; i++) {
+    initsleeplock(&itable.inode[i].lock, "inode");
+  }
+}
+
+static struct inode* iget(uint dev, uint inum);
+
+// Allocate an inode on device dev.
+// Mark it as allocated by  giving it type type.
+// Returns an unlocked but allocated and referenced inode,
+// or NULL if there is no free inode.
+struct inode*
+ialloc(uint dev, short type)
+{
+  int inum;
+  struct buf *bp;
+  struct dinode *dip;
+
+  for(inum = 1; inum < sb.ninodes; inum++){
+    bp = bread(dev, IBLOCK(inum, sb));
+    dip = (struct dinode*)bp->data + inum%IPB;
+    if(dip->type == 0){  // a free inode
+      memset(dip, 0, sizeof(*dip));
+      dip->type = type;
+      log_write(bp);   // mark it allocated on the disk
+      brelse(bp);
+      return iget(dev, inum);
+    }
+    brelse(bp);
+  }
+  printf("ialloc: no inodes\n");
+  return 0;
+}
+
+// Copy a modified in-memory inode to disk.
+// Must be called after every change to an ip->xxx field
+// that lives on disk.
+// Caller must hold ip->lock.
+void
+iupdate(struct inode *ip)
+{
+  struct buf *bp;
+  struct dinode *dip;
+
+  bp = bread(ip->dev, IBLOCK(ip->inum, sb));
+  dip = (struct dinode*)bp->data + ip->inum%IPB;
+  dip->type = ip->type;
+  dip->major = ip->major;
+  dip->minor = ip->minor;
+  dip->nlink = ip->nlink;
+  dip->size = ip->size;
+  memmove(dip->addrs, ip->addrs, sizeof(ip->addrs));
+  log_write(bp);
+  brelse(bp);
+}
+
+// Find the inode with number inum on device dev
+// and return the in-memory copy. Does not lock
+// the inode and does not read it from disk.
+static struct inode*
+iget(uint dev, uint inum)
+{
+  struct inode *ip, *empty;
+
+  acquire(&itable.lock);
+
+  // Is the inode already in the table?
+  empty = 0;
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
+    if(ip->ref > 0 && ip->dev == dev && ip->inum == inum){
+      ip->ref++;
+      release(&itable.lock);
+      return ip;
+    }
+    if(empty == 0 && ip->ref == 0)    // Remember empty slot.
+      empty = ip;
+  }
+
+  // Recycle an inode entry.
+  if(empty == 0)
+    panic("iget: no inodes");
+
+  ip = empty;
+  ip->dev = dev;
+  ip->inum = inum;
+  ip->ref = 1;
+  ip->valid = 0;
+  release(&itable.lock);
+
+  return ip;
+}
+
+// Increment reference count for ip.
+// Returns ip to enable ip = idup(ip1) idiom.
+struct inode*
+idup(struct inode *ip)
+{
+  acquire(&itable.lock);
+  ip->ref++;
+  release(&itable.lock);
+  return ip;
+}
+
+// Lock the given inode.
+// Reads the inode from disk if necessary.
+void
+ilock(struct inode *ip)
+{
+  struct buf *bp;
+  struct dinode *dip;
+
+  if(ip == 0 || ip->ref < 1)
+    panic("ilock");
+
+  acquiresleep(&ip->lock);
+
+  if(ip->valid == 0){
+    bp = bread(ip->dev, IBLOCK(ip->inum, sb));
+    dip = (struct dinode*)bp->data + ip->inum%IPB;
+    ip->type = dip->type;
+    ip->major = dip->major;
+    ip->minor = dip->minor;
+    ip->nlink = dip->nlink;
+    ip->size = dip->size;
+    memmove(ip->addrs, dip->addrs, sizeof(ip->addrs));
+    brelse(bp);
+    ip->valid = 1;
+    if(ip->type == 0)
+      panic("ilock: no type");
+  }
+}
+
+// Unlock the given inode.
+void
+iunlock(struct inode *ip)
+{
+  if(ip == 0 || !holdingsleep(&ip->lock) || ip->ref < 1)
+    panic("iunlock");
+
+  releasesleep(&ip->lock);
+}
+
+// Drop a reference to an in-memory inode.
+// If that was the last reference, the inode table entry can
+// be recycled.
+// If that was the last reference and the inode has no links
+// to it, free the inode (and its content) on disk.
+// All calls to iput() must be inside a transaction in
+// case it has to free the inode.
+void
+iput(struct inode *ip)
+{
+  acquire(&itable.lock);
+
+  if(ip->ref == 1 && ip->valid && ip->nlink == 0){
+    // inode has no links and no other references: truncate and free.
+
+    // ip->ref == 1 means no other process can have ip locked,
+    // so this acquiresleep() won't block (or deadlock).
+    acquiresleep(&ip->lock);
+
+    release(&itable.lock);
+
+    itrunc(ip);
+    ip->type = 0;
+    iupdate(ip);
+    ip->valid = 0;
+
+    releasesleep(&ip->lock);
+
+    acquire(&itable.lock);
+  }
+
+  ip->ref--;
+  release(&itable.lock);
+}
+
+// Common idiom: unlock, then put.
+void
+iunlockput(struct inode *ip)
+{
+  iunlock(ip);
+  iput(ip);
+}
+
+// Inode content
+//
+// The content (data) associated with each inode is stored
+// in blocks on the disk. The first NDIRECT block numbers
+// are listed in ip->addrs[].  The next NINDIRECT blocks are
+// listed in block ip->addrs[NDIRECT].
+
+// Return the disk block address of the nth block in inode ip.
+// If there is no such block, bmap allocates one.
+// returns 0 if out of disk space.
+static uint
+bmap(struct inode *ip, uint bn)
+{
+  uint addr, *a;
+  struct buf *bp;
+
+  if(bn < NDIRECT){
+    if((addr = ip->addrs[bn]) == 0){
+      addr = balloc(ip->dev);
+      if(addr == 0)
+        return 0;
+      ip->addrs[bn] = addr;
+    }
+    return addr;
+  }
+  bn -= NDIRECT;
+
+  if(bn < NINDIRECT){
+    // Load indirect block, allocating if necessary.
+    if((addr = ip->addrs[NDIRECT]) == 0){
+      addr = balloc(ip->dev);
+      if(addr == 0)
+        return 0;
+      ip->addrs[NDIRECT] = addr;
+    }
+    bp = bread(ip->dev, addr);
+    a = (uint*)bp->data;
+    if((addr = a[bn]) == 0){
+      addr = balloc(ip->dev);
+      if(addr){
+        a[bn] = addr;
+        log_write(bp);
+      }
+    }
+    brelse(bp);
+    return addr;
+  }
+
+  panic("bmap: out of range");
+}
+
+// Truncate inode (discard contents).
+// Caller must hold ip->lock.
+void
+itrunc(struct inode *ip)
+{
+  int i, j;
+  struct buf *bp;
+  uint *a;
+
+  for(i = 0; i < NDIRECT; i++){
+    if(ip->addrs[i]){
+      bfree(ip->dev, ip->addrs[i]);
+      ip->addrs[i] = 0;
+    }
+  }
+
+  if(ip->addrs[NDIRECT]){
+    bp = bread(ip->dev, ip->addrs[NDIRECT]);
+    a = (uint*)bp->data;
+    for(j = 0; j < NINDIRECT; j++){
+      if(a[j])
+        bfree(ip->dev, a[j]);
+    }
+    brelse(bp);
+    bfree(ip->dev, ip->addrs[NDIRECT]);
+    ip->addrs[NDIRECT] = 0;
+  }
+
+  ip->size = 0;
+  iupdate(ip);
+}
+
+// Copy stat information from inode.
+// Caller must hold ip->lock.
+void
+stati(struct inode *ip, struct stat *st)
+{
+  st->dev = ip->dev;
+  st->ino = ip->inum;
+  st->type = ip->type;
+  st->nlink = ip->nlink;
+  st->size = ip->size;
+}
+
+// Read data from inode.
+// Caller must hold ip->lock.
+// If user_dst==1, then dst is a user virtual address;
+// otherwise, dst is a kernel address.
+int
+readi(struct inode *ip, int user_dst, uint64 dst, uint off, uint n)
+{
+  uint tot, m;
+  struct buf *bp;
+
+  if(off > ip->size || off + n < off)
+    return 0;
+  if(off + n > ip->size)
+    n = ip->size - off;
+
+  for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
+    uint addr = bmap(ip, off/BSIZE);
+    if(addr == 0)
+      break;
+    bp = bread(ip->dev, addr);
+    m = min(n - tot, BSIZE - off%BSIZE);
+    if(either_copyout(user_dst, dst, bp->data + (off % BSIZE), m) == -1) {
+      brelse(bp);
+      tot = -1;
+      break;
+    }
+    brelse(bp);
+  }
+  return tot;
+}
+
+// Write data to inode.
+// Caller must hold ip->lock.
+// If user_src==1, then src is a user virtual address;
+// otherwise, src is a kernel address.
+// Returns the number of bytes successfully written.
+// If the return value is less than the requested n,
+// there was an error of some kind.
+int
+writei(struct inode *ip, int user_src, uint64 src, uint off, uint n)
+{
+  uint tot, m;
+  struct buf *bp;
+
+  if(off > ip->size || off + n < off)
+    return -1;
+  if(off + n > MAXFILE*BSIZE)
+    return -1;
+
+  for(tot=0; tot<n; tot+=m, off+=m, src+=m){
+    uint addr = bmap(ip, off/BSIZE);
+    if(addr == 0)
+      break;
+    bp = bread(ip->dev, addr);
+    m = min(n - tot, BSIZE - off%BSIZE);
+    if(either_copyin(bp->data + (off % BSIZE), user_src, src, m) == -1) {
+      brelse(bp);
+      break;
+    }
+    log_write(bp);
+    brelse(bp);
+  }
+
+  if(off > ip->size)
+    ip->size = off;
+
+  // write the i-node back to disk even if the size didn't change
+  // because the loop above might have called bmap() and added a new
+  // block to ip->addrs[].
+  iupdate(ip);
+
+  return tot;
+}
+
+// Directories
+
+int
+namecmp(const char *s, const char *t)
+{
+  return strncmp(s, t, DIRSIZ);
+}
+
+// Look for a directory entry in a directory.
+// If found, set *poff to byte offset of entry.
+struct inode*
+dirlookup(struct inode *dp, char *name, uint *poff)
+{
+  uint off, inum;
+  struct dirent de;
+
+  if(dp->type != T_DIR)
+    panic("dirlookup not DIR");
+
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+      panic("dirlookup read");
+    if(de.inum == 0)
+      continue;
+    if(namecmp(name, de.name) == 0){
+      // entry matches path element
+      if(poff)
+        *poff = off;
+      inum = de.inum;
+      return iget(dp->dev, inum);
+    }
+  }
+
+  return 0;
+}
+
+// Write a new directory entry (name, inum) into the directory dp.
+// Returns 0 on success, -1 on failure (e.g. out of disk blocks).
+int
+dirlink(struct inode *dp, char *name, uint inum)
+{
+  int off;
+  struct dirent de;
+  struct inode *ip;
+
+  // Check that name is not present.
+  if((ip = dirlookup(dp, name, 0)) != 0){
+    iput(ip);
+    return -1;
+  }
+
+  // Look for an empty dirent.
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+      panic("dirlink read");
+    if(de.inum == 0)
+      break;
+  }
+
+  strncpy(de.name, name, DIRSIZ);
+  de.inum = inum;
+  if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+    return -1;
+
+  return 0;
+}
+
+// Paths
+
+// Copy the next path element from path into name.
+// Return a pointer to the element following the copied one.
+// The returned path has no leading slashes,
+// so the caller can check *path=='\0' to see if the name is the last one.
+// If no name to remove, return 0.
+//
+// Examples:
+//   skipelem("a/bb/c", name) = "bb/c", setting name = "a"
+//   skipelem("///a//bb", name) = "bb", setting name = "a"
+//   skipelem("a", name) = "", setting name = "a"
+//   skipelem("", name) = skipelem("////", name) = 0
+//
+static char*
+skipelem(char *path, char *name)
+{
+  char *s;
+  int len;
+
+  while(*path == '/')
+    path++;
+  if(*path == 0)
+    return 0;
+  s = path;
+  while(*path != '/' && *path != 0)
+    path++;
+  len = path - s;
+  if(len >= DIRSIZ)
+    memmove(name, s, DIRSIZ);
+  else {
+    memmove(name, s, len);
+    name[len] = 0;
+  }
+  while(*path == '/')
+    path++;
+  return path;
+}
+
+// Look up and return the inode for a path name.
+// If parent != 0, return the inode for the parent and copy the final
+// path element into name, which must have room for DIRSIZ bytes.
+// Must be called inside a transaction since it calls iput().
+static struct inode*
+namex(char *path, int nameiparent, char *name)
+{
+  struct inode *ip, *next;
+
+  if(*path == '/')
+    ip = iget(ROOTDEV, ROOTINO);
+  else
+    ip = idup(myproc()->cwd);
+
+  while((path = skipelem(path, name)) != 0){
+    ilock(ip);
+    if(ip->type != T_DIR){
+      iunlockput(ip);
+      return 0;
+    }
+    if(nameiparent && *path == '\0'){
+      // Stop one level early.
+      iunlock(ip);
+      return ip;
+    }
+    if((next = dirlookup(ip, name, 0)) == 0){
+      iunlockput(ip);
+      return 0;
+    }
+    iunlockput(ip);
+    ip = next;
+  }
+  if(nameiparent){
+    iput(ip);
+    return 0;
+  }
+  return ip;
+}
+
+struct inode*
+namei(char *path)
+{
+  char name[DIRSIZ];
+  return namex(path, 0, name);
+}
+
+struct inode*
+nameiparent(char *path, char *name)
+{
+  return namex(path, 1, name);
+}
diff --git a/xv6-labs-2024/kernel/fs.d b/xv6-labs-2024/kernel/fs.d
new file mode 100644
index 0000000..2024e28
--- /dev/null
+++ b/xv6-labs-2024/kernel/fs.d
@@ -0,0 +1,4 @@
+kernel/fs.o: kernel/fs.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/riscv.h kernel/defs.h kernel/param.h kernel/stat.h \
+ kernel/spinlock.h kernel/proc.h kernel/sleeplock.h kernel/fs.h \
+ kernel/buf.h kernel/file.h
diff --git a/xv6-labs-2024/kernel/fs.h b/xv6-labs-2024/kernel/fs.h
new file mode 100644
index 0000000..139dcc9
--- /dev/null
+++ b/xv6-labs-2024/kernel/fs.h
@@ -0,0 +1,60 @@
+// On-disk file system format.
+// Both the kernel and user programs use this header file.
+
+
+#define ROOTINO  1   // root i-number
+#define BSIZE 1024  // block size
+
+// Disk layout:
+// [ boot block | super block | log | inode blocks |
+//                                          free bit map | data blocks]
+//
+// mkfs computes the super block and builds an initial file system. The
+// super block describes the disk layout:
+struct superblock {
+  uint magic;        // Must be FSMAGIC
+  uint size;         // Size of file system image (blocks)
+  uint nblocks;      // Number of data blocks
+  uint ninodes;      // Number of inodes.
+  uint nlog;         // Number of log blocks
+  uint logstart;     // Block number of first log block
+  uint inodestart;   // Block number of first inode block
+  uint bmapstart;    // Block number of first free map block
+};
+
+#define FSMAGIC 0x10203040
+
+#define NDIRECT 12
+#define NINDIRECT (BSIZE / sizeof(uint))
+#define MAXFILE (NDIRECT + NINDIRECT)
+
+// On-disk inode structure
+struct dinode {
+  short type;           // File type
+  short major;          // Major device number (T_DEVICE only)
+  short minor;          // Minor device number (T_DEVICE only)
+  short nlink;          // Number of links to inode in file system
+  uint size;            // Size of file (bytes)
+  uint addrs[NDIRECT+1];   // Data block addresses
+};
+
+// Inodes per block.
+#define IPB           (BSIZE / sizeof(struct dinode))
+
+// Block containing inode i
+#define IBLOCK(i, sb)     ((i) / IPB + sb.inodestart)
+
+// Bitmap bits per block
+#define BPB           (BSIZE*8)
+
+// Block of free map containing bit for block b
+#define BBLOCK(b, sb) ((b)/BPB + sb.bmapstart)
+
+// Directory is a file containing a sequence of dirent structures.
+#define DIRSIZ 14
+
+struct dirent {
+  ushort inum;
+  char name[DIRSIZ];
+};
+
diff --git a/xv6-labs-2024/kernel/fs.o b/xv6-labs-2024/kernel/fs.o
new file mode 100644
index 0000000..7696cd8
Binary files /dev/null and b/xv6-labs-2024/kernel/fs.o differ
diff --git a/xv6-labs-2024/kernel/kalloc.c b/xv6-labs-2024/kernel/kalloc.c
new file mode 100644
index 0000000..0699e7e
--- /dev/null
+++ b/xv6-labs-2024/kernel/kalloc.c
@@ -0,0 +1,82 @@
+// Physical memory allocator, for user processes,
+// kernel stacks, page-table pages,
+// and pipe buffers. Allocates whole 4096-byte pages.
+
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "spinlock.h"
+#include "riscv.h"
+#include "defs.h"
+
+void freerange(void *pa_start, void *pa_end);
+
+extern char end[]; // first address after kernel.
+                   // defined by kernel.ld.
+
+struct run {
+  struct run *next;
+};
+
+struct {
+  struct spinlock lock;
+  struct run *freelist;
+} kmem;
+
+void
+kinit()
+{
+  initlock(&kmem.lock, "kmem");
+  freerange(end, (void*)PHYSTOP);
+}
+
+void
+freerange(void *pa_start, void *pa_end)
+{
+  char *p;
+  p = (char*)PGROUNDUP((uint64)pa_start);
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    kfree(p);
+}
+
+// Free the page of physical memory pointed at by pa,
+// which normally should have been returned by a
+// call to kalloc().  (The exception is when
+// initializing the allocator; see kinit above.)
+void
+kfree(void *pa)
+{
+  struct run *r;
+
+  if(((uint64)pa % PGSIZE) != 0 || (char*)pa < end || (uint64)pa >= PHYSTOP)
+    panic("kfree");
+
+  // Fill with junk to catch dangling refs.
+  memset(pa, 1, PGSIZE);
+
+  r = (struct run*)pa;
+
+  acquire(&kmem.lock);
+  r->next = kmem.freelist;
+  kmem.freelist = r;
+  release(&kmem.lock);
+}
+
+// Allocate one 4096-byte page of physical memory.
+// Returns a pointer that the kernel can use.
+// Returns 0 if the memory cannot be allocated.
+void *
+kalloc(void)
+{
+  struct run *r;
+
+  acquire(&kmem.lock);
+  r = kmem.freelist;
+  if(r)
+    kmem.freelist = r->next;
+  release(&kmem.lock);
+
+  if(r)
+    memset((char*)r, 5, PGSIZE); // fill with junk
+  return (void*)r;
+}
diff --git a/xv6-labs-2024/kernel/kalloc.d b/xv6-labs-2024/kernel/kalloc.d
new file mode 100644
index 0000000..8c27a1c
--- /dev/null
+++ b/xv6-labs-2024/kernel/kalloc.d
@@ -0,0 +1,4 @@
+kernel/kalloc.o: kernel/kalloc.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/param.h kernel/memlayout.h kernel/spinlock.h kernel/riscv.h \
+ kernel/defs.h
diff --git a/xv6-labs-2024/kernel/kalloc.o b/xv6-labs-2024/kernel/kalloc.o
new file mode 100644
index 0000000..7745528
Binary files /dev/null and b/xv6-labs-2024/kernel/kalloc.o differ
diff --git a/xv6-labs-2024/kernel/kernel b/xv6-labs-2024/kernel/kernel
new file mode 100755
index 0000000..debe2ff
Binary files /dev/null and b/xv6-labs-2024/kernel/kernel differ
diff --git a/xv6-labs-2024/kernel/kernel.asm b/xv6-labs-2024/kernel/kernel.asm
new file mode 100644
index 0000000..64058bd
--- /dev/null
+++ b/xv6-labs-2024/kernel/kernel.asm
@@ -0,0 +1,9860 @@
+
+kernel/kernel:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000080000000 <_entry>:
+    80000000:	0000a117          	auipc	sp,0xa
+    80000004:	1c013103          	ld	sp,448(sp) # 8000a1c0 <_GLOBAL_OFFSET_TABLE_+0x8>
+    80000008:	6505                	lui	a0,0x1
+    8000000a:	f14025f3          	csrr	a1,mhartid
+    8000000e:	0585                	addi	a1,a1,1
+    80000010:	02b50533          	mul	a0,a0,a1
+    80000014:	912a                	add	sp,sp,a0
+    80000016:	4a9040ef          	jal	80004cbe <start>
+
+000000008000001a <spin>:
+    8000001a:	a001                	j	8000001a <spin>
+
+000000008000001c <kfree>:
+// which normally should have been returned by a
+// call to kalloc().  (The exception is when
+// initializing the allocator; see kinit above.)
+void
+kfree(void *pa)
+{
+    8000001c:	1101                	addi	sp,sp,-32
+    8000001e:	ec06                	sd	ra,24(sp)
+    80000020:	e822                	sd	s0,16(sp)
+    80000022:	e426                	sd	s1,8(sp)
+    80000024:	e04a                	sd	s2,0(sp)
+    80000026:	1000                	addi	s0,sp,32
+  struct run *r;
+
+  if(((uint64)pa % PGSIZE) != 0 || (char*)pa < end || (uint64)pa >= PHYSTOP)
+    80000028:	03451793          	slli	a5,a0,0x34
+    8000002c:	e7a9                	bnez	a5,80000076 <kfree+0x5a>
+    8000002e:	84aa                	mv	s1,a0
+    80000030:	00023797          	auipc	a5,0x23
+    80000034:	51078793          	addi	a5,a5,1296 # 80023540 <end>
+    80000038:	02f56f63          	bltu	a0,a5,80000076 <kfree+0x5a>
+    8000003c:	47c5                	li	a5,17
+    8000003e:	07ee                	slli	a5,a5,0x1b
+    80000040:	02f57b63          	bgeu	a0,a5,80000076 <kfree+0x5a>
+    panic("kfree");
+
+  // Fill with junk to catch dangling refs.
+  memset(pa, 1, PGSIZE);
+    80000044:	6605                	lui	a2,0x1
+    80000046:	4585                	li	a1,1
+    80000048:	106000ef          	jal	8000014e <memset>
+
+  r = (struct run*)pa;
+
+  acquire(&kmem.lock);
+    8000004c:	0000a917          	auipc	s2,0xa
+    80000050:	1c490913          	addi	s2,s2,452 # 8000a210 <kmem>
+    80000054:	854a                	mv	a0,s2
+    80000056:	6ca050ef          	jal	80005720 <acquire>
+  r->next = kmem.freelist;
+    8000005a:	01893783          	ld	a5,24(s2)
+    8000005e:	e09c                	sd	a5,0(s1)
+  kmem.freelist = r;
+    80000060:	00993c23          	sd	s1,24(s2)
+  release(&kmem.lock);
+    80000064:	854a                	mv	a0,s2
+    80000066:	752050ef          	jal	800057b8 <release>
+}
+    8000006a:	60e2                	ld	ra,24(sp)
+    8000006c:	6442                	ld	s0,16(sp)
+    8000006e:	64a2                	ld	s1,8(sp)
+    80000070:	6902                	ld	s2,0(sp)
+    80000072:	6105                	addi	sp,sp,32
+    80000074:	8082                	ret
+    panic("kfree");
+    80000076:	00007517          	auipc	a0,0x7
+    8000007a:	f8a50513          	addi	a0,a0,-118 # 80007000 <etext>
+    8000007e:	374050ef          	jal	800053f2 <panic>
+
+0000000080000082 <freerange>:
+{
+    80000082:	7179                	addi	sp,sp,-48
+    80000084:	f406                	sd	ra,40(sp)
+    80000086:	f022                	sd	s0,32(sp)
+    80000088:	ec26                	sd	s1,24(sp)
+    8000008a:	1800                	addi	s0,sp,48
+  p = (char*)PGROUNDUP((uint64)pa_start);
+    8000008c:	6785                	lui	a5,0x1
+    8000008e:	fff78713          	addi	a4,a5,-1 # fff <_entry-0x7ffff001>
+    80000092:	00e504b3          	add	s1,a0,a4
+    80000096:	777d                	lui	a4,0xfffff
+    80000098:	8cf9                	and	s1,s1,a4
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    8000009a:	94be                	add	s1,s1,a5
+    8000009c:	0295e263          	bltu	a1,s1,800000c0 <freerange+0x3e>
+    800000a0:	e84a                	sd	s2,16(sp)
+    800000a2:	e44e                	sd	s3,8(sp)
+    800000a4:	e052                	sd	s4,0(sp)
+    800000a6:	892e                	mv	s2,a1
+    kfree(p);
+    800000a8:	7a7d                	lui	s4,0xfffff
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    800000aa:	6985                	lui	s3,0x1
+    kfree(p);
+    800000ac:	01448533          	add	a0,s1,s4
+    800000b0:	f6dff0ef          	jal	8000001c <kfree>
+  for(; p + PGSIZE <= (char*)pa_end; p += PGSIZE)
+    800000b4:	94ce                	add	s1,s1,s3
+    800000b6:	fe997be3          	bgeu	s2,s1,800000ac <freerange+0x2a>
+    800000ba:	6942                	ld	s2,16(sp)
+    800000bc:	69a2                	ld	s3,8(sp)
+    800000be:	6a02                	ld	s4,0(sp)
+}
+    800000c0:	70a2                	ld	ra,40(sp)
+    800000c2:	7402                	ld	s0,32(sp)
+    800000c4:	64e2                	ld	s1,24(sp)
+    800000c6:	6145                	addi	sp,sp,48
+    800000c8:	8082                	ret
+
+00000000800000ca <kinit>:
+{
+    800000ca:	1141                	addi	sp,sp,-16
+    800000cc:	e406                	sd	ra,8(sp)
+    800000ce:	e022                	sd	s0,0(sp)
+    800000d0:	0800                	addi	s0,sp,16
+  initlock(&kmem.lock, "kmem");
+    800000d2:	00007597          	auipc	a1,0x7
+    800000d6:	f3e58593          	addi	a1,a1,-194 # 80007010 <etext+0x10>
+    800000da:	0000a517          	auipc	a0,0xa
+    800000de:	13650513          	addi	a0,a0,310 # 8000a210 <kmem>
+    800000e2:	5be050ef          	jal	800056a0 <initlock>
+  freerange(end, (void*)PHYSTOP);
+    800000e6:	45c5                	li	a1,17
+    800000e8:	05ee                	slli	a1,a1,0x1b
+    800000ea:	00023517          	auipc	a0,0x23
+    800000ee:	45650513          	addi	a0,a0,1110 # 80023540 <end>
+    800000f2:	f91ff0ef          	jal	80000082 <freerange>
+}
+    800000f6:	60a2                	ld	ra,8(sp)
+    800000f8:	6402                	ld	s0,0(sp)
+    800000fa:	0141                	addi	sp,sp,16
+    800000fc:	8082                	ret
+
+00000000800000fe <kalloc>:
+// Allocate one 4096-byte page of physical memory.
+// Returns a pointer that the kernel can use.
+// Returns 0 if the memory cannot be allocated.
+void *
+kalloc(void)
+{
+    800000fe:	1101                	addi	sp,sp,-32
+    80000100:	ec06                	sd	ra,24(sp)
+    80000102:	e822                	sd	s0,16(sp)
+    80000104:	e426                	sd	s1,8(sp)
+    80000106:	1000                	addi	s0,sp,32
+  struct run *r;
+
+  acquire(&kmem.lock);
+    80000108:	0000a497          	auipc	s1,0xa
+    8000010c:	10848493          	addi	s1,s1,264 # 8000a210 <kmem>
+    80000110:	8526                	mv	a0,s1
+    80000112:	60e050ef          	jal	80005720 <acquire>
+  r = kmem.freelist;
+    80000116:	6c84                	ld	s1,24(s1)
+  if(r)
+    80000118:	c485                	beqz	s1,80000140 <kalloc+0x42>
+    kmem.freelist = r->next;
+    8000011a:	609c                	ld	a5,0(s1)
+    8000011c:	0000a517          	auipc	a0,0xa
+    80000120:	0f450513          	addi	a0,a0,244 # 8000a210 <kmem>
+    80000124:	ed1c                	sd	a5,24(a0)
+  release(&kmem.lock);
+    80000126:	692050ef          	jal	800057b8 <release>
+
+  if(r)
+    memset((char*)r, 5, PGSIZE); // fill with junk
+    8000012a:	6605                	lui	a2,0x1
+    8000012c:	4595                	li	a1,5
+    8000012e:	8526                	mv	a0,s1
+    80000130:	01e000ef          	jal	8000014e <memset>
+  return (void*)r;
+}
+    80000134:	8526                	mv	a0,s1
+    80000136:	60e2                	ld	ra,24(sp)
+    80000138:	6442                	ld	s0,16(sp)
+    8000013a:	64a2                	ld	s1,8(sp)
+    8000013c:	6105                	addi	sp,sp,32
+    8000013e:	8082                	ret
+  release(&kmem.lock);
+    80000140:	0000a517          	auipc	a0,0xa
+    80000144:	0d050513          	addi	a0,a0,208 # 8000a210 <kmem>
+    80000148:	670050ef          	jal	800057b8 <release>
+  if(r)
+    8000014c:	b7e5                	j	80000134 <kalloc+0x36>
+
+000000008000014e <memset>:
+    8000014e:	1141                	addi	sp,sp,-16
+    80000150:	e422                	sd	s0,8(sp)
+    80000152:	0800                	addi	s0,sp,16
+    80000154:	ca19                	beqz	a2,8000016a <memset+0x1c>
+    80000156:	87aa                	mv	a5,a0
+    80000158:	1602                	slli	a2,a2,0x20
+    8000015a:	9201                	srli	a2,a2,0x20
+    8000015c:	00a60733          	add	a4,a2,a0
+    80000160:	00b78023          	sb	a1,0(a5)
+    80000164:	0785                	addi	a5,a5,1
+    80000166:	fee79de3          	bne	a5,a4,80000160 <memset+0x12>
+    8000016a:	6422                	ld	s0,8(sp)
+    8000016c:	0141                	addi	sp,sp,16
+    8000016e:	8082                	ret
+
+0000000080000170 <memcmp>:
+    80000170:	1141                	addi	sp,sp,-16
+    80000172:	e422                	sd	s0,8(sp)
+    80000174:	0800                	addi	s0,sp,16
+    80000176:	ca05                	beqz	a2,800001a6 <memcmp+0x36>
+    80000178:	fff6069b          	addiw	a3,a2,-1 # fff <_entry-0x7ffff001>
+    8000017c:	1682                	slli	a3,a3,0x20
+    8000017e:	9281                	srli	a3,a3,0x20
+    80000180:	0685                	addi	a3,a3,1
+    80000182:	96aa                	add	a3,a3,a0
+    80000184:	00054783          	lbu	a5,0(a0)
+    80000188:	0005c703          	lbu	a4,0(a1)
+    8000018c:	00e79863          	bne	a5,a4,8000019c <memcmp+0x2c>
+    80000190:	0505                	addi	a0,a0,1
+    80000192:	0585                	addi	a1,a1,1
+    80000194:	fed518e3          	bne	a0,a3,80000184 <memcmp+0x14>
+    80000198:	4501                	li	a0,0
+    8000019a:	a019                	j	800001a0 <memcmp+0x30>
+    8000019c:	40e7853b          	subw	a0,a5,a4
+    800001a0:	6422                	ld	s0,8(sp)
+    800001a2:	0141                	addi	sp,sp,16
+    800001a4:	8082                	ret
+    800001a6:	4501                	li	a0,0
+    800001a8:	bfe5                	j	800001a0 <memcmp+0x30>
+
+00000000800001aa <memmove>:
+    800001aa:	1141                	addi	sp,sp,-16
+    800001ac:	e422                	sd	s0,8(sp)
+    800001ae:	0800                	addi	s0,sp,16
+    800001b0:	c205                	beqz	a2,800001d0 <memmove+0x26>
+    800001b2:	02a5e263          	bltu	a1,a0,800001d6 <memmove+0x2c>
+    800001b6:	1602                	slli	a2,a2,0x20
+    800001b8:	9201                	srli	a2,a2,0x20
+    800001ba:	00c587b3          	add	a5,a1,a2
+    800001be:	872a                	mv	a4,a0
+    800001c0:	0585                	addi	a1,a1,1
+    800001c2:	0705                	addi	a4,a4,1 # fffffffffffff001 <end+0xffffffff7ffdbac1>
+    800001c4:	fff5c683          	lbu	a3,-1(a1)
+    800001c8:	fed70fa3          	sb	a3,-1(a4)
+    800001cc:	feb79ae3          	bne	a5,a1,800001c0 <memmove+0x16>
+    800001d0:	6422                	ld	s0,8(sp)
+    800001d2:	0141                	addi	sp,sp,16
+    800001d4:	8082                	ret
+    800001d6:	02061693          	slli	a3,a2,0x20
+    800001da:	9281                	srli	a3,a3,0x20
+    800001dc:	00d58733          	add	a4,a1,a3
+    800001e0:	fce57be3          	bgeu	a0,a4,800001b6 <memmove+0xc>
+    800001e4:	96aa                	add	a3,a3,a0
+    800001e6:	fff6079b          	addiw	a5,a2,-1
+    800001ea:	1782                	slli	a5,a5,0x20
+    800001ec:	9381                	srli	a5,a5,0x20
+    800001ee:	fff7c793          	not	a5,a5
+    800001f2:	97ba                	add	a5,a5,a4
+    800001f4:	177d                	addi	a4,a4,-1
+    800001f6:	16fd                	addi	a3,a3,-1
+    800001f8:	00074603          	lbu	a2,0(a4)
+    800001fc:	00c68023          	sb	a2,0(a3)
+    80000200:	fef71ae3          	bne	a4,a5,800001f4 <memmove+0x4a>
+    80000204:	b7f1                	j	800001d0 <memmove+0x26>
+
+0000000080000206 <memcpy>:
+    80000206:	1141                	addi	sp,sp,-16
+    80000208:	e406                	sd	ra,8(sp)
+    8000020a:	e022                	sd	s0,0(sp)
+    8000020c:	0800                	addi	s0,sp,16
+    8000020e:	f9dff0ef          	jal	800001aa <memmove>
+    80000212:	60a2                	ld	ra,8(sp)
+    80000214:	6402                	ld	s0,0(sp)
+    80000216:	0141                	addi	sp,sp,16
+    80000218:	8082                	ret
+
+000000008000021a <strncmp>:
+    8000021a:	1141                	addi	sp,sp,-16
+    8000021c:	e422                	sd	s0,8(sp)
+    8000021e:	0800                	addi	s0,sp,16
+    80000220:	ce11                	beqz	a2,8000023c <strncmp+0x22>
+    80000222:	00054783          	lbu	a5,0(a0)
+    80000226:	cf89                	beqz	a5,80000240 <strncmp+0x26>
+    80000228:	0005c703          	lbu	a4,0(a1)
+    8000022c:	00f71a63          	bne	a4,a5,80000240 <strncmp+0x26>
+    80000230:	367d                	addiw	a2,a2,-1
+    80000232:	0505                	addi	a0,a0,1
+    80000234:	0585                	addi	a1,a1,1
+    80000236:	f675                	bnez	a2,80000222 <strncmp+0x8>
+    80000238:	4501                	li	a0,0
+    8000023a:	a801                	j	8000024a <strncmp+0x30>
+    8000023c:	4501                	li	a0,0
+    8000023e:	a031                	j	8000024a <strncmp+0x30>
+    80000240:	00054503          	lbu	a0,0(a0)
+    80000244:	0005c783          	lbu	a5,0(a1)
+    80000248:	9d1d                	subw	a0,a0,a5
+    8000024a:	6422                	ld	s0,8(sp)
+    8000024c:	0141                	addi	sp,sp,16
+    8000024e:	8082                	ret
+
+0000000080000250 <strncpy>:
+    80000250:	1141                	addi	sp,sp,-16
+    80000252:	e422                	sd	s0,8(sp)
+    80000254:	0800                	addi	s0,sp,16
+    80000256:	87aa                	mv	a5,a0
+    80000258:	86b2                	mv	a3,a2
+    8000025a:	367d                	addiw	a2,a2,-1
+    8000025c:	02d05563          	blez	a3,80000286 <strncpy+0x36>
+    80000260:	0785                	addi	a5,a5,1
+    80000262:	0005c703          	lbu	a4,0(a1)
+    80000266:	fee78fa3          	sb	a4,-1(a5)
+    8000026a:	0585                	addi	a1,a1,1
+    8000026c:	f775                	bnez	a4,80000258 <strncpy+0x8>
+    8000026e:	873e                	mv	a4,a5
+    80000270:	9fb5                	addw	a5,a5,a3
+    80000272:	37fd                	addiw	a5,a5,-1
+    80000274:	00c05963          	blez	a2,80000286 <strncpy+0x36>
+    80000278:	0705                	addi	a4,a4,1
+    8000027a:	fe070fa3          	sb	zero,-1(a4)
+    8000027e:	40e786bb          	subw	a3,a5,a4
+    80000282:	fed04be3          	bgtz	a3,80000278 <strncpy+0x28>
+    80000286:	6422                	ld	s0,8(sp)
+    80000288:	0141                	addi	sp,sp,16
+    8000028a:	8082                	ret
+
+000000008000028c <safestrcpy>:
+    8000028c:	1141                	addi	sp,sp,-16
+    8000028e:	e422                	sd	s0,8(sp)
+    80000290:	0800                	addi	s0,sp,16
+    80000292:	02c05363          	blez	a2,800002b8 <safestrcpy+0x2c>
+    80000296:	fff6069b          	addiw	a3,a2,-1
+    8000029a:	1682                	slli	a3,a3,0x20
+    8000029c:	9281                	srli	a3,a3,0x20
+    8000029e:	96ae                	add	a3,a3,a1
+    800002a0:	87aa                	mv	a5,a0
+    800002a2:	00d58963          	beq	a1,a3,800002b4 <safestrcpy+0x28>
+    800002a6:	0585                	addi	a1,a1,1
+    800002a8:	0785                	addi	a5,a5,1
+    800002aa:	fff5c703          	lbu	a4,-1(a1)
+    800002ae:	fee78fa3          	sb	a4,-1(a5)
+    800002b2:	fb65                	bnez	a4,800002a2 <safestrcpy+0x16>
+    800002b4:	00078023          	sb	zero,0(a5)
+    800002b8:	6422                	ld	s0,8(sp)
+    800002ba:	0141                	addi	sp,sp,16
+    800002bc:	8082                	ret
+
+00000000800002be <strlen>:
+    800002be:	1141                	addi	sp,sp,-16
+    800002c0:	e422                	sd	s0,8(sp)
+    800002c2:	0800                	addi	s0,sp,16
+    800002c4:	00054783          	lbu	a5,0(a0)
+    800002c8:	cf91                	beqz	a5,800002e4 <strlen+0x26>
+    800002ca:	0505                	addi	a0,a0,1
+    800002cc:	87aa                	mv	a5,a0
+    800002ce:	86be                	mv	a3,a5
+    800002d0:	0785                	addi	a5,a5,1
+    800002d2:	fff7c703          	lbu	a4,-1(a5)
+    800002d6:	ff65                	bnez	a4,800002ce <strlen+0x10>
+    800002d8:	40a6853b          	subw	a0,a3,a0
+    800002dc:	2505                	addiw	a0,a0,1
+    800002de:	6422                	ld	s0,8(sp)
+    800002e0:	0141                	addi	sp,sp,16
+    800002e2:	8082                	ret
+    800002e4:	4501                	li	a0,0
+    800002e6:	bfe5                	j	800002de <strlen+0x20>
+
+00000000800002e8 <main>:
+volatile static int started = 0;
+
+// start() jumps here in supervisor mode on all CPUs.
+void
+main()
+{
+    800002e8:	1141                	addi	sp,sp,-16
+    800002ea:	e406                	sd	ra,8(sp)
+    800002ec:	e022                	sd	s0,0(sp)
+    800002ee:	0800                	addi	s0,sp,16
+  if(cpuid() == 0){
+    800002f0:	24b000ef          	jal	80000d3a <cpuid>
+    virtio_disk_init(); // emulated hard disk
+    userinit();      // first user process
+    __sync_synchronize();
+    started = 1;
+  } else {
+    while(started == 0)
+    800002f4:	0000a717          	auipc	a4,0xa
+    800002f8:	eec70713          	addi	a4,a4,-276 # 8000a1e0 <started>
+  if(cpuid() == 0){
+    800002fc:	c51d                	beqz	a0,8000032a <main+0x42>
+    while(started == 0)
+    800002fe:	431c                	lw	a5,0(a4)
+    80000300:	2781                	sext.w	a5,a5
+    80000302:	dff5                	beqz	a5,800002fe <main+0x16>
+      ;
+    __sync_synchronize();
+    80000304:	0330000f          	fence	rw,rw
+    printf("hart %d starting\n", cpuid());
+    80000308:	233000ef          	jal	80000d3a <cpuid>
+    8000030c:	85aa                	mv	a1,a0
+    8000030e:	00007517          	auipc	a0,0x7
+    80000312:	d2a50513          	addi	a0,a0,-726 # 80007038 <etext+0x38>
+    80000316:	60b040ef          	jal	80005120 <printf>
+    kvminithart();    // turn on paging
+    8000031a:	080000ef          	jal	8000039a <kvminithart>
+    trapinithart();   // install kernel trap vector
+    8000031e:	538010ef          	jal	80001856 <trapinithart>
+    plicinithart();   // ask PLIC for device interrupts
+    80000322:	3b6040ef          	jal	800046d8 <plicinithart>
+  }
+
+  scheduler();        
+    80000326:	675000ef          	jal	8000119a <scheduler>
+    consoleinit();
+    8000032a:	521040ef          	jal	8000504a <consoleinit>
+    printfinit();
+    8000032e:	0fe050ef          	jal	8000542c <printfinit>
+    printf("\n");
+    80000332:	00007517          	auipc	a0,0x7
+    80000336:	ce650513          	addi	a0,a0,-794 # 80007018 <etext+0x18>
+    8000033a:	5e7040ef          	jal	80005120 <printf>
+    printf("xv6 kernel is booting\n");
+    8000033e:	00007517          	auipc	a0,0x7
+    80000342:	ce250513          	addi	a0,a0,-798 # 80007020 <etext+0x20>
+    80000346:	5db040ef          	jal	80005120 <printf>
+    printf("\n");
+    8000034a:	00007517          	auipc	a0,0x7
+    8000034e:	cce50513          	addi	a0,a0,-818 # 80007018 <etext+0x18>
+    80000352:	5cf040ef          	jal	80005120 <printf>
+    kinit();         // physical page allocator
+    80000356:	d75ff0ef          	jal	800000ca <kinit>
+    kvminit();       // create kernel page table
+    8000035a:	2ca000ef          	jal	80000624 <kvminit>
+    kvminithart();   // turn on paging
+    8000035e:	03c000ef          	jal	8000039a <kvminithart>
+    procinit();      // process table
+    80000362:	123000ef          	jal	80000c84 <procinit>
+    trapinit();      // trap vectors
+    80000366:	4cc010ef          	jal	80001832 <trapinit>
+    trapinithart();  // install kernel trap vector
+    8000036a:	4ec010ef          	jal	80001856 <trapinithart>
+    plicinit();      // set up interrupt controller
+    8000036e:	350040ef          	jal	800046be <plicinit>
+    plicinithart();  // ask PLIC for device interrupts
+    80000372:	366040ef          	jal	800046d8 <plicinithart>
+    binit();         // buffer cache
+    80000376:	313010ef          	jal	80001e88 <binit>
+    iinit();         // inode table
+    8000037a:	104020ef          	jal	8000247e <iinit>
+    fileinit();      // file table
+    8000037e:	6b1020ef          	jal	8000322e <fileinit>
+    virtio_disk_init(); // emulated hard disk
+    80000382:	446040ef          	jal	800047c8 <virtio_disk_init>
+    userinit();      // first user process
+    80000386:	449000ef          	jal	80000fce <userinit>
+    __sync_synchronize();
+    8000038a:	0330000f          	fence	rw,rw
+    started = 1;
+    8000038e:	4785                	li	a5,1
+    80000390:	0000a717          	auipc	a4,0xa
+    80000394:	e4f72823          	sw	a5,-432(a4) # 8000a1e0 <started>
+    80000398:	b779                	j	80000326 <main+0x3e>
+
+000000008000039a <kvminithart>:
+    8000039a:	1141                	addi	sp,sp,-16
+    8000039c:	e422                	sd	s0,8(sp)
+    8000039e:	0800                	addi	s0,sp,16
+    800003a0:	12000073          	sfence.vma
+    800003a4:	0000a797          	auipc	a5,0xa
+    800003a8:	e447b783          	ld	a5,-444(a5) # 8000a1e8 <kernel_pagetable>
+    800003ac:	83b1                	srli	a5,a5,0xc
+    800003ae:	577d                	li	a4,-1
+    800003b0:	177e                	slli	a4,a4,0x3f
+    800003b2:	8fd9                	or	a5,a5,a4
+    800003b4:	18079073          	csrw	satp,a5
+    800003b8:	12000073          	sfence.vma
+    800003bc:	6422                	ld	s0,8(sp)
+    800003be:	0141                	addi	sp,sp,16
+    800003c0:	8082                	ret
+
+00000000800003c2 <walk>:
+    800003c2:	7139                	addi	sp,sp,-64
+    800003c4:	fc06                	sd	ra,56(sp)
+    800003c6:	f822                	sd	s0,48(sp)
+    800003c8:	f426                	sd	s1,40(sp)
+    800003ca:	f04a                	sd	s2,32(sp)
+    800003cc:	ec4e                	sd	s3,24(sp)
+    800003ce:	e852                	sd	s4,16(sp)
+    800003d0:	e456                	sd	s5,8(sp)
+    800003d2:	e05a                	sd	s6,0(sp)
+    800003d4:	0080                	addi	s0,sp,64
+    800003d6:	84aa                	mv	s1,a0
+    800003d8:	89ae                	mv	s3,a1
+    800003da:	8ab2                	mv	s5,a2
+    800003dc:	57fd                	li	a5,-1
+    800003de:	83e9                	srli	a5,a5,0x1a
+    800003e0:	4a79                	li	s4,30
+    800003e2:	4b31                	li	s6,12
+    800003e4:	02b7fc63          	bgeu	a5,a1,8000041c <walk+0x5a>
+    800003e8:	00007517          	auipc	a0,0x7
+    800003ec:	c6850513          	addi	a0,a0,-920 # 80007050 <etext+0x50>
+    800003f0:	002050ef          	jal	800053f2 <panic>
+    800003f4:	060a8263          	beqz	s5,80000458 <walk+0x96>
+    800003f8:	d07ff0ef          	jal	800000fe <kalloc>
+    800003fc:	84aa                	mv	s1,a0
+    800003fe:	c139                	beqz	a0,80000444 <walk+0x82>
+    80000400:	6605                	lui	a2,0x1
+    80000402:	4581                	li	a1,0
+    80000404:	d4bff0ef          	jal	8000014e <memset>
+    80000408:	00c4d793          	srli	a5,s1,0xc
+    8000040c:	07aa                	slli	a5,a5,0xa
+    8000040e:	0017e793          	ori	a5,a5,1
+    80000412:	00f93023          	sd	a5,0(s2)
+    80000416:	3a5d                	addiw	s4,s4,-9 # ffffffffffffeff7 <end+0xffffffff7ffdbab7>
+    80000418:	036a0063          	beq	s4,s6,80000438 <walk+0x76>
+    8000041c:	0149d933          	srl	s2,s3,s4
+    80000420:	1ff97913          	andi	s2,s2,511
+    80000424:	090e                	slli	s2,s2,0x3
+    80000426:	9926                	add	s2,s2,s1
+    80000428:	00093483          	ld	s1,0(s2)
+    8000042c:	0014f793          	andi	a5,s1,1
+    80000430:	d3f1                	beqz	a5,800003f4 <walk+0x32>
+    80000432:	80a9                	srli	s1,s1,0xa
+    80000434:	04b2                	slli	s1,s1,0xc
+    80000436:	b7c5                	j	80000416 <walk+0x54>
+    80000438:	00c9d513          	srli	a0,s3,0xc
+    8000043c:	1ff57513          	andi	a0,a0,511
+    80000440:	050e                	slli	a0,a0,0x3
+    80000442:	9526                	add	a0,a0,s1
+    80000444:	70e2                	ld	ra,56(sp)
+    80000446:	7442                	ld	s0,48(sp)
+    80000448:	74a2                	ld	s1,40(sp)
+    8000044a:	7902                	ld	s2,32(sp)
+    8000044c:	69e2                	ld	s3,24(sp)
+    8000044e:	6a42                	ld	s4,16(sp)
+    80000450:	6aa2                	ld	s5,8(sp)
+    80000452:	6b02                	ld	s6,0(sp)
+    80000454:	6121                	addi	sp,sp,64
+    80000456:	8082                	ret
+    80000458:	4501                	li	a0,0
+    8000045a:	b7ed                	j	80000444 <walk+0x82>
+
+000000008000045c <walkaddr>:
+    8000045c:	57fd                	li	a5,-1
+    8000045e:	83e9                	srli	a5,a5,0x1a
+    80000460:	00b7f463          	bgeu	a5,a1,80000468 <walkaddr+0xc>
+    80000464:	4501                	li	a0,0
+    80000466:	8082                	ret
+    80000468:	1141                	addi	sp,sp,-16
+    8000046a:	e406                	sd	ra,8(sp)
+    8000046c:	e022                	sd	s0,0(sp)
+    8000046e:	0800                	addi	s0,sp,16
+    80000470:	4601                	li	a2,0
+    80000472:	f51ff0ef          	jal	800003c2 <walk>
+    80000476:	c105                	beqz	a0,80000496 <walkaddr+0x3a>
+    80000478:	611c                	ld	a5,0(a0)
+    8000047a:	0117f693          	andi	a3,a5,17
+    8000047e:	4745                	li	a4,17
+    80000480:	4501                	li	a0,0
+    80000482:	00e68663          	beq	a3,a4,8000048e <walkaddr+0x32>
+    80000486:	60a2                	ld	ra,8(sp)
+    80000488:	6402                	ld	s0,0(sp)
+    8000048a:	0141                	addi	sp,sp,16
+    8000048c:	8082                	ret
+    8000048e:	83a9                	srli	a5,a5,0xa
+    80000490:	00c79513          	slli	a0,a5,0xc
+    80000494:	bfcd                	j	80000486 <walkaddr+0x2a>
+    80000496:	4501                	li	a0,0
+    80000498:	b7fd                	j	80000486 <walkaddr+0x2a>
+
+000000008000049a <mappages>:
+    8000049a:	715d                	addi	sp,sp,-80
+    8000049c:	e486                	sd	ra,72(sp)
+    8000049e:	e0a2                	sd	s0,64(sp)
+    800004a0:	fc26                	sd	s1,56(sp)
+    800004a2:	f84a                	sd	s2,48(sp)
+    800004a4:	f44e                	sd	s3,40(sp)
+    800004a6:	f052                	sd	s4,32(sp)
+    800004a8:	ec56                	sd	s5,24(sp)
+    800004aa:	e85a                	sd	s6,16(sp)
+    800004ac:	e45e                	sd	s7,8(sp)
+    800004ae:	0880                	addi	s0,sp,80
+    800004b0:	03459793          	slli	a5,a1,0x34
+    800004b4:	e7a9                	bnez	a5,800004fe <mappages+0x64>
+    800004b6:	8aaa                	mv	s5,a0
+    800004b8:	8b3a                	mv	s6,a4
+    800004ba:	03461793          	slli	a5,a2,0x34
+    800004be:	e7b1                	bnez	a5,8000050a <mappages+0x70>
+    800004c0:	ca39                	beqz	a2,80000516 <mappages+0x7c>
+    800004c2:	77fd                	lui	a5,0xfffff
+    800004c4:	963e                	add	a2,a2,a5
+    800004c6:	00b609b3          	add	s3,a2,a1
+    800004ca:	892e                	mv	s2,a1
+    800004cc:	40b68a33          	sub	s4,a3,a1
+    800004d0:	6b85                	lui	s7,0x1
+    800004d2:	014904b3          	add	s1,s2,s4
+    800004d6:	4605                	li	a2,1
+    800004d8:	85ca                	mv	a1,s2
+    800004da:	8556                	mv	a0,s5
+    800004dc:	ee7ff0ef          	jal	800003c2 <walk>
+    800004e0:	c539                	beqz	a0,8000052e <mappages+0x94>
+    800004e2:	611c                	ld	a5,0(a0)
+    800004e4:	8b85                	andi	a5,a5,1
+    800004e6:	ef95                	bnez	a5,80000522 <mappages+0x88>
+    800004e8:	80b1                	srli	s1,s1,0xc
+    800004ea:	04aa                	slli	s1,s1,0xa
+    800004ec:	0164e4b3          	or	s1,s1,s6
+    800004f0:	0014e493          	ori	s1,s1,1
+    800004f4:	e104                	sd	s1,0(a0)
+    800004f6:	05390863          	beq	s2,s3,80000546 <mappages+0xac>
+    800004fa:	995e                	add	s2,s2,s7
+    800004fc:	bfd9                	j	800004d2 <mappages+0x38>
+    800004fe:	00007517          	auipc	a0,0x7
+    80000502:	b5a50513          	addi	a0,a0,-1190 # 80007058 <etext+0x58>
+    80000506:	6ed040ef          	jal	800053f2 <panic>
+    8000050a:	00007517          	auipc	a0,0x7
+    8000050e:	b6e50513          	addi	a0,a0,-1170 # 80007078 <etext+0x78>
+    80000512:	6e1040ef          	jal	800053f2 <panic>
+    80000516:	00007517          	auipc	a0,0x7
+    8000051a:	b8250513          	addi	a0,a0,-1150 # 80007098 <etext+0x98>
+    8000051e:	6d5040ef          	jal	800053f2 <panic>
+    80000522:	00007517          	auipc	a0,0x7
+    80000526:	b8650513          	addi	a0,a0,-1146 # 800070a8 <etext+0xa8>
+    8000052a:	6c9040ef          	jal	800053f2 <panic>
+    8000052e:	557d                	li	a0,-1
+    80000530:	60a6                	ld	ra,72(sp)
+    80000532:	6406                	ld	s0,64(sp)
+    80000534:	74e2                	ld	s1,56(sp)
+    80000536:	7942                	ld	s2,48(sp)
+    80000538:	79a2                	ld	s3,40(sp)
+    8000053a:	7a02                	ld	s4,32(sp)
+    8000053c:	6ae2                	ld	s5,24(sp)
+    8000053e:	6b42                	ld	s6,16(sp)
+    80000540:	6ba2                	ld	s7,8(sp)
+    80000542:	6161                	addi	sp,sp,80
+    80000544:	8082                	ret
+    80000546:	4501                	li	a0,0
+    80000548:	b7e5                	j	80000530 <mappages+0x96>
+
+000000008000054a <kvmmap>:
+    8000054a:	1141                	addi	sp,sp,-16
+    8000054c:	e406                	sd	ra,8(sp)
+    8000054e:	e022                	sd	s0,0(sp)
+    80000550:	0800                	addi	s0,sp,16
+    80000552:	87b6                	mv	a5,a3
+    80000554:	86b2                	mv	a3,a2
+    80000556:	863e                	mv	a2,a5
+    80000558:	f43ff0ef          	jal	8000049a <mappages>
+    8000055c:	e509                	bnez	a0,80000566 <kvmmap+0x1c>
+    8000055e:	60a2                	ld	ra,8(sp)
+    80000560:	6402                	ld	s0,0(sp)
+    80000562:	0141                	addi	sp,sp,16
+    80000564:	8082                	ret
+    80000566:	00007517          	auipc	a0,0x7
+    8000056a:	b5250513          	addi	a0,a0,-1198 # 800070b8 <etext+0xb8>
+    8000056e:	685040ef          	jal	800053f2 <panic>
+
+0000000080000572 <kvmmake>:
+    80000572:	1101                	addi	sp,sp,-32
+    80000574:	ec06                	sd	ra,24(sp)
+    80000576:	e822                	sd	s0,16(sp)
+    80000578:	e426                	sd	s1,8(sp)
+    8000057a:	e04a                	sd	s2,0(sp)
+    8000057c:	1000                	addi	s0,sp,32
+    8000057e:	b81ff0ef          	jal	800000fe <kalloc>
+    80000582:	84aa                	mv	s1,a0
+    80000584:	6605                	lui	a2,0x1
+    80000586:	4581                	li	a1,0
+    80000588:	bc7ff0ef          	jal	8000014e <memset>
+    8000058c:	4719                	li	a4,6
+    8000058e:	6685                	lui	a3,0x1
+    80000590:	10000637          	lui	a2,0x10000
+    80000594:	100005b7          	lui	a1,0x10000
+    80000598:	8526                	mv	a0,s1
+    8000059a:	fb1ff0ef          	jal	8000054a <kvmmap>
+    8000059e:	4719                	li	a4,6
+    800005a0:	6685                	lui	a3,0x1
+    800005a2:	10001637          	lui	a2,0x10001
+    800005a6:	100015b7          	lui	a1,0x10001
+    800005aa:	8526                	mv	a0,s1
+    800005ac:	f9fff0ef          	jal	8000054a <kvmmap>
+    800005b0:	4719                	li	a4,6
+    800005b2:	040006b7          	lui	a3,0x4000
+    800005b6:	0c000637          	lui	a2,0xc000
+    800005ba:	0c0005b7          	lui	a1,0xc000
+    800005be:	8526                	mv	a0,s1
+    800005c0:	f8bff0ef          	jal	8000054a <kvmmap>
+    800005c4:	00007917          	auipc	s2,0x7
+    800005c8:	a3c90913          	addi	s2,s2,-1476 # 80007000 <etext>
+    800005cc:	4729                	li	a4,10
+    800005ce:	80007697          	auipc	a3,0x80007
+    800005d2:	a3268693          	addi	a3,a3,-1486 # 7000 <_entry-0x7fff9000>
+    800005d6:	4605                	li	a2,1
+    800005d8:	067e                	slli	a2,a2,0x1f
+    800005da:	85b2                	mv	a1,a2
+    800005dc:	8526                	mv	a0,s1
+    800005de:	f6dff0ef          	jal	8000054a <kvmmap>
+    800005e2:	46c5                	li	a3,17
+    800005e4:	06ee                	slli	a3,a3,0x1b
+    800005e6:	4719                	li	a4,6
+    800005e8:	412686b3          	sub	a3,a3,s2
+    800005ec:	864a                	mv	a2,s2
+    800005ee:	85ca                	mv	a1,s2
+    800005f0:	8526                	mv	a0,s1
+    800005f2:	f59ff0ef          	jal	8000054a <kvmmap>
+    800005f6:	4729                	li	a4,10
+    800005f8:	6685                	lui	a3,0x1
+    800005fa:	00006617          	auipc	a2,0x6
+    800005fe:	a0660613          	addi	a2,a2,-1530 # 80006000 <_trampoline>
+    80000602:	040005b7          	lui	a1,0x4000
+    80000606:	15fd                	addi	a1,a1,-1 # 3ffffff <_entry-0x7c000001>
+    80000608:	05b2                	slli	a1,a1,0xc
+    8000060a:	8526                	mv	a0,s1
+    8000060c:	f3fff0ef          	jal	8000054a <kvmmap>
+    80000610:	8526                	mv	a0,s1
+    80000612:	5da000ef          	jal	80000bec <proc_mapstacks>
+    80000616:	8526                	mv	a0,s1
+    80000618:	60e2                	ld	ra,24(sp)
+    8000061a:	6442                	ld	s0,16(sp)
+    8000061c:	64a2                	ld	s1,8(sp)
+    8000061e:	6902                	ld	s2,0(sp)
+    80000620:	6105                	addi	sp,sp,32
+    80000622:	8082                	ret
+
+0000000080000624 <kvminit>:
+    80000624:	1141                	addi	sp,sp,-16
+    80000626:	e406                	sd	ra,8(sp)
+    80000628:	e022                	sd	s0,0(sp)
+    8000062a:	0800                	addi	s0,sp,16
+    8000062c:	f47ff0ef          	jal	80000572 <kvmmake>
+    80000630:	0000a797          	auipc	a5,0xa
+    80000634:	baa7bc23          	sd	a0,-1096(a5) # 8000a1e8 <kernel_pagetable>
+    80000638:	60a2                	ld	ra,8(sp)
+    8000063a:	6402                	ld	s0,0(sp)
+    8000063c:	0141                	addi	sp,sp,16
+    8000063e:	8082                	ret
+
+0000000080000640 <uvmunmap>:
+    80000640:	715d                	addi	sp,sp,-80
+    80000642:	e486                	sd	ra,72(sp)
+    80000644:	e0a2                	sd	s0,64(sp)
+    80000646:	0880                	addi	s0,sp,80
+    80000648:	03459793          	slli	a5,a1,0x34
+    8000064c:	e39d                	bnez	a5,80000672 <uvmunmap+0x32>
+    8000064e:	f84a                	sd	s2,48(sp)
+    80000650:	f44e                	sd	s3,40(sp)
+    80000652:	f052                	sd	s4,32(sp)
+    80000654:	ec56                	sd	s5,24(sp)
+    80000656:	e85a                	sd	s6,16(sp)
+    80000658:	e45e                	sd	s7,8(sp)
+    8000065a:	8a2a                	mv	s4,a0
+    8000065c:	892e                	mv	s2,a1
+    8000065e:	8ab6                	mv	s5,a3
+    80000660:	0632                	slli	a2,a2,0xc
+    80000662:	00b609b3          	add	s3,a2,a1
+    80000666:	4b85                	li	s7,1
+    80000668:	6b05                	lui	s6,0x1
+    8000066a:	0735ff63          	bgeu	a1,s3,800006e8 <uvmunmap+0xa8>
+    8000066e:	fc26                	sd	s1,56(sp)
+    80000670:	a0a9                	j	800006ba <uvmunmap+0x7a>
+    80000672:	fc26                	sd	s1,56(sp)
+    80000674:	f84a                	sd	s2,48(sp)
+    80000676:	f44e                	sd	s3,40(sp)
+    80000678:	f052                	sd	s4,32(sp)
+    8000067a:	ec56                	sd	s5,24(sp)
+    8000067c:	e85a                	sd	s6,16(sp)
+    8000067e:	e45e                	sd	s7,8(sp)
+    80000680:	00007517          	auipc	a0,0x7
+    80000684:	a4050513          	addi	a0,a0,-1472 # 800070c0 <etext+0xc0>
+    80000688:	56b040ef          	jal	800053f2 <panic>
+    8000068c:	00007517          	auipc	a0,0x7
+    80000690:	a4c50513          	addi	a0,a0,-1460 # 800070d8 <etext+0xd8>
+    80000694:	55f040ef          	jal	800053f2 <panic>
+    80000698:	00007517          	auipc	a0,0x7
+    8000069c:	a5050513          	addi	a0,a0,-1456 # 800070e8 <etext+0xe8>
+    800006a0:	553040ef          	jal	800053f2 <panic>
+    800006a4:	00007517          	auipc	a0,0x7
+    800006a8:	a5c50513          	addi	a0,a0,-1444 # 80007100 <etext+0x100>
+    800006ac:	547040ef          	jal	800053f2 <panic>
+    800006b0:	0004b023          	sd	zero,0(s1)
+    800006b4:	995a                	add	s2,s2,s6
+    800006b6:	03397863          	bgeu	s2,s3,800006e6 <uvmunmap+0xa6>
+    800006ba:	4601                	li	a2,0
+    800006bc:	85ca                	mv	a1,s2
+    800006be:	8552                	mv	a0,s4
+    800006c0:	d03ff0ef          	jal	800003c2 <walk>
+    800006c4:	84aa                	mv	s1,a0
+    800006c6:	d179                	beqz	a0,8000068c <uvmunmap+0x4c>
+    800006c8:	6108                	ld	a0,0(a0)
+    800006ca:	00157793          	andi	a5,a0,1
+    800006ce:	d7e9                	beqz	a5,80000698 <uvmunmap+0x58>
+    800006d0:	3ff57793          	andi	a5,a0,1023
+    800006d4:	fd7788e3          	beq	a5,s7,800006a4 <uvmunmap+0x64>
+    800006d8:	fc0a8ce3          	beqz	s5,800006b0 <uvmunmap+0x70>
+    800006dc:	8129                	srli	a0,a0,0xa
+    800006de:	0532                	slli	a0,a0,0xc
+    800006e0:	93dff0ef          	jal	8000001c <kfree>
+    800006e4:	b7f1                	j	800006b0 <uvmunmap+0x70>
+    800006e6:	74e2                	ld	s1,56(sp)
+    800006e8:	7942                	ld	s2,48(sp)
+    800006ea:	79a2                	ld	s3,40(sp)
+    800006ec:	7a02                	ld	s4,32(sp)
+    800006ee:	6ae2                	ld	s5,24(sp)
+    800006f0:	6b42                	ld	s6,16(sp)
+    800006f2:	6ba2                	ld	s7,8(sp)
+    800006f4:	60a6                	ld	ra,72(sp)
+    800006f6:	6406                	ld	s0,64(sp)
+    800006f8:	6161                	addi	sp,sp,80
+    800006fa:	8082                	ret
+
+00000000800006fc <uvmcreate>:
+    800006fc:	1101                	addi	sp,sp,-32
+    800006fe:	ec06                	sd	ra,24(sp)
+    80000700:	e822                	sd	s0,16(sp)
+    80000702:	e426                	sd	s1,8(sp)
+    80000704:	1000                	addi	s0,sp,32
+    80000706:	9f9ff0ef          	jal	800000fe <kalloc>
+    8000070a:	84aa                	mv	s1,a0
+    8000070c:	c509                	beqz	a0,80000716 <uvmcreate+0x1a>
+    8000070e:	6605                	lui	a2,0x1
+    80000710:	4581                	li	a1,0
+    80000712:	a3dff0ef          	jal	8000014e <memset>
+    80000716:	8526                	mv	a0,s1
+    80000718:	60e2                	ld	ra,24(sp)
+    8000071a:	6442                	ld	s0,16(sp)
+    8000071c:	64a2                	ld	s1,8(sp)
+    8000071e:	6105                	addi	sp,sp,32
+    80000720:	8082                	ret
+
+0000000080000722 <uvmfirst>:
+    80000722:	7179                	addi	sp,sp,-48
+    80000724:	f406                	sd	ra,40(sp)
+    80000726:	f022                	sd	s0,32(sp)
+    80000728:	ec26                	sd	s1,24(sp)
+    8000072a:	e84a                	sd	s2,16(sp)
+    8000072c:	e44e                	sd	s3,8(sp)
+    8000072e:	e052                	sd	s4,0(sp)
+    80000730:	1800                	addi	s0,sp,48
+    80000732:	6785                	lui	a5,0x1
+    80000734:	04f67063          	bgeu	a2,a5,80000774 <uvmfirst+0x52>
+    80000738:	8a2a                	mv	s4,a0
+    8000073a:	89ae                	mv	s3,a1
+    8000073c:	84b2                	mv	s1,a2
+    8000073e:	9c1ff0ef          	jal	800000fe <kalloc>
+    80000742:	892a                	mv	s2,a0
+    80000744:	6605                	lui	a2,0x1
+    80000746:	4581                	li	a1,0
+    80000748:	a07ff0ef          	jal	8000014e <memset>
+    8000074c:	4779                	li	a4,30
+    8000074e:	86ca                	mv	a3,s2
+    80000750:	6605                	lui	a2,0x1
+    80000752:	4581                	li	a1,0
+    80000754:	8552                	mv	a0,s4
+    80000756:	d45ff0ef          	jal	8000049a <mappages>
+    8000075a:	8626                	mv	a2,s1
+    8000075c:	85ce                	mv	a1,s3
+    8000075e:	854a                	mv	a0,s2
+    80000760:	a4bff0ef          	jal	800001aa <memmove>
+    80000764:	70a2                	ld	ra,40(sp)
+    80000766:	7402                	ld	s0,32(sp)
+    80000768:	64e2                	ld	s1,24(sp)
+    8000076a:	6942                	ld	s2,16(sp)
+    8000076c:	69a2                	ld	s3,8(sp)
+    8000076e:	6a02                	ld	s4,0(sp)
+    80000770:	6145                	addi	sp,sp,48
+    80000772:	8082                	ret
+    80000774:	00007517          	auipc	a0,0x7
+    80000778:	9a450513          	addi	a0,a0,-1628 # 80007118 <etext+0x118>
+    8000077c:	477040ef          	jal	800053f2 <panic>
+
+0000000080000780 <uvmdealloc>:
+    80000780:	1101                	addi	sp,sp,-32
+    80000782:	ec06                	sd	ra,24(sp)
+    80000784:	e822                	sd	s0,16(sp)
+    80000786:	e426                	sd	s1,8(sp)
+    80000788:	1000                	addi	s0,sp,32
+    8000078a:	84ae                	mv	s1,a1
+    8000078c:	00b67d63          	bgeu	a2,a1,800007a6 <uvmdealloc+0x26>
+    80000790:	84b2                	mv	s1,a2
+    80000792:	6785                	lui	a5,0x1
+    80000794:	17fd                	addi	a5,a5,-1 # fff <_entry-0x7ffff001>
+    80000796:	00f60733          	add	a4,a2,a5
+    8000079a:	76fd                	lui	a3,0xfffff
+    8000079c:	8f75                	and	a4,a4,a3
+    8000079e:	97ae                	add	a5,a5,a1
+    800007a0:	8ff5                	and	a5,a5,a3
+    800007a2:	00f76863          	bltu	a4,a5,800007b2 <uvmdealloc+0x32>
+    800007a6:	8526                	mv	a0,s1
+    800007a8:	60e2                	ld	ra,24(sp)
+    800007aa:	6442                	ld	s0,16(sp)
+    800007ac:	64a2                	ld	s1,8(sp)
+    800007ae:	6105                	addi	sp,sp,32
+    800007b0:	8082                	ret
+    800007b2:	8f99                	sub	a5,a5,a4
+    800007b4:	83b1                	srli	a5,a5,0xc
+    800007b6:	4685                	li	a3,1
+    800007b8:	0007861b          	sext.w	a2,a5
+    800007bc:	85ba                	mv	a1,a4
+    800007be:	e83ff0ef          	jal	80000640 <uvmunmap>
+    800007c2:	b7d5                	j	800007a6 <uvmdealloc+0x26>
+
+00000000800007c4 <uvmalloc>:
+    800007c4:	08b66f63          	bltu	a2,a1,80000862 <uvmalloc+0x9e>
+    800007c8:	7139                	addi	sp,sp,-64
+    800007ca:	fc06                	sd	ra,56(sp)
+    800007cc:	f822                	sd	s0,48(sp)
+    800007ce:	ec4e                	sd	s3,24(sp)
+    800007d0:	e852                	sd	s4,16(sp)
+    800007d2:	e456                	sd	s5,8(sp)
+    800007d4:	0080                	addi	s0,sp,64
+    800007d6:	8aaa                	mv	s5,a0
+    800007d8:	8a32                	mv	s4,a2
+    800007da:	6785                	lui	a5,0x1
+    800007dc:	17fd                	addi	a5,a5,-1 # fff <_entry-0x7ffff001>
+    800007de:	95be                	add	a1,a1,a5
+    800007e0:	77fd                	lui	a5,0xfffff
+    800007e2:	00f5f9b3          	and	s3,a1,a5
+    800007e6:	08c9f063          	bgeu	s3,a2,80000866 <uvmalloc+0xa2>
+    800007ea:	f426                	sd	s1,40(sp)
+    800007ec:	f04a                	sd	s2,32(sp)
+    800007ee:	e05a                	sd	s6,0(sp)
+    800007f0:	894e                	mv	s2,s3
+    800007f2:	0126eb13          	ori	s6,a3,18
+    800007f6:	909ff0ef          	jal	800000fe <kalloc>
+    800007fa:	84aa                	mv	s1,a0
+    800007fc:	c515                	beqz	a0,80000828 <uvmalloc+0x64>
+    800007fe:	6605                	lui	a2,0x1
+    80000800:	4581                	li	a1,0
+    80000802:	94dff0ef          	jal	8000014e <memset>
+    80000806:	875a                	mv	a4,s6
+    80000808:	86a6                	mv	a3,s1
+    8000080a:	6605                	lui	a2,0x1
+    8000080c:	85ca                	mv	a1,s2
+    8000080e:	8556                	mv	a0,s5
+    80000810:	c8bff0ef          	jal	8000049a <mappages>
+    80000814:	e915                	bnez	a0,80000848 <uvmalloc+0x84>
+    80000816:	6785                	lui	a5,0x1
+    80000818:	993e                	add	s2,s2,a5
+    8000081a:	fd496ee3          	bltu	s2,s4,800007f6 <uvmalloc+0x32>
+    8000081e:	8552                	mv	a0,s4
+    80000820:	74a2                	ld	s1,40(sp)
+    80000822:	7902                	ld	s2,32(sp)
+    80000824:	6b02                	ld	s6,0(sp)
+    80000826:	a811                	j	8000083a <uvmalloc+0x76>
+    80000828:	864e                	mv	a2,s3
+    8000082a:	85ca                	mv	a1,s2
+    8000082c:	8556                	mv	a0,s5
+    8000082e:	f53ff0ef          	jal	80000780 <uvmdealloc>
+    80000832:	4501                	li	a0,0
+    80000834:	74a2                	ld	s1,40(sp)
+    80000836:	7902                	ld	s2,32(sp)
+    80000838:	6b02                	ld	s6,0(sp)
+    8000083a:	70e2                	ld	ra,56(sp)
+    8000083c:	7442                	ld	s0,48(sp)
+    8000083e:	69e2                	ld	s3,24(sp)
+    80000840:	6a42                	ld	s4,16(sp)
+    80000842:	6aa2                	ld	s5,8(sp)
+    80000844:	6121                	addi	sp,sp,64
+    80000846:	8082                	ret
+    80000848:	8526                	mv	a0,s1
+    8000084a:	fd2ff0ef          	jal	8000001c <kfree>
+    8000084e:	864e                	mv	a2,s3
+    80000850:	85ca                	mv	a1,s2
+    80000852:	8556                	mv	a0,s5
+    80000854:	f2dff0ef          	jal	80000780 <uvmdealloc>
+    80000858:	4501                	li	a0,0
+    8000085a:	74a2                	ld	s1,40(sp)
+    8000085c:	7902                	ld	s2,32(sp)
+    8000085e:	6b02                	ld	s6,0(sp)
+    80000860:	bfe9                	j	8000083a <uvmalloc+0x76>
+    80000862:	852e                	mv	a0,a1
+    80000864:	8082                	ret
+    80000866:	8532                	mv	a0,a2
+    80000868:	bfc9                	j	8000083a <uvmalloc+0x76>
+
+000000008000086a <freewalk>:
+    8000086a:	7179                	addi	sp,sp,-48
+    8000086c:	f406                	sd	ra,40(sp)
+    8000086e:	f022                	sd	s0,32(sp)
+    80000870:	ec26                	sd	s1,24(sp)
+    80000872:	e84a                	sd	s2,16(sp)
+    80000874:	e44e                	sd	s3,8(sp)
+    80000876:	e052                	sd	s4,0(sp)
+    80000878:	1800                	addi	s0,sp,48
+    8000087a:	8a2a                	mv	s4,a0
+    8000087c:	84aa                	mv	s1,a0
+    8000087e:	6905                	lui	s2,0x1
+    80000880:	992a                	add	s2,s2,a0
+    80000882:	4985                	li	s3,1
+    80000884:	a819                	j	8000089a <freewalk+0x30>
+    80000886:	83a9                	srli	a5,a5,0xa
+    80000888:	00c79513          	slli	a0,a5,0xc
+    8000088c:	fdfff0ef          	jal	8000086a <freewalk>
+    80000890:	0004b023          	sd	zero,0(s1)
+    80000894:	04a1                	addi	s1,s1,8
+    80000896:	01248f63          	beq	s1,s2,800008b4 <freewalk+0x4a>
+    8000089a:	609c                	ld	a5,0(s1)
+    8000089c:	00f7f713          	andi	a4,a5,15
+    800008a0:	ff3703e3          	beq	a4,s3,80000886 <freewalk+0x1c>
+    800008a4:	8b85                	andi	a5,a5,1
+    800008a6:	d7fd                	beqz	a5,80000894 <freewalk+0x2a>
+    800008a8:	00007517          	auipc	a0,0x7
+    800008ac:	89050513          	addi	a0,a0,-1904 # 80007138 <etext+0x138>
+    800008b0:	343040ef          	jal	800053f2 <panic>
+    800008b4:	8552                	mv	a0,s4
+    800008b6:	f66ff0ef          	jal	8000001c <kfree>
+    800008ba:	70a2                	ld	ra,40(sp)
+    800008bc:	7402                	ld	s0,32(sp)
+    800008be:	64e2                	ld	s1,24(sp)
+    800008c0:	6942                	ld	s2,16(sp)
+    800008c2:	69a2                	ld	s3,8(sp)
+    800008c4:	6a02                	ld	s4,0(sp)
+    800008c6:	6145                	addi	sp,sp,48
+    800008c8:	8082                	ret
+
+00000000800008ca <uvmfree>:
+    800008ca:	1101                	addi	sp,sp,-32
+    800008cc:	ec06                	sd	ra,24(sp)
+    800008ce:	e822                	sd	s0,16(sp)
+    800008d0:	e426                	sd	s1,8(sp)
+    800008d2:	1000                	addi	s0,sp,32
+    800008d4:	84aa                	mv	s1,a0
+    800008d6:	e989                	bnez	a1,800008e8 <uvmfree+0x1e>
+    800008d8:	8526                	mv	a0,s1
+    800008da:	f91ff0ef          	jal	8000086a <freewalk>
+    800008de:	60e2                	ld	ra,24(sp)
+    800008e0:	6442                	ld	s0,16(sp)
+    800008e2:	64a2                	ld	s1,8(sp)
+    800008e4:	6105                	addi	sp,sp,32
+    800008e6:	8082                	ret
+    800008e8:	6785                	lui	a5,0x1
+    800008ea:	17fd                	addi	a5,a5,-1 # fff <_entry-0x7ffff001>
+    800008ec:	95be                	add	a1,a1,a5
+    800008ee:	4685                	li	a3,1
+    800008f0:	00c5d613          	srli	a2,a1,0xc
+    800008f4:	4581                	li	a1,0
+    800008f6:	d4bff0ef          	jal	80000640 <uvmunmap>
+    800008fa:	bff9                	j	800008d8 <uvmfree+0xe>
+
+00000000800008fc <uvmcopy>:
+    800008fc:	c65d                	beqz	a2,800009aa <uvmcopy+0xae>
+    800008fe:	715d                	addi	sp,sp,-80
+    80000900:	e486                	sd	ra,72(sp)
+    80000902:	e0a2                	sd	s0,64(sp)
+    80000904:	fc26                	sd	s1,56(sp)
+    80000906:	f84a                	sd	s2,48(sp)
+    80000908:	f44e                	sd	s3,40(sp)
+    8000090a:	f052                	sd	s4,32(sp)
+    8000090c:	ec56                	sd	s5,24(sp)
+    8000090e:	e85a                	sd	s6,16(sp)
+    80000910:	e45e                	sd	s7,8(sp)
+    80000912:	0880                	addi	s0,sp,80
+    80000914:	8b2a                	mv	s6,a0
+    80000916:	8aae                	mv	s5,a1
+    80000918:	8a32                	mv	s4,a2
+    8000091a:	4981                	li	s3,0
+    8000091c:	4601                	li	a2,0
+    8000091e:	85ce                	mv	a1,s3
+    80000920:	855a                	mv	a0,s6
+    80000922:	aa1ff0ef          	jal	800003c2 <walk>
+    80000926:	c121                	beqz	a0,80000966 <uvmcopy+0x6a>
+    80000928:	6118                	ld	a4,0(a0)
+    8000092a:	00177793          	andi	a5,a4,1
+    8000092e:	c3b1                	beqz	a5,80000972 <uvmcopy+0x76>
+    80000930:	00a75593          	srli	a1,a4,0xa
+    80000934:	00c59b93          	slli	s7,a1,0xc
+    80000938:	3ff77493          	andi	s1,a4,1023
+    8000093c:	fc2ff0ef          	jal	800000fe <kalloc>
+    80000940:	892a                	mv	s2,a0
+    80000942:	c129                	beqz	a0,80000984 <uvmcopy+0x88>
+    80000944:	6605                	lui	a2,0x1
+    80000946:	85de                	mv	a1,s7
+    80000948:	863ff0ef          	jal	800001aa <memmove>
+    8000094c:	8726                	mv	a4,s1
+    8000094e:	86ca                	mv	a3,s2
+    80000950:	6605                	lui	a2,0x1
+    80000952:	85ce                	mv	a1,s3
+    80000954:	8556                	mv	a0,s5
+    80000956:	b45ff0ef          	jal	8000049a <mappages>
+    8000095a:	e115                	bnez	a0,8000097e <uvmcopy+0x82>
+    8000095c:	6785                	lui	a5,0x1
+    8000095e:	99be                	add	s3,s3,a5
+    80000960:	fb49eee3          	bltu	s3,s4,8000091c <uvmcopy+0x20>
+    80000964:	a805                	j	80000994 <uvmcopy+0x98>
+    80000966:	00006517          	auipc	a0,0x6
+    8000096a:	7e250513          	addi	a0,a0,2018 # 80007148 <etext+0x148>
+    8000096e:	285040ef          	jal	800053f2 <panic>
+    80000972:	00006517          	auipc	a0,0x6
+    80000976:	7f650513          	addi	a0,a0,2038 # 80007168 <etext+0x168>
+    8000097a:	279040ef          	jal	800053f2 <panic>
+    8000097e:	854a                	mv	a0,s2
+    80000980:	e9cff0ef          	jal	8000001c <kfree>
+    80000984:	4685                	li	a3,1
+    80000986:	00c9d613          	srli	a2,s3,0xc
+    8000098a:	4581                	li	a1,0
+    8000098c:	8556                	mv	a0,s5
+    8000098e:	cb3ff0ef          	jal	80000640 <uvmunmap>
+    80000992:	557d                	li	a0,-1
+    80000994:	60a6                	ld	ra,72(sp)
+    80000996:	6406                	ld	s0,64(sp)
+    80000998:	74e2                	ld	s1,56(sp)
+    8000099a:	7942                	ld	s2,48(sp)
+    8000099c:	79a2                	ld	s3,40(sp)
+    8000099e:	7a02                	ld	s4,32(sp)
+    800009a0:	6ae2                	ld	s5,24(sp)
+    800009a2:	6b42                	ld	s6,16(sp)
+    800009a4:	6ba2                	ld	s7,8(sp)
+    800009a6:	6161                	addi	sp,sp,80
+    800009a8:	8082                	ret
+    800009aa:	4501                	li	a0,0
+    800009ac:	8082                	ret
+
+00000000800009ae <uvmclear>:
+    800009ae:	1141                	addi	sp,sp,-16
+    800009b0:	e406                	sd	ra,8(sp)
+    800009b2:	e022                	sd	s0,0(sp)
+    800009b4:	0800                	addi	s0,sp,16
+    800009b6:	4601                	li	a2,0
+    800009b8:	a0bff0ef          	jal	800003c2 <walk>
+    800009bc:	c901                	beqz	a0,800009cc <uvmclear+0x1e>
+    800009be:	611c                	ld	a5,0(a0)
+    800009c0:	9bbd                	andi	a5,a5,-17
+    800009c2:	e11c                	sd	a5,0(a0)
+    800009c4:	60a2                	ld	ra,8(sp)
+    800009c6:	6402                	ld	s0,0(sp)
+    800009c8:	0141                	addi	sp,sp,16
+    800009ca:	8082                	ret
+    800009cc:	00006517          	auipc	a0,0x6
+    800009d0:	7bc50513          	addi	a0,a0,1980 # 80007188 <etext+0x188>
+    800009d4:	21f040ef          	jal	800053f2 <panic>
+
+00000000800009d8 <copyout>:
+    800009d8:	cad1                	beqz	a3,80000a6c <copyout+0x94>
+    800009da:	711d                	addi	sp,sp,-96
+    800009dc:	ec86                	sd	ra,88(sp)
+    800009de:	e8a2                	sd	s0,80(sp)
+    800009e0:	e4a6                	sd	s1,72(sp)
+    800009e2:	fc4e                	sd	s3,56(sp)
+    800009e4:	f456                	sd	s5,40(sp)
+    800009e6:	f05a                	sd	s6,32(sp)
+    800009e8:	ec5e                	sd	s7,24(sp)
+    800009ea:	1080                	addi	s0,sp,96
+    800009ec:	8baa                	mv	s7,a0
+    800009ee:	8aae                	mv	s5,a1
+    800009f0:	8b32                	mv	s6,a2
+    800009f2:	89b6                	mv	s3,a3
+    800009f4:	74fd                	lui	s1,0xfffff
+    800009f6:	8ced                	and	s1,s1,a1
+    800009f8:	57fd                	li	a5,-1
+    800009fa:	83e9                	srli	a5,a5,0x1a
+    800009fc:	0697ea63          	bltu	a5,s1,80000a70 <copyout+0x98>
+    80000a00:	e0ca                	sd	s2,64(sp)
+    80000a02:	f852                	sd	s4,48(sp)
+    80000a04:	e862                	sd	s8,16(sp)
+    80000a06:	e466                	sd	s9,8(sp)
+    80000a08:	e06a                	sd	s10,0(sp)
+    80000a0a:	4cd5                	li	s9,21
+    80000a0c:	6d05                	lui	s10,0x1
+    80000a0e:	8c3e                	mv	s8,a5
+    80000a10:	a025                	j	80000a38 <copyout+0x60>
+    80000a12:	83a9                	srli	a5,a5,0xa
+    80000a14:	07b2                	slli	a5,a5,0xc
+    80000a16:	409a8533          	sub	a0,s5,s1
+    80000a1a:	0009061b          	sext.w	a2,s2
+    80000a1e:	85da                	mv	a1,s6
+    80000a20:	953e                	add	a0,a0,a5
+    80000a22:	f88ff0ef          	jal	800001aa <memmove>
+    80000a26:	412989b3          	sub	s3,s3,s2
+    80000a2a:	9b4a                	add	s6,s6,s2
+    80000a2c:	02098963          	beqz	s3,80000a5e <copyout+0x86>
+    80000a30:	054c6263          	bltu	s8,s4,80000a74 <copyout+0x9c>
+    80000a34:	84d2                	mv	s1,s4
+    80000a36:	8ad2                	mv	s5,s4
+    80000a38:	4601                	li	a2,0
+    80000a3a:	85a6                	mv	a1,s1
+    80000a3c:	855e                	mv	a0,s7
+    80000a3e:	985ff0ef          	jal	800003c2 <walk>
+    80000a42:	c121                	beqz	a0,80000a82 <copyout+0xaa>
+    80000a44:	611c                	ld	a5,0(a0)
+    80000a46:	0157f713          	andi	a4,a5,21
+    80000a4a:	05971b63          	bne	a4,s9,80000aa0 <copyout+0xc8>
+    80000a4e:	01a48a33          	add	s4,s1,s10
+    80000a52:	415a0933          	sub	s2,s4,s5
+    80000a56:	fb29fee3          	bgeu	s3,s2,80000a12 <copyout+0x3a>
+    80000a5a:	894e                	mv	s2,s3
+    80000a5c:	bf5d                	j	80000a12 <copyout+0x3a>
+    80000a5e:	4501                	li	a0,0
+    80000a60:	6906                	ld	s2,64(sp)
+    80000a62:	7a42                	ld	s4,48(sp)
+    80000a64:	6c42                	ld	s8,16(sp)
+    80000a66:	6ca2                	ld	s9,8(sp)
+    80000a68:	6d02                	ld	s10,0(sp)
+    80000a6a:	a015                	j	80000a8e <copyout+0xb6>
+    80000a6c:	4501                	li	a0,0
+    80000a6e:	8082                	ret
+    80000a70:	557d                	li	a0,-1
+    80000a72:	a831                	j	80000a8e <copyout+0xb6>
+    80000a74:	557d                	li	a0,-1
+    80000a76:	6906                	ld	s2,64(sp)
+    80000a78:	7a42                	ld	s4,48(sp)
+    80000a7a:	6c42                	ld	s8,16(sp)
+    80000a7c:	6ca2                	ld	s9,8(sp)
+    80000a7e:	6d02                	ld	s10,0(sp)
+    80000a80:	a039                	j	80000a8e <copyout+0xb6>
+    80000a82:	557d                	li	a0,-1
+    80000a84:	6906                	ld	s2,64(sp)
+    80000a86:	7a42                	ld	s4,48(sp)
+    80000a88:	6c42                	ld	s8,16(sp)
+    80000a8a:	6ca2                	ld	s9,8(sp)
+    80000a8c:	6d02                	ld	s10,0(sp)
+    80000a8e:	60e6                	ld	ra,88(sp)
+    80000a90:	6446                	ld	s0,80(sp)
+    80000a92:	64a6                	ld	s1,72(sp)
+    80000a94:	79e2                	ld	s3,56(sp)
+    80000a96:	7aa2                	ld	s5,40(sp)
+    80000a98:	7b02                	ld	s6,32(sp)
+    80000a9a:	6be2                	ld	s7,24(sp)
+    80000a9c:	6125                	addi	sp,sp,96
+    80000a9e:	8082                	ret
+    80000aa0:	557d                	li	a0,-1
+    80000aa2:	6906                	ld	s2,64(sp)
+    80000aa4:	7a42                	ld	s4,48(sp)
+    80000aa6:	6c42                	ld	s8,16(sp)
+    80000aa8:	6ca2                	ld	s9,8(sp)
+    80000aaa:	6d02                	ld	s10,0(sp)
+    80000aac:	b7cd                	j	80000a8e <copyout+0xb6>
+
+0000000080000aae <copyin>:
+    80000aae:	c6a5                	beqz	a3,80000b16 <copyin+0x68>
+    80000ab0:	715d                	addi	sp,sp,-80
+    80000ab2:	e486                	sd	ra,72(sp)
+    80000ab4:	e0a2                	sd	s0,64(sp)
+    80000ab6:	fc26                	sd	s1,56(sp)
+    80000ab8:	f84a                	sd	s2,48(sp)
+    80000aba:	f44e                	sd	s3,40(sp)
+    80000abc:	f052                	sd	s4,32(sp)
+    80000abe:	ec56                	sd	s5,24(sp)
+    80000ac0:	e85a                	sd	s6,16(sp)
+    80000ac2:	e45e                	sd	s7,8(sp)
+    80000ac4:	e062                	sd	s8,0(sp)
+    80000ac6:	0880                	addi	s0,sp,80
+    80000ac8:	8b2a                	mv	s6,a0
+    80000aca:	8a2e                	mv	s4,a1
+    80000acc:	8c32                	mv	s8,a2
+    80000ace:	89b6                	mv	s3,a3
+    80000ad0:	7bfd                	lui	s7,0xfffff
+    80000ad2:	6a85                	lui	s5,0x1
+    80000ad4:	a00d                	j	80000af6 <copyin+0x48>
+    80000ad6:	018505b3          	add	a1,a0,s8
+    80000ada:	0004861b          	sext.w	a2,s1
+    80000ade:	412585b3          	sub	a1,a1,s2
+    80000ae2:	8552                	mv	a0,s4
+    80000ae4:	ec6ff0ef          	jal	800001aa <memmove>
+    80000ae8:	409989b3          	sub	s3,s3,s1
+    80000aec:	9a26                	add	s4,s4,s1
+    80000aee:	01590c33          	add	s8,s2,s5
+    80000af2:	02098063          	beqz	s3,80000b12 <copyin+0x64>
+    80000af6:	017c7933          	and	s2,s8,s7
+    80000afa:	85ca                	mv	a1,s2
+    80000afc:	855a                	mv	a0,s6
+    80000afe:	95fff0ef          	jal	8000045c <walkaddr>
+    80000b02:	cd01                	beqz	a0,80000b1a <copyin+0x6c>
+    80000b04:	418904b3          	sub	s1,s2,s8
+    80000b08:	94d6                	add	s1,s1,s5
+    80000b0a:	fc99f6e3          	bgeu	s3,s1,80000ad6 <copyin+0x28>
+    80000b0e:	84ce                	mv	s1,s3
+    80000b10:	b7d9                	j	80000ad6 <copyin+0x28>
+    80000b12:	4501                	li	a0,0
+    80000b14:	a021                	j	80000b1c <copyin+0x6e>
+    80000b16:	4501                	li	a0,0
+    80000b18:	8082                	ret
+    80000b1a:	557d                	li	a0,-1
+    80000b1c:	60a6                	ld	ra,72(sp)
+    80000b1e:	6406                	ld	s0,64(sp)
+    80000b20:	74e2                	ld	s1,56(sp)
+    80000b22:	7942                	ld	s2,48(sp)
+    80000b24:	79a2                	ld	s3,40(sp)
+    80000b26:	7a02                	ld	s4,32(sp)
+    80000b28:	6ae2                	ld	s5,24(sp)
+    80000b2a:	6b42                	ld	s6,16(sp)
+    80000b2c:	6ba2                	ld	s7,8(sp)
+    80000b2e:	6c02                	ld	s8,0(sp)
+    80000b30:	6161                	addi	sp,sp,80
+    80000b32:	8082                	ret
+
+0000000080000b34 <copyinstr>:
+    80000b34:	c6dd                	beqz	a3,80000be2 <copyinstr+0xae>
+    80000b36:	715d                	addi	sp,sp,-80
+    80000b38:	e486                	sd	ra,72(sp)
+    80000b3a:	e0a2                	sd	s0,64(sp)
+    80000b3c:	fc26                	sd	s1,56(sp)
+    80000b3e:	f84a                	sd	s2,48(sp)
+    80000b40:	f44e                	sd	s3,40(sp)
+    80000b42:	f052                	sd	s4,32(sp)
+    80000b44:	ec56                	sd	s5,24(sp)
+    80000b46:	e85a                	sd	s6,16(sp)
+    80000b48:	e45e                	sd	s7,8(sp)
+    80000b4a:	0880                	addi	s0,sp,80
+    80000b4c:	8a2a                	mv	s4,a0
+    80000b4e:	8b2e                	mv	s6,a1
+    80000b50:	8bb2                	mv	s7,a2
+    80000b52:	8936                	mv	s2,a3
+    80000b54:	7afd                	lui	s5,0xfffff
+    80000b56:	6985                	lui	s3,0x1
+    80000b58:	a825                	j	80000b90 <copyinstr+0x5c>
+    80000b5a:	00078023          	sb	zero,0(a5) # 1000 <_entry-0x7ffff000>
+    80000b5e:	4785                	li	a5,1
+    80000b60:	37fd                	addiw	a5,a5,-1
+    80000b62:	0007851b          	sext.w	a0,a5
+    80000b66:	60a6                	ld	ra,72(sp)
+    80000b68:	6406                	ld	s0,64(sp)
+    80000b6a:	74e2                	ld	s1,56(sp)
+    80000b6c:	7942                	ld	s2,48(sp)
+    80000b6e:	79a2                	ld	s3,40(sp)
+    80000b70:	7a02                	ld	s4,32(sp)
+    80000b72:	6ae2                	ld	s5,24(sp)
+    80000b74:	6b42                	ld	s6,16(sp)
+    80000b76:	6ba2                	ld	s7,8(sp)
+    80000b78:	6161                	addi	sp,sp,80
+    80000b7a:	8082                	ret
+    80000b7c:	fff90713          	addi	a4,s2,-1 # fff <_entry-0x7ffff001>
+    80000b80:	9742                	add	a4,a4,a6
+    80000b82:	40b70933          	sub	s2,a4,a1
+    80000b86:	01348bb3          	add	s7,s1,s3
+    80000b8a:	04e58463          	beq	a1,a4,80000bd2 <copyinstr+0x9e>
+    80000b8e:	8b3e                	mv	s6,a5
+    80000b90:	015bf4b3          	and	s1,s7,s5
+    80000b94:	85a6                	mv	a1,s1
+    80000b96:	8552                	mv	a0,s4
+    80000b98:	8c5ff0ef          	jal	8000045c <walkaddr>
+    80000b9c:	cd0d                	beqz	a0,80000bd6 <copyinstr+0xa2>
+    80000b9e:	417486b3          	sub	a3,s1,s7
+    80000ba2:	96ce                	add	a3,a3,s3
+    80000ba4:	00d97363          	bgeu	s2,a3,80000baa <copyinstr+0x76>
+    80000ba8:	86ca                	mv	a3,s2
+    80000baa:	955e                	add	a0,a0,s7
+    80000bac:	8d05                	sub	a0,a0,s1
+    80000bae:	c695                	beqz	a3,80000bda <copyinstr+0xa6>
+    80000bb0:	87da                	mv	a5,s6
+    80000bb2:	885a                	mv	a6,s6
+    80000bb4:	41650633          	sub	a2,a0,s6
+    80000bb8:	96da                	add	a3,a3,s6
+    80000bba:	85be                	mv	a1,a5
+    80000bbc:	00f60733          	add	a4,a2,a5
+    80000bc0:	00074703          	lbu	a4,0(a4)
+    80000bc4:	db59                	beqz	a4,80000b5a <copyinstr+0x26>
+    80000bc6:	00e78023          	sb	a4,0(a5)
+    80000bca:	0785                	addi	a5,a5,1
+    80000bcc:	fed797e3          	bne	a5,a3,80000bba <copyinstr+0x86>
+    80000bd0:	b775                	j	80000b7c <copyinstr+0x48>
+    80000bd2:	4781                	li	a5,0
+    80000bd4:	b771                	j	80000b60 <copyinstr+0x2c>
+    80000bd6:	557d                	li	a0,-1
+    80000bd8:	b779                	j	80000b66 <copyinstr+0x32>
+    80000bda:	6b85                	lui	s7,0x1
+    80000bdc:	9ba6                	add	s7,s7,s1
+    80000bde:	87da                	mv	a5,s6
+    80000be0:	b77d                	j	80000b8e <copyinstr+0x5a>
+    80000be2:	4781                	li	a5,0
+    80000be4:	37fd                	addiw	a5,a5,-1
+    80000be6:	0007851b          	sext.w	a0,a5
+    80000bea:	8082                	ret
+
+0000000080000bec <proc_mapstacks>:
+    80000bec:	7139                	addi	sp,sp,-64
+    80000bee:	fc06                	sd	ra,56(sp)
+    80000bf0:	f822                	sd	s0,48(sp)
+    80000bf2:	f426                	sd	s1,40(sp)
+    80000bf4:	f04a                	sd	s2,32(sp)
+    80000bf6:	ec4e                	sd	s3,24(sp)
+    80000bf8:	e852                	sd	s4,16(sp)
+    80000bfa:	e456                	sd	s5,8(sp)
+    80000bfc:	e05a                	sd	s6,0(sp)
+    80000bfe:	0080                	addi	s0,sp,64
+    80000c00:	8a2a                	mv	s4,a0
+    80000c02:	0000a497          	auipc	s1,0xa
+    80000c06:	a5e48493          	addi	s1,s1,-1442 # 8000a660 <proc>
+    80000c0a:	8b26                	mv	s6,s1
+    80000c0c:	04fa5937          	lui	s2,0x4fa5
+    80000c10:	fa590913          	addi	s2,s2,-91 # 4fa4fa5 <_entry-0x7b05b05b>
+    80000c14:	0932                	slli	s2,s2,0xc
+    80000c16:	fa590913          	addi	s2,s2,-91
+    80000c1a:	0932                	slli	s2,s2,0xc
+    80000c1c:	fa590913          	addi	s2,s2,-91
+    80000c20:	0932                	slli	s2,s2,0xc
+    80000c22:	fa590913          	addi	s2,s2,-91
+    80000c26:	040009b7          	lui	s3,0x4000
+    80000c2a:	19fd                	addi	s3,s3,-1 # 3ffffff <_entry-0x7c000001>
+    80000c2c:	09b2                	slli	s3,s3,0xc
+    80000c2e:	0000fa97          	auipc	s5,0xf
+    80000c32:	432a8a93          	addi	s5,s5,1074 # 80010060 <tickslock>
+    80000c36:	cc8ff0ef          	jal	800000fe <kalloc>
+    80000c3a:	862a                	mv	a2,a0
+    80000c3c:	cd15                	beqz	a0,80000c78 <proc_mapstacks+0x8c>
+    80000c3e:	416485b3          	sub	a1,s1,s6
+    80000c42:	858d                	srai	a1,a1,0x3
+    80000c44:	032585b3          	mul	a1,a1,s2
+    80000c48:	2585                	addiw	a1,a1,1
+    80000c4a:	00d5959b          	slliw	a1,a1,0xd
+    80000c4e:	4719                	li	a4,6
+    80000c50:	6685                	lui	a3,0x1
+    80000c52:	40b985b3          	sub	a1,s3,a1
+    80000c56:	8552                	mv	a0,s4
+    80000c58:	8f3ff0ef          	jal	8000054a <kvmmap>
+    80000c5c:	16848493          	addi	s1,s1,360
+    80000c60:	fd549be3          	bne	s1,s5,80000c36 <proc_mapstacks+0x4a>
+    80000c64:	70e2                	ld	ra,56(sp)
+    80000c66:	7442                	ld	s0,48(sp)
+    80000c68:	74a2                	ld	s1,40(sp)
+    80000c6a:	7902                	ld	s2,32(sp)
+    80000c6c:	69e2                	ld	s3,24(sp)
+    80000c6e:	6a42                	ld	s4,16(sp)
+    80000c70:	6aa2                	ld	s5,8(sp)
+    80000c72:	6b02                	ld	s6,0(sp)
+    80000c74:	6121                	addi	sp,sp,64
+    80000c76:	8082                	ret
+    80000c78:	00006517          	auipc	a0,0x6
+    80000c7c:	52050513          	addi	a0,a0,1312 # 80007198 <etext+0x198>
+    80000c80:	772040ef          	jal	800053f2 <panic>
+
+0000000080000c84 <procinit>:
+    80000c84:	7139                	addi	sp,sp,-64
+    80000c86:	fc06                	sd	ra,56(sp)
+    80000c88:	f822                	sd	s0,48(sp)
+    80000c8a:	f426                	sd	s1,40(sp)
+    80000c8c:	f04a                	sd	s2,32(sp)
+    80000c8e:	ec4e                	sd	s3,24(sp)
+    80000c90:	e852                	sd	s4,16(sp)
+    80000c92:	e456                	sd	s5,8(sp)
+    80000c94:	e05a                	sd	s6,0(sp)
+    80000c96:	0080                	addi	s0,sp,64
+    80000c98:	00006597          	auipc	a1,0x6
+    80000c9c:	50858593          	addi	a1,a1,1288 # 800071a0 <etext+0x1a0>
+    80000ca0:	00009517          	auipc	a0,0x9
+    80000ca4:	59050513          	addi	a0,a0,1424 # 8000a230 <pid_lock>
+    80000ca8:	1f9040ef          	jal	800056a0 <initlock>
+    80000cac:	00006597          	auipc	a1,0x6
+    80000cb0:	4fc58593          	addi	a1,a1,1276 # 800071a8 <etext+0x1a8>
+    80000cb4:	00009517          	auipc	a0,0x9
+    80000cb8:	59450513          	addi	a0,a0,1428 # 8000a248 <wait_lock>
+    80000cbc:	1e5040ef          	jal	800056a0 <initlock>
+    80000cc0:	0000a497          	auipc	s1,0xa
+    80000cc4:	9a048493          	addi	s1,s1,-1632 # 8000a660 <proc>
+    80000cc8:	00006b17          	auipc	s6,0x6
+    80000ccc:	4f0b0b13          	addi	s6,s6,1264 # 800071b8 <etext+0x1b8>
+    80000cd0:	8aa6                	mv	s5,s1
+    80000cd2:	04fa5937          	lui	s2,0x4fa5
+    80000cd6:	fa590913          	addi	s2,s2,-91 # 4fa4fa5 <_entry-0x7b05b05b>
+    80000cda:	0932                	slli	s2,s2,0xc
+    80000cdc:	fa590913          	addi	s2,s2,-91
+    80000ce0:	0932                	slli	s2,s2,0xc
+    80000ce2:	fa590913          	addi	s2,s2,-91
+    80000ce6:	0932                	slli	s2,s2,0xc
+    80000ce8:	fa590913          	addi	s2,s2,-91
+    80000cec:	040009b7          	lui	s3,0x4000
+    80000cf0:	19fd                	addi	s3,s3,-1 # 3ffffff <_entry-0x7c000001>
+    80000cf2:	09b2                	slli	s3,s3,0xc
+    80000cf4:	0000fa17          	auipc	s4,0xf
+    80000cf8:	36ca0a13          	addi	s4,s4,876 # 80010060 <tickslock>
+    80000cfc:	85da                	mv	a1,s6
+    80000cfe:	8526                	mv	a0,s1
+    80000d00:	1a1040ef          	jal	800056a0 <initlock>
+    80000d04:	0004ac23          	sw	zero,24(s1)
+    80000d08:	415487b3          	sub	a5,s1,s5
+    80000d0c:	878d                	srai	a5,a5,0x3
+    80000d0e:	032787b3          	mul	a5,a5,s2
+    80000d12:	2785                	addiw	a5,a5,1
+    80000d14:	00d7979b          	slliw	a5,a5,0xd
+    80000d18:	40f987b3          	sub	a5,s3,a5
+    80000d1c:	e0bc                	sd	a5,64(s1)
+    80000d1e:	16848493          	addi	s1,s1,360
+    80000d22:	fd449de3          	bne	s1,s4,80000cfc <procinit+0x78>
+    80000d26:	70e2                	ld	ra,56(sp)
+    80000d28:	7442                	ld	s0,48(sp)
+    80000d2a:	74a2                	ld	s1,40(sp)
+    80000d2c:	7902                	ld	s2,32(sp)
+    80000d2e:	69e2                	ld	s3,24(sp)
+    80000d30:	6a42                	ld	s4,16(sp)
+    80000d32:	6aa2                	ld	s5,8(sp)
+    80000d34:	6b02                	ld	s6,0(sp)
+    80000d36:	6121                	addi	sp,sp,64
+    80000d38:	8082                	ret
+
+0000000080000d3a <cpuid>:
+    80000d3a:	1141                	addi	sp,sp,-16
+    80000d3c:	e422                	sd	s0,8(sp)
+    80000d3e:	0800                	addi	s0,sp,16
+    80000d40:	8512                	mv	a0,tp
+    80000d42:	2501                	sext.w	a0,a0
+    80000d44:	6422                	ld	s0,8(sp)
+    80000d46:	0141                	addi	sp,sp,16
+    80000d48:	8082                	ret
+
+0000000080000d4a <mycpu>:
+    80000d4a:	1141                	addi	sp,sp,-16
+    80000d4c:	e422                	sd	s0,8(sp)
+    80000d4e:	0800                	addi	s0,sp,16
+    80000d50:	8792                	mv	a5,tp
+    80000d52:	2781                	sext.w	a5,a5
+    80000d54:	079e                	slli	a5,a5,0x7
+    80000d56:	00009517          	auipc	a0,0x9
+    80000d5a:	50a50513          	addi	a0,a0,1290 # 8000a260 <cpus>
+    80000d5e:	953e                	add	a0,a0,a5
+    80000d60:	6422                	ld	s0,8(sp)
+    80000d62:	0141                	addi	sp,sp,16
+    80000d64:	8082                	ret
+
+0000000080000d66 <myproc>:
+    80000d66:	1101                	addi	sp,sp,-32
+    80000d68:	ec06                	sd	ra,24(sp)
+    80000d6a:	e822                	sd	s0,16(sp)
+    80000d6c:	e426                	sd	s1,8(sp)
+    80000d6e:	1000                	addi	s0,sp,32
+    80000d70:	171040ef          	jal	800056e0 <push_off>
+    80000d74:	8792                	mv	a5,tp
+    80000d76:	2781                	sext.w	a5,a5
+    80000d78:	079e                	slli	a5,a5,0x7
+    80000d7a:	00009717          	auipc	a4,0x9
+    80000d7e:	4b670713          	addi	a4,a4,1206 # 8000a230 <pid_lock>
+    80000d82:	97ba                	add	a5,a5,a4
+    80000d84:	7b84                	ld	s1,48(a5)
+    80000d86:	1df040ef          	jal	80005764 <pop_off>
+    80000d8a:	8526                	mv	a0,s1
+    80000d8c:	60e2                	ld	ra,24(sp)
+    80000d8e:	6442                	ld	s0,16(sp)
+    80000d90:	64a2                	ld	s1,8(sp)
+    80000d92:	6105                	addi	sp,sp,32
+    80000d94:	8082                	ret
+
+0000000080000d96 <forkret>:
+    80000d96:	1141                	addi	sp,sp,-16
+    80000d98:	e406                	sd	ra,8(sp)
+    80000d9a:	e022                	sd	s0,0(sp)
+    80000d9c:	0800                	addi	s0,sp,16
+    80000d9e:	fc9ff0ef          	jal	80000d66 <myproc>
+    80000da2:	217040ef          	jal	800057b8 <release>
+    80000da6:	00009797          	auipc	a5,0x9
+    80000daa:	3ca7a783          	lw	a5,970(a5) # 8000a170 <first.1>
+    80000dae:	e799                	bnez	a5,80000dbc <forkret+0x26>
+    80000db0:	2bf000ef          	jal	8000186e <usertrapret>
+    80000db4:	60a2                	ld	ra,8(sp)
+    80000db6:	6402                	ld	s0,0(sp)
+    80000db8:	0141                	addi	sp,sp,16
+    80000dba:	8082                	ret
+    80000dbc:	4505                	li	a0,1
+    80000dbe:	654010ef          	jal	80002412 <fsinit>
+    80000dc2:	00009797          	auipc	a5,0x9
+    80000dc6:	3a07a723          	sw	zero,942(a5) # 8000a170 <first.1>
+    80000dca:	0330000f          	fence	rw,rw
+    80000dce:	b7cd                	j	80000db0 <forkret+0x1a>
+
+0000000080000dd0 <allocpid>:
+    80000dd0:	1101                	addi	sp,sp,-32
+    80000dd2:	ec06                	sd	ra,24(sp)
+    80000dd4:	e822                	sd	s0,16(sp)
+    80000dd6:	e426                	sd	s1,8(sp)
+    80000dd8:	e04a                	sd	s2,0(sp)
+    80000dda:	1000                	addi	s0,sp,32
+    80000ddc:	00009917          	auipc	s2,0x9
+    80000de0:	45490913          	addi	s2,s2,1108 # 8000a230 <pid_lock>
+    80000de4:	854a                	mv	a0,s2
+    80000de6:	13b040ef          	jal	80005720 <acquire>
+    80000dea:	00009797          	auipc	a5,0x9
+    80000dee:	38a78793          	addi	a5,a5,906 # 8000a174 <nextpid>
+    80000df2:	4384                	lw	s1,0(a5)
+    80000df4:	0014871b          	addiw	a4,s1,1
+    80000df8:	c398                	sw	a4,0(a5)
+    80000dfa:	854a                	mv	a0,s2
+    80000dfc:	1bd040ef          	jal	800057b8 <release>
+    80000e00:	8526                	mv	a0,s1
+    80000e02:	60e2                	ld	ra,24(sp)
+    80000e04:	6442                	ld	s0,16(sp)
+    80000e06:	64a2                	ld	s1,8(sp)
+    80000e08:	6902                	ld	s2,0(sp)
+    80000e0a:	6105                	addi	sp,sp,32
+    80000e0c:	8082                	ret
+
+0000000080000e0e <proc_pagetable>:
+    80000e0e:	1101                	addi	sp,sp,-32
+    80000e10:	ec06                	sd	ra,24(sp)
+    80000e12:	e822                	sd	s0,16(sp)
+    80000e14:	e426                	sd	s1,8(sp)
+    80000e16:	e04a                	sd	s2,0(sp)
+    80000e18:	1000                	addi	s0,sp,32
+    80000e1a:	892a                	mv	s2,a0
+    80000e1c:	8e1ff0ef          	jal	800006fc <uvmcreate>
+    80000e20:	84aa                	mv	s1,a0
+    80000e22:	cd05                	beqz	a0,80000e5a <proc_pagetable+0x4c>
+    80000e24:	4729                	li	a4,10
+    80000e26:	00005697          	auipc	a3,0x5
+    80000e2a:	1da68693          	addi	a3,a3,474 # 80006000 <_trampoline>
+    80000e2e:	6605                	lui	a2,0x1
+    80000e30:	040005b7          	lui	a1,0x4000
+    80000e34:	15fd                	addi	a1,a1,-1 # 3ffffff <_entry-0x7c000001>
+    80000e36:	05b2                	slli	a1,a1,0xc
+    80000e38:	e62ff0ef          	jal	8000049a <mappages>
+    80000e3c:	02054663          	bltz	a0,80000e68 <proc_pagetable+0x5a>
+    80000e40:	4719                	li	a4,6
+    80000e42:	05893683          	ld	a3,88(s2)
+    80000e46:	6605                	lui	a2,0x1
+    80000e48:	020005b7          	lui	a1,0x2000
+    80000e4c:	15fd                	addi	a1,a1,-1 # 1ffffff <_entry-0x7e000001>
+    80000e4e:	05b6                	slli	a1,a1,0xd
+    80000e50:	8526                	mv	a0,s1
+    80000e52:	e48ff0ef          	jal	8000049a <mappages>
+    80000e56:	00054f63          	bltz	a0,80000e74 <proc_pagetable+0x66>
+    80000e5a:	8526                	mv	a0,s1
+    80000e5c:	60e2                	ld	ra,24(sp)
+    80000e5e:	6442                	ld	s0,16(sp)
+    80000e60:	64a2                	ld	s1,8(sp)
+    80000e62:	6902                	ld	s2,0(sp)
+    80000e64:	6105                	addi	sp,sp,32
+    80000e66:	8082                	ret
+    80000e68:	4581                	li	a1,0
+    80000e6a:	8526                	mv	a0,s1
+    80000e6c:	a5fff0ef          	jal	800008ca <uvmfree>
+    80000e70:	4481                	li	s1,0
+    80000e72:	b7e5                	j	80000e5a <proc_pagetable+0x4c>
+    80000e74:	4681                	li	a3,0
+    80000e76:	4605                	li	a2,1
+    80000e78:	040005b7          	lui	a1,0x4000
+    80000e7c:	15fd                	addi	a1,a1,-1 # 3ffffff <_entry-0x7c000001>
+    80000e7e:	05b2                	slli	a1,a1,0xc
+    80000e80:	8526                	mv	a0,s1
+    80000e82:	fbeff0ef          	jal	80000640 <uvmunmap>
+    80000e86:	4581                	li	a1,0
+    80000e88:	8526                	mv	a0,s1
+    80000e8a:	a41ff0ef          	jal	800008ca <uvmfree>
+    80000e8e:	4481                	li	s1,0
+    80000e90:	b7e9                	j	80000e5a <proc_pagetable+0x4c>
+
+0000000080000e92 <proc_freepagetable>:
+    80000e92:	1101                	addi	sp,sp,-32
+    80000e94:	ec06                	sd	ra,24(sp)
+    80000e96:	e822                	sd	s0,16(sp)
+    80000e98:	e426                	sd	s1,8(sp)
+    80000e9a:	e04a                	sd	s2,0(sp)
+    80000e9c:	1000                	addi	s0,sp,32
+    80000e9e:	84aa                	mv	s1,a0
+    80000ea0:	892e                	mv	s2,a1
+    80000ea2:	4681                	li	a3,0
+    80000ea4:	4605                	li	a2,1
+    80000ea6:	040005b7          	lui	a1,0x4000
+    80000eaa:	15fd                	addi	a1,a1,-1 # 3ffffff <_entry-0x7c000001>
+    80000eac:	05b2                	slli	a1,a1,0xc
+    80000eae:	f92ff0ef          	jal	80000640 <uvmunmap>
+    80000eb2:	4681                	li	a3,0
+    80000eb4:	4605                	li	a2,1
+    80000eb6:	020005b7          	lui	a1,0x2000
+    80000eba:	15fd                	addi	a1,a1,-1 # 1ffffff <_entry-0x7e000001>
+    80000ebc:	05b6                	slli	a1,a1,0xd
+    80000ebe:	8526                	mv	a0,s1
+    80000ec0:	f80ff0ef          	jal	80000640 <uvmunmap>
+    80000ec4:	85ca                	mv	a1,s2
+    80000ec6:	8526                	mv	a0,s1
+    80000ec8:	a03ff0ef          	jal	800008ca <uvmfree>
+    80000ecc:	60e2                	ld	ra,24(sp)
+    80000ece:	6442                	ld	s0,16(sp)
+    80000ed0:	64a2                	ld	s1,8(sp)
+    80000ed2:	6902                	ld	s2,0(sp)
+    80000ed4:	6105                	addi	sp,sp,32
+    80000ed6:	8082                	ret
+
+0000000080000ed8 <freeproc>:
+    80000ed8:	1101                	addi	sp,sp,-32
+    80000eda:	ec06                	sd	ra,24(sp)
+    80000edc:	e822                	sd	s0,16(sp)
+    80000ede:	e426                	sd	s1,8(sp)
+    80000ee0:	1000                	addi	s0,sp,32
+    80000ee2:	84aa                	mv	s1,a0
+    80000ee4:	6d28                	ld	a0,88(a0)
+    80000ee6:	c119                	beqz	a0,80000eec <freeproc+0x14>
+    80000ee8:	934ff0ef          	jal	8000001c <kfree>
+    80000eec:	0404bc23          	sd	zero,88(s1)
+    80000ef0:	68a8                	ld	a0,80(s1)
+    80000ef2:	c501                	beqz	a0,80000efa <freeproc+0x22>
+    80000ef4:	64ac                	ld	a1,72(s1)
+    80000ef6:	f9dff0ef          	jal	80000e92 <proc_freepagetable>
+    80000efa:	0404b823          	sd	zero,80(s1)
+    80000efe:	0404b423          	sd	zero,72(s1)
+    80000f02:	0204a823          	sw	zero,48(s1)
+    80000f06:	0204bc23          	sd	zero,56(s1)
+    80000f0a:	14048c23          	sb	zero,344(s1)
+    80000f0e:	0204b023          	sd	zero,32(s1)
+    80000f12:	0204a423          	sw	zero,40(s1)
+    80000f16:	0204a623          	sw	zero,44(s1)
+    80000f1a:	0004ac23          	sw	zero,24(s1)
+    80000f1e:	60e2                	ld	ra,24(sp)
+    80000f20:	6442                	ld	s0,16(sp)
+    80000f22:	64a2                	ld	s1,8(sp)
+    80000f24:	6105                	addi	sp,sp,32
+    80000f26:	8082                	ret
+
+0000000080000f28 <allocproc>:
+    80000f28:	1101                	addi	sp,sp,-32
+    80000f2a:	ec06                	sd	ra,24(sp)
+    80000f2c:	e822                	sd	s0,16(sp)
+    80000f2e:	e426                	sd	s1,8(sp)
+    80000f30:	e04a                	sd	s2,0(sp)
+    80000f32:	1000                	addi	s0,sp,32
+    80000f34:	00009497          	auipc	s1,0x9
+    80000f38:	72c48493          	addi	s1,s1,1836 # 8000a660 <proc>
+    80000f3c:	0000f917          	auipc	s2,0xf
+    80000f40:	12490913          	addi	s2,s2,292 # 80010060 <tickslock>
+    80000f44:	8526                	mv	a0,s1
+    80000f46:	7da040ef          	jal	80005720 <acquire>
+    80000f4a:	4c9c                	lw	a5,24(s1)
+    80000f4c:	cb91                	beqz	a5,80000f60 <allocproc+0x38>
+    80000f4e:	8526                	mv	a0,s1
+    80000f50:	069040ef          	jal	800057b8 <release>
+    80000f54:	16848493          	addi	s1,s1,360
+    80000f58:	ff2496e3          	bne	s1,s2,80000f44 <allocproc+0x1c>
+    80000f5c:	4481                	li	s1,0
+    80000f5e:	a089                	j	80000fa0 <allocproc+0x78>
+    80000f60:	e71ff0ef          	jal	80000dd0 <allocpid>
+    80000f64:	d888                	sw	a0,48(s1)
+    80000f66:	4785                	li	a5,1
+    80000f68:	cc9c                	sw	a5,24(s1)
+    80000f6a:	994ff0ef          	jal	800000fe <kalloc>
+    80000f6e:	892a                	mv	s2,a0
+    80000f70:	eca8                	sd	a0,88(s1)
+    80000f72:	cd15                	beqz	a0,80000fae <allocproc+0x86>
+    80000f74:	8526                	mv	a0,s1
+    80000f76:	e99ff0ef          	jal	80000e0e <proc_pagetable>
+    80000f7a:	892a                	mv	s2,a0
+    80000f7c:	e8a8                	sd	a0,80(s1)
+    80000f7e:	c121                	beqz	a0,80000fbe <allocproc+0x96>
+    80000f80:	07000613          	li	a2,112
+    80000f84:	4581                	li	a1,0
+    80000f86:	06048513          	addi	a0,s1,96
+    80000f8a:	9c4ff0ef          	jal	8000014e <memset>
+    80000f8e:	00000797          	auipc	a5,0x0
+    80000f92:	e0878793          	addi	a5,a5,-504 # 80000d96 <forkret>
+    80000f96:	f0bc                	sd	a5,96(s1)
+    80000f98:	60bc                	ld	a5,64(s1)
+    80000f9a:	6705                	lui	a4,0x1
+    80000f9c:	97ba                	add	a5,a5,a4
+    80000f9e:	f4bc                	sd	a5,104(s1)
+    80000fa0:	8526                	mv	a0,s1
+    80000fa2:	60e2                	ld	ra,24(sp)
+    80000fa4:	6442                	ld	s0,16(sp)
+    80000fa6:	64a2                	ld	s1,8(sp)
+    80000fa8:	6902                	ld	s2,0(sp)
+    80000faa:	6105                	addi	sp,sp,32
+    80000fac:	8082                	ret
+    80000fae:	8526                	mv	a0,s1
+    80000fb0:	f29ff0ef          	jal	80000ed8 <freeproc>
+    80000fb4:	8526                	mv	a0,s1
+    80000fb6:	003040ef          	jal	800057b8 <release>
+    80000fba:	84ca                	mv	s1,s2
+    80000fbc:	b7d5                	j	80000fa0 <allocproc+0x78>
+    80000fbe:	8526                	mv	a0,s1
+    80000fc0:	f19ff0ef          	jal	80000ed8 <freeproc>
+    80000fc4:	8526                	mv	a0,s1
+    80000fc6:	7f2040ef          	jal	800057b8 <release>
+    80000fca:	84ca                	mv	s1,s2
+    80000fcc:	bfd1                	j	80000fa0 <allocproc+0x78>
+
+0000000080000fce <userinit>:
+    80000fce:	1101                	addi	sp,sp,-32
+    80000fd0:	ec06                	sd	ra,24(sp)
+    80000fd2:	e822                	sd	s0,16(sp)
+    80000fd4:	e426                	sd	s1,8(sp)
+    80000fd6:	1000                	addi	s0,sp,32
+    80000fd8:	f51ff0ef          	jal	80000f28 <allocproc>
+    80000fdc:	84aa                	mv	s1,a0
+    80000fde:	00009797          	auipc	a5,0x9
+    80000fe2:	20a7b923          	sd	a0,530(a5) # 8000a1f0 <initproc>
+    80000fe6:	03400613          	li	a2,52
+    80000fea:	00009597          	auipc	a1,0x9
+    80000fee:	19658593          	addi	a1,a1,406 # 8000a180 <initcode>
+    80000ff2:	6928                	ld	a0,80(a0)
+    80000ff4:	f2eff0ef          	jal	80000722 <uvmfirst>
+    80000ff8:	6785                	lui	a5,0x1
+    80000ffa:	e4bc                	sd	a5,72(s1)
+    80000ffc:	6cb8                	ld	a4,88(s1)
+    80000ffe:	00073c23          	sd	zero,24(a4) # 1018 <_entry-0x7fffefe8>
+    80001002:	6cb8                	ld	a4,88(s1)
+    80001004:	fb1c                	sd	a5,48(a4)
+    80001006:	4641                	li	a2,16
+    80001008:	00006597          	auipc	a1,0x6
+    8000100c:	1b858593          	addi	a1,a1,440 # 800071c0 <etext+0x1c0>
+    80001010:	15848513          	addi	a0,s1,344
+    80001014:	a78ff0ef          	jal	8000028c <safestrcpy>
+    80001018:	00006517          	auipc	a0,0x6
+    8000101c:	1b850513          	addi	a0,a0,440 # 800071d0 <etext+0x1d0>
+    80001020:	501010ef          	jal	80002d20 <namei>
+    80001024:	14a4b823          	sd	a0,336(s1)
+    80001028:	478d                	li	a5,3
+    8000102a:	cc9c                	sw	a5,24(s1)
+    8000102c:	8526                	mv	a0,s1
+    8000102e:	78a040ef          	jal	800057b8 <release>
+    80001032:	60e2                	ld	ra,24(sp)
+    80001034:	6442                	ld	s0,16(sp)
+    80001036:	64a2                	ld	s1,8(sp)
+    80001038:	6105                	addi	sp,sp,32
+    8000103a:	8082                	ret
+
+000000008000103c <growproc>:
+    8000103c:	1101                	addi	sp,sp,-32
+    8000103e:	ec06                	sd	ra,24(sp)
+    80001040:	e822                	sd	s0,16(sp)
+    80001042:	e426                	sd	s1,8(sp)
+    80001044:	e04a                	sd	s2,0(sp)
+    80001046:	1000                	addi	s0,sp,32
+    80001048:	892a                	mv	s2,a0
+    8000104a:	d1dff0ef          	jal	80000d66 <myproc>
+    8000104e:	84aa                	mv	s1,a0
+    80001050:	652c                	ld	a1,72(a0)
+    80001052:	01204c63          	bgtz	s2,8000106a <growproc+0x2e>
+    80001056:	02094463          	bltz	s2,8000107e <growproc+0x42>
+    8000105a:	e4ac                	sd	a1,72(s1)
+    8000105c:	4501                	li	a0,0
+    8000105e:	60e2                	ld	ra,24(sp)
+    80001060:	6442                	ld	s0,16(sp)
+    80001062:	64a2                	ld	s1,8(sp)
+    80001064:	6902                	ld	s2,0(sp)
+    80001066:	6105                	addi	sp,sp,32
+    80001068:	8082                	ret
+    8000106a:	4691                	li	a3,4
+    8000106c:	00b90633          	add	a2,s2,a1
+    80001070:	6928                	ld	a0,80(a0)
+    80001072:	f52ff0ef          	jal	800007c4 <uvmalloc>
+    80001076:	85aa                	mv	a1,a0
+    80001078:	f16d                	bnez	a0,8000105a <growproc+0x1e>
+    8000107a:	557d                	li	a0,-1
+    8000107c:	b7cd                	j	8000105e <growproc+0x22>
+    8000107e:	00b90633          	add	a2,s2,a1
+    80001082:	6928                	ld	a0,80(a0)
+    80001084:	efcff0ef          	jal	80000780 <uvmdealloc>
+    80001088:	85aa                	mv	a1,a0
+    8000108a:	bfc1                	j	8000105a <growproc+0x1e>
+
+000000008000108c <fork>:
+    8000108c:	7139                	addi	sp,sp,-64
+    8000108e:	fc06                	sd	ra,56(sp)
+    80001090:	f822                	sd	s0,48(sp)
+    80001092:	f04a                	sd	s2,32(sp)
+    80001094:	e456                	sd	s5,8(sp)
+    80001096:	0080                	addi	s0,sp,64
+    80001098:	ccfff0ef          	jal	80000d66 <myproc>
+    8000109c:	8aaa                	mv	s5,a0
+    8000109e:	e8bff0ef          	jal	80000f28 <allocproc>
+    800010a2:	0e050a63          	beqz	a0,80001196 <fork+0x10a>
+    800010a6:	e852                	sd	s4,16(sp)
+    800010a8:	8a2a                	mv	s4,a0
+    800010aa:	048ab603          	ld	a2,72(s5)
+    800010ae:	692c                	ld	a1,80(a0)
+    800010b0:	050ab503          	ld	a0,80(s5)
+    800010b4:	849ff0ef          	jal	800008fc <uvmcopy>
+    800010b8:	04054a63          	bltz	a0,8000110c <fork+0x80>
+    800010bc:	f426                	sd	s1,40(sp)
+    800010be:	ec4e                	sd	s3,24(sp)
+    800010c0:	048ab783          	ld	a5,72(s5)
+    800010c4:	04fa3423          	sd	a5,72(s4)
+    800010c8:	058ab683          	ld	a3,88(s5)
+    800010cc:	87b6                	mv	a5,a3
+    800010ce:	058a3703          	ld	a4,88(s4)
+    800010d2:	12068693          	addi	a3,a3,288
+    800010d6:	0007b803          	ld	a6,0(a5) # 1000 <_entry-0x7ffff000>
+    800010da:	6788                	ld	a0,8(a5)
+    800010dc:	6b8c                	ld	a1,16(a5)
+    800010de:	6f90                	ld	a2,24(a5)
+    800010e0:	01073023          	sd	a6,0(a4)
+    800010e4:	e708                	sd	a0,8(a4)
+    800010e6:	eb0c                	sd	a1,16(a4)
+    800010e8:	ef10                	sd	a2,24(a4)
+    800010ea:	02078793          	addi	a5,a5,32
+    800010ee:	02070713          	addi	a4,a4,32
+    800010f2:	fed792e3          	bne	a5,a3,800010d6 <fork+0x4a>
+    800010f6:	058a3783          	ld	a5,88(s4)
+    800010fa:	0607b823          	sd	zero,112(a5)
+    800010fe:	0d0a8493          	addi	s1,s5,208
+    80001102:	0d0a0913          	addi	s2,s4,208
+    80001106:	150a8993          	addi	s3,s5,336
+    8000110a:	a831                	j	80001126 <fork+0x9a>
+    8000110c:	8552                	mv	a0,s4
+    8000110e:	dcbff0ef          	jal	80000ed8 <freeproc>
+    80001112:	8552                	mv	a0,s4
+    80001114:	6a4040ef          	jal	800057b8 <release>
+    80001118:	597d                	li	s2,-1
+    8000111a:	6a42                	ld	s4,16(sp)
+    8000111c:	a0b5                	j	80001188 <fork+0xfc>
+    8000111e:	04a1                	addi	s1,s1,8
+    80001120:	0921                	addi	s2,s2,8
+    80001122:	01348963          	beq	s1,s3,80001134 <fork+0xa8>
+    80001126:	6088                	ld	a0,0(s1)
+    80001128:	d97d                	beqz	a0,8000111e <fork+0x92>
+    8000112a:	186020ef          	jal	800032b0 <filedup>
+    8000112e:	00a93023          	sd	a0,0(s2)
+    80001132:	b7f5                	j	8000111e <fork+0x92>
+    80001134:	150ab503          	ld	a0,336(s5)
+    80001138:	4d8010ef          	jal	80002610 <idup>
+    8000113c:	14aa3823          	sd	a0,336(s4)
+    80001140:	4641                	li	a2,16
+    80001142:	158a8593          	addi	a1,s5,344
+    80001146:	158a0513          	addi	a0,s4,344
+    8000114a:	942ff0ef          	jal	8000028c <safestrcpy>
+    8000114e:	030a2903          	lw	s2,48(s4)
+    80001152:	8552                	mv	a0,s4
+    80001154:	664040ef          	jal	800057b8 <release>
+    80001158:	00009497          	auipc	s1,0x9
+    8000115c:	0f048493          	addi	s1,s1,240 # 8000a248 <wait_lock>
+    80001160:	8526                	mv	a0,s1
+    80001162:	5be040ef          	jal	80005720 <acquire>
+    80001166:	035a3c23          	sd	s5,56(s4)
+    8000116a:	8526                	mv	a0,s1
+    8000116c:	64c040ef          	jal	800057b8 <release>
+    80001170:	8552                	mv	a0,s4
+    80001172:	5ae040ef          	jal	80005720 <acquire>
+    80001176:	478d                	li	a5,3
+    80001178:	00fa2c23          	sw	a5,24(s4)
+    8000117c:	8552                	mv	a0,s4
+    8000117e:	63a040ef          	jal	800057b8 <release>
+    80001182:	74a2                	ld	s1,40(sp)
+    80001184:	69e2                	ld	s3,24(sp)
+    80001186:	6a42                	ld	s4,16(sp)
+    80001188:	854a                	mv	a0,s2
+    8000118a:	70e2                	ld	ra,56(sp)
+    8000118c:	7442                	ld	s0,48(sp)
+    8000118e:	7902                	ld	s2,32(sp)
+    80001190:	6aa2                	ld	s5,8(sp)
+    80001192:	6121                	addi	sp,sp,64
+    80001194:	8082                	ret
+    80001196:	597d                	li	s2,-1
+    80001198:	bfc5                	j	80001188 <fork+0xfc>
+
+000000008000119a <scheduler>:
+    8000119a:	715d                	addi	sp,sp,-80
+    8000119c:	e486                	sd	ra,72(sp)
+    8000119e:	e0a2                	sd	s0,64(sp)
+    800011a0:	fc26                	sd	s1,56(sp)
+    800011a2:	f84a                	sd	s2,48(sp)
+    800011a4:	f44e                	sd	s3,40(sp)
+    800011a6:	f052                	sd	s4,32(sp)
+    800011a8:	ec56                	sd	s5,24(sp)
+    800011aa:	e85a                	sd	s6,16(sp)
+    800011ac:	e45e                	sd	s7,8(sp)
+    800011ae:	e062                	sd	s8,0(sp)
+    800011b0:	0880                	addi	s0,sp,80
+    800011b2:	8792                	mv	a5,tp
+    800011b4:	2781                	sext.w	a5,a5
+    800011b6:	00779b13          	slli	s6,a5,0x7
+    800011ba:	00009717          	auipc	a4,0x9
+    800011be:	07670713          	addi	a4,a4,118 # 8000a230 <pid_lock>
+    800011c2:	975a                	add	a4,a4,s6
+    800011c4:	02073823          	sd	zero,48(a4)
+    800011c8:	00009717          	auipc	a4,0x9
+    800011cc:	0a070713          	addi	a4,a4,160 # 8000a268 <cpus+0x8>
+    800011d0:	9b3a                	add	s6,s6,a4
+    800011d2:	4c11                	li	s8,4
+    800011d4:	079e                	slli	a5,a5,0x7
+    800011d6:	00009a17          	auipc	s4,0x9
+    800011da:	05aa0a13          	addi	s4,s4,90 # 8000a230 <pid_lock>
+    800011de:	9a3e                	add	s4,s4,a5
+    800011e0:	4b85                	li	s7,1
+    800011e2:	0000f997          	auipc	s3,0xf
+    800011e6:	e7e98993          	addi	s3,s3,-386 # 80010060 <tickslock>
+    800011ea:	a0a9                	j	80001234 <scheduler+0x9a>
+    800011ec:	8526                	mv	a0,s1
+    800011ee:	5ca040ef          	jal	800057b8 <release>
+    800011f2:	16848493          	addi	s1,s1,360
+    800011f6:	03348563          	beq	s1,s3,80001220 <scheduler+0x86>
+    800011fa:	8526                	mv	a0,s1
+    800011fc:	524040ef          	jal	80005720 <acquire>
+    80001200:	4c9c                	lw	a5,24(s1)
+    80001202:	ff2795e3          	bne	a5,s2,800011ec <scheduler+0x52>
+    80001206:	0184ac23          	sw	s8,24(s1)
+    8000120a:	029a3823          	sd	s1,48(s4)
+    8000120e:	06048593          	addi	a1,s1,96
+    80001212:	855a                	mv	a0,s6
+    80001214:	5b4000ef          	jal	800017c8 <swtch>
+    80001218:	020a3823          	sd	zero,48(s4)
+    8000121c:	8ade                	mv	s5,s7
+    8000121e:	b7f9                	j	800011ec <scheduler+0x52>
+    80001220:	000a9a63          	bnez	s5,80001234 <scheduler+0x9a>
+    80001224:	100027f3          	csrr	a5,sstatus
+    80001228:	0027e793          	ori	a5,a5,2
+    8000122c:	10079073          	csrw	sstatus,a5
+    80001230:	10500073          	wfi
+    80001234:	100027f3          	csrr	a5,sstatus
+    80001238:	0027e793          	ori	a5,a5,2
+    8000123c:	10079073          	csrw	sstatus,a5
+    80001240:	4a81                	li	s5,0
+    80001242:	00009497          	auipc	s1,0x9
+    80001246:	41e48493          	addi	s1,s1,1054 # 8000a660 <proc>
+    8000124a:	490d                	li	s2,3
+    8000124c:	b77d                	j	800011fa <scheduler+0x60>
+
+000000008000124e <sched>:
+    8000124e:	7179                	addi	sp,sp,-48
+    80001250:	f406                	sd	ra,40(sp)
+    80001252:	f022                	sd	s0,32(sp)
+    80001254:	ec26                	sd	s1,24(sp)
+    80001256:	e84a                	sd	s2,16(sp)
+    80001258:	e44e                	sd	s3,8(sp)
+    8000125a:	1800                	addi	s0,sp,48
+    8000125c:	b0bff0ef          	jal	80000d66 <myproc>
+    80001260:	84aa                	mv	s1,a0
+    80001262:	454040ef          	jal	800056b6 <holding>
+    80001266:	c92d                	beqz	a0,800012d8 <sched+0x8a>
+    80001268:	8792                	mv	a5,tp
+    8000126a:	2781                	sext.w	a5,a5
+    8000126c:	079e                	slli	a5,a5,0x7
+    8000126e:	00009717          	auipc	a4,0x9
+    80001272:	fc270713          	addi	a4,a4,-62 # 8000a230 <pid_lock>
+    80001276:	97ba                	add	a5,a5,a4
+    80001278:	0a87a703          	lw	a4,168(a5)
+    8000127c:	4785                	li	a5,1
+    8000127e:	06f71363          	bne	a4,a5,800012e4 <sched+0x96>
+    80001282:	4c98                	lw	a4,24(s1)
+    80001284:	4791                	li	a5,4
+    80001286:	06f70563          	beq	a4,a5,800012f0 <sched+0xa2>
+    8000128a:	100027f3          	csrr	a5,sstatus
+    8000128e:	8b89                	andi	a5,a5,2
+    80001290:	e7b5                	bnez	a5,800012fc <sched+0xae>
+    80001292:	8792                	mv	a5,tp
+    80001294:	00009917          	auipc	s2,0x9
+    80001298:	f9c90913          	addi	s2,s2,-100 # 8000a230 <pid_lock>
+    8000129c:	2781                	sext.w	a5,a5
+    8000129e:	079e                	slli	a5,a5,0x7
+    800012a0:	97ca                	add	a5,a5,s2
+    800012a2:	0ac7a983          	lw	s3,172(a5)
+    800012a6:	8792                	mv	a5,tp
+    800012a8:	2781                	sext.w	a5,a5
+    800012aa:	079e                	slli	a5,a5,0x7
+    800012ac:	00009597          	auipc	a1,0x9
+    800012b0:	fbc58593          	addi	a1,a1,-68 # 8000a268 <cpus+0x8>
+    800012b4:	95be                	add	a1,a1,a5
+    800012b6:	06048513          	addi	a0,s1,96
+    800012ba:	50e000ef          	jal	800017c8 <swtch>
+    800012be:	8792                	mv	a5,tp
+    800012c0:	2781                	sext.w	a5,a5
+    800012c2:	079e                	slli	a5,a5,0x7
+    800012c4:	993e                	add	s2,s2,a5
+    800012c6:	0b392623          	sw	s3,172(s2)
+    800012ca:	70a2                	ld	ra,40(sp)
+    800012cc:	7402                	ld	s0,32(sp)
+    800012ce:	64e2                	ld	s1,24(sp)
+    800012d0:	6942                	ld	s2,16(sp)
+    800012d2:	69a2                	ld	s3,8(sp)
+    800012d4:	6145                	addi	sp,sp,48
+    800012d6:	8082                	ret
+    800012d8:	00006517          	auipc	a0,0x6
+    800012dc:	f0050513          	addi	a0,a0,-256 # 800071d8 <etext+0x1d8>
+    800012e0:	112040ef          	jal	800053f2 <panic>
+    800012e4:	00006517          	auipc	a0,0x6
+    800012e8:	f0450513          	addi	a0,a0,-252 # 800071e8 <etext+0x1e8>
+    800012ec:	106040ef          	jal	800053f2 <panic>
+    800012f0:	00006517          	auipc	a0,0x6
+    800012f4:	f0850513          	addi	a0,a0,-248 # 800071f8 <etext+0x1f8>
+    800012f8:	0fa040ef          	jal	800053f2 <panic>
+    800012fc:	00006517          	auipc	a0,0x6
+    80001300:	f0c50513          	addi	a0,a0,-244 # 80007208 <etext+0x208>
+    80001304:	0ee040ef          	jal	800053f2 <panic>
+
+0000000080001308 <yield>:
+    80001308:	1101                	addi	sp,sp,-32
+    8000130a:	ec06                	sd	ra,24(sp)
+    8000130c:	e822                	sd	s0,16(sp)
+    8000130e:	e426                	sd	s1,8(sp)
+    80001310:	1000                	addi	s0,sp,32
+    80001312:	a55ff0ef          	jal	80000d66 <myproc>
+    80001316:	84aa                	mv	s1,a0
+    80001318:	408040ef          	jal	80005720 <acquire>
+    8000131c:	478d                	li	a5,3
+    8000131e:	cc9c                	sw	a5,24(s1)
+    80001320:	f2fff0ef          	jal	8000124e <sched>
+    80001324:	8526                	mv	a0,s1
+    80001326:	492040ef          	jal	800057b8 <release>
+    8000132a:	60e2                	ld	ra,24(sp)
+    8000132c:	6442                	ld	s0,16(sp)
+    8000132e:	64a2                	ld	s1,8(sp)
+    80001330:	6105                	addi	sp,sp,32
+    80001332:	8082                	ret
+
+0000000080001334 <sleep>:
+    80001334:	7179                	addi	sp,sp,-48
+    80001336:	f406                	sd	ra,40(sp)
+    80001338:	f022                	sd	s0,32(sp)
+    8000133a:	ec26                	sd	s1,24(sp)
+    8000133c:	e84a                	sd	s2,16(sp)
+    8000133e:	e44e                	sd	s3,8(sp)
+    80001340:	1800                	addi	s0,sp,48
+    80001342:	89aa                	mv	s3,a0
+    80001344:	892e                	mv	s2,a1
+    80001346:	a21ff0ef          	jal	80000d66 <myproc>
+    8000134a:	84aa                	mv	s1,a0
+    8000134c:	3d4040ef          	jal	80005720 <acquire>
+    80001350:	854a                	mv	a0,s2
+    80001352:	466040ef          	jal	800057b8 <release>
+    80001356:	0334b023          	sd	s3,32(s1)
+    8000135a:	4789                	li	a5,2
+    8000135c:	cc9c                	sw	a5,24(s1)
+    8000135e:	ef1ff0ef          	jal	8000124e <sched>
+    80001362:	0204b023          	sd	zero,32(s1)
+    80001366:	8526                	mv	a0,s1
+    80001368:	450040ef          	jal	800057b8 <release>
+    8000136c:	854a                	mv	a0,s2
+    8000136e:	3b2040ef          	jal	80005720 <acquire>
+    80001372:	70a2                	ld	ra,40(sp)
+    80001374:	7402                	ld	s0,32(sp)
+    80001376:	64e2                	ld	s1,24(sp)
+    80001378:	6942                	ld	s2,16(sp)
+    8000137a:	69a2                	ld	s3,8(sp)
+    8000137c:	6145                	addi	sp,sp,48
+    8000137e:	8082                	ret
+
+0000000080001380 <wakeup>:
+    80001380:	7139                	addi	sp,sp,-64
+    80001382:	fc06                	sd	ra,56(sp)
+    80001384:	f822                	sd	s0,48(sp)
+    80001386:	f426                	sd	s1,40(sp)
+    80001388:	f04a                	sd	s2,32(sp)
+    8000138a:	ec4e                	sd	s3,24(sp)
+    8000138c:	e852                	sd	s4,16(sp)
+    8000138e:	e456                	sd	s5,8(sp)
+    80001390:	0080                	addi	s0,sp,64
+    80001392:	8a2a                	mv	s4,a0
+    80001394:	00009497          	auipc	s1,0x9
+    80001398:	2cc48493          	addi	s1,s1,716 # 8000a660 <proc>
+    8000139c:	4989                	li	s3,2
+    8000139e:	4a8d                	li	s5,3
+    800013a0:	0000f917          	auipc	s2,0xf
+    800013a4:	cc090913          	addi	s2,s2,-832 # 80010060 <tickslock>
+    800013a8:	a801                	j	800013b8 <wakeup+0x38>
+    800013aa:	8526                	mv	a0,s1
+    800013ac:	40c040ef          	jal	800057b8 <release>
+    800013b0:	16848493          	addi	s1,s1,360
+    800013b4:	03248263          	beq	s1,s2,800013d8 <wakeup+0x58>
+    800013b8:	9afff0ef          	jal	80000d66 <myproc>
+    800013bc:	fea48ae3          	beq	s1,a0,800013b0 <wakeup+0x30>
+    800013c0:	8526                	mv	a0,s1
+    800013c2:	35e040ef          	jal	80005720 <acquire>
+    800013c6:	4c9c                	lw	a5,24(s1)
+    800013c8:	ff3791e3          	bne	a5,s3,800013aa <wakeup+0x2a>
+    800013cc:	709c                	ld	a5,32(s1)
+    800013ce:	fd479ee3          	bne	a5,s4,800013aa <wakeup+0x2a>
+    800013d2:	0154ac23          	sw	s5,24(s1)
+    800013d6:	bfd1                	j	800013aa <wakeup+0x2a>
+    800013d8:	70e2                	ld	ra,56(sp)
+    800013da:	7442                	ld	s0,48(sp)
+    800013dc:	74a2                	ld	s1,40(sp)
+    800013de:	7902                	ld	s2,32(sp)
+    800013e0:	69e2                	ld	s3,24(sp)
+    800013e2:	6a42                	ld	s4,16(sp)
+    800013e4:	6aa2                	ld	s5,8(sp)
+    800013e6:	6121                	addi	sp,sp,64
+    800013e8:	8082                	ret
+
+00000000800013ea <reparent>:
+    800013ea:	7179                	addi	sp,sp,-48
+    800013ec:	f406                	sd	ra,40(sp)
+    800013ee:	f022                	sd	s0,32(sp)
+    800013f0:	ec26                	sd	s1,24(sp)
+    800013f2:	e84a                	sd	s2,16(sp)
+    800013f4:	e44e                	sd	s3,8(sp)
+    800013f6:	e052                	sd	s4,0(sp)
+    800013f8:	1800                	addi	s0,sp,48
+    800013fa:	892a                	mv	s2,a0
+    800013fc:	00009497          	auipc	s1,0x9
+    80001400:	26448493          	addi	s1,s1,612 # 8000a660 <proc>
+    80001404:	00009a17          	auipc	s4,0x9
+    80001408:	deca0a13          	addi	s4,s4,-532 # 8000a1f0 <initproc>
+    8000140c:	0000f997          	auipc	s3,0xf
+    80001410:	c5498993          	addi	s3,s3,-940 # 80010060 <tickslock>
+    80001414:	a029                	j	8000141e <reparent+0x34>
+    80001416:	16848493          	addi	s1,s1,360
+    8000141a:	01348b63          	beq	s1,s3,80001430 <reparent+0x46>
+    8000141e:	7c9c                	ld	a5,56(s1)
+    80001420:	ff279be3          	bne	a5,s2,80001416 <reparent+0x2c>
+    80001424:	000a3503          	ld	a0,0(s4)
+    80001428:	fc88                	sd	a0,56(s1)
+    8000142a:	f57ff0ef          	jal	80001380 <wakeup>
+    8000142e:	b7e5                	j	80001416 <reparent+0x2c>
+    80001430:	70a2                	ld	ra,40(sp)
+    80001432:	7402                	ld	s0,32(sp)
+    80001434:	64e2                	ld	s1,24(sp)
+    80001436:	6942                	ld	s2,16(sp)
+    80001438:	69a2                	ld	s3,8(sp)
+    8000143a:	6a02                	ld	s4,0(sp)
+    8000143c:	6145                	addi	sp,sp,48
+    8000143e:	8082                	ret
+
+0000000080001440 <exit>:
+    80001440:	7179                	addi	sp,sp,-48
+    80001442:	f406                	sd	ra,40(sp)
+    80001444:	f022                	sd	s0,32(sp)
+    80001446:	ec26                	sd	s1,24(sp)
+    80001448:	e84a                	sd	s2,16(sp)
+    8000144a:	e44e                	sd	s3,8(sp)
+    8000144c:	e052                	sd	s4,0(sp)
+    8000144e:	1800                	addi	s0,sp,48
+    80001450:	8a2a                	mv	s4,a0
+    80001452:	915ff0ef          	jal	80000d66 <myproc>
+    80001456:	89aa                	mv	s3,a0
+    80001458:	00009797          	auipc	a5,0x9
+    8000145c:	d987b783          	ld	a5,-616(a5) # 8000a1f0 <initproc>
+    80001460:	0d050493          	addi	s1,a0,208
+    80001464:	15050913          	addi	s2,a0,336
+    80001468:	00a79f63          	bne	a5,a0,80001486 <exit+0x46>
+    8000146c:	00006517          	auipc	a0,0x6
+    80001470:	db450513          	addi	a0,a0,-588 # 80007220 <etext+0x220>
+    80001474:	77f030ef          	jal	800053f2 <panic>
+    80001478:	67f010ef          	jal	800032f6 <fileclose>
+    8000147c:	0004b023          	sd	zero,0(s1)
+    80001480:	04a1                	addi	s1,s1,8
+    80001482:	01248563          	beq	s1,s2,8000148c <exit+0x4c>
+    80001486:	6088                	ld	a0,0(s1)
+    80001488:	f965                	bnez	a0,80001478 <exit+0x38>
+    8000148a:	bfdd                	j	80001480 <exit+0x40>
+    8000148c:	251010ef          	jal	80002edc <begin_op>
+    80001490:	1509b503          	ld	a0,336(s3)
+    80001494:	334010ef          	jal	800027c8 <iput>
+    80001498:	2af010ef          	jal	80002f46 <end_op>
+    8000149c:	1409b823          	sd	zero,336(s3)
+    800014a0:	00009497          	auipc	s1,0x9
+    800014a4:	da848493          	addi	s1,s1,-600 # 8000a248 <wait_lock>
+    800014a8:	8526                	mv	a0,s1
+    800014aa:	276040ef          	jal	80005720 <acquire>
+    800014ae:	854e                	mv	a0,s3
+    800014b0:	f3bff0ef          	jal	800013ea <reparent>
+    800014b4:	0389b503          	ld	a0,56(s3)
+    800014b8:	ec9ff0ef          	jal	80001380 <wakeup>
+    800014bc:	854e                	mv	a0,s3
+    800014be:	262040ef          	jal	80005720 <acquire>
+    800014c2:	0349a623          	sw	s4,44(s3)
+    800014c6:	4795                	li	a5,5
+    800014c8:	00f9ac23          	sw	a5,24(s3)
+    800014cc:	8526                	mv	a0,s1
+    800014ce:	2ea040ef          	jal	800057b8 <release>
+    800014d2:	d7dff0ef          	jal	8000124e <sched>
+    800014d6:	00006517          	auipc	a0,0x6
+    800014da:	d5a50513          	addi	a0,a0,-678 # 80007230 <etext+0x230>
+    800014de:	715030ef          	jal	800053f2 <panic>
+
+00000000800014e2 <kill>:
+    800014e2:	7179                	addi	sp,sp,-48
+    800014e4:	f406                	sd	ra,40(sp)
+    800014e6:	f022                	sd	s0,32(sp)
+    800014e8:	ec26                	sd	s1,24(sp)
+    800014ea:	e84a                	sd	s2,16(sp)
+    800014ec:	e44e                	sd	s3,8(sp)
+    800014ee:	1800                	addi	s0,sp,48
+    800014f0:	892a                	mv	s2,a0
+    800014f2:	00009497          	auipc	s1,0x9
+    800014f6:	16e48493          	addi	s1,s1,366 # 8000a660 <proc>
+    800014fa:	0000f997          	auipc	s3,0xf
+    800014fe:	b6698993          	addi	s3,s3,-1178 # 80010060 <tickslock>
+    80001502:	8526                	mv	a0,s1
+    80001504:	21c040ef          	jal	80005720 <acquire>
+    80001508:	589c                	lw	a5,48(s1)
+    8000150a:	01278b63          	beq	a5,s2,80001520 <kill+0x3e>
+    8000150e:	8526                	mv	a0,s1
+    80001510:	2a8040ef          	jal	800057b8 <release>
+    80001514:	16848493          	addi	s1,s1,360
+    80001518:	ff3495e3          	bne	s1,s3,80001502 <kill+0x20>
+    8000151c:	557d                	li	a0,-1
+    8000151e:	a819                	j	80001534 <kill+0x52>
+    80001520:	4785                	li	a5,1
+    80001522:	d49c                	sw	a5,40(s1)
+    80001524:	4c98                	lw	a4,24(s1)
+    80001526:	4789                	li	a5,2
+    80001528:	00f70d63          	beq	a4,a5,80001542 <kill+0x60>
+    8000152c:	8526                	mv	a0,s1
+    8000152e:	28a040ef          	jal	800057b8 <release>
+    80001532:	4501                	li	a0,0
+    80001534:	70a2                	ld	ra,40(sp)
+    80001536:	7402                	ld	s0,32(sp)
+    80001538:	64e2                	ld	s1,24(sp)
+    8000153a:	6942                	ld	s2,16(sp)
+    8000153c:	69a2                	ld	s3,8(sp)
+    8000153e:	6145                	addi	sp,sp,48
+    80001540:	8082                	ret
+    80001542:	478d                	li	a5,3
+    80001544:	cc9c                	sw	a5,24(s1)
+    80001546:	b7dd                	j	8000152c <kill+0x4a>
+
+0000000080001548 <setkilled>:
+    80001548:	1101                	addi	sp,sp,-32
+    8000154a:	ec06                	sd	ra,24(sp)
+    8000154c:	e822                	sd	s0,16(sp)
+    8000154e:	e426                	sd	s1,8(sp)
+    80001550:	1000                	addi	s0,sp,32
+    80001552:	84aa                	mv	s1,a0
+    80001554:	1cc040ef          	jal	80005720 <acquire>
+    80001558:	4785                	li	a5,1
+    8000155a:	d49c                	sw	a5,40(s1)
+    8000155c:	8526                	mv	a0,s1
+    8000155e:	25a040ef          	jal	800057b8 <release>
+    80001562:	60e2                	ld	ra,24(sp)
+    80001564:	6442                	ld	s0,16(sp)
+    80001566:	64a2                	ld	s1,8(sp)
+    80001568:	6105                	addi	sp,sp,32
+    8000156a:	8082                	ret
+
+000000008000156c <killed>:
+    8000156c:	1101                	addi	sp,sp,-32
+    8000156e:	ec06                	sd	ra,24(sp)
+    80001570:	e822                	sd	s0,16(sp)
+    80001572:	e426                	sd	s1,8(sp)
+    80001574:	e04a                	sd	s2,0(sp)
+    80001576:	1000                	addi	s0,sp,32
+    80001578:	84aa                	mv	s1,a0
+    8000157a:	1a6040ef          	jal	80005720 <acquire>
+    8000157e:	0284a903          	lw	s2,40(s1)
+    80001582:	8526                	mv	a0,s1
+    80001584:	234040ef          	jal	800057b8 <release>
+    80001588:	854a                	mv	a0,s2
+    8000158a:	60e2                	ld	ra,24(sp)
+    8000158c:	6442                	ld	s0,16(sp)
+    8000158e:	64a2                	ld	s1,8(sp)
+    80001590:	6902                	ld	s2,0(sp)
+    80001592:	6105                	addi	sp,sp,32
+    80001594:	8082                	ret
+
+0000000080001596 <wait>:
+    80001596:	715d                	addi	sp,sp,-80
+    80001598:	e486                	sd	ra,72(sp)
+    8000159a:	e0a2                	sd	s0,64(sp)
+    8000159c:	fc26                	sd	s1,56(sp)
+    8000159e:	f84a                	sd	s2,48(sp)
+    800015a0:	f44e                	sd	s3,40(sp)
+    800015a2:	f052                	sd	s4,32(sp)
+    800015a4:	ec56                	sd	s5,24(sp)
+    800015a6:	e85a                	sd	s6,16(sp)
+    800015a8:	e45e                	sd	s7,8(sp)
+    800015aa:	e062                	sd	s8,0(sp)
+    800015ac:	0880                	addi	s0,sp,80
+    800015ae:	8b2a                	mv	s6,a0
+    800015b0:	fb6ff0ef          	jal	80000d66 <myproc>
+    800015b4:	892a                	mv	s2,a0
+    800015b6:	00009517          	auipc	a0,0x9
+    800015ba:	c9250513          	addi	a0,a0,-878 # 8000a248 <wait_lock>
+    800015be:	162040ef          	jal	80005720 <acquire>
+    800015c2:	4b81                	li	s7,0
+    800015c4:	4a15                	li	s4,5
+    800015c6:	4a85                	li	s5,1
+    800015c8:	0000f997          	auipc	s3,0xf
+    800015cc:	a9898993          	addi	s3,s3,-1384 # 80010060 <tickslock>
+    800015d0:	00009c17          	auipc	s8,0x9
+    800015d4:	c78c0c13          	addi	s8,s8,-904 # 8000a248 <wait_lock>
+    800015d8:	a871                	j	80001674 <wait+0xde>
+    800015da:	0304a983          	lw	s3,48(s1)
+    800015de:	000b0c63          	beqz	s6,800015f6 <wait+0x60>
+    800015e2:	4691                	li	a3,4
+    800015e4:	02c48613          	addi	a2,s1,44
+    800015e8:	85da                	mv	a1,s6
+    800015ea:	05093503          	ld	a0,80(s2)
+    800015ee:	beaff0ef          	jal	800009d8 <copyout>
+    800015f2:	02054b63          	bltz	a0,80001628 <wait+0x92>
+    800015f6:	8526                	mv	a0,s1
+    800015f8:	8e1ff0ef          	jal	80000ed8 <freeproc>
+    800015fc:	8526                	mv	a0,s1
+    800015fe:	1ba040ef          	jal	800057b8 <release>
+    80001602:	00009517          	auipc	a0,0x9
+    80001606:	c4650513          	addi	a0,a0,-954 # 8000a248 <wait_lock>
+    8000160a:	1ae040ef          	jal	800057b8 <release>
+    8000160e:	854e                	mv	a0,s3
+    80001610:	60a6                	ld	ra,72(sp)
+    80001612:	6406                	ld	s0,64(sp)
+    80001614:	74e2                	ld	s1,56(sp)
+    80001616:	7942                	ld	s2,48(sp)
+    80001618:	79a2                	ld	s3,40(sp)
+    8000161a:	7a02                	ld	s4,32(sp)
+    8000161c:	6ae2                	ld	s5,24(sp)
+    8000161e:	6b42                	ld	s6,16(sp)
+    80001620:	6ba2                	ld	s7,8(sp)
+    80001622:	6c02                	ld	s8,0(sp)
+    80001624:	6161                	addi	sp,sp,80
+    80001626:	8082                	ret
+    80001628:	8526                	mv	a0,s1
+    8000162a:	18e040ef          	jal	800057b8 <release>
+    8000162e:	00009517          	auipc	a0,0x9
+    80001632:	c1a50513          	addi	a0,a0,-998 # 8000a248 <wait_lock>
+    80001636:	182040ef          	jal	800057b8 <release>
+    8000163a:	59fd                	li	s3,-1
+    8000163c:	bfc9                	j	8000160e <wait+0x78>
+    8000163e:	16848493          	addi	s1,s1,360
+    80001642:	03348063          	beq	s1,s3,80001662 <wait+0xcc>
+    80001646:	7c9c                	ld	a5,56(s1)
+    80001648:	ff279be3          	bne	a5,s2,8000163e <wait+0xa8>
+    8000164c:	8526                	mv	a0,s1
+    8000164e:	0d2040ef          	jal	80005720 <acquire>
+    80001652:	4c9c                	lw	a5,24(s1)
+    80001654:	f94783e3          	beq	a5,s4,800015da <wait+0x44>
+    80001658:	8526                	mv	a0,s1
+    8000165a:	15e040ef          	jal	800057b8 <release>
+    8000165e:	8756                	mv	a4,s5
+    80001660:	bff9                	j	8000163e <wait+0xa8>
+    80001662:	cf19                	beqz	a4,80001680 <wait+0xea>
+    80001664:	854a                	mv	a0,s2
+    80001666:	f07ff0ef          	jal	8000156c <killed>
+    8000166a:	e919                	bnez	a0,80001680 <wait+0xea>
+    8000166c:	85e2                	mv	a1,s8
+    8000166e:	854a                	mv	a0,s2
+    80001670:	cc5ff0ef          	jal	80001334 <sleep>
+    80001674:	875e                	mv	a4,s7
+    80001676:	00009497          	auipc	s1,0x9
+    8000167a:	fea48493          	addi	s1,s1,-22 # 8000a660 <proc>
+    8000167e:	b7e1                	j	80001646 <wait+0xb0>
+    80001680:	00009517          	auipc	a0,0x9
+    80001684:	bc850513          	addi	a0,a0,-1080 # 8000a248 <wait_lock>
+    80001688:	130040ef          	jal	800057b8 <release>
+    8000168c:	59fd                	li	s3,-1
+    8000168e:	b741                	j	8000160e <wait+0x78>
+
+0000000080001690 <either_copyout>:
+    80001690:	7179                	addi	sp,sp,-48
+    80001692:	f406                	sd	ra,40(sp)
+    80001694:	f022                	sd	s0,32(sp)
+    80001696:	ec26                	sd	s1,24(sp)
+    80001698:	e84a                	sd	s2,16(sp)
+    8000169a:	e44e                	sd	s3,8(sp)
+    8000169c:	e052                	sd	s4,0(sp)
+    8000169e:	1800                	addi	s0,sp,48
+    800016a0:	84aa                	mv	s1,a0
+    800016a2:	892e                	mv	s2,a1
+    800016a4:	89b2                	mv	s3,a2
+    800016a6:	8a36                	mv	s4,a3
+    800016a8:	ebeff0ef          	jal	80000d66 <myproc>
+    800016ac:	cc99                	beqz	s1,800016ca <either_copyout+0x3a>
+    800016ae:	86d2                	mv	a3,s4
+    800016b0:	864e                	mv	a2,s3
+    800016b2:	85ca                	mv	a1,s2
+    800016b4:	6928                	ld	a0,80(a0)
+    800016b6:	b22ff0ef          	jal	800009d8 <copyout>
+    800016ba:	70a2                	ld	ra,40(sp)
+    800016bc:	7402                	ld	s0,32(sp)
+    800016be:	64e2                	ld	s1,24(sp)
+    800016c0:	6942                	ld	s2,16(sp)
+    800016c2:	69a2                	ld	s3,8(sp)
+    800016c4:	6a02                	ld	s4,0(sp)
+    800016c6:	6145                	addi	sp,sp,48
+    800016c8:	8082                	ret
+    800016ca:	000a061b          	sext.w	a2,s4
+    800016ce:	85ce                	mv	a1,s3
+    800016d0:	854a                	mv	a0,s2
+    800016d2:	ad9fe0ef          	jal	800001aa <memmove>
+    800016d6:	8526                	mv	a0,s1
+    800016d8:	b7cd                	j	800016ba <either_copyout+0x2a>
+
+00000000800016da <either_copyin>:
+    800016da:	7179                	addi	sp,sp,-48
+    800016dc:	f406                	sd	ra,40(sp)
+    800016de:	f022                	sd	s0,32(sp)
+    800016e0:	ec26                	sd	s1,24(sp)
+    800016e2:	e84a                	sd	s2,16(sp)
+    800016e4:	e44e                	sd	s3,8(sp)
+    800016e6:	e052                	sd	s4,0(sp)
+    800016e8:	1800                	addi	s0,sp,48
+    800016ea:	892a                	mv	s2,a0
+    800016ec:	84ae                	mv	s1,a1
+    800016ee:	89b2                	mv	s3,a2
+    800016f0:	8a36                	mv	s4,a3
+    800016f2:	e74ff0ef          	jal	80000d66 <myproc>
+    800016f6:	cc99                	beqz	s1,80001714 <either_copyin+0x3a>
+    800016f8:	86d2                	mv	a3,s4
+    800016fa:	864e                	mv	a2,s3
+    800016fc:	85ca                	mv	a1,s2
+    800016fe:	6928                	ld	a0,80(a0)
+    80001700:	baeff0ef          	jal	80000aae <copyin>
+    80001704:	70a2                	ld	ra,40(sp)
+    80001706:	7402                	ld	s0,32(sp)
+    80001708:	64e2                	ld	s1,24(sp)
+    8000170a:	6942                	ld	s2,16(sp)
+    8000170c:	69a2                	ld	s3,8(sp)
+    8000170e:	6a02                	ld	s4,0(sp)
+    80001710:	6145                	addi	sp,sp,48
+    80001712:	8082                	ret
+    80001714:	000a061b          	sext.w	a2,s4
+    80001718:	85ce                	mv	a1,s3
+    8000171a:	854a                	mv	a0,s2
+    8000171c:	a8ffe0ef          	jal	800001aa <memmove>
+    80001720:	8526                	mv	a0,s1
+    80001722:	b7cd                	j	80001704 <either_copyin+0x2a>
+
+0000000080001724 <procdump>:
+    80001724:	715d                	addi	sp,sp,-80
+    80001726:	e486                	sd	ra,72(sp)
+    80001728:	e0a2                	sd	s0,64(sp)
+    8000172a:	fc26                	sd	s1,56(sp)
+    8000172c:	f84a                	sd	s2,48(sp)
+    8000172e:	f44e                	sd	s3,40(sp)
+    80001730:	f052                	sd	s4,32(sp)
+    80001732:	ec56                	sd	s5,24(sp)
+    80001734:	e85a                	sd	s6,16(sp)
+    80001736:	e45e                	sd	s7,8(sp)
+    80001738:	0880                	addi	s0,sp,80
+    8000173a:	00006517          	auipc	a0,0x6
+    8000173e:	8de50513          	addi	a0,a0,-1826 # 80007018 <etext+0x18>
+    80001742:	1df030ef          	jal	80005120 <printf>
+    80001746:	00009497          	auipc	s1,0x9
+    8000174a:	07248493          	addi	s1,s1,114 # 8000a7b8 <proc+0x158>
+    8000174e:	0000f917          	auipc	s2,0xf
+    80001752:	a6a90913          	addi	s2,s2,-1430 # 800101b8 <bcache+0x140>
+    80001756:	4b15                	li	s6,5
+    80001758:	00006997          	auipc	s3,0x6
+    8000175c:	ae898993          	addi	s3,s3,-1304 # 80007240 <etext+0x240>
+    80001760:	00006a97          	auipc	s5,0x6
+    80001764:	ae8a8a93          	addi	s5,s5,-1304 # 80007248 <etext+0x248>
+    80001768:	00006a17          	auipc	s4,0x6
+    8000176c:	8b0a0a13          	addi	s4,s4,-1872 # 80007018 <etext+0x18>
+    80001770:	00006b97          	auipc	s7,0x6
+    80001774:	000b8b93          	mv	s7,s7
+    80001778:	a829                	j	80001792 <procdump+0x6e>
+    8000177a:	ed86a583          	lw	a1,-296(a3)
+    8000177e:	8556                	mv	a0,s5
+    80001780:	1a1030ef          	jal	80005120 <printf>
+    80001784:	8552                	mv	a0,s4
+    80001786:	19b030ef          	jal	80005120 <printf>
+    8000178a:	16848493          	addi	s1,s1,360
+    8000178e:	03248263          	beq	s1,s2,800017b2 <procdump+0x8e>
+    80001792:	86a6                	mv	a3,s1
+    80001794:	ec04a783          	lw	a5,-320(s1)
+    80001798:	dbed                	beqz	a5,8000178a <procdump+0x66>
+    8000179a:	864e                	mv	a2,s3
+    8000179c:	fcfb6fe3          	bltu	s6,a5,8000177a <procdump+0x56>
+    800017a0:	02079713          	slli	a4,a5,0x20
+    800017a4:	01d75793          	srli	a5,a4,0x1d
+    800017a8:	97de                	add	a5,a5,s7
+    800017aa:	6390                	ld	a2,0(a5)
+    800017ac:	f679                	bnez	a2,8000177a <procdump+0x56>
+    800017ae:	864e                	mv	a2,s3
+    800017b0:	b7e9                	j	8000177a <procdump+0x56>
+    800017b2:	60a6                	ld	ra,72(sp)
+    800017b4:	6406                	ld	s0,64(sp)
+    800017b6:	74e2                	ld	s1,56(sp)
+    800017b8:	7942                	ld	s2,48(sp)
+    800017ba:	79a2                	ld	s3,40(sp)
+    800017bc:	7a02                	ld	s4,32(sp)
+    800017be:	6ae2                	ld	s5,24(sp)
+    800017c0:	6b42                	ld	s6,16(sp)
+    800017c2:	6ba2                	ld	s7,8(sp)
+    800017c4:	6161                	addi	sp,sp,80
+    800017c6:	8082                	ret
+
+00000000800017c8 <swtch>:
+    800017c8:	00153023          	sd	ra,0(a0)
+    800017cc:	00253423          	sd	sp,8(a0)
+    800017d0:	e900                	sd	s0,16(a0)
+    800017d2:	ed04                	sd	s1,24(a0)
+    800017d4:	03253023          	sd	s2,32(a0)
+    800017d8:	03353423          	sd	s3,40(a0)
+    800017dc:	03453823          	sd	s4,48(a0)
+    800017e0:	03553c23          	sd	s5,56(a0)
+    800017e4:	05653023          	sd	s6,64(a0)
+    800017e8:	05753423          	sd	s7,72(a0)
+    800017ec:	05853823          	sd	s8,80(a0)
+    800017f0:	05953c23          	sd	s9,88(a0)
+    800017f4:	07a53023          	sd	s10,96(a0)
+    800017f8:	07b53423          	sd	s11,104(a0)
+    800017fc:	0005b083          	ld	ra,0(a1)
+    80001800:	0085b103          	ld	sp,8(a1)
+    80001804:	6980                	ld	s0,16(a1)
+    80001806:	6d84                	ld	s1,24(a1)
+    80001808:	0205b903          	ld	s2,32(a1)
+    8000180c:	0285b983          	ld	s3,40(a1)
+    80001810:	0305ba03          	ld	s4,48(a1)
+    80001814:	0385ba83          	ld	s5,56(a1)
+    80001818:	0405bb03          	ld	s6,64(a1)
+    8000181c:	0485bb83          	ld	s7,72(a1)
+    80001820:	0505bc03          	ld	s8,80(a1)
+    80001824:	0585bc83          	ld	s9,88(a1)
+    80001828:	0605bd03          	ld	s10,96(a1)
+    8000182c:	0685bd83          	ld	s11,104(a1)
+    80001830:	8082                	ret
+
+0000000080001832 <trapinit>:
+    80001832:	1141                	addi	sp,sp,-16
+    80001834:	e406                	sd	ra,8(sp)
+    80001836:	e022                	sd	s0,0(sp)
+    80001838:	0800                	addi	s0,sp,16
+    8000183a:	00006597          	auipc	a1,0x6
+    8000183e:	a4e58593          	addi	a1,a1,-1458 # 80007288 <etext+0x288>
+    80001842:	0000f517          	auipc	a0,0xf
+    80001846:	81e50513          	addi	a0,a0,-2018 # 80010060 <tickslock>
+    8000184a:	657030ef          	jal	800056a0 <initlock>
+    8000184e:	60a2                	ld	ra,8(sp)
+    80001850:	6402                	ld	s0,0(sp)
+    80001852:	0141                	addi	sp,sp,16
+    80001854:	8082                	ret
+
+0000000080001856 <trapinithart>:
+    80001856:	1141                	addi	sp,sp,-16
+    80001858:	e422                	sd	s0,8(sp)
+    8000185a:	0800                	addi	s0,sp,16
+    8000185c:	00003797          	auipc	a5,0x3
+    80001860:	e0478793          	addi	a5,a5,-508 # 80004660 <kernelvec>
+    80001864:	10579073          	csrw	stvec,a5
+    80001868:	6422                	ld	s0,8(sp)
+    8000186a:	0141                	addi	sp,sp,16
+    8000186c:	8082                	ret
+
+000000008000186e <usertrapret>:
+    8000186e:	1141                	addi	sp,sp,-16
+    80001870:	e406                	sd	ra,8(sp)
+    80001872:	e022                	sd	s0,0(sp)
+    80001874:	0800                	addi	s0,sp,16
+    80001876:	cf0ff0ef          	jal	80000d66 <myproc>
+    8000187a:	100027f3          	csrr	a5,sstatus
+    8000187e:	9bf5                	andi	a5,a5,-3
+    80001880:	10079073          	csrw	sstatus,a5
+    80001884:	00004697          	auipc	a3,0x4
+    80001888:	77c68693          	addi	a3,a3,1916 # 80006000 <_trampoline>
+    8000188c:	00004717          	auipc	a4,0x4
+    80001890:	77470713          	addi	a4,a4,1908 # 80006000 <_trampoline>
+    80001894:	8f15                	sub	a4,a4,a3
+    80001896:	040007b7          	lui	a5,0x4000
+    8000189a:	17fd                	addi	a5,a5,-1 # 3ffffff <_entry-0x7c000001>
+    8000189c:	07b2                	slli	a5,a5,0xc
+    8000189e:	973e                	add	a4,a4,a5
+    800018a0:	10571073          	csrw	stvec,a4
+    800018a4:	6d38                	ld	a4,88(a0)
+    800018a6:	18002673          	csrr	a2,satp
+    800018aa:	e310                	sd	a2,0(a4)
+    800018ac:	6d30                	ld	a2,88(a0)
+    800018ae:	6138                	ld	a4,64(a0)
+    800018b0:	6585                	lui	a1,0x1
+    800018b2:	972e                	add	a4,a4,a1
+    800018b4:	e618                	sd	a4,8(a2)
+    800018b6:	6d38                	ld	a4,88(a0)
+    800018b8:	00000617          	auipc	a2,0x0
+    800018bc:	11060613          	addi	a2,a2,272 # 800019c8 <usertrap>
+    800018c0:	eb10                	sd	a2,16(a4)
+    800018c2:	6d38                	ld	a4,88(a0)
+    800018c4:	8612                	mv	a2,tp
+    800018c6:	f310                	sd	a2,32(a4)
+    800018c8:	10002773          	csrr	a4,sstatus
+    800018cc:	eff77713          	andi	a4,a4,-257
+    800018d0:	02076713          	ori	a4,a4,32
+    800018d4:	10071073          	csrw	sstatus,a4
+    800018d8:	6d38                	ld	a4,88(a0)
+    800018da:	6f18                	ld	a4,24(a4)
+    800018dc:	14171073          	csrw	sepc,a4
+    800018e0:	6928                	ld	a0,80(a0)
+    800018e2:	8131                	srli	a0,a0,0xc
+    800018e4:	00004717          	auipc	a4,0x4
+    800018e8:	7b870713          	addi	a4,a4,1976 # 8000609c <userret>
+    800018ec:	8f15                	sub	a4,a4,a3
+    800018ee:	97ba                	add	a5,a5,a4
+    800018f0:	577d                	li	a4,-1
+    800018f2:	177e                	slli	a4,a4,0x3f
+    800018f4:	8d59                	or	a0,a0,a4
+    800018f6:	9782                	jalr	a5
+    800018f8:	60a2                	ld	ra,8(sp)
+    800018fa:	6402                	ld	s0,0(sp)
+    800018fc:	0141                	addi	sp,sp,16
+    800018fe:	8082                	ret
+
+0000000080001900 <clockintr>:
+    80001900:	1101                	addi	sp,sp,-32
+    80001902:	ec06                	sd	ra,24(sp)
+    80001904:	e822                	sd	s0,16(sp)
+    80001906:	1000                	addi	s0,sp,32
+    80001908:	c32ff0ef          	jal	80000d3a <cpuid>
+    8000190c:	cd11                	beqz	a0,80001928 <clockintr+0x28>
+    8000190e:	c01027f3          	rdtime	a5
+    80001912:	000f4737          	lui	a4,0xf4
+    80001916:	24070713          	addi	a4,a4,576 # f4240 <_entry-0x7ff0bdc0>
+    8000191a:	97ba                	add	a5,a5,a4
+    8000191c:	14d79073          	csrw	stimecmp,a5
+    80001920:	60e2                	ld	ra,24(sp)
+    80001922:	6442                	ld	s0,16(sp)
+    80001924:	6105                	addi	sp,sp,32
+    80001926:	8082                	ret
+    80001928:	e426                	sd	s1,8(sp)
+    8000192a:	0000e497          	auipc	s1,0xe
+    8000192e:	73648493          	addi	s1,s1,1846 # 80010060 <tickslock>
+    80001932:	8526                	mv	a0,s1
+    80001934:	5ed030ef          	jal	80005720 <acquire>
+    80001938:	00009517          	auipc	a0,0x9
+    8000193c:	8c050513          	addi	a0,a0,-1856 # 8000a1f8 <ticks>
+    80001940:	411c                	lw	a5,0(a0)
+    80001942:	2785                	addiw	a5,a5,1
+    80001944:	c11c                	sw	a5,0(a0)
+    80001946:	a3bff0ef          	jal	80001380 <wakeup>
+    8000194a:	8526                	mv	a0,s1
+    8000194c:	66d030ef          	jal	800057b8 <release>
+    80001950:	64a2                	ld	s1,8(sp)
+    80001952:	bf75                	j	8000190e <clockintr+0xe>
+
+0000000080001954 <devintr>:
+    80001954:	1101                	addi	sp,sp,-32
+    80001956:	ec06                	sd	ra,24(sp)
+    80001958:	e822                	sd	s0,16(sp)
+    8000195a:	1000                	addi	s0,sp,32
+    8000195c:	14202773          	csrr	a4,scause
+    80001960:	57fd                	li	a5,-1
+    80001962:	17fe                	slli	a5,a5,0x3f
+    80001964:	07a5                	addi	a5,a5,9
+    80001966:	00f70c63          	beq	a4,a5,8000197e <devintr+0x2a>
+    8000196a:	57fd                	li	a5,-1
+    8000196c:	17fe                	slli	a5,a5,0x3f
+    8000196e:	0795                	addi	a5,a5,5
+    80001970:	4501                	li	a0,0
+    80001972:	04f70763          	beq	a4,a5,800019c0 <devintr+0x6c>
+    80001976:	60e2                	ld	ra,24(sp)
+    80001978:	6442                	ld	s0,16(sp)
+    8000197a:	6105                	addi	sp,sp,32
+    8000197c:	8082                	ret
+    8000197e:	e426                	sd	s1,8(sp)
+    80001980:	58d020ef          	jal	8000470c <plic_claim>
+    80001984:	84aa                	mv	s1,a0
+    80001986:	47a9                	li	a5,10
+    80001988:	00f50963          	beq	a0,a5,8000199a <devintr+0x46>
+    8000198c:	4785                	li	a5,1
+    8000198e:	00f50963          	beq	a0,a5,800019a0 <devintr+0x4c>
+    80001992:	4505                	li	a0,1
+    80001994:	e889                	bnez	s1,800019a6 <devintr+0x52>
+    80001996:	64a2                	ld	s1,8(sp)
+    80001998:	bff9                	j	80001976 <devintr+0x22>
+    8000199a:	4cb030ef          	jal	80005664 <uartintr>
+    8000199e:	a819                	j	800019b4 <devintr+0x60>
+    800019a0:	232030ef          	jal	80004bd2 <virtio_disk_intr>
+    800019a4:	a801                	j	800019b4 <devintr+0x60>
+    800019a6:	85a6                	mv	a1,s1
+    800019a8:	00006517          	auipc	a0,0x6
+    800019ac:	8e850513          	addi	a0,a0,-1816 # 80007290 <etext+0x290>
+    800019b0:	770030ef          	jal	80005120 <printf>
+    800019b4:	8526                	mv	a0,s1
+    800019b6:	577020ef          	jal	8000472c <plic_complete>
+    800019ba:	4505                	li	a0,1
+    800019bc:	64a2                	ld	s1,8(sp)
+    800019be:	bf65                	j	80001976 <devintr+0x22>
+    800019c0:	f41ff0ef          	jal	80001900 <clockintr>
+    800019c4:	4509                	li	a0,2
+    800019c6:	bf45                	j	80001976 <devintr+0x22>
+
+00000000800019c8 <usertrap>:
+    800019c8:	1101                	addi	sp,sp,-32
+    800019ca:	ec06                	sd	ra,24(sp)
+    800019cc:	e822                	sd	s0,16(sp)
+    800019ce:	e426                	sd	s1,8(sp)
+    800019d0:	e04a                	sd	s2,0(sp)
+    800019d2:	1000                	addi	s0,sp,32
+    800019d4:	100027f3          	csrr	a5,sstatus
+    800019d8:	1007f793          	andi	a5,a5,256
+    800019dc:	ef85                	bnez	a5,80001a14 <usertrap+0x4c>
+    800019de:	00003797          	auipc	a5,0x3
+    800019e2:	c8278793          	addi	a5,a5,-894 # 80004660 <kernelvec>
+    800019e6:	10579073          	csrw	stvec,a5
+    800019ea:	b7cff0ef          	jal	80000d66 <myproc>
+    800019ee:	84aa                	mv	s1,a0
+    800019f0:	6d3c                	ld	a5,88(a0)
+    800019f2:	14102773          	csrr	a4,sepc
+    800019f6:	ef98                	sd	a4,24(a5)
+    800019f8:	14202773          	csrr	a4,scause
+    800019fc:	47a1                	li	a5,8
+    800019fe:	02f70163          	beq	a4,a5,80001a20 <usertrap+0x58>
+    80001a02:	f53ff0ef          	jal	80001954 <devintr>
+    80001a06:	892a                	mv	s2,a0
+    80001a08:	c135                	beqz	a0,80001a6c <usertrap+0xa4>
+    80001a0a:	8526                	mv	a0,s1
+    80001a0c:	b61ff0ef          	jal	8000156c <killed>
+    80001a10:	cd1d                	beqz	a0,80001a4e <usertrap+0x86>
+    80001a12:	a81d                	j	80001a48 <usertrap+0x80>
+    80001a14:	00006517          	auipc	a0,0x6
+    80001a18:	89c50513          	addi	a0,a0,-1892 # 800072b0 <etext+0x2b0>
+    80001a1c:	1d7030ef          	jal	800053f2 <panic>
+    80001a20:	b4dff0ef          	jal	8000156c <killed>
+    80001a24:	e121                	bnez	a0,80001a64 <usertrap+0x9c>
+    80001a26:	6cb8                	ld	a4,88(s1)
+    80001a28:	6f1c                	ld	a5,24(a4)
+    80001a2a:	0791                	addi	a5,a5,4
+    80001a2c:	ef1c                	sd	a5,24(a4)
+    80001a2e:	100027f3          	csrr	a5,sstatus
+    80001a32:	0027e793          	ori	a5,a5,2
+    80001a36:	10079073          	csrw	sstatus,a5
+    80001a3a:	248000ef          	jal	80001c82 <syscall>
+    80001a3e:	8526                	mv	a0,s1
+    80001a40:	b2dff0ef          	jal	8000156c <killed>
+    80001a44:	c901                	beqz	a0,80001a54 <usertrap+0x8c>
+    80001a46:	4901                	li	s2,0
+    80001a48:	557d                	li	a0,-1
+    80001a4a:	9f7ff0ef          	jal	80001440 <exit>
+    80001a4e:	4789                	li	a5,2
+    80001a50:	04f90563          	beq	s2,a5,80001a9a <usertrap+0xd2>
+    80001a54:	e1bff0ef          	jal	8000186e <usertrapret>
+    80001a58:	60e2                	ld	ra,24(sp)
+    80001a5a:	6442                	ld	s0,16(sp)
+    80001a5c:	64a2                	ld	s1,8(sp)
+    80001a5e:	6902                	ld	s2,0(sp)
+    80001a60:	6105                	addi	sp,sp,32
+    80001a62:	8082                	ret
+    80001a64:	557d                	li	a0,-1
+    80001a66:	9dbff0ef          	jal	80001440 <exit>
+    80001a6a:	bf75                	j	80001a26 <usertrap+0x5e>
+    80001a6c:	142025f3          	csrr	a1,scause
+    80001a70:	5890                	lw	a2,48(s1)
+    80001a72:	00006517          	auipc	a0,0x6
+    80001a76:	85e50513          	addi	a0,a0,-1954 # 800072d0 <etext+0x2d0>
+    80001a7a:	6a6030ef          	jal	80005120 <printf>
+    80001a7e:	141025f3          	csrr	a1,sepc
+    80001a82:	14302673          	csrr	a2,stval
+    80001a86:	00006517          	auipc	a0,0x6
+    80001a8a:	87a50513          	addi	a0,a0,-1926 # 80007300 <etext+0x300>
+    80001a8e:	692030ef          	jal	80005120 <printf>
+    80001a92:	8526                	mv	a0,s1
+    80001a94:	ab5ff0ef          	jal	80001548 <setkilled>
+    80001a98:	b75d                	j	80001a3e <usertrap+0x76>
+    80001a9a:	86fff0ef          	jal	80001308 <yield>
+    80001a9e:	bf5d                	j	80001a54 <usertrap+0x8c>
+
+0000000080001aa0 <kerneltrap>:
+    80001aa0:	7179                	addi	sp,sp,-48
+    80001aa2:	f406                	sd	ra,40(sp)
+    80001aa4:	f022                	sd	s0,32(sp)
+    80001aa6:	ec26                	sd	s1,24(sp)
+    80001aa8:	e84a                	sd	s2,16(sp)
+    80001aaa:	e44e                	sd	s3,8(sp)
+    80001aac:	1800                	addi	s0,sp,48
+    80001aae:	14102973          	csrr	s2,sepc
+    80001ab2:	100024f3          	csrr	s1,sstatus
+    80001ab6:	142029f3          	csrr	s3,scause
+    80001aba:	1004f793          	andi	a5,s1,256
+    80001abe:	c795                	beqz	a5,80001aea <kerneltrap+0x4a>
+    80001ac0:	100027f3          	csrr	a5,sstatus
+    80001ac4:	8b89                	andi	a5,a5,2
+    80001ac6:	eb85                	bnez	a5,80001af6 <kerneltrap+0x56>
+    80001ac8:	e8dff0ef          	jal	80001954 <devintr>
+    80001acc:	c91d                	beqz	a0,80001b02 <kerneltrap+0x62>
+    80001ace:	4789                	li	a5,2
+    80001ad0:	04f50a63          	beq	a0,a5,80001b24 <kerneltrap+0x84>
+    80001ad4:	14191073          	csrw	sepc,s2
+    80001ad8:	10049073          	csrw	sstatus,s1
+    80001adc:	70a2                	ld	ra,40(sp)
+    80001ade:	7402                	ld	s0,32(sp)
+    80001ae0:	64e2                	ld	s1,24(sp)
+    80001ae2:	6942                	ld	s2,16(sp)
+    80001ae4:	69a2                	ld	s3,8(sp)
+    80001ae6:	6145                	addi	sp,sp,48
+    80001ae8:	8082                	ret
+    80001aea:	00006517          	auipc	a0,0x6
+    80001aee:	83e50513          	addi	a0,a0,-1986 # 80007328 <etext+0x328>
+    80001af2:	101030ef          	jal	800053f2 <panic>
+    80001af6:	00006517          	auipc	a0,0x6
+    80001afa:	85a50513          	addi	a0,a0,-1958 # 80007350 <etext+0x350>
+    80001afe:	0f5030ef          	jal	800053f2 <panic>
+    80001b02:	14102673          	csrr	a2,sepc
+    80001b06:	143026f3          	csrr	a3,stval
+    80001b0a:	85ce                	mv	a1,s3
+    80001b0c:	00006517          	auipc	a0,0x6
+    80001b10:	86450513          	addi	a0,a0,-1948 # 80007370 <etext+0x370>
+    80001b14:	60c030ef          	jal	80005120 <printf>
+    80001b18:	00006517          	auipc	a0,0x6
+    80001b1c:	88050513          	addi	a0,a0,-1920 # 80007398 <etext+0x398>
+    80001b20:	0d3030ef          	jal	800053f2 <panic>
+    80001b24:	a42ff0ef          	jal	80000d66 <myproc>
+    80001b28:	d555                	beqz	a0,80001ad4 <kerneltrap+0x34>
+    80001b2a:	fdeff0ef          	jal	80001308 <yield>
+    80001b2e:	b75d                	j	80001ad4 <kerneltrap+0x34>
+
+0000000080001b30 <argraw>:
+    80001b30:	1101                	addi	sp,sp,-32
+    80001b32:	ec06                	sd	ra,24(sp)
+    80001b34:	e822                	sd	s0,16(sp)
+    80001b36:	e426                	sd	s1,8(sp)
+    80001b38:	1000                	addi	s0,sp,32
+    80001b3a:	84aa                	mv	s1,a0
+    80001b3c:	a2aff0ef          	jal	80000d66 <myproc>
+    80001b40:	4795                	li	a5,5
+    80001b42:	0497e163          	bltu	a5,s1,80001b84 <argraw+0x54>
+    80001b46:	048a                	slli	s1,s1,0x2
+    80001b48:	00006717          	auipc	a4,0x6
+    80001b4c:	c5870713          	addi	a4,a4,-936 # 800077a0 <states.0+0x30>
+    80001b50:	94ba                	add	s1,s1,a4
+    80001b52:	409c                	lw	a5,0(s1)
+    80001b54:	97ba                	add	a5,a5,a4
+    80001b56:	8782                	jr	a5
+    80001b58:	6d3c                	ld	a5,88(a0)
+    80001b5a:	7ba8                	ld	a0,112(a5)
+    80001b5c:	60e2                	ld	ra,24(sp)
+    80001b5e:	6442                	ld	s0,16(sp)
+    80001b60:	64a2                	ld	s1,8(sp)
+    80001b62:	6105                	addi	sp,sp,32
+    80001b64:	8082                	ret
+    80001b66:	6d3c                	ld	a5,88(a0)
+    80001b68:	7fa8                	ld	a0,120(a5)
+    80001b6a:	bfcd                	j	80001b5c <argraw+0x2c>
+    80001b6c:	6d3c                	ld	a5,88(a0)
+    80001b6e:	63c8                	ld	a0,128(a5)
+    80001b70:	b7f5                	j	80001b5c <argraw+0x2c>
+    80001b72:	6d3c                	ld	a5,88(a0)
+    80001b74:	67c8                	ld	a0,136(a5)
+    80001b76:	b7dd                	j	80001b5c <argraw+0x2c>
+    80001b78:	6d3c                	ld	a5,88(a0)
+    80001b7a:	6bc8                	ld	a0,144(a5)
+    80001b7c:	b7c5                	j	80001b5c <argraw+0x2c>
+    80001b7e:	6d3c                	ld	a5,88(a0)
+    80001b80:	6fc8                	ld	a0,152(a5)
+    80001b82:	bfe9                	j	80001b5c <argraw+0x2c>
+    80001b84:	00006517          	auipc	a0,0x6
+    80001b88:	82450513          	addi	a0,a0,-2012 # 800073a8 <etext+0x3a8>
+    80001b8c:	067030ef          	jal	800053f2 <panic>
+
+0000000080001b90 <fetchaddr>:
+    80001b90:	1101                	addi	sp,sp,-32
+    80001b92:	ec06                	sd	ra,24(sp)
+    80001b94:	e822                	sd	s0,16(sp)
+    80001b96:	e426                	sd	s1,8(sp)
+    80001b98:	e04a                	sd	s2,0(sp)
+    80001b9a:	1000                	addi	s0,sp,32
+    80001b9c:	84aa                	mv	s1,a0
+    80001b9e:	892e                	mv	s2,a1
+    80001ba0:	9c6ff0ef          	jal	80000d66 <myproc>
+    80001ba4:	653c                	ld	a5,72(a0)
+    80001ba6:	02f4f663          	bgeu	s1,a5,80001bd2 <fetchaddr+0x42>
+    80001baa:	00848713          	addi	a4,s1,8
+    80001bae:	02e7e463          	bltu	a5,a4,80001bd6 <fetchaddr+0x46>
+    80001bb2:	46a1                	li	a3,8
+    80001bb4:	8626                	mv	a2,s1
+    80001bb6:	85ca                	mv	a1,s2
+    80001bb8:	6928                	ld	a0,80(a0)
+    80001bba:	ef5fe0ef          	jal	80000aae <copyin>
+    80001bbe:	00a03533          	snez	a0,a0
+    80001bc2:	40a00533          	neg	a0,a0
+    80001bc6:	60e2                	ld	ra,24(sp)
+    80001bc8:	6442                	ld	s0,16(sp)
+    80001bca:	64a2                	ld	s1,8(sp)
+    80001bcc:	6902                	ld	s2,0(sp)
+    80001bce:	6105                	addi	sp,sp,32
+    80001bd0:	8082                	ret
+    80001bd2:	557d                	li	a0,-1
+    80001bd4:	bfcd                	j	80001bc6 <fetchaddr+0x36>
+    80001bd6:	557d                	li	a0,-1
+    80001bd8:	b7fd                	j	80001bc6 <fetchaddr+0x36>
+
+0000000080001bda <fetchstr>:
+    80001bda:	7179                	addi	sp,sp,-48
+    80001bdc:	f406                	sd	ra,40(sp)
+    80001bde:	f022                	sd	s0,32(sp)
+    80001be0:	ec26                	sd	s1,24(sp)
+    80001be2:	e84a                	sd	s2,16(sp)
+    80001be4:	e44e                	sd	s3,8(sp)
+    80001be6:	1800                	addi	s0,sp,48
+    80001be8:	892a                	mv	s2,a0
+    80001bea:	84ae                	mv	s1,a1
+    80001bec:	89b2                	mv	s3,a2
+    80001bee:	978ff0ef          	jal	80000d66 <myproc>
+    80001bf2:	86ce                	mv	a3,s3
+    80001bf4:	864a                	mv	a2,s2
+    80001bf6:	85a6                	mv	a1,s1
+    80001bf8:	6928                	ld	a0,80(a0)
+    80001bfa:	f3bfe0ef          	jal	80000b34 <copyinstr>
+    80001bfe:	00054c63          	bltz	a0,80001c16 <fetchstr+0x3c>
+    80001c02:	8526                	mv	a0,s1
+    80001c04:	ebafe0ef          	jal	800002be <strlen>
+    80001c08:	70a2                	ld	ra,40(sp)
+    80001c0a:	7402                	ld	s0,32(sp)
+    80001c0c:	64e2                	ld	s1,24(sp)
+    80001c0e:	6942                	ld	s2,16(sp)
+    80001c10:	69a2                	ld	s3,8(sp)
+    80001c12:	6145                	addi	sp,sp,48
+    80001c14:	8082                	ret
+    80001c16:	557d                	li	a0,-1
+    80001c18:	bfc5                	j	80001c08 <fetchstr+0x2e>
+
+0000000080001c1a <argint>:
+    80001c1a:	1101                	addi	sp,sp,-32
+    80001c1c:	ec06                	sd	ra,24(sp)
+    80001c1e:	e822                	sd	s0,16(sp)
+    80001c20:	e426                	sd	s1,8(sp)
+    80001c22:	1000                	addi	s0,sp,32
+    80001c24:	84ae                	mv	s1,a1
+    80001c26:	f0bff0ef          	jal	80001b30 <argraw>
+    80001c2a:	c088                	sw	a0,0(s1)
+    80001c2c:	60e2                	ld	ra,24(sp)
+    80001c2e:	6442                	ld	s0,16(sp)
+    80001c30:	64a2                	ld	s1,8(sp)
+    80001c32:	6105                	addi	sp,sp,32
+    80001c34:	8082                	ret
+
+0000000080001c36 <argaddr>:
+    80001c36:	1101                	addi	sp,sp,-32
+    80001c38:	ec06                	sd	ra,24(sp)
+    80001c3a:	e822                	sd	s0,16(sp)
+    80001c3c:	e426                	sd	s1,8(sp)
+    80001c3e:	1000                	addi	s0,sp,32
+    80001c40:	84ae                	mv	s1,a1
+    80001c42:	eefff0ef          	jal	80001b30 <argraw>
+    80001c46:	e088                	sd	a0,0(s1)
+    80001c48:	60e2                	ld	ra,24(sp)
+    80001c4a:	6442                	ld	s0,16(sp)
+    80001c4c:	64a2                	ld	s1,8(sp)
+    80001c4e:	6105                	addi	sp,sp,32
+    80001c50:	8082                	ret
+
+0000000080001c52 <argstr>:
+    80001c52:	7179                	addi	sp,sp,-48
+    80001c54:	f406                	sd	ra,40(sp)
+    80001c56:	f022                	sd	s0,32(sp)
+    80001c58:	ec26                	sd	s1,24(sp)
+    80001c5a:	e84a                	sd	s2,16(sp)
+    80001c5c:	1800                	addi	s0,sp,48
+    80001c5e:	84ae                	mv	s1,a1
+    80001c60:	8932                	mv	s2,a2
+    80001c62:	fd840593          	addi	a1,s0,-40
+    80001c66:	fd1ff0ef          	jal	80001c36 <argaddr>
+    80001c6a:	864a                	mv	a2,s2
+    80001c6c:	85a6                	mv	a1,s1
+    80001c6e:	fd843503          	ld	a0,-40(s0)
+    80001c72:	f69ff0ef          	jal	80001bda <fetchstr>
+    80001c76:	70a2                	ld	ra,40(sp)
+    80001c78:	7402                	ld	s0,32(sp)
+    80001c7a:	64e2                	ld	s1,24(sp)
+    80001c7c:	6942                	ld	s2,16(sp)
+    80001c7e:	6145                	addi	sp,sp,48
+    80001c80:	8082                	ret
+
+0000000080001c82 <syscall>:
+    80001c82:	1101                	addi	sp,sp,-32
+    80001c84:	ec06                	sd	ra,24(sp)
+    80001c86:	e822                	sd	s0,16(sp)
+    80001c88:	e426                	sd	s1,8(sp)
+    80001c8a:	e04a                	sd	s2,0(sp)
+    80001c8c:	1000                	addi	s0,sp,32
+    80001c8e:	8d8ff0ef          	jal	80000d66 <myproc>
+    80001c92:	84aa                	mv	s1,a0
+    80001c94:	05853903          	ld	s2,88(a0)
+    80001c98:	0a893783          	ld	a5,168(s2)
+    80001c9c:	0007869b          	sext.w	a3,a5
+    80001ca0:	37fd                	addiw	a5,a5,-1
+    80001ca2:	4751                	li	a4,20
+    80001ca4:	00f76f63          	bltu	a4,a5,80001cc2 <syscall+0x40>
+    80001ca8:	00369713          	slli	a4,a3,0x3
+    80001cac:	00006797          	auipc	a5,0x6
+    80001cb0:	b0c78793          	addi	a5,a5,-1268 # 800077b8 <syscalls>
+    80001cb4:	97ba                	add	a5,a5,a4
+    80001cb6:	639c                	ld	a5,0(a5)
+    80001cb8:	c789                	beqz	a5,80001cc2 <syscall+0x40>
+    80001cba:	9782                	jalr	a5
+    80001cbc:	06a93823          	sd	a0,112(s2)
+    80001cc0:	a829                	j	80001cda <syscall+0x58>
+    80001cc2:	15848613          	addi	a2,s1,344
+    80001cc6:	588c                	lw	a1,48(s1)
+    80001cc8:	00005517          	auipc	a0,0x5
+    80001ccc:	6e850513          	addi	a0,a0,1768 # 800073b0 <etext+0x3b0>
+    80001cd0:	450030ef          	jal	80005120 <printf>
+    80001cd4:	6cbc                	ld	a5,88(s1)
+    80001cd6:	577d                	li	a4,-1
+    80001cd8:	fbb8                	sd	a4,112(a5)
+    80001cda:	60e2                	ld	ra,24(sp)
+    80001cdc:	6442                	ld	s0,16(sp)
+    80001cde:	64a2                	ld	s1,8(sp)
+    80001ce0:	6902                	ld	s2,0(sp)
+    80001ce2:	6105                	addi	sp,sp,32
+    80001ce4:	8082                	ret
+
+0000000080001ce6 <sys_exit>:
+    80001ce6:	1101                	addi	sp,sp,-32
+    80001ce8:	ec06                	sd	ra,24(sp)
+    80001cea:	e822                	sd	s0,16(sp)
+    80001cec:	1000                	addi	s0,sp,32
+    80001cee:	fec40593          	addi	a1,s0,-20
+    80001cf2:	4501                	li	a0,0
+    80001cf4:	f27ff0ef          	jal	80001c1a <argint>
+    80001cf8:	fec42503          	lw	a0,-20(s0)
+    80001cfc:	f44ff0ef          	jal	80001440 <exit>
+    80001d00:	4501                	li	a0,0
+    80001d02:	60e2                	ld	ra,24(sp)
+    80001d04:	6442                	ld	s0,16(sp)
+    80001d06:	6105                	addi	sp,sp,32
+    80001d08:	8082                	ret
+
+0000000080001d0a <sys_getpid>:
+    80001d0a:	1141                	addi	sp,sp,-16
+    80001d0c:	e406                	sd	ra,8(sp)
+    80001d0e:	e022                	sd	s0,0(sp)
+    80001d10:	0800                	addi	s0,sp,16
+    80001d12:	854ff0ef          	jal	80000d66 <myproc>
+    80001d16:	5908                	lw	a0,48(a0)
+    80001d18:	60a2                	ld	ra,8(sp)
+    80001d1a:	6402                	ld	s0,0(sp)
+    80001d1c:	0141                	addi	sp,sp,16
+    80001d1e:	8082                	ret
+
+0000000080001d20 <sys_fork>:
+    80001d20:	1141                	addi	sp,sp,-16
+    80001d22:	e406                	sd	ra,8(sp)
+    80001d24:	e022                	sd	s0,0(sp)
+    80001d26:	0800                	addi	s0,sp,16
+    80001d28:	b64ff0ef          	jal	8000108c <fork>
+    80001d2c:	60a2                	ld	ra,8(sp)
+    80001d2e:	6402                	ld	s0,0(sp)
+    80001d30:	0141                	addi	sp,sp,16
+    80001d32:	8082                	ret
+
+0000000080001d34 <sys_wait>:
+    80001d34:	1101                	addi	sp,sp,-32
+    80001d36:	ec06                	sd	ra,24(sp)
+    80001d38:	e822                	sd	s0,16(sp)
+    80001d3a:	1000                	addi	s0,sp,32
+    80001d3c:	fe840593          	addi	a1,s0,-24
+    80001d40:	4501                	li	a0,0
+    80001d42:	ef5ff0ef          	jal	80001c36 <argaddr>
+    80001d46:	fe843503          	ld	a0,-24(s0)
+    80001d4a:	84dff0ef          	jal	80001596 <wait>
+    80001d4e:	60e2                	ld	ra,24(sp)
+    80001d50:	6442                	ld	s0,16(sp)
+    80001d52:	6105                	addi	sp,sp,32
+    80001d54:	8082                	ret
+
+0000000080001d56 <sys_sbrk>:
+    80001d56:	7179                	addi	sp,sp,-48
+    80001d58:	f406                	sd	ra,40(sp)
+    80001d5a:	f022                	sd	s0,32(sp)
+    80001d5c:	ec26                	sd	s1,24(sp)
+    80001d5e:	1800                	addi	s0,sp,48
+    80001d60:	fdc40593          	addi	a1,s0,-36
+    80001d64:	4501                	li	a0,0
+    80001d66:	eb5ff0ef          	jal	80001c1a <argint>
+    80001d6a:	ffdfe0ef          	jal	80000d66 <myproc>
+    80001d6e:	6524                	ld	s1,72(a0)
+    80001d70:	fdc42503          	lw	a0,-36(s0)
+    80001d74:	ac8ff0ef          	jal	8000103c <growproc>
+    80001d78:	00054863          	bltz	a0,80001d88 <sys_sbrk+0x32>
+    80001d7c:	8526                	mv	a0,s1
+    80001d7e:	70a2                	ld	ra,40(sp)
+    80001d80:	7402                	ld	s0,32(sp)
+    80001d82:	64e2                	ld	s1,24(sp)
+    80001d84:	6145                	addi	sp,sp,48
+    80001d86:	8082                	ret
+    80001d88:	54fd                	li	s1,-1
+    80001d8a:	bfcd                	j	80001d7c <sys_sbrk+0x26>
+
+0000000080001d8c <sys_sleep>:
+    80001d8c:	7139                	addi	sp,sp,-64
+    80001d8e:	fc06                	sd	ra,56(sp)
+    80001d90:	f822                	sd	s0,48(sp)
+    80001d92:	f04a                	sd	s2,32(sp)
+    80001d94:	0080                	addi	s0,sp,64
+    80001d96:	fcc40593          	addi	a1,s0,-52
+    80001d9a:	4501                	li	a0,0
+    80001d9c:	e7fff0ef          	jal	80001c1a <argint>
+    80001da0:	fcc42783          	lw	a5,-52(s0)
+    80001da4:	0607c763          	bltz	a5,80001e12 <sys_sleep+0x86>
+    80001da8:	0000e517          	auipc	a0,0xe
+    80001dac:	2b850513          	addi	a0,a0,696 # 80010060 <tickslock>
+    80001db0:	171030ef          	jal	80005720 <acquire>
+    80001db4:	00008917          	auipc	s2,0x8
+    80001db8:	44492903          	lw	s2,1092(s2) # 8000a1f8 <ticks>
+    80001dbc:	fcc42783          	lw	a5,-52(s0)
+    80001dc0:	cf8d                	beqz	a5,80001dfa <sys_sleep+0x6e>
+    80001dc2:	f426                	sd	s1,40(sp)
+    80001dc4:	ec4e                	sd	s3,24(sp)
+    80001dc6:	0000e997          	auipc	s3,0xe
+    80001dca:	29a98993          	addi	s3,s3,666 # 80010060 <tickslock>
+    80001dce:	00008497          	auipc	s1,0x8
+    80001dd2:	42a48493          	addi	s1,s1,1066 # 8000a1f8 <ticks>
+    80001dd6:	f91fe0ef          	jal	80000d66 <myproc>
+    80001dda:	f92ff0ef          	jal	8000156c <killed>
+    80001dde:	ed0d                	bnez	a0,80001e18 <sys_sleep+0x8c>
+    80001de0:	85ce                	mv	a1,s3
+    80001de2:	8526                	mv	a0,s1
+    80001de4:	d50ff0ef          	jal	80001334 <sleep>
+    80001de8:	409c                	lw	a5,0(s1)
+    80001dea:	412787bb          	subw	a5,a5,s2
+    80001dee:	fcc42703          	lw	a4,-52(s0)
+    80001df2:	fee7e2e3          	bltu	a5,a4,80001dd6 <sys_sleep+0x4a>
+    80001df6:	74a2                	ld	s1,40(sp)
+    80001df8:	69e2                	ld	s3,24(sp)
+    80001dfa:	0000e517          	auipc	a0,0xe
+    80001dfe:	26650513          	addi	a0,a0,614 # 80010060 <tickslock>
+    80001e02:	1b7030ef          	jal	800057b8 <release>
+    80001e06:	4501                	li	a0,0
+    80001e08:	70e2                	ld	ra,56(sp)
+    80001e0a:	7442                	ld	s0,48(sp)
+    80001e0c:	7902                	ld	s2,32(sp)
+    80001e0e:	6121                	addi	sp,sp,64
+    80001e10:	8082                	ret
+    80001e12:	fc042623          	sw	zero,-52(s0)
+    80001e16:	bf49                	j	80001da8 <sys_sleep+0x1c>
+    80001e18:	0000e517          	auipc	a0,0xe
+    80001e1c:	24850513          	addi	a0,a0,584 # 80010060 <tickslock>
+    80001e20:	199030ef          	jal	800057b8 <release>
+    80001e24:	557d                	li	a0,-1
+    80001e26:	74a2                	ld	s1,40(sp)
+    80001e28:	69e2                	ld	s3,24(sp)
+    80001e2a:	bff9                	j	80001e08 <sys_sleep+0x7c>
+
+0000000080001e2c <sys_kill>:
+    80001e2c:	1101                	addi	sp,sp,-32
+    80001e2e:	ec06                	sd	ra,24(sp)
+    80001e30:	e822                	sd	s0,16(sp)
+    80001e32:	1000                	addi	s0,sp,32
+    80001e34:	fec40593          	addi	a1,s0,-20
+    80001e38:	4501                	li	a0,0
+    80001e3a:	de1ff0ef          	jal	80001c1a <argint>
+    80001e3e:	fec42503          	lw	a0,-20(s0)
+    80001e42:	ea0ff0ef          	jal	800014e2 <kill>
+    80001e46:	60e2                	ld	ra,24(sp)
+    80001e48:	6442                	ld	s0,16(sp)
+    80001e4a:	6105                	addi	sp,sp,32
+    80001e4c:	8082                	ret
+
+0000000080001e4e <sys_uptime>:
+    80001e4e:	1101                	addi	sp,sp,-32
+    80001e50:	ec06                	sd	ra,24(sp)
+    80001e52:	e822                	sd	s0,16(sp)
+    80001e54:	e426                	sd	s1,8(sp)
+    80001e56:	1000                	addi	s0,sp,32
+    80001e58:	0000e517          	auipc	a0,0xe
+    80001e5c:	20850513          	addi	a0,a0,520 # 80010060 <tickslock>
+    80001e60:	0c1030ef          	jal	80005720 <acquire>
+    80001e64:	00008497          	auipc	s1,0x8
+    80001e68:	3944a483          	lw	s1,916(s1) # 8000a1f8 <ticks>
+    80001e6c:	0000e517          	auipc	a0,0xe
+    80001e70:	1f450513          	addi	a0,a0,500 # 80010060 <tickslock>
+    80001e74:	145030ef          	jal	800057b8 <release>
+    80001e78:	02049513          	slli	a0,s1,0x20
+    80001e7c:	9101                	srli	a0,a0,0x20
+    80001e7e:	60e2                	ld	ra,24(sp)
+    80001e80:	6442                	ld	s0,16(sp)
+    80001e82:	64a2                	ld	s1,8(sp)
+    80001e84:	6105                	addi	sp,sp,32
+    80001e86:	8082                	ret
+
+0000000080001e88 <binit>:
+  struct buf head;
+} bcache;
+
+void
+binit(void)
+{
+    80001e88:	7179                	addi	sp,sp,-48
+    80001e8a:	f406                	sd	ra,40(sp)
+    80001e8c:	f022                	sd	s0,32(sp)
+    80001e8e:	ec26                	sd	s1,24(sp)
+    80001e90:	e84a                	sd	s2,16(sp)
+    80001e92:	e44e                	sd	s3,8(sp)
+    80001e94:	e052                	sd	s4,0(sp)
+    80001e96:	1800                	addi	s0,sp,48
+  struct buf *b;
+
+  initlock(&bcache.lock, "bcache");
+    80001e98:	00005597          	auipc	a1,0x5
+    80001e9c:	53858593          	addi	a1,a1,1336 # 800073d0 <etext+0x3d0>
+    80001ea0:	0000e517          	auipc	a0,0xe
+    80001ea4:	1d850513          	addi	a0,a0,472 # 80010078 <bcache>
+    80001ea8:	7f8030ef          	jal	800056a0 <initlock>
+
+  // Create linked list of buffers
+  bcache.head.prev = &bcache.head;
+    80001eac:	00016797          	auipc	a5,0x16
+    80001eb0:	1cc78793          	addi	a5,a5,460 # 80018078 <bcache+0x8000>
+    80001eb4:	00016717          	auipc	a4,0x16
+    80001eb8:	42c70713          	addi	a4,a4,1068 # 800182e0 <bcache+0x8268>
+    80001ebc:	2ae7b823          	sd	a4,688(a5)
+  bcache.head.next = &bcache.head;
+    80001ec0:	2ae7bc23          	sd	a4,696(a5)
+  for(b = bcache.buf; b < bcache.buf+NBUF; b++){
+    80001ec4:	0000e497          	auipc	s1,0xe
+    80001ec8:	1cc48493          	addi	s1,s1,460 # 80010090 <bcache+0x18>
+    b->next = bcache.head.next;
+    80001ecc:	893e                	mv	s2,a5
+    b->prev = &bcache.head;
+    80001ece:	89ba                	mv	s3,a4
+    initsleeplock(&b->lock, "buffer");
+    80001ed0:	00005a17          	auipc	s4,0x5
+    80001ed4:	508a0a13          	addi	s4,s4,1288 # 800073d8 <etext+0x3d8>
+    b->next = bcache.head.next;
+    80001ed8:	2b893783          	ld	a5,696(s2)
+    80001edc:	e8bc                	sd	a5,80(s1)
+    b->prev = &bcache.head;
+    80001ede:	0534b423          	sd	s3,72(s1)
+    initsleeplock(&b->lock, "buffer");
+    80001ee2:	85d2                	mv	a1,s4
+    80001ee4:	01048513          	addi	a0,s1,16
+    80001ee8:	248010ef          	jal	80003130 <initsleeplock>
+    bcache.head.next->prev = b;
+    80001eec:	2b893783          	ld	a5,696(s2)
+    80001ef0:	e7a4                	sd	s1,72(a5)
+    bcache.head.next = b;
+    80001ef2:	2a993c23          	sd	s1,696(s2)
+  for(b = bcache.buf; b < bcache.buf+NBUF; b++){
+    80001ef6:	45848493          	addi	s1,s1,1112
+    80001efa:	fd349fe3          	bne	s1,s3,80001ed8 <binit+0x50>
+  }
+}
+    80001efe:	70a2                	ld	ra,40(sp)
+    80001f00:	7402                	ld	s0,32(sp)
+    80001f02:	64e2                	ld	s1,24(sp)
+    80001f04:	6942                	ld	s2,16(sp)
+    80001f06:	69a2                	ld	s3,8(sp)
+    80001f08:	6a02                	ld	s4,0(sp)
+    80001f0a:	6145                	addi	sp,sp,48
+    80001f0c:	8082                	ret
+
+0000000080001f0e <bread>:
+}
+
+// Return a locked buf with the contents of the indicated block.
+struct buf*
+bread(uint dev, uint blockno)
+{
+    80001f0e:	7179                	addi	sp,sp,-48
+    80001f10:	f406                	sd	ra,40(sp)
+    80001f12:	f022                	sd	s0,32(sp)
+    80001f14:	ec26                	sd	s1,24(sp)
+    80001f16:	e84a                	sd	s2,16(sp)
+    80001f18:	e44e                	sd	s3,8(sp)
+    80001f1a:	1800                	addi	s0,sp,48
+    80001f1c:	892a                	mv	s2,a0
+    80001f1e:	89ae                	mv	s3,a1
+  acquire(&bcache.lock);
+    80001f20:	0000e517          	auipc	a0,0xe
+    80001f24:	15850513          	addi	a0,a0,344 # 80010078 <bcache>
+    80001f28:	7f8030ef          	jal	80005720 <acquire>
+  for(b = bcache.head.next; b != &bcache.head; b = b->next){
+    80001f2c:	00016497          	auipc	s1,0x16
+    80001f30:	4044b483          	ld	s1,1028(s1) # 80018330 <bcache+0x82b8>
+    80001f34:	00016797          	auipc	a5,0x16
+    80001f38:	3ac78793          	addi	a5,a5,940 # 800182e0 <bcache+0x8268>
+    80001f3c:	02f48b63          	beq	s1,a5,80001f72 <bread+0x64>
+    80001f40:	873e                	mv	a4,a5
+    80001f42:	a021                	j	80001f4a <bread+0x3c>
+    80001f44:	68a4                	ld	s1,80(s1)
+    80001f46:	02e48663          	beq	s1,a4,80001f72 <bread+0x64>
+    if(b->dev == dev && b->blockno == blockno){
+    80001f4a:	449c                	lw	a5,8(s1)
+    80001f4c:	ff279ce3          	bne	a5,s2,80001f44 <bread+0x36>
+    80001f50:	44dc                	lw	a5,12(s1)
+    80001f52:	ff3799e3          	bne	a5,s3,80001f44 <bread+0x36>
+      b->refcnt++;
+    80001f56:	40bc                	lw	a5,64(s1)
+    80001f58:	2785                	addiw	a5,a5,1
+    80001f5a:	c0bc                	sw	a5,64(s1)
+      release(&bcache.lock);
+    80001f5c:	0000e517          	auipc	a0,0xe
+    80001f60:	11c50513          	addi	a0,a0,284 # 80010078 <bcache>
+    80001f64:	055030ef          	jal	800057b8 <release>
+      acquiresleep(&b->lock);
+    80001f68:	01048513          	addi	a0,s1,16
+    80001f6c:	1fa010ef          	jal	80003166 <acquiresleep>
+      return b;
+    80001f70:	a889                	j	80001fc2 <bread+0xb4>
+  for(b = bcache.head.prev; b != &bcache.head; b = b->prev){
+    80001f72:	00016497          	auipc	s1,0x16
+    80001f76:	3b64b483          	ld	s1,950(s1) # 80018328 <bcache+0x82b0>
+    80001f7a:	00016797          	auipc	a5,0x16
+    80001f7e:	36678793          	addi	a5,a5,870 # 800182e0 <bcache+0x8268>
+    80001f82:	00f48863          	beq	s1,a5,80001f92 <bread+0x84>
+    80001f86:	873e                	mv	a4,a5
+    if(b->refcnt == 0) {
+    80001f88:	40bc                	lw	a5,64(s1)
+    80001f8a:	cb91                	beqz	a5,80001f9e <bread+0x90>
+  for(b = bcache.head.prev; b != &bcache.head; b = b->prev){
+    80001f8c:	64a4                	ld	s1,72(s1)
+    80001f8e:	fee49de3          	bne	s1,a4,80001f88 <bread+0x7a>
+  panic("bget: no buffers");
+    80001f92:	00005517          	auipc	a0,0x5
+    80001f96:	44e50513          	addi	a0,a0,1102 # 800073e0 <etext+0x3e0>
+    80001f9a:	458030ef          	jal	800053f2 <panic>
+      b->dev = dev;
+    80001f9e:	0124a423          	sw	s2,8(s1)
+      b->blockno = blockno;
+    80001fa2:	0134a623          	sw	s3,12(s1)
+      b->valid = 0;
+    80001fa6:	0004a023          	sw	zero,0(s1)
+      b->refcnt = 1;
+    80001faa:	4785                	li	a5,1
+    80001fac:	c0bc                	sw	a5,64(s1)
+      release(&bcache.lock);
+    80001fae:	0000e517          	auipc	a0,0xe
+    80001fb2:	0ca50513          	addi	a0,a0,202 # 80010078 <bcache>
+    80001fb6:	003030ef          	jal	800057b8 <release>
+      acquiresleep(&b->lock);
+    80001fba:	01048513          	addi	a0,s1,16
+    80001fbe:	1a8010ef          	jal	80003166 <acquiresleep>
+  struct buf *b;
+
+  b = bget(dev, blockno);
+  if(!b->valid) {
+    80001fc2:	409c                	lw	a5,0(s1)
+    80001fc4:	cb89                	beqz	a5,80001fd6 <bread+0xc8>
+    virtio_disk_rw(b, 0);
+    b->valid = 1;
+  }
+  return b;
+}
+    80001fc6:	8526                	mv	a0,s1
+    80001fc8:	70a2                	ld	ra,40(sp)
+    80001fca:	7402                	ld	s0,32(sp)
+    80001fcc:	64e2                	ld	s1,24(sp)
+    80001fce:	6942                	ld	s2,16(sp)
+    80001fd0:	69a2                	ld	s3,8(sp)
+    80001fd2:	6145                	addi	sp,sp,48
+    80001fd4:	8082                	ret
+    virtio_disk_rw(b, 0);
+    80001fd6:	4581                	li	a1,0
+    80001fd8:	8526                	mv	a0,s1
+    80001fda:	1e7020ef          	jal	800049c0 <virtio_disk_rw>
+    b->valid = 1;
+    80001fde:	4785                	li	a5,1
+    80001fe0:	c09c                	sw	a5,0(s1)
+  return b;
+    80001fe2:	b7d5                	j	80001fc6 <bread+0xb8>
+
+0000000080001fe4 <bwrite>:
+
+// Write b's contents to disk.  Must be locked.
+void
+bwrite(struct buf *b)
+{
+    80001fe4:	1101                	addi	sp,sp,-32
+    80001fe6:	ec06                	sd	ra,24(sp)
+    80001fe8:	e822                	sd	s0,16(sp)
+    80001fea:	e426                	sd	s1,8(sp)
+    80001fec:	1000                	addi	s0,sp,32
+    80001fee:	84aa                	mv	s1,a0
+  if(!holdingsleep(&b->lock))
+    80001ff0:	0541                	addi	a0,a0,16
+    80001ff2:	1f2010ef          	jal	800031e4 <holdingsleep>
+    80001ff6:	c911                	beqz	a0,8000200a <bwrite+0x26>
+    panic("bwrite");
+  virtio_disk_rw(b, 1);
+    80001ff8:	4585                	li	a1,1
+    80001ffa:	8526                	mv	a0,s1
+    80001ffc:	1c5020ef          	jal	800049c0 <virtio_disk_rw>
+}
+    80002000:	60e2                	ld	ra,24(sp)
+    80002002:	6442                	ld	s0,16(sp)
+    80002004:	64a2                	ld	s1,8(sp)
+    80002006:	6105                	addi	sp,sp,32
+    80002008:	8082                	ret
+    panic("bwrite");
+    8000200a:	00005517          	auipc	a0,0x5
+    8000200e:	3ee50513          	addi	a0,a0,1006 # 800073f8 <etext+0x3f8>
+    80002012:	3e0030ef          	jal	800053f2 <panic>
+
+0000000080002016 <brelse>:
+
+// Release a locked buffer.
+// Move to the head of the most-recently-used list.
+void
+brelse(struct buf *b)
+{
+    80002016:	1101                	addi	sp,sp,-32
+    80002018:	ec06                	sd	ra,24(sp)
+    8000201a:	e822                	sd	s0,16(sp)
+    8000201c:	e426                	sd	s1,8(sp)
+    8000201e:	e04a                	sd	s2,0(sp)
+    80002020:	1000                	addi	s0,sp,32
+    80002022:	84aa                	mv	s1,a0
+  if(!holdingsleep(&b->lock))
+    80002024:	01050913          	addi	s2,a0,16
+    80002028:	854a                	mv	a0,s2
+    8000202a:	1ba010ef          	jal	800031e4 <holdingsleep>
+    8000202e:	c135                	beqz	a0,80002092 <brelse+0x7c>
+    panic("brelse");
+
+  releasesleep(&b->lock);
+    80002030:	854a                	mv	a0,s2
+    80002032:	17a010ef          	jal	800031ac <releasesleep>
+
+  acquire(&bcache.lock);
+    80002036:	0000e517          	auipc	a0,0xe
+    8000203a:	04250513          	addi	a0,a0,66 # 80010078 <bcache>
+    8000203e:	6e2030ef          	jal	80005720 <acquire>
+  b->refcnt--;
+    80002042:	40bc                	lw	a5,64(s1)
+    80002044:	37fd                	addiw	a5,a5,-1
+    80002046:	0007871b          	sext.w	a4,a5
+    8000204a:	c0bc                	sw	a5,64(s1)
+  if (b->refcnt == 0) {
+    8000204c:	e71d                	bnez	a4,8000207a <brelse+0x64>
+    // no one is waiting for it.
+    b->next->prev = b->prev;
+    8000204e:	68b8                	ld	a4,80(s1)
+    80002050:	64bc                	ld	a5,72(s1)
+    80002052:	e73c                	sd	a5,72(a4)
+    b->prev->next = b->next;
+    80002054:	68b8                	ld	a4,80(s1)
+    80002056:	ebb8                	sd	a4,80(a5)
+    b->next = bcache.head.next;
+    80002058:	00016797          	auipc	a5,0x16
+    8000205c:	02078793          	addi	a5,a5,32 # 80018078 <bcache+0x8000>
+    80002060:	2b87b703          	ld	a4,696(a5)
+    80002064:	e8b8                	sd	a4,80(s1)
+    b->prev = &bcache.head;
+    80002066:	00016717          	auipc	a4,0x16
+    8000206a:	27a70713          	addi	a4,a4,634 # 800182e0 <bcache+0x8268>
+    8000206e:	e4b8                	sd	a4,72(s1)
+    bcache.head.next->prev = b;
+    80002070:	2b87b703          	ld	a4,696(a5)
+    80002074:	e724                	sd	s1,72(a4)
+    bcache.head.next = b;
+    80002076:	2a97bc23          	sd	s1,696(a5)
+  }
+  
+  release(&bcache.lock);
+    8000207a:	0000e517          	auipc	a0,0xe
+    8000207e:	ffe50513          	addi	a0,a0,-2 # 80010078 <bcache>
+    80002082:	736030ef          	jal	800057b8 <release>
+}
+    80002086:	60e2                	ld	ra,24(sp)
+    80002088:	6442                	ld	s0,16(sp)
+    8000208a:	64a2                	ld	s1,8(sp)
+    8000208c:	6902                	ld	s2,0(sp)
+    8000208e:	6105                	addi	sp,sp,32
+    80002090:	8082                	ret
+    panic("brelse");
+    80002092:	00005517          	auipc	a0,0x5
+    80002096:	36e50513          	addi	a0,a0,878 # 80007400 <etext+0x400>
+    8000209a:	358030ef          	jal	800053f2 <panic>
+
+000000008000209e <bpin>:
+
+void
+bpin(struct buf *b) {
+    8000209e:	1101                	addi	sp,sp,-32
+    800020a0:	ec06                	sd	ra,24(sp)
+    800020a2:	e822                	sd	s0,16(sp)
+    800020a4:	e426                	sd	s1,8(sp)
+    800020a6:	1000                	addi	s0,sp,32
+    800020a8:	84aa                	mv	s1,a0
+  acquire(&bcache.lock);
+    800020aa:	0000e517          	auipc	a0,0xe
+    800020ae:	fce50513          	addi	a0,a0,-50 # 80010078 <bcache>
+    800020b2:	66e030ef          	jal	80005720 <acquire>
+  b->refcnt++;
+    800020b6:	40bc                	lw	a5,64(s1)
+    800020b8:	2785                	addiw	a5,a5,1
+    800020ba:	c0bc                	sw	a5,64(s1)
+  release(&bcache.lock);
+    800020bc:	0000e517          	auipc	a0,0xe
+    800020c0:	fbc50513          	addi	a0,a0,-68 # 80010078 <bcache>
+    800020c4:	6f4030ef          	jal	800057b8 <release>
+}
+    800020c8:	60e2                	ld	ra,24(sp)
+    800020ca:	6442                	ld	s0,16(sp)
+    800020cc:	64a2                	ld	s1,8(sp)
+    800020ce:	6105                	addi	sp,sp,32
+    800020d0:	8082                	ret
+
+00000000800020d2 <bunpin>:
+
+void
+bunpin(struct buf *b) {
+    800020d2:	1101                	addi	sp,sp,-32
+    800020d4:	ec06                	sd	ra,24(sp)
+    800020d6:	e822                	sd	s0,16(sp)
+    800020d8:	e426                	sd	s1,8(sp)
+    800020da:	1000                	addi	s0,sp,32
+    800020dc:	84aa                	mv	s1,a0
+  acquire(&bcache.lock);
+    800020de:	0000e517          	auipc	a0,0xe
+    800020e2:	f9a50513          	addi	a0,a0,-102 # 80010078 <bcache>
+    800020e6:	63a030ef          	jal	80005720 <acquire>
+  b->refcnt--;
+    800020ea:	40bc                	lw	a5,64(s1)
+    800020ec:	37fd                	addiw	a5,a5,-1
+    800020ee:	c0bc                	sw	a5,64(s1)
+  release(&bcache.lock);
+    800020f0:	0000e517          	auipc	a0,0xe
+    800020f4:	f8850513          	addi	a0,a0,-120 # 80010078 <bcache>
+    800020f8:	6c0030ef          	jal	800057b8 <release>
+}
+    800020fc:	60e2                	ld	ra,24(sp)
+    800020fe:	6442                	ld	s0,16(sp)
+    80002100:	64a2                	ld	s1,8(sp)
+    80002102:	6105                	addi	sp,sp,32
+    80002104:	8082                	ret
+
+0000000080002106 <bfree>:
+}
+
+// Free a disk block.
+static void
+bfree(int dev, uint b)
+{
+    80002106:	1101                	addi	sp,sp,-32
+    80002108:	ec06                	sd	ra,24(sp)
+    8000210a:	e822                	sd	s0,16(sp)
+    8000210c:	e426                	sd	s1,8(sp)
+    8000210e:	e04a                	sd	s2,0(sp)
+    80002110:	1000                	addi	s0,sp,32
+    80002112:	84ae                	mv	s1,a1
+  struct buf *bp;
+  int bi, m;
+
+  bp = bread(dev, BBLOCK(b, sb));
+    80002114:	00d5d59b          	srliw	a1,a1,0xd
+    80002118:	00016797          	auipc	a5,0x16
+    8000211c:	63c7a783          	lw	a5,1596(a5) # 80018754 <sb+0x1c>
+    80002120:	9dbd                	addw	a1,a1,a5
+    80002122:	dedff0ef          	jal	80001f0e <bread>
+  bi = b % BPB;
+  m = 1 << (bi % 8);
+    80002126:	0074f713          	andi	a4,s1,7
+    8000212a:	4785                	li	a5,1
+    8000212c:	00e797bb          	sllw	a5,a5,a4
+  if((bp->data[bi/8] & m) == 0)
+    80002130:	14ce                	slli	s1,s1,0x33
+    80002132:	90d9                	srli	s1,s1,0x36
+    80002134:	00950733          	add	a4,a0,s1
+    80002138:	05874703          	lbu	a4,88(a4)
+    8000213c:	00e7f6b3          	and	a3,a5,a4
+    80002140:	c29d                	beqz	a3,80002166 <bfree+0x60>
+    80002142:	892a                	mv	s2,a0
+    panic("freeing free block");
+  bp->data[bi/8] &= ~m;
+    80002144:	94aa                	add	s1,s1,a0
+    80002146:	fff7c793          	not	a5,a5
+    8000214a:	8f7d                	and	a4,a4,a5
+    8000214c:	04e48c23          	sb	a4,88(s1)
+  log_write(bp);
+    80002150:	711000ef          	jal	80003060 <log_write>
+  brelse(bp);
+    80002154:	854a                	mv	a0,s2
+    80002156:	ec1ff0ef          	jal	80002016 <brelse>
+}
+    8000215a:	60e2                	ld	ra,24(sp)
+    8000215c:	6442                	ld	s0,16(sp)
+    8000215e:	64a2                	ld	s1,8(sp)
+    80002160:	6902                	ld	s2,0(sp)
+    80002162:	6105                	addi	sp,sp,32
+    80002164:	8082                	ret
+    panic("freeing free block");
+    80002166:	00005517          	auipc	a0,0x5
+    8000216a:	2a250513          	addi	a0,a0,674 # 80007408 <etext+0x408>
+    8000216e:	284030ef          	jal	800053f2 <panic>
+
+0000000080002172 <balloc>:
+{
+    80002172:	711d                	addi	sp,sp,-96
+    80002174:	ec86                	sd	ra,88(sp)
+    80002176:	e8a2                	sd	s0,80(sp)
+    80002178:	e4a6                	sd	s1,72(sp)
+    8000217a:	1080                	addi	s0,sp,96
+  for(b = 0; b < sb.size; b += BPB){
+    8000217c:	00016797          	auipc	a5,0x16
+    80002180:	5c07a783          	lw	a5,1472(a5) # 8001873c <sb+0x4>
+    80002184:	0e078f63          	beqz	a5,80002282 <balloc+0x110>
+    80002188:	e0ca                	sd	s2,64(sp)
+    8000218a:	fc4e                	sd	s3,56(sp)
+    8000218c:	f852                	sd	s4,48(sp)
+    8000218e:	f456                	sd	s5,40(sp)
+    80002190:	f05a                	sd	s6,32(sp)
+    80002192:	ec5e                	sd	s7,24(sp)
+    80002194:	e862                	sd	s8,16(sp)
+    80002196:	e466                	sd	s9,8(sp)
+    80002198:	8baa                	mv	s7,a0
+    8000219a:	4a81                	li	s5,0
+    bp = bread(dev, BBLOCK(b, sb));
+    8000219c:	00016b17          	auipc	s6,0x16
+    800021a0:	59cb0b13          	addi	s6,s6,1436 # 80018738 <sb>
+    for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
+    800021a4:	4c01                	li	s8,0
+      m = 1 << (bi % 8);
+    800021a6:	4985                	li	s3,1
+    for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
+    800021a8:	6a09                	lui	s4,0x2
+  for(b = 0; b < sb.size; b += BPB){
+    800021aa:	6c89                	lui	s9,0x2
+    800021ac:	a0b5                	j	80002218 <balloc+0xa6>
+        bp->data[bi/8] |= m;  // Mark block in use.
+    800021ae:	97ca                	add	a5,a5,s2
+    800021b0:	8e55                	or	a2,a2,a3
+    800021b2:	04c78c23          	sb	a2,88(a5)
+        log_write(bp);
+    800021b6:	854a                	mv	a0,s2
+    800021b8:	6a9000ef          	jal	80003060 <log_write>
+        brelse(bp);
+    800021bc:	854a                	mv	a0,s2
+    800021be:	e59ff0ef          	jal	80002016 <brelse>
+  bp = bread(dev, bno);
+    800021c2:	85a6                	mv	a1,s1
+    800021c4:	855e                	mv	a0,s7
+    800021c6:	d49ff0ef          	jal	80001f0e <bread>
+    800021ca:	892a                	mv	s2,a0
+  memset(bp->data, 0, BSIZE);
+    800021cc:	40000613          	li	a2,1024
+    800021d0:	4581                	li	a1,0
+    800021d2:	05850513          	addi	a0,a0,88
+    800021d6:	f79fd0ef          	jal	8000014e <memset>
+  log_write(bp);
+    800021da:	854a                	mv	a0,s2
+    800021dc:	685000ef          	jal	80003060 <log_write>
+  brelse(bp);
+    800021e0:	854a                	mv	a0,s2
+    800021e2:	e35ff0ef          	jal	80002016 <brelse>
+}
+    800021e6:	6906                	ld	s2,64(sp)
+    800021e8:	79e2                	ld	s3,56(sp)
+    800021ea:	7a42                	ld	s4,48(sp)
+    800021ec:	7aa2                	ld	s5,40(sp)
+    800021ee:	7b02                	ld	s6,32(sp)
+    800021f0:	6be2                	ld	s7,24(sp)
+    800021f2:	6c42                	ld	s8,16(sp)
+    800021f4:	6ca2                	ld	s9,8(sp)
+}
+    800021f6:	8526                	mv	a0,s1
+    800021f8:	60e6                	ld	ra,88(sp)
+    800021fa:	6446                	ld	s0,80(sp)
+    800021fc:	64a6                	ld	s1,72(sp)
+    800021fe:	6125                	addi	sp,sp,96
+    80002200:	8082                	ret
+    brelse(bp);
+    80002202:	854a                	mv	a0,s2
+    80002204:	e13ff0ef          	jal	80002016 <brelse>
+  for(b = 0; b < sb.size; b += BPB){
+    80002208:	015c87bb          	addw	a5,s9,s5
+    8000220c:	00078a9b          	sext.w	s5,a5
+    80002210:	004b2703          	lw	a4,4(s6)
+    80002214:	04eaff63          	bgeu	s5,a4,80002272 <balloc+0x100>
+    bp = bread(dev, BBLOCK(b, sb));
+    80002218:	41fad79b          	sraiw	a5,s5,0x1f
+    8000221c:	0137d79b          	srliw	a5,a5,0x13
+    80002220:	015787bb          	addw	a5,a5,s5
+    80002224:	40d7d79b          	sraiw	a5,a5,0xd
+    80002228:	01cb2583          	lw	a1,28(s6)
+    8000222c:	9dbd                	addw	a1,a1,a5
+    8000222e:	855e                	mv	a0,s7
+    80002230:	cdfff0ef          	jal	80001f0e <bread>
+    80002234:	892a                	mv	s2,a0
+    for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
+    80002236:	004b2503          	lw	a0,4(s6)
+    8000223a:	000a849b          	sext.w	s1,s5
+    8000223e:	8762                	mv	a4,s8
+    80002240:	fca4f1e3          	bgeu	s1,a0,80002202 <balloc+0x90>
+      m = 1 << (bi % 8);
+    80002244:	00777693          	andi	a3,a4,7
+    80002248:	00d996bb          	sllw	a3,s3,a3
+      if((bp->data[bi/8] & m) == 0){  // Is block free?
+    8000224c:	41f7579b          	sraiw	a5,a4,0x1f
+    80002250:	01d7d79b          	srliw	a5,a5,0x1d
+    80002254:	9fb9                	addw	a5,a5,a4
+    80002256:	4037d79b          	sraiw	a5,a5,0x3
+    8000225a:	00f90633          	add	a2,s2,a5
+    8000225e:	05864603          	lbu	a2,88(a2)
+    80002262:	00c6f5b3          	and	a1,a3,a2
+    80002266:	d5a1                	beqz	a1,800021ae <balloc+0x3c>
+    for(bi = 0; bi < BPB && b + bi < sb.size; bi++){
+    80002268:	2705                	addiw	a4,a4,1
+    8000226a:	2485                	addiw	s1,s1,1
+    8000226c:	fd471ae3          	bne	a4,s4,80002240 <balloc+0xce>
+    80002270:	bf49                	j	80002202 <balloc+0x90>
+    80002272:	6906                	ld	s2,64(sp)
+    80002274:	79e2                	ld	s3,56(sp)
+    80002276:	7a42                	ld	s4,48(sp)
+    80002278:	7aa2                	ld	s5,40(sp)
+    8000227a:	7b02                	ld	s6,32(sp)
+    8000227c:	6be2                	ld	s7,24(sp)
+    8000227e:	6c42                	ld	s8,16(sp)
+    80002280:	6ca2                	ld	s9,8(sp)
+  printf("balloc: out of blocks\n");
+    80002282:	00005517          	auipc	a0,0x5
+    80002286:	19e50513          	addi	a0,a0,414 # 80007420 <etext+0x420>
+    8000228a:	697020ef          	jal	80005120 <printf>
+  return 0;
+    8000228e:	4481                	li	s1,0
+    80002290:	b79d                	j	800021f6 <balloc+0x84>
+
+0000000080002292 <bmap>:
+// Return the disk block address of the nth block in inode ip.
+// If there is no such block, bmap allocates one.
+// returns 0 if out of disk space.
+static uint
+bmap(struct inode *ip, uint bn)
+{
+    80002292:	7179                	addi	sp,sp,-48
+    80002294:	f406                	sd	ra,40(sp)
+    80002296:	f022                	sd	s0,32(sp)
+    80002298:	ec26                	sd	s1,24(sp)
+    8000229a:	e84a                	sd	s2,16(sp)
+    8000229c:	e44e                	sd	s3,8(sp)
+    8000229e:	1800                	addi	s0,sp,48
+    800022a0:	89aa                	mv	s3,a0
+  uint addr, *a;
+  struct buf *bp;
+
+  if(bn < NDIRECT){
+    800022a2:	47ad                	li	a5,11
+    800022a4:	02b7e663          	bltu	a5,a1,800022d0 <bmap+0x3e>
+    if((addr = ip->addrs[bn]) == 0){
+    800022a8:	02059793          	slli	a5,a1,0x20
+    800022ac:	01e7d593          	srli	a1,a5,0x1e
+    800022b0:	00b504b3          	add	s1,a0,a1
+    800022b4:	0504a903          	lw	s2,80(s1)
+    800022b8:	06091a63          	bnez	s2,8000232c <bmap+0x9a>
+      addr = balloc(ip->dev);
+    800022bc:	4108                	lw	a0,0(a0)
+    800022be:	eb5ff0ef          	jal	80002172 <balloc>
+    800022c2:	0005091b          	sext.w	s2,a0
+      if(addr == 0)
+    800022c6:	06090363          	beqz	s2,8000232c <bmap+0x9a>
+        return 0;
+      ip->addrs[bn] = addr;
+    800022ca:	0524a823          	sw	s2,80(s1)
+    800022ce:	a8b9                	j	8000232c <bmap+0x9a>
+    }
+    return addr;
+  }
+  bn -= NDIRECT;
+    800022d0:	ff45849b          	addiw	s1,a1,-12
+    800022d4:	0004871b          	sext.w	a4,s1
+
+  if(bn < NINDIRECT){
+    800022d8:	0ff00793          	li	a5,255
+    800022dc:	06e7ee63          	bltu	a5,a4,80002358 <bmap+0xc6>
+    // Load indirect block, allocating if necessary.
+    if((addr = ip->addrs[NDIRECT]) == 0){
+    800022e0:	08052903          	lw	s2,128(a0)
+    800022e4:	00091d63          	bnez	s2,800022fe <bmap+0x6c>
+      addr = balloc(ip->dev);
+    800022e8:	4108                	lw	a0,0(a0)
+    800022ea:	e89ff0ef          	jal	80002172 <balloc>
+    800022ee:	0005091b          	sext.w	s2,a0
+      if(addr == 0)
+    800022f2:	02090d63          	beqz	s2,8000232c <bmap+0x9a>
+    800022f6:	e052                	sd	s4,0(sp)
+        return 0;
+      ip->addrs[NDIRECT] = addr;
+    800022f8:	0929a023          	sw	s2,128(s3)
+    800022fc:	a011                	j	80002300 <bmap+0x6e>
+    800022fe:	e052                	sd	s4,0(sp)
+    }
+    bp = bread(ip->dev, addr);
+    80002300:	85ca                	mv	a1,s2
+    80002302:	0009a503          	lw	a0,0(s3)
+    80002306:	c09ff0ef          	jal	80001f0e <bread>
+    8000230a:	8a2a                	mv	s4,a0
+    a = (uint*)bp->data;
+    8000230c:	05850793          	addi	a5,a0,88
+    if((addr = a[bn]) == 0){
+    80002310:	02049713          	slli	a4,s1,0x20
+    80002314:	01e75593          	srli	a1,a4,0x1e
+    80002318:	00b784b3          	add	s1,a5,a1
+    8000231c:	0004a903          	lw	s2,0(s1)
+    80002320:	00090e63          	beqz	s2,8000233c <bmap+0xaa>
+      if(addr){
+        a[bn] = addr;
+        log_write(bp);
+      }
+    }
+    brelse(bp);
+    80002324:	8552                	mv	a0,s4
+    80002326:	cf1ff0ef          	jal	80002016 <brelse>
+    return addr;
+    8000232a:	6a02                	ld	s4,0(sp)
+  }
+
+  panic("bmap: out of range");
+}
+    8000232c:	854a                	mv	a0,s2
+    8000232e:	70a2                	ld	ra,40(sp)
+    80002330:	7402                	ld	s0,32(sp)
+    80002332:	64e2                	ld	s1,24(sp)
+    80002334:	6942                	ld	s2,16(sp)
+    80002336:	69a2                	ld	s3,8(sp)
+    80002338:	6145                	addi	sp,sp,48
+    8000233a:	8082                	ret
+      addr = balloc(ip->dev);
+    8000233c:	0009a503          	lw	a0,0(s3)
+    80002340:	e33ff0ef          	jal	80002172 <balloc>
+    80002344:	0005091b          	sext.w	s2,a0
+      if(addr){
+    80002348:	fc090ee3          	beqz	s2,80002324 <bmap+0x92>
+        a[bn] = addr;
+    8000234c:	0124a023          	sw	s2,0(s1)
+        log_write(bp);
+    80002350:	8552                	mv	a0,s4
+    80002352:	50f000ef          	jal	80003060 <log_write>
+    80002356:	b7f9                	j	80002324 <bmap+0x92>
+    80002358:	e052                	sd	s4,0(sp)
+  panic("bmap: out of range");
+    8000235a:	00005517          	auipc	a0,0x5
+    8000235e:	0de50513          	addi	a0,a0,222 # 80007438 <etext+0x438>
+    80002362:	090030ef          	jal	800053f2 <panic>
+
+0000000080002366 <iget>:
+{
+    80002366:	7179                	addi	sp,sp,-48
+    80002368:	f406                	sd	ra,40(sp)
+    8000236a:	f022                	sd	s0,32(sp)
+    8000236c:	ec26                	sd	s1,24(sp)
+    8000236e:	e84a                	sd	s2,16(sp)
+    80002370:	e44e                	sd	s3,8(sp)
+    80002372:	e052                	sd	s4,0(sp)
+    80002374:	1800                	addi	s0,sp,48
+    80002376:	89aa                	mv	s3,a0
+    80002378:	8a2e                	mv	s4,a1
+  acquire(&itable.lock);
+    8000237a:	00016517          	auipc	a0,0x16
+    8000237e:	3de50513          	addi	a0,a0,990 # 80018758 <itable>
+    80002382:	39e030ef          	jal	80005720 <acquire>
+  empty = 0;
+    80002386:	4901                	li	s2,0
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
+    80002388:	00016497          	auipc	s1,0x16
+    8000238c:	3e848493          	addi	s1,s1,1000 # 80018770 <itable+0x18>
+    80002390:	00018697          	auipc	a3,0x18
+    80002394:	e7068693          	addi	a3,a3,-400 # 8001a200 <log>
+    80002398:	a039                	j	800023a6 <iget+0x40>
+    if(empty == 0 && ip->ref == 0)    // Remember empty slot.
+    8000239a:	02090963          	beqz	s2,800023cc <iget+0x66>
+  for(ip = &itable.inode[0]; ip < &itable.inode[NINODE]; ip++){
+    8000239e:	08848493          	addi	s1,s1,136
+    800023a2:	02d48863          	beq	s1,a3,800023d2 <iget+0x6c>
+    if(ip->ref > 0 && ip->dev == dev && ip->inum == inum){
+    800023a6:	449c                	lw	a5,8(s1)
+    800023a8:	fef059e3          	blez	a5,8000239a <iget+0x34>
+    800023ac:	4098                	lw	a4,0(s1)
+    800023ae:	ff3716e3          	bne	a4,s3,8000239a <iget+0x34>
+    800023b2:	40d8                	lw	a4,4(s1)
+    800023b4:	ff4713e3          	bne	a4,s4,8000239a <iget+0x34>
+      ip->ref++;
+    800023b8:	2785                	addiw	a5,a5,1
+    800023ba:	c49c                	sw	a5,8(s1)
+      release(&itable.lock);
+    800023bc:	00016517          	auipc	a0,0x16
+    800023c0:	39c50513          	addi	a0,a0,924 # 80018758 <itable>
+    800023c4:	3f4030ef          	jal	800057b8 <release>
+      return ip;
+    800023c8:	8926                	mv	s2,s1
+    800023ca:	a02d                	j	800023f4 <iget+0x8e>
+    if(empty == 0 && ip->ref == 0)    // Remember empty slot.
+    800023cc:	fbe9                	bnez	a5,8000239e <iget+0x38>
+      empty = ip;
+    800023ce:	8926                	mv	s2,s1
+    800023d0:	b7f9                	j	8000239e <iget+0x38>
+  if(empty == 0)
+    800023d2:	02090a63          	beqz	s2,80002406 <iget+0xa0>
+  ip->dev = dev;
+    800023d6:	01392023          	sw	s3,0(s2)
+  ip->inum = inum;
+    800023da:	01492223          	sw	s4,4(s2)
+  ip->ref = 1;
+    800023de:	4785                	li	a5,1
+    800023e0:	00f92423          	sw	a5,8(s2)
+  ip->valid = 0;
+    800023e4:	04092023          	sw	zero,64(s2)
+  release(&itable.lock);
+    800023e8:	00016517          	auipc	a0,0x16
+    800023ec:	37050513          	addi	a0,a0,880 # 80018758 <itable>
+    800023f0:	3c8030ef          	jal	800057b8 <release>
+}
+    800023f4:	854a                	mv	a0,s2
+    800023f6:	70a2                	ld	ra,40(sp)
+    800023f8:	7402                	ld	s0,32(sp)
+    800023fa:	64e2                	ld	s1,24(sp)
+    800023fc:	6942                	ld	s2,16(sp)
+    800023fe:	69a2                	ld	s3,8(sp)
+    80002400:	6a02                	ld	s4,0(sp)
+    80002402:	6145                	addi	sp,sp,48
+    80002404:	8082                	ret
+    panic("iget: no inodes");
+    80002406:	00005517          	auipc	a0,0x5
+    8000240a:	04a50513          	addi	a0,a0,74 # 80007450 <etext+0x450>
+    8000240e:	7e5020ef          	jal	800053f2 <panic>
+
+0000000080002412 <fsinit>:
+fsinit(int dev) {
+    80002412:	7179                	addi	sp,sp,-48
+    80002414:	f406                	sd	ra,40(sp)
+    80002416:	f022                	sd	s0,32(sp)
+    80002418:	ec26                	sd	s1,24(sp)
+    8000241a:	e84a                	sd	s2,16(sp)
+    8000241c:	e44e                	sd	s3,8(sp)
+    8000241e:	1800                	addi	s0,sp,48
+    80002420:	892a                	mv	s2,a0
+  bp = bread(dev, 1);
+    80002422:	4585                	li	a1,1
+    80002424:	aebff0ef          	jal	80001f0e <bread>
+    80002428:	84aa                	mv	s1,a0
+  memmove(sb, bp->data, sizeof(*sb));
+    8000242a:	00016997          	auipc	s3,0x16
+    8000242e:	30e98993          	addi	s3,s3,782 # 80018738 <sb>
+    80002432:	02000613          	li	a2,32
+    80002436:	05850593          	addi	a1,a0,88
+    8000243a:	854e                	mv	a0,s3
+    8000243c:	d6ffd0ef          	jal	800001aa <memmove>
+  brelse(bp);
+    80002440:	8526                	mv	a0,s1
+    80002442:	bd5ff0ef          	jal	80002016 <brelse>
+  if(sb.magic != FSMAGIC)
+    80002446:	0009a703          	lw	a4,0(s3)
+    8000244a:	102037b7          	lui	a5,0x10203
+    8000244e:	04078793          	addi	a5,a5,64 # 10203040 <_entry-0x6fdfcfc0>
+    80002452:	02f71063          	bne	a4,a5,80002472 <fsinit+0x60>
+  initlog(dev, &sb);
+    80002456:	00016597          	auipc	a1,0x16
+    8000245a:	2e258593          	addi	a1,a1,738 # 80018738 <sb>
+    8000245e:	854a                	mv	a0,s2
+    80002460:	1f9000ef          	jal	80002e58 <initlog>
+}
+    80002464:	70a2                	ld	ra,40(sp)
+    80002466:	7402                	ld	s0,32(sp)
+    80002468:	64e2                	ld	s1,24(sp)
+    8000246a:	6942                	ld	s2,16(sp)
+    8000246c:	69a2                	ld	s3,8(sp)
+    8000246e:	6145                	addi	sp,sp,48
+    80002470:	8082                	ret
+    panic("invalid file system");
+    80002472:	00005517          	auipc	a0,0x5
+    80002476:	fee50513          	addi	a0,a0,-18 # 80007460 <etext+0x460>
+    8000247a:	779020ef          	jal	800053f2 <panic>
+
+000000008000247e <iinit>:
+{
+    8000247e:	7179                	addi	sp,sp,-48
+    80002480:	f406                	sd	ra,40(sp)
+    80002482:	f022                	sd	s0,32(sp)
+    80002484:	ec26                	sd	s1,24(sp)
+    80002486:	e84a                	sd	s2,16(sp)
+    80002488:	e44e                	sd	s3,8(sp)
+    8000248a:	1800                	addi	s0,sp,48
+  initlock(&itable.lock, "itable");
+    8000248c:	00005597          	auipc	a1,0x5
+    80002490:	fec58593          	addi	a1,a1,-20 # 80007478 <etext+0x478>
+    80002494:	00016517          	auipc	a0,0x16
+    80002498:	2c450513          	addi	a0,a0,708 # 80018758 <itable>
+    8000249c:	204030ef          	jal	800056a0 <initlock>
+  for(i = 0; i < NINODE; i++) {
+    800024a0:	00016497          	auipc	s1,0x16
+    800024a4:	2e048493          	addi	s1,s1,736 # 80018780 <itable+0x28>
+    800024a8:	00018997          	auipc	s3,0x18
+    800024ac:	d6898993          	addi	s3,s3,-664 # 8001a210 <log+0x10>
+    initsleeplock(&itable.inode[i].lock, "inode");
+    800024b0:	00005917          	auipc	s2,0x5
+    800024b4:	fd090913          	addi	s2,s2,-48 # 80007480 <etext+0x480>
+    800024b8:	85ca                	mv	a1,s2
+    800024ba:	8526                	mv	a0,s1
+    800024bc:	475000ef          	jal	80003130 <initsleeplock>
+  for(i = 0; i < NINODE; i++) {
+    800024c0:	08848493          	addi	s1,s1,136
+    800024c4:	ff349ae3          	bne	s1,s3,800024b8 <iinit+0x3a>
+}
+    800024c8:	70a2                	ld	ra,40(sp)
+    800024ca:	7402                	ld	s0,32(sp)
+    800024cc:	64e2                	ld	s1,24(sp)
+    800024ce:	6942                	ld	s2,16(sp)
+    800024d0:	69a2                	ld	s3,8(sp)
+    800024d2:	6145                	addi	sp,sp,48
+    800024d4:	8082                	ret
+
+00000000800024d6 <ialloc>:
+{
+    800024d6:	7139                	addi	sp,sp,-64
+    800024d8:	fc06                	sd	ra,56(sp)
+    800024da:	f822                	sd	s0,48(sp)
+    800024dc:	0080                	addi	s0,sp,64
+  for(inum = 1; inum < sb.ninodes; inum++){
+    800024de:	00016717          	auipc	a4,0x16
+    800024e2:	26672703          	lw	a4,614(a4) # 80018744 <sb+0xc>
+    800024e6:	4785                	li	a5,1
+    800024e8:	06e7f063          	bgeu	a5,a4,80002548 <ialloc+0x72>
+    800024ec:	f426                	sd	s1,40(sp)
+    800024ee:	f04a                	sd	s2,32(sp)
+    800024f0:	ec4e                	sd	s3,24(sp)
+    800024f2:	e852                	sd	s4,16(sp)
+    800024f4:	e456                	sd	s5,8(sp)
+    800024f6:	e05a                	sd	s6,0(sp)
+    800024f8:	8aaa                	mv	s5,a0
+    800024fa:	8b2e                	mv	s6,a1
+    800024fc:	4905                	li	s2,1
+    bp = bread(dev, IBLOCK(inum, sb));
+    800024fe:	00016a17          	auipc	s4,0x16
+    80002502:	23aa0a13          	addi	s4,s4,570 # 80018738 <sb>
+    80002506:	00495593          	srli	a1,s2,0x4
+    8000250a:	018a2783          	lw	a5,24(s4)
+    8000250e:	9dbd                	addw	a1,a1,a5
+    80002510:	8556                	mv	a0,s5
+    80002512:	9fdff0ef          	jal	80001f0e <bread>
+    80002516:	84aa                	mv	s1,a0
+    dip = (struct dinode*)bp->data + inum%IPB;
+    80002518:	05850993          	addi	s3,a0,88
+    8000251c:	00f97793          	andi	a5,s2,15
+    80002520:	079a                	slli	a5,a5,0x6
+    80002522:	99be                	add	s3,s3,a5
+    if(dip->type == 0){  // a free inode
+    80002524:	00099783          	lh	a5,0(s3)
+    80002528:	cb9d                	beqz	a5,8000255e <ialloc+0x88>
+    brelse(bp);
+    8000252a:	aedff0ef          	jal	80002016 <brelse>
+  for(inum = 1; inum < sb.ninodes; inum++){
+    8000252e:	0905                	addi	s2,s2,1
+    80002530:	00ca2703          	lw	a4,12(s4)
+    80002534:	0009079b          	sext.w	a5,s2
+    80002538:	fce7e7e3          	bltu	a5,a4,80002506 <ialloc+0x30>
+    8000253c:	74a2                	ld	s1,40(sp)
+    8000253e:	7902                	ld	s2,32(sp)
+    80002540:	69e2                	ld	s3,24(sp)
+    80002542:	6a42                	ld	s4,16(sp)
+    80002544:	6aa2                	ld	s5,8(sp)
+    80002546:	6b02                	ld	s6,0(sp)
+  printf("ialloc: no inodes\n");
+    80002548:	00005517          	auipc	a0,0x5
+    8000254c:	f4050513          	addi	a0,a0,-192 # 80007488 <etext+0x488>
+    80002550:	3d1020ef          	jal	80005120 <printf>
+  return 0;
+    80002554:	4501                	li	a0,0
+}
+    80002556:	70e2                	ld	ra,56(sp)
+    80002558:	7442                	ld	s0,48(sp)
+    8000255a:	6121                	addi	sp,sp,64
+    8000255c:	8082                	ret
+      memset(dip, 0, sizeof(*dip));
+    8000255e:	04000613          	li	a2,64
+    80002562:	4581                	li	a1,0
+    80002564:	854e                	mv	a0,s3
+    80002566:	be9fd0ef          	jal	8000014e <memset>
+      dip->type = type;
+    8000256a:	01699023          	sh	s6,0(s3)
+      log_write(bp);   // mark it allocated on the disk
+    8000256e:	8526                	mv	a0,s1
+    80002570:	2f1000ef          	jal	80003060 <log_write>
+      brelse(bp);
+    80002574:	8526                	mv	a0,s1
+    80002576:	aa1ff0ef          	jal	80002016 <brelse>
+      return iget(dev, inum);
+    8000257a:	0009059b          	sext.w	a1,s2
+    8000257e:	8556                	mv	a0,s5
+    80002580:	de7ff0ef          	jal	80002366 <iget>
+    80002584:	74a2                	ld	s1,40(sp)
+    80002586:	7902                	ld	s2,32(sp)
+    80002588:	69e2                	ld	s3,24(sp)
+    8000258a:	6a42                	ld	s4,16(sp)
+    8000258c:	6aa2                	ld	s5,8(sp)
+    8000258e:	6b02                	ld	s6,0(sp)
+    80002590:	b7d9                	j	80002556 <ialloc+0x80>
+
+0000000080002592 <iupdate>:
+{
+    80002592:	1101                	addi	sp,sp,-32
+    80002594:	ec06                	sd	ra,24(sp)
+    80002596:	e822                	sd	s0,16(sp)
+    80002598:	e426                	sd	s1,8(sp)
+    8000259a:	e04a                	sd	s2,0(sp)
+    8000259c:	1000                	addi	s0,sp,32
+    8000259e:	84aa                	mv	s1,a0
+  bp = bread(ip->dev, IBLOCK(ip->inum, sb));
+    800025a0:	415c                	lw	a5,4(a0)
+    800025a2:	0047d79b          	srliw	a5,a5,0x4
+    800025a6:	00016597          	auipc	a1,0x16
+    800025aa:	1aa5a583          	lw	a1,426(a1) # 80018750 <sb+0x18>
+    800025ae:	9dbd                	addw	a1,a1,a5
+    800025b0:	4108                	lw	a0,0(a0)
+    800025b2:	95dff0ef          	jal	80001f0e <bread>
+    800025b6:	892a                	mv	s2,a0
+  dip = (struct dinode*)bp->data + ip->inum%IPB;
+    800025b8:	05850793          	addi	a5,a0,88
+    800025bc:	40d8                	lw	a4,4(s1)
+    800025be:	8b3d                	andi	a4,a4,15
+    800025c0:	071a                	slli	a4,a4,0x6
+    800025c2:	97ba                	add	a5,a5,a4
+  dip->type = ip->type;
+    800025c4:	04449703          	lh	a4,68(s1)
+    800025c8:	00e79023          	sh	a4,0(a5)
+  dip->major = ip->major;
+    800025cc:	04649703          	lh	a4,70(s1)
+    800025d0:	00e79123          	sh	a4,2(a5)
+  dip->minor = ip->minor;
+    800025d4:	04849703          	lh	a4,72(s1)
+    800025d8:	00e79223          	sh	a4,4(a5)
+  dip->nlink = ip->nlink;
+    800025dc:	04a49703          	lh	a4,74(s1)
+    800025e0:	00e79323          	sh	a4,6(a5)
+  dip->size = ip->size;
+    800025e4:	44f8                	lw	a4,76(s1)
+    800025e6:	c798                	sw	a4,8(a5)
+  memmove(dip->addrs, ip->addrs, sizeof(ip->addrs));
+    800025e8:	03400613          	li	a2,52
+    800025ec:	05048593          	addi	a1,s1,80
+    800025f0:	00c78513          	addi	a0,a5,12
+    800025f4:	bb7fd0ef          	jal	800001aa <memmove>
+  log_write(bp);
+    800025f8:	854a                	mv	a0,s2
+    800025fa:	267000ef          	jal	80003060 <log_write>
+  brelse(bp);
+    800025fe:	854a                	mv	a0,s2
+    80002600:	a17ff0ef          	jal	80002016 <brelse>
+}
+    80002604:	60e2                	ld	ra,24(sp)
+    80002606:	6442                	ld	s0,16(sp)
+    80002608:	64a2                	ld	s1,8(sp)
+    8000260a:	6902                	ld	s2,0(sp)
+    8000260c:	6105                	addi	sp,sp,32
+    8000260e:	8082                	ret
+
+0000000080002610 <idup>:
+{
+    80002610:	1101                	addi	sp,sp,-32
+    80002612:	ec06                	sd	ra,24(sp)
+    80002614:	e822                	sd	s0,16(sp)
+    80002616:	e426                	sd	s1,8(sp)
+    80002618:	1000                	addi	s0,sp,32
+    8000261a:	84aa                	mv	s1,a0
+  acquire(&itable.lock);
+    8000261c:	00016517          	auipc	a0,0x16
+    80002620:	13c50513          	addi	a0,a0,316 # 80018758 <itable>
+    80002624:	0fc030ef          	jal	80005720 <acquire>
+  ip->ref++;
+    80002628:	449c                	lw	a5,8(s1)
+    8000262a:	2785                	addiw	a5,a5,1
+    8000262c:	c49c                	sw	a5,8(s1)
+  release(&itable.lock);
+    8000262e:	00016517          	auipc	a0,0x16
+    80002632:	12a50513          	addi	a0,a0,298 # 80018758 <itable>
+    80002636:	182030ef          	jal	800057b8 <release>
+}
+    8000263a:	8526                	mv	a0,s1
+    8000263c:	60e2                	ld	ra,24(sp)
+    8000263e:	6442                	ld	s0,16(sp)
+    80002640:	64a2                	ld	s1,8(sp)
+    80002642:	6105                	addi	sp,sp,32
+    80002644:	8082                	ret
+
+0000000080002646 <ilock>:
+{
+    80002646:	1101                	addi	sp,sp,-32
+    80002648:	ec06                	sd	ra,24(sp)
+    8000264a:	e822                	sd	s0,16(sp)
+    8000264c:	e426                	sd	s1,8(sp)
+    8000264e:	1000                	addi	s0,sp,32
+  if(ip == 0 || ip->ref < 1)
+    80002650:	cd19                	beqz	a0,8000266e <ilock+0x28>
+    80002652:	84aa                	mv	s1,a0
+    80002654:	451c                	lw	a5,8(a0)
+    80002656:	00f05c63          	blez	a5,8000266e <ilock+0x28>
+  acquiresleep(&ip->lock);
+    8000265a:	0541                	addi	a0,a0,16
+    8000265c:	30b000ef          	jal	80003166 <acquiresleep>
+  if(ip->valid == 0){
+    80002660:	40bc                	lw	a5,64(s1)
+    80002662:	cf89                	beqz	a5,8000267c <ilock+0x36>
+}
+    80002664:	60e2                	ld	ra,24(sp)
+    80002666:	6442                	ld	s0,16(sp)
+    80002668:	64a2                	ld	s1,8(sp)
+    8000266a:	6105                	addi	sp,sp,32
+    8000266c:	8082                	ret
+    8000266e:	e04a                	sd	s2,0(sp)
+    panic("ilock");
+    80002670:	00005517          	auipc	a0,0x5
+    80002674:	e3050513          	addi	a0,a0,-464 # 800074a0 <etext+0x4a0>
+    80002678:	57b020ef          	jal	800053f2 <panic>
+    8000267c:	e04a                	sd	s2,0(sp)
+    bp = bread(ip->dev, IBLOCK(ip->inum, sb));
+    8000267e:	40dc                	lw	a5,4(s1)
+    80002680:	0047d79b          	srliw	a5,a5,0x4
+    80002684:	00016597          	auipc	a1,0x16
+    80002688:	0cc5a583          	lw	a1,204(a1) # 80018750 <sb+0x18>
+    8000268c:	9dbd                	addw	a1,a1,a5
+    8000268e:	4088                	lw	a0,0(s1)
+    80002690:	87fff0ef          	jal	80001f0e <bread>
+    80002694:	892a                	mv	s2,a0
+    dip = (struct dinode*)bp->data + ip->inum%IPB;
+    80002696:	05850593          	addi	a1,a0,88
+    8000269a:	40dc                	lw	a5,4(s1)
+    8000269c:	8bbd                	andi	a5,a5,15
+    8000269e:	079a                	slli	a5,a5,0x6
+    800026a0:	95be                	add	a1,a1,a5
+    ip->type = dip->type;
+    800026a2:	00059783          	lh	a5,0(a1)
+    800026a6:	04f49223          	sh	a5,68(s1)
+    ip->major = dip->major;
+    800026aa:	00259783          	lh	a5,2(a1)
+    800026ae:	04f49323          	sh	a5,70(s1)
+    ip->minor = dip->minor;
+    800026b2:	00459783          	lh	a5,4(a1)
+    800026b6:	04f49423          	sh	a5,72(s1)
+    ip->nlink = dip->nlink;
+    800026ba:	00659783          	lh	a5,6(a1)
+    800026be:	04f49523          	sh	a5,74(s1)
+    ip->size = dip->size;
+    800026c2:	459c                	lw	a5,8(a1)
+    800026c4:	c4fc                	sw	a5,76(s1)
+    memmove(ip->addrs, dip->addrs, sizeof(ip->addrs));
+    800026c6:	03400613          	li	a2,52
+    800026ca:	05b1                	addi	a1,a1,12
+    800026cc:	05048513          	addi	a0,s1,80
+    800026d0:	adbfd0ef          	jal	800001aa <memmove>
+    brelse(bp);
+    800026d4:	854a                	mv	a0,s2
+    800026d6:	941ff0ef          	jal	80002016 <brelse>
+    ip->valid = 1;
+    800026da:	4785                	li	a5,1
+    800026dc:	c0bc                	sw	a5,64(s1)
+    if(ip->type == 0)
+    800026de:	04449783          	lh	a5,68(s1)
+    800026e2:	c399                	beqz	a5,800026e8 <ilock+0xa2>
+    800026e4:	6902                	ld	s2,0(sp)
+    800026e6:	bfbd                	j	80002664 <ilock+0x1e>
+      panic("ilock: no type");
+    800026e8:	00005517          	auipc	a0,0x5
+    800026ec:	dc050513          	addi	a0,a0,-576 # 800074a8 <etext+0x4a8>
+    800026f0:	503020ef          	jal	800053f2 <panic>
+
+00000000800026f4 <iunlock>:
+{
+    800026f4:	1101                	addi	sp,sp,-32
+    800026f6:	ec06                	sd	ra,24(sp)
+    800026f8:	e822                	sd	s0,16(sp)
+    800026fa:	e426                	sd	s1,8(sp)
+    800026fc:	e04a                	sd	s2,0(sp)
+    800026fe:	1000                	addi	s0,sp,32
+  if(ip == 0 || !holdingsleep(&ip->lock) || ip->ref < 1)
+    80002700:	c505                	beqz	a0,80002728 <iunlock+0x34>
+    80002702:	84aa                	mv	s1,a0
+    80002704:	01050913          	addi	s2,a0,16
+    80002708:	854a                	mv	a0,s2
+    8000270a:	2db000ef          	jal	800031e4 <holdingsleep>
+    8000270e:	cd09                	beqz	a0,80002728 <iunlock+0x34>
+    80002710:	449c                	lw	a5,8(s1)
+    80002712:	00f05b63          	blez	a5,80002728 <iunlock+0x34>
+  releasesleep(&ip->lock);
+    80002716:	854a                	mv	a0,s2
+    80002718:	295000ef          	jal	800031ac <releasesleep>
+}
+    8000271c:	60e2                	ld	ra,24(sp)
+    8000271e:	6442                	ld	s0,16(sp)
+    80002720:	64a2                	ld	s1,8(sp)
+    80002722:	6902                	ld	s2,0(sp)
+    80002724:	6105                	addi	sp,sp,32
+    80002726:	8082                	ret
+    panic("iunlock");
+    80002728:	00005517          	auipc	a0,0x5
+    8000272c:	d9050513          	addi	a0,a0,-624 # 800074b8 <etext+0x4b8>
+    80002730:	4c3020ef          	jal	800053f2 <panic>
+
+0000000080002734 <itrunc>:
+
+// Truncate inode (discard contents).
+// Caller must hold ip->lock.
+void
+itrunc(struct inode *ip)
+{
+    80002734:	7179                	addi	sp,sp,-48
+    80002736:	f406                	sd	ra,40(sp)
+    80002738:	f022                	sd	s0,32(sp)
+    8000273a:	ec26                	sd	s1,24(sp)
+    8000273c:	e84a                	sd	s2,16(sp)
+    8000273e:	e44e                	sd	s3,8(sp)
+    80002740:	1800                	addi	s0,sp,48
+    80002742:	89aa                	mv	s3,a0
+  int i, j;
+  struct buf *bp;
+  uint *a;
+
+  for(i = 0; i < NDIRECT; i++){
+    80002744:	05050493          	addi	s1,a0,80
+    80002748:	08050913          	addi	s2,a0,128
+    8000274c:	a021                	j	80002754 <itrunc+0x20>
+    8000274e:	0491                	addi	s1,s1,4
+    80002750:	01248b63          	beq	s1,s2,80002766 <itrunc+0x32>
+    if(ip->addrs[i]){
+    80002754:	408c                	lw	a1,0(s1)
+    80002756:	dde5                	beqz	a1,8000274e <itrunc+0x1a>
+      bfree(ip->dev, ip->addrs[i]);
+    80002758:	0009a503          	lw	a0,0(s3)
+    8000275c:	9abff0ef          	jal	80002106 <bfree>
+      ip->addrs[i] = 0;
+    80002760:	0004a023          	sw	zero,0(s1)
+    80002764:	b7ed                	j	8000274e <itrunc+0x1a>
+    }
+  }
+
+  if(ip->addrs[NDIRECT]){
+    80002766:	0809a583          	lw	a1,128(s3)
+    8000276a:	ed89                	bnez	a1,80002784 <itrunc+0x50>
+    brelse(bp);
+    bfree(ip->dev, ip->addrs[NDIRECT]);
+    ip->addrs[NDIRECT] = 0;
+  }
+
+  ip->size = 0;
+    8000276c:	0409a623          	sw	zero,76(s3)
+  iupdate(ip);
+    80002770:	854e                	mv	a0,s3
+    80002772:	e21ff0ef          	jal	80002592 <iupdate>
+}
+    80002776:	70a2                	ld	ra,40(sp)
+    80002778:	7402                	ld	s0,32(sp)
+    8000277a:	64e2                	ld	s1,24(sp)
+    8000277c:	6942                	ld	s2,16(sp)
+    8000277e:	69a2                	ld	s3,8(sp)
+    80002780:	6145                	addi	sp,sp,48
+    80002782:	8082                	ret
+    80002784:	e052                	sd	s4,0(sp)
+    bp = bread(ip->dev, ip->addrs[NDIRECT]);
+    80002786:	0009a503          	lw	a0,0(s3)
+    8000278a:	f84ff0ef          	jal	80001f0e <bread>
+    8000278e:	8a2a                	mv	s4,a0
+    for(j = 0; j < NINDIRECT; j++){
+    80002790:	05850493          	addi	s1,a0,88
+    80002794:	45850913          	addi	s2,a0,1112
+    80002798:	a021                	j	800027a0 <itrunc+0x6c>
+    8000279a:	0491                	addi	s1,s1,4
+    8000279c:	01248963          	beq	s1,s2,800027ae <itrunc+0x7a>
+      if(a[j])
+    800027a0:	408c                	lw	a1,0(s1)
+    800027a2:	dde5                	beqz	a1,8000279a <itrunc+0x66>
+        bfree(ip->dev, a[j]);
+    800027a4:	0009a503          	lw	a0,0(s3)
+    800027a8:	95fff0ef          	jal	80002106 <bfree>
+    800027ac:	b7fd                	j	8000279a <itrunc+0x66>
+    brelse(bp);
+    800027ae:	8552                	mv	a0,s4
+    800027b0:	867ff0ef          	jal	80002016 <brelse>
+    bfree(ip->dev, ip->addrs[NDIRECT]);
+    800027b4:	0809a583          	lw	a1,128(s3)
+    800027b8:	0009a503          	lw	a0,0(s3)
+    800027bc:	94bff0ef          	jal	80002106 <bfree>
+    ip->addrs[NDIRECT] = 0;
+    800027c0:	0809a023          	sw	zero,128(s3)
+    800027c4:	6a02                	ld	s4,0(sp)
+    800027c6:	b75d                	j	8000276c <itrunc+0x38>
+
+00000000800027c8 <iput>:
+{
+    800027c8:	1101                	addi	sp,sp,-32
+    800027ca:	ec06                	sd	ra,24(sp)
+    800027cc:	e822                	sd	s0,16(sp)
+    800027ce:	e426                	sd	s1,8(sp)
+    800027d0:	1000                	addi	s0,sp,32
+    800027d2:	84aa                	mv	s1,a0
+  acquire(&itable.lock);
+    800027d4:	00016517          	auipc	a0,0x16
+    800027d8:	f8450513          	addi	a0,a0,-124 # 80018758 <itable>
+    800027dc:	745020ef          	jal	80005720 <acquire>
+  if(ip->ref == 1 && ip->valid && ip->nlink == 0){
+    800027e0:	4498                	lw	a4,8(s1)
+    800027e2:	4785                	li	a5,1
+    800027e4:	02f70063          	beq	a4,a5,80002804 <iput+0x3c>
+  ip->ref--;
+    800027e8:	449c                	lw	a5,8(s1)
+    800027ea:	37fd                	addiw	a5,a5,-1
+    800027ec:	c49c                	sw	a5,8(s1)
+  release(&itable.lock);
+    800027ee:	00016517          	auipc	a0,0x16
+    800027f2:	f6a50513          	addi	a0,a0,-150 # 80018758 <itable>
+    800027f6:	7c3020ef          	jal	800057b8 <release>
+}
+    800027fa:	60e2                	ld	ra,24(sp)
+    800027fc:	6442                	ld	s0,16(sp)
+    800027fe:	64a2                	ld	s1,8(sp)
+    80002800:	6105                	addi	sp,sp,32
+    80002802:	8082                	ret
+  if(ip->ref == 1 && ip->valid && ip->nlink == 0){
+    80002804:	40bc                	lw	a5,64(s1)
+    80002806:	d3ed                	beqz	a5,800027e8 <iput+0x20>
+    80002808:	04a49783          	lh	a5,74(s1)
+    8000280c:	fff1                	bnez	a5,800027e8 <iput+0x20>
+    8000280e:	e04a                	sd	s2,0(sp)
+    acquiresleep(&ip->lock);
+    80002810:	01048913          	addi	s2,s1,16
+    80002814:	854a                	mv	a0,s2
+    80002816:	151000ef          	jal	80003166 <acquiresleep>
+    release(&itable.lock);
+    8000281a:	00016517          	auipc	a0,0x16
+    8000281e:	f3e50513          	addi	a0,a0,-194 # 80018758 <itable>
+    80002822:	797020ef          	jal	800057b8 <release>
+    itrunc(ip);
+    80002826:	8526                	mv	a0,s1
+    80002828:	f0dff0ef          	jal	80002734 <itrunc>
+    ip->type = 0;
+    8000282c:	04049223          	sh	zero,68(s1)
+    iupdate(ip);
+    80002830:	8526                	mv	a0,s1
+    80002832:	d61ff0ef          	jal	80002592 <iupdate>
+    ip->valid = 0;
+    80002836:	0404a023          	sw	zero,64(s1)
+    releasesleep(&ip->lock);
+    8000283a:	854a                	mv	a0,s2
+    8000283c:	171000ef          	jal	800031ac <releasesleep>
+    acquire(&itable.lock);
+    80002840:	00016517          	auipc	a0,0x16
+    80002844:	f1850513          	addi	a0,a0,-232 # 80018758 <itable>
+    80002848:	6d9020ef          	jal	80005720 <acquire>
+    8000284c:	6902                	ld	s2,0(sp)
+    8000284e:	bf69                	j	800027e8 <iput+0x20>
+
+0000000080002850 <iunlockput>:
+{
+    80002850:	1101                	addi	sp,sp,-32
+    80002852:	ec06                	sd	ra,24(sp)
+    80002854:	e822                	sd	s0,16(sp)
+    80002856:	e426                	sd	s1,8(sp)
+    80002858:	1000                	addi	s0,sp,32
+    8000285a:	84aa                	mv	s1,a0
+  iunlock(ip);
+    8000285c:	e99ff0ef          	jal	800026f4 <iunlock>
+  iput(ip);
+    80002860:	8526                	mv	a0,s1
+    80002862:	f67ff0ef          	jal	800027c8 <iput>
+}
+    80002866:	60e2                	ld	ra,24(sp)
+    80002868:	6442                	ld	s0,16(sp)
+    8000286a:	64a2                	ld	s1,8(sp)
+    8000286c:	6105                	addi	sp,sp,32
+    8000286e:	8082                	ret
+
+0000000080002870 <stati>:
+
+// Copy stat information from inode.
+// Caller must hold ip->lock.
+void
+stati(struct inode *ip, struct stat *st)
+{
+    80002870:	1141                	addi	sp,sp,-16
+    80002872:	e422                	sd	s0,8(sp)
+    80002874:	0800                	addi	s0,sp,16
+  st->dev = ip->dev;
+    80002876:	411c                	lw	a5,0(a0)
+    80002878:	c19c                	sw	a5,0(a1)
+  st->ino = ip->inum;
+    8000287a:	415c                	lw	a5,4(a0)
+    8000287c:	c1dc                	sw	a5,4(a1)
+  st->type = ip->type;
+    8000287e:	04451783          	lh	a5,68(a0)
+    80002882:	00f59423          	sh	a5,8(a1)
+  st->nlink = ip->nlink;
+    80002886:	04a51783          	lh	a5,74(a0)
+    8000288a:	00f59523          	sh	a5,10(a1)
+  st->size = ip->size;
+    8000288e:	04c56783          	lwu	a5,76(a0)
+    80002892:	e99c                	sd	a5,16(a1)
+}
+    80002894:	6422                	ld	s0,8(sp)
+    80002896:	0141                	addi	sp,sp,16
+    80002898:	8082                	ret
+
+000000008000289a <readi>:
+readi(struct inode *ip, int user_dst, uint64 dst, uint off, uint n)
+{
+  uint tot, m;
+  struct buf *bp;
+
+  if(off > ip->size || off + n < off)
+    8000289a:	457c                	lw	a5,76(a0)
+    8000289c:	0ed7eb63          	bltu	a5,a3,80002992 <readi+0xf8>
+{
+    800028a0:	7159                	addi	sp,sp,-112
+    800028a2:	f486                	sd	ra,104(sp)
+    800028a4:	f0a2                	sd	s0,96(sp)
+    800028a6:	eca6                	sd	s1,88(sp)
+    800028a8:	e0d2                	sd	s4,64(sp)
+    800028aa:	fc56                	sd	s5,56(sp)
+    800028ac:	f85a                	sd	s6,48(sp)
+    800028ae:	f45e                	sd	s7,40(sp)
+    800028b0:	1880                	addi	s0,sp,112
+    800028b2:	8b2a                	mv	s6,a0
+    800028b4:	8bae                	mv	s7,a1
+    800028b6:	8a32                	mv	s4,a2
+    800028b8:	84b6                	mv	s1,a3
+    800028ba:	8aba                	mv	s5,a4
+  if(off > ip->size || off + n < off)
+    800028bc:	9f35                	addw	a4,a4,a3
+    return 0;
+    800028be:	4501                	li	a0,0
+  if(off > ip->size || off + n < off)
+    800028c0:	0cd76063          	bltu	a4,a3,80002980 <readi+0xe6>
+    800028c4:	e4ce                	sd	s3,72(sp)
+  if(off + n > ip->size)
+    800028c6:	00e7f463          	bgeu	a5,a4,800028ce <readi+0x34>
+    n = ip->size - off;
+    800028ca:	40d78abb          	subw	s5,a5,a3
+
+  for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
+    800028ce:	080a8f63          	beqz	s5,8000296c <readi+0xd2>
+    800028d2:	e8ca                	sd	s2,80(sp)
+    800028d4:	f062                	sd	s8,32(sp)
+    800028d6:	ec66                	sd	s9,24(sp)
+    800028d8:	e86a                	sd	s10,16(sp)
+    800028da:	e46e                	sd	s11,8(sp)
+    800028dc:	4981                	li	s3,0
+    uint addr = bmap(ip, off/BSIZE);
+    if(addr == 0)
+      break;
+    bp = bread(ip->dev, addr);
+    m = min(n - tot, BSIZE - off%BSIZE);
+    800028de:	40000c93          	li	s9,1024
+    if(either_copyout(user_dst, dst, bp->data + (off % BSIZE), m) == -1) {
+    800028e2:	5c7d                	li	s8,-1
+    800028e4:	a80d                	j	80002916 <readi+0x7c>
+    800028e6:	020d1d93          	slli	s11,s10,0x20
+    800028ea:	020ddd93          	srli	s11,s11,0x20
+    800028ee:	05890613          	addi	a2,s2,88
+    800028f2:	86ee                	mv	a3,s11
+    800028f4:	963a                	add	a2,a2,a4
+    800028f6:	85d2                	mv	a1,s4
+    800028f8:	855e                	mv	a0,s7
+    800028fa:	d97fe0ef          	jal	80001690 <either_copyout>
+    800028fe:	05850763          	beq	a0,s8,8000294c <readi+0xb2>
+      brelse(bp);
+      tot = -1;
+      break;
+    }
+    brelse(bp);
+    80002902:	854a                	mv	a0,s2
+    80002904:	f12ff0ef          	jal	80002016 <brelse>
+  for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
+    80002908:	013d09bb          	addw	s3,s10,s3
+    8000290c:	009d04bb          	addw	s1,s10,s1
+    80002910:	9a6e                	add	s4,s4,s11
+    80002912:	0559f763          	bgeu	s3,s5,80002960 <readi+0xc6>
+    uint addr = bmap(ip, off/BSIZE);
+    80002916:	00a4d59b          	srliw	a1,s1,0xa
+    8000291a:	855a                	mv	a0,s6
+    8000291c:	977ff0ef          	jal	80002292 <bmap>
+    80002920:	0005059b          	sext.w	a1,a0
+    if(addr == 0)
+    80002924:	c5b1                	beqz	a1,80002970 <readi+0xd6>
+    bp = bread(ip->dev, addr);
+    80002926:	000b2503          	lw	a0,0(s6)
+    8000292a:	de4ff0ef          	jal	80001f0e <bread>
+    8000292e:	892a                	mv	s2,a0
+    m = min(n - tot, BSIZE - off%BSIZE);
+    80002930:	3ff4f713          	andi	a4,s1,1023
+    80002934:	40ec87bb          	subw	a5,s9,a4
+    80002938:	413a86bb          	subw	a3,s5,s3
+    8000293c:	8d3e                	mv	s10,a5
+    8000293e:	2781                	sext.w	a5,a5
+    80002940:	0006861b          	sext.w	a2,a3
+    80002944:	faf671e3          	bgeu	a2,a5,800028e6 <readi+0x4c>
+    80002948:	8d36                	mv	s10,a3
+    8000294a:	bf71                	j	800028e6 <readi+0x4c>
+      brelse(bp);
+    8000294c:	854a                	mv	a0,s2
+    8000294e:	ec8ff0ef          	jal	80002016 <brelse>
+      tot = -1;
+    80002952:	59fd                	li	s3,-1
+      break;
+    80002954:	6946                	ld	s2,80(sp)
+    80002956:	7c02                	ld	s8,32(sp)
+    80002958:	6ce2                	ld	s9,24(sp)
+    8000295a:	6d42                	ld	s10,16(sp)
+    8000295c:	6da2                	ld	s11,8(sp)
+    8000295e:	a831                	j	8000297a <readi+0xe0>
+    80002960:	6946                	ld	s2,80(sp)
+    80002962:	7c02                	ld	s8,32(sp)
+    80002964:	6ce2                	ld	s9,24(sp)
+    80002966:	6d42                	ld	s10,16(sp)
+    80002968:	6da2                	ld	s11,8(sp)
+    8000296a:	a801                	j	8000297a <readi+0xe0>
+  for(tot=0; tot<n; tot+=m, off+=m, dst+=m){
+    8000296c:	89d6                	mv	s3,s5
+    8000296e:	a031                	j	8000297a <readi+0xe0>
+    80002970:	6946                	ld	s2,80(sp)
+    80002972:	7c02                	ld	s8,32(sp)
+    80002974:	6ce2                	ld	s9,24(sp)
+    80002976:	6d42                	ld	s10,16(sp)
+    80002978:	6da2                	ld	s11,8(sp)
+  }
+  return tot;
+    8000297a:	0009851b          	sext.w	a0,s3
+    8000297e:	69a6                	ld	s3,72(sp)
+}
+    80002980:	70a6                	ld	ra,104(sp)
+    80002982:	7406                	ld	s0,96(sp)
+    80002984:	64e6                	ld	s1,88(sp)
+    80002986:	6a06                	ld	s4,64(sp)
+    80002988:	7ae2                	ld	s5,56(sp)
+    8000298a:	7b42                	ld	s6,48(sp)
+    8000298c:	7ba2                	ld	s7,40(sp)
+    8000298e:	6165                	addi	sp,sp,112
+    80002990:	8082                	ret
+    return 0;
+    80002992:	4501                	li	a0,0
+}
+    80002994:	8082                	ret
+
+0000000080002996 <writei>:
+writei(struct inode *ip, int user_src, uint64 src, uint off, uint n)
+{
+  uint tot, m;
+  struct buf *bp;
+
+  if(off > ip->size || off + n < off)
+    80002996:	457c                	lw	a5,76(a0)
+    80002998:	10d7e063          	bltu	a5,a3,80002a98 <writei+0x102>
+{
+    8000299c:	7159                	addi	sp,sp,-112
+    8000299e:	f486                	sd	ra,104(sp)
+    800029a0:	f0a2                	sd	s0,96(sp)
+    800029a2:	e8ca                	sd	s2,80(sp)
+    800029a4:	e0d2                	sd	s4,64(sp)
+    800029a6:	fc56                	sd	s5,56(sp)
+    800029a8:	f85a                	sd	s6,48(sp)
+    800029aa:	f45e                	sd	s7,40(sp)
+    800029ac:	1880                	addi	s0,sp,112
+    800029ae:	8aaa                	mv	s5,a0
+    800029b0:	8bae                	mv	s7,a1
+    800029b2:	8a32                	mv	s4,a2
+    800029b4:	8936                	mv	s2,a3
+    800029b6:	8b3a                	mv	s6,a4
+  if(off > ip->size || off + n < off)
+    800029b8:	00e687bb          	addw	a5,a3,a4
+    800029bc:	0ed7e063          	bltu	a5,a3,80002a9c <writei+0x106>
+    return -1;
+  if(off + n > MAXFILE*BSIZE)
+    800029c0:	00043737          	lui	a4,0x43
+    800029c4:	0cf76e63          	bltu	a4,a5,80002aa0 <writei+0x10a>
+    800029c8:	e4ce                	sd	s3,72(sp)
+    return -1;
+
+  for(tot=0; tot<n; tot+=m, off+=m, src+=m){
+    800029ca:	0a0b0f63          	beqz	s6,80002a88 <writei+0xf2>
+    800029ce:	eca6                	sd	s1,88(sp)
+    800029d0:	f062                	sd	s8,32(sp)
+    800029d2:	ec66                	sd	s9,24(sp)
+    800029d4:	e86a                	sd	s10,16(sp)
+    800029d6:	e46e                	sd	s11,8(sp)
+    800029d8:	4981                	li	s3,0
+    uint addr = bmap(ip, off/BSIZE);
+    if(addr == 0)
+      break;
+    bp = bread(ip->dev, addr);
+    m = min(n - tot, BSIZE - off%BSIZE);
+    800029da:	40000c93          	li	s9,1024
+    if(either_copyin(bp->data + (off % BSIZE), user_src, src, m) == -1) {
+    800029de:	5c7d                	li	s8,-1
+    800029e0:	a825                	j	80002a18 <writei+0x82>
+    800029e2:	020d1d93          	slli	s11,s10,0x20
+    800029e6:	020ddd93          	srli	s11,s11,0x20
+    800029ea:	05848513          	addi	a0,s1,88
+    800029ee:	86ee                	mv	a3,s11
+    800029f0:	8652                	mv	a2,s4
+    800029f2:	85de                	mv	a1,s7
+    800029f4:	953a                	add	a0,a0,a4
+    800029f6:	ce5fe0ef          	jal	800016da <either_copyin>
+    800029fa:	05850a63          	beq	a0,s8,80002a4e <writei+0xb8>
+      brelse(bp);
+      break;
+    }
+    log_write(bp);
+    800029fe:	8526                	mv	a0,s1
+    80002a00:	660000ef          	jal	80003060 <log_write>
+    brelse(bp);
+    80002a04:	8526                	mv	a0,s1
+    80002a06:	e10ff0ef          	jal	80002016 <brelse>
+  for(tot=0; tot<n; tot+=m, off+=m, src+=m){
+    80002a0a:	013d09bb          	addw	s3,s10,s3
+    80002a0e:	012d093b          	addw	s2,s10,s2
+    80002a12:	9a6e                	add	s4,s4,s11
+    80002a14:	0569f063          	bgeu	s3,s6,80002a54 <writei+0xbe>
+    uint addr = bmap(ip, off/BSIZE);
+    80002a18:	00a9559b          	srliw	a1,s2,0xa
+    80002a1c:	8556                	mv	a0,s5
+    80002a1e:	875ff0ef          	jal	80002292 <bmap>
+    80002a22:	0005059b          	sext.w	a1,a0
+    if(addr == 0)
+    80002a26:	c59d                	beqz	a1,80002a54 <writei+0xbe>
+    bp = bread(ip->dev, addr);
+    80002a28:	000aa503          	lw	a0,0(s5)
+    80002a2c:	ce2ff0ef          	jal	80001f0e <bread>
+    80002a30:	84aa                	mv	s1,a0
+    m = min(n - tot, BSIZE - off%BSIZE);
+    80002a32:	3ff97713          	andi	a4,s2,1023
+    80002a36:	40ec87bb          	subw	a5,s9,a4
+    80002a3a:	413b06bb          	subw	a3,s6,s3
+    80002a3e:	8d3e                	mv	s10,a5
+    80002a40:	2781                	sext.w	a5,a5
+    80002a42:	0006861b          	sext.w	a2,a3
+    80002a46:	f8f67ee3          	bgeu	a2,a5,800029e2 <writei+0x4c>
+    80002a4a:	8d36                	mv	s10,a3
+    80002a4c:	bf59                	j	800029e2 <writei+0x4c>
+      brelse(bp);
+    80002a4e:	8526                	mv	a0,s1
+    80002a50:	dc6ff0ef          	jal	80002016 <brelse>
+  }
+
+  if(off > ip->size)
+    80002a54:	04caa783          	lw	a5,76(s5)
+    80002a58:	0327fa63          	bgeu	a5,s2,80002a8c <writei+0xf6>
+    ip->size = off;
+    80002a5c:	052aa623          	sw	s2,76(s5)
+    80002a60:	64e6                	ld	s1,88(sp)
+    80002a62:	7c02                	ld	s8,32(sp)
+    80002a64:	6ce2                	ld	s9,24(sp)
+    80002a66:	6d42                	ld	s10,16(sp)
+    80002a68:	6da2                	ld	s11,8(sp)
+
+  // write the i-node back to disk even if the size didn't change
+  // because the loop above might have called bmap() and added a new
+  // block to ip->addrs[].
+  iupdate(ip);
+    80002a6a:	8556                	mv	a0,s5
+    80002a6c:	b27ff0ef          	jal	80002592 <iupdate>
+
+  return tot;
+    80002a70:	0009851b          	sext.w	a0,s3
+    80002a74:	69a6                	ld	s3,72(sp)
+}
+    80002a76:	70a6                	ld	ra,104(sp)
+    80002a78:	7406                	ld	s0,96(sp)
+    80002a7a:	6946                	ld	s2,80(sp)
+    80002a7c:	6a06                	ld	s4,64(sp)
+    80002a7e:	7ae2                	ld	s5,56(sp)
+    80002a80:	7b42                	ld	s6,48(sp)
+    80002a82:	7ba2                	ld	s7,40(sp)
+    80002a84:	6165                	addi	sp,sp,112
+    80002a86:	8082                	ret
+  for(tot=0; tot<n; tot+=m, off+=m, src+=m){
+    80002a88:	89da                	mv	s3,s6
+    80002a8a:	b7c5                	j	80002a6a <writei+0xd4>
+    80002a8c:	64e6                	ld	s1,88(sp)
+    80002a8e:	7c02                	ld	s8,32(sp)
+    80002a90:	6ce2                	ld	s9,24(sp)
+    80002a92:	6d42                	ld	s10,16(sp)
+    80002a94:	6da2                	ld	s11,8(sp)
+    80002a96:	bfd1                	j	80002a6a <writei+0xd4>
+    return -1;
+    80002a98:	557d                	li	a0,-1
+}
+    80002a9a:	8082                	ret
+    return -1;
+    80002a9c:	557d                	li	a0,-1
+    80002a9e:	bfe1                	j	80002a76 <writei+0xe0>
+    return -1;
+    80002aa0:	557d                	li	a0,-1
+    80002aa2:	bfd1                	j	80002a76 <writei+0xe0>
+
+0000000080002aa4 <namecmp>:
+
+// Directories
+
+int
+namecmp(const char *s, const char *t)
+{
+    80002aa4:	1141                	addi	sp,sp,-16
+    80002aa6:	e406                	sd	ra,8(sp)
+    80002aa8:	e022                	sd	s0,0(sp)
+    80002aaa:	0800                	addi	s0,sp,16
+  return strncmp(s, t, DIRSIZ);
+    80002aac:	4639                	li	a2,14
+    80002aae:	f6cfd0ef          	jal	8000021a <strncmp>
+}
+    80002ab2:	60a2                	ld	ra,8(sp)
+    80002ab4:	6402                	ld	s0,0(sp)
+    80002ab6:	0141                	addi	sp,sp,16
+    80002ab8:	8082                	ret
+
+0000000080002aba <dirlookup>:
+
+// Look for a directory entry in a directory.
+// If found, set *poff to byte offset of entry.
+struct inode*
+dirlookup(struct inode *dp, char *name, uint *poff)
+{
+    80002aba:	7139                	addi	sp,sp,-64
+    80002abc:	fc06                	sd	ra,56(sp)
+    80002abe:	f822                	sd	s0,48(sp)
+    80002ac0:	f426                	sd	s1,40(sp)
+    80002ac2:	f04a                	sd	s2,32(sp)
+    80002ac4:	ec4e                	sd	s3,24(sp)
+    80002ac6:	e852                	sd	s4,16(sp)
+    80002ac8:	0080                	addi	s0,sp,64
+  uint off, inum;
+  struct dirent de;
+
+  if(dp->type != T_DIR)
+    80002aca:	04451703          	lh	a4,68(a0)
+    80002ace:	4785                	li	a5,1
+    80002ad0:	00f71a63          	bne	a4,a5,80002ae4 <dirlookup+0x2a>
+    80002ad4:	892a                	mv	s2,a0
+    80002ad6:	89ae                	mv	s3,a1
+    80002ad8:	8a32                	mv	s4,a2
+    panic("dirlookup not DIR");
+
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    80002ada:	457c                	lw	a5,76(a0)
+    80002adc:	4481                	li	s1,0
+      inum = de.inum;
+      return iget(dp->dev, inum);
+    }
+  }
+
+  return 0;
+    80002ade:	4501                	li	a0,0
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    80002ae0:	e39d                	bnez	a5,80002b06 <dirlookup+0x4c>
+    80002ae2:	a095                	j	80002b46 <dirlookup+0x8c>
+    panic("dirlookup not DIR");
+    80002ae4:	00005517          	auipc	a0,0x5
+    80002ae8:	9dc50513          	addi	a0,a0,-1572 # 800074c0 <etext+0x4c0>
+    80002aec:	107020ef          	jal	800053f2 <panic>
+      panic("dirlookup read");
+    80002af0:	00005517          	auipc	a0,0x5
+    80002af4:	9e850513          	addi	a0,a0,-1560 # 800074d8 <etext+0x4d8>
+    80002af8:	0fb020ef          	jal	800053f2 <panic>
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    80002afc:	24c1                	addiw	s1,s1,16
+    80002afe:	04c92783          	lw	a5,76(s2)
+    80002b02:	04f4f163          	bgeu	s1,a5,80002b44 <dirlookup+0x8a>
+    if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+    80002b06:	4741                	li	a4,16
+    80002b08:	86a6                	mv	a3,s1
+    80002b0a:	fc040613          	addi	a2,s0,-64
+    80002b0e:	4581                	li	a1,0
+    80002b10:	854a                	mv	a0,s2
+    80002b12:	d89ff0ef          	jal	8000289a <readi>
+    80002b16:	47c1                	li	a5,16
+    80002b18:	fcf51ce3          	bne	a0,a5,80002af0 <dirlookup+0x36>
+    if(de.inum == 0)
+    80002b1c:	fc045783          	lhu	a5,-64(s0)
+    80002b20:	dff1                	beqz	a5,80002afc <dirlookup+0x42>
+    if(namecmp(name, de.name) == 0){
+    80002b22:	fc240593          	addi	a1,s0,-62
+    80002b26:	854e                	mv	a0,s3
+    80002b28:	f7dff0ef          	jal	80002aa4 <namecmp>
+    80002b2c:	f961                	bnez	a0,80002afc <dirlookup+0x42>
+      if(poff)
+    80002b2e:	000a0463          	beqz	s4,80002b36 <dirlookup+0x7c>
+        *poff = off;
+    80002b32:	009a2023          	sw	s1,0(s4)
+      return iget(dp->dev, inum);
+    80002b36:	fc045583          	lhu	a1,-64(s0)
+    80002b3a:	00092503          	lw	a0,0(s2)
+    80002b3e:	829ff0ef          	jal	80002366 <iget>
+    80002b42:	a011                	j	80002b46 <dirlookup+0x8c>
+  return 0;
+    80002b44:	4501                	li	a0,0
+}
+    80002b46:	70e2                	ld	ra,56(sp)
+    80002b48:	7442                	ld	s0,48(sp)
+    80002b4a:	74a2                	ld	s1,40(sp)
+    80002b4c:	7902                	ld	s2,32(sp)
+    80002b4e:	69e2                	ld	s3,24(sp)
+    80002b50:	6a42                	ld	s4,16(sp)
+    80002b52:	6121                	addi	sp,sp,64
+    80002b54:	8082                	ret
+
+0000000080002b56 <namex>:
+// If parent != 0, return the inode for the parent and copy the final
+// path element into name, which must have room for DIRSIZ bytes.
+// Must be called inside a transaction since it calls iput().
+static struct inode*
+namex(char *path, int nameiparent, char *name)
+{
+    80002b56:	711d                	addi	sp,sp,-96
+    80002b58:	ec86                	sd	ra,88(sp)
+    80002b5a:	e8a2                	sd	s0,80(sp)
+    80002b5c:	e4a6                	sd	s1,72(sp)
+    80002b5e:	e0ca                	sd	s2,64(sp)
+    80002b60:	fc4e                	sd	s3,56(sp)
+    80002b62:	f852                	sd	s4,48(sp)
+    80002b64:	f456                	sd	s5,40(sp)
+    80002b66:	f05a                	sd	s6,32(sp)
+    80002b68:	ec5e                	sd	s7,24(sp)
+    80002b6a:	e862                	sd	s8,16(sp)
+    80002b6c:	e466                	sd	s9,8(sp)
+    80002b6e:	1080                	addi	s0,sp,96
+    80002b70:	84aa                	mv	s1,a0
+    80002b72:	8b2e                	mv	s6,a1
+    80002b74:	8ab2                	mv	s5,a2
+  struct inode *ip, *next;
+
+  if(*path == '/')
+    80002b76:	00054703          	lbu	a4,0(a0)
+    80002b7a:	02f00793          	li	a5,47
+    80002b7e:	00f70e63          	beq	a4,a5,80002b9a <namex+0x44>
+    ip = iget(ROOTDEV, ROOTINO);
+  else
+    ip = idup(myproc()->cwd);
+    80002b82:	9e4fe0ef          	jal	80000d66 <myproc>
+    80002b86:	15053503          	ld	a0,336(a0)
+    80002b8a:	a87ff0ef          	jal	80002610 <idup>
+    80002b8e:	8a2a                	mv	s4,a0
+  while(*path == '/')
+    80002b90:	02f00913          	li	s2,47
+  if(len >= DIRSIZ)
+    80002b94:	4c35                	li	s8,13
+
+  while((path = skipelem(path, name)) != 0){
+    ilock(ip);
+    if(ip->type != T_DIR){
+    80002b96:	4b85                	li	s7,1
+    80002b98:	a871                	j	80002c34 <namex+0xde>
+    ip = iget(ROOTDEV, ROOTINO);
+    80002b9a:	4585                	li	a1,1
+    80002b9c:	4505                	li	a0,1
+    80002b9e:	fc8ff0ef          	jal	80002366 <iget>
+    80002ba2:	8a2a                	mv	s4,a0
+    80002ba4:	b7f5                	j	80002b90 <namex+0x3a>
+      iunlockput(ip);
+    80002ba6:	8552                	mv	a0,s4
+    80002ba8:	ca9ff0ef          	jal	80002850 <iunlockput>
+      return 0;
+    80002bac:	4a01                	li	s4,0
+  if(nameiparent){
+    iput(ip);
+    return 0;
+  }
+  return ip;
+}
+    80002bae:	8552                	mv	a0,s4
+    80002bb0:	60e6                	ld	ra,88(sp)
+    80002bb2:	6446                	ld	s0,80(sp)
+    80002bb4:	64a6                	ld	s1,72(sp)
+    80002bb6:	6906                	ld	s2,64(sp)
+    80002bb8:	79e2                	ld	s3,56(sp)
+    80002bba:	7a42                	ld	s4,48(sp)
+    80002bbc:	7aa2                	ld	s5,40(sp)
+    80002bbe:	7b02                	ld	s6,32(sp)
+    80002bc0:	6be2                	ld	s7,24(sp)
+    80002bc2:	6c42                	ld	s8,16(sp)
+    80002bc4:	6ca2                	ld	s9,8(sp)
+    80002bc6:	6125                	addi	sp,sp,96
+    80002bc8:	8082                	ret
+      iunlock(ip);
+    80002bca:	8552                	mv	a0,s4
+    80002bcc:	b29ff0ef          	jal	800026f4 <iunlock>
+      return ip;
+    80002bd0:	bff9                	j	80002bae <namex+0x58>
+      iunlockput(ip);
+    80002bd2:	8552                	mv	a0,s4
+    80002bd4:	c7dff0ef          	jal	80002850 <iunlockput>
+      return 0;
+    80002bd8:	8a4e                	mv	s4,s3
+    80002bda:	bfd1                	j	80002bae <namex+0x58>
+  len = path - s;
+    80002bdc:	40998633          	sub	a2,s3,s1
+    80002be0:	00060c9b          	sext.w	s9,a2
+  if(len >= DIRSIZ)
+    80002be4:	099c5063          	bge	s8,s9,80002c64 <namex+0x10e>
+    memmove(name, s, DIRSIZ);
+    80002be8:	4639                	li	a2,14
+    80002bea:	85a6                	mv	a1,s1
+    80002bec:	8556                	mv	a0,s5
+    80002bee:	dbcfd0ef          	jal	800001aa <memmove>
+    80002bf2:	84ce                	mv	s1,s3
+  while(*path == '/')
+    80002bf4:	0004c783          	lbu	a5,0(s1)
+    80002bf8:	01279763          	bne	a5,s2,80002c06 <namex+0xb0>
+    path++;
+    80002bfc:	0485                	addi	s1,s1,1
+  while(*path == '/')
+    80002bfe:	0004c783          	lbu	a5,0(s1)
+    80002c02:	ff278de3          	beq	a5,s2,80002bfc <namex+0xa6>
+    ilock(ip);
+    80002c06:	8552                	mv	a0,s4
+    80002c08:	a3fff0ef          	jal	80002646 <ilock>
+    if(ip->type != T_DIR){
+    80002c0c:	044a1783          	lh	a5,68(s4)
+    80002c10:	f9779be3          	bne	a5,s7,80002ba6 <namex+0x50>
+    if(nameiparent && *path == '\0'){
+    80002c14:	000b0563          	beqz	s6,80002c1e <namex+0xc8>
+    80002c18:	0004c783          	lbu	a5,0(s1)
+    80002c1c:	d7dd                	beqz	a5,80002bca <namex+0x74>
+    if((next = dirlookup(ip, name, 0)) == 0){
+    80002c1e:	4601                	li	a2,0
+    80002c20:	85d6                	mv	a1,s5
+    80002c22:	8552                	mv	a0,s4
+    80002c24:	e97ff0ef          	jal	80002aba <dirlookup>
+    80002c28:	89aa                	mv	s3,a0
+    80002c2a:	d545                	beqz	a0,80002bd2 <namex+0x7c>
+    iunlockput(ip);
+    80002c2c:	8552                	mv	a0,s4
+    80002c2e:	c23ff0ef          	jal	80002850 <iunlockput>
+    ip = next;
+    80002c32:	8a4e                	mv	s4,s3
+  while(*path == '/')
+    80002c34:	0004c783          	lbu	a5,0(s1)
+    80002c38:	01279763          	bne	a5,s2,80002c46 <namex+0xf0>
+    path++;
+    80002c3c:	0485                	addi	s1,s1,1
+  while(*path == '/')
+    80002c3e:	0004c783          	lbu	a5,0(s1)
+    80002c42:	ff278de3          	beq	a5,s2,80002c3c <namex+0xe6>
+  if(*path == 0)
+    80002c46:	cb8d                	beqz	a5,80002c78 <namex+0x122>
+  while(*path != '/' && *path != 0)
+    80002c48:	0004c783          	lbu	a5,0(s1)
+    80002c4c:	89a6                	mv	s3,s1
+  len = path - s;
+    80002c4e:	4c81                	li	s9,0
+    80002c50:	4601                	li	a2,0
+  while(*path != '/' && *path != 0)
+    80002c52:	01278963          	beq	a5,s2,80002c64 <namex+0x10e>
+    80002c56:	d3d9                	beqz	a5,80002bdc <namex+0x86>
+    path++;
+    80002c58:	0985                	addi	s3,s3,1
+  while(*path != '/' && *path != 0)
+    80002c5a:	0009c783          	lbu	a5,0(s3)
+    80002c5e:	ff279ce3          	bne	a5,s2,80002c56 <namex+0x100>
+    80002c62:	bfad                	j	80002bdc <namex+0x86>
+    memmove(name, s, len);
+    80002c64:	2601                	sext.w	a2,a2
+    80002c66:	85a6                	mv	a1,s1
+    80002c68:	8556                	mv	a0,s5
+    80002c6a:	d40fd0ef          	jal	800001aa <memmove>
+    name[len] = 0;
+    80002c6e:	9cd6                	add	s9,s9,s5
+    80002c70:	000c8023          	sb	zero,0(s9) # 2000 <_entry-0x7fffe000>
+    80002c74:	84ce                	mv	s1,s3
+    80002c76:	bfbd                	j	80002bf4 <namex+0x9e>
+  if(nameiparent){
+    80002c78:	f20b0be3          	beqz	s6,80002bae <namex+0x58>
+    iput(ip);
+    80002c7c:	8552                	mv	a0,s4
+    80002c7e:	b4bff0ef          	jal	800027c8 <iput>
+    return 0;
+    80002c82:	4a01                	li	s4,0
+    80002c84:	b72d                	j	80002bae <namex+0x58>
+
+0000000080002c86 <dirlink>:
+{
+    80002c86:	7139                	addi	sp,sp,-64
+    80002c88:	fc06                	sd	ra,56(sp)
+    80002c8a:	f822                	sd	s0,48(sp)
+    80002c8c:	f04a                	sd	s2,32(sp)
+    80002c8e:	ec4e                	sd	s3,24(sp)
+    80002c90:	e852                	sd	s4,16(sp)
+    80002c92:	0080                	addi	s0,sp,64
+    80002c94:	892a                	mv	s2,a0
+    80002c96:	8a2e                	mv	s4,a1
+    80002c98:	89b2                	mv	s3,a2
+  if((ip = dirlookup(dp, name, 0)) != 0){
+    80002c9a:	4601                	li	a2,0
+    80002c9c:	e1fff0ef          	jal	80002aba <dirlookup>
+    80002ca0:	e535                	bnez	a0,80002d0c <dirlink+0x86>
+    80002ca2:	f426                	sd	s1,40(sp)
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    80002ca4:	04c92483          	lw	s1,76(s2)
+    80002ca8:	c48d                	beqz	s1,80002cd2 <dirlink+0x4c>
+    80002caa:	4481                	li	s1,0
+    if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+    80002cac:	4741                	li	a4,16
+    80002cae:	86a6                	mv	a3,s1
+    80002cb0:	fc040613          	addi	a2,s0,-64
+    80002cb4:	4581                	li	a1,0
+    80002cb6:	854a                	mv	a0,s2
+    80002cb8:	be3ff0ef          	jal	8000289a <readi>
+    80002cbc:	47c1                	li	a5,16
+    80002cbe:	04f51b63          	bne	a0,a5,80002d14 <dirlink+0x8e>
+    if(de.inum == 0)
+    80002cc2:	fc045783          	lhu	a5,-64(s0)
+    80002cc6:	c791                	beqz	a5,80002cd2 <dirlink+0x4c>
+  for(off = 0; off < dp->size; off += sizeof(de)){
+    80002cc8:	24c1                	addiw	s1,s1,16
+    80002cca:	04c92783          	lw	a5,76(s2)
+    80002cce:	fcf4efe3          	bltu	s1,a5,80002cac <dirlink+0x26>
+  strncpy(de.name, name, DIRSIZ);
+    80002cd2:	4639                	li	a2,14
+    80002cd4:	85d2                	mv	a1,s4
+    80002cd6:	fc240513          	addi	a0,s0,-62
+    80002cda:	d76fd0ef          	jal	80000250 <strncpy>
+  de.inum = inum;
+    80002cde:	fd341023          	sh	s3,-64(s0)
+  if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+    80002ce2:	4741                	li	a4,16
+    80002ce4:	86a6                	mv	a3,s1
+    80002ce6:	fc040613          	addi	a2,s0,-64
+    80002cea:	4581                	li	a1,0
+    80002cec:	854a                	mv	a0,s2
+    80002cee:	ca9ff0ef          	jal	80002996 <writei>
+    80002cf2:	1541                	addi	a0,a0,-16
+    80002cf4:	00a03533          	snez	a0,a0
+    80002cf8:	40a00533          	neg	a0,a0
+    80002cfc:	74a2                	ld	s1,40(sp)
+}
+    80002cfe:	70e2                	ld	ra,56(sp)
+    80002d00:	7442                	ld	s0,48(sp)
+    80002d02:	7902                	ld	s2,32(sp)
+    80002d04:	69e2                	ld	s3,24(sp)
+    80002d06:	6a42                	ld	s4,16(sp)
+    80002d08:	6121                	addi	sp,sp,64
+    80002d0a:	8082                	ret
+    iput(ip);
+    80002d0c:	abdff0ef          	jal	800027c8 <iput>
+    return -1;
+    80002d10:	557d                	li	a0,-1
+    80002d12:	b7f5                	j	80002cfe <dirlink+0x78>
+      panic("dirlink read");
+    80002d14:	00004517          	auipc	a0,0x4
+    80002d18:	7d450513          	addi	a0,a0,2004 # 800074e8 <etext+0x4e8>
+    80002d1c:	6d6020ef          	jal	800053f2 <panic>
+
+0000000080002d20 <namei>:
+
+struct inode*
+namei(char *path)
+{
+    80002d20:	1101                	addi	sp,sp,-32
+    80002d22:	ec06                	sd	ra,24(sp)
+    80002d24:	e822                	sd	s0,16(sp)
+    80002d26:	1000                	addi	s0,sp,32
+  char name[DIRSIZ];
+  return namex(path, 0, name);
+    80002d28:	fe040613          	addi	a2,s0,-32
+    80002d2c:	4581                	li	a1,0
+    80002d2e:	e29ff0ef          	jal	80002b56 <namex>
+}
+    80002d32:	60e2                	ld	ra,24(sp)
+    80002d34:	6442                	ld	s0,16(sp)
+    80002d36:	6105                	addi	sp,sp,32
+    80002d38:	8082                	ret
+
+0000000080002d3a <nameiparent>:
+
+struct inode*
+nameiparent(char *path, char *name)
+{
+    80002d3a:	1141                	addi	sp,sp,-16
+    80002d3c:	e406                	sd	ra,8(sp)
+    80002d3e:	e022                	sd	s0,0(sp)
+    80002d40:	0800                	addi	s0,sp,16
+    80002d42:	862e                	mv	a2,a1
+  return namex(path, 1, name);
+    80002d44:	4585                	li	a1,1
+    80002d46:	e11ff0ef          	jal	80002b56 <namex>
+}
+    80002d4a:	60a2                	ld	ra,8(sp)
+    80002d4c:	6402                	ld	s0,0(sp)
+    80002d4e:	0141                	addi	sp,sp,16
+    80002d50:	8082                	ret
+
+0000000080002d52 <write_head>:
+// Write in-memory log header to disk.
+// This is the true point at which the
+// current transaction commits.
+static void
+write_head(void)
+{
+    80002d52:	1101                	addi	sp,sp,-32
+    80002d54:	ec06                	sd	ra,24(sp)
+    80002d56:	e822                	sd	s0,16(sp)
+    80002d58:	e426                	sd	s1,8(sp)
+    80002d5a:	e04a                	sd	s2,0(sp)
+    80002d5c:	1000                	addi	s0,sp,32
+  struct buf *buf = bread(log.dev, log.start);
+    80002d5e:	00017917          	auipc	s2,0x17
+    80002d62:	4a290913          	addi	s2,s2,1186 # 8001a200 <log>
+    80002d66:	01892583          	lw	a1,24(s2)
+    80002d6a:	02892503          	lw	a0,40(s2)
+    80002d6e:	9a0ff0ef          	jal	80001f0e <bread>
+    80002d72:	84aa                	mv	s1,a0
+  struct logheader *hb = (struct logheader *) (buf->data);
+  int i;
+  hb->n = log.lh.n;
+    80002d74:	02c92603          	lw	a2,44(s2)
+    80002d78:	cd30                	sw	a2,88(a0)
+  for (i = 0; i < log.lh.n; i++) {
+    80002d7a:	00c05f63          	blez	a2,80002d98 <write_head+0x46>
+    80002d7e:	00017717          	auipc	a4,0x17
+    80002d82:	4b270713          	addi	a4,a4,1202 # 8001a230 <log+0x30>
+    80002d86:	87aa                	mv	a5,a0
+    80002d88:	060a                	slli	a2,a2,0x2
+    80002d8a:	962a                	add	a2,a2,a0
+    hb->block[i] = log.lh.block[i];
+    80002d8c:	4314                	lw	a3,0(a4)
+    80002d8e:	cff4                	sw	a3,92(a5)
+  for (i = 0; i < log.lh.n; i++) {
+    80002d90:	0711                	addi	a4,a4,4
+    80002d92:	0791                	addi	a5,a5,4
+    80002d94:	fec79ce3          	bne	a5,a2,80002d8c <write_head+0x3a>
+  }
+  bwrite(buf);
+    80002d98:	8526                	mv	a0,s1
+    80002d9a:	a4aff0ef          	jal	80001fe4 <bwrite>
+  brelse(buf);
+    80002d9e:	8526                	mv	a0,s1
+    80002da0:	a76ff0ef          	jal	80002016 <brelse>
+}
+    80002da4:	60e2                	ld	ra,24(sp)
+    80002da6:	6442                	ld	s0,16(sp)
+    80002da8:	64a2                	ld	s1,8(sp)
+    80002daa:	6902                	ld	s2,0(sp)
+    80002dac:	6105                	addi	sp,sp,32
+    80002dae:	8082                	ret
+
+0000000080002db0 <install_trans>:
+  for (tail = 0; tail < log.lh.n; tail++) {
+    80002db0:	00017797          	auipc	a5,0x17
+    80002db4:	47c7a783          	lw	a5,1148(a5) # 8001a22c <log+0x2c>
+    80002db8:	08f05f63          	blez	a5,80002e56 <install_trans+0xa6>
+{
+    80002dbc:	7139                	addi	sp,sp,-64
+    80002dbe:	fc06                	sd	ra,56(sp)
+    80002dc0:	f822                	sd	s0,48(sp)
+    80002dc2:	f426                	sd	s1,40(sp)
+    80002dc4:	f04a                	sd	s2,32(sp)
+    80002dc6:	ec4e                	sd	s3,24(sp)
+    80002dc8:	e852                	sd	s4,16(sp)
+    80002dca:	e456                	sd	s5,8(sp)
+    80002dcc:	e05a                	sd	s6,0(sp)
+    80002dce:	0080                	addi	s0,sp,64
+    80002dd0:	8b2a                	mv	s6,a0
+    80002dd2:	00017a97          	auipc	s5,0x17
+    80002dd6:	45ea8a93          	addi	s5,s5,1118 # 8001a230 <log+0x30>
+  for (tail = 0; tail < log.lh.n; tail++) {
+    80002dda:	4a01                	li	s4,0
+    struct buf *lbuf = bread(log.dev, log.start+tail+1); // read log block
+    80002ddc:	00017997          	auipc	s3,0x17
+    80002de0:	42498993          	addi	s3,s3,1060 # 8001a200 <log>
+    80002de4:	a829                	j	80002dfe <install_trans+0x4e>
+    brelse(lbuf);
+    80002de6:	854a                	mv	a0,s2
+    80002de8:	a2eff0ef          	jal	80002016 <brelse>
+    brelse(dbuf);
+    80002dec:	8526                	mv	a0,s1
+    80002dee:	a28ff0ef          	jal	80002016 <brelse>
+  for (tail = 0; tail < log.lh.n; tail++) {
+    80002df2:	2a05                	addiw	s4,s4,1
+    80002df4:	0a91                	addi	s5,s5,4
+    80002df6:	02c9a783          	lw	a5,44(s3)
+    80002dfa:	04fa5463          	bge	s4,a5,80002e42 <install_trans+0x92>
+    struct buf *lbuf = bread(log.dev, log.start+tail+1); // read log block
+    80002dfe:	0189a583          	lw	a1,24(s3)
+    80002e02:	014585bb          	addw	a1,a1,s4
+    80002e06:	2585                	addiw	a1,a1,1
+    80002e08:	0289a503          	lw	a0,40(s3)
+    80002e0c:	902ff0ef          	jal	80001f0e <bread>
+    80002e10:	892a                	mv	s2,a0
+    struct buf *dbuf = bread(log.dev, log.lh.block[tail]); // read dst
+    80002e12:	000aa583          	lw	a1,0(s5)
+    80002e16:	0289a503          	lw	a0,40(s3)
+    80002e1a:	8f4ff0ef          	jal	80001f0e <bread>
+    80002e1e:	84aa                	mv	s1,a0
+    memmove(dbuf->data, lbuf->data, BSIZE);  // copy block to dst
+    80002e20:	40000613          	li	a2,1024
+    80002e24:	05890593          	addi	a1,s2,88
+    80002e28:	05850513          	addi	a0,a0,88
+    80002e2c:	b7efd0ef          	jal	800001aa <memmove>
+    bwrite(dbuf);  // write dst to disk
+    80002e30:	8526                	mv	a0,s1
+    80002e32:	9b2ff0ef          	jal	80001fe4 <bwrite>
+    if(recovering == 0)
+    80002e36:	fa0b18e3          	bnez	s6,80002de6 <install_trans+0x36>
+      bunpin(dbuf);
+    80002e3a:	8526                	mv	a0,s1
+    80002e3c:	a96ff0ef          	jal	800020d2 <bunpin>
+    80002e40:	b75d                	j	80002de6 <install_trans+0x36>
+}
+    80002e42:	70e2                	ld	ra,56(sp)
+    80002e44:	7442                	ld	s0,48(sp)
+    80002e46:	74a2                	ld	s1,40(sp)
+    80002e48:	7902                	ld	s2,32(sp)
+    80002e4a:	69e2                	ld	s3,24(sp)
+    80002e4c:	6a42                	ld	s4,16(sp)
+    80002e4e:	6aa2                	ld	s5,8(sp)
+    80002e50:	6b02                	ld	s6,0(sp)
+    80002e52:	6121                	addi	sp,sp,64
+    80002e54:	8082                	ret
+    80002e56:	8082                	ret
+
+0000000080002e58 <initlog>:
+{
+    80002e58:	7179                	addi	sp,sp,-48
+    80002e5a:	f406                	sd	ra,40(sp)
+    80002e5c:	f022                	sd	s0,32(sp)
+    80002e5e:	ec26                	sd	s1,24(sp)
+    80002e60:	e84a                	sd	s2,16(sp)
+    80002e62:	e44e                	sd	s3,8(sp)
+    80002e64:	1800                	addi	s0,sp,48
+    80002e66:	892a                	mv	s2,a0
+    80002e68:	89ae                	mv	s3,a1
+  initlock(&log.lock, "log");
+    80002e6a:	00017497          	auipc	s1,0x17
+    80002e6e:	39648493          	addi	s1,s1,918 # 8001a200 <log>
+    80002e72:	00004597          	auipc	a1,0x4
+    80002e76:	68658593          	addi	a1,a1,1670 # 800074f8 <etext+0x4f8>
+    80002e7a:	8526                	mv	a0,s1
+    80002e7c:	025020ef          	jal	800056a0 <initlock>
+  log.start = sb->logstart;
+    80002e80:	0149a583          	lw	a1,20(s3)
+    80002e84:	cc8c                	sw	a1,24(s1)
+  log.size = sb->nlog;
+    80002e86:	0109a783          	lw	a5,16(s3)
+    80002e8a:	ccdc                	sw	a5,28(s1)
+  log.dev = dev;
+    80002e8c:	0324a423          	sw	s2,40(s1)
+  struct buf *buf = bread(log.dev, log.start);
+    80002e90:	854a                	mv	a0,s2
+    80002e92:	87cff0ef          	jal	80001f0e <bread>
+  log.lh.n = lh->n;
+    80002e96:	4d30                	lw	a2,88(a0)
+    80002e98:	d4d0                	sw	a2,44(s1)
+  for (i = 0; i < log.lh.n; i++) {
+    80002e9a:	00c05f63          	blez	a2,80002eb8 <initlog+0x60>
+    80002e9e:	87aa                	mv	a5,a0
+    80002ea0:	00017717          	auipc	a4,0x17
+    80002ea4:	39070713          	addi	a4,a4,912 # 8001a230 <log+0x30>
+    80002ea8:	060a                	slli	a2,a2,0x2
+    80002eaa:	962a                	add	a2,a2,a0
+    log.lh.block[i] = lh->block[i];
+    80002eac:	4ff4                	lw	a3,92(a5)
+    80002eae:	c314                	sw	a3,0(a4)
+  for (i = 0; i < log.lh.n; i++) {
+    80002eb0:	0791                	addi	a5,a5,4
+    80002eb2:	0711                	addi	a4,a4,4
+    80002eb4:	fec79ce3          	bne	a5,a2,80002eac <initlog+0x54>
+  brelse(buf);
+    80002eb8:	95eff0ef          	jal	80002016 <brelse>
+
+static void
+recover_from_log(void)
+{
+  read_head();
+  install_trans(1); // if committed, copy from log to disk
+    80002ebc:	4505                	li	a0,1
+    80002ebe:	ef3ff0ef          	jal	80002db0 <install_trans>
+  log.lh.n = 0;
+    80002ec2:	00017797          	auipc	a5,0x17
+    80002ec6:	3607a523          	sw	zero,874(a5) # 8001a22c <log+0x2c>
+  write_head(); // clear the log
+    80002eca:	e89ff0ef          	jal	80002d52 <write_head>
+}
+    80002ece:	70a2                	ld	ra,40(sp)
+    80002ed0:	7402                	ld	s0,32(sp)
+    80002ed2:	64e2                	ld	s1,24(sp)
+    80002ed4:	6942                	ld	s2,16(sp)
+    80002ed6:	69a2                	ld	s3,8(sp)
+    80002ed8:	6145                	addi	sp,sp,48
+    80002eda:	8082                	ret
+
+0000000080002edc <begin_op>:
+}
+
+// called at the start of each FS system call.
+void
+begin_op(void)
+{
+    80002edc:	1101                	addi	sp,sp,-32
+    80002ede:	ec06                	sd	ra,24(sp)
+    80002ee0:	e822                	sd	s0,16(sp)
+    80002ee2:	e426                	sd	s1,8(sp)
+    80002ee4:	e04a                	sd	s2,0(sp)
+    80002ee6:	1000                	addi	s0,sp,32
+  acquire(&log.lock);
+    80002ee8:	00017517          	auipc	a0,0x17
+    80002eec:	31850513          	addi	a0,a0,792 # 8001a200 <log>
+    80002ef0:	031020ef          	jal	80005720 <acquire>
+  while(1){
+    if(log.committing){
+    80002ef4:	00017497          	auipc	s1,0x17
+    80002ef8:	30c48493          	addi	s1,s1,780 # 8001a200 <log>
+      sleep(&log, &log.lock);
+    } else if(log.lh.n + (log.outstanding+1)*MAXOPBLOCKS > LOGSIZE){
+    80002efc:	4979                	li	s2,30
+    80002efe:	a029                	j	80002f08 <begin_op+0x2c>
+      sleep(&log, &log.lock);
+    80002f00:	85a6                	mv	a1,s1
+    80002f02:	8526                	mv	a0,s1
+    80002f04:	c30fe0ef          	jal	80001334 <sleep>
+    if(log.committing){
+    80002f08:	50dc                	lw	a5,36(s1)
+    80002f0a:	fbfd                	bnez	a5,80002f00 <begin_op+0x24>
+    } else if(log.lh.n + (log.outstanding+1)*MAXOPBLOCKS > LOGSIZE){
+    80002f0c:	5098                	lw	a4,32(s1)
+    80002f0e:	2705                	addiw	a4,a4,1
+    80002f10:	0027179b          	slliw	a5,a4,0x2
+    80002f14:	9fb9                	addw	a5,a5,a4
+    80002f16:	0017979b          	slliw	a5,a5,0x1
+    80002f1a:	54d4                	lw	a3,44(s1)
+    80002f1c:	9fb5                	addw	a5,a5,a3
+    80002f1e:	00f95763          	bge	s2,a5,80002f2c <begin_op+0x50>
+      // this op might exhaust log space; wait for commit.
+      sleep(&log, &log.lock);
+    80002f22:	85a6                	mv	a1,s1
+    80002f24:	8526                	mv	a0,s1
+    80002f26:	c0efe0ef          	jal	80001334 <sleep>
+    80002f2a:	bff9                	j	80002f08 <begin_op+0x2c>
+    } else {
+      log.outstanding += 1;
+    80002f2c:	00017517          	auipc	a0,0x17
+    80002f30:	2d450513          	addi	a0,a0,724 # 8001a200 <log>
+    80002f34:	d118                	sw	a4,32(a0)
+      release(&log.lock);
+    80002f36:	083020ef          	jal	800057b8 <release>
+      break;
+    }
+  }
+}
+    80002f3a:	60e2                	ld	ra,24(sp)
+    80002f3c:	6442                	ld	s0,16(sp)
+    80002f3e:	64a2                	ld	s1,8(sp)
+    80002f40:	6902                	ld	s2,0(sp)
+    80002f42:	6105                	addi	sp,sp,32
+    80002f44:	8082                	ret
+
+0000000080002f46 <end_op>:
+
+// called at the end of each FS system call.
+// commits if this was the last outstanding operation.
+void
+end_op(void)
+{
+    80002f46:	7139                	addi	sp,sp,-64
+    80002f48:	fc06                	sd	ra,56(sp)
+    80002f4a:	f822                	sd	s0,48(sp)
+    80002f4c:	f426                	sd	s1,40(sp)
+    80002f4e:	f04a                	sd	s2,32(sp)
+    80002f50:	0080                	addi	s0,sp,64
+  int do_commit = 0;
+
+  acquire(&log.lock);
+    80002f52:	00017497          	auipc	s1,0x17
+    80002f56:	2ae48493          	addi	s1,s1,686 # 8001a200 <log>
+    80002f5a:	8526                	mv	a0,s1
+    80002f5c:	7c4020ef          	jal	80005720 <acquire>
+  log.outstanding -= 1;
+    80002f60:	509c                	lw	a5,32(s1)
+    80002f62:	37fd                	addiw	a5,a5,-1
+    80002f64:	0007891b          	sext.w	s2,a5
+    80002f68:	d09c                	sw	a5,32(s1)
+  if(log.committing)
+    80002f6a:	50dc                	lw	a5,36(s1)
+    80002f6c:	ef9d                	bnez	a5,80002faa <end_op+0x64>
+    panic("log.committing");
+  if(log.outstanding == 0){
+    80002f6e:	04091763          	bnez	s2,80002fbc <end_op+0x76>
+    do_commit = 1;
+    log.committing = 1;
+    80002f72:	00017497          	auipc	s1,0x17
+    80002f76:	28e48493          	addi	s1,s1,654 # 8001a200 <log>
+    80002f7a:	4785                	li	a5,1
+    80002f7c:	d0dc                	sw	a5,36(s1)
+    // begin_op() may be waiting for log space,
+    // and decrementing log.outstanding has decreased
+    // the amount of reserved space.
+    wakeup(&log);
+  }
+  release(&log.lock);
+    80002f7e:	8526                	mv	a0,s1
+    80002f80:	039020ef          	jal	800057b8 <release>
+}
+
+static void
+commit()
+{
+  if (log.lh.n > 0) {
+    80002f84:	54dc                	lw	a5,44(s1)
+    80002f86:	04f04b63          	bgtz	a5,80002fdc <end_op+0x96>
+    acquire(&log.lock);
+    80002f8a:	00017497          	auipc	s1,0x17
+    80002f8e:	27648493          	addi	s1,s1,630 # 8001a200 <log>
+    80002f92:	8526                	mv	a0,s1
+    80002f94:	78c020ef          	jal	80005720 <acquire>
+    log.committing = 0;
+    80002f98:	0204a223          	sw	zero,36(s1)
+    wakeup(&log);
+    80002f9c:	8526                	mv	a0,s1
+    80002f9e:	be2fe0ef          	jal	80001380 <wakeup>
+    release(&log.lock);
+    80002fa2:	8526                	mv	a0,s1
+    80002fa4:	015020ef          	jal	800057b8 <release>
+}
+    80002fa8:	a025                	j	80002fd0 <end_op+0x8a>
+    80002faa:	ec4e                	sd	s3,24(sp)
+    80002fac:	e852                	sd	s4,16(sp)
+    80002fae:	e456                	sd	s5,8(sp)
+    panic("log.committing");
+    80002fb0:	00004517          	auipc	a0,0x4
+    80002fb4:	55050513          	addi	a0,a0,1360 # 80007500 <etext+0x500>
+    80002fb8:	43a020ef          	jal	800053f2 <panic>
+    wakeup(&log);
+    80002fbc:	00017497          	auipc	s1,0x17
+    80002fc0:	24448493          	addi	s1,s1,580 # 8001a200 <log>
+    80002fc4:	8526                	mv	a0,s1
+    80002fc6:	bbafe0ef          	jal	80001380 <wakeup>
+  release(&log.lock);
+    80002fca:	8526                	mv	a0,s1
+    80002fcc:	7ec020ef          	jal	800057b8 <release>
+}
+    80002fd0:	70e2                	ld	ra,56(sp)
+    80002fd2:	7442                	ld	s0,48(sp)
+    80002fd4:	74a2                	ld	s1,40(sp)
+    80002fd6:	7902                	ld	s2,32(sp)
+    80002fd8:	6121                	addi	sp,sp,64
+    80002fda:	8082                	ret
+    80002fdc:	ec4e                	sd	s3,24(sp)
+    80002fde:	e852                	sd	s4,16(sp)
+    80002fe0:	e456                	sd	s5,8(sp)
+  for (tail = 0; tail < log.lh.n; tail++) {
+    80002fe2:	00017a97          	auipc	s5,0x17
+    80002fe6:	24ea8a93          	addi	s5,s5,590 # 8001a230 <log+0x30>
+    struct buf *to = bread(log.dev, log.start+tail+1); // log block
+    80002fea:	00017a17          	auipc	s4,0x17
+    80002fee:	216a0a13          	addi	s4,s4,534 # 8001a200 <log>
+    80002ff2:	018a2583          	lw	a1,24(s4)
+    80002ff6:	012585bb          	addw	a1,a1,s2
+    80002ffa:	2585                	addiw	a1,a1,1
+    80002ffc:	028a2503          	lw	a0,40(s4)
+    80003000:	f0ffe0ef          	jal	80001f0e <bread>
+    80003004:	84aa                	mv	s1,a0
+    struct buf *from = bread(log.dev, log.lh.block[tail]); // cache block
+    80003006:	000aa583          	lw	a1,0(s5)
+    8000300a:	028a2503          	lw	a0,40(s4)
+    8000300e:	f01fe0ef          	jal	80001f0e <bread>
+    80003012:	89aa                	mv	s3,a0
+    memmove(to->data, from->data, BSIZE);
+    80003014:	40000613          	li	a2,1024
+    80003018:	05850593          	addi	a1,a0,88
+    8000301c:	05848513          	addi	a0,s1,88
+    80003020:	98afd0ef          	jal	800001aa <memmove>
+    bwrite(to);  // write the log
+    80003024:	8526                	mv	a0,s1
+    80003026:	fbffe0ef          	jal	80001fe4 <bwrite>
+    brelse(from);
+    8000302a:	854e                	mv	a0,s3
+    8000302c:	febfe0ef          	jal	80002016 <brelse>
+    brelse(to);
+    80003030:	8526                	mv	a0,s1
+    80003032:	fe5fe0ef          	jal	80002016 <brelse>
+  for (tail = 0; tail < log.lh.n; tail++) {
+    80003036:	2905                	addiw	s2,s2,1
+    80003038:	0a91                	addi	s5,s5,4
+    8000303a:	02ca2783          	lw	a5,44(s4)
+    8000303e:	faf94ae3          	blt	s2,a5,80002ff2 <end_op+0xac>
+    write_log();     // Write modified blocks from cache to log
+    write_head();    // Write header to disk -- the real commit
+    80003042:	d11ff0ef          	jal	80002d52 <write_head>
+    install_trans(0); // Now install writes to home locations
+    80003046:	4501                	li	a0,0
+    80003048:	d69ff0ef          	jal	80002db0 <install_trans>
+    log.lh.n = 0;
+    8000304c:	00017797          	auipc	a5,0x17
+    80003050:	1e07a023          	sw	zero,480(a5) # 8001a22c <log+0x2c>
+    write_head();    // Erase the transaction from the log
+    80003054:	cffff0ef          	jal	80002d52 <write_head>
+    80003058:	69e2                	ld	s3,24(sp)
+    8000305a:	6a42                	ld	s4,16(sp)
+    8000305c:	6aa2                	ld	s5,8(sp)
+    8000305e:	b735                	j	80002f8a <end_op+0x44>
+
+0000000080003060 <log_write>:
+//   modify bp->data[]
+//   log_write(bp)
+//   brelse(bp)
+void
+log_write(struct buf *b)
+{
+    80003060:	1101                	addi	sp,sp,-32
+    80003062:	ec06                	sd	ra,24(sp)
+    80003064:	e822                	sd	s0,16(sp)
+    80003066:	e426                	sd	s1,8(sp)
+    80003068:	e04a                	sd	s2,0(sp)
+    8000306a:	1000                	addi	s0,sp,32
+    8000306c:	84aa                	mv	s1,a0
+  int i;
+
+  acquire(&log.lock);
+    8000306e:	00017917          	auipc	s2,0x17
+    80003072:	19290913          	addi	s2,s2,402 # 8001a200 <log>
+    80003076:	854a                	mv	a0,s2
+    80003078:	6a8020ef          	jal	80005720 <acquire>
+  if (log.lh.n >= LOGSIZE || log.lh.n >= log.size - 1)
+    8000307c:	02c92603          	lw	a2,44(s2)
+    80003080:	47f5                	li	a5,29
+    80003082:	06c7c363          	blt	a5,a2,800030e8 <log_write+0x88>
+    80003086:	00017797          	auipc	a5,0x17
+    8000308a:	1967a783          	lw	a5,406(a5) # 8001a21c <log+0x1c>
+    8000308e:	37fd                	addiw	a5,a5,-1
+    80003090:	04f65c63          	bge	a2,a5,800030e8 <log_write+0x88>
+    panic("too big a transaction");
+  if (log.outstanding < 1)
+    80003094:	00017797          	auipc	a5,0x17
+    80003098:	18c7a783          	lw	a5,396(a5) # 8001a220 <log+0x20>
+    8000309c:	04f05c63          	blez	a5,800030f4 <log_write+0x94>
+    panic("log_write outside of trans");
+
+  for (i = 0; i < log.lh.n; i++) {
+    800030a0:	4781                	li	a5,0
+    800030a2:	04c05f63          	blez	a2,80003100 <log_write+0xa0>
+    if (log.lh.block[i] == b->blockno)   // log absorption
+    800030a6:	44cc                	lw	a1,12(s1)
+    800030a8:	00017717          	auipc	a4,0x17
+    800030ac:	18870713          	addi	a4,a4,392 # 8001a230 <log+0x30>
+  for (i = 0; i < log.lh.n; i++) {
+    800030b0:	4781                	li	a5,0
+    if (log.lh.block[i] == b->blockno)   // log absorption
+    800030b2:	4314                	lw	a3,0(a4)
+    800030b4:	04b68663          	beq	a3,a1,80003100 <log_write+0xa0>
+  for (i = 0; i < log.lh.n; i++) {
+    800030b8:	2785                	addiw	a5,a5,1
+    800030ba:	0711                	addi	a4,a4,4
+    800030bc:	fef61be3          	bne	a2,a5,800030b2 <log_write+0x52>
+      break;
+  }
+  log.lh.block[i] = b->blockno;
+    800030c0:	0621                	addi	a2,a2,8
+    800030c2:	060a                	slli	a2,a2,0x2
+    800030c4:	00017797          	auipc	a5,0x17
+    800030c8:	13c78793          	addi	a5,a5,316 # 8001a200 <log>
+    800030cc:	97b2                	add	a5,a5,a2
+    800030ce:	44d8                	lw	a4,12(s1)
+    800030d0:	cb98                	sw	a4,16(a5)
+  if (i == log.lh.n) {  // Add new block to log?
+    bpin(b);
+    800030d2:	8526                	mv	a0,s1
+    800030d4:	fcbfe0ef          	jal	8000209e <bpin>
+    log.lh.n++;
+    800030d8:	00017717          	auipc	a4,0x17
+    800030dc:	12870713          	addi	a4,a4,296 # 8001a200 <log>
+    800030e0:	575c                	lw	a5,44(a4)
+    800030e2:	2785                	addiw	a5,a5,1
+    800030e4:	d75c                	sw	a5,44(a4)
+    800030e6:	a80d                	j	80003118 <log_write+0xb8>
+    panic("too big a transaction");
+    800030e8:	00004517          	auipc	a0,0x4
+    800030ec:	42850513          	addi	a0,a0,1064 # 80007510 <etext+0x510>
+    800030f0:	302020ef          	jal	800053f2 <panic>
+    panic("log_write outside of trans");
+    800030f4:	00004517          	auipc	a0,0x4
+    800030f8:	43450513          	addi	a0,a0,1076 # 80007528 <etext+0x528>
+    800030fc:	2f6020ef          	jal	800053f2 <panic>
+  log.lh.block[i] = b->blockno;
+    80003100:	00878693          	addi	a3,a5,8
+    80003104:	068a                	slli	a3,a3,0x2
+    80003106:	00017717          	auipc	a4,0x17
+    8000310a:	0fa70713          	addi	a4,a4,250 # 8001a200 <log>
+    8000310e:	9736                	add	a4,a4,a3
+    80003110:	44d4                	lw	a3,12(s1)
+    80003112:	cb14                	sw	a3,16(a4)
+  if (i == log.lh.n) {  // Add new block to log?
+    80003114:	faf60fe3          	beq	a2,a5,800030d2 <log_write+0x72>
+  }
+  release(&log.lock);
+    80003118:	00017517          	auipc	a0,0x17
+    8000311c:	0e850513          	addi	a0,a0,232 # 8001a200 <log>
+    80003120:	698020ef          	jal	800057b8 <release>
+}
+    80003124:	60e2                	ld	ra,24(sp)
+    80003126:	6442                	ld	s0,16(sp)
+    80003128:	64a2                	ld	s1,8(sp)
+    8000312a:	6902                	ld	s2,0(sp)
+    8000312c:	6105                	addi	sp,sp,32
+    8000312e:	8082                	ret
+
+0000000080003130 <initsleeplock>:
+    80003130:	1101                	addi	sp,sp,-32
+    80003132:	ec06                	sd	ra,24(sp)
+    80003134:	e822                	sd	s0,16(sp)
+    80003136:	e426                	sd	s1,8(sp)
+    80003138:	e04a                	sd	s2,0(sp)
+    8000313a:	1000                	addi	s0,sp,32
+    8000313c:	84aa                	mv	s1,a0
+    8000313e:	892e                	mv	s2,a1
+    80003140:	00004597          	auipc	a1,0x4
+    80003144:	40858593          	addi	a1,a1,1032 # 80007548 <etext+0x548>
+    80003148:	0521                	addi	a0,a0,8
+    8000314a:	556020ef          	jal	800056a0 <initlock>
+    8000314e:	0324b023          	sd	s2,32(s1)
+    80003152:	0004a023          	sw	zero,0(s1)
+    80003156:	0204a423          	sw	zero,40(s1)
+    8000315a:	60e2                	ld	ra,24(sp)
+    8000315c:	6442                	ld	s0,16(sp)
+    8000315e:	64a2                	ld	s1,8(sp)
+    80003160:	6902                	ld	s2,0(sp)
+    80003162:	6105                	addi	sp,sp,32
+    80003164:	8082                	ret
+
+0000000080003166 <acquiresleep>:
+    80003166:	1101                	addi	sp,sp,-32
+    80003168:	ec06                	sd	ra,24(sp)
+    8000316a:	e822                	sd	s0,16(sp)
+    8000316c:	e426                	sd	s1,8(sp)
+    8000316e:	e04a                	sd	s2,0(sp)
+    80003170:	1000                	addi	s0,sp,32
+    80003172:	84aa                	mv	s1,a0
+    80003174:	00850913          	addi	s2,a0,8
+    80003178:	854a                	mv	a0,s2
+    8000317a:	5a6020ef          	jal	80005720 <acquire>
+    8000317e:	409c                	lw	a5,0(s1)
+    80003180:	c799                	beqz	a5,8000318e <acquiresleep+0x28>
+    80003182:	85ca                	mv	a1,s2
+    80003184:	8526                	mv	a0,s1
+    80003186:	9aefe0ef          	jal	80001334 <sleep>
+    8000318a:	409c                	lw	a5,0(s1)
+    8000318c:	fbfd                	bnez	a5,80003182 <acquiresleep+0x1c>
+    8000318e:	4785                	li	a5,1
+    80003190:	c09c                	sw	a5,0(s1)
+    80003192:	bd5fd0ef          	jal	80000d66 <myproc>
+    80003196:	591c                	lw	a5,48(a0)
+    80003198:	d49c                	sw	a5,40(s1)
+    8000319a:	854a                	mv	a0,s2
+    8000319c:	61c020ef          	jal	800057b8 <release>
+    800031a0:	60e2                	ld	ra,24(sp)
+    800031a2:	6442                	ld	s0,16(sp)
+    800031a4:	64a2                	ld	s1,8(sp)
+    800031a6:	6902                	ld	s2,0(sp)
+    800031a8:	6105                	addi	sp,sp,32
+    800031aa:	8082                	ret
+
+00000000800031ac <releasesleep>:
+    800031ac:	1101                	addi	sp,sp,-32
+    800031ae:	ec06                	sd	ra,24(sp)
+    800031b0:	e822                	sd	s0,16(sp)
+    800031b2:	e426                	sd	s1,8(sp)
+    800031b4:	e04a                	sd	s2,0(sp)
+    800031b6:	1000                	addi	s0,sp,32
+    800031b8:	84aa                	mv	s1,a0
+    800031ba:	00850913          	addi	s2,a0,8
+    800031be:	854a                	mv	a0,s2
+    800031c0:	560020ef          	jal	80005720 <acquire>
+    800031c4:	0004a023          	sw	zero,0(s1)
+    800031c8:	0204a423          	sw	zero,40(s1)
+    800031cc:	8526                	mv	a0,s1
+    800031ce:	9b2fe0ef          	jal	80001380 <wakeup>
+    800031d2:	854a                	mv	a0,s2
+    800031d4:	5e4020ef          	jal	800057b8 <release>
+    800031d8:	60e2                	ld	ra,24(sp)
+    800031da:	6442                	ld	s0,16(sp)
+    800031dc:	64a2                	ld	s1,8(sp)
+    800031de:	6902                	ld	s2,0(sp)
+    800031e0:	6105                	addi	sp,sp,32
+    800031e2:	8082                	ret
+
+00000000800031e4 <holdingsleep>:
+    800031e4:	7179                	addi	sp,sp,-48
+    800031e6:	f406                	sd	ra,40(sp)
+    800031e8:	f022                	sd	s0,32(sp)
+    800031ea:	ec26                	sd	s1,24(sp)
+    800031ec:	e84a                	sd	s2,16(sp)
+    800031ee:	1800                	addi	s0,sp,48
+    800031f0:	84aa                	mv	s1,a0
+    800031f2:	00850913          	addi	s2,a0,8
+    800031f6:	854a                	mv	a0,s2
+    800031f8:	528020ef          	jal	80005720 <acquire>
+    800031fc:	409c                	lw	a5,0(s1)
+    800031fe:	ef81                	bnez	a5,80003216 <holdingsleep+0x32>
+    80003200:	4481                	li	s1,0
+    80003202:	854a                	mv	a0,s2
+    80003204:	5b4020ef          	jal	800057b8 <release>
+    80003208:	8526                	mv	a0,s1
+    8000320a:	70a2                	ld	ra,40(sp)
+    8000320c:	7402                	ld	s0,32(sp)
+    8000320e:	64e2                	ld	s1,24(sp)
+    80003210:	6942                	ld	s2,16(sp)
+    80003212:	6145                	addi	sp,sp,48
+    80003214:	8082                	ret
+    80003216:	e44e                	sd	s3,8(sp)
+    80003218:	0284a983          	lw	s3,40(s1)
+    8000321c:	b4bfd0ef          	jal	80000d66 <myproc>
+    80003220:	5904                	lw	s1,48(a0)
+    80003222:	413484b3          	sub	s1,s1,s3
+    80003226:	0014b493          	seqz	s1,s1
+    8000322a:	69a2                	ld	s3,8(sp)
+    8000322c:	bfd9                	j	80003202 <holdingsleep+0x1e>
+
+000000008000322e <fileinit>:
+  struct file file[NFILE];
+} ftable;
+
+void
+fileinit(void)
+{
+    8000322e:	1141                	addi	sp,sp,-16
+    80003230:	e406                	sd	ra,8(sp)
+    80003232:	e022                	sd	s0,0(sp)
+    80003234:	0800                	addi	s0,sp,16
+  initlock(&ftable.lock, "ftable");
+    80003236:	00004597          	auipc	a1,0x4
+    8000323a:	32258593          	addi	a1,a1,802 # 80007558 <etext+0x558>
+    8000323e:	00017517          	auipc	a0,0x17
+    80003242:	10a50513          	addi	a0,a0,266 # 8001a348 <ftable>
+    80003246:	45a020ef          	jal	800056a0 <initlock>
+}
+    8000324a:	60a2                	ld	ra,8(sp)
+    8000324c:	6402                	ld	s0,0(sp)
+    8000324e:	0141                	addi	sp,sp,16
+    80003250:	8082                	ret
+
+0000000080003252 <filealloc>:
+
+// Allocate a file structure.
+struct file*
+filealloc(void)
+{
+    80003252:	1101                	addi	sp,sp,-32
+    80003254:	ec06                	sd	ra,24(sp)
+    80003256:	e822                	sd	s0,16(sp)
+    80003258:	e426                	sd	s1,8(sp)
+    8000325a:	1000                	addi	s0,sp,32
+  struct file *f;
+
+  acquire(&ftable.lock);
+    8000325c:	00017517          	auipc	a0,0x17
+    80003260:	0ec50513          	addi	a0,a0,236 # 8001a348 <ftable>
+    80003264:	4bc020ef          	jal	80005720 <acquire>
+  for(f = ftable.file; f < ftable.file + NFILE; f++){
+    80003268:	00017497          	auipc	s1,0x17
+    8000326c:	0f848493          	addi	s1,s1,248 # 8001a360 <ftable+0x18>
+    80003270:	00018717          	auipc	a4,0x18
+    80003274:	09070713          	addi	a4,a4,144 # 8001b300 <disk>
+    if(f->ref == 0){
+    80003278:	40dc                	lw	a5,4(s1)
+    8000327a:	cf89                	beqz	a5,80003294 <filealloc+0x42>
+  for(f = ftable.file; f < ftable.file + NFILE; f++){
+    8000327c:	02848493          	addi	s1,s1,40
+    80003280:	fee49ce3          	bne	s1,a4,80003278 <filealloc+0x26>
+      f->ref = 1;
+      release(&ftable.lock);
+      return f;
+    }
+  }
+  release(&ftable.lock);
+    80003284:	00017517          	auipc	a0,0x17
+    80003288:	0c450513          	addi	a0,a0,196 # 8001a348 <ftable>
+    8000328c:	52c020ef          	jal	800057b8 <release>
+  return 0;
+    80003290:	4481                	li	s1,0
+    80003292:	a809                	j	800032a4 <filealloc+0x52>
+      f->ref = 1;
+    80003294:	4785                	li	a5,1
+    80003296:	c0dc                	sw	a5,4(s1)
+      release(&ftable.lock);
+    80003298:	00017517          	auipc	a0,0x17
+    8000329c:	0b050513          	addi	a0,a0,176 # 8001a348 <ftable>
+    800032a0:	518020ef          	jal	800057b8 <release>
+}
+    800032a4:	8526                	mv	a0,s1
+    800032a6:	60e2                	ld	ra,24(sp)
+    800032a8:	6442                	ld	s0,16(sp)
+    800032aa:	64a2                	ld	s1,8(sp)
+    800032ac:	6105                	addi	sp,sp,32
+    800032ae:	8082                	ret
+
+00000000800032b0 <filedup>:
+
+// Increment ref count for file f.
+struct file*
+filedup(struct file *f)
+{
+    800032b0:	1101                	addi	sp,sp,-32
+    800032b2:	ec06                	sd	ra,24(sp)
+    800032b4:	e822                	sd	s0,16(sp)
+    800032b6:	e426                	sd	s1,8(sp)
+    800032b8:	1000                	addi	s0,sp,32
+    800032ba:	84aa                	mv	s1,a0
+  acquire(&ftable.lock);
+    800032bc:	00017517          	auipc	a0,0x17
+    800032c0:	08c50513          	addi	a0,a0,140 # 8001a348 <ftable>
+    800032c4:	45c020ef          	jal	80005720 <acquire>
+  if(f->ref < 1)
+    800032c8:	40dc                	lw	a5,4(s1)
+    800032ca:	02f05063          	blez	a5,800032ea <filedup+0x3a>
+    panic("filedup");
+  f->ref++;
+    800032ce:	2785                	addiw	a5,a5,1
+    800032d0:	c0dc                	sw	a5,4(s1)
+  release(&ftable.lock);
+    800032d2:	00017517          	auipc	a0,0x17
+    800032d6:	07650513          	addi	a0,a0,118 # 8001a348 <ftable>
+    800032da:	4de020ef          	jal	800057b8 <release>
+  return f;
+}
+    800032de:	8526                	mv	a0,s1
+    800032e0:	60e2                	ld	ra,24(sp)
+    800032e2:	6442                	ld	s0,16(sp)
+    800032e4:	64a2                	ld	s1,8(sp)
+    800032e6:	6105                	addi	sp,sp,32
+    800032e8:	8082                	ret
+    panic("filedup");
+    800032ea:	00004517          	auipc	a0,0x4
+    800032ee:	27650513          	addi	a0,a0,630 # 80007560 <etext+0x560>
+    800032f2:	100020ef          	jal	800053f2 <panic>
+
+00000000800032f6 <fileclose>:
+
+// Close file f.  (Decrement ref count, close when reaches 0.)
+void
+fileclose(struct file *f)
+{
+    800032f6:	7139                	addi	sp,sp,-64
+    800032f8:	fc06                	sd	ra,56(sp)
+    800032fa:	f822                	sd	s0,48(sp)
+    800032fc:	f426                	sd	s1,40(sp)
+    800032fe:	0080                	addi	s0,sp,64
+    80003300:	84aa                	mv	s1,a0
+  struct file ff;
+
+  acquire(&ftable.lock);
+    80003302:	00017517          	auipc	a0,0x17
+    80003306:	04650513          	addi	a0,a0,70 # 8001a348 <ftable>
+    8000330a:	416020ef          	jal	80005720 <acquire>
+  if(f->ref < 1)
+    8000330e:	40dc                	lw	a5,4(s1)
+    80003310:	04f05a63          	blez	a5,80003364 <fileclose+0x6e>
+    panic("fileclose");
+  if(--f->ref > 0){
+    80003314:	37fd                	addiw	a5,a5,-1
+    80003316:	0007871b          	sext.w	a4,a5
+    8000331a:	c0dc                	sw	a5,4(s1)
+    8000331c:	04e04e63          	bgtz	a4,80003378 <fileclose+0x82>
+    80003320:	f04a                	sd	s2,32(sp)
+    80003322:	ec4e                	sd	s3,24(sp)
+    80003324:	e852                	sd	s4,16(sp)
+    80003326:	e456                	sd	s5,8(sp)
+    release(&ftable.lock);
+    return;
+  }
+  ff = *f;
+    80003328:	0004a903          	lw	s2,0(s1)
+    8000332c:	0094ca83          	lbu	s5,9(s1)
+    80003330:	0104ba03          	ld	s4,16(s1)
+    80003334:	0184b983          	ld	s3,24(s1)
+  f->ref = 0;
+    80003338:	0004a223          	sw	zero,4(s1)
+  f->type = FD_NONE;
+    8000333c:	0004a023          	sw	zero,0(s1)
+  release(&ftable.lock);
+    80003340:	00017517          	auipc	a0,0x17
+    80003344:	00850513          	addi	a0,a0,8 # 8001a348 <ftable>
+    80003348:	470020ef          	jal	800057b8 <release>
+
+  if(ff.type == FD_PIPE){
+    8000334c:	4785                	li	a5,1
+    8000334e:	04f90063          	beq	s2,a5,8000338e <fileclose+0x98>
+    pipeclose(ff.pipe, ff.writable);
+  } else if(ff.type == FD_INODE || ff.type == FD_DEVICE){
+    80003352:	3979                	addiw	s2,s2,-2
+    80003354:	4785                	li	a5,1
+    80003356:	0527f563          	bgeu	a5,s2,800033a0 <fileclose+0xaa>
+    8000335a:	7902                	ld	s2,32(sp)
+    8000335c:	69e2                	ld	s3,24(sp)
+    8000335e:	6a42                	ld	s4,16(sp)
+    80003360:	6aa2                	ld	s5,8(sp)
+    80003362:	a00d                	j	80003384 <fileclose+0x8e>
+    80003364:	f04a                	sd	s2,32(sp)
+    80003366:	ec4e                	sd	s3,24(sp)
+    80003368:	e852                	sd	s4,16(sp)
+    8000336a:	e456                	sd	s5,8(sp)
+    panic("fileclose");
+    8000336c:	00004517          	auipc	a0,0x4
+    80003370:	1fc50513          	addi	a0,a0,508 # 80007568 <etext+0x568>
+    80003374:	07e020ef          	jal	800053f2 <panic>
+    release(&ftable.lock);
+    80003378:	00017517          	auipc	a0,0x17
+    8000337c:	fd050513          	addi	a0,a0,-48 # 8001a348 <ftable>
+    80003380:	438020ef          	jal	800057b8 <release>
+    begin_op();
+    iput(ff.ip);
+    end_op();
+  }
+}
+    80003384:	70e2                	ld	ra,56(sp)
+    80003386:	7442                	ld	s0,48(sp)
+    80003388:	74a2                	ld	s1,40(sp)
+    8000338a:	6121                	addi	sp,sp,64
+    8000338c:	8082                	ret
+    pipeclose(ff.pipe, ff.writable);
+    8000338e:	85d6                	mv	a1,s5
+    80003390:	8552                	mv	a0,s4
+    80003392:	336000ef          	jal	800036c8 <pipeclose>
+    80003396:	7902                	ld	s2,32(sp)
+    80003398:	69e2                	ld	s3,24(sp)
+    8000339a:	6a42                	ld	s4,16(sp)
+    8000339c:	6aa2                	ld	s5,8(sp)
+    8000339e:	b7dd                	j	80003384 <fileclose+0x8e>
+    begin_op();
+    800033a0:	b3dff0ef          	jal	80002edc <begin_op>
+    iput(ff.ip);
+    800033a4:	854e                	mv	a0,s3
+    800033a6:	c22ff0ef          	jal	800027c8 <iput>
+    end_op();
+    800033aa:	b9dff0ef          	jal	80002f46 <end_op>
+    800033ae:	7902                	ld	s2,32(sp)
+    800033b0:	69e2                	ld	s3,24(sp)
+    800033b2:	6a42                	ld	s4,16(sp)
+    800033b4:	6aa2                	ld	s5,8(sp)
+    800033b6:	b7f9                	j	80003384 <fileclose+0x8e>
+
+00000000800033b8 <filestat>:
+
+// Get metadata about file f.
+// addr is a user virtual address, pointing to a struct stat.
+int
+filestat(struct file *f, uint64 addr)
+{
+    800033b8:	715d                	addi	sp,sp,-80
+    800033ba:	e486                	sd	ra,72(sp)
+    800033bc:	e0a2                	sd	s0,64(sp)
+    800033be:	fc26                	sd	s1,56(sp)
+    800033c0:	f44e                	sd	s3,40(sp)
+    800033c2:	0880                	addi	s0,sp,80
+    800033c4:	84aa                	mv	s1,a0
+    800033c6:	89ae                	mv	s3,a1
+  struct proc *p = myproc();
+    800033c8:	99ffd0ef          	jal	80000d66 <myproc>
+  struct stat st;
+  
+  if(f->type == FD_INODE || f->type == FD_DEVICE){
+    800033cc:	409c                	lw	a5,0(s1)
+    800033ce:	37f9                	addiw	a5,a5,-2
+    800033d0:	4705                	li	a4,1
+    800033d2:	04f76063          	bltu	a4,a5,80003412 <filestat+0x5a>
+    800033d6:	f84a                	sd	s2,48(sp)
+    800033d8:	892a                	mv	s2,a0
+    ilock(f->ip);
+    800033da:	6c88                	ld	a0,24(s1)
+    800033dc:	a6aff0ef          	jal	80002646 <ilock>
+    stati(f->ip, &st);
+    800033e0:	fb840593          	addi	a1,s0,-72
+    800033e4:	6c88                	ld	a0,24(s1)
+    800033e6:	c8aff0ef          	jal	80002870 <stati>
+    iunlock(f->ip);
+    800033ea:	6c88                	ld	a0,24(s1)
+    800033ec:	b08ff0ef          	jal	800026f4 <iunlock>
+    if(copyout(p->pagetable, addr, (char *)&st, sizeof(st)) < 0)
+    800033f0:	46e1                	li	a3,24
+    800033f2:	fb840613          	addi	a2,s0,-72
+    800033f6:	85ce                	mv	a1,s3
+    800033f8:	05093503          	ld	a0,80(s2)
+    800033fc:	ddcfd0ef          	jal	800009d8 <copyout>
+    80003400:	41f5551b          	sraiw	a0,a0,0x1f
+    80003404:	7942                	ld	s2,48(sp)
+      return -1;
+    return 0;
+  }
+  return -1;
+}
+    80003406:	60a6                	ld	ra,72(sp)
+    80003408:	6406                	ld	s0,64(sp)
+    8000340a:	74e2                	ld	s1,56(sp)
+    8000340c:	79a2                	ld	s3,40(sp)
+    8000340e:	6161                	addi	sp,sp,80
+    80003410:	8082                	ret
+  return -1;
+    80003412:	557d                	li	a0,-1
+    80003414:	bfcd                	j	80003406 <filestat+0x4e>
+
+0000000080003416 <fileread>:
+
+// Read from file f.
+// addr is a user virtual address.
+int
+fileread(struct file *f, uint64 addr, int n)
+{
+    80003416:	7179                	addi	sp,sp,-48
+    80003418:	f406                	sd	ra,40(sp)
+    8000341a:	f022                	sd	s0,32(sp)
+    8000341c:	e84a                	sd	s2,16(sp)
+    8000341e:	1800                	addi	s0,sp,48
+  int r = 0;
+
+  if(f->readable == 0)
+    80003420:	00854783          	lbu	a5,8(a0)
+    80003424:	cfd1                	beqz	a5,800034c0 <fileread+0xaa>
+    80003426:	ec26                	sd	s1,24(sp)
+    80003428:	e44e                	sd	s3,8(sp)
+    8000342a:	84aa                	mv	s1,a0
+    8000342c:	89ae                	mv	s3,a1
+    8000342e:	8932                	mv	s2,a2
+    return -1;
+
+  if(f->type == FD_PIPE){
+    80003430:	411c                	lw	a5,0(a0)
+    80003432:	4705                	li	a4,1
+    80003434:	04e78363          	beq	a5,a4,8000347a <fileread+0x64>
+    r = piperead(f->pipe, addr, n);
+  } else if(f->type == FD_DEVICE){
+    80003438:	470d                	li	a4,3
+    8000343a:	04e78763          	beq	a5,a4,80003488 <fileread+0x72>
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].read)
+      return -1;
+    r = devsw[f->major].read(1, addr, n);
+  } else if(f->type == FD_INODE){
+    8000343e:	4709                	li	a4,2
+    80003440:	06e79a63          	bne	a5,a4,800034b4 <fileread+0x9e>
+    ilock(f->ip);
+    80003444:	6d08                	ld	a0,24(a0)
+    80003446:	a00ff0ef          	jal	80002646 <ilock>
+    if((r = readi(f->ip, 1, addr, f->off, n)) > 0)
+    8000344a:	874a                	mv	a4,s2
+    8000344c:	5094                	lw	a3,32(s1)
+    8000344e:	864e                	mv	a2,s3
+    80003450:	4585                	li	a1,1
+    80003452:	6c88                	ld	a0,24(s1)
+    80003454:	c46ff0ef          	jal	8000289a <readi>
+    80003458:	892a                	mv	s2,a0
+    8000345a:	00a05563          	blez	a0,80003464 <fileread+0x4e>
+      f->off += r;
+    8000345e:	509c                	lw	a5,32(s1)
+    80003460:	9fa9                	addw	a5,a5,a0
+    80003462:	d09c                	sw	a5,32(s1)
+    iunlock(f->ip);
+    80003464:	6c88                	ld	a0,24(s1)
+    80003466:	a8eff0ef          	jal	800026f4 <iunlock>
+    8000346a:	64e2                	ld	s1,24(sp)
+    8000346c:	69a2                	ld	s3,8(sp)
+  } else {
+    panic("fileread");
+  }
+
+  return r;
+}
+    8000346e:	854a                	mv	a0,s2
+    80003470:	70a2                	ld	ra,40(sp)
+    80003472:	7402                	ld	s0,32(sp)
+    80003474:	6942                	ld	s2,16(sp)
+    80003476:	6145                	addi	sp,sp,48
+    80003478:	8082                	ret
+    r = piperead(f->pipe, addr, n);
+    8000347a:	6908                	ld	a0,16(a0)
+    8000347c:	388000ef          	jal	80003804 <piperead>
+    80003480:	892a                	mv	s2,a0
+    80003482:	64e2                	ld	s1,24(sp)
+    80003484:	69a2                	ld	s3,8(sp)
+    80003486:	b7e5                	j	8000346e <fileread+0x58>
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].read)
+    80003488:	02451783          	lh	a5,36(a0)
+    8000348c:	03079693          	slli	a3,a5,0x30
+    80003490:	92c1                	srli	a3,a3,0x30
+    80003492:	4725                	li	a4,9
+    80003494:	02d76863          	bltu	a4,a3,800034c4 <fileread+0xae>
+    80003498:	0792                	slli	a5,a5,0x4
+    8000349a:	00017717          	auipc	a4,0x17
+    8000349e:	e0e70713          	addi	a4,a4,-498 # 8001a2a8 <devsw>
+    800034a2:	97ba                	add	a5,a5,a4
+    800034a4:	639c                	ld	a5,0(a5)
+    800034a6:	c39d                	beqz	a5,800034cc <fileread+0xb6>
+    r = devsw[f->major].read(1, addr, n);
+    800034a8:	4505                	li	a0,1
+    800034aa:	9782                	jalr	a5
+    800034ac:	892a                	mv	s2,a0
+    800034ae:	64e2                	ld	s1,24(sp)
+    800034b0:	69a2                	ld	s3,8(sp)
+    800034b2:	bf75                	j	8000346e <fileread+0x58>
+    panic("fileread");
+    800034b4:	00004517          	auipc	a0,0x4
+    800034b8:	0c450513          	addi	a0,a0,196 # 80007578 <etext+0x578>
+    800034bc:	737010ef          	jal	800053f2 <panic>
+    return -1;
+    800034c0:	597d                	li	s2,-1
+    800034c2:	b775                	j	8000346e <fileread+0x58>
+      return -1;
+    800034c4:	597d                	li	s2,-1
+    800034c6:	64e2                	ld	s1,24(sp)
+    800034c8:	69a2                	ld	s3,8(sp)
+    800034ca:	b755                	j	8000346e <fileread+0x58>
+    800034cc:	597d                	li	s2,-1
+    800034ce:	64e2                	ld	s1,24(sp)
+    800034d0:	69a2                	ld	s3,8(sp)
+    800034d2:	bf71                	j	8000346e <fileread+0x58>
+
+00000000800034d4 <filewrite>:
+int
+filewrite(struct file *f, uint64 addr, int n)
+{
+  int r, ret = 0;
+
+  if(f->writable == 0)
+    800034d4:	00954783          	lbu	a5,9(a0)
+    800034d8:	10078b63          	beqz	a5,800035ee <filewrite+0x11a>
+{
+    800034dc:	715d                	addi	sp,sp,-80
+    800034de:	e486                	sd	ra,72(sp)
+    800034e0:	e0a2                	sd	s0,64(sp)
+    800034e2:	f84a                	sd	s2,48(sp)
+    800034e4:	f052                	sd	s4,32(sp)
+    800034e6:	e85a                	sd	s6,16(sp)
+    800034e8:	0880                	addi	s0,sp,80
+    800034ea:	892a                	mv	s2,a0
+    800034ec:	8b2e                	mv	s6,a1
+    800034ee:	8a32                	mv	s4,a2
+    return -1;
+
+  if(f->type == FD_PIPE){
+    800034f0:	411c                	lw	a5,0(a0)
+    800034f2:	4705                	li	a4,1
+    800034f4:	02e78763          	beq	a5,a4,80003522 <filewrite+0x4e>
+    ret = pipewrite(f->pipe, addr, n);
+  } else if(f->type == FD_DEVICE){
+    800034f8:	470d                	li	a4,3
+    800034fa:	02e78863          	beq	a5,a4,8000352a <filewrite+0x56>
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].write)
+      return -1;
+    ret = devsw[f->major].write(1, addr, n);
+  } else if(f->type == FD_INODE){
+    800034fe:	4709                	li	a4,2
+    80003500:	0ce79c63          	bne	a5,a4,800035d8 <filewrite+0x104>
+    80003504:	f44e                	sd	s3,40(sp)
+    // and 2 blocks of slop for non-aligned writes.
+    // this really belongs lower down, since writei()
+    // might be writing a device like the console.
+    int max = ((MAXOPBLOCKS-1-1-2) / 2) * BSIZE;
+    int i = 0;
+    while(i < n){
+    80003506:	0ac05863          	blez	a2,800035b6 <filewrite+0xe2>
+    8000350a:	fc26                	sd	s1,56(sp)
+    8000350c:	ec56                	sd	s5,24(sp)
+    8000350e:	e45e                	sd	s7,8(sp)
+    80003510:	e062                	sd	s8,0(sp)
+    int i = 0;
+    80003512:	4981                	li	s3,0
+      int n1 = n - i;
+      if(n1 > max)
+    80003514:	6b85                	lui	s7,0x1
+    80003516:	c00b8b93          	addi	s7,s7,-1024 # c00 <_entry-0x7ffff400>
+    8000351a:	6c05                	lui	s8,0x1
+    8000351c:	c00c0c1b          	addiw	s8,s8,-1024 # c00 <_entry-0x7ffff400>
+    80003520:	a8b5                	j	8000359c <filewrite+0xc8>
+    ret = pipewrite(f->pipe, addr, n);
+    80003522:	6908                	ld	a0,16(a0)
+    80003524:	1fc000ef          	jal	80003720 <pipewrite>
+    80003528:	a04d                	j	800035ca <filewrite+0xf6>
+    if(f->major < 0 || f->major >= NDEV || !devsw[f->major].write)
+    8000352a:	02451783          	lh	a5,36(a0)
+    8000352e:	03079693          	slli	a3,a5,0x30
+    80003532:	92c1                	srli	a3,a3,0x30
+    80003534:	4725                	li	a4,9
+    80003536:	0ad76e63          	bltu	a4,a3,800035f2 <filewrite+0x11e>
+    8000353a:	0792                	slli	a5,a5,0x4
+    8000353c:	00017717          	auipc	a4,0x17
+    80003540:	d6c70713          	addi	a4,a4,-660 # 8001a2a8 <devsw>
+    80003544:	97ba                	add	a5,a5,a4
+    80003546:	679c                	ld	a5,8(a5)
+    80003548:	c7dd                	beqz	a5,800035f6 <filewrite+0x122>
+    ret = devsw[f->major].write(1, addr, n);
+    8000354a:	4505                	li	a0,1
+    8000354c:	9782                	jalr	a5
+    8000354e:	a8b5                	j	800035ca <filewrite+0xf6>
+      if(n1 > max)
+    80003550:	00048a9b          	sext.w	s5,s1
+        n1 = max;
+
+      begin_op();
+    80003554:	989ff0ef          	jal	80002edc <begin_op>
+      ilock(f->ip);
+    80003558:	01893503          	ld	a0,24(s2)
+    8000355c:	8eaff0ef          	jal	80002646 <ilock>
+      if ((r = writei(f->ip, 1, addr + i, f->off, n1)) > 0)
+    80003560:	8756                	mv	a4,s5
+    80003562:	02092683          	lw	a3,32(s2)
+    80003566:	01698633          	add	a2,s3,s6
+    8000356a:	4585                	li	a1,1
+    8000356c:	01893503          	ld	a0,24(s2)
+    80003570:	c26ff0ef          	jal	80002996 <writei>
+    80003574:	84aa                	mv	s1,a0
+    80003576:	00a05763          	blez	a0,80003584 <filewrite+0xb0>
+        f->off += r;
+    8000357a:	02092783          	lw	a5,32(s2)
+    8000357e:	9fa9                	addw	a5,a5,a0
+    80003580:	02f92023          	sw	a5,32(s2)
+      iunlock(f->ip);
+    80003584:	01893503          	ld	a0,24(s2)
+    80003588:	96cff0ef          	jal	800026f4 <iunlock>
+      end_op();
+    8000358c:	9bbff0ef          	jal	80002f46 <end_op>
+
+      if(r != n1){
+    80003590:	029a9563          	bne	s5,s1,800035ba <filewrite+0xe6>
+        // error from writei
+        break;
+      }
+      i += r;
+    80003594:	013489bb          	addw	s3,s1,s3
+    while(i < n){
+    80003598:	0149da63          	bge	s3,s4,800035ac <filewrite+0xd8>
+      int n1 = n - i;
+    8000359c:	413a04bb          	subw	s1,s4,s3
+      if(n1 > max)
+    800035a0:	0004879b          	sext.w	a5,s1
+    800035a4:	fafbd6e3          	bge	s7,a5,80003550 <filewrite+0x7c>
+    800035a8:	84e2                	mv	s1,s8
+    800035aa:	b75d                	j	80003550 <filewrite+0x7c>
+    800035ac:	74e2                	ld	s1,56(sp)
+    800035ae:	6ae2                	ld	s5,24(sp)
+    800035b0:	6ba2                	ld	s7,8(sp)
+    800035b2:	6c02                	ld	s8,0(sp)
+    800035b4:	a039                	j	800035c2 <filewrite+0xee>
+    int i = 0;
+    800035b6:	4981                	li	s3,0
+    800035b8:	a029                	j	800035c2 <filewrite+0xee>
+    800035ba:	74e2                	ld	s1,56(sp)
+    800035bc:	6ae2                	ld	s5,24(sp)
+    800035be:	6ba2                	ld	s7,8(sp)
+    800035c0:	6c02                	ld	s8,0(sp)
+    }
+    ret = (i == n ? n : -1);
+    800035c2:	033a1c63          	bne	s4,s3,800035fa <filewrite+0x126>
+    800035c6:	8552                	mv	a0,s4
+    800035c8:	79a2                	ld	s3,40(sp)
+  } else {
+    panic("filewrite");
+  }
+
+  return ret;
+}
+    800035ca:	60a6                	ld	ra,72(sp)
+    800035cc:	6406                	ld	s0,64(sp)
+    800035ce:	7942                	ld	s2,48(sp)
+    800035d0:	7a02                	ld	s4,32(sp)
+    800035d2:	6b42                	ld	s6,16(sp)
+    800035d4:	6161                	addi	sp,sp,80
+    800035d6:	8082                	ret
+    800035d8:	fc26                	sd	s1,56(sp)
+    800035da:	f44e                	sd	s3,40(sp)
+    800035dc:	ec56                	sd	s5,24(sp)
+    800035de:	e45e                	sd	s7,8(sp)
+    800035e0:	e062                	sd	s8,0(sp)
+    panic("filewrite");
+    800035e2:	00004517          	auipc	a0,0x4
+    800035e6:	fa650513          	addi	a0,a0,-90 # 80007588 <etext+0x588>
+    800035ea:	609010ef          	jal	800053f2 <panic>
+    return -1;
+    800035ee:	557d                	li	a0,-1
+}
+    800035f0:	8082                	ret
+      return -1;
+    800035f2:	557d                	li	a0,-1
+    800035f4:	bfd9                	j	800035ca <filewrite+0xf6>
+    800035f6:	557d                	li	a0,-1
+    800035f8:	bfc9                	j	800035ca <filewrite+0xf6>
+    ret = (i == n ? n : -1);
+    800035fa:	557d                	li	a0,-1
+    800035fc:	79a2                	ld	s3,40(sp)
+    800035fe:	b7f1                	j	800035ca <filewrite+0xf6>
+
+0000000080003600 <pipealloc>:
+    80003600:	7179                	addi	sp,sp,-48
+    80003602:	f406                	sd	ra,40(sp)
+    80003604:	f022                	sd	s0,32(sp)
+    80003606:	ec26                	sd	s1,24(sp)
+    80003608:	e052                	sd	s4,0(sp)
+    8000360a:	1800                	addi	s0,sp,48
+    8000360c:	84aa                	mv	s1,a0
+    8000360e:	8a2e                	mv	s4,a1
+    80003610:	0005b023          	sd	zero,0(a1)
+    80003614:	00053023          	sd	zero,0(a0)
+    80003618:	c3bff0ef          	jal	80003252 <filealloc>
+    8000361c:	e088                	sd	a0,0(s1)
+    8000361e:	c549                	beqz	a0,800036a8 <pipealloc+0xa8>
+    80003620:	c33ff0ef          	jal	80003252 <filealloc>
+    80003624:	00aa3023          	sd	a0,0(s4)
+    80003628:	cd25                	beqz	a0,800036a0 <pipealloc+0xa0>
+    8000362a:	e84a                	sd	s2,16(sp)
+    8000362c:	ad3fc0ef          	jal	800000fe <kalloc>
+    80003630:	892a                	mv	s2,a0
+    80003632:	c12d                	beqz	a0,80003694 <pipealloc+0x94>
+    80003634:	e44e                	sd	s3,8(sp)
+    80003636:	4985                	li	s3,1
+    80003638:	43352023          	sw	s3,1056(a0)
+    8000363c:	43352223          	sw	s3,1060(a0)
+    80003640:	40052e23          	sw	zero,1052(a0)
+    80003644:	40052c23          	sw	zero,1048(a0)
+    80003648:	00004597          	auipc	a1,0x4
+    8000364c:	f5058593          	addi	a1,a1,-176 # 80007598 <etext+0x598>
+    80003650:	050020ef          	jal	800056a0 <initlock>
+    80003654:	609c                	ld	a5,0(s1)
+    80003656:	0137a023          	sw	s3,0(a5)
+    8000365a:	609c                	ld	a5,0(s1)
+    8000365c:	01378423          	sb	s3,8(a5)
+    80003660:	609c                	ld	a5,0(s1)
+    80003662:	000784a3          	sb	zero,9(a5)
+    80003666:	609c                	ld	a5,0(s1)
+    80003668:	0127b823          	sd	s2,16(a5)
+    8000366c:	000a3783          	ld	a5,0(s4)
+    80003670:	0137a023          	sw	s3,0(a5)
+    80003674:	000a3783          	ld	a5,0(s4)
+    80003678:	00078423          	sb	zero,8(a5)
+    8000367c:	000a3783          	ld	a5,0(s4)
+    80003680:	013784a3          	sb	s3,9(a5)
+    80003684:	000a3783          	ld	a5,0(s4)
+    80003688:	0127b823          	sd	s2,16(a5)
+    8000368c:	4501                	li	a0,0
+    8000368e:	6942                	ld	s2,16(sp)
+    80003690:	69a2                	ld	s3,8(sp)
+    80003692:	a01d                	j	800036b8 <pipealloc+0xb8>
+    80003694:	6088                	ld	a0,0(s1)
+    80003696:	c119                	beqz	a0,8000369c <pipealloc+0x9c>
+    80003698:	6942                	ld	s2,16(sp)
+    8000369a:	a029                	j	800036a4 <pipealloc+0xa4>
+    8000369c:	6942                	ld	s2,16(sp)
+    8000369e:	a029                	j	800036a8 <pipealloc+0xa8>
+    800036a0:	6088                	ld	a0,0(s1)
+    800036a2:	c10d                	beqz	a0,800036c4 <pipealloc+0xc4>
+    800036a4:	c53ff0ef          	jal	800032f6 <fileclose>
+    800036a8:	000a3783          	ld	a5,0(s4)
+    800036ac:	557d                	li	a0,-1
+    800036ae:	c789                	beqz	a5,800036b8 <pipealloc+0xb8>
+    800036b0:	853e                	mv	a0,a5
+    800036b2:	c45ff0ef          	jal	800032f6 <fileclose>
+    800036b6:	557d                	li	a0,-1
+    800036b8:	70a2                	ld	ra,40(sp)
+    800036ba:	7402                	ld	s0,32(sp)
+    800036bc:	64e2                	ld	s1,24(sp)
+    800036be:	6a02                	ld	s4,0(sp)
+    800036c0:	6145                	addi	sp,sp,48
+    800036c2:	8082                	ret
+    800036c4:	557d                	li	a0,-1
+    800036c6:	bfcd                	j	800036b8 <pipealloc+0xb8>
+
+00000000800036c8 <pipeclose>:
+    800036c8:	1101                	addi	sp,sp,-32
+    800036ca:	ec06                	sd	ra,24(sp)
+    800036cc:	e822                	sd	s0,16(sp)
+    800036ce:	e426                	sd	s1,8(sp)
+    800036d0:	e04a                	sd	s2,0(sp)
+    800036d2:	1000                	addi	s0,sp,32
+    800036d4:	84aa                	mv	s1,a0
+    800036d6:	892e                	mv	s2,a1
+    800036d8:	048020ef          	jal	80005720 <acquire>
+    800036dc:	02090763          	beqz	s2,8000370a <pipeclose+0x42>
+    800036e0:	4204a223          	sw	zero,1060(s1)
+    800036e4:	41848513          	addi	a0,s1,1048
+    800036e8:	c99fd0ef          	jal	80001380 <wakeup>
+    800036ec:	4204b783          	ld	a5,1056(s1)
+    800036f0:	e785                	bnez	a5,80003718 <pipeclose+0x50>
+    800036f2:	8526                	mv	a0,s1
+    800036f4:	0c4020ef          	jal	800057b8 <release>
+    800036f8:	8526                	mv	a0,s1
+    800036fa:	923fc0ef          	jal	8000001c <kfree>
+    800036fe:	60e2                	ld	ra,24(sp)
+    80003700:	6442                	ld	s0,16(sp)
+    80003702:	64a2                	ld	s1,8(sp)
+    80003704:	6902                	ld	s2,0(sp)
+    80003706:	6105                	addi	sp,sp,32
+    80003708:	8082                	ret
+    8000370a:	4204a023          	sw	zero,1056(s1)
+    8000370e:	41c48513          	addi	a0,s1,1052
+    80003712:	c6ffd0ef          	jal	80001380 <wakeup>
+    80003716:	bfd9                	j	800036ec <pipeclose+0x24>
+    80003718:	8526                	mv	a0,s1
+    8000371a:	09e020ef          	jal	800057b8 <release>
+    8000371e:	b7c5                	j	800036fe <pipeclose+0x36>
+
+0000000080003720 <pipewrite>:
+    80003720:	711d                	addi	sp,sp,-96
+    80003722:	ec86                	sd	ra,88(sp)
+    80003724:	e8a2                	sd	s0,80(sp)
+    80003726:	e4a6                	sd	s1,72(sp)
+    80003728:	e0ca                	sd	s2,64(sp)
+    8000372a:	fc4e                	sd	s3,56(sp)
+    8000372c:	f852                	sd	s4,48(sp)
+    8000372e:	f456                	sd	s5,40(sp)
+    80003730:	1080                	addi	s0,sp,96
+    80003732:	84aa                	mv	s1,a0
+    80003734:	8aae                	mv	s5,a1
+    80003736:	8a32                	mv	s4,a2
+    80003738:	e2efd0ef          	jal	80000d66 <myproc>
+    8000373c:	89aa                	mv	s3,a0
+    8000373e:	8526                	mv	a0,s1
+    80003740:	7e1010ef          	jal	80005720 <acquire>
+    80003744:	0b405a63          	blez	s4,800037f8 <pipewrite+0xd8>
+    80003748:	f05a                	sd	s6,32(sp)
+    8000374a:	ec5e                	sd	s7,24(sp)
+    8000374c:	e862                	sd	s8,16(sp)
+    8000374e:	4901                	li	s2,0
+    80003750:	5b7d                	li	s6,-1
+    80003752:	41848c13          	addi	s8,s1,1048
+    80003756:	41c48b93          	addi	s7,s1,1052
+    8000375a:	a81d                	j	80003790 <pipewrite+0x70>
+    8000375c:	8526                	mv	a0,s1
+    8000375e:	05a020ef          	jal	800057b8 <release>
+    80003762:	597d                	li	s2,-1
+    80003764:	7b02                	ld	s6,32(sp)
+    80003766:	6be2                	ld	s7,24(sp)
+    80003768:	6c42                	ld	s8,16(sp)
+    8000376a:	854a                	mv	a0,s2
+    8000376c:	60e6                	ld	ra,88(sp)
+    8000376e:	6446                	ld	s0,80(sp)
+    80003770:	64a6                	ld	s1,72(sp)
+    80003772:	6906                	ld	s2,64(sp)
+    80003774:	79e2                	ld	s3,56(sp)
+    80003776:	7a42                	ld	s4,48(sp)
+    80003778:	7aa2                	ld	s5,40(sp)
+    8000377a:	6125                	addi	sp,sp,96
+    8000377c:	8082                	ret
+    8000377e:	8562                	mv	a0,s8
+    80003780:	c01fd0ef          	jal	80001380 <wakeup>
+    80003784:	85a6                	mv	a1,s1
+    80003786:	855e                	mv	a0,s7
+    80003788:	badfd0ef          	jal	80001334 <sleep>
+    8000378c:	05495b63          	bge	s2,s4,800037e2 <pipewrite+0xc2>
+    80003790:	4204a783          	lw	a5,1056(s1)
+    80003794:	d7e1                	beqz	a5,8000375c <pipewrite+0x3c>
+    80003796:	854e                	mv	a0,s3
+    80003798:	dd5fd0ef          	jal	8000156c <killed>
+    8000379c:	f161                	bnez	a0,8000375c <pipewrite+0x3c>
+    8000379e:	4184a783          	lw	a5,1048(s1)
+    800037a2:	41c4a703          	lw	a4,1052(s1)
+    800037a6:	4007879b          	addiw	a5,a5,1024
+    800037aa:	fcf70ae3          	beq	a4,a5,8000377e <pipewrite+0x5e>
+    800037ae:	4685                	li	a3,1
+    800037b0:	01590633          	add	a2,s2,s5
+    800037b4:	faf40593          	addi	a1,s0,-81
+    800037b8:	0509b503          	ld	a0,80(s3)
+    800037bc:	af2fd0ef          	jal	80000aae <copyin>
+    800037c0:	03650e63          	beq	a0,s6,800037fc <pipewrite+0xdc>
+    800037c4:	41c4a783          	lw	a5,1052(s1)
+    800037c8:	0017871b          	addiw	a4,a5,1
+    800037cc:	40e4ae23          	sw	a4,1052(s1)
+    800037d0:	3ff7f793          	andi	a5,a5,1023
+    800037d4:	97a6                	add	a5,a5,s1
+    800037d6:	faf44703          	lbu	a4,-81(s0)
+    800037da:	00e78c23          	sb	a4,24(a5)
+    800037de:	2905                	addiw	s2,s2,1
+    800037e0:	b775                	j	8000378c <pipewrite+0x6c>
+    800037e2:	7b02                	ld	s6,32(sp)
+    800037e4:	6be2                	ld	s7,24(sp)
+    800037e6:	6c42                	ld	s8,16(sp)
+    800037e8:	41848513          	addi	a0,s1,1048
+    800037ec:	b95fd0ef          	jal	80001380 <wakeup>
+    800037f0:	8526                	mv	a0,s1
+    800037f2:	7c7010ef          	jal	800057b8 <release>
+    800037f6:	bf95                	j	8000376a <pipewrite+0x4a>
+    800037f8:	4901                	li	s2,0
+    800037fa:	b7fd                	j	800037e8 <pipewrite+0xc8>
+    800037fc:	7b02                	ld	s6,32(sp)
+    800037fe:	6be2                	ld	s7,24(sp)
+    80003800:	6c42                	ld	s8,16(sp)
+    80003802:	b7dd                	j	800037e8 <pipewrite+0xc8>
+
+0000000080003804 <piperead>:
+    80003804:	715d                	addi	sp,sp,-80
+    80003806:	e486                	sd	ra,72(sp)
+    80003808:	e0a2                	sd	s0,64(sp)
+    8000380a:	fc26                	sd	s1,56(sp)
+    8000380c:	f84a                	sd	s2,48(sp)
+    8000380e:	f44e                	sd	s3,40(sp)
+    80003810:	f052                	sd	s4,32(sp)
+    80003812:	ec56                	sd	s5,24(sp)
+    80003814:	0880                	addi	s0,sp,80
+    80003816:	84aa                	mv	s1,a0
+    80003818:	892e                	mv	s2,a1
+    8000381a:	8ab2                	mv	s5,a2
+    8000381c:	d4afd0ef          	jal	80000d66 <myproc>
+    80003820:	8a2a                	mv	s4,a0
+    80003822:	8526                	mv	a0,s1
+    80003824:	6fd010ef          	jal	80005720 <acquire>
+    80003828:	4184a703          	lw	a4,1048(s1)
+    8000382c:	41c4a783          	lw	a5,1052(s1)
+    80003830:	41848993          	addi	s3,s1,1048
+    80003834:	02f71563          	bne	a4,a5,8000385e <piperead+0x5a>
+    80003838:	4244a783          	lw	a5,1060(s1)
+    8000383c:	cb85                	beqz	a5,8000386c <piperead+0x68>
+    8000383e:	8552                	mv	a0,s4
+    80003840:	d2dfd0ef          	jal	8000156c <killed>
+    80003844:	ed19                	bnez	a0,80003862 <piperead+0x5e>
+    80003846:	85a6                	mv	a1,s1
+    80003848:	854e                	mv	a0,s3
+    8000384a:	aebfd0ef          	jal	80001334 <sleep>
+    8000384e:	4184a703          	lw	a4,1048(s1)
+    80003852:	41c4a783          	lw	a5,1052(s1)
+    80003856:	fef701e3          	beq	a4,a5,80003838 <piperead+0x34>
+    8000385a:	e85a                	sd	s6,16(sp)
+    8000385c:	a809                	j	8000386e <piperead+0x6a>
+    8000385e:	e85a                	sd	s6,16(sp)
+    80003860:	a039                	j	8000386e <piperead+0x6a>
+    80003862:	8526                	mv	a0,s1
+    80003864:	755010ef          	jal	800057b8 <release>
+    80003868:	59fd                	li	s3,-1
+    8000386a:	a8b1                	j	800038c6 <piperead+0xc2>
+    8000386c:	e85a                	sd	s6,16(sp)
+    8000386e:	4981                	li	s3,0
+    80003870:	5b7d                	li	s6,-1
+    80003872:	05505263          	blez	s5,800038b6 <piperead+0xb2>
+    80003876:	4184a783          	lw	a5,1048(s1)
+    8000387a:	41c4a703          	lw	a4,1052(s1)
+    8000387e:	02f70c63          	beq	a4,a5,800038b6 <piperead+0xb2>
+    80003882:	0017871b          	addiw	a4,a5,1
+    80003886:	40e4ac23          	sw	a4,1048(s1)
+    8000388a:	3ff7f793          	andi	a5,a5,1023
+    8000388e:	97a6                	add	a5,a5,s1
+    80003890:	0187c783          	lbu	a5,24(a5)
+    80003894:	faf40fa3          	sb	a5,-65(s0)
+    80003898:	4685                	li	a3,1
+    8000389a:	fbf40613          	addi	a2,s0,-65
+    8000389e:	85ca                	mv	a1,s2
+    800038a0:	050a3503          	ld	a0,80(s4)
+    800038a4:	934fd0ef          	jal	800009d8 <copyout>
+    800038a8:	01650763          	beq	a0,s6,800038b6 <piperead+0xb2>
+    800038ac:	2985                	addiw	s3,s3,1
+    800038ae:	0905                	addi	s2,s2,1
+    800038b0:	fd3a93e3          	bne	s5,s3,80003876 <piperead+0x72>
+    800038b4:	89d6                	mv	s3,s5
+    800038b6:	41c48513          	addi	a0,s1,1052
+    800038ba:	ac7fd0ef          	jal	80001380 <wakeup>
+    800038be:	8526                	mv	a0,s1
+    800038c0:	6f9010ef          	jal	800057b8 <release>
+    800038c4:	6b42                	ld	s6,16(sp)
+    800038c6:	854e                	mv	a0,s3
+    800038c8:	60a6                	ld	ra,72(sp)
+    800038ca:	6406                	ld	s0,64(sp)
+    800038cc:	74e2                	ld	s1,56(sp)
+    800038ce:	7942                	ld	s2,48(sp)
+    800038d0:	79a2                	ld	s3,40(sp)
+    800038d2:	7a02                	ld	s4,32(sp)
+    800038d4:	6ae2                	ld	s5,24(sp)
+    800038d6:	6161                	addi	sp,sp,80
+    800038d8:	8082                	ret
+
+00000000800038da <flags2perm>:
+#include "elf.h"
+
+static int loadseg(pde_t *, uint64, struct inode *, uint, uint);
+
+int flags2perm(int flags)
+{
+    800038da:	1141                	addi	sp,sp,-16
+    800038dc:	e422                	sd	s0,8(sp)
+    800038de:	0800                	addi	s0,sp,16
+    800038e0:	87aa                	mv	a5,a0
+    int perm = 0;
+    if(flags & 0x1)
+    800038e2:	8905                	andi	a0,a0,1
+    800038e4:	050e                	slli	a0,a0,0x3
+      perm = PTE_X;
+    if(flags & 0x2)
+    800038e6:	8b89                	andi	a5,a5,2
+    800038e8:	c399                	beqz	a5,800038ee <flags2perm+0x14>
+      perm |= PTE_W;
+    800038ea:	00456513          	ori	a0,a0,4
+    return perm;
+}
+    800038ee:	6422                	ld	s0,8(sp)
+    800038f0:	0141                	addi	sp,sp,16
+    800038f2:	8082                	ret
+
+00000000800038f4 <exec>:
+
+int
+exec(char *path, char **argv)
+{
+    800038f4:	df010113          	addi	sp,sp,-528
+    800038f8:	20113423          	sd	ra,520(sp)
+    800038fc:	20813023          	sd	s0,512(sp)
+    80003900:	ffa6                	sd	s1,504(sp)
+    80003902:	fbca                	sd	s2,496(sp)
+    80003904:	0c00                	addi	s0,sp,528
+    80003906:	892a                	mv	s2,a0
+    80003908:	dea43c23          	sd	a0,-520(s0)
+    8000390c:	e0b43023          	sd	a1,-512(s0)
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+  struct elfhdr elf;
+  struct inode *ip;
+  struct proghdr ph;
+  pagetable_t pagetable = 0, oldpagetable;
+  struct proc *p = myproc();
+    80003910:	c56fd0ef          	jal	80000d66 <myproc>
+    80003914:	84aa                	mv	s1,a0
+
+  begin_op();
+    80003916:	dc6ff0ef          	jal	80002edc <begin_op>
+
+  if((ip = namei(path)) == 0){
+    8000391a:	854a                	mv	a0,s2
+    8000391c:	c04ff0ef          	jal	80002d20 <namei>
+    80003920:	c931                	beqz	a0,80003974 <exec+0x80>
+    80003922:	f3d2                	sd	s4,480(sp)
+    80003924:	8a2a                	mv	s4,a0
+    end_op();
+    return -1;
+  }
+  ilock(ip);
+    80003926:	d21fe0ef          	jal	80002646 <ilock>
+
+  // Check ELF header
+  if(readi(ip, 0, (uint64)&elf, 0, sizeof(elf)) != sizeof(elf))
+    8000392a:	04000713          	li	a4,64
+    8000392e:	4681                	li	a3,0
+    80003930:	e5040613          	addi	a2,s0,-432
+    80003934:	4581                	li	a1,0
+    80003936:	8552                	mv	a0,s4
+    80003938:	f63fe0ef          	jal	8000289a <readi>
+    8000393c:	04000793          	li	a5,64
+    80003940:	00f51a63          	bne	a0,a5,80003954 <exec+0x60>
+    goto bad;
+
+  if(elf.magic != ELF_MAGIC)
+    80003944:	e5042703          	lw	a4,-432(s0)
+    80003948:	464c47b7          	lui	a5,0x464c4
+    8000394c:	57f78793          	addi	a5,a5,1407 # 464c457f <_entry-0x39b3ba81>
+    80003950:	02f70663          	beq	a4,a5,8000397c <exec+0x88>
+
+ bad:
+  if(pagetable)
+    proc_freepagetable(pagetable, sz);
+  if(ip){
+    iunlockput(ip);
+    80003954:	8552                	mv	a0,s4
+    80003956:	efbfe0ef          	jal	80002850 <iunlockput>
+    end_op();
+    8000395a:	decff0ef          	jal	80002f46 <end_op>
+  }
+  return -1;
+    8000395e:	557d                	li	a0,-1
+    80003960:	7a1e                	ld	s4,480(sp)
+}
+    80003962:	20813083          	ld	ra,520(sp)
+    80003966:	20013403          	ld	s0,512(sp)
+    8000396a:	74fe                	ld	s1,504(sp)
+    8000396c:	795e                	ld	s2,496(sp)
+    8000396e:	21010113          	addi	sp,sp,528
+    80003972:	8082                	ret
+    end_op();
+    80003974:	dd2ff0ef          	jal	80002f46 <end_op>
+    return -1;
+    80003978:	557d                	li	a0,-1
+    8000397a:	b7e5                	j	80003962 <exec+0x6e>
+    8000397c:	ebda                	sd	s6,464(sp)
+  if((pagetable = proc_pagetable(p)) == 0)
+    8000397e:	8526                	mv	a0,s1
+    80003980:	c8efd0ef          	jal	80000e0e <proc_pagetable>
+    80003984:	8b2a                	mv	s6,a0
+    80003986:	2c050b63          	beqz	a0,80003c5c <exec+0x368>
+    8000398a:	f7ce                	sd	s3,488(sp)
+    8000398c:	efd6                	sd	s5,472(sp)
+    8000398e:	e7de                	sd	s7,456(sp)
+    80003990:	e3e2                	sd	s8,448(sp)
+    80003992:	ff66                	sd	s9,440(sp)
+    80003994:	fb6a                	sd	s10,432(sp)
+  for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
+    80003996:	e7042d03          	lw	s10,-400(s0)
+    8000399a:	e8845783          	lhu	a5,-376(s0)
+    8000399e:	12078963          	beqz	a5,80003ad0 <exec+0x1dc>
+    800039a2:	f76e                	sd	s11,424(sp)
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+    800039a4:	4901                	li	s2,0
+  for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
+    800039a6:	4d81                	li	s11,0
+    if(ph.vaddr % PGSIZE != 0)
+    800039a8:	6c85                	lui	s9,0x1
+    800039aa:	fffc8793          	addi	a5,s9,-1 # fff <_entry-0x7ffff001>
+    800039ae:	def43823          	sd	a5,-528(s0)
+
+  for(i = 0; i < sz; i += PGSIZE){
+    pa = walkaddr(pagetable, va + i);
+    if(pa == 0)
+      panic("loadseg: address should exist");
+    if(sz - i < PGSIZE)
+    800039b2:	6a85                	lui	s5,0x1
+    800039b4:	a085                	j	80003a14 <exec+0x120>
+      panic("loadseg: address should exist");
+    800039b6:	00004517          	auipc	a0,0x4
+    800039ba:	bea50513          	addi	a0,a0,-1046 # 800075a0 <etext+0x5a0>
+    800039be:	235010ef          	jal	800053f2 <panic>
+    if(sz - i < PGSIZE)
+    800039c2:	2481                	sext.w	s1,s1
+      n = sz - i;
+    else
+      n = PGSIZE;
+    if(readi(ip, 0, (uint64)pa, offset+i, n) != n)
+    800039c4:	8726                	mv	a4,s1
+    800039c6:	012c06bb          	addw	a3,s8,s2
+    800039ca:	4581                	li	a1,0
+    800039cc:	8552                	mv	a0,s4
+    800039ce:	ecdfe0ef          	jal	8000289a <readi>
+    800039d2:	2501                	sext.w	a0,a0
+    800039d4:	24a49a63          	bne	s1,a0,80003c28 <exec+0x334>
+  for(i = 0; i < sz; i += PGSIZE){
+    800039d8:	012a893b          	addw	s2,s5,s2
+    800039dc:	03397363          	bgeu	s2,s3,80003a02 <exec+0x10e>
+    pa = walkaddr(pagetable, va + i);
+    800039e0:	02091593          	slli	a1,s2,0x20
+    800039e4:	9181                	srli	a1,a1,0x20
+    800039e6:	95de                	add	a1,a1,s7
+    800039e8:	855a                	mv	a0,s6
+    800039ea:	a73fc0ef          	jal	8000045c <walkaddr>
+    800039ee:	862a                	mv	a2,a0
+    if(pa == 0)
+    800039f0:	d179                	beqz	a0,800039b6 <exec+0xc2>
+    if(sz - i < PGSIZE)
+    800039f2:	412984bb          	subw	s1,s3,s2
+    800039f6:	0004879b          	sext.w	a5,s1
+    800039fa:	fcfcf4e3          	bgeu	s9,a5,800039c2 <exec+0xce>
+    800039fe:	84d6                	mv	s1,s5
+    80003a00:	b7c9                	j	800039c2 <exec+0xce>
+    sz = sz1;
+    80003a02:	e0843903          	ld	s2,-504(s0)
+  for(i=0, off=elf.phoff; i<elf.phnum; i++, off+=sizeof(ph)){
+    80003a06:	2d85                	addiw	s11,s11,1
+    80003a08:	038d0d1b          	addiw	s10,s10,56 # 1038 <_entry-0x7fffefc8>
+    80003a0c:	e8845783          	lhu	a5,-376(s0)
+    80003a10:	08fdd063          	bge	s11,a5,80003a90 <exec+0x19c>
+    if(readi(ip, 0, (uint64)&ph, off, sizeof(ph)) != sizeof(ph))
+    80003a14:	2d01                	sext.w	s10,s10
+    80003a16:	03800713          	li	a4,56
+    80003a1a:	86ea                	mv	a3,s10
+    80003a1c:	e1840613          	addi	a2,s0,-488
+    80003a20:	4581                	li	a1,0
+    80003a22:	8552                	mv	a0,s4
+    80003a24:	e77fe0ef          	jal	8000289a <readi>
+    80003a28:	03800793          	li	a5,56
+    80003a2c:	1cf51663          	bne	a0,a5,80003bf8 <exec+0x304>
+    if(ph.type != ELF_PROG_LOAD)
+    80003a30:	e1842783          	lw	a5,-488(s0)
+    80003a34:	4705                	li	a4,1
+    80003a36:	fce798e3          	bne	a5,a4,80003a06 <exec+0x112>
+    if(ph.memsz < ph.filesz)
+    80003a3a:	e4043483          	ld	s1,-448(s0)
+    80003a3e:	e3843783          	ld	a5,-456(s0)
+    80003a42:	1af4ef63          	bltu	s1,a5,80003c00 <exec+0x30c>
+    if(ph.vaddr + ph.memsz < ph.vaddr)
+    80003a46:	e2843783          	ld	a5,-472(s0)
+    80003a4a:	94be                	add	s1,s1,a5
+    80003a4c:	1af4ee63          	bltu	s1,a5,80003c08 <exec+0x314>
+    if(ph.vaddr % PGSIZE != 0)
+    80003a50:	df043703          	ld	a4,-528(s0)
+    80003a54:	8ff9                	and	a5,a5,a4
+    80003a56:	1a079d63          	bnez	a5,80003c10 <exec+0x31c>
+    if((sz1 = uvmalloc(pagetable, sz, ph.vaddr + ph.memsz, flags2perm(ph.flags))) == 0)
+    80003a5a:	e1c42503          	lw	a0,-484(s0)
+    80003a5e:	e7dff0ef          	jal	800038da <flags2perm>
+    80003a62:	86aa                	mv	a3,a0
+    80003a64:	8626                	mv	a2,s1
+    80003a66:	85ca                	mv	a1,s2
+    80003a68:	855a                	mv	a0,s6
+    80003a6a:	d5bfc0ef          	jal	800007c4 <uvmalloc>
+    80003a6e:	e0a43423          	sd	a0,-504(s0)
+    80003a72:	1a050363          	beqz	a0,80003c18 <exec+0x324>
+    if(loadseg(pagetable, ph.vaddr, ip, ph.off, ph.filesz) < 0)
+    80003a76:	e2843b83          	ld	s7,-472(s0)
+    80003a7a:	e2042c03          	lw	s8,-480(s0)
+    80003a7e:	e3842983          	lw	s3,-456(s0)
+  for(i = 0; i < sz; i += PGSIZE){
+    80003a82:	00098463          	beqz	s3,80003a8a <exec+0x196>
+    80003a86:	4901                	li	s2,0
+    80003a88:	bfa1                	j	800039e0 <exec+0xec>
+    sz = sz1;
+    80003a8a:	e0843903          	ld	s2,-504(s0)
+    80003a8e:	bfa5                	j	80003a06 <exec+0x112>
+    80003a90:	7dba                	ld	s11,424(sp)
+  iunlockput(ip);
+    80003a92:	8552                	mv	a0,s4
+    80003a94:	dbdfe0ef          	jal	80002850 <iunlockput>
+  end_op();
+    80003a98:	caeff0ef          	jal	80002f46 <end_op>
+  p = myproc();
+    80003a9c:	acafd0ef          	jal	80000d66 <myproc>
+    80003aa0:	8aaa                	mv	s5,a0
+  uint64 oldsz = p->sz;
+    80003aa2:	04853c83          	ld	s9,72(a0)
+  sz = PGROUNDUP(sz);
+    80003aa6:	6985                	lui	s3,0x1
+    80003aa8:	19fd                	addi	s3,s3,-1 # fff <_entry-0x7ffff001>
+    80003aaa:	99ca                	add	s3,s3,s2
+    80003aac:	77fd                	lui	a5,0xfffff
+    80003aae:	00f9f9b3          	and	s3,s3,a5
+  if((sz1 = uvmalloc(pagetable, sz, sz + (USERSTACK+1)*PGSIZE, PTE_W)) == 0)
+    80003ab2:	4691                	li	a3,4
+    80003ab4:	660d                	lui	a2,0x3
+    80003ab6:	964e                	add	a2,a2,s3
+    80003ab8:	85ce                	mv	a1,s3
+    80003aba:	855a                	mv	a0,s6
+    80003abc:	d09fc0ef          	jal	800007c4 <uvmalloc>
+    80003ac0:	892a                	mv	s2,a0
+    80003ac2:	e0a43423          	sd	a0,-504(s0)
+    80003ac6:	e519                	bnez	a0,80003ad4 <exec+0x1e0>
+  if(pagetable)
+    80003ac8:	e1343423          	sd	s3,-504(s0)
+    80003acc:	4a01                	li	s4,0
+    80003ace:	aab1                	j	80003c2a <exec+0x336>
+  uint64 argc, sz = 0, sp, ustack[MAXARG], stackbase;
+    80003ad0:	4901                	li	s2,0
+    80003ad2:	b7c1                	j	80003a92 <exec+0x19e>
+  uvmclear(pagetable, sz-(USERSTACK+1)*PGSIZE);
+    80003ad4:	75f5                	lui	a1,0xffffd
+    80003ad6:	95aa                	add	a1,a1,a0
+    80003ad8:	855a                	mv	a0,s6
+    80003ada:	ed5fc0ef          	jal	800009ae <uvmclear>
+  stackbase = sp - USERSTACK*PGSIZE;
+    80003ade:	7bf9                	lui	s7,0xffffe
+    80003ae0:	9bca                	add	s7,s7,s2
+  for(argc = 0; argv[argc]; argc++) {
+    80003ae2:	e0043783          	ld	a5,-512(s0)
+    80003ae6:	6388                	ld	a0,0(a5)
+    80003ae8:	cd39                	beqz	a0,80003b46 <exec+0x252>
+    80003aea:	e9040993          	addi	s3,s0,-368
+    80003aee:	f9040c13          	addi	s8,s0,-112
+    80003af2:	4481                	li	s1,0
+    sp -= strlen(argv[argc]) + 1;
+    80003af4:	fcafc0ef          	jal	800002be <strlen>
+    80003af8:	0015079b          	addiw	a5,a0,1
+    80003afc:	40f907b3          	sub	a5,s2,a5
+    sp -= sp % 16; // riscv sp must be 16-byte aligned
+    80003b00:	ff07f913          	andi	s2,a5,-16
+    if(sp < stackbase)
+    80003b04:	11796e63          	bltu	s2,s7,80003c20 <exec+0x32c>
+    if(copyout(pagetable, sp, argv[argc], strlen(argv[argc]) + 1) < 0)
+    80003b08:	e0043d03          	ld	s10,-512(s0)
+    80003b0c:	000d3a03          	ld	s4,0(s10)
+    80003b10:	8552                	mv	a0,s4
+    80003b12:	facfc0ef          	jal	800002be <strlen>
+    80003b16:	0015069b          	addiw	a3,a0,1
+    80003b1a:	8652                	mv	a2,s4
+    80003b1c:	85ca                	mv	a1,s2
+    80003b1e:	855a                	mv	a0,s6
+    80003b20:	eb9fc0ef          	jal	800009d8 <copyout>
+    80003b24:	10054063          	bltz	a0,80003c24 <exec+0x330>
+    ustack[argc] = sp;
+    80003b28:	0129b023          	sd	s2,0(s3)
+  for(argc = 0; argv[argc]; argc++) {
+    80003b2c:	0485                	addi	s1,s1,1
+    80003b2e:	008d0793          	addi	a5,s10,8
+    80003b32:	e0f43023          	sd	a5,-512(s0)
+    80003b36:	008d3503          	ld	a0,8(s10)
+    80003b3a:	c909                	beqz	a0,80003b4c <exec+0x258>
+    if(argc >= MAXARG)
+    80003b3c:	09a1                	addi	s3,s3,8
+    80003b3e:	fb899be3          	bne	s3,s8,80003af4 <exec+0x200>
+  ip = 0;
+    80003b42:	4a01                	li	s4,0
+    80003b44:	a0dd                	j	80003c2a <exec+0x336>
+  sp = sz;
+    80003b46:	e0843903          	ld	s2,-504(s0)
+  for(argc = 0; argv[argc]; argc++) {
+    80003b4a:	4481                	li	s1,0
+  ustack[argc] = 0;
+    80003b4c:	00349793          	slli	a5,s1,0x3
+    80003b50:	f9078793          	addi	a5,a5,-112 # ffffffffffffef90 <end+0xffffffff7ffdba50>
+    80003b54:	97a2                	add	a5,a5,s0
+    80003b56:	f007b023          	sd	zero,-256(a5)
+  sp -= (argc+1) * sizeof(uint64);
+    80003b5a:	00148693          	addi	a3,s1,1
+    80003b5e:	068e                	slli	a3,a3,0x3
+    80003b60:	40d90933          	sub	s2,s2,a3
+  sp -= sp % 16;
+    80003b64:	ff097913          	andi	s2,s2,-16
+  sz = sz1;
+    80003b68:	e0843983          	ld	s3,-504(s0)
+  if(sp < stackbase)
+    80003b6c:	f5796ee3          	bltu	s2,s7,80003ac8 <exec+0x1d4>
+  if(copyout(pagetable, sp, (char *)ustack, (argc+1)*sizeof(uint64)) < 0)
+    80003b70:	e9040613          	addi	a2,s0,-368
+    80003b74:	85ca                	mv	a1,s2
+    80003b76:	855a                	mv	a0,s6
+    80003b78:	e61fc0ef          	jal	800009d8 <copyout>
+    80003b7c:	0e054263          	bltz	a0,80003c60 <exec+0x36c>
+  p->trapframe->a1 = sp;
+    80003b80:	058ab783          	ld	a5,88(s5) # 1058 <_entry-0x7fffefa8>
+    80003b84:	0727bc23          	sd	s2,120(a5)
+  for(last=s=path; *s; s++)
+    80003b88:	df843783          	ld	a5,-520(s0)
+    80003b8c:	0007c703          	lbu	a4,0(a5)
+    80003b90:	cf11                	beqz	a4,80003bac <exec+0x2b8>
+    80003b92:	0785                	addi	a5,a5,1
+    if(*s == '/')
+    80003b94:	02f00693          	li	a3,47
+    80003b98:	a039                	j	80003ba6 <exec+0x2b2>
+      last = s+1;
+    80003b9a:	def43c23          	sd	a5,-520(s0)
+  for(last=s=path; *s; s++)
+    80003b9e:	0785                	addi	a5,a5,1
+    80003ba0:	fff7c703          	lbu	a4,-1(a5)
+    80003ba4:	c701                	beqz	a4,80003bac <exec+0x2b8>
+    if(*s == '/')
+    80003ba6:	fed71ce3          	bne	a4,a3,80003b9e <exec+0x2aa>
+    80003baa:	bfc5                	j	80003b9a <exec+0x2a6>
+  safestrcpy(p->name, last, sizeof(p->name));
+    80003bac:	4641                	li	a2,16
+    80003bae:	df843583          	ld	a1,-520(s0)
+    80003bb2:	158a8513          	addi	a0,s5,344
+    80003bb6:	ed6fc0ef          	jal	8000028c <safestrcpy>
+  oldpagetable = p->pagetable;
+    80003bba:	050ab503          	ld	a0,80(s5)
+  p->pagetable = pagetable;
+    80003bbe:	056ab823          	sd	s6,80(s5)
+  p->sz = sz;
+    80003bc2:	e0843783          	ld	a5,-504(s0)
+    80003bc6:	04fab423          	sd	a5,72(s5)
+  p->trapframe->epc = elf.entry;  // initial program counter = main
+    80003bca:	058ab783          	ld	a5,88(s5)
+    80003bce:	e6843703          	ld	a4,-408(s0)
+    80003bd2:	ef98                	sd	a4,24(a5)
+  p->trapframe->sp = sp; // initial stack pointer
+    80003bd4:	058ab783          	ld	a5,88(s5)
+    80003bd8:	0327b823          	sd	s2,48(a5)
+  proc_freepagetable(oldpagetable, oldsz);
+    80003bdc:	85e6                	mv	a1,s9
+    80003bde:	ab4fd0ef          	jal	80000e92 <proc_freepagetable>
+  return argc; // this ends up in a0, the first argument to main(argc, argv)
+    80003be2:	0004851b          	sext.w	a0,s1
+    80003be6:	79be                	ld	s3,488(sp)
+    80003be8:	7a1e                	ld	s4,480(sp)
+    80003bea:	6afe                	ld	s5,472(sp)
+    80003bec:	6b5e                	ld	s6,464(sp)
+    80003bee:	6bbe                	ld	s7,456(sp)
+    80003bf0:	6c1e                	ld	s8,448(sp)
+    80003bf2:	7cfa                	ld	s9,440(sp)
+    80003bf4:	7d5a                	ld	s10,432(sp)
+    80003bf6:	b3b5                	j	80003962 <exec+0x6e>
+    80003bf8:	e1243423          	sd	s2,-504(s0)
+    80003bfc:	7dba                	ld	s11,424(sp)
+    80003bfe:	a035                	j	80003c2a <exec+0x336>
+    80003c00:	e1243423          	sd	s2,-504(s0)
+    80003c04:	7dba                	ld	s11,424(sp)
+    80003c06:	a015                	j	80003c2a <exec+0x336>
+    80003c08:	e1243423          	sd	s2,-504(s0)
+    80003c0c:	7dba                	ld	s11,424(sp)
+    80003c0e:	a831                	j	80003c2a <exec+0x336>
+    80003c10:	e1243423          	sd	s2,-504(s0)
+    80003c14:	7dba                	ld	s11,424(sp)
+    80003c16:	a811                	j	80003c2a <exec+0x336>
+    80003c18:	e1243423          	sd	s2,-504(s0)
+    80003c1c:	7dba                	ld	s11,424(sp)
+    80003c1e:	a031                	j	80003c2a <exec+0x336>
+  ip = 0;
+    80003c20:	4a01                	li	s4,0
+    80003c22:	a021                	j	80003c2a <exec+0x336>
+    80003c24:	4a01                	li	s4,0
+  if(pagetable)
+    80003c26:	a011                	j	80003c2a <exec+0x336>
+    80003c28:	7dba                	ld	s11,424(sp)
+    proc_freepagetable(pagetable, sz);
+    80003c2a:	e0843583          	ld	a1,-504(s0)
+    80003c2e:	855a                	mv	a0,s6
+    80003c30:	a62fd0ef          	jal	80000e92 <proc_freepagetable>
+  return -1;
+    80003c34:	557d                	li	a0,-1
+  if(ip){
+    80003c36:	000a1b63          	bnez	s4,80003c4c <exec+0x358>
+    80003c3a:	79be                	ld	s3,488(sp)
+    80003c3c:	7a1e                	ld	s4,480(sp)
+    80003c3e:	6afe                	ld	s5,472(sp)
+    80003c40:	6b5e                	ld	s6,464(sp)
+    80003c42:	6bbe                	ld	s7,456(sp)
+    80003c44:	6c1e                	ld	s8,448(sp)
+    80003c46:	7cfa                	ld	s9,440(sp)
+    80003c48:	7d5a                	ld	s10,432(sp)
+    80003c4a:	bb21                	j	80003962 <exec+0x6e>
+    80003c4c:	79be                	ld	s3,488(sp)
+    80003c4e:	6afe                	ld	s5,472(sp)
+    80003c50:	6b5e                	ld	s6,464(sp)
+    80003c52:	6bbe                	ld	s7,456(sp)
+    80003c54:	6c1e                	ld	s8,448(sp)
+    80003c56:	7cfa                	ld	s9,440(sp)
+    80003c58:	7d5a                	ld	s10,432(sp)
+    80003c5a:	b9ed                	j	80003954 <exec+0x60>
+    80003c5c:	6b5e                	ld	s6,464(sp)
+    80003c5e:	b9dd                	j	80003954 <exec+0x60>
+  sz = sz1;
+    80003c60:	e0843983          	ld	s3,-504(s0)
+    80003c64:	b595                	j	80003ac8 <exec+0x1d4>
+
+0000000080003c66 <argfd>:
+    80003c66:	7179                	addi	sp,sp,-48
+    80003c68:	f406                	sd	ra,40(sp)
+    80003c6a:	f022                	sd	s0,32(sp)
+    80003c6c:	ec26                	sd	s1,24(sp)
+    80003c6e:	e84a                	sd	s2,16(sp)
+    80003c70:	1800                	addi	s0,sp,48
+    80003c72:	892e                	mv	s2,a1
+    80003c74:	84b2                	mv	s1,a2
+    80003c76:	fdc40593          	addi	a1,s0,-36
+    80003c7a:	fa1fd0ef          	jal	80001c1a <argint>
+    80003c7e:	fdc42703          	lw	a4,-36(s0)
+    80003c82:	47bd                	li	a5,15
+    80003c84:	02e7e963          	bltu	a5,a4,80003cb6 <argfd+0x50>
+    80003c88:	8defd0ef          	jal	80000d66 <myproc>
+    80003c8c:	fdc42703          	lw	a4,-36(s0)
+    80003c90:	01a70793          	addi	a5,a4,26
+    80003c94:	078e                	slli	a5,a5,0x3
+    80003c96:	953e                	add	a0,a0,a5
+    80003c98:	611c                	ld	a5,0(a0)
+    80003c9a:	c385                	beqz	a5,80003cba <argfd+0x54>
+    80003c9c:	00090463          	beqz	s2,80003ca4 <argfd+0x3e>
+    80003ca0:	00e92023          	sw	a4,0(s2)
+    80003ca4:	4501                	li	a0,0
+    80003ca6:	c091                	beqz	s1,80003caa <argfd+0x44>
+    80003ca8:	e09c                	sd	a5,0(s1)
+    80003caa:	70a2                	ld	ra,40(sp)
+    80003cac:	7402                	ld	s0,32(sp)
+    80003cae:	64e2                	ld	s1,24(sp)
+    80003cb0:	6942                	ld	s2,16(sp)
+    80003cb2:	6145                	addi	sp,sp,48
+    80003cb4:	8082                	ret
+    80003cb6:	557d                	li	a0,-1
+    80003cb8:	bfcd                	j	80003caa <argfd+0x44>
+    80003cba:	557d                	li	a0,-1
+    80003cbc:	b7fd                	j	80003caa <argfd+0x44>
+
+0000000080003cbe <fdalloc>:
+    80003cbe:	1101                	addi	sp,sp,-32
+    80003cc0:	ec06                	sd	ra,24(sp)
+    80003cc2:	e822                	sd	s0,16(sp)
+    80003cc4:	e426                	sd	s1,8(sp)
+    80003cc6:	1000                	addi	s0,sp,32
+    80003cc8:	84aa                	mv	s1,a0
+    80003cca:	89cfd0ef          	jal	80000d66 <myproc>
+    80003cce:	862a                	mv	a2,a0
+    80003cd0:	0d050793          	addi	a5,a0,208
+    80003cd4:	4501                	li	a0,0
+    80003cd6:	46c1                	li	a3,16
+    80003cd8:	6398                	ld	a4,0(a5)
+    80003cda:	cb19                	beqz	a4,80003cf0 <fdalloc+0x32>
+    80003cdc:	2505                	addiw	a0,a0,1
+    80003cde:	07a1                	addi	a5,a5,8
+    80003ce0:	fed51ce3          	bne	a0,a3,80003cd8 <fdalloc+0x1a>
+    80003ce4:	557d                	li	a0,-1
+    80003ce6:	60e2                	ld	ra,24(sp)
+    80003ce8:	6442                	ld	s0,16(sp)
+    80003cea:	64a2                	ld	s1,8(sp)
+    80003cec:	6105                	addi	sp,sp,32
+    80003cee:	8082                	ret
+    80003cf0:	01a50793          	addi	a5,a0,26
+    80003cf4:	078e                	slli	a5,a5,0x3
+    80003cf6:	963e                	add	a2,a2,a5
+    80003cf8:	e204                	sd	s1,0(a2)
+    80003cfa:	b7f5                	j	80003ce6 <fdalloc+0x28>
+
+0000000080003cfc <create>:
+    80003cfc:	715d                	addi	sp,sp,-80
+    80003cfe:	e486                	sd	ra,72(sp)
+    80003d00:	e0a2                	sd	s0,64(sp)
+    80003d02:	fc26                	sd	s1,56(sp)
+    80003d04:	f84a                	sd	s2,48(sp)
+    80003d06:	f44e                	sd	s3,40(sp)
+    80003d08:	ec56                	sd	s5,24(sp)
+    80003d0a:	e85a                	sd	s6,16(sp)
+    80003d0c:	0880                	addi	s0,sp,80
+    80003d0e:	8b2e                	mv	s6,a1
+    80003d10:	89b2                	mv	s3,a2
+    80003d12:	8936                	mv	s2,a3
+    80003d14:	fb040593          	addi	a1,s0,-80
+    80003d18:	822ff0ef          	jal	80002d3a <nameiparent>
+    80003d1c:	84aa                	mv	s1,a0
+    80003d1e:	10050a63          	beqz	a0,80003e32 <create+0x136>
+    80003d22:	925fe0ef          	jal	80002646 <ilock>
+    80003d26:	4601                	li	a2,0
+    80003d28:	fb040593          	addi	a1,s0,-80
+    80003d2c:	8526                	mv	a0,s1
+    80003d2e:	d8dfe0ef          	jal	80002aba <dirlookup>
+    80003d32:	8aaa                	mv	s5,a0
+    80003d34:	c129                	beqz	a0,80003d76 <create+0x7a>
+    80003d36:	8526                	mv	a0,s1
+    80003d38:	b19fe0ef          	jal	80002850 <iunlockput>
+    80003d3c:	8556                	mv	a0,s5
+    80003d3e:	909fe0ef          	jal	80002646 <ilock>
+    80003d42:	4789                	li	a5,2
+    80003d44:	02fb1463          	bne	s6,a5,80003d6c <create+0x70>
+    80003d48:	044ad783          	lhu	a5,68(s5)
+    80003d4c:	37f9                	addiw	a5,a5,-2
+    80003d4e:	17c2                	slli	a5,a5,0x30
+    80003d50:	93c1                	srli	a5,a5,0x30
+    80003d52:	4705                	li	a4,1
+    80003d54:	00f76c63          	bltu	a4,a5,80003d6c <create+0x70>
+    80003d58:	8556                	mv	a0,s5
+    80003d5a:	60a6                	ld	ra,72(sp)
+    80003d5c:	6406                	ld	s0,64(sp)
+    80003d5e:	74e2                	ld	s1,56(sp)
+    80003d60:	7942                	ld	s2,48(sp)
+    80003d62:	79a2                	ld	s3,40(sp)
+    80003d64:	6ae2                	ld	s5,24(sp)
+    80003d66:	6b42                	ld	s6,16(sp)
+    80003d68:	6161                	addi	sp,sp,80
+    80003d6a:	8082                	ret
+    80003d6c:	8556                	mv	a0,s5
+    80003d6e:	ae3fe0ef          	jal	80002850 <iunlockput>
+    80003d72:	4a81                	li	s5,0
+    80003d74:	b7d5                	j	80003d58 <create+0x5c>
+    80003d76:	f052                	sd	s4,32(sp)
+    80003d78:	85da                	mv	a1,s6
+    80003d7a:	4088                	lw	a0,0(s1)
+    80003d7c:	f5afe0ef          	jal	800024d6 <ialloc>
+    80003d80:	8a2a                	mv	s4,a0
+    80003d82:	cd15                	beqz	a0,80003dbe <create+0xc2>
+    80003d84:	8c3fe0ef          	jal	80002646 <ilock>
+    80003d88:	053a1323          	sh	s3,70(s4)
+    80003d8c:	052a1423          	sh	s2,72(s4)
+    80003d90:	4905                	li	s2,1
+    80003d92:	052a1523          	sh	s2,74(s4)
+    80003d96:	8552                	mv	a0,s4
+    80003d98:	ffafe0ef          	jal	80002592 <iupdate>
+    80003d9c:	032b0763          	beq	s6,s2,80003dca <create+0xce>
+    80003da0:	004a2603          	lw	a2,4(s4)
+    80003da4:	fb040593          	addi	a1,s0,-80
+    80003da8:	8526                	mv	a0,s1
+    80003daa:	eddfe0ef          	jal	80002c86 <dirlink>
+    80003dae:	06054563          	bltz	a0,80003e18 <create+0x11c>
+    80003db2:	8526                	mv	a0,s1
+    80003db4:	a9dfe0ef          	jal	80002850 <iunlockput>
+    80003db8:	8ad2                	mv	s5,s4
+    80003dba:	7a02                	ld	s4,32(sp)
+    80003dbc:	bf71                	j	80003d58 <create+0x5c>
+    80003dbe:	8526                	mv	a0,s1
+    80003dc0:	a91fe0ef          	jal	80002850 <iunlockput>
+    80003dc4:	8ad2                	mv	s5,s4
+    80003dc6:	7a02                	ld	s4,32(sp)
+    80003dc8:	bf41                	j	80003d58 <create+0x5c>
+    80003dca:	004a2603          	lw	a2,4(s4)
+    80003dce:	00003597          	auipc	a1,0x3
+    80003dd2:	7f258593          	addi	a1,a1,2034 # 800075c0 <etext+0x5c0>
+    80003dd6:	8552                	mv	a0,s4
+    80003dd8:	eaffe0ef          	jal	80002c86 <dirlink>
+    80003ddc:	02054e63          	bltz	a0,80003e18 <create+0x11c>
+    80003de0:	40d0                	lw	a2,4(s1)
+    80003de2:	00003597          	auipc	a1,0x3
+    80003de6:	7e658593          	addi	a1,a1,2022 # 800075c8 <etext+0x5c8>
+    80003dea:	8552                	mv	a0,s4
+    80003dec:	e9bfe0ef          	jal	80002c86 <dirlink>
+    80003df0:	02054463          	bltz	a0,80003e18 <create+0x11c>
+    80003df4:	004a2603          	lw	a2,4(s4)
+    80003df8:	fb040593          	addi	a1,s0,-80
+    80003dfc:	8526                	mv	a0,s1
+    80003dfe:	e89fe0ef          	jal	80002c86 <dirlink>
+    80003e02:	00054b63          	bltz	a0,80003e18 <create+0x11c>
+    80003e06:	04a4d783          	lhu	a5,74(s1)
+    80003e0a:	2785                	addiw	a5,a5,1
+    80003e0c:	04f49523          	sh	a5,74(s1)
+    80003e10:	8526                	mv	a0,s1
+    80003e12:	f80fe0ef          	jal	80002592 <iupdate>
+    80003e16:	bf71                	j	80003db2 <create+0xb6>
+    80003e18:	040a1523          	sh	zero,74(s4)
+    80003e1c:	8552                	mv	a0,s4
+    80003e1e:	f74fe0ef          	jal	80002592 <iupdate>
+    80003e22:	8552                	mv	a0,s4
+    80003e24:	a2dfe0ef          	jal	80002850 <iunlockput>
+    80003e28:	8526                	mv	a0,s1
+    80003e2a:	a27fe0ef          	jal	80002850 <iunlockput>
+    80003e2e:	7a02                	ld	s4,32(sp)
+    80003e30:	b725                	j	80003d58 <create+0x5c>
+    80003e32:	8aaa                	mv	s5,a0
+    80003e34:	b715                	j	80003d58 <create+0x5c>
+
+0000000080003e36 <sys_dup>:
+    80003e36:	7179                	addi	sp,sp,-48
+    80003e38:	f406                	sd	ra,40(sp)
+    80003e3a:	f022                	sd	s0,32(sp)
+    80003e3c:	1800                	addi	s0,sp,48
+    80003e3e:	fd840613          	addi	a2,s0,-40
+    80003e42:	4581                	li	a1,0
+    80003e44:	4501                	li	a0,0
+    80003e46:	e21ff0ef          	jal	80003c66 <argfd>
+    80003e4a:	57fd                	li	a5,-1
+    80003e4c:	02054363          	bltz	a0,80003e72 <sys_dup+0x3c>
+    80003e50:	ec26                	sd	s1,24(sp)
+    80003e52:	e84a                	sd	s2,16(sp)
+    80003e54:	fd843903          	ld	s2,-40(s0)
+    80003e58:	854a                	mv	a0,s2
+    80003e5a:	e65ff0ef          	jal	80003cbe <fdalloc>
+    80003e5e:	84aa                	mv	s1,a0
+    80003e60:	57fd                	li	a5,-1
+    80003e62:	00054d63          	bltz	a0,80003e7c <sys_dup+0x46>
+    80003e66:	854a                	mv	a0,s2
+    80003e68:	c48ff0ef          	jal	800032b0 <filedup>
+    80003e6c:	87a6                	mv	a5,s1
+    80003e6e:	64e2                	ld	s1,24(sp)
+    80003e70:	6942                	ld	s2,16(sp)
+    80003e72:	853e                	mv	a0,a5
+    80003e74:	70a2                	ld	ra,40(sp)
+    80003e76:	7402                	ld	s0,32(sp)
+    80003e78:	6145                	addi	sp,sp,48
+    80003e7a:	8082                	ret
+    80003e7c:	64e2                	ld	s1,24(sp)
+    80003e7e:	6942                	ld	s2,16(sp)
+    80003e80:	bfcd                	j	80003e72 <sys_dup+0x3c>
+
+0000000080003e82 <sys_read>:
+    80003e82:	7179                	addi	sp,sp,-48
+    80003e84:	f406                	sd	ra,40(sp)
+    80003e86:	f022                	sd	s0,32(sp)
+    80003e88:	1800                	addi	s0,sp,48
+    80003e8a:	fd840593          	addi	a1,s0,-40
+    80003e8e:	4505                	li	a0,1
+    80003e90:	da7fd0ef          	jal	80001c36 <argaddr>
+    80003e94:	fe440593          	addi	a1,s0,-28
+    80003e98:	4509                	li	a0,2
+    80003e9a:	d81fd0ef          	jal	80001c1a <argint>
+    80003e9e:	fe840613          	addi	a2,s0,-24
+    80003ea2:	4581                	li	a1,0
+    80003ea4:	4501                	li	a0,0
+    80003ea6:	dc1ff0ef          	jal	80003c66 <argfd>
+    80003eaa:	87aa                	mv	a5,a0
+    80003eac:	557d                	li	a0,-1
+    80003eae:	0007ca63          	bltz	a5,80003ec2 <sys_read+0x40>
+    80003eb2:	fe442603          	lw	a2,-28(s0)
+    80003eb6:	fd843583          	ld	a1,-40(s0)
+    80003eba:	fe843503          	ld	a0,-24(s0)
+    80003ebe:	d58ff0ef          	jal	80003416 <fileread>
+    80003ec2:	70a2                	ld	ra,40(sp)
+    80003ec4:	7402                	ld	s0,32(sp)
+    80003ec6:	6145                	addi	sp,sp,48
+    80003ec8:	8082                	ret
+
+0000000080003eca <sys_write>:
+    80003eca:	7179                	addi	sp,sp,-48
+    80003ecc:	f406                	sd	ra,40(sp)
+    80003ece:	f022                	sd	s0,32(sp)
+    80003ed0:	1800                	addi	s0,sp,48
+    80003ed2:	fd840593          	addi	a1,s0,-40
+    80003ed6:	4505                	li	a0,1
+    80003ed8:	d5ffd0ef          	jal	80001c36 <argaddr>
+    80003edc:	fe440593          	addi	a1,s0,-28
+    80003ee0:	4509                	li	a0,2
+    80003ee2:	d39fd0ef          	jal	80001c1a <argint>
+    80003ee6:	fe840613          	addi	a2,s0,-24
+    80003eea:	4581                	li	a1,0
+    80003eec:	4501                	li	a0,0
+    80003eee:	d79ff0ef          	jal	80003c66 <argfd>
+    80003ef2:	87aa                	mv	a5,a0
+    80003ef4:	557d                	li	a0,-1
+    80003ef6:	0007ca63          	bltz	a5,80003f0a <sys_write+0x40>
+    80003efa:	fe442603          	lw	a2,-28(s0)
+    80003efe:	fd843583          	ld	a1,-40(s0)
+    80003f02:	fe843503          	ld	a0,-24(s0)
+    80003f06:	dceff0ef          	jal	800034d4 <filewrite>
+    80003f0a:	70a2                	ld	ra,40(sp)
+    80003f0c:	7402                	ld	s0,32(sp)
+    80003f0e:	6145                	addi	sp,sp,48
+    80003f10:	8082                	ret
+
+0000000080003f12 <sys_close>:
+    80003f12:	1101                	addi	sp,sp,-32
+    80003f14:	ec06                	sd	ra,24(sp)
+    80003f16:	e822                	sd	s0,16(sp)
+    80003f18:	1000                	addi	s0,sp,32
+    80003f1a:	fe040613          	addi	a2,s0,-32
+    80003f1e:	fec40593          	addi	a1,s0,-20
+    80003f22:	4501                	li	a0,0
+    80003f24:	d43ff0ef          	jal	80003c66 <argfd>
+    80003f28:	57fd                	li	a5,-1
+    80003f2a:	02054063          	bltz	a0,80003f4a <sys_close+0x38>
+    80003f2e:	e39fc0ef          	jal	80000d66 <myproc>
+    80003f32:	fec42783          	lw	a5,-20(s0)
+    80003f36:	07e9                	addi	a5,a5,26
+    80003f38:	078e                	slli	a5,a5,0x3
+    80003f3a:	953e                	add	a0,a0,a5
+    80003f3c:	00053023          	sd	zero,0(a0)
+    80003f40:	fe043503          	ld	a0,-32(s0)
+    80003f44:	bb2ff0ef          	jal	800032f6 <fileclose>
+    80003f48:	4781                	li	a5,0
+    80003f4a:	853e                	mv	a0,a5
+    80003f4c:	60e2                	ld	ra,24(sp)
+    80003f4e:	6442                	ld	s0,16(sp)
+    80003f50:	6105                	addi	sp,sp,32
+    80003f52:	8082                	ret
+
+0000000080003f54 <sys_fstat>:
+    80003f54:	1101                	addi	sp,sp,-32
+    80003f56:	ec06                	sd	ra,24(sp)
+    80003f58:	e822                	sd	s0,16(sp)
+    80003f5a:	1000                	addi	s0,sp,32
+    80003f5c:	fe040593          	addi	a1,s0,-32
+    80003f60:	4505                	li	a0,1
+    80003f62:	cd5fd0ef          	jal	80001c36 <argaddr>
+    80003f66:	fe840613          	addi	a2,s0,-24
+    80003f6a:	4581                	li	a1,0
+    80003f6c:	4501                	li	a0,0
+    80003f6e:	cf9ff0ef          	jal	80003c66 <argfd>
+    80003f72:	87aa                	mv	a5,a0
+    80003f74:	557d                	li	a0,-1
+    80003f76:	0007c863          	bltz	a5,80003f86 <sys_fstat+0x32>
+    80003f7a:	fe043583          	ld	a1,-32(s0)
+    80003f7e:	fe843503          	ld	a0,-24(s0)
+    80003f82:	c36ff0ef          	jal	800033b8 <filestat>
+    80003f86:	60e2                	ld	ra,24(sp)
+    80003f88:	6442                	ld	s0,16(sp)
+    80003f8a:	6105                	addi	sp,sp,32
+    80003f8c:	8082                	ret
+
+0000000080003f8e <sys_link>:
+    80003f8e:	7169                	addi	sp,sp,-304
+    80003f90:	f606                	sd	ra,296(sp)
+    80003f92:	f222                	sd	s0,288(sp)
+    80003f94:	1a00                	addi	s0,sp,304
+    80003f96:	08000613          	li	a2,128
+    80003f9a:	ed040593          	addi	a1,s0,-304
+    80003f9e:	4501                	li	a0,0
+    80003fa0:	cb3fd0ef          	jal	80001c52 <argstr>
+    80003fa4:	57fd                	li	a5,-1
+    80003fa6:	0c054e63          	bltz	a0,80004082 <sys_link+0xf4>
+    80003faa:	08000613          	li	a2,128
+    80003fae:	f5040593          	addi	a1,s0,-176
+    80003fb2:	4505                	li	a0,1
+    80003fb4:	c9ffd0ef          	jal	80001c52 <argstr>
+    80003fb8:	57fd                	li	a5,-1
+    80003fba:	0c054463          	bltz	a0,80004082 <sys_link+0xf4>
+    80003fbe:	ee26                	sd	s1,280(sp)
+    80003fc0:	f1dfe0ef          	jal	80002edc <begin_op>
+    80003fc4:	ed040513          	addi	a0,s0,-304
+    80003fc8:	d59fe0ef          	jal	80002d20 <namei>
+    80003fcc:	84aa                	mv	s1,a0
+    80003fce:	c53d                	beqz	a0,8000403c <sys_link+0xae>
+    80003fd0:	e76fe0ef          	jal	80002646 <ilock>
+    80003fd4:	04449703          	lh	a4,68(s1)
+    80003fd8:	4785                	li	a5,1
+    80003fda:	06f70663          	beq	a4,a5,80004046 <sys_link+0xb8>
+    80003fde:	ea4a                	sd	s2,272(sp)
+    80003fe0:	04a4d783          	lhu	a5,74(s1)
+    80003fe4:	2785                	addiw	a5,a5,1
+    80003fe6:	04f49523          	sh	a5,74(s1)
+    80003fea:	8526                	mv	a0,s1
+    80003fec:	da6fe0ef          	jal	80002592 <iupdate>
+    80003ff0:	8526                	mv	a0,s1
+    80003ff2:	f02fe0ef          	jal	800026f4 <iunlock>
+    80003ff6:	fd040593          	addi	a1,s0,-48
+    80003ffa:	f5040513          	addi	a0,s0,-176
+    80003ffe:	d3dfe0ef          	jal	80002d3a <nameiparent>
+    80004002:	892a                	mv	s2,a0
+    80004004:	cd21                	beqz	a0,8000405c <sys_link+0xce>
+    80004006:	e40fe0ef          	jal	80002646 <ilock>
+    8000400a:	00092703          	lw	a4,0(s2)
+    8000400e:	409c                	lw	a5,0(s1)
+    80004010:	04f71363          	bne	a4,a5,80004056 <sys_link+0xc8>
+    80004014:	40d0                	lw	a2,4(s1)
+    80004016:	fd040593          	addi	a1,s0,-48
+    8000401a:	854a                	mv	a0,s2
+    8000401c:	c6bfe0ef          	jal	80002c86 <dirlink>
+    80004020:	02054b63          	bltz	a0,80004056 <sys_link+0xc8>
+    80004024:	854a                	mv	a0,s2
+    80004026:	82bfe0ef          	jal	80002850 <iunlockput>
+    8000402a:	8526                	mv	a0,s1
+    8000402c:	f9cfe0ef          	jal	800027c8 <iput>
+    80004030:	f17fe0ef          	jal	80002f46 <end_op>
+    80004034:	4781                	li	a5,0
+    80004036:	64f2                	ld	s1,280(sp)
+    80004038:	6952                	ld	s2,272(sp)
+    8000403a:	a0a1                	j	80004082 <sys_link+0xf4>
+    8000403c:	f0bfe0ef          	jal	80002f46 <end_op>
+    80004040:	57fd                	li	a5,-1
+    80004042:	64f2                	ld	s1,280(sp)
+    80004044:	a83d                	j	80004082 <sys_link+0xf4>
+    80004046:	8526                	mv	a0,s1
+    80004048:	809fe0ef          	jal	80002850 <iunlockput>
+    8000404c:	efbfe0ef          	jal	80002f46 <end_op>
+    80004050:	57fd                	li	a5,-1
+    80004052:	64f2                	ld	s1,280(sp)
+    80004054:	a03d                	j	80004082 <sys_link+0xf4>
+    80004056:	854a                	mv	a0,s2
+    80004058:	ff8fe0ef          	jal	80002850 <iunlockput>
+    8000405c:	8526                	mv	a0,s1
+    8000405e:	de8fe0ef          	jal	80002646 <ilock>
+    80004062:	04a4d783          	lhu	a5,74(s1)
+    80004066:	37fd                	addiw	a5,a5,-1
+    80004068:	04f49523          	sh	a5,74(s1)
+    8000406c:	8526                	mv	a0,s1
+    8000406e:	d24fe0ef          	jal	80002592 <iupdate>
+    80004072:	8526                	mv	a0,s1
+    80004074:	fdcfe0ef          	jal	80002850 <iunlockput>
+    80004078:	ecffe0ef          	jal	80002f46 <end_op>
+    8000407c:	57fd                	li	a5,-1
+    8000407e:	64f2                	ld	s1,280(sp)
+    80004080:	6952                	ld	s2,272(sp)
+    80004082:	853e                	mv	a0,a5
+    80004084:	70b2                	ld	ra,296(sp)
+    80004086:	7412                	ld	s0,288(sp)
+    80004088:	6155                	addi	sp,sp,304
+    8000408a:	8082                	ret
+
+000000008000408c <sys_unlink>:
+    8000408c:	7151                	addi	sp,sp,-240
+    8000408e:	f586                	sd	ra,232(sp)
+    80004090:	f1a2                	sd	s0,224(sp)
+    80004092:	1980                	addi	s0,sp,240
+    80004094:	08000613          	li	a2,128
+    80004098:	f3040593          	addi	a1,s0,-208
+    8000409c:	4501                	li	a0,0
+    8000409e:	bb5fd0ef          	jal	80001c52 <argstr>
+    800040a2:	16054063          	bltz	a0,80004202 <sys_unlink+0x176>
+    800040a6:	eda6                	sd	s1,216(sp)
+    800040a8:	e35fe0ef          	jal	80002edc <begin_op>
+    800040ac:	fb040593          	addi	a1,s0,-80
+    800040b0:	f3040513          	addi	a0,s0,-208
+    800040b4:	c87fe0ef          	jal	80002d3a <nameiparent>
+    800040b8:	84aa                	mv	s1,a0
+    800040ba:	c945                	beqz	a0,8000416a <sys_unlink+0xde>
+    800040bc:	d8afe0ef          	jal	80002646 <ilock>
+    800040c0:	00003597          	auipc	a1,0x3
+    800040c4:	50058593          	addi	a1,a1,1280 # 800075c0 <etext+0x5c0>
+    800040c8:	fb040513          	addi	a0,s0,-80
+    800040cc:	9d9fe0ef          	jal	80002aa4 <namecmp>
+    800040d0:	10050e63          	beqz	a0,800041ec <sys_unlink+0x160>
+    800040d4:	00003597          	auipc	a1,0x3
+    800040d8:	4f458593          	addi	a1,a1,1268 # 800075c8 <etext+0x5c8>
+    800040dc:	fb040513          	addi	a0,s0,-80
+    800040e0:	9c5fe0ef          	jal	80002aa4 <namecmp>
+    800040e4:	10050463          	beqz	a0,800041ec <sys_unlink+0x160>
+    800040e8:	e9ca                	sd	s2,208(sp)
+    800040ea:	f2c40613          	addi	a2,s0,-212
+    800040ee:	fb040593          	addi	a1,s0,-80
+    800040f2:	8526                	mv	a0,s1
+    800040f4:	9c7fe0ef          	jal	80002aba <dirlookup>
+    800040f8:	892a                	mv	s2,a0
+    800040fa:	0e050863          	beqz	a0,800041ea <sys_unlink+0x15e>
+    800040fe:	d48fe0ef          	jal	80002646 <ilock>
+    80004102:	04a91783          	lh	a5,74(s2)
+    80004106:	06f05763          	blez	a5,80004174 <sys_unlink+0xe8>
+    8000410a:	04491703          	lh	a4,68(s2)
+    8000410e:	4785                	li	a5,1
+    80004110:	06f70963          	beq	a4,a5,80004182 <sys_unlink+0xf6>
+    80004114:	4641                	li	a2,16
+    80004116:	4581                	li	a1,0
+    80004118:	fc040513          	addi	a0,s0,-64
+    8000411c:	832fc0ef          	jal	8000014e <memset>
+    80004120:	4741                	li	a4,16
+    80004122:	f2c42683          	lw	a3,-212(s0)
+    80004126:	fc040613          	addi	a2,s0,-64
+    8000412a:	4581                	li	a1,0
+    8000412c:	8526                	mv	a0,s1
+    8000412e:	869fe0ef          	jal	80002996 <writei>
+    80004132:	47c1                	li	a5,16
+    80004134:	08f51b63          	bne	a0,a5,800041ca <sys_unlink+0x13e>
+    80004138:	04491703          	lh	a4,68(s2)
+    8000413c:	4785                	li	a5,1
+    8000413e:	08f70d63          	beq	a4,a5,800041d8 <sys_unlink+0x14c>
+    80004142:	8526                	mv	a0,s1
+    80004144:	f0cfe0ef          	jal	80002850 <iunlockput>
+    80004148:	04a95783          	lhu	a5,74(s2)
+    8000414c:	37fd                	addiw	a5,a5,-1
+    8000414e:	04f91523          	sh	a5,74(s2)
+    80004152:	854a                	mv	a0,s2
+    80004154:	c3efe0ef          	jal	80002592 <iupdate>
+    80004158:	854a                	mv	a0,s2
+    8000415a:	ef6fe0ef          	jal	80002850 <iunlockput>
+    8000415e:	de9fe0ef          	jal	80002f46 <end_op>
+    80004162:	4501                	li	a0,0
+    80004164:	64ee                	ld	s1,216(sp)
+    80004166:	694e                	ld	s2,208(sp)
+    80004168:	a849                	j	800041fa <sys_unlink+0x16e>
+    8000416a:	dddfe0ef          	jal	80002f46 <end_op>
+    8000416e:	557d                	li	a0,-1
+    80004170:	64ee                	ld	s1,216(sp)
+    80004172:	a061                	j	800041fa <sys_unlink+0x16e>
+    80004174:	e5ce                	sd	s3,200(sp)
+    80004176:	00003517          	auipc	a0,0x3
+    8000417a:	45a50513          	addi	a0,a0,1114 # 800075d0 <etext+0x5d0>
+    8000417e:	274010ef          	jal	800053f2 <panic>
+    80004182:	04c92703          	lw	a4,76(s2)
+    80004186:	02000793          	li	a5,32
+    8000418a:	f8e7f5e3          	bgeu	a5,a4,80004114 <sys_unlink+0x88>
+    8000418e:	e5ce                	sd	s3,200(sp)
+    80004190:	02000993          	li	s3,32
+    80004194:	4741                	li	a4,16
+    80004196:	86ce                	mv	a3,s3
+    80004198:	f1840613          	addi	a2,s0,-232
+    8000419c:	4581                	li	a1,0
+    8000419e:	854a                	mv	a0,s2
+    800041a0:	efafe0ef          	jal	8000289a <readi>
+    800041a4:	47c1                	li	a5,16
+    800041a6:	00f51c63          	bne	a0,a5,800041be <sys_unlink+0x132>
+    800041aa:	f1845783          	lhu	a5,-232(s0)
+    800041ae:	efa1                	bnez	a5,80004206 <sys_unlink+0x17a>
+    800041b0:	29c1                	addiw	s3,s3,16
+    800041b2:	04c92783          	lw	a5,76(s2)
+    800041b6:	fcf9efe3          	bltu	s3,a5,80004194 <sys_unlink+0x108>
+    800041ba:	69ae                	ld	s3,200(sp)
+    800041bc:	bfa1                	j	80004114 <sys_unlink+0x88>
+    800041be:	00003517          	auipc	a0,0x3
+    800041c2:	42a50513          	addi	a0,a0,1066 # 800075e8 <etext+0x5e8>
+    800041c6:	22c010ef          	jal	800053f2 <panic>
+    800041ca:	e5ce                	sd	s3,200(sp)
+    800041cc:	00003517          	auipc	a0,0x3
+    800041d0:	43450513          	addi	a0,a0,1076 # 80007600 <etext+0x600>
+    800041d4:	21e010ef          	jal	800053f2 <panic>
+    800041d8:	04a4d783          	lhu	a5,74(s1)
+    800041dc:	37fd                	addiw	a5,a5,-1
+    800041de:	04f49523          	sh	a5,74(s1)
+    800041e2:	8526                	mv	a0,s1
+    800041e4:	baefe0ef          	jal	80002592 <iupdate>
+    800041e8:	bfa9                	j	80004142 <sys_unlink+0xb6>
+    800041ea:	694e                	ld	s2,208(sp)
+    800041ec:	8526                	mv	a0,s1
+    800041ee:	e62fe0ef          	jal	80002850 <iunlockput>
+    800041f2:	d55fe0ef          	jal	80002f46 <end_op>
+    800041f6:	557d                	li	a0,-1
+    800041f8:	64ee                	ld	s1,216(sp)
+    800041fa:	70ae                	ld	ra,232(sp)
+    800041fc:	740e                	ld	s0,224(sp)
+    800041fe:	616d                	addi	sp,sp,240
+    80004200:	8082                	ret
+    80004202:	557d                	li	a0,-1
+    80004204:	bfdd                	j	800041fa <sys_unlink+0x16e>
+    80004206:	854a                	mv	a0,s2
+    80004208:	e48fe0ef          	jal	80002850 <iunlockput>
+    8000420c:	694e                	ld	s2,208(sp)
+    8000420e:	69ae                	ld	s3,200(sp)
+    80004210:	bff1                	j	800041ec <sys_unlink+0x160>
+
+0000000080004212 <sys_open>:
+    80004212:	7131                	addi	sp,sp,-192
+    80004214:	fd06                	sd	ra,184(sp)
+    80004216:	f922                	sd	s0,176(sp)
+    80004218:	0180                	addi	s0,sp,192
+    8000421a:	f4c40593          	addi	a1,s0,-180
+    8000421e:	4505                	li	a0,1
+    80004220:	9fbfd0ef          	jal	80001c1a <argint>
+    80004224:	08000613          	li	a2,128
+    80004228:	f5040593          	addi	a1,s0,-176
+    8000422c:	4501                	li	a0,0
+    8000422e:	a25fd0ef          	jal	80001c52 <argstr>
+    80004232:	87aa                	mv	a5,a0
+    80004234:	557d                	li	a0,-1
+    80004236:	0a07c263          	bltz	a5,800042da <sys_open+0xc8>
+    8000423a:	f526                	sd	s1,168(sp)
+    8000423c:	ca1fe0ef          	jal	80002edc <begin_op>
+    80004240:	f4c42783          	lw	a5,-180(s0)
+    80004244:	2007f793          	andi	a5,a5,512
+    80004248:	c3d5                	beqz	a5,800042ec <sys_open+0xda>
+    8000424a:	4681                	li	a3,0
+    8000424c:	4601                	li	a2,0
+    8000424e:	4589                	li	a1,2
+    80004250:	f5040513          	addi	a0,s0,-176
+    80004254:	aa9ff0ef          	jal	80003cfc <create>
+    80004258:	84aa                	mv	s1,a0
+    8000425a:	c541                	beqz	a0,800042e2 <sys_open+0xd0>
+    8000425c:	04449703          	lh	a4,68(s1)
+    80004260:	478d                	li	a5,3
+    80004262:	00f71763          	bne	a4,a5,80004270 <sys_open+0x5e>
+    80004266:	0464d703          	lhu	a4,70(s1)
+    8000426a:	47a5                	li	a5,9
+    8000426c:	0ae7ed63          	bltu	a5,a4,80004326 <sys_open+0x114>
+    80004270:	f14a                	sd	s2,160(sp)
+    80004272:	fe1fe0ef          	jal	80003252 <filealloc>
+    80004276:	892a                	mv	s2,a0
+    80004278:	c179                	beqz	a0,8000433e <sys_open+0x12c>
+    8000427a:	ed4e                	sd	s3,152(sp)
+    8000427c:	a43ff0ef          	jal	80003cbe <fdalloc>
+    80004280:	89aa                	mv	s3,a0
+    80004282:	0a054a63          	bltz	a0,80004336 <sys_open+0x124>
+    80004286:	04449703          	lh	a4,68(s1)
+    8000428a:	478d                	li	a5,3
+    8000428c:	0cf70263          	beq	a4,a5,80004350 <sys_open+0x13e>
+    80004290:	4789                	li	a5,2
+    80004292:	00f92023          	sw	a5,0(s2)
+    80004296:	02092023          	sw	zero,32(s2)
+    8000429a:	00993c23          	sd	s1,24(s2)
+    8000429e:	f4c42783          	lw	a5,-180(s0)
+    800042a2:	0017c713          	xori	a4,a5,1
+    800042a6:	8b05                	andi	a4,a4,1
+    800042a8:	00e90423          	sb	a4,8(s2)
+    800042ac:	0037f713          	andi	a4,a5,3
+    800042b0:	00e03733          	snez	a4,a4
+    800042b4:	00e904a3          	sb	a4,9(s2)
+    800042b8:	4007f793          	andi	a5,a5,1024
+    800042bc:	c791                	beqz	a5,800042c8 <sys_open+0xb6>
+    800042be:	04449703          	lh	a4,68(s1)
+    800042c2:	4789                	li	a5,2
+    800042c4:	08f70d63          	beq	a4,a5,8000435e <sys_open+0x14c>
+    800042c8:	8526                	mv	a0,s1
+    800042ca:	c2afe0ef          	jal	800026f4 <iunlock>
+    800042ce:	c79fe0ef          	jal	80002f46 <end_op>
+    800042d2:	854e                	mv	a0,s3
+    800042d4:	74aa                	ld	s1,168(sp)
+    800042d6:	790a                	ld	s2,160(sp)
+    800042d8:	69ea                	ld	s3,152(sp)
+    800042da:	70ea                	ld	ra,184(sp)
+    800042dc:	744a                	ld	s0,176(sp)
+    800042de:	6129                	addi	sp,sp,192
+    800042e0:	8082                	ret
+    800042e2:	c65fe0ef          	jal	80002f46 <end_op>
+    800042e6:	557d                	li	a0,-1
+    800042e8:	74aa                	ld	s1,168(sp)
+    800042ea:	bfc5                	j	800042da <sys_open+0xc8>
+    800042ec:	f5040513          	addi	a0,s0,-176
+    800042f0:	a31fe0ef          	jal	80002d20 <namei>
+    800042f4:	84aa                	mv	s1,a0
+    800042f6:	c11d                	beqz	a0,8000431c <sys_open+0x10a>
+    800042f8:	b4efe0ef          	jal	80002646 <ilock>
+    800042fc:	04449703          	lh	a4,68(s1)
+    80004300:	4785                	li	a5,1
+    80004302:	f4f71de3          	bne	a4,a5,8000425c <sys_open+0x4a>
+    80004306:	f4c42783          	lw	a5,-180(s0)
+    8000430a:	d3bd                	beqz	a5,80004270 <sys_open+0x5e>
+    8000430c:	8526                	mv	a0,s1
+    8000430e:	d42fe0ef          	jal	80002850 <iunlockput>
+    80004312:	c35fe0ef          	jal	80002f46 <end_op>
+    80004316:	557d                	li	a0,-1
+    80004318:	74aa                	ld	s1,168(sp)
+    8000431a:	b7c1                	j	800042da <sys_open+0xc8>
+    8000431c:	c2bfe0ef          	jal	80002f46 <end_op>
+    80004320:	557d                	li	a0,-1
+    80004322:	74aa                	ld	s1,168(sp)
+    80004324:	bf5d                	j	800042da <sys_open+0xc8>
+    80004326:	8526                	mv	a0,s1
+    80004328:	d28fe0ef          	jal	80002850 <iunlockput>
+    8000432c:	c1bfe0ef          	jal	80002f46 <end_op>
+    80004330:	557d                	li	a0,-1
+    80004332:	74aa                	ld	s1,168(sp)
+    80004334:	b75d                	j	800042da <sys_open+0xc8>
+    80004336:	854a                	mv	a0,s2
+    80004338:	fbffe0ef          	jal	800032f6 <fileclose>
+    8000433c:	69ea                	ld	s3,152(sp)
+    8000433e:	8526                	mv	a0,s1
+    80004340:	d10fe0ef          	jal	80002850 <iunlockput>
+    80004344:	c03fe0ef          	jal	80002f46 <end_op>
+    80004348:	557d                	li	a0,-1
+    8000434a:	74aa                	ld	s1,168(sp)
+    8000434c:	790a                	ld	s2,160(sp)
+    8000434e:	b771                	j	800042da <sys_open+0xc8>
+    80004350:	00f92023          	sw	a5,0(s2)
+    80004354:	04649783          	lh	a5,70(s1)
+    80004358:	02f91223          	sh	a5,36(s2)
+    8000435c:	bf3d                	j	8000429a <sys_open+0x88>
+    8000435e:	8526                	mv	a0,s1
+    80004360:	bd4fe0ef          	jal	80002734 <itrunc>
+    80004364:	b795                	j	800042c8 <sys_open+0xb6>
+
+0000000080004366 <sys_mkdir>:
+    80004366:	7175                	addi	sp,sp,-144
+    80004368:	e506                	sd	ra,136(sp)
+    8000436a:	e122                	sd	s0,128(sp)
+    8000436c:	0900                	addi	s0,sp,144
+    8000436e:	b6ffe0ef          	jal	80002edc <begin_op>
+    80004372:	08000613          	li	a2,128
+    80004376:	f7040593          	addi	a1,s0,-144
+    8000437a:	4501                	li	a0,0
+    8000437c:	8d7fd0ef          	jal	80001c52 <argstr>
+    80004380:	02054363          	bltz	a0,800043a6 <sys_mkdir+0x40>
+    80004384:	4681                	li	a3,0
+    80004386:	4601                	li	a2,0
+    80004388:	4585                	li	a1,1
+    8000438a:	f7040513          	addi	a0,s0,-144
+    8000438e:	96fff0ef          	jal	80003cfc <create>
+    80004392:	c911                	beqz	a0,800043a6 <sys_mkdir+0x40>
+    80004394:	cbcfe0ef          	jal	80002850 <iunlockput>
+    80004398:	baffe0ef          	jal	80002f46 <end_op>
+    8000439c:	4501                	li	a0,0
+    8000439e:	60aa                	ld	ra,136(sp)
+    800043a0:	640a                	ld	s0,128(sp)
+    800043a2:	6149                	addi	sp,sp,144
+    800043a4:	8082                	ret
+    800043a6:	ba1fe0ef          	jal	80002f46 <end_op>
+    800043aa:	557d                	li	a0,-1
+    800043ac:	bfcd                	j	8000439e <sys_mkdir+0x38>
+
+00000000800043ae <sys_mknod>:
+    800043ae:	7135                	addi	sp,sp,-160
+    800043b0:	ed06                	sd	ra,152(sp)
+    800043b2:	e922                	sd	s0,144(sp)
+    800043b4:	1100                	addi	s0,sp,160
+    800043b6:	b27fe0ef          	jal	80002edc <begin_op>
+    800043ba:	f6c40593          	addi	a1,s0,-148
+    800043be:	4505                	li	a0,1
+    800043c0:	85bfd0ef          	jal	80001c1a <argint>
+    800043c4:	f6840593          	addi	a1,s0,-152
+    800043c8:	4509                	li	a0,2
+    800043ca:	851fd0ef          	jal	80001c1a <argint>
+    800043ce:	08000613          	li	a2,128
+    800043d2:	f7040593          	addi	a1,s0,-144
+    800043d6:	4501                	li	a0,0
+    800043d8:	87bfd0ef          	jal	80001c52 <argstr>
+    800043dc:	02054563          	bltz	a0,80004406 <sys_mknod+0x58>
+    800043e0:	f6841683          	lh	a3,-152(s0)
+    800043e4:	f6c41603          	lh	a2,-148(s0)
+    800043e8:	458d                	li	a1,3
+    800043ea:	f7040513          	addi	a0,s0,-144
+    800043ee:	90fff0ef          	jal	80003cfc <create>
+    800043f2:	c911                	beqz	a0,80004406 <sys_mknod+0x58>
+    800043f4:	c5cfe0ef          	jal	80002850 <iunlockput>
+    800043f8:	b4ffe0ef          	jal	80002f46 <end_op>
+    800043fc:	4501                	li	a0,0
+    800043fe:	60ea                	ld	ra,152(sp)
+    80004400:	644a                	ld	s0,144(sp)
+    80004402:	610d                	addi	sp,sp,160
+    80004404:	8082                	ret
+    80004406:	b41fe0ef          	jal	80002f46 <end_op>
+    8000440a:	557d                	li	a0,-1
+    8000440c:	bfcd                	j	800043fe <sys_mknod+0x50>
+
+000000008000440e <sys_chdir>:
+    8000440e:	7135                	addi	sp,sp,-160
+    80004410:	ed06                	sd	ra,152(sp)
+    80004412:	e922                	sd	s0,144(sp)
+    80004414:	e14a                	sd	s2,128(sp)
+    80004416:	1100                	addi	s0,sp,160
+    80004418:	94ffc0ef          	jal	80000d66 <myproc>
+    8000441c:	892a                	mv	s2,a0
+    8000441e:	abffe0ef          	jal	80002edc <begin_op>
+    80004422:	08000613          	li	a2,128
+    80004426:	f6040593          	addi	a1,s0,-160
+    8000442a:	4501                	li	a0,0
+    8000442c:	827fd0ef          	jal	80001c52 <argstr>
+    80004430:	04054363          	bltz	a0,80004476 <sys_chdir+0x68>
+    80004434:	e526                	sd	s1,136(sp)
+    80004436:	f6040513          	addi	a0,s0,-160
+    8000443a:	8e7fe0ef          	jal	80002d20 <namei>
+    8000443e:	84aa                	mv	s1,a0
+    80004440:	c915                	beqz	a0,80004474 <sys_chdir+0x66>
+    80004442:	a04fe0ef          	jal	80002646 <ilock>
+    80004446:	04449703          	lh	a4,68(s1)
+    8000444a:	4785                	li	a5,1
+    8000444c:	02f71963          	bne	a4,a5,8000447e <sys_chdir+0x70>
+    80004450:	8526                	mv	a0,s1
+    80004452:	aa2fe0ef          	jal	800026f4 <iunlock>
+    80004456:	15093503          	ld	a0,336(s2)
+    8000445a:	b6efe0ef          	jal	800027c8 <iput>
+    8000445e:	ae9fe0ef          	jal	80002f46 <end_op>
+    80004462:	14993823          	sd	s1,336(s2)
+    80004466:	4501                	li	a0,0
+    80004468:	64aa                	ld	s1,136(sp)
+    8000446a:	60ea                	ld	ra,152(sp)
+    8000446c:	644a                	ld	s0,144(sp)
+    8000446e:	690a                	ld	s2,128(sp)
+    80004470:	610d                	addi	sp,sp,160
+    80004472:	8082                	ret
+    80004474:	64aa                	ld	s1,136(sp)
+    80004476:	ad1fe0ef          	jal	80002f46 <end_op>
+    8000447a:	557d                	li	a0,-1
+    8000447c:	b7fd                	j	8000446a <sys_chdir+0x5c>
+    8000447e:	8526                	mv	a0,s1
+    80004480:	bd0fe0ef          	jal	80002850 <iunlockput>
+    80004484:	ac3fe0ef          	jal	80002f46 <end_op>
+    80004488:	557d                	li	a0,-1
+    8000448a:	64aa                	ld	s1,136(sp)
+    8000448c:	bff9                	j	8000446a <sys_chdir+0x5c>
+
+000000008000448e <sys_exec>:
+    8000448e:	7121                	addi	sp,sp,-448
+    80004490:	ff06                	sd	ra,440(sp)
+    80004492:	fb22                	sd	s0,432(sp)
+    80004494:	0380                	addi	s0,sp,448
+    80004496:	e4840593          	addi	a1,s0,-440
+    8000449a:	4505                	li	a0,1
+    8000449c:	f9afd0ef          	jal	80001c36 <argaddr>
+    800044a0:	08000613          	li	a2,128
+    800044a4:	f5040593          	addi	a1,s0,-176
+    800044a8:	4501                	li	a0,0
+    800044aa:	fa8fd0ef          	jal	80001c52 <argstr>
+    800044ae:	87aa                	mv	a5,a0
+    800044b0:	557d                	li	a0,-1
+    800044b2:	0c07c463          	bltz	a5,8000457a <sys_exec+0xec>
+    800044b6:	f726                	sd	s1,424(sp)
+    800044b8:	f34a                	sd	s2,416(sp)
+    800044ba:	ef4e                	sd	s3,408(sp)
+    800044bc:	eb52                	sd	s4,400(sp)
+    800044be:	10000613          	li	a2,256
+    800044c2:	4581                	li	a1,0
+    800044c4:	e5040513          	addi	a0,s0,-432
+    800044c8:	c87fb0ef          	jal	8000014e <memset>
+    800044cc:	e5040493          	addi	s1,s0,-432
+    800044d0:	89a6                	mv	s3,s1
+    800044d2:	4901                	li	s2,0
+    800044d4:	02000a13          	li	s4,32
+    800044d8:	00391513          	slli	a0,s2,0x3
+    800044dc:	e4040593          	addi	a1,s0,-448
+    800044e0:	e4843783          	ld	a5,-440(s0)
+    800044e4:	953e                	add	a0,a0,a5
+    800044e6:	eaafd0ef          	jal	80001b90 <fetchaddr>
+    800044ea:	02054663          	bltz	a0,80004516 <sys_exec+0x88>
+    800044ee:	e4043783          	ld	a5,-448(s0)
+    800044f2:	c3a9                	beqz	a5,80004534 <sys_exec+0xa6>
+    800044f4:	c0bfb0ef          	jal	800000fe <kalloc>
+    800044f8:	85aa                	mv	a1,a0
+    800044fa:	00a9b023          	sd	a0,0(s3)
+    800044fe:	cd01                	beqz	a0,80004516 <sys_exec+0x88>
+    80004500:	6605                	lui	a2,0x1
+    80004502:	e4043503          	ld	a0,-448(s0)
+    80004506:	ed4fd0ef          	jal	80001bda <fetchstr>
+    8000450a:	00054663          	bltz	a0,80004516 <sys_exec+0x88>
+    8000450e:	0905                	addi	s2,s2,1
+    80004510:	09a1                	addi	s3,s3,8
+    80004512:	fd4913e3          	bne	s2,s4,800044d8 <sys_exec+0x4a>
+    80004516:	f5040913          	addi	s2,s0,-176
+    8000451a:	6088                	ld	a0,0(s1)
+    8000451c:	c931                	beqz	a0,80004570 <sys_exec+0xe2>
+    8000451e:	afffb0ef          	jal	8000001c <kfree>
+    80004522:	04a1                	addi	s1,s1,8
+    80004524:	ff249be3          	bne	s1,s2,8000451a <sys_exec+0x8c>
+    80004528:	557d                	li	a0,-1
+    8000452a:	74ba                	ld	s1,424(sp)
+    8000452c:	791a                	ld	s2,416(sp)
+    8000452e:	69fa                	ld	s3,408(sp)
+    80004530:	6a5a                	ld	s4,400(sp)
+    80004532:	a0a1                	j	8000457a <sys_exec+0xec>
+    80004534:	0009079b          	sext.w	a5,s2
+    80004538:	078e                	slli	a5,a5,0x3
+    8000453a:	fd078793          	addi	a5,a5,-48
+    8000453e:	97a2                	add	a5,a5,s0
+    80004540:	e807b023          	sd	zero,-384(a5)
+    80004544:	e5040593          	addi	a1,s0,-432
+    80004548:	f5040513          	addi	a0,s0,-176
+    8000454c:	ba8ff0ef          	jal	800038f4 <exec>
+    80004550:	892a                	mv	s2,a0
+    80004552:	f5040993          	addi	s3,s0,-176
+    80004556:	6088                	ld	a0,0(s1)
+    80004558:	c511                	beqz	a0,80004564 <sys_exec+0xd6>
+    8000455a:	ac3fb0ef          	jal	8000001c <kfree>
+    8000455e:	04a1                	addi	s1,s1,8
+    80004560:	ff349be3          	bne	s1,s3,80004556 <sys_exec+0xc8>
+    80004564:	854a                	mv	a0,s2
+    80004566:	74ba                	ld	s1,424(sp)
+    80004568:	791a                	ld	s2,416(sp)
+    8000456a:	69fa                	ld	s3,408(sp)
+    8000456c:	6a5a                	ld	s4,400(sp)
+    8000456e:	a031                	j	8000457a <sys_exec+0xec>
+    80004570:	557d                	li	a0,-1
+    80004572:	74ba                	ld	s1,424(sp)
+    80004574:	791a                	ld	s2,416(sp)
+    80004576:	69fa                	ld	s3,408(sp)
+    80004578:	6a5a                	ld	s4,400(sp)
+    8000457a:	70fa                	ld	ra,440(sp)
+    8000457c:	745a                	ld	s0,432(sp)
+    8000457e:	6139                	addi	sp,sp,448
+    80004580:	8082                	ret
+
+0000000080004582 <sys_pipe>:
+    80004582:	7139                	addi	sp,sp,-64
+    80004584:	fc06                	sd	ra,56(sp)
+    80004586:	f822                	sd	s0,48(sp)
+    80004588:	f426                	sd	s1,40(sp)
+    8000458a:	0080                	addi	s0,sp,64
+    8000458c:	fdafc0ef          	jal	80000d66 <myproc>
+    80004590:	84aa                	mv	s1,a0
+    80004592:	fd840593          	addi	a1,s0,-40
+    80004596:	4501                	li	a0,0
+    80004598:	e9efd0ef          	jal	80001c36 <argaddr>
+    8000459c:	fc840593          	addi	a1,s0,-56
+    800045a0:	fd040513          	addi	a0,s0,-48
+    800045a4:	85cff0ef          	jal	80003600 <pipealloc>
+    800045a8:	57fd                	li	a5,-1
+    800045aa:	0a054463          	bltz	a0,80004652 <sys_pipe+0xd0>
+    800045ae:	fcf42223          	sw	a5,-60(s0)
+    800045b2:	fd043503          	ld	a0,-48(s0)
+    800045b6:	f08ff0ef          	jal	80003cbe <fdalloc>
+    800045ba:	fca42223          	sw	a0,-60(s0)
+    800045be:	08054163          	bltz	a0,80004640 <sys_pipe+0xbe>
+    800045c2:	fc843503          	ld	a0,-56(s0)
+    800045c6:	ef8ff0ef          	jal	80003cbe <fdalloc>
+    800045ca:	fca42023          	sw	a0,-64(s0)
+    800045ce:	06054063          	bltz	a0,8000462e <sys_pipe+0xac>
+    800045d2:	4691                	li	a3,4
+    800045d4:	fc440613          	addi	a2,s0,-60
+    800045d8:	fd843583          	ld	a1,-40(s0)
+    800045dc:	68a8                	ld	a0,80(s1)
+    800045de:	bfafc0ef          	jal	800009d8 <copyout>
+    800045e2:	00054e63          	bltz	a0,800045fe <sys_pipe+0x7c>
+    800045e6:	4691                	li	a3,4
+    800045e8:	fc040613          	addi	a2,s0,-64
+    800045ec:	fd843583          	ld	a1,-40(s0)
+    800045f0:	0591                	addi	a1,a1,4
+    800045f2:	68a8                	ld	a0,80(s1)
+    800045f4:	be4fc0ef          	jal	800009d8 <copyout>
+    800045f8:	4781                	li	a5,0
+    800045fa:	04055c63          	bgez	a0,80004652 <sys_pipe+0xd0>
+    800045fe:	fc442783          	lw	a5,-60(s0)
+    80004602:	07e9                	addi	a5,a5,26
+    80004604:	078e                	slli	a5,a5,0x3
+    80004606:	97a6                	add	a5,a5,s1
+    80004608:	0007b023          	sd	zero,0(a5)
+    8000460c:	fc042783          	lw	a5,-64(s0)
+    80004610:	07e9                	addi	a5,a5,26
+    80004612:	078e                	slli	a5,a5,0x3
+    80004614:	94be                	add	s1,s1,a5
+    80004616:	0004b023          	sd	zero,0(s1)
+    8000461a:	fd043503          	ld	a0,-48(s0)
+    8000461e:	cd9fe0ef          	jal	800032f6 <fileclose>
+    80004622:	fc843503          	ld	a0,-56(s0)
+    80004626:	cd1fe0ef          	jal	800032f6 <fileclose>
+    8000462a:	57fd                	li	a5,-1
+    8000462c:	a01d                	j	80004652 <sys_pipe+0xd0>
+    8000462e:	fc442783          	lw	a5,-60(s0)
+    80004632:	0007c763          	bltz	a5,80004640 <sys_pipe+0xbe>
+    80004636:	07e9                	addi	a5,a5,26
+    80004638:	078e                	slli	a5,a5,0x3
+    8000463a:	97a6                	add	a5,a5,s1
+    8000463c:	0007b023          	sd	zero,0(a5)
+    80004640:	fd043503          	ld	a0,-48(s0)
+    80004644:	cb3fe0ef          	jal	800032f6 <fileclose>
+    80004648:	fc843503          	ld	a0,-56(s0)
+    8000464c:	cabfe0ef          	jal	800032f6 <fileclose>
+    80004650:	57fd                	li	a5,-1
+    80004652:	853e                	mv	a0,a5
+    80004654:	70e2                	ld	ra,56(sp)
+    80004656:	7442                	ld	s0,48(sp)
+    80004658:	74a2                	ld	s1,40(sp)
+    8000465a:	6121                	addi	sp,sp,64
+    8000465c:	8082                	ret
+	...
+
+0000000080004660 <kernelvec>:
+    80004660:	7111                	addi	sp,sp,-256
+    80004662:	e006                	sd	ra,0(sp)
+    80004664:	e40a                	sd	sp,8(sp)
+    80004666:	e80e                	sd	gp,16(sp)
+    80004668:	ec12                	sd	tp,24(sp)
+    8000466a:	f016                	sd	t0,32(sp)
+    8000466c:	f41a                	sd	t1,40(sp)
+    8000466e:	f81e                	sd	t2,48(sp)
+    80004670:	e4aa                	sd	a0,72(sp)
+    80004672:	e8ae                	sd	a1,80(sp)
+    80004674:	ecb2                	sd	a2,88(sp)
+    80004676:	f0b6                	sd	a3,96(sp)
+    80004678:	f4ba                	sd	a4,104(sp)
+    8000467a:	f8be                	sd	a5,112(sp)
+    8000467c:	fcc2                	sd	a6,120(sp)
+    8000467e:	e146                	sd	a7,128(sp)
+    80004680:	edf2                	sd	t3,216(sp)
+    80004682:	f1f6                	sd	t4,224(sp)
+    80004684:	f5fa                	sd	t5,232(sp)
+    80004686:	f9fe                	sd	t6,240(sp)
+    80004688:	c18fd0ef          	jal	80001aa0 <kerneltrap>
+    8000468c:	6082                	ld	ra,0(sp)
+    8000468e:	6122                	ld	sp,8(sp)
+    80004690:	61c2                	ld	gp,16(sp)
+    80004692:	7282                	ld	t0,32(sp)
+    80004694:	7322                	ld	t1,40(sp)
+    80004696:	73c2                	ld	t2,48(sp)
+    80004698:	6526                	ld	a0,72(sp)
+    8000469a:	65c6                	ld	a1,80(sp)
+    8000469c:	6666                	ld	a2,88(sp)
+    8000469e:	7686                	ld	a3,96(sp)
+    800046a0:	7726                	ld	a4,104(sp)
+    800046a2:	77c6                	ld	a5,112(sp)
+    800046a4:	7866                	ld	a6,120(sp)
+    800046a6:	688a                	ld	a7,128(sp)
+    800046a8:	6e6e                	ld	t3,216(sp)
+    800046aa:	7e8e                	ld	t4,224(sp)
+    800046ac:	7f2e                	ld	t5,232(sp)
+    800046ae:	7fce                	ld	t6,240(sp)
+    800046b0:	6111                	addi	sp,sp,256
+    800046b2:	10200073          	sret
+	...
+
+00000000800046be <plicinit>:
+    800046be:	1141                	addi	sp,sp,-16
+    800046c0:	e422                	sd	s0,8(sp)
+    800046c2:	0800                	addi	s0,sp,16
+    800046c4:	0c0007b7          	lui	a5,0xc000
+    800046c8:	4705                	li	a4,1
+    800046ca:	d798                	sw	a4,40(a5)
+    800046cc:	0c0007b7          	lui	a5,0xc000
+    800046d0:	c3d8                	sw	a4,4(a5)
+    800046d2:	6422                	ld	s0,8(sp)
+    800046d4:	0141                	addi	sp,sp,16
+    800046d6:	8082                	ret
+
+00000000800046d8 <plicinithart>:
+    800046d8:	1141                	addi	sp,sp,-16
+    800046da:	e406                	sd	ra,8(sp)
+    800046dc:	e022                	sd	s0,0(sp)
+    800046de:	0800                	addi	s0,sp,16
+    800046e0:	e5afc0ef          	jal	80000d3a <cpuid>
+    800046e4:	0085171b          	slliw	a4,a0,0x8
+    800046e8:	0c0027b7          	lui	a5,0xc002
+    800046ec:	97ba                	add	a5,a5,a4
+    800046ee:	40200713          	li	a4,1026
+    800046f2:	08e7a023          	sw	a4,128(a5) # c002080 <_entry-0x73ffdf80>
+    800046f6:	00d5151b          	slliw	a0,a0,0xd
+    800046fa:	0c2017b7          	lui	a5,0xc201
+    800046fe:	97aa                	add	a5,a5,a0
+    80004700:	0007a023          	sw	zero,0(a5) # c201000 <_entry-0x73dff000>
+    80004704:	60a2                	ld	ra,8(sp)
+    80004706:	6402                	ld	s0,0(sp)
+    80004708:	0141                	addi	sp,sp,16
+    8000470a:	8082                	ret
+
+000000008000470c <plic_claim>:
+    8000470c:	1141                	addi	sp,sp,-16
+    8000470e:	e406                	sd	ra,8(sp)
+    80004710:	e022                	sd	s0,0(sp)
+    80004712:	0800                	addi	s0,sp,16
+    80004714:	e26fc0ef          	jal	80000d3a <cpuid>
+    80004718:	00d5151b          	slliw	a0,a0,0xd
+    8000471c:	0c2017b7          	lui	a5,0xc201
+    80004720:	97aa                	add	a5,a5,a0
+    80004722:	43c8                	lw	a0,4(a5)
+    80004724:	60a2                	ld	ra,8(sp)
+    80004726:	6402                	ld	s0,0(sp)
+    80004728:	0141                	addi	sp,sp,16
+    8000472a:	8082                	ret
+
+000000008000472c <plic_complete>:
+    8000472c:	1101                	addi	sp,sp,-32
+    8000472e:	ec06                	sd	ra,24(sp)
+    80004730:	e822                	sd	s0,16(sp)
+    80004732:	e426                	sd	s1,8(sp)
+    80004734:	1000                	addi	s0,sp,32
+    80004736:	84aa                	mv	s1,a0
+    80004738:	e02fc0ef          	jal	80000d3a <cpuid>
+    8000473c:	00d5151b          	slliw	a0,a0,0xd
+    80004740:	0c2017b7          	lui	a5,0xc201
+    80004744:	97aa                	add	a5,a5,a0
+    80004746:	c3c4                	sw	s1,4(a5)
+    80004748:	60e2                	ld	ra,24(sp)
+    8000474a:	6442                	ld	s0,16(sp)
+    8000474c:	64a2                	ld	s1,8(sp)
+    8000474e:	6105                	addi	sp,sp,32
+    80004750:	8082                	ret
+
+0000000080004752 <free_desc>:
+    80004752:	1141                	addi	sp,sp,-16
+    80004754:	e406                	sd	ra,8(sp)
+    80004756:	e022                	sd	s0,0(sp)
+    80004758:	0800                	addi	s0,sp,16
+    8000475a:	479d                	li	a5,7
+    8000475c:	04a7ca63          	blt	a5,a0,800047b0 <free_desc+0x5e>
+    80004760:	00017797          	auipc	a5,0x17
+    80004764:	ba078793          	addi	a5,a5,-1120 # 8001b300 <disk>
+    80004768:	97aa                	add	a5,a5,a0
+    8000476a:	0187c783          	lbu	a5,24(a5)
+    8000476e:	e7b9                	bnez	a5,800047bc <free_desc+0x6a>
+    80004770:	00451693          	slli	a3,a0,0x4
+    80004774:	00017797          	auipc	a5,0x17
+    80004778:	b8c78793          	addi	a5,a5,-1140 # 8001b300 <disk>
+    8000477c:	6398                	ld	a4,0(a5)
+    8000477e:	9736                	add	a4,a4,a3
+    80004780:	00073023          	sd	zero,0(a4)
+    80004784:	6398                	ld	a4,0(a5)
+    80004786:	9736                	add	a4,a4,a3
+    80004788:	00072423          	sw	zero,8(a4)
+    8000478c:	00071623          	sh	zero,12(a4)
+    80004790:	00071723          	sh	zero,14(a4)
+    80004794:	97aa                	add	a5,a5,a0
+    80004796:	4705                	li	a4,1
+    80004798:	00e78c23          	sb	a4,24(a5)
+    8000479c:	00017517          	auipc	a0,0x17
+    800047a0:	b7c50513          	addi	a0,a0,-1156 # 8001b318 <disk+0x18>
+    800047a4:	bddfc0ef          	jal	80001380 <wakeup>
+    800047a8:	60a2                	ld	ra,8(sp)
+    800047aa:	6402                	ld	s0,0(sp)
+    800047ac:	0141                	addi	sp,sp,16
+    800047ae:	8082                	ret
+    800047b0:	00003517          	auipc	a0,0x3
+    800047b4:	e6050513          	addi	a0,a0,-416 # 80007610 <etext+0x610>
+    800047b8:	43b000ef          	jal	800053f2 <panic>
+    800047bc:	00003517          	auipc	a0,0x3
+    800047c0:	e6450513          	addi	a0,a0,-412 # 80007620 <etext+0x620>
+    800047c4:	42f000ef          	jal	800053f2 <panic>
+
+00000000800047c8 <virtio_disk_init>:
+    800047c8:	1101                	addi	sp,sp,-32
+    800047ca:	ec06                	sd	ra,24(sp)
+    800047cc:	e822                	sd	s0,16(sp)
+    800047ce:	e426                	sd	s1,8(sp)
+    800047d0:	e04a                	sd	s2,0(sp)
+    800047d2:	1000                	addi	s0,sp,32
+    800047d4:	00003597          	auipc	a1,0x3
+    800047d8:	e5c58593          	addi	a1,a1,-420 # 80007630 <etext+0x630>
+    800047dc:	00017517          	auipc	a0,0x17
+    800047e0:	c4c50513          	addi	a0,a0,-948 # 8001b428 <disk+0x128>
+    800047e4:	6bd000ef          	jal	800056a0 <initlock>
+    800047e8:	100017b7          	lui	a5,0x10001
+    800047ec:	4398                	lw	a4,0(a5)
+    800047ee:	2701                	sext.w	a4,a4
+    800047f0:	747277b7          	lui	a5,0x74727
+    800047f4:	97678793          	addi	a5,a5,-1674 # 74726976 <_entry-0xb8d968a>
+    800047f8:	18f71063          	bne	a4,a5,80004978 <virtio_disk_init+0x1b0>
+    800047fc:	100017b7          	lui	a5,0x10001
+    80004800:	0791                	addi	a5,a5,4 # 10001004 <_entry-0x6fffeffc>
+    80004802:	439c                	lw	a5,0(a5)
+    80004804:	2781                	sext.w	a5,a5
+    80004806:	4709                	li	a4,2
+    80004808:	16e79863          	bne	a5,a4,80004978 <virtio_disk_init+0x1b0>
+    8000480c:	100017b7          	lui	a5,0x10001
+    80004810:	07a1                	addi	a5,a5,8 # 10001008 <_entry-0x6fffeff8>
+    80004812:	439c                	lw	a5,0(a5)
+    80004814:	2781                	sext.w	a5,a5
+    80004816:	16e79163          	bne	a5,a4,80004978 <virtio_disk_init+0x1b0>
+    8000481a:	100017b7          	lui	a5,0x10001
+    8000481e:	47d8                	lw	a4,12(a5)
+    80004820:	2701                	sext.w	a4,a4
+    80004822:	554d47b7          	lui	a5,0x554d4
+    80004826:	55178793          	addi	a5,a5,1361 # 554d4551 <_entry-0x2ab2baaf>
+    8000482a:	14f71763          	bne	a4,a5,80004978 <virtio_disk_init+0x1b0>
+    8000482e:	100017b7          	lui	a5,0x10001
+    80004832:	0607a823          	sw	zero,112(a5) # 10001070 <_entry-0x6fffef90>
+    80004836:	4705                	li	a4,1
+    80004838:	dbb8                	sw	a4,112(a5)
+    8000483a:	470d                	li	a4,3
+    8000483c:	dbb8                	sw	a4,112(a5)
+    8000483e:	10001737          	lui	a4,0x10001
+    80004842:	4b14                	lw	a3,16(a4)
+    80004844:	c7ffe737          	lui	a4,0xc7ffe
+    80004848:	75f70713          	addi	a4,a4,1887 # ffffffffc7ffe75f <end+0xffffffff47fdb21f>
+    8000484c:	8ef9                	and	a3,a3,a4
+    8000484e:	10001737          	lui	a4,0x10001
+    80004852:	d314                	sw	a3,32(a4)
+    80004854:	472d                	li	a4,11
+    80004856:	dbb8                	sw	a4,112(a5)
+    80004858:	07078793          	addi	a5,a5,112
+    8000485c:	439c                	lw	a5,0(a5)
+    8000485e:	0007891b          	sext.w	s2,a5
+    80004862:	8ba1                	andi	a5,a5,8
+    80004864:	12078063          	beqz	a5,80004984 <virtio_disk_init+0x1bc>
+    80004868:	100017b7          	lui	a5,0x10001
+    8000486c:	0207a823          	sw	zero,48(a5) # 10001030 <_entry-0x6fffefd0>
+    80004870:	100017b7          	lui	a5,0x10001
+    80004874:	04478793          	addi	a5,a5,68 # 10001044 <_entry-0x6fffefbc>
+    80004878:	439c                	lw	a5,0(a5)
+    8000487a:	2781                	sext.w	a5,a5
+    8000487c:	10079a63          	bnez	a5,80004990 <virtio_disk_init+0x1c8>
+    80004880:	100017b7          	lui	a5,0x10001
+    80004884:	03478793          	addi	a5,a5,52 # 10001034 <_entry-0x6fffefcc>
+    80004888:	439c                	lw	a5,0(a5)
+    8000488a:	2781                	sext.w	a5,a5
+    8000488c:	10078863          	beqz	a5,8000499c <virtio_disk_init+0x1d4>
+    80004890:	471d                	li	a4,7
+    80004892:	10f77b63          	bgeu	a4,a5,800049a8 <virtio_disk_init+0x1e0>
+    80004896:	869fb0ef          	jal	800000fe <kalloc>
+    8000489a:	00017497          	auipc	s1,0x17
+    8000489e:	a6648493          	addi	s1,s1,-1434 # 8001b300 <disk>
+    800048a2:	e088                	sd	a0,0(s1)
+    800048a4:	85bfb0ef          	jal	800000fe <kalloc>
+    800048a8:	e488                	sd	a0,8(s1)
+    800048aa:	855fb0ef          	jal	800000fe <kalloc>
+    800048ae:	87aa                	mv	a5,a0
+    800048b0:	e888                	sd	a0,16(s1)
+    800048b2:	6088                	ld	a0,0(s1)
+    800048b4:	10050063          	beqz	a0,800049b4 <virtio_disk_init+0x1ec>
+    800048b8:	00017717          	auipc	a4,0x17
+    800048bc:	a5073703          	ld	a4,-1456(a4) # 8001b308 <disk+0x8>
+    800048c0:	0e070a63          	beqz	a4,800049b4 <virtio_disk_init+0x1ec>
+    800048c4:	0e078863          	beqz	a5,800049b4 <virtio_disk_init+0x1ec>
+    800048c8:	6605                	lui	a2,0x1
+    800048ca:	4581                	li	a1,0
+    800048cc:	883fb0ef          	jal	8000014e <memset>
+    800048d0:	00017497          	auipc	s1,0x17
+    800048d4:	a3048493          	addi	s1,s1,-1488 # 8001b300 <disk>
+    800048d8:	6605                	lui	a2,0x1
+    800048da:	4581                	li	a1,0
+    800048dc:	6488                	ld	a0,8(s1)
+    800048de:	871fb0ef          	jal	8000014e <memset>
+    800048e2:	6605                	lui	a2,0x1
+    800048e4:	4581                	li	a1,0
+    800048e6:	6888                	ld	a0,16(s1)
+    800048e8:	867fb0ef          	jal	8000014e <memset>
+    800048ec:	100017b7          	lui	a5,0x10001
+    800048f0:	4721                	li	a4,8
+    800048f2:	df98                	sw	a4,56(a5)
+    800048f4:	4098                	lw	a4,0(s1)
+    800048f6:	100017b7          	lui	a5,0x10001
+    800048fa:	08e7a023          	sw	a4,128(a5) # 10001080 <_entry-0x6fffef80>
+    800048fe:	40d8                	lw	a4,4(s1)
+    80004900:	100017b7          	lui	a5,0x10001
+    80004904:	08e7a223          	sw	a4,132(a5) # 10001084 <_entry-0x6fffef7c>
+    80004908:	649c                	ld	a5,8(s1)
+    8000490a:	0007869b          	sext.w	a3,a5
+    8000490e:	10001737          	lui	a4,0x10001
+    80004912:	08d72823          	sw	a3,144(a4) # 10001090 <_entry-0x6fffef70>
+    80004916:	9781                	srai	a5,a5,0x20
+    80004918:	10001737          	lui	a4,0x10001
+    8000491c:	08f72a23          	sw	a5,148(a4) # 10001094 <_entry-0x6fffef6c>
+    80004920:	689c                	ld	a5,16(s1)
+    80004922:	0007869b          	sext.w	a3,a5
+    80004926:	10001737          	lui	a4,0x10001
+    8000492a:	0ad72023          	sw	a3,160(a4) # 100010a0 <_entry-0x6fffef60>
+    8000492e:	9781                	srai	a5,a5,0x20
+    80004930:	10001737          	lui	a4,0x10001
+    80004934:	0af72223          	sw	a5,164(a4) # 100010a4 <_entry-0x6fffef5c>
+    80004938:	10001737          	lui	a4,0x10001
+    8000493c:	4785                	li	a5,1
+    8000493e:	c37c                	sw	a5,68(a4)
+    80004940:	00f48c23          	sb	a5,24(s1)
+    80004944:	00f48ca3          	sb	a5,25(s1)
+    80004948:	00f48d23          	sb	a5,26(s1)
+    8000494c:	00f48da3          	sb	a5,27(s1)
+    80004950:	00f48e23          	sb	a5,28(s1)
+    80004954:	00f48ea3          	sb	a5,29(s1)
+    80004958:	00f48f23          	sb	a5,30(s1)
+    8000495c:	00f48fa3          	sb	a5,31(s1)
+    80004960:	00496913          	ori	s2,s2,4
+    80004964:	100017b7          	lui	a5,0x10001
+    80004968:	0727a823          	sw	s2,112(a5) # 10001070 <_entry-0x6fffef90>
+    8000496c:	60e2                	ld	ra,24(sp)
+    8000496e:	6442                	ld	s0,16(sp)
+    80004970:	64a2                	ld	s1,8(sp)
+    80004972:	6902                	ld	s2,0(sp)
+    80004974:	6105                	addi	sp,sp,32
+    80004976:	8082                	ret
+    80004978:	00003517          	auipc	a0,0x3
+    8000497c:	cc850513          	addi	a0,a0,-824 # 80007640 <etext+0x640>
+    80004980:	273000ef          	jal	800053f2 <panic>
+    80004984:	00003517          	auipc	a0,0x3
+    80004988:	cdc50513          	addi	a0,a0,-804 # 80007660 <etext+0x660>
+    8000498c:	267000ef          	jal	800053f2 <panic>
+    80004990:	00003517          	auipc	a0,0x3
+    80004994:	cf050513          	addi	a0,a0,-784 # 80007680 <etext+0x680>
+    80004998:	25b000ef          	jal	800053f2 <panic>
+    8000499c:	00003517          	auipc	a0,0x3
+    800049a0:	d0450513          	addi	a0,a0,-764 # 800076a0 <etext+0x6a0>
+    800049a4:	24f000ef          	jal	800053f2 <panic>
+    800049a8:	00003517          	auipc	a0,0x3
+    800049ac:	d1850513          	addi	a0,a0,-744 # 800076c0 <etext+0x6c0>
+    800049b0:	243000ef          	jal	800053f2 <panic>
+    800049b4:	00003517          	auipc	a0,0x3
+    800049b8:	d2c50513          	addi	a0,a0,-724 # 800076e0 <etext+0x6e0>
+    800049bc:	237000ef          	jal	800053f2 <panic>
+
+00000000800049c0 <virtio_disk_rw>:
+    800049c0:	7159                	addi	sp,sp,-112
+    800049c2:	f486                	sd	ra,104(sp)
+    800049c4:	f0a2                	sd	s0,96(sp)
+    800049c6:	eca6                	sd	s1,88(sp)
+    800049c8:	e8ca                	sd	s2,80(sp)
+    800049ca:	e4ce                	sd	s3,72(sp)
+    800049cc:	e0d2                	sd	s4,64(sp)
+    800049ce:	fc56                	sd	s5,56(sp)
+    800049d0:	f85a                	sd	s6,48(sp)
+    800049d2:	f45e                	sd	s7,40(sp)
+    800049d4:	f062                	sd	s8,32(sp)
+    800049d6:	ec66                	sd	s9,24(sp)
+    800049d8:	1880                	addi	s0,sp,112
+    800049da:	8a2a                	mv	s4,a0
+    800049dc:	8bae                	mv	s7,a1
+    800049de:	00c52c83          	lw	s9,12(a0)
+    800049e2:	001c9c9b          	slliw	s9,s9,0x1
+    800049e6:	1c82                	slli	s9,s9,0x20
+    800049e8:	020cdc93          	srli	s9,s9,0x20
+    800049ec:	00017517          	auipc	a0,0x17
+    800049f0:	a3c50513          	addi	a0,a0,-1476 # 8001b428 <disk+0x128>
+    800049f4:	52d000ef          	jal	80005720 <acquire>
+    800049f8:	4981                	li	s3,0
+    800049fa:	44a1                	li	s1,8
+    800049fc:	00017b17          	auipc	s6,0x17
+    80004a00:	904b0b13          	addi	s6,s6,-1788 # 8001b300 <disk>
+    80004a04:	4a8d                	li	s5,3
+    80004a06:	00017c17          	auipc	s8,0x17
+    80004a0a:	a22c0c13          	addi	s8,s8,-1502 # 8001b428 <disk+0x128>
+    80004a0e:	a8b9                	j	80004a6c <virtio_disk_rw+0xac>
+    80004a10:	00fb0733          	add	a4,s6,a5
+    80004a14:	00070c23          	sb	zero,24(a4) # 10001018 <_entry-0x6fffefe8>
+    80004a18:	c19c                	sw	a5,0(a1)
+    80004a1a:	0207c563          	bltz	a5,80004a44 <virtio_disk_rw+0x84>
+    80004a1e:	2905                	addiw	s2,s2,1
+    80004a20:	0611                	addi	a2,a2,4 # 1004 <_entry-0x7fffeffc>
+    80004a22:	05590963          	beq	s2,s5,80004a74 <virtio_disk_rw+0xb4>
+    80004a26:	85b2                	mv	a1,a2
+    80004a28:	00017717          	auipc	a4,0x17
+    80004a2c:	8d870713          	addi	a4,a4,-1832 # 8001b300 <disk>
+    80004a30:	87ce                	mv	a5,s3
+    80004a32:	01874683          	lbu	a3,24(a4)
+    80004a36:	fee9                	bnez	a3,80004a10 <virtio_disk_rw+0x50>
+    80004a38:	2785                	addiw	a5,a5,1
+    80004a3a:	0705                	addi	a4,a4,1
+    80004a3c:	fe979be3          	bne	a5,s1,80004a32 <virtio_disk_rw+0x72>
+    80004a40:	57fd                	li	a5,-1
+    80004a42:	c19c                	sw	a5,0(a1)
+    80004a44:	01205d63          	blez	s2,80004a5e <virtio_disk_rw+0x9e>
+    80004a48:	f9042503          	lw	a0,-112(s0)
+    80004a4c:	d07ff0ef          	jal	80004752 <free_desc>
+    80004a50:	4785                	li	a5,1
+    80004a52:	0127d663          	bge	a5,s2,80004a5e <virtio_disk_rw+0x9e>
+    80004a56:	f9442503          	lw	a0,-108(s0)
+    80004a5a:	cf9ff0ef          	jal	80004752 <free_desc>
+    80004a5e:	85e2                	mv	a1,s8
+    80004a60:	00017517          	auipc	a0,0x17
+    80004a64:	8b850513          	addi	a0,a0,-1864 # 8001b318 <disk+0x18>
+    80004a68:	8cdfc0ef          	jal	80001334 <sleep>
+    80004a6c:	f9040613          	addi	a2,s0,-112
+    80004a70:	894e                	mv	s2,s3
+    80004a72:	bf55                	j	80004a26 <virtio_disk_rw+0x66>
+    80004a74:	f9042503          	lw	a0,-112(s0)
+    80004a78:	00451693          	slli	a3,a0,0x4
+    80004a7c:	00017797          	auipc	a5,0x17
+    80004a80:	88478793          	addi	a5,a5,-1916 # 8001b300 <disk>
+    80004a84:	00a50713          	addi	a4,a0,10
+    80004a88:	0712                	slli	a4,a4,0x4
+    80004a8a:	973e                	add	a4,a4,a5
+    80004a8c:	01703633          	snez	a2,s7
+    80004a90:	c710                	sw	a2,8(a4)
+    80004a92:	00072623          	sw	zero,12(a4)
+    80004a96:	01973823          	sd	s9,16(a4)
+    80004a9a:	6398                	ld	a4,0(a5)
+    80004a9c:	9736                	add	a4,a4,a3
+    80004a9e:	0a868613          	addi	a2,a3,168
+    80004aa2:	963e                	add	a2,a2,a5
+    80004aa4:	e310                	sd	a2,0(a4)
+    80004aa6:	6390                	ld	a2,0(a5)
+    80004aa8:	00d605b3          	add	a1,a2,a3
+    80004aac:	4741                	li	a4,16
+    80004aae:	c598                	sw	a4,8(a1)
+    80004ab0:	4805                	li	a6,1
+    80004ab2:	01059623          	sh	a6,12(a1)
+    80004ab6:	f9442703          	lw	a4,-108(s0)
+    80004aba:	00e59723          	sh	a4,14(a1)
+    80004abe:	0712                	slli	a4,a4,0x4
+    80004ac0:	963a                	add	a2,a2,a4
+    80004ac2:	058a0593          	addi	a1,s4,88
+    80004ac6:	e20c                	sd	a1,0(a2)
+    80004ac8:	0007b883          	ld	a7,0(a5)
+    80004acc:	9746                	add	a4,a4,a7
+    80004ace:	40000613          	li	a2,1024
+    80004ad2:	c710                	sw	a2,8(a4)
+    80004ad4:	001bb613          	seqz	a2,s7
+    80004ad8:	0016161b          	slliw	a2,a2,0x1
+    80004adc:	00166613          	ori	a2,a2,1
+    80004ae0:	00c71623          	sh	a2,12(a4)
+    80004ae4:	f9842583          	lw	a1,-104(s0)
+    80004ae8:	00b71723          	sh	a1,14(a4)
+    80004aec:	00250613          	addi	a2,a0,2
+    80004af0:	0612                	slli	a2,a2,0x4
+    80004af2:	963e                	add	a2,a2,a5
+    80004af4:	577d                	li	a4,-1
+    80004af6:	00e60823          	sb	a4,16(a2)
+    80004afa:	0592                	slli	a1,a1,0x4
+    80004afc:	98ae                	add	a7,a7,a1
+    80004afe:	03068713          	addi	a4,a3,48
+    80004b02:	973e                	add	a4,a4,a5
+    80004b04:	00e8b023          	sd	a4,0(a7)
+    80004b08:	6398                	ld	a4,0(a5)
+    80004b0a:	972e                	add	a4,a4,a1
+    80004b0c:	01072423          	sw	a6,8(a4)
+    80004b10:	4689                	li	a3,2
+    80004b12:	00d71623          	sh	a3,12(a4)
+    80004b16:	00071723          	sh	zero,14(a4)
+    80004b1a:	010a2223          	sw	a6,4(s4)
+    80004b1e:	01463423          	sd	s4,8(a2)
+    80004b22:	6794                	ld	a3,8(a5)
+    80004b24:	0026d703          	lhu	a4,2(a3)
+    80004b28:	8b1d                	andi	a4,a4,7
+    80004b2a:	0706                	slli	a4,a4,0x1
+    80004b2c:	96ba                	add	a3,a3,a4
+    80004b2e:	00a69223          	sh	a0,4(a3)
+    80004b32:	0330000f          	fence	rw,rw
+    80004b36:	6798                	ld	a4,8(a5)
+    80004b38:	00275783          	lhu	a5,2(a4)
+    80004b3c:	2785                	addiw	a5,a5,1
+    80004b3e:	00f71123          	sh	a5,2(a4)
+    80004b42:	0330000f          	fence	rw,rw
+    80004b46:	100017b7          	lui	a5,0x10001
+    80004b4a:	0407a823          	sw	zero,80(a5) # 10001050 <_entry-0x6fffefb0>
+    80004b4e:	004a2783          	lw	a5,4(s4)
+    80004b52:	00017917          	auipc	s2,0x17
+    80004b56:	8d690913          	addi	s2,s2,-1834 # 8001b428 <disk+0x128>
+    80004b5a:	4485                	li	s1,1
+    80004b5c:	01079a63          	bne	a5,a6,80004b70 <virtio_disk_rw+0x1b0>
+    80004b60:	85ca                	mv	a1,s2
+    80004b62:	8552                	mv	a0,s4
+    80004b64:	fd0fc0ef          	jal	80001334 <sleep>
+    80004b68:	004a2783          	lw	a5,4(s4)
+    80004b6c:	fe978ae3          	beq	a5,s1,80004b60 <virtio_disk_rw+0x1a0>
+    80004b70:	f9042903          	lw	s2,-112(s0)
+    80004b74:	00290713          	addi	a4,s2,2
+    80004b78:	0712                	slli	a4,a4,0x4
+    80004b7a:	00016797          	auipc	a5,0x16
+    80004b7e:	78678793          	addi	a5,a5,1926 # 8001b300 <disk>
+    80004b82:	97ba                	add	a5,a5,a4
+    80004b84:	0007b423          	sd	zero,8(a5)
+    80004b88:	00016997          	auipc	s3,0x16
+    80004b8c:	77898993          	addi	s3,s3,1912 # 8001b300 <disk>
+    80004b90:	00491713          	slli	a4,s2,0x4
+    80004b94:	0009b783          	ld	a5,0(s3)
+    80004b98:	97ba                	add	a5,a5,a4
+    80004b9a:	00c7d483          	lhu	s1,12(a5)
+    80004b9e:	854a                	mv	a0,s2
+    80004ba0:	00e7d903          	lhu	s2,14(a5)
+    80004ba4:	bafff0ef          	jal	80004752 <free_desc>
+    80004ba8:	8885                	andi	s1,s1,1
+    80004baa:	f0fd                	bnez	s1,80004b90 <virtio_disk_rw+0x1d0>
+    80004bac:	00017517          	auipc	a0,0x17
+    80004bb0:	87c50513          	addi	a0,a0,-1924 # 8001b428 <disk+0x128>
+    80004bb4:	405000ef          	jal	800057b8 <release>
+    80004bb8:	70a6                	ld	ra,104(sp)
+    80004bba:	7406                	ld	s0,96(sp)
+    80004bbc:	64e6                	ld	s1,88(sp)
+    80004bbe:	6946                	ld	s2,80(sp)
+    80004bc0:	69a6                	ld	s3,72(sp)
+    80004bc2:	6a06                	ld	s4,64(sp)
+    80004bc4:	7ae2                	ld	s5,56(sp)
+    80004bc6:	7b42                	ld	s6,48(sp)
+    80004bc8:	7ba2                	ld	s7,40(sp)
+    80004bca:	7c02                	ld	s8,32(sp)
+    80004bcc:	6ce2                	ld	s9,24(sp)
+    80004bce:	6165                	addi	sp,sp,112
+    80004bd0:	8082                	ret
+
+0000000080004bd2 <virtio_disk_intr>:
+    80004bd2:	1101                	addi	sp,sp,-32
+    80004bd4:	ec06                	sd	ra,24(sp)
+    80004bd6:	e822                	sd	s0,16(sp)
+    80004bd8:	e426                	sd	s1,8(sp)
+    80004bda:	1000                	addi	s0,sp,32
+    80004bdc:	00016497          	auipc	s1,0x16
+    80004be0:	72448493          	addi	s1,s1,1828 # 8001b300 <disk>
+    80004be4:	00017517          	auipc	a0,0x17
+    80004be8:	84450513          	addi	a0,a0,-1980 # 8001b428 <disk+0x128>
+    80004bec:	335000ef          	jal	80005720 <acquire>
+    80004bf0:	100017b7          	lui	a5,0x10001
+    80004bf4:	53b8                	lw	a4,96(a5)
+    80004bf6:	8b0d                	andi	a4,a4,3
+    80004bf8:	100017b7          	lui	a5,0x10001
+    80004bfc:	d3f8                	sw	a4,100(a5)
+    80004bfe:	0330000f          	fence	rw,rw
+    80004c02:	689c                	ld	a5,16(s1)
+    80004c04:	0204d703          	lhu	a4,32(s1)
+    80004c08:	0027d783          	lhu	a5,2(a5) # 10001002 <_entry-0x6fffeffe>
+    80004c0c:	04f70663          	beq	a4,a5,80004c58 <virtio_disk_intr+0x86>
+    80004c10:	0330000f          	fence	rw,rw
+    80004c14:	6898                	ld	a4,16(s1)
+    80004c16:	0204d783          	lhu	a5,32(s1)
+    80004c1a:	8b9d                	andi	a5,a5,7
+    80004c1c:	078e                	slli	a5,a5,0x3
+    80004c1e:	97ba                	add	a5,a5,a4
+    80004c20:	43dc                	lw	a5,4(a5)
+    80004c22:	00278713          	addi	a4,a5,2
+    80004c26:	0712                	slli	a4,a4,0x4
+    80004c28:	9726                	add	a4,a4,s1
+    80004c2a:	01074703          	lbu	a4,16(a4)
+    80004c2e:	e321                	bnez	a4,80004c6e <virtio_disk_intr+0x9c>
+    80004c30:	0789                	addi	a5,a5,2
+    80004c32:	0792                	slli	a5,a5,0x4
+    80004c34:	97a6                	add	a5,a5,s1
+    80004c36:	6788                	ld	a0,8(a5)
+    80004c38:	00052223          	sw	zero,4(a0)
+    80004c3c:	f44fc0ef          	jal	80001380 <wakeup>
+    80004c40:	0204d783          	lhu	a5,32(s1)
+    80004c44:	2785                	addiw	a5,a5,1
+    80004c46:	17c2                	slli	a5,a5,0x30
+    80004c48:	93c1                	srli	a5,a5,0x30
+    80004c4a:	02f49023          	sh	a5,32(s1)
+    80004c4e:	6898                	ld	a4,16(s1)
+    80004c50:	00275703          	lhu	a4,2(a4)
+    80004c54:	faf71ee3          	bne	a4,a5,80004c10 <virtio_disk_intr+0x3e>
+    80004c58:	00016517          	auipc	a0,0x16
+    80004c5c:	7d050513          	addi	a0,a0,2000 # 8001b428 <disk+0x128>
+    80004c60:	359000ef          	jal	800057b8 <release>
+    80004c64:	60e2                	ld	ra,24(sp)
+    80004c66:	6442                	ld	s0,16(sp)
+    80004c68:	64a2                	ld	s1,8(sp)
+    80004c6a:	6105                	addi	sp,sp,32
+    80004c6c:	8082                	ret
+    80004c6e:	00003517          	auipc	a0,0x3
+    80004c72:	a8a50513          	addi	a0,a0,-1398 # 800076f8 <etext+0x6f8>
+    80004c76:	77c000ef          	jal	800053f2 <panic>
+
+0000000080004c7a <timerinit>:
+    80004c7a:	1141                	addi	sp,sp,-16
+    80004c7c:	e422                	sd	s0,8(sp)
+    80004c7e:	0800                	addi	s0,sp,16
+    80004c80:	304027f3          	csrr	a5,mie
+    80004c84:	0207e793          	ori	a5,a5,32
+    80004c88:	30479073          	csrw	mie,a5
+    80004c8c:	30a027f3          	csrr	a5,0x30a
+    80004c90:	577d                	li	a4,-1
+    80004c92:	177e                	slli	a4,a4,0x3f
+    80004c94:	8fd9                	or	a5,a5,a4
+    80004c96:	30a79073          	csrw	0x30a,a5
+    80004c9a:	306027f3          	csrr	a5,mcounteren
+    80004c9e:	0027e793          	ori	a5,a5,2
+    80004ca2:	30679073          	csrw	mcounteren,a5
+    80004ca6:	c01027f3          	rdtime	a5
+    80004caa:	000f4737          	lui	a4,0xf4
+    80004cae:	24070713          	addi	a4,a4,576 # f4240 <_entry-0x7ff0bdc0>
+    80004cb2:	97ba                	add	a5,a5,a4
+    80004cb4:	14d79073          	csrw	stimecmp,a5
+    80004cb8:	6422                	ld	s0,8(sp)
+    80004cba:	0141                	addi	sp,sp,16
+    80004cbc:	8082                	ret
+
+0000000080004cbe <start>:
+    80004cbe:	1141                	addi	sp,sp,-16
+    80004cc0:	e406                	sd	ra,8(sp)
+    80004cc2:	e022                	sd	s0,0(sp)
+    80004cc4:	0800                	addi	s0,sp,16
+    80004cc6:	300027f3          	csrr	a5,mstatus
+    80004cca:	7779                	lui	a4,0xffffe
+    80004ccc:	7ff70713          	addi	a4,a4,2047 # ffffffffffffe7ff <end+0xffffffff7ffdb2bf>
+    80004cd0:	8ff9                	and	a5,a5,a4
+    80004cd2:	6705                	lui	a4,0x1
+    80004cd4:	80070713          	addi	a4,a4,-2048 # 800 <_entry-0x7ffff800>
+    80004cd8:	8fd9                	or	a5,a5,a4
+    80004cda:	30079073          	csrw	mstatus,a5
+    80004cde:	ffffb797          	auipc	a5,0xffffb
+    80004ce2:	60a78793          	addi	a5,a5,1546 # 800002e8 <main>
+    80004ce6:	34179073          	csrw	mepc,a5
+    80004cea:	4781                	li	a5,0
+    80004cec:	18079073          	csrw	satp,a5
+    80004cf0:	67c1                	lui	a5,0x10
+    80004cf2:	17fd                	addi	a5,a5,-1 # ffff <_entry-0x7fff0001>
+    80004cf4:	30279073          	csrw	medeleg,a5
+    80004cf8:	30379073          	csrw	mideleg,a5
+    80004cfc:	104027f3          	csrr	a5,sie
+    80004d00:	2227e793          	ori	a5,a5,546
+    80004d04:	10479073          	csrw	sie,a5
+    80004d08:	57fd                	li	a5,-1
+    80004d0a:	83a9                	srli	a5,a5,0xa
+    80004d0c:	3b079073          	csrw	pmpaddr0,a5
+    80004d10:	47bd                	li	a5,15
+    80004d12:	3a079073          	csrw	pmpcfg0,a5
+    80004d16:	f65ff0ef          	jal	80004c7a <timerinit>
+    80004d1a:	f14027f3          	csrr	a5,mhartid
+    80004d1e:	2781                	sext.w	a5,a5
+    80004d20:	823e                	mv	tp,a5
+    80004d22:	30200073          	mret
+    80004d26:	60a2                	ld	ra,8(sp)
+    80004d28:	6402                	ld	s0,0(sp)
+    80004d2a:	0141                	addi	sp,sp,16
+    80004d2c:	8082                	ret
+
+0000000080004d2e <consolewrite>:
+//
+// user write()s to the console go here.
+//
+int
+consolewrite(int user_src, uint64 src, int n)
+{
+    80004d2e:	715d                	addi	sp,sp,-80
+    80004d30:	e486                	sd	ra,72(sp)
+    80004d32:	e0a2                	sd	s0,64(sp)
+    80004d34:	f84a                	sd	s2,48(sp)
+    80004d36:	0880                	addi	s0,sp,80
+  int i;
+
+  for(i = 0; i < n; i++){
+    80004d38:	04c05263          	blez	a2,80004d7c <consolewrite+0x4e>
+    80004d3c:	fc26                	sd	s1,56(sp)
+    80004d3e:	f44e                	sd	s3,40(sp)
+    80004d40:	f052                	sd	s4,32(sp)
+    80004d42:	ec56                	sd	s5,24(sp)
+    80004d44:	8a2a                	mv	s4,a0
+    80004d46:	84ae                	mv	s1,a1
+    80004d48:	89b2                	mv	s3,a2
+    80004d4a:	4901                	li	s2,0
+    char c;
+    if(either_copyin(&c, user_src, src+i, 1) == -1)
+    80004d4c:	5afd                	li	s5,-1
+    80004d4e:	4685                	li	a3,1
+    80004d50:	8626                	mv	a2,s1
+    80004d52:	85d2                	mv	a1,s4
+    80004d54:	fbf40513          	addi	a0,s0,-65
+    80004d58:	983fc0ef          	jal	800016da <either_copyin>
+    80004d5c:	03550263          	beq	a0,s5,80004d80 <consolewrite+0x52>
+      break;
+    uartputc(c);
+    80004d60:	fbf44503          	lbu	a0,-65(s0)
+    80004d64:	035000ef          	jal	80005598 <uartputc>
+  for(i = 0; i < n; i++){
+    80004d68:	2905                	addiw	s2,s2,1
+    80004d6a:	0485                	addi	s1,s1,1
+    80004d6c:	ff2991e3          	bne	s3,s2,80004d4e <consolewrite+0x20>
+    80004d70:	894e                	mv	s2,s3
+    80004d72:	74e2                	ld	s1,56(sp)
+    80004d74:	79a2                	ld	s3,40(sp)
+    80004d76:	7a02                	ld	s4,32(sp)
+    80004d78:	6ae2                	ld	s5,24(sp)
+    80004d7a:	a039                	j	80004d88 <consolewrite+0x5a>
+    80004d7c:	4901                	li	s2,0
+    80004d7e:	a029                	j	80004d88 <consolewrite+0x5a>
+    80004d80:	74e2                	ld	s1,56(sp)
+    80004d82:	79a2                	ld	s3,40(sp)
+    80004d84:	7a02                	ld	s4,32(sp)
+    80004d86:	6ae2                	ld	s5,24(sp)
+  }
+
+  return i;
+}
+    80004d88:	854a                	mv	a0,s2
+    80004d8a:	60a6                	ld	ra,72(sp)
+    80004d8c:	6406                	ld	s0,64(sp)
+    80004d8e:	7942                	ld	s2,48(sp)
+    80004d90:	6161                	addi	sp,sp,80
+    80004d92:	8082                	ret
+
+0000000080004d94 <consoleread>:
+// user_dist indicates whether dst is a user
+// or kernel address.
+//
+int
+consoleread(int user_dst, uint64 dst, int n)
+{
+    80004d94:	711d                	addi	sp,sp,-96
+    80004d96:	ec86                	sd	ra,88(sp)
+    80004d98:	e8a2                	sd	s0,80(sp)
+    80004d9a:	e4a6                	sd	s1,72(sp)
+    80004d9c:	e0ca                	sd	s2,64(sp)
+    80004d9e:	fc4e                	sd	s3,56(sp)
+    80004da0:	f852                	sd	s4,48(sp)
+    80004da2:	f456                	sd	s5,40(sp)
+    80004da4:	f05a                	sd	s6,32(sp)
+    80004da6:	1080                	addi	s0,sp,96
+    80004da8:	8aaa                	mv	s5,a0
+    80004daa:	8a2e                	mv	s4,a1
+    80004dac:	89b2                	mv	s3,a2
+  uint target;
+  int c;
+  char cbuf;
+
+  target = n;
+    80004dae:	00060b1b          	sext.w	s6,a2
+  acquire(&cons.lock);
+    80004db2:	0001e517          	auipc	a0,0x1e
+    80004db6:	68e50513          	addi	a0,a0,1678 # 80023440 <cons>
+    80004dba:	167000ef          	jal	80005720 <acquire>
+  while(n > 0){
+    // wait until interrupt handler has put some
+    // input into cons.buffer.
+    while(cons.r == cons.w){
+    80004dbe:	0001e497          	auipc	s1,0x1e
+    80004dc2:	68248493          	addi	s1,s1,1666 # 80023440 <cons>
+      if(killed(myproc())){
+        release(&cons.lock);
+        return -1;
+      }
+      sleep(&cons.r, &cons.lock);
+    80004dc6:	0001e917          	auipc	s2,0x1e
+    80004dca:	71290913          	addi	s2,s2,1810 # 800234d8 <cons+0x98>
+  while(n > 0){
+    80004dce:	0b305d63          	blez	s3,80004e88 <consoleread+0xf4>
+    while(cons.r == cons.w){
+    80004dd2:	0984a783          	lw	a5,152(s1)
+    80004dd6:	09c4a703          	lw	a4,156(s1)
+    80004dda:	0af71263          	bne	a4,a5,80004e7e <consoleread+0xea>
+      if(killed(myproc())){
+    80004dde:	f89fb0ef          	jal	80000d66 <myproc>
+    80004de2:	f8afc0ef          	jal	8000156c <killed>
+    80004de6:	e12d                	bnez	a0,80004e48 <consoleread+0xb4>
+      sleep(&cons.r, &cons.lock);
+    80004de8:	85a6                	mv	a1,s1
+    80004dea:	854a                	mv	a0,s2
+    80004dec:	d48fc0ef          	jal	80001334 <sleep>
+    while(cons.r == cons.w){
+    80004df0:	0984a783          	lw	a5,152(s1)
+    80004df4:	09c4a703          	lw	a4,156(s1)
+    80004df8:	fef703e3          	beq	a4,a5,80004dde <consoleread+0x4a>
+    80004dfc:	ec5e                	sd	s7,24(sp)
+    }
+
+    c = cons.buf[cons.r++ % INPUT_BUF_SIZE];
+    80004dfe:	0001e717          	auipc	a4,0x1e
+    80004e02:	64270713          	addi	a4,a4,1602 # 80023440 <cons>
+    80004e06:	0017869b          	addiw	a3,a5,1
+    80004e0a:	08d72c23          	sw	a3,152(a4)
+    80004e0e:	07f7f693          	andi	a3,a5,127
+    80004e12:	9736                	add	a4,a4,a3
+    80004e14:	01874703          	lbu	a4,24(a4)
+    80004e18:	00070b9b          	sext.w	s7,a4
+
+    if(c == C('D')){  // end-of-file
+    80004e1c:	4691                	li	a3,4
+    80004e1e:	04db8663          	beq	s7,a3,80004e6a <consoleread+0xd6>
+      }
+      break;
+    }
+
+    // copy the input byte to the user-space buffer.
+    cbuf = c;
+    80004e22:	fae407a3          	sb	a4,-81(s0)
+    if(either_copyout(user_dst, dst, &cbuf, 1) == -1)
+    80004e26:	4685                	li	a3,1
+    80004e28:	faf40613          	addi	a2,s0,-81
+    80004e2c:	85d2                	mv	a1,s4
+    80004e2e:	8556                	mv	a0,s5
+    80004e30:	861fc0ef          	jal	80001690 <either_copyout>
+    80004e34:	57fd                	li	a5,-1
+    80004e36:	04f50863          	beq	a0,a5,80004e86 <consoleread+0xf2>
+      break;
+
+    dst++;
+    80004e3a:	0a05                	addi	s4,s4,1
+    --n;
+    80004e3c:	39fd                	addiw	s3,s3,-1
+
+    if(c == '\n'){
+    80004e3e:	47a9                	li	a5,10
+    80004e40:	04fb8d63          	beq	s7,a5,80004e9a <consoleread+0x106>
+    80004e44:	6be2                	ld	s7,24(sp)
+    80004e46:	b761                	j	80004dce <consoleread+0x3a>
+        release(&cons.lock);
+    80004e48:	0001e517          	auipc	a0,0x1e
+    80004e4c:	5f850513          	addi	a0,a0,1528 # 80023440 <cons>
+    80004e50:	169000ef          	jal	800057b8 <release>
+        return -1;
+    80004e54:	557d                	li	a0,-1
+    }
+  }
+  release(&cons.lock);
+
+  return target - n;
+}
+    80004e56:	60e6                	ld	ra,88(sp)
+    80004e58:	6446                	ld	s0,80(sp)
+    80004e5a:	64a6                	ld	s1,72(sp)
+    80004e5c:	6906                	ld	s2,64(sp)
+    80004e5e:	79e2                	ld	s3,56(sp)
+    80004e60:	7a42                	ld	s4,48(sp)
+    80004e62:	7aa2                	ld	s5,40(sp)
+    80004e64:	7b02                	ld	s6,32(sp)
+    80004e66:	6125                	addi	sp,sp,96
+    80004e68:	8082                	ret
+      if(n < target){
+    80004e6a:	0009871b          	sext.w	a4,s3
+    80004e6e:	01677a63          	bgeu	a4,s6,80004e82 <consoleread+0xee>
+        cons.r--;
+    80004e72:	0001e717          	auipc	a4,0x1e
+    80004e76:	66f72323          	sw	a5,1638(a4) # 800234d8 <cons+0x98>
+    80004e7a:	6be2                	ld	s7,24(sp)
+    80004e7c:	a031                	j	80004e88 <consoleread+0xf4>
+    80004e7e:	ec5e                	sd	s7,24(sp)
+    80004e80:	bfbd                	j	80004dfe <consoleread+0x6a>
+    80004e82:	6be2                	ld	s7,24(sp)
+    80004e84:	a011                	j	80004e88 <consoleread+0xf4>
+    80004e86:	6be2                	ld	s7,24(sp)
+  release(&cons.lock);
+    80004e88:	0001e517          	auipc	a0,0x1e
+    80004e8c:	5b850513          	addi	a0,a0,1464 # 80023440 <cons>
+    80004e90:	129000ef          	jal	800057b8 <release>
+  return target - n;
+    80004e94:	413b053b          	subw	a0,s6,s3
+    80004e98:	bf7d                	j	80004e56 <consoleread+0xc2>
+    80004e9a:	6be2                	ld	s7,24(sp)
+    80004e9c:	b7f5                	j	80004e88 <consoleread+0xf4>
+
+0000000080004e9e <consputc>:
+{
+    80004e9e:	1141                	addi	sp,sp,-16
+    80004ea0:	e406                	sd	ra,8(sp)
+    80004ea2:	e022                	sd	s0,0(sp)
+    80004ea4:	0800                	addi	s0,sp,16
+  if(c == BACKSPACE){
+    80004ea6:	10000793          	li	a5,256
+    80004eaa:	00f50863          	beq	a0,a5,80004eba <consputc+0x1c>
+    uartputc_sync(c);
+    80004eae:	604000ef          	jal	800054b2 <uartputc_sync>
+}
+    80004eb2:	60a2                	ld	ra,8(sp)
+    80004eb4:	6402                	ld	s0,0(sp)
+    80004eb6:	0141                	addi	sp,sp,16
+    80004eb8:	8082                	ret
+    uartputc_sync('\b'); uartputc_sync(' '); uartputc_sync('\b');
+    80004eba:	4521                	li	a0,8
+    80004ebc:	5f6000ef          	jal	800054b2 <uartputc_sync>
+    80004ec0:	02000513          	li	a0,32
+    80004ec4:	5ee000ef          	jal	800054b2 <uartputc_sync>
+    80004ec8:	4521                	li	a0,8
+    80004eca:	5e8000ef          	jal	800054b2 <uartputc_sync>
+    80004ece:	b7d5                	j	80004eb2 <consputc+0x14>
+
+0000000080004ed0 <consoleintr>:
+// do erase/kill processing, append to cons.buf,
+// wake up consoleread() if a whole line has arrived.
+//
+void
+consoleintr(int c)
+{
+    80004ed0:	1101                	addi	sp,sp,-32
+    80004ed2:	ec06                	sd	ra,24(sp)
+    80004ed4:	e822                	sd	s0,16(sp)
+    80004ed6:	e426                	sd	s1,8(sp)
+    80004ed8:	1000                	addi	s0,sp,32
+    80004eda:	84aa                	mv	s1,a0
+  acquire(&cons.lock);
+    80004edc:	0001e517          	auipc	a0,0x1e
+    80004ee0:	56450513          	addi	a0,a0,1380 # 80023440 <cons>
+    80004ee4:	03d000ef          	jal	80005720 <acquire>
+
+  switch(c){
+    80004ee8:	47d5                	li	a5,21
+    80004eea:	08f48f63          	beq	s1,a5,80004f88 <consoleintr+0xb8>
+    80004eee:	0297c563          	blt	a5,s1,80004f18 <consoleintr+0x48>
+    80004ef2:	47a1                	li	a5,8
+    80004ef4:	0ef48463          	beq	s1,a5,80004fdc <consoleintr+0x10c>
+    80004ef8:	47c1                	li	a5,16
+    80004efa:	10f49563          	bne	s1,a5,80005004 <consoleintr+0x134>
+  case C('P'):  // Print process list.
+    procdump();
+    80004efe:	827fc0ef          	jal	80001724 <procdump>
+      }
+    }
+    break;
+  }
+  
+  release(&cons.lock);
+    80004f02:	0001e517          	auipc	a0,0x1e
+    80004f06:	53e50513          	addi	a0,a0,1342 # 80023440 <cons>
+    80004f0a:	0af000ef          	jal	800057b8 <release>
+}
+    80004f0e:	60e2                	ld	ra,24(sp)
+    80004f10:	6442                	ld	s0,16(sp)
+    80004f12:	64a2                	ld	s1,8(sp)
+    80004f14:	6105                	addi	sp,sp,32
+    80004f16:	8082                	ret
+  switch(c){
+    80004f18:	07f00793          	li	a5,127
+    80004f1c:	0cf48063          	beq	s1,a5,80004fdc <consoleintr+0x10c>
+    if(c != 0 && cons.e-cons.r < INPUT_BUF_SIZE){
+    80004f20:	0001e717          	auipc	a4,0x1e
+    80004f24:	52070713          	addi	a4,a4,1312 # 80023440 <cons>
+    80004f28:	0a072783          	lw	a5,160(a4)
+    80004f2c:	09872703          	lw	a4,152(a4)
+    80004f30:	9f99                	subw	a5,a5,a4
+    80004f32:	07f00713          	li	a4,127
+    80004f36:	fcf766e3          	bltu	a4,a5,80004f02 <consoleintr+0x32>
+      c = (c == '\r') ? '\n' : c;
+    80004f3a:	47b5                	li	a5,13
+    80004f3c:	0cf48763          	beq	s1,a5,8000500a <consoleintr+0x13a>
+      consputc(c);
+    80004f40:	8526                	mv	a0,s1
+    80004f42:	f5dff0ef          	jal	80004e9e <consputc>
+      cons.buf[cons.e++ % INPUT_BUF_SIZE] = c;
+    80004f46:	0001e797          	auipc	a5,0x1e
+    80004f4a:	4fa78793          	addi	a5,a5,1274 # 80023440 <cons>
+    80004f4e:	0a07a683          	lw	a3,160(a5)
+    80004f52:	0016871b          	addiw	a4,a3,1
+    80004f56:	0007061b          	sext.w	a2,a4
+    80004f5a:	0ae7a023          	sw	a4,160(a5)
+    80004f5e:	07f6f693          	andi	a3,a3,127
+    80004f62:	97b6                	add	a5,a5,a3
+    80004f64:	00978c23          	sb	s1,24(a5)
+      if(c == '\n' || c == C('D') || cons.e-cons.r == INPUT_BUF_SIZE){
+    80004f68:	47a9                	li	a5,10
+    80004f6a:	0cf48563          	beq	s1,a5,80005034 <consoleintr+0x164>
+    80004f6e:	4791                	li	a5,4
+    80004f70:	0cf48263          	beq	s1,a5,80005034 <consoleintr+0x164>
+    80004f74:	0001e797          	auipc	a5,0x1e
+    80004f78:	5647a783          	lw	a5,1380(a5) # 800234d8 <cons+0x98>
+    80004f7c:	9f1d                	subw	a4,a4,a5
+    80004f7e:	08000793          	li	a5,128
+    80004f82:	f8f710e3          	bne	a4,a5,80004f02 <consoleintr+0x32>
+    80004f86:	a07d                	j	80005034 <consoleintr+0x164>
+    80004f88:	e04a                	sd	s2,0(sp)
+    while(cons.e != cons.w &&
+    80004f8a:	0001e717          	auipc	a4,0x1e
+    80004f8e:	4b670713          	addi	a4,a4,1206 # 80023440 <cons>
+    80004f92:	0a072783          	lw	a5,160(a4)
+    80004f96:	09c72703          	lw	a4,156(a4)
+          cons.buf[(cons.e-1) % INPUT_BUF_SIZE] != '\n'){
+    80004f9a:	0001e497          	auipc	s1,0x1e
+    80004f9e:	4a648493          	addi	s1,s1,1190 # 80023440 <cons>
+    while(cons.e != cons.w &&
+    80004fa2:	4929                	li	s2,10
+    80004fa4:	02f70863          	beq	a4,a5,80004fd4 <consoleintr+0x104>
+          cons.buf[(cons.e-1) % INPUT_BUF_SIZE] != '\n'){
+    80004fa8:	37fd                	addiw	a5,a5,-1
+    80004faa:	07f7f713          	andi	a4,a5,127
+    80004fae:	9726                	add	a4,a4,s1
+    while(cons.e != cons.w &&
+    80004fb0:	01874703          	lbu	a4,24(a4)
+    80004fb4:	03270263          	beq	a4,s2,80004fd8 <consoleintr+0x108>
+      cons.e--;
+    80004fb8:	0af4a023          	sw	a5,160(s1)
+      consputc(BACKSPACE);
+    80004fbc:	10000513          	li	a0,256
+    80004fc0:	edfff0ef          	jal	80004e9e <consputc>
+    while(cons.e != cons.w &&
+    80004fc4:	0a04a783          	lw	a5,160(s1)
+    80004fc8:	09c4a703          	lw	a4,156(s1)
+    80004fcc:	fcf71ee3          	bne	a4,a5,80004fa8 <consoleintr+0xd8>
+    80004fd0:	6902                	ld	s2,0(sp)
+    80004fd2:	bf05                	j	80004f02 <consoleintr+0x32>
+    80004fd4:	6902                	ld	s2,0(sp)
+    80004fd6:	b735                	j	80004f02 <consoleintr+0x32>
+    80004fd8:	6902                	ld	s2,0(sp)
+    80004fda:	b725                	j	80004f02 <consoleintr+0x32>
+    if(cons.e != cons.w){
+    80004fdc:	0001e717          	auipc	a4,0x1e
+    80004fe0:	46470713          	addi	a4,a4,1124 # 80023440 <cons>
+    80004fe4:	0a072783          	lw	a5,160(a4)
+    80004fe8:	09c72703          	lw	a4,156(a4)
+    80004fec:	f0f70be3          	beq	a4,a5,80004f02 <consoleintr+0x32>
+      cons.e--;
+    80004ff0:	37fd                	addiw	a5,a5,-1
+    80004ff2:	0001e717          	auipc	a4,0x1e
+    80004ff6:	4ef72723          	sw	a5,1262(a4) # 800234e0 <cons+0xa0>
+      consputc(BACKSPACE);
+    80004ffa:	10000513          	li	a0,256
+    80004ffe:	ea1ff0ef          	jal	80004e9e <consputc>
+    80005002:	b701                	j	80004f02 <consoleintr+0x32>
+    if(c != 0 && cons.e-cons.r < INPUT_BUF_SIZE){
+    80005004:	ee048fe3          	beqz	s1,80004f02 <consoleintr+0x32>
+    80005008:	bf21                	j	80004f20 <consoleintr+0x50>
+      consputc(c);
+    8000500a:	4529                	li	a0,10
+    8000500c:	e93ff0ef          	jal	80004e9e <consputc>
+      cons.buf[cons.e++ % INPUT_BUF_SIZE] = c;
+    80005010:	0001e797          	auipc	a5,0x1e
+    80005014:	43078793          	addi	a5,a5,1072 # 80023440 <cons>
+    80005018:	0a07a703          	lw	a4,160(a5)
+    8000501c:	0017069b          	addiw	a3,a4,1
+    80005020:	0006861b          	sext.w	a2,a3
+    80005024:	0ad7a023          	sw	a3,160(a5)
+    80005028:	07f77713          	andi	a4,a4,127
+    8000502c:	97ba                	add	a5,a5,a4
+    8000502e:	4729                	li	a4,10
+    80005030:	00e78c23          	sb	a4,24(a5)
+        cons.w = cons.e;
+    80005034:	0001e797          	auipc	a5,0x1e
+    80005038:	4ac7a423          	sw	a2,1192(a5) # 800234dc <cons+0x9c>
+        wakeup(&cons.r);
+    8000503c:	0001e517          	auipc	a0,0x1e
+    80005040:	49c50513          	addi	a0,a0,1180 # 800234d8 <cons+0x98>
+    80005044:	b3cfc0ef          	jal	80001380 <wakeup>
+    80005048:	bd6d                	j	80004f02 <consoleintr+0x32>
+
+000000008000504a <consoleinit>:
+
+void
+consoleinit(void)
+{
+    8000504a:	1141                	addi	sp,sp,-16
+    8000504c:	e406                	sd	ra,8(sp)
+    8000504e:	e022                	sd	s0,0(sp)
+    80005050:	0800                	addi	s0,sp,16
+  initlock(&cons.lock, "cons");
+    80005052:	00002597          	auipc	a1,0x2
+    80005056:	6be58593          	addi	a1,a1,1726 # 80007710 <etext+0x710>
+    8000505a:	0001e517          	auipc	a0,0x1e
+    8000505e:	3e650513          	addi	a0,a0,998 # 80023440 <cons>
+    80005062:	63e000ef          	jal	800056a0 <initlock>
+
+  uartinit();
+    80005066:	3f4000ef          	jal	8000545a <uartinit>
+
+  // connect read and write system calls
+  // to consoleread and consolewrite.
+  devsw[CONSOLE].read = consoleread;
+    8000506a:	00015797          	auipc	a5,0x15
+    8000506e:	23e78793          	addi	a5,a5,574 # 8001a2a8 <devsw>
+    80005072:	00000717          	auipc	a4,0x0
+    80005076:	d2270713          	addi	a4,a4,-734 # 80004d94 <consoleread>
+    8000507a:	eb98                	sd	a4,16(a5)
+  devsw[CONSOLE].write = consolewrite;
+    8000507c:	00000717          	auipc	a4,0x0
+    80005080:	cb270713          	addi	a4,a4,-846 # 80004d2e <consolewrite>
+    80005084:	ef98                	sd	a4,24(a5)
+}
+    80005086:	60a2                	ld	ra,8(sp)
+    80005088:	6402                	ld	s0,0(sp)
+    8000508a:	0141                	addi	sp,sp,16
+    8000508c:	8082                	ret
+
+000000008000508e <printint>:
+    8000508e:	7179                	addi	sp,sp,-48
+    80005090:	f406                	sd	ra,40(sp)
+    80005092:	f022                	sd	s0,32(sp)
+    80005094:	1800                	addi	s0,sp,48
+    80005096:	c219                	beqz	a2,8000509c <printint+0xe>
+    80005098:	08054063          	bltz	a0,80005118 <printint+0x8a>
+    8000509c:	4881                	li	a7,0
+    8000509e:	fd040693          	addi	a3,s0,-48
+    800050a2:	4781                	li	a5,0
+    800050a4:	00002617          	auipc	a2,0x2
+    800050a8:	7c460613          	addi	a2,a2,1988 # 80007868 <digits>
+    800050ac:	883e                	mv	a6,a5
+    800050ae:	2785                	addiw	a5,a5,1
+    800050b0:	02b57733          	remu	a4,a0,a1
+    800050b4:	9732                	add	a4,a4,a2
+    800050b6:	00074703          	lbu	a4,0(a4)
+    800050ba:	00e68023          	sb	a4,0(a3)
+    800050be:	872a                	mv	a4,a0
+    800050c0:	02b55533          	divu	a0,a0,a1
+    800050c4:	0685                	addi	a3,a3,1
+    800050c6:	feb773e3          	bgeu	a4,a1,800050ac <printint+0x1e>
+    800050ca:	00088a63          	beqz	a7,800050de <printint+0x50>
+    800050ce:	1781                	addi	a5,a5,-32
+    800050d0:	97a2                	add	a5,a5,s0
+    800050d2:	02d00713          	li	a4,45
+    800050d6:	fee78823          	sb	a4,-16(a5)
+    800050da:	0028079b          	addiw	a5,a6,2
+    800050de:	02f05963          	blez	a5,80005110 <printint+0x82>
+    800050e2:	ec26                	sd	s1,24(sp)
+    800050e4:	e84a                	sd	s2,16(sp)
+    800050e6:	fd040713          	addi	a4,s0,-48
+    800050ea:	00f704b3          	add	s1,a4,a5
+    800050ee:	fff70913          	addi	s2,a4,-1
+    800050f2:	993e                	add	s2,s2,a5
+    800050f4:	37fd                	addiw	a5,a5,-1
+    800050f6:	1782                	slli	a5,a5,0x20
+    800050f8:	9381                	srli	a5,a5,0x20
+    800050fa:	40f90933          	sub	s2,s2,a5
+    800050fe:	fff4c503          	lbu	a0,-1(s1)
+    80005102:	d9dff0ef          	jal	80004e9e <consputc>
+    80005106:	14fd                	addi	s1,s1,-1
+    80005108:	ff249be3          	bne	s1,s2,800050fe <printint+0x70>
+    8000510c:	64e2                	ld	s1,24(sp)
+    8000510e:	6942                	ld	s2,16(sp)
+    80005110:	70a2                	ld	ra,40(sp)
+    80005112:	7402                	ld	s0,32(sp)
+    80005114:	6145                	addi	sp,sp,48
+    80005116:	8082                	ret
+    80005118:	40a00533          	neg	a0,a0
+    8000511c:	4885                	li	a7,1
+    8000511e:	b741                	j	8000509e <printint+0x10>
+
+0000000080005120 <printf>:
+    80005120:	7155                	addi	sp,sp,-208
+    80005122:	e506                	sd	ra,136(sp)
+    80005124:	e122                	sd	s0,128(sp)
+    80005126:	f0d2                	sd	s4,96(sp)
+    80005128:	0900                	addi	s0,sp,144
+    8000512a:	8a2a                	mv	s4,a0
+    8000512c:	e40c                	sd	a1,8(s0)
+    8000512e:	e810                	sd	a2,16(s0)
+    80005130:	ec14                	sd	a3,24(s0)
+    80005132:	f018                	sd	a4,32(s0)
+    80005134:	f41c                	sd	a5,40(s0)
+    80005136:	03043823          	sd	a6,48(s0)
+    8000513a:	03143c23          	sd	a7,56(s0)
+    8000513e:	0001e797          	auipc	a5,0x1e
+    80005142:	3c27a783          	lw	a5,962(a5) # 80023500 <pr+0x18>
+    80005146:	f6f43c23          	sd	a5,-136(s0)
+    8000514a:	e3a1                	bnez	a5,8000518a <printf+0x6a>
+    8000514c:	00840793          	addi	a5,s0,8
+    80005150:	f8f43423          	sd	a5,-120(s0)
+    80005154:	00054503          	lbu	a0,0(a0)
+    80005158:	26050763          	beqz	a0,800053c6 <printf+0x2a6>
+    8000515c:	fca6                	sd	s1,120(sp)
+    8000515e:	f8ca                	sd	s2,112(sp)
+    80005160:	f4ce                	sd	s3,104(sp)
+    80005162:	ecd6                	sd	s5,88(sp)
+    80005164:	e8da                	sd	s6,80(sp)
+    80005166:	e0e2                	sd	s8,64(sp)
+    80005168:	fc66                	sd	s9,56(sp)
+    8000516a:	f86a                	sd	s10,48(sp)
+    8000516c:	f46e                	sd	s11,40(sp)
+    8000516e:	4981                	li	s3,0
+    80005170:	02500a93          	li	s5,37
+    80005174:	06400b13          	li	s6,100
+    80005178:	06c00c13          	li	s8,108
+    8000517c:	07500c93          	li	s9,117
+    80005180:	07800d13          	li	s10,120
+    80005184:	07000d93          	li	s11,112
+    80005188:	a815                	j	800051bc <printf+0x9c>
+    8000518a:	0001e517          	auipc	a0,0x1e
+    8000518e:	35e50513          	addi	a0,a0,862 # 800234e8 <pr>
+    80005192:	58e000ef          	jal	80005720 <acquire>
+    80005196:	00840793          	addi	a5,s0,8
+    8000519a:	f8f43423          	sd	a5,-120(s0)
+    8000519e:	000a4503          	lbu	a0,0(s4)
+    800051a2:	fd4d                	bnez	a0,8000515c <printf+0x3c>
+    800051a4:	a481                	j	800053e4 <printf+0x2c4>
+    800051a6:	cf9ff0ef          	jal	80004e9e <consputc>
+    800051aa:	84ce                	mv	s1,s3
+    800051ac:	0014899b          	addiw	s3,s1,1
+    800051b0:	013a07b3          	add	a5,s4,s3
+    800051b4:	0007c503          	lbu	a0,0(a5)
+    800051b8:	1e050b63          	beqz	a0,800053ae <printf+0x28e>
+    800051bc:	ff5515e3          	bne	a0,s5,800051a6 <printf+0x86>
+    800051c0:	0019849b          	addiw	s1,s3,1
+    800051c4:	009a07b3          	add	a5,s4,s1
+    800051c8:	0007c903          	lbu	s2,0(a5)
+    800051cc:	1e090163          	beqz	s2,800053ae <printf+0x28e>
+    800051d0:	0017c783          	lbu	a5,1(a5)
+    800051d4:	86be                	mv	a3,a5
+    800051d6:	c789                	beqz	a5,800051e0 <printf+0xc0>
+    800051d8:	009a0733          	add	a4,s4,s1
+    800051dc:	00274683          	lbu	a3,2(a4)
+    800051e0:	03690763          	beq	s2,s6,8000520e <printf+0xee>
+    800051e4:	05890163          	beq	s2,s8,80005226 <printf+0x106>
+    800051e8:	0d990b63          	beq	s2,s9,800052be <printf+0x19e>
+    800051ec:	13a90163          	beq	s2,s10,8000530e <printf+0x1ee>
+    800051f0:	13b90b63          	beq	s2,s11,80005326 <printf+0x206>
+    800051f4:	07300793          	li	a5,115
+    800051f8:	16f90a63          	beq	s2,a5,8000536c <printf+0x24c>
+    800051fc:	1b590463          	beq	s2,s5,800053a4 <printf+0x284>
+    80005200:	8556                	mv	a0,s5
+    80005202:	c9dff0ef          	jal	80004e9e <consputc>
+    80005206:	854a                	mv	a0,s2
+    80005208:	c97ff0ef          	jal	80004e9e <consputc>
+    8000520c:	b745                	j	800051ac <printf+0x8c>
+    8000520e:	f8843783          	ld	a5,-120(s0)
+    80005212:	00878713          	addi	a4,a5,8
+    80005216:	f8e43423          	sd	a4,-120(s0)
+    8000521a:	4605                	li	a2,1
+    8000521c:	45a9                	li	a1,10
+    8000521e:	4388                	lw	a0,0(a5)
+    80005220:	e6fff0ef          	jal	8000508e <printint>
+    80005224:	b761                	j	800051ac <printf+0x8c>
+    80005226:	03678663          	beq	a5,s6,80005252 <printf+0x132>
+    8000522a:	05878263          	beq	a5,s8,8000526e <printf+0x14e>
+    8000522e:	0b978463          	beq	a5,s9,800052d6 <printf+0x1b6>
+    80005232:	fda797e3          	bne	a5,s10,80005200 <printf+0xe0>
+    80005236:	f8843783          	ld	a5,-120(s0)
+    8000523a:	00878713          	addi	a4,a5,8
+    8000523e:	f8e43423          	sd	a4,-120(s0)
+    80005242:	4601                	li	a2,0
+    80005244:	45c1                	li	a1,16
+    80005246:	6388                	ld	a0,0(a5)
+    80005248:	e47ff0ef          	jal	8000508e <printint>
+    8000524c:	0029849b          	addiw	s1,s3,2
+    80005250:	bfb1                	j	800051ac <printf+0x8c>
+    80005252:	f8843783          	ld	a5,-120(s0)
+    80005256:	00878713          	addi	a4,a5,8
+    8000525a:	f8e43423          	sd	a4,-120(s0)
+    8000525e:	4605                	li	a2,1
+    80005260:	45a9                	li	a1,10
+    80005262:	6388                	ld	a0,0(a5)
+    80005264:	e2bff0ef          	jal	8000508e <printint>
+    80005268:	0029849b          	addiw	s1,s3,2
+    8000526c:	b781                	j	800051ac <printf+0x8c>
+    8000526e:	06400793          	li	a5,100
+    80005272:	02f68863          	beq	a3,a5,800052a2 <printf+0x182>
+    80005276:	07500793          	li	a5,117
+    8000527a:	06f68c63          	beq	a3,a5,800052f2 <printf+0x1d2>
+    8000527e:	07800793          	li	a5,120
+    80005282:	f6f69fe3          	bne	a3,a5,80005200 <printf+0xe0>
+    80005286:	f8843783          	ld	a5,-120(s0)
+    8000528a:	00878713          	addi	a4,a5,8
+    8000528e:	f8e43423          	sd	a4,-120(s0)
+    80005292:	4601                	li	a2,0
+    80005294:	45c1                	li	a1,16
+    80005296:	6388                	ld	a0,0(a5)
+    80005298:	df7ff0ef          	jal	8000508e <printint>
+    8000529c:	0039849b          	addiw	s1,s3,3
+    800052a0:	b731                	j	800051ac <printf+0x8c>
+    800052a2:	f8843783          	ld	a5,-120(s0)
+    800052a6:	00878713          	addi	a4,a5,8
+    800052aa:	f8e43423          	sd	a4,-120(s0)
+    800052ae:	4605                	li	a2,1
+    800052b0:	45a9                	li	a1,10
+    800052b2:	6388                	ld	a0,0(a5)
+    800052b4:	ddbff0ef          	jal	8000508e <printint>
+    800052b8:	0039849b          	addiw	s1,s3,3
+    800052bc:	bdc5                	j	800051ac <printf+0x8c>
+    800052be:	f8843783          	ld	a5,-120(s0)
+    800052c2:	00878713          	addi	a4,a5,8
+    800052c6:	f8e43423          	sd	a4,-120(s0)
+    800052ca:	4601                	li	a2,0
+    800052cc:	45a9                	li	a1,10
+    800052ce:	4388                	lw	a0,0(a5)
+    800052d0:	dbfff0ef          	jal	8000508e <printint>
+    800052d4:	bde1                	j	800051ac <printf+0x8c>
+    800052d6:	f8843783          	ld	a5,-120(s0)
+    800052da:	00878713          	addi	a4,a5,8
+    800052de:	f8e43423          	sd	a4,-120(s0)
+    800052e2:	4601                	li	a2,0
+    800052e4:	45a9                	li	a1,10
+    800052e6:	6388                	ld	a0,0(a5)
+    800052e8:	da7ff0ef          	jal	8000508e <printint>
+    800052ec:	0029849b          	addiw	s1,s3,2
+    800052f0:	bd75                	j	800051ac <printf+0x8c>
+    800052f2:	f8843783          	ld	a5,-120(s0)
+    800052f6:	00878713          	addi	a4,a5,8
+    800052fa:	f8e43423          	sd	a4,-120(s0)
+    800052fe:	4601                	li	a2,0
+    80005300:	45a9                	li	a1,10
+    80005302:	6388                	ld	a0,0(a5)
+    80005304:	d8bff0ef          	jal	8000508e <printint>
+    80005308:	0039849b          	addiw	s1,s3,3
+    8000530c:	b545                	j	800051ac <printf+0x8c>
+    8000530e:	f8843783          	ld	a5,-120(s0)
+    80005312:	00878713          	addi	a4,a5,8
+    80005316:	f8e43423          	sd	a4,-120(s0)
+    8000531a:	4601                	li	a2,0
+    8000531c:	45c1                	li	a1,16
+    8000531e:	4388                	lw	a0,0(a5)
+    80005320:	d6fff0ef          	jal	8000508e <printint>
+    80005324:	b561                	j	800051ac <printf+0x8c>
+    80005326:	e4de                	sd	s7,72(sp)
+    80005328:	f8843783          	ld	a5,-120(s0)
+    8000532c:	00878713          	addi	a4,a5,8
+    80005330:	f8e43423          	sd	a4,-120(s0)
+    80005334:	0007b983          	ld	s3,0(a5)
+    80005338:	03000513          	li	a0,48
+    8000533c:	b63ff0ef          	jal	80004e9e <consputc>
+    80005340:	07800513          	li	a0,120
+    80005344:	b5bff0ef          	jal	80004e9e <consputc>
+    80005348:	4941                	li	s2,16
+    8000534a:	00002b97          	auipc	s7,0x2
+    8000534e:	51eb8b93          	addi	s7,s7,1310 # 80007868 <digits>
+    80005352:	03c9d793          	srli	a5,s3,0x3c
+    80005356:	97de                	add	a5,a5,s7
+    80005358:	0007c503          	lbu	a0,0(a5)
+    8000535c:	b43ff0ef          	jal	80004e9e <consputc>
+    80005360:	0992                	slli	s3,s3,0x4
+    80005362:	397d                	addiw	s2,s2,-1
+    80005364:	fe0917e3          	bnez	s2,80005352 <printf+0x232>
+    80005368:	6ba6                	ld	s7,72(sp)
+    8000536a:	b589                	j	800051ac <printf+0x8c>
+    8000536c:	f8843783          	ld	a5,-120(s0)
+    80005370:	00878713          	addi	a4,a5,8
+    80005374:	f8e43423          	sd	a4,-120(s0)
+    80005378:	0007b903          	ld	s2,0(a5)
+    8000537c:	00090d63          	beqz	s2,80005396 <printf+0x276>
+    80005380:	00094503          	lbu	a0,0(s2)
+    80005384:	e20504e3          	beqz	a0,800051ac <printf+0x8c>
+    80005388:	b17ff0ef          	jal	80004e9e <consputc>
+    8000538c:	0905                	addi	s2,s2,1
+    8000538e:	00094503          	lbu	a0,0(s2)
+    80005392:	f97d                	bnez	a0,80005388 <printf+0x268>
+    80005394:	bd21                	j	800051ac <printf+0x8c>
+    80005396:	00002917          	auipc	s2,0x2
+    8000539a:	38290913          	addi	s2,s2,898 # 80007718 <etext+0x718>
+    8000539e:	02800513          	li	a0,40
+    800053a2:	b7dd                	j	80005388 <printf+0x268>
+    800053a4:	02500513          	li	a0,37
+    800053a8:	af7ff0ef          	jal	80004e9e <consputc>
+    800053ac:	b501                	j	800051ac <printf+0x8c>
+    800053ae:	f7843783          	ld	a5,-136(s0)
+    800053b2:	e385                	bnez	a5,800053d2 <printf+0x2b2>
+    800053b4:	74e6                	ld	s1,120(sp)
+    800053b6:	7946                	ld	s2,112(sp)
+    800053b8:	79a6                	ld	s3,104(sp)
+    800053ba:	6ae6                	ld	s5,88(sp)
+    800053bc:	6b46                	ld	s6,80(sp)
+    800053be:	6c06                	ld	s8,64(sp)
+    800053c0:	7ce2                	ld	s9,56(sp)
+    800053c2:	7d42                	ld	s10,48(sp)
+    800053c4:	7da2                	ld	s11,40(sp)
+    800053c6:	4501                	li	a0,0
+    800053c8:	60aa                	ld	ra,136(sp)
+    800053ca:	640a                	ld	s0,128(sp)
+    800053cc:	7a06                	ld	s4,96(sp)
+    800053ce:	6169                	addi	sp,sp,208
+    800053d0:	8082                	ret
+    800053d2:	74e6                	ld	s1,120(sp)
+    800053d4:	7946                	ld	s2,112(sp)
+    800053d6:	79a6                	ld	s3,104(sp)
+    800053d8:	6ae6                	ld	s5,88(sp)
+    800053da:	6b46                	ld	s6,80(sp)
+    800053dc:	6c06                	ld	s8,64(sp)
+    800053de:	7ce2                	ld	s9,56(sp)
+    800053e0:	7d42                	ld	s10,48(sp)
+    800053e2:	7da2                	ld	s11,40(sp)
+    800053e4:	0001e517          	auipc	a0,0x1e
+    800053e8:	10450513          	addi	a0,a0,260 # 800234e8 <pr>
+    800053ec:	3cc000ef          	jal	800057b8 <release>
+    800053f0:	bfd9                	j	800053c6 <printf+0x2a6>
+
+00000000800053f2 <panic>:
+    800053f2:	1101                	addi	sp,sp,-32
+    800053f4:	ec06                	sd	ra,24(sp)
+    800053f6:	e822                	sd	s0,16(sp)
+    800053f8:	e426                	sd	s1,8(sp)
+    800053fa:	1000                	addi	s0,sp,32
+    800053fc:	84aa                	mv	s1,a0
+    800053fe:	0001e797          	auipc	a5,0x1e
+    80005402:	1007a123          	sw	zero,258(a5) # 80023500 <pr+0x18>
+    80005406:	00002517          	auipc	a0,0x2
+    8000540a:	31a50513          	addi	a0,a0,794 # 80007720 <etext+0x720>
+    8000540e:	d13ff0ef          	jal	80005120 <printf>
+    80005412:	85a6                	mv	a1,s1
+    80005414:	00002517          	auipc	a0,0x2
+    80005418:	31450513          	addi	a0,a0,788 # 80007728 <etext+0x728>
+    8000541c:	d05ff0ef          	jal	80005120 <printf>
+    80005420:	4785                	li	a5,1
+    80005422:	00005717          	auipc	a4,0x5
+    80005426:	dcf72d23          	sw	a5,-550(a4) # 8000a1fc <panicked>
+    8000542a:	a001                	j	8000542a <panic+0x38>
+
+000000008000542c <printfinit>:
+    8000542c:	1101                	addi	sp,sp,-32
+    8000542e:	ec06                	sd	ra,24(sp)
+    80005430:	e822                	sd	s0,16(sp)
+    80005432:	e426                	sd	s1,8(sp)
+    80005434:	1000                	addi	s0,sp,32
+    80005436:	0001e497          	auipc	s1,0x1e
+    8000543a:	0b248493          	addi	s1,s1,178 # 800234e8 <pr>
+    8000543e:	00002597          	auipc	a1,0x2
+    80005442:	2f258593          	addi	a1,a1,754 # 80007730 <etext+0x730>
+    80005446:	8526                	mv	a0,s1
+    80005448:	258000ef          	jal	800056a0 <initlock>
+    8000544c:	4785                	li	a5,1
+    8000544e:	cc9c                	sw	a5,24(s1)
+    80005450:	60e2                	ld	ra,24(sp)
+    80005452:	6442                	ld	s0,16(sp)
+    80005454:	64a2                	ld	s1,8(sp)
+    80005456:	6105                	addi	sp,sp,32
+    80005458:	8082                	ret
+
+000000008000545a <uartinit>:
+    8000545a:	1141                	addi	sp,sp,-16
+    8000545c:	e406                	sd	ra,8(sp)
+    8000545e:	e022                	sd	s0,0(sp)
+    80005460:	0800                	addi	s0,sp,16
+    80005462:	100007b7          	lui	a5,0x10000
+    80005466:	000780a3          	sb	zero,1(a5) # 10000001 <_entry-0x6fffffff>
+    8000546a:	10000737          	lui	a4,0x10000
+    8000546e:	f8000693          	li	a3,-128
+    80005472:	00d701a3          	sb	a3,3(a4) # 10000003 <_entry-0x6ffffffd>
+    80005476:	468d                	li	a3,3
+    80005478:	10000637          	lui	a2,0x10000
+    8000547c:	00d60023          	sb	a3,0(a2) # 10000000 <_entry-0x70000000>
+    80005480:	000780a3          	sb	zero,1(a5)
+    80005484:	00d701a3          	sb	a3,3(a4)
+    80005488:	10000737          	lui	a4,0x10000
+    8000548c:	461d                	li	a2,7
+    8000548e:	00c70123          	sb	a2,2(a4) # 10000002 <_entry-0x6ffffffe>
+    80005492:	00d780a3          	sb	a3,1(a5)
+    80005496:	00002597          	auipc	a1,0x2
+    8000549a:	2a258593          	addi	a1,a1,674 # 80007738 <etext+0x738>
+    8000549e:	0001e517          	auipc	a0,0x1e
+    800054a2:	06a50513          	addi	a0,a0,106 # 80023508 <uart_tx_lock>
+    800054a6:	1fa000ef          	jal	800056a0 <initlock>
+    800054aa:	60a2                	ld	ra,8(sp)
+    800054ac:	6402                	ld	s0,0(sp)
+    800054ae:	0141                	addi	sp,sp,16
+    800054b0:	8082                	ret
+
+00000000800054b2 <uartputc_sync>:
+    800054b2:	1101                	addi	sp,sp,-32
+    800054b4:	ec06                	sd	ra,24(sp)
+    800054b6:	e822                	sd	s0,16(sp)
+    800054b8:	e426                	sd	s1,8(sp)
+    800054ba:	1000                	addi	s0,sp,32
+    800054bc:	84aa                	mv	s1,a0
+    800054be:	222000ef          	jal	800056e0 <push_off>
+    800054c2:	00005797          	auipc	a5,0x5
+    800054c6:	d3a7a783          	lw	a5,-710(a5) # 8000a1fc <panicked>
+    800054ca:	e795                	bnez	a5,800054f6 <uartputc_sync+0x44>
+    800054cc:	10000737          	lui	a4,0x10000
+    800054d0:	0715                	addi	a4,a4,5 # 10000005 <_entry-0x6ffffffb>
+    800054d2:	00074783          	lbu	a5,0(a4)
+    800054d6:	0207f793          	andi	a5,a5,32
+    800054da:	dfe5                	beqz	a5,800054d2 <uartputc_sync+0x20>
+    800054dc:	0ff4f513          	zext.b	a0,s1
+    800054e0:	100007b7          	lui	a5,0x10000
+    800054e4:	00a78023          	sb	a0,0(a5) # 10000000 <_entry-0x70000000>
+    800054e8:	27c000ef          	jal	80005764 <pop_off>
+    800054ec:	60e2                	ld	ra,24(sp)
+    800054ee:	6442                	ld	s0,16(sp)
+    800054f0:	64a2                	ld	s1,8(sp)
+    800054f2:	6105                	addi	sp,sp,32
+    800054f4:	8082                	ret
+    800054f6:	a001                	j	800054f6 <uartputc_sync+0x44>
+
+00000000800054f8 <uartstart>:
+    800054f8:	00005797          	auipc	a5,0x5
+    800054fc:	d087b783          	ld	a5,-760(a5) # 8000a200 <uart_tx_r>
+    80005500:	00005717          	auipc	a4,0x5
+    80005504:	d0873703          	ld	a4,-760(a4) # 8000a208 <uart_tx_w>
+    80005508:	08f70263          	beq	a4,a5,8000558c <uartstart+0x94>
+    8000550c:	7139                	addi	sp,sp,-64
+    8000550e:	fc06                	sd	ra,56(sp)
+    80005510:	f822                	sd	s0,48(sp)
+    80005512:	f426                	sd	s1,40(sp)
+    80005514:	f04a                	sd	s2,32(sp)
+    80005516:	ec4e                	sd	s3,24(sp)
+    80005518:	e852                	sd	s4,16(sp)
+    8000551a:	e456                	sd	s5,8(sp)
+    8000551c:	e05a                	sd	s6,0(sp)
+    8000551e:	0080                	addi	s0,sp,64
+    80005520:	10000937          	lui	s2,0x10000
+    80005524:	0915                	addi	s2,s2,5 # 10000005 <_entry-0x6ffffffb>
+    80005526:	0001ea97          	auipc	s5,0x1e
+    8000552a:	fe2a8a93          	addi	s5,s5,-30 # 80023508 <uart_tx_lock>
+    8000552e:	00005497          	auipc	s1,0x5
+    80005532:	cd248493          	addi	s1,s1,-814 # 8000a200 <uart_tx_r>
+    80005536:	10000a37          	lui	s4,0x10000
+    8000553a:	00005997          	auipc	s3,0x5
+    8000553e:	cce98993          	addi	s3,s3,-818 # 8000a208 <uart_tx_w>
+    80005542:	00094703          	lbu	a4,0(s2)
+    80005546:	02077713          	andi	a4,a4,32
+    8000554a:	c71d                	beqz	a4,80005578 <uartstart+0x80>
+    8000554c:	01f7f713          	andi	a4,a5,31
+    80005550:	9756                	add	a4,a4,s5
+    80005552:	01874b03          	lbu	s6,24(a4)
+    80005556:	0785                	addi	a5,a5,1
+    80005558:	e09c                	sd	a5,0(s1)
+    8000555a:	8526                	mv	a0,s1
+    8000555c:	e25fb0ef          	jal	80001380 <wakeup>
+    80005560:	016a0023          	sb	s6,0(s4) # 10000000 <_entry-0x70000000>
+    80005564:	609c                	ld	a5,0(s1)
+    80005566:	0009b703          	ld	a4,0(s3)
+    8000556a:	fcf71ce3          	bne	a4,a5,80005542 <uartstart+0x4a>
+    8000556e:	100007b7          	lui	a5,0x10000
+    80005572:	0789                	addi	a5,a5,2 # 10000002 <_entry-0x6ffffffe>
+    80005574:	0007c783          	lbu	a5,0(a5)
+    80005578:	70e2                	ld	ra,56(sp)
+    8000557a:	7442                	ld	s0,48(sp)
+    8000557c:	74a2                	ld	s1,40(sp)
+    8000557e:	7902                	ld	s2,32(sp)
+    80005580:	69e2                	ld	s3,24(sp)
+    80005582:	6a42                	ld	s4,16(sp)
+    80005584:	6aa2                	ld	s5,8(sp)
+    80005586:	6b02                	ld	s6,0(sp)
+    80005588:	6121                	addi	sp,sp,64
+    8000558a:	8082                	ret
+    8000558c:	100007b7          	lui	a5,0x10000
+    80005590:	0789                	addi	a5,a5,2 # 10000002 <_entry-0x6ffffffe>
+    80005592:	0007c783          	lbu	a5,0(a5)
+    80005596:	8082                	ret
+
+0000000080005598 <uartputc>:
+    80005598:	7179                	addi	sp,sp,-48
+    8000559a:	f406                	sd	ra,40(sp)
+    8000559c:	f022                	sd	s0,32(sp)
+    8000559e:	ec26                	sd	s1,24(sp)
+    800055a0:	e84a                	sd	s2,16(sp)
+    800055a2:	e44e                	sd	s3,8(sp)
+    800055a4:	e052                	sd	s4,0(sp)
+    800055a6:	1800                	addi	s0,sp,48
+    800055a8:	8a2a                	mv	s4,a0
+    800055aa:	0001e517          	auipc	a0,0x1e
+    800055ae:	f5e50513          	addi	a0,a0,-162 # 80023508 <uart_tx_lock>
+    800055b2:	16e000ef          	jal	80005720 <acquire>
+    800055b6:	00005797          	auipc	a5,0x5
+    800055ba:	c467a783          	lw	a5,-954(a5) # 8000a1fc <panicked>
+    800055be:	efbd                	bnez	a5,8000563c <uartputc+0xa4>
+    800055c0:	00005717          	auipc	a4,0x5
+    800055c4:	c4873703          	ld	a4,-952(a4) # 8000a208 <uart_tx_w>
+    800055c8:	00005797          	auipc	a5,0x5
+    800055cc:	c387b783          	ld	a5,-968(a5) # 8000a200 <uart_tx_r>
+    800055d0:	02078793          	addi	a5,a5,32
+    800055d4:	0001e997          	auipc	s3,0x1e
+    800055d8:	f3498993          	addi	s3,s3,-204 # 80023508 <uart_tx_lock>
+    800055dc:	00005497          	auipc	s1,0x5
+    800055e0:	c2448493          	addi	s1,s1,-988 # 8000a200 <uart_tx_r>
+    800055e4:	00005917          	auipc	s2,0x5
+    800055e8:	c2490913          	addi	s2,s2,-988 # 8000a208 <uart_tx_w>
+    800055ec:	00e79d63          	bne	a5,a4,80005606 <uartputc+0x6e>
+    800055f0:	85ce                	mv	a1,s3
+    800055f2:	8526                	mv	a0,s1
+    800055f4:	d41fb0ef          	jal	80001334 <sleep>
+    800055f8:	00093703          	ld	a4,0(s2)
+    800055fc:	609c                	ld	a5,0(s1)
+    800055fe:	02078793          	addi	a5,a5,32
+    80005602:	fee787e3          	beq	a5,a4,800055f0 <uartputc+0x58>
+    80005606:	0001e497          	auipc	s1,0x1e
+    8000560a:	f0248493          	addi	s1,s1,-254 # 80023508 <uart_tx_lock>
+    8000560e:	01f77793          	andi	a5,a4,31
+    80005612:	97a6                	add	a5,a5,s1
+    80005614:	01478c23          	sb	s4,24(a5)
+    80005618:	0705                	addi	a4,a4,1
+    8000561a:	00005797          	auipc	a5,0x5
+    8000561e:	bee7b723          	sd	a4,-1042(a5) # 8000a208 <uart_tx_w>
+    80005622:	ed7ff0ef          	jal	800054f8 <uartstart>
+    80005626:	8526                	mv	a0,s1
+    80005628:	190000ef          	jal	800057b8 <release>
+    8000562c:	70a2                	ld	ra,40(sp)
+    8000562e:	7402                	ld	s0,32(sp)
+    80005630:	64e2                	ld	s1,24(sp)
+    80005632:	6942                	ld	s2,16(sp)
+    80005634:	69a2                	ld	s3,8(sp)
+    80005636:	6a02                	ld	s4,0(sp)
+    80005638:	6145                	addi	sp,sp,48
+    8000563a:	8082                	ret
+    8000563c:	a001                	j	8000563c <uartputc+0xa4>
+
+000000008000563e <uartgetc>:
+    8000563e:	1141                	addi	sp,sp,-16
+    80005640:	e422                	sd	s0,8(sp)
+    80005642:	0800                	addi	s0,sp,16
+    80005644:	100007b7          	lui	a5,0x10000
+    80005648:	0795                	addi	a5,a5,5 # 10000005 <_entry-0x6ffffffb>
+    8000564a:	0007c783          	lbu	a5,0(a5)
+    8000564e:	8b85                	andi	a5,a5,1
+    80005650:	cb81                	beqz	a5,80005660 <uartgetc+0x22>
+    80005652:	100007b7          	lui	a5,0x10000
+    80005656:	0007c503          	lbu	a0,0(a5) # 10000000 <_entry-0x70000000>
+    8000565a:	6422                	ld	s0,8(sp)
+    8000565c:	0141                	addi	sp,sp,16
+    8000565e:	8082                	ret
+    80005660:	557d                	li	a0,-1
+    80005662:	bfe5                	j	8000565a <uartgetc+0x1c>
+
+0000000080005664 <uartintr>:
+    80005664:	1101                	addi	sp,sp,-32
+    80005666:	ec06                	sd	ra,24(sp)
+    80005668:	e822                	sd	s0,16(sp)
+    8000566a:	e426                	sd	s1,8(sp)
+    8000566c:	1000                	addi	s0,sp,32
+    8000566e:	54fd                	li	s1,-1
+    80005670:	a019                	j	80005676 <uartintr+0x12>
+    80005672:	85fff0ef          	jal	80004ed0 <consoleintr>
+    80005676:	fc9ff0ef          	jal	8000563e <uartgetc>
+    8000567a:	fe951ce3          	bne	a0,s1,80005672 <uartintr+0xe>
+    8000567e:	0001e497          	auipc	s1,0x1e
+    80005682:	e8a48493          	addi	s1,s1,-374 # 80023508 <uart_tx_lock>
+    80005686:	8526                	mv	a0,s1
+    80005688:	098000ef          	jal	80005720 <acquire>
+    8000568c:	e6dff0ef          	jal	800054f8 <uartstart>
+    80005690:	8526                	mv	a0,s1
+    80005692:	126000ef          	jal	800057b8 <release>
+    80005696:	60e2                	ld	ra,24(sp)
+    80005698:	6442                	ld	s0,16(sp)
+    8000569a:	64a2                	ld	s1,8(sp)
+    8000569c:	6105                	addi	sp,sp,32
+    8000569e:	8082                	ret
+
+00000000800056a0 <initlock>:
+    800056a0:	1141                	addi	sp,sp,-16
+    800056a2:	e422                	sd	s0,8(sp)
+    800056a4:	0800                	addi	s0,sp,16
+    800056a6:	e50c                	sd	a1,8(a0)
+    800056a8:	00052023          	sw	zero,0(a0)
+    800056ac:	00053823          	sd	zero,16(a0)
+    800056b0:	6422                	ld	s0,8(sp)
+    800056b2:	0141                	addi	sp,sp,16
+    800056b4:	8082                	ret
+
+00000000800056b6 <holding>:
+    800056b6:	411c                	lw	a5,0(a0)
+    800056b8:	e399                	bnez	a5,800056be <holding+0x8>
+    800056ba:	4501                	li	a0,0
+    800056bc:	8082                	ret
+    800056be:	1101                	addi	sp,sp,-32
+    800056c0:	ec06                	sd	ra,24(sp)
+    800056c2:	e822                	sd	s0,16(sp)
+    800056c4:	e426                	sd	s1,8(sp)
+    800056c6:	1000                	addi	s0,sp,32
+    800056c8:	6904                	ld	s1,16(a0)
+    800056ca:	e80fb0ef          	jal	80000d4a <mycpu>
+    800056ce:	40a48533          	sub	a0,s1,a0
+    800056d2:	00153513          	seqz	a0,a0
+    800056d6:	60e2                	ld	ra,24(sp)
+    800056d8:	6442                	ld	s0,16(sp)
+    800056da:	64a2                	ld	s1,8(sp)
+    800056dc:	6105                	addi	sp,sp,32
+    800056de:	8082                	ret
+
+00000000800056e0 <push_off>:
+    800056e0:	1101                	addi	sp,sp,-32
+    800056e2:	ec06                	sd	ra,24(sp)
+    800056e4:	e822                	sd	s0,16(sp)
+    800056e6:	e426                	sd	s1,8(sp)
+    800056e8:	1000                	addi	s0,sp,32
+    800056ea:	100024f3          	csrr	s1,sstatus
+    800056ee:	100027f3          	csrr	a5,sstatus
+    800056f2:	9bf5                	andi	a5,a5,-3
+    800056f4:	10079073          	csrw	sstatus,a5
+    800056f8:	e52fb0ef          	jal	80000d4a <mycpu>
+    800056fc:	5d3c                	lw	a5,120(a0)
+    800056fe:	cb99                	beqz	a5,80005714 <push_off+0x34>
+    80005700:	e4afb0ef          	jal	80000d4a <mycpu>
+    80005704:	5d3c                	lw	a5,120(a0)
+    80005706:	2785                	addiw	a5,a5,1
+    80005708:	dd3c                	sw	a5,120(a0)
+    8000570a:	60e2                	ld	ra,24(sp)
+    8000570c:	6442                	ld	s0,16(sp)
+    8000570e:	64a2                	ld	s1,8(sp)
+    80005710:	6105                	addi	sp,sp,32
+    80005712:	8082                	ret
+    80005714:	e36fb0ef          	jal	80000d4a <mycpu>
+    80005718:	8085                	srli	s1,s1,0x1
+    8000571a:	8885                	andi	s1,s1,1
+    8000571c:	dd64                	sw	s1,124(a0)
+    8000571e:	b7cd                	j	80005700 <push_off+0x20>
+
+0000000080005720 <acquire>:
+    80005720:	1101                	addi	sp,sp,-32
+    80005722:	ec06                	sd	ra,24(sp)
+    80005724:	e822                	sd	s0,16(sp)
+    80005726:	e426                	sd	s1,8(sp)
+    80005728:	1000                	addi	s0,sp,32
+    8000572a:	84aa                	mv	s1,a0
+    8000572c:	fb5ff0ef          	jal	800056e0 <push_off>
+    80005730:	8526                	mv	a0,s1
+    80005732:	f85ff0ef          	jal	800056b6 <holding>
+    80005736:	4705                	li	a4,1
+    80005738:	e105                	bnez	a0,80005758 <acquire+0x38>
+    8000573a:	87ba                	mv	a5,a4
+    8000573c:	0cf4a7af          	amoswap.w.aq	a5,a5,(s1)
+    80005740:	2781                	sext.w	a5,a5
+    80005742:	ffe5                	bnez	a5,8000573a <acquire+0x1a>
+    80005744:	0330000f          	fence	rw,rw
+    80005748:	e02fb0ef          	jal	80000d4a <mycpu>
+    8000574c:	e888                	sd	a0,16(s1)
+    8000574e:	60e2                	ld	ra,24(sp)
+    80005750:	6442                	ld	s0,16(sp)
+    80005752:	64a2                	ld	s1,8(sp)
+    80005754:	6105                	addi	sp,sp,32
+    80005756:	8082                	ret
+    80005758:	00002517          	auipc	a0,0x2
+    8000575c:	fe850513          	addi	a0,a0,-24 # 80007740 <etext+0x740>
+    80005760:	c93ff0ef          	jal	800053f2 <panic>
+
+0000000080005764 <pop_off>:
+    80005764:	1141                	addi	sp,sp,-16
+    80005766:	e406                	sd	ra,8(sp)
+    80005768:	e022                	sd	s0,0(sp)
+    8000576a:	0800                	addi	s0,sp,16
+    8000576c:	ddefb0ef          	jal	80000d4a <mycpu>
+    80005770:	100027f3          	csrr	a5,sstatus
+    80005774:	8b89                	andi	a5,a5,2
+    80005776:	e78d                	bnez	a5,800057a0 <pop_off+0x3c>
+    80005778:	5d3c                	lw	a5,120(a0)
+    8000577a:	02f05963          	blez	a5,800057ac <pop_off+0x48>
+    8000577e:	37fd                	addiw	a5,a5,-1
+    80005780:	0007871b          	sext.w	a4,a5
+    80005784:	dd3c                	sw	a5,120(a0)
+    80005786:	eb09                	bnez	a4,80005798 <pop_off+0x34>
+    80005788:	5d7c                	lw	a5,124(a0)
+    8000578a:	c799                	beqz	a5,80005798 <pop_off+0x34>
+    8000578c:	100027f3          	csrr	a5,sstatus
+    80005790:	0027e793          	ori	a5,a5,2
+    80005794:	10079073          	csrw	sstatus,a5
+    80005798:	60a2                	ld	ra,8(sp)
+    8000579a:	6402                	ld	s0,0(sp)
+    8000579c:	0141                	addi	sp,sp,16
+    8000579e:	8082                	ret
+    800057a0:	00002517          	auipc	a0,0x2
+    800057a4:	fa850513          	addi	a0,a0,-88 # 80007748 <etext+0x748>
+    800057a8:	c4bff0ef          	jal	800053f2 <panic>
+    800057ac:	00002517          	auipc	a0,0x2
+    800057b0:	fb450513          	addi	a0,a0,-76 # 80007760 <etext+0x760>
+    800057b4:	c3fff0ef          	jal	800053f2 <panic>
+
+00000000800057b8 <release>:
+    800057b8:	1101                	addi	sp,sp,-32
+    800057ba:	ec06                	sd	ra,24(sp)
+    800057bc:	e822                	sd	s0,16(sp)
+    800057be:	e426                	sd	s1,8(sp)
+    800057c0:	1000                	addi	s0,sp,32
+    800057c2:	84aa                	mv	s1,a0
+    800057c4:	ef3ff0ef          	jal	800056b6 <holding>
+    800057c8:	c105                	beqz	a0,800057e8 <release+0x30>
+    800057ca:	0004b823          	sd	zero,16(s1)
+    800057ce:	0330000f          	fence	rw,rw
+    800057d2:	0310000f          	fence	rw,w
+    800057d6:	0004a023          	sw	zero,0(s1)
+    800057da:	f8bff0ef          	jal	80005764 <pop_off>
+    800057de:	60e2                	ld	ra,24(sp)
+    800057e0:	6442                	ld	s0,16(sp)
+    800057e2:	64a2                	ld	s1,8(sp)
+    800057e4:	6105                	addi	sp,sp,32
+    800057e6:	8082                	ret
+    800057e8:	00002517          	auipc	a0,0x2
+    800057ec:	f8050513          	addi	a0,a0,-128 # 80007768 <etext+0x768>
+    800057f0:	c03ff0ef          	jal	800053f2 <panic>
+	...
+
+0000000080006000 <_trampoline>:
+    80006000:	14051073          	csrw	sscratch,a0
+    80006004:	02000537          	lui	a0,0x2000
+    80006008:	357d                	addiw	a0,a0,-1 # 1ffffff <_entry-0x7e000001>
+    8000600a:	0536                	slli	a0,a0,0xd
+    8000600c:	02153423          	sd	ra,40(a0)
+    80006010:	02253823          	sd	sp,48(a0)
+    80006014:	02353c23          	sd	gp,56(a0)
+    80006018:	04453023          	sd	tp,64(a0)
+    8000601c:	04553423          	sd	t0,72(a0)
+    80006020:	04653823          	sd	t1,80(a0)
+    80006024:	04753c23          	sd	t2,88(a0)
+    80006028:	f120                	sd	s0,96(a0)
+    8000602a:	f524                	sd	s1,104(a0)
+    8000602c:	fd2c                	sd	a1,120(a0)
+    8000602e:	e150                	sd	a2,128(a0)
+    80006030:	e554                	sd	a3,136(a0)
+    80006032:	e958                	sd	a4,144(a0)
+    80006034:	ed5c                	sd	a5,152(a0)
+    80006036:	0b053023          	sd	a6,160(a0)
+    8000603a:	0b153423          	sd	a7,168(a0)
+    8000603e:	0b253823          	sd	s2,176(a0)
+    80006042:	0b353c23          	sd	s3,184(a0)
+    80006046:	0d453023          	sd	s4,192(a0)
+    8000604a:	0d553423          	sd	s5,200(a0)
+    8000604e:	0d653823          	sd	s6,208(a0)
+    80006052:	0d753c23          	sd	s7,216(a0)
+    80006056:	0f853023          	sd	s8,224(a0)
+    8000605a:	0f953423          	sd	s9,232(a0)
+    8000605e:	0fa53823          	sd	s10,240(a0)
+    80006062:	0fb53c23          	sd	s11,248(a0)
+    80006066:	11c53023          	sd	t3,256(a0)
+    8000606a:	11d53423          	sd	t4,264(a0)
+    8000606e:	11e53823          	sd	t5,272(a0)
+    80006072:	11f53c23          	sd	t6,280(a0)
+    80006076:	140022f3          	csrr	t0,sscratch
+    8000607a:	06553823          	sd	t0,112(a0)
+    8000607e:	00853103          	ld	sp,8(a0)
+    80006082:	02053203          	ld	tp,32(a0)
+    80006086:	01053283          	ld	t0,16(a0)
+    8000608a:	00053303          	ld	t1,0(a0)
+    8000608e:	12000073          	sfence.vma
+    80006092:	18031073          	csrw	satp,t1
+    80006096:	12000073          	sfence.vma
+    8000609a:	8282                	jr	t0
+
+000000008000609c <userret>:
+    8000609c:	12000073          	sfence.vma
+    800060a0:	18051073          	csrw	satp,a0
+    800060a4:	12000073          	sfence.vma
+    800060a8:	02000537          	lui	a0,0x2000
+    800060ac:	357d                	addiw	a0,a0,-1 # 1ffffff <_entry-0x7e000001>
+    800060ae:	0536                	slli	a0,a0,0xd
+    800060b0:	02853083          	ld	ra,40(a0)
+    800060b4:	03053103          	ld	sp,48(a0)
+    800060b8:	03853183          	ld	gp,56(a0)
+    800060bc:	04053203          	ld	tp,64(a0)
+    800060c0:	04853283          	ld	t0,72(a0)
+    800060c4:	05053303          	ld	t1,80(a0)
+    800060c8:	05853383          	ld	t2,88(a0)
+    800060cc:	7120                	ld	s0,96(a0)
+    800060ce:	7524                	ld	s1,104(a0)
+    800060d0:	7d2c                	ld	a1,120(a0)
+    800060d2:	6150                	ld	a2,128(a0)
+    800060d4:	6554                	ld	a3,136(a0)
+    800060d6:	6958                	ld	a4,144(a0)
+    800060d8:	6d5c                	ld	a5,152(a0)
+    800060da:	0a053803          	ld	a6,160(a0)
+    800060de:	0a853883          	ld	a7,168(a0)
+    800060e2:	0b053903          	ld	s2,176(a0)
+    800060e6:	0b853983          	ld	s3,184(a0)
+    800060ea:	0c053a03          	ld	s4,192(a0)
+    800060ee:	0c853a83          	ld	s5,200(a0)
+    800060f2:	0d053b03          	ld	s6,208(a0)
+    800060f6:	0d853b83          	ld	s7,216(a0)
+    800060fa:	0e053c03          	ld	s8,224(a0)
+    800060fe:	0e853c83          	ld	s9,232(a0)
+    80006102:	0f053d03          	ld	s10,240(a0)
+    80006106:	0f853d83          	ld	s11,248(a0)
+    8000610a:	10053e03          	ld	t3,256(a0)
+    8000610e:	10853e83          	ld	t4,264(a0)
+    80006112:	11053f03          	ld	t5,272(a0)
+    80006116:	11853f83          	ld	t6,280(a0)
+    8000611a:	7928                	ld	a0,112(a0)
+    8000611c:	10200073          	sret
+	...
diff --git a/xv6-labs-2024/kernel/kernel.ld b/xv6-labs-2024/kernel/kernel.ld
new file mode 100644
index 0000000..ee04f22
--- /dev/null
+++ b/xv6-labs-2024/kernel/kernel.ld
@@ -0,0 +1,44 @@
+OUTPUT_ARCH( "riscv" )
+ENTRY( _entry )
+
+SECTIONS
+{
+  /*
+   * ensure that entry.S / _entry is at 0x80000000,
+   * where qemu's -kernel jumps.
+   */
+  . = 0x80000000;
+
+  .text : {
+    *(.text .text.*)
+    . = ALIGN(0x1000);
+    _trampoline = .;
+    *(trampsec)
+    . = ALIGN(0x1000);
+    ASSERT(. - _trampoline == 0x1000, "error: trampoline larger than one page");
+    PROVIDE(etext = .);
+  }
+
+  .rodata : {
+    . = ALIGN(16);
+    *(.srodata .srodata.*) /* do not need to distinguish this from .rodata */
+    . = ALIGN(16);
+    *(.rodata .rodata.*)
+  }
+
+  .data : {
+    . = ALIGN(16);
+    *(.sdata .sdata.*) /* do not need to distinguish this from .data */
+    . = ALIGN(16);
+    *(.data .data.*)
+  }
+
+  .bss : {
+    . = ALIGN(16);
+    *(.sbss .sbss.*) /* do not need to distinguish this from .bss */
+    . = ALIGN(16);
+    *(.bss .bss.*)
+  }
+
+  PROVIDE(end = .);
+}
diff --git a/xv6-labs-2024/kernel/kernel.sym b/xv6-labs-2024/kernel/kernel.sym
new file mode 100644
index 0000000..61b3601
--- /dev/null
+++ b/xv6-labs-2024/kernel/kernel.sym
@@ -0,0 +1,265 @@
+0000000080000000 .text
+0000000080007000 .rodata
+0000000080007880 .eh_frame
+000000008000a170 .data
+000000008000a1b8 .got
+000000008000a1c8 .got.plt
+000000008000a1e0 .bss
+0000000000000000 .riscv.attributes
+0000000000000000 .comment
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .debug_ranges
+0000000000000000 entry.o
+000000008000001a spin
+0000000000000000 kalloc.c
+0000000000000000 string.c
+0000000000000000 main.c
+000000008000a1e0 started
+0000000000000000 vm.c
+0000000000000000 proc.c
+000000008000a170 first.1
+0000000080000ed8 freeproc
+0000000080000f28 allocproc
+0000000080007770 states.0
+0000000000000000 swtch.o
+0000000000000000 trap.c
+0000000000000000 syscall.c
+0000000080001b30 argraw
+00000000800077b8 syscalls
+0000000000000000 sysproc.c
+0000000000000000 bio.c
+0000000000000000 fs.c
+0000000080002106 bfree
+0000000080002172 balloc
+0000000080002292 bmap
+0000000080002366 iget
+0000000080002b56 namex
+0000000000000000 log.c
+0000000080002d52 write_head
+0000000080002db0 install_trans
+0000000000000000 sleeplock.c
+0000000000000000 file.c
+0000000000000000 pipe.c
+0000000000000000 exec.c
+0000000000000000 sysfile.c
+0000000080003c66 argfd
+0000000080003cbe fdalloc
+0000000080003cfc create
+0000000000000000 kernelvec.o
+0000000000000000 plic.c
+0000000000000000 virtio_disk.c
+0000000080004752 free_desc
+000000008001b300 disk
+0000000000000000 start.c
+0000000000000000 console.c
+0000000000000000 printf.c
+000000008000508e printint
+0000000080007868 digits
+00000000800234e8 pr
+0000000000000000 uart.c
+0000000000000000 spinlock.c
+000000008000a1b8 _GLOBAL_OFFSET_TABLE_
+000000008000049a mappages
+0000000080000b34 copyinstr
+0000000080004d94 consoleread
+000000008000028c safestrcpy
+0000000080003f12 sys_close
+0000000080001308 yield
+000000008001a200 log
+000000008000a210 kmem
+000000008000545a uartinit
+0000000080001690 either_copyout
+0000000080004c7a timerinit
+000000008000a660 proc
+0000000080003416 fileread
+0000000080005120 printf
+0000000080001d56 sys_sbrk
+0000000080006000 trampoline
+000000008000a1fc panicked
+000000008000470c plic_claim
+0000000080023520 uart_tx_buf
+00000000800046be plicinit
+000000008000472c plic_complete
+000000008000124e sched
+00000000800001aa memmove
+0000000080001c82 syscall
+0000000080000d3a cpuid
+0000000080002996 writei
+0000000080001d20 sys_fork
+0000000080010078 bcache
+0000000080004366 sys_mkdir
+0000000080000640 uvmunmap
+0000000080002aa4 namecmp
+00000000800046d8 plicinithart
+00000000800013ea reparent
+0000000080001c52 argstr
+0000000080000780 uvmdealloc
+00000000800032b0 filedup
+0000000080002d20 namei
+0000000080001e88 binit
+00000000800009ae uvmclear
+0000000080003e82 sys_read
+0000000080002412 fsinit
+0000000080000206 memcpy
+000000008000054a kvmmap
+00000000800054f8 uartstart
+000000008000001c kfree
+0000000080000d4a mycpu
+00000000800027c8 iput
+0000000080000572 kvmmake
+0000000080001954 devintr
+000000008000a174 nextpid
+000000008000322e fileinit
+000000008000609c userret
+00000000800056a0 initlock
+00000000800009d8 copyout
+0000000080001334 sleep
+0000000080004660 kernelvec
+0000000080000722 uvmfirst
+0000000080002870 stati
+000000008000a248 wait_lock
+0000000080001e2c sys_kill
+00000000800036c8 pipeclose
+0000000080003f54 sys_fstat
+0000000080004d2e consolewrite
+0000000080002f46 end_op
+0000000080000082 freerange
+000000008000039a kvminithart
+00000000800007c4 uvmalloc
+00000000800008fc uvmcopy
+000000008000a1f0 initproc
+0000000080000e92 proc_freepagetable
+00000000800026f4 iunlock
+0000000080000e0e proc_pagetable
+000000008001b440 stack0
+0000000080001d8c sys_sleep
+0000000080003f8e sys_link
+0000000080003252 filealloc
+0000000080001380 wakeup
+00000000800047c8 virtio_disk_init
+0000000080000d66 myproc
+0000000080002610 idup
+000000008000a200 uart_tx_r
+00000000800003c2 walk
+0000000080004212 sys_open
+000000008000a208 uart_tx_w
+000000008000289a readi
+0000000080004ed0 consoleintr
+0000000080004e9e consputc
+00000000800014e2 kill
+0000000080000dd0 allocpid
+00000000800024d6 ialloc
+0000000080005664 uartintr
+0000000080000aae copyin
+0000000080001832 trapinit
+00000000800008ca uvmfree
+0000000080023540 end
+0000000080002734 itrunc
+00000000800034d4 filewrite
+0000000080001c1a argint
+00000000800038f4 exec
+0000000080007000 etext
+0000000080003eca sys_write
+00000000800057b8 release
+0000000080001bda fetchstr
+0000000080001596 wait
+000000008000186e usertrapret
+000000008000119a scheduler
+0000000080006000 _trampoline
+0000000080002aba dirlookup
+0000000080002edc begin_op
+00000000800032f6 fileclose
+00000000800019c8 usertrap
+000000008000021a strncmp
+0000000080010060 tickslock
+0000000080003720 pipewrite
+0000000080000250 strncpy
+000000008001a348 ftable
+0000000080004bd2 virtio_disk_intr
+0000000080003e36 sys_dup
+00000000800053f2 panic
+0000000080000d96 forkret
+00000000800000ca kinit
+0000000080000170 memcmp
+00000000800016da either_copyin
+000000008000108c fork
+0000000080001900 clockintr
+000000008000a260 cpus
+00000000800031ac releasesleep
+0000000080000000 _entry
+00000000800056b6 holding
+0000000080018738 sb
+0000000080005720 acquire
+0000000080002d3a nameiparent
+000000008000a180 initcode
+0000000080001856 trapinithart
+0000000080002592 iupdate
+000000008000014e memset
+00000000800002e8 main
+0000000080001548 setkilled
+0000000080003060 log_write
+0000000080003166 acquiresleep
+000000008000408c sys_unlink
+0000000080006000 uservec
+0000000080000624 kvminit
+00000000800020d2 bunpin
+0000000080001c36 argaddr
+0000000080001e4e sys_uptime
+000000008000563e uartgetc
+000000008000542c printfinit
+0000000080023508 uart_tx_lock
+00000000800006fc uvmcreate
+000000008000103c growproc
+00000000800031e4 holdingsleep
+000000008000156c killed
+0000000080000fce userinit
+0000000080001f0e bread
+0000000080003804 piperead
+000000008000a1f8 ticks
+000000008000504a consoleinit
+000000008000045c walkaddr
+0000000080001724 procdump
+0000000080005598 uartputc
+0000000080002016 brelse
+0000000080002646 ilock
+000000008000448e sys_exec
+00000000800017c8 swtch
+0000000080002850 iunlockput
+00000000800056e0 push_off
+00000000800038da flags2perm
+0000000080005764 pop_off
+0000000080001fe4 bwrite
+00000000800054b2 uartputc_sync
+0000000080001440 exit
+000000008000086a freewalk
+0000000080001d34 sys_wait
+0000000080001ce6 sys_exit
+0000000080002c86 dirlink
+0000000080003130 initsleeplock
+0000000080004cbe start
+000000008000a1e8 kernel_pagetable
+00000000800049c0 virtio_disk_rw
+00000000800002be strlen
+0000000080004582 sys_pipe
+000000008000247e iinit
+0000000080002e58 initlog
+0000000080023440 cons
+00000000800000fe kalloc
+0000000080001b90 fetchaddr
+000000008001a2a8 devsw
+0000000080001d0a sys_getpid
+0000000080003600 pipealloc
+000000008000440e sys_chdir
+0000000080000bec proc_mapstacks
+0000000080001aa0 kerneltrap
+000000008000209e bpin
+0000000080000c84 procinit
+0000000080018758 itable
+00000000800043ae sys_mknod
+00000000800033b8 filestat
+000000008000a230 pid_lock
diff --git a/xv6-labs-2024/kernel/kernelvec.S b/xv6-labs-2024/kernel/kernelvec.S
new file mode 100644
index 0000000..199f255
--- /dev/null
+++ b/xv6-labs-2024/kernel/kernelvec.S
@@ -0,0 +1,64 @@
+        #
+        # interrupts and exceptions while in supervisor
+        # mode come here.
+        #
+        # the current stack is a kernel stack.
+        # push registers, call kerneltrap().
+        # when kerneltrap() returns, restore registers, return.
+        #
+.globl kerneltrap
+.globl kernelvec
+.align 4
+kernelvec:
+        # make room to save registers.
+        addi sp, sp, -256
+
+        # save caller-saved registers.
+        sd ra, 0(sp)
+        sd sp, 8(sp)
+        sd gp, 16(sp)
+        sd tp, 24(sp)
+        sd t0, 32(sp)
+        sd t1, 40(sp)
+        sd t2, 48(sp)
+        sd a0, 72(sp)
+        sd a1, 80(sp)
+        sd a2, 88(sp)
+        sd a3, 96(sp)
+        sd a4, 104(sp)
+        sd a5, 112(sp)
+        sd a6, 120(sp)
+        sd a7, 128(sp)
+        sd t3, 216(sp)
+        sd t4, 224(sp)
+        sd t5, 232(sp)
+        sd t6, 240(sp)
+
+        # call the C trap handler in trap.c
+        call kerneltrap
+
+        # restore registers.
+        ld ra, 0(sp)
+        ld sp, 8(sp)
+        ld gp, 16(sp)
+        # not tp (contains hartid), in case we moved CPUs
+        ld t0, 32(sp)
+        ld t1, 40(sp)
+        ld t2, 48(sp)
+        ld a0, 72(sp)
+        ld a1, 80(sp)
+        ld a2, 88(sp)
+        ld a3, 96(sp)
+        ld a4, 104(sp)
+        ld a5, 112(sp)
+        ld a6, 120(sp)
+        ld a7, 128(sp)
+        ld t3, 216(sp)
+        ld t4, 224(sp)
+        ld t5, 232(sp)
+        ld t6, 240(sp)
+
+        addi sp, sp, 256
+
+        # return to whatever we were doing in the kernel.
+        sret
diff --git a/xv6-labs-2024/kernel/kernelvec.o b/xv6-labs-2024/kernel/kernelvec.o
new file mode 100644
index 0000000..6d3902f
Binary files /dev/null and b/xv6-labs-2024/kernel/kernelvec.o differ
diff --git a/xv6-labs-2024/kernel/log.c b/xv6-labs-2024/kernel/log.c
new file mode 100644
index 0000000..5b58306
--- /dev/null
+++ b/xv6-labs-2024/kernel/log.c
@@ -0,0 +1,236 @@
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "fs.h"
+#include "buf.h"
+
+// Simple logging that allows concurrent FS system calls.
+//
+// A log transaction contains the updates of multiple FS system
+// calls. The logging system only commits when there are
+// no FS system calls active. Thus there is never
+// any reasoning required about whether a commit might
+// write an uncommitted system call's updates to disk.
+//
+// A system call should call begin_op()/end_op() to mark
+// its start and end. Usually begin_op() just increments
+// the count of in-progress FS system calls and returns.
+// But if it thinks the log is close to running out, it
+// sleeps until the last outstanding end_op() commits.
+//
+// The log is a physical re-do log containing disk blocks.
+// The on-disk log format:
+//   header block, containing block #s for block A, B, C, ...
+//   block A
+//   block B
+//   block C
+//   ...
+// Log appends are synchronous.
+
+// Contents of the header block, used for both the on-disk header block
+// and to keep track in memory of logged block# before commit.
+struct logheader {
+  int n;
+  int block[LOGSIZE];
+};
+
+struct log {
+  struct spinlock lock;
+  int start;
+  int size;
+  int outstanding; // how many FS sys calls are executing.
+  int committing;  // in commit(), please wait.
+  int dev;
+  struct logheader lh;
+};
+struct log log;
+
+static void recover_from_log(void);
+static void commit();
+
+void
+initlog(int dev, struct superblock *sb)
+{
+  if (sizeof(struct logheader) >= BSIZE)
+    panic("initlog: too big logheader");
+
+  initlock(&log.lock, "log");
+  log.start = sb->logstart;
+  log.size = sb->nlog;
+  log.dev = dev;
+  recover_from_log();
+}
+
+// Copy committed blocks from log to their home location
+static void
+install_trans(int recovering)
+{
+  int tail;
+
+  for (tail = 0; tail < log.lh.n; tail++) {
+    struct buf *lbuf = bread(log.dev, log.start+tail+1); // read log block
+    struct buf *dbuf = bread(log.dev, log.lh.block[tail]); // read dst
+    memmove(dbuf->data, lbuf->data, BSIZE);  // copy block to dst
+    bwrite(dbuf);  // write dst to disk
+    if(recovering == 0)
+      bunpin(dbuf);
+    brelse(lbuf);
+    brelse(dbuf);
+  }
+}
+
+// Read the log header from disk into the in-memory log header
+static void
+read_head(void)
+{
+  struct buf *buf = bread(log.dev, log.start);
+  struct logheader *lh = (struct logheader *) (buf->data);
+  int i;
+  log.lh.n = lh->n;
+  for (i = 0; i < log.lh.n; i++) {
+    log.lh.block[i] = lh->block[i];
+  }
+  brelse(buf);
+}
+
+// Write in-memory log header to disk.
+// This is the true point at which the
+// current transaction commits.
+static void
+write_head(void)
+{
+  struct buf *buf = bread(log.dev, log.start);
+  struct logheader *hb = (struct logheader *) (buf->data);
+  int i;
+  hb->n = log.lh.n;
+  for (i = 0; i < log.lh.n; i++) {
+    hb->block[i] = log.lh.block[i];
+  }
+  bwrite(buf);
+  brelse(buf);
+}
+
+static void
+recover_from_log(void)
+{
+  read_head();
+  install_trans(1); // if committed, copy from log to disk
+  log.lh.n = 0;
+  write_head(); // clear the log
+}
+
+// called at the start of each FS system call.
+void
+begin_op(void)
+{
+  acquire(&log.lock);
+  while(1){
+    if(log.committing){
+      sleep(&log, &log.lock);
+    } else if(log.lh.n + (log.outstanding+1)*MAXOPBLOCKS > LOGSIZE){
+      // this op might exhaust log space; wait for commit.
+      sleep(&log, &log.lock);
+    } else {
+      log.outstanding += 1;
+      release(&log.lock);
+      break;
+    }
+  }
+}
+
+// called at the end of each FS system call.
+// commits if this was the last outstanding operation.
+void
+end_op(void)
+{
+  int do_commit = 0;
+
+  acquire(&log.lock);
+  log.outstanding -= 1;
+  if(log.committing)
+    panic("log.committing");
+  if(log.outstanding == 0){
+    do_commit = 1;
+    log.committing = 1;
+  } else {
+    // begin_op() may be waiting for log space,
+    // and decrementing log.outstanding has decreased
+    // the amount of reserved space.
+    wakeup(&log);
+  }
+  release(&log.lock);
+
+  if(do_commit){
+    // call commit w/o holding locks, since not allowed
+    // to sleep with locks.
+    commit();
+    acquire(&log.lock);
+    log.committing = 0;
+    wakeup(&log);
+    release(&log.lock);
+  }
+}
+
+// Copy modified blocks from cache to log.
+static void
+write_log(void)
+{
+  int tail;
+
+  for (tail = 0; tail < log.lh.n; tail++) {
+    struct buf *to = bread(log.dev, log.start+tail+1); // log block
+    struct buf *from = bread(log.dev, log.lh.block[tail]); // cache block
+    memmove(to->data, from->data, BSIZE);
+    bwrite(to);  // write the log
+    brelse(from);
+    brelse(to);
+  }
+}
+
+static void
+commit()
+{
+  if (log.lh.n > 0) {
+    write_log();     // Write modified blocks from cache to log
+    write_head();    // Write header to disk -- the real commit
+    install_trans(0); // Now install writes to home locations
+    log.lh.n = 0;
+    write_head();    // Erase the transaction from the log
+  }
+}
+
+// Caller has modified b->data and is done with the buffer.
+// Record the block number and pin in the cache by increasing refcnt.
+// commit()/write_log() will do the disk write.
+//
+// log_write() replaces bwrite(); a typical use is:
+//   bp = bread(...)
+//   modify bp->data[]
+//   log_write(bp)
+//   brelse(bp)
+void
+log_write(struct buf *b)
+{
+  int i;
+
+  acquire(&log.lock);
+  if (log.lh.n >= LOGSIZE || log.lh.n >= log.size - 1)
+    panic("too big a transaction");
+  if (log.outstanding < 1)
+    panic("log_write outside of trans");
+
+  for (i = 0; i < log.lh.n; i++) {
+    if (log.lh.block[i] == b->blockno)   // log absorption
+      break;
+  }
+  log.lh.block[i] = b->blockno;
+  if (i == log.lh.n) {  // Add new block to log?
+    bpin(b);
+    log.lh.n++;
+  }
+  release(&log.lock);
+}
+
diff --git a/xv6-labs-2024/kernel/log.d b/xv6-labs-2024/kernel/log.d
new file mode 100644
index 0000000..535ea6a
--- /dev/null
+++ b/xv6-labs-2024/kernel/log.d
@@ -0,0 +1,3 @@
+kernel/log.o: kernel/log.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/riscv.h kernel/defs.h kernel/param.h \
+ kernel/spinlock.h kernel/sleeplock.h kernel/fs.h kernel/buf.h
diff --git a/xv6-labs-2024/kernel/log.o b/xv6-labs-2024/kernel/log.o
new file mode 100644
index 0000000..716c409
Binary files /dev/null and b/xv6-labs-2024/kernel/log.o differ
diff --git a/xv6-labs-2024/kernel/main.c b/xv6-labs-2024/kernel/main.c
new file mode 100644
index 0000000..f0d3171
--- /dev/null
+++ b/xv6-labs-2024/kernel/main.c
@@ -0,0 +1,45 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "defs.h"
+
+volatile static int started = 0;
+
+// start() jumps here in supervisor mode on all CPUs.
+void
+main()
+{
+  if(cpuid() == 0){
+    consoleinit();
+    printfinit();
+    printf("\n");
+    printf("xv6 kernel is booting\n");
+    printf("\n");
+    kinit();         // physical page allocator
+    kvminit();       // create kernel page table
+    kvminithart();   // turn on paging
+    procinit();      // process table
+    trapinit();      // trap vectors
+    trapinithart();  // install kernel trap vector
+    plicinit();      // set up interrupt controller
+    plicinithart();  // ask PLIC for device interrupts
+    binit();         // buffer cache
+    iinit();         // inode table
+    fileinit();      // file table
+    virtio_disk_init(); // emulated hard disk
+    userinit();      // first user process
+    __sync_synchronize();
+    started = 1;
+  } else {
+    while(started == 0)
+      ;
+    __sync_synchronize();
+    printf("hart %d starting\n", cpuid());
+    kvminithart();    // turn on paging
+    trapinithart();   // install kernel trap vector
+    plicinithart();   // ask PLIC for device interrupts
+  }
+
+  scheduler();        
+}
diff --git a/xv6-labs-2024/kernel/main.d b/xv6-labs-2024/kernel/main.d
new file mode 100644
index 0000000..5cd099f
--- /dev/null
+++ b/xv6-labs-2024/kernel/main.d
@@ -0,0 +1,3 @@
+kernel/main.o: kernel/main.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/defs.h
diff --git a/xv6-labs-2024/kernel/main.o b/xv6-labs-2024/kernel/main.o
new file mode 100644
index 0000000..0251e97
Binary files /dev/null and b/xv6-labs-2024/kernel/main.o differ
diff --git a/xv6-labs-2024/kernel/memlayout.h b/xv6-labs-2024/kernel/memlayout.h
new file mode 100644
index 0000000..3ab2ace
--- /dev/null
+++ b/xv6-labs-2024/kernel/memlayout.h
@@ -0,0 +1,59 @@
+// Physical memory layout
+
+// qemu -machine virt is set up like this,
+// based on qemu's hw/riscv/virt.c:
+//
+// 00001000 -- boot ROM, provided by qemu
+// 02000000 -- CLINT
+// 0C000000 -- PLIC
+// 10000000 -- uart0 
+// 10001000 -- virtio disk 
+// 80000000 -- boot ROM jumps here in machine mode
+//             -kernel loads the kernel here
+// unused RAM after 80000000.
+
+// the kernel uses physical memory thus:
+// 80000000 -- entry.S, then kernel text and data
+// end -- start of kernel page allocation area
+// PHYSTOP -- end RAM used by the kernel
+
+// qemu puts UART registers here in physical memory.
+#define UART0 0x10000000L
+#define UART0_IRQ 10
+
+// virtio mmio interface
+#define VIRTIO0 0x10001000
+#define VIRTIO0_IRQ 1
+
+// qemu puts platform-level interrupt controller (PLIC) here.
+#define PLIC 0x0c000000L
+#define PLIC_PRIORITY (PLIC + 0x0)
+#define PLIC_PENDING (PLIC + 0x1000)
+#define PLIC_SENABLE(hart) (PLIC + 0x2080 + (hart)*0x100)
+#define PLIC_SPRIORITY(hart) (PLIC + 0x201000 + (hart)*0x2000)
+#define PLIC_SCLAIM(hart) (PLIC + 0x201004 + (hart)*0x2000)
+
+// the kernel expects there to be RAM
+// for use by the kernel and user pages
+// from physical address 0x80000000 to PHYSTOP.
+#define KERNBASE 0x80000000L
+#define PHYSTOP (KERNBASE + 128*1024*1024)
+
+// map the trampoline page to the highest address,
+// in both user and kernel space.
+#define TRAMPOLINE (MAXVA - PGSIZE)
+
+// map kernel stacks beneath the trampoline,
+// each surrounded by invalid guard pages.
+#define KSTACK(p) (TRAMPOLINE - ((p)+1)* 2*PGSIZE)
+
+// User memory layout.
+// Address zero first:
+//   text
+//   original data and bss
+//   fixed-size stack
+//   expandable heap
+//   ...
+//   TRAPFRAME (p->trapframe, used by the trampoline)
+//   TRAMPOLINE (the same page as in the kernel)
+#define TRAPFRAME (TRAMPOLINE - PGSIZE)
diff --git a/xv6-labs-2024/kernel/param.h b/xv6-labs-2024/kernel/param.h
new file mode 100644
index 0000000..07e6f17
--- /dev/null
+++ b/xv6-labs-2024/kernel/param.h
@@ -0,0 +1,33 @@
+#ifdef LAB_FS
+#define NPROC        10  // maximum number of processes
+#else
+#define NPROC        64  // maximum number of processes (speedsup bigfile)
+#endif
+#define NCPU          8  // maximum number of CPUs
+#define NOFILE       16  // open files per process
+#define NFILE       100  // open files per system
+#define NINODE       50  // maximum number of active i-nodes
+#define NDEV         10  // maximum major device number
+#define ROOTDEV       1  // device number of file system root disk
+#define MAXARG       32  // max exec arguments
+#define MAXOPBLOCKS  10  // max # of blocks any FS op writes
+#define LOGSIZE      (MAXOPBLOCKS*3)  // max data blocks in on-disk log
+#define NBUF         (MAXOPBLOCKS*3)  // size of disk block cache
+#ifdef LAB_FS
+#define FSSIZE       200000  // size of file system in blocks
+#else
+#ifdef LAB_LOCK
+#define FSSIZE       10000  // size of file system in blocks
+#else
+#define FSSIZE       2000   // size of file system in blocks
+#endif
+#endif
+#define MAXPATH      128   // maximum file path name
+
+#ifdef LAB_UTIL
+#define USERSTACK    2     // user stack pages
+#else
+#define USERSTACK    1     // user stack pages
+#endif
+
+
diff --git a/xv6-labs-2024/kernel/pipe.c b/xv6-labs-2024/kernel/pipe.c
new file mode 100644
index 0000000..ca97d98
--- /dev/null
+++ b/xv6-labs-2024/kernel/pipe.c
@@ -0,0 +1,130 @@
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "fs.h"
+#include "sleeplock.h"
+#include "file.h"
+
+#define PIPESIZE 1024
+
+struct pipe {
+  struct spinlock lock;
+  char data[PIPESIZE];
+  uint nread;     // number of bytes read
+  uint nwrite;    // number of bytes written
+  int readopen;   // read fd is still open
+  int writeopen;  // write fd is still open
+};
+
+int
+pipealloc(struct file **f0, struct file **f1)
+{
+  struct pipe *pi;
+
+  pi = 0;
+  *f0 = *f1 = 0;
+  if((*f0 = filealloc()) == 0 || (*f1 = filealloc()) == 0)
+    goto bad;
+  if((pi = (struct pipe*)kalloc()) == 0)
+    goto bad;
+  pi->readopen = 1;
+  pi->writeopen = 1;
+  pi->nwrite = 0;
+  pi->nread = 0;
+  initlock(&pi->lock, "pipe");
+  (*f0)->type = FD_PIPE;
+  (*f0)->readable = 1;
+  (*f0)->writable = 0;
+  (*f0)->pipe = pi;
+  (*f1)->type = FD_PIPE;
+  (*f1)->readable = 0;
+  (*f1)->writable = 1;
+  (*f1)->pipe = pi;
+  return 0;
+
+ bad:
+  if(pi)
+    kfree((char*)pi);
+  if(*f0)
+    fileclose(*f0);
+  if(*f1)
+    fileclose(*f1);
+  return -1;
+}
+
+void
+pipeclose(struct pipe *pi, int writable)
+{
+  acquire(&pi->lock);
+  if(writable){
+    pi->writeopen = 0;
+    wakeup(&pi->nread);
+  } else {
+    pi->readopen = 0;
+    wakeup(&pi->nwrite);
+  }
+  if(pi->readopen == 0 && pi->writeopen == 0){
+    release(&pi->lock);
+    kfree((char*)pi);
+  } else
+    release(&pi->lock);
+}
+
+int
+pipewrite(struct pipe *pi, uint64 addr, int n)
+{
+  int i = 0;
+  struct proc *pr = myproc();
+
+  acquire(&pi->lock);
+  while(i < n){
+    if(pi->readopen == 0 || killed(pr)){
+      release(&pi->lock);
+      return -1;
+    }
+    if(pi->nwrite == pi->nread + PIPESIZE){ //DOC: pipewrite-full
+      wakeup(&pi->nread);
+      sleep(&pi->nwrite, &pi->lock);
+    } else {
+      char ch;
+      if(copyin(pr->pagetable, &ch, addr + i, 1) == -1)
+        break;
+      pi->data[pi->nwrite++ % PIPESIZE] = ch;
+      i++;
+    }
+  }
+  wakeup(&pi->nread);
+  release(&pi->lock);
+
+  return i;
+}
+
+int
+piperead(struct pipe *pi, uint64 addr, int n)
+{
+  int i;
+  struct proc *pr = myproc();
+  char ch;
+
+  acquire(&pi->lock);
+  while(pi->nread == pi->nwrite && pi->writeopen){  //DOC: pipe-empty
+    if(killed(pr)){
+      release(&pi->lock);
+      return -1;
+    }
+    sleep(&pi->nread, &pi->lock); //DOC: piperead-sleep
+  }
+  for(i = 0; i < n; i++){  //DOC: piperead-copy
+    if(pi->nread == pi->nwrite)
+      break;
+    ch = pi->data[pi->nread++ % PIPESIZE];
+    if(copyout(pr->pagetable, addr + i, &ch, 1) == -1)
+      break;
+  }
+  wakeup(&pi->nwrite);  //DOC: piperead-wakeup
+  release(&pi->lock);
+  return i;
+}
diff --git a/xv6-labs-2024/kernel/pipe.d b/xv6-labs-2024/kernel/pipe.d
new file mode 100644
index 0000000..66191b5
--- /dev/null
+++ b/xv6-labs-2024/kernel/pipe.d
@@ -0,0 +1,4 @@
+kernel/pipe.o: kernel/pipe.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/riscv.h kernel/defs.h kernel/param.h \
+ kernel/spinlock.h kernel/proc.h kernel/fs.h kernel/sleeplock.h \
+ kernel/file.h
diff --git a/xv6-labs-2024/kernel/pipe.o b/xv6-labs-2024/kernel/pipe.o
new file mode 100644
index 0000000..076190e
Binary files /dev/null and b/xv6-labs-2024/kernel/pipe.o differ
diff --git a/xv6-labs-2024/kernel/plic.c b/xv6-labs-2024/kernel/plic.c
new file mode 100644
index 0000000..4175db9
--- /dev/null
+++ b/xv6-labs-2024/kernel/plic.c
@@ -0,0 +1,47 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "defs.h"
+
+//
+// the riscv Platform Level Interrupt Controller (PLIC).
+//
+
+void
+plicinit(void)
+{
+  // set desired IRQ priorities non-zero (otherwise disabled).
+  *(uint32*)(PLIC + UART0_IRQ*4) = 1;
+  *(uint32*)(PLIC + VIRTIO0_IRQ*4) = 1;
+}
+
+void
+plicinithart(void)
+{
+  int hart = cpuid();
+  
+  // set enable bits for this hart's S-mode
+  // for the uart and virtio disk.
+  *(uint32*)PLIC_SENABLE(hart) = (1 << UART0_IRQ) | (1 << VIRTIO0_IRQ);
+
+  // set this hart's S-mode priority threshold to 0.
+  *(uint32*)PLIC_SPRIORITY(hart) = 0;
+}
+
+// ask the PLIC what interrupt we should serve.
+int
+plic_claim(void)
+{
+  int hart = cpuid();
+  int irq = *(uint32*)PLIC_SCLAIM(hart);
+  return irq;
+}
+
+// tell the PLIC we've served this IRQ.
+void
+plic_complete(int irq)
+{
+  int hart = cpuid();
+  *(uint32*)PLIC_SCLAIM(hart) = irq;
+}
diff --git a/xv6-labs-2024/kernel/plic.d b/xv6-labs-2024/kernel/plic.d
new file mode 100644
index 0000000..d25004f
--- /dev/null
+++ b/xv6-labs-2024/kernel/plic.d
@@ -0,0 +1,3 @@
+kernel/plic.o: kernel/plic.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/defs.h
diff --git a/xv6-labs-2024/kernel/plic.o b/xv6-labs-2024/kernel/plic.o
new file mode 100644
index 0000000..33b544f
Binary files /dev/null and b/xv6-labs-2024/kernel/plic.o differ
diff --git a/xv6-labs-2024/kernel/printf.c b/xv6-labs-2024/kernel/printf.c
new file mode 100644
index 0000000..d20534c
--- /dev/null
+++ b/xv6-labs-2024/kernel/printf.c
@@ -0,0 +1,178 @@
+//
+// formatted console output -- printf, panic.
+//
+
+#include <stdarg.h>
+
+#include "types.h"
+#include "param.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "fs.h"
+#include "file.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "defs.h"
+#include "proc.h"
+
+volatile int panicked = 0;
+
+// lock to avoid interleaving concurrent printf's.
+static struct {
+  struct spinlock lock;
+  int locking;
+} pr;
+
+static char digits[] = "0123456789abcdef";
+
+static void
+printint(long long xx, int base, int sign)
+{
+  char buf[16];
+  int i;
+  unsigned long long x;
+
+  if(sign && (sign = (xx < 0)))
+    x = -xx;
+  else
+    x = xx;
+
+  i = 0;
+  do {
+    buf[i++] = digits[x % base];
+  } while((x /= base) != 0);
+
+  if(sign)
+    buf[i++] = '-';
+
+  while(--i >= 0)
+    consputc(buf[i]);
+}
+
+static void
+printptr(uint64 x)
+{
+  int i;
+  consputc('0');
+  consputc('x');
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+    consputc(digits[x >> (sizeof(uint64) * 8 - 4)]);
+}
+
+// Print to the console.
+int
+printf(char *fmt, ...)
+{
+  va_list ap;
+  int i, cx, c0, c1, c2, locking;
+  char *s;
+
+  locking = pr.locking;
+  if(locking)
+    acquire(&pr.lock);
+
+  va_start(ap, fmt);
+  for(i = 0; (cx = fmt[i] & 0xff) != 0; i++){
+    if(cx != '%'){
+      consputc(cx);
+      continue;
+    }
+    i++;
+    c0 = fmt[i+0] & 0xff;
+    c1 = c2 = 0;
+    if(c0) c1 = fmt[i+1] & 0xff;
+    if(c1) c2 = fmt[i+2] & 0xff;
+    if(c0 == 'd'){
+      printint(va_arg(ap, int), 10, 1);
+    } else if(c0 == 'l' && c1 == 'd'){
+      printint(va_arg(ap, uint64), 10, 1);
+      i += 1;
+    } else if(c0 == 'l' && c1 == 'l' && c2 == 'd'){
+      printint(va_arg(ap, uint64), 10, 1);
+      i += 2;
+    } else if(c0 == 'u'){
+      printint(va_arg(ap, int), 10, 0);
+    } else if(c0 == 'l' && c1 == 'u'){
+      printint(va_arg(ap, uint64), 10, 0);
+      i += 1;
+    } else if(c0 == 'l' && c1 == 'l' && c2 == 'u'){
+      printint(va_arg(ap, uint64), 10, 0);
+      i += 2;
+    } else if(c0 == 'x'){
+      printint(va_arg(ap, int), 16, 0);
+    } else if(c0 == 'l' && c1 == 'x'){
+      printint(va_arg(ap, uint64), 16, 0);
+      i += 1;
+    } else if(c0 == 'l' && c1 == 'l' && c2 == 'x'){
+      printint(va_arg(ap, uint64), 16, 0);
+      i += 2;
+    } else if(c0 == 'p'){
+      printptr(va_arg(ap, uint64));
+    } else if(c0 == 's'){
+      if((s = va_arg(ap, char*)) == 0)
+        s = "(null)";
+      for(; *s; s++)
+        consputc(*s);
+    } else if(c0 == '%'){
+      consputc('%');
+    } else if(c0 == 0){
+      break;
+    } else {
+      // Print unknown % sequence to draw attention.
+      consputc('%');
+      consputc(c0);
+    }
+
+#if 0
+    switch(c){
+    case 'd':
+      printint(va_arg(ap, int), 10, 1);
+      break;
+    case 'x':
+      printint(va_arg(ap, int), 16, 1);
+      break;
+    case 'p':
+      printptr(va_arg(ap, uint64));
+      break;
+    case 's':
+      if((s = va_arg(ap, char*)) == 0)
+        s = "(null)";
+      for(; *s; s++)
+        consputc(*s);
+      break;
+    case '%':
+      consputc('%');
+      break;
+    default:
+      // Print unknown % sequence to draw attention.
+      consputc('%');
+      consputc(c);
+      break;
+    }
+#endif
+  }
+  va_end(ap);
+
+  if(locking)
+    release(&pr.lock);
+
+  return 0;
+}
+
+void
+panic(char *s)
+{
+  pr.locking = 0;
+  printf("panic: ");
+  printf("%s\n", s);
+  panicked = 1; // freeze uart output from other CPUs
+  for(;;)
+    ;
+}
+
+void
+printfinit(void)
+{
+  initlock(&pr.lock, "pr");
+  pr.locking = 1;
+}
diff --git a/xv6-labs-2024/kernel/printf.d b/xv6-labs-2024/kernel/printf.d
new file mode 100644
index 0000000..5af543d
--- /dev/null
+++ b/xv6-labs-2024/kernel/printf.d
@@ -0,0 +1,6 @@
+kernel/printf.o: kernel/printf.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ /usr/lib/gcc-cross/riscv64-linux-gnu/13/include/stdarg.h kernel/types.h \
+ kernel/param.h kernel/spinlock.h kernel/sleeplock.h kernel/fs.h \
+ kernel/file.h kernel/memlayout.h kernel/riscv.h kernel/defs.h \
+ kernel/proc.h
diff --git a/xv6-labs-2024/kernel/printf.o b/xv6-labs-2024/kernel/printf.o
new file mode 100644
index 0000000..f149914
Binary files /dev/null and b/xv6-labs-2024/kernel/printf.o differ
diff --git a/xv6-labs-2024/kernel/proc.c b/xv6-labs-2024/kernel/proc.c
new file mode 100644
index 0000000..130d9ce
--- /dev/null
+++ b/xv6-labs-2024/kernel/proc.c
@@ -0,0 +1,695 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "defs.h"
+
+struct cpu cpus[NCPU];
+
+struct proc proc[NPROC];
+
+struct proc *initproc;
+
+int nextpid = 1;
+struct spinlock pid_lock;
+
+extern void forkret(void);
+static void freeproc(struct proc *p);
+
+extern char trampoline[]; // trampoline.S
+
+// helps ensure that wakeups of wait()ing
+// parents are not lost. helps obey the
+// memory model when using p->parent.
+// must be acquired before any p->lock.
+struct spinlock wait_lock;
+
+// Allocate a page for each process's kernel stack.
+// Map it high in memory, followed by an invalid
+// guard page.
+void
+proc_mapstacks(pagetable_t kpgtbl)
+{
+  struct proc *p;
+  
+  for(p = proc; p < &proc[NPROC]; p++) {
+    char *pa = kalloc();
+    if(pa == 0)
+      panic("kalloc");
+    uint64 va = KSTACK((int) (p - proc));
+    kvmmap(kpgtbl, va, (uint64)pa, PGSIZE, PTE_R | PTE_W);
+  }
+}
+
+// initialize the proc table.
+void
+procinit(void)
+{
+  struct proc *p;
+  
+  initlock(&pid_lock, "nextpid");
+  initlock(&wait_lock, "wait_lock");
+  for(p = proc; p < &proc[NPROC]; p++) {
+      initlock(&p->lock, "proc");
+      p->state = UNUSED;
+      p->kstack = KSTACK((int) (p - proc));
+  }
+}
+
+// Must be called with interrupts disabled,
+// to prevent race with process being moved
+// to a different CPU.
+int
+cpuid()
+{
+  int id = r_tp();
+  return id;
+}
+
+// Return this CPU's cpu struct.
+// Interrupts must be disabled.
+struct cpu*
+mycpu(void)
+{
+  int id = cpuid();
+  struct cpu *c = &cpus[id];
+  return c;
+}
+
+// Return the current struct proc *, or zero if none.
+struct proc*
+myproc(void)
+{
+  push_off();
+  struct cpu *c = mycpu();
+  struct proc *p = c->proc;
+  pop_off();
+  return p;
+}
+
+int
+allocpid()
+{
+  int pid;
+  
+  acquire(&pid_lock);
+  pid = nextpid;
+  nextpid = nextpid + 1;
+  release(&pid_lock);
+
+  return pid;
+}
+
+// Look in the process table for an UNUSED proc.
+// If found, initialize state required to run in the kernel,
+// and return with p->lock held.
+// If there are no free procs, or a memory allocation fails, return 0.
+static struct proc*
+allocproc(void)
+{
+  struct proc *p;
+
+  for(p = proc; p < &proc[NPROC]; p++) {
+    acquire(&p->lock);
+    if(p->state == UNUSED) {
+      goto found;
+    } else {
+      release(&p->lock);
+    }
+  }
+  return 0;
+
+found:
+  p->pid = allocpid();
+  p->state = USED;
+
+  // Allocate a trapframe page.
+  if((p->trapframe = (struct trapframe *)kalloc()) == 0){
+    freeproc(p);
+    release(&p->lock);
+    return 0;
+  }
+
+  // An empty user page table.
+  p->pagetable = proc_pagetable(p);
+  if(p->pagetable == 0){
+    freeproc(p);
+    release(&p->lock);
+    return 0;
+  }
+
+  // Set up new context to start executing at forkret,
+  // which returns to user space.
+  memset(&p->context, 0, sizeof(p->context));
+  p->context.ra = (uint64)forkret;
+  p->context.sp = p->kstack + PGSIZE;
+
+  return p;
+}
+
+// free a proc structure and the data hanging from it,
+// including user pages.
+// p->lock must be held.
+static void
+freeproc(struct proc *p)
+{
+  if(p->trapframe)
+    kfree((void*)p->trapframe);
+  p->trapframe = 0;
+  if(p->pagetable)
+    proc_freepagetable(p->pagetable, p->sz);
+  p->pagetable = 0;
+  p->sz = 0;
+  p->pid = 0;
+  p->parent = 0;
+  p->name[0] = 0;
+  p->chan = 0;
+  p->killed = 0;
+  p->xstate = 0;
+  p->state = UNUSED;
+}
+
+// Create a user page table for a given process, with no user memory,
+// but with trampoline and trapframe pages.
+pagetable_t
+proc_pagetable(struct proc *p)
+{
+  pagetable_t pagetable;
+
+  // An empty page table.
+  pagetable = uvmcreate();
+  if(pagetable == 0)
+    return 0;
+
+  // map the trampoline code (for system call return)
+  // at the highest user virtual address.
+  // only the supervisor uses it, on the way
+  // to/from user space, so not PTE_U.
+  if(mappages(pagetable, TRAMPOLINE, PGSIZE,
+              (uint64)trampoline, PTE_R | PTE_X) < 0){
+    uvmfree(pagetable, 0);
+    return 0;
+  }
+
+  // map the trapframe page just below the trampoline page, for
+  // trampoline.S.
+  if(mappages(pagetable, TRAPFRAME, PGSIZE,
+              (uint64)(p->trapframe), PTE_R | PTE_W) < 0){
+    uvmunmap(pagetable, TRAMPOLINE, 1, 0);
+    uvmfree(pagetable, 0);
+    return 0;
+  }
+
+  return pagetable;
+}
+
+// Free a process's page table, and free the
+// physical memory it refers to.
+void
+proc_freepagetable(pagetable_t pagetable, uint64 sz)
+{
+  uvmunmap(pagetable, TRAMPOLINE, 1, 0);
+  uvmunmap(pagetable, TRAPFRAME, 1, 0);
+  uvmfree(pagetable, sz);
+}
+
+// a user program that calls exec("/init")
+// assembled from ../user/initcode.S
+// od -t xC ../user/initcode
+uchar initcode[] = {
+  0x17, 0x05, 0x00, 0x00, 0x13, 0x05, 0x45, 0x02,
+  0x97, 0x05, 0x00, 0x00, 0x93, 0x85, 0x35, 0x02,
+  0x93, 0x08, 0x70, 0x00, 0x73, 0x00, 0x00, 0x00,
+  0x93, 0x08, 0x20, 0x00, 0x73, 0x00, 0x00, 0x00,
+  0xef, 0xf0, 0x9f, 0xff, 0x2f, 0x69, 0x6e, 0x69,
+  0x74, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00,
+  0x00, 0x00, 0x00, 0x00
+};
+
+// Set up first user process.
+void
+userinit(void)
+{
+  struct proc *p;
+
+  p = allocproc();
+  initproc = p;
+  
+  // allocate one user page and copy initcode's instructions
+  // and data into it.
+  uvmfirst(p->pagetable, initcode, sizeof(initcode));
+  p->sz = PGSIZE;
+
+  // prepare for the very first "return" from kernel to user.
+  p->trapframe->epc = 0;      // user program counter
+  p->trapframe->sp = PGSIZE;  // user stack pointer
+
+  safestrcpy(p->name, "initcode", sizeof(p->name));
+  p->cwd = namei("/");
+
+  p->state = RUNNABLE;
+
+  release(&p->lock);
+}
+
+// Grow or shrink user memory by n bytes.
+// Return 0 on success, -1 on failure.
+int
+growproc(int n)
+{
+  uint64 sz;
+  struct proc *p = myproc();
+
+  sz = p->sz;
+  if(n > 0){
+    if((sz = uvmalloc(p->pagetable, sz, sz + n, PTE_W)) == 0) {
+      return -1;
+    }
+  } else if(n < 0){
+    sz = uvmdealloc(p->pagetable, sz, sz + n);
+  }
+  p->sz = sz;
+  return 0;
+}
+
+// Create a new process, copying the parent.
+// Sets up child kernel stack to return as if from fork() system call.
+int
+fork(void)
+{
+  int i, pid;
+  struct proc *np;
+  struct proc *p = myproc();
+
+  // Allocate process.
+  if((np = allocproc()) == 0){
+    return -1;
+  }
+
+  // Copy user memory from parent to child.
+  if(uvmcopy(p->pagetable, np->pagetable, p->sz) < 0){
+    freeproc(np);
+    release(&np->lock);
+    return -1;
+  }
+  np->sz = p->sz;
+
+  // copy saved user registers.
+  *(np->trapframe) = *(p->trapframe);
+
+  // Cause fork to return 0 in the child.
+  np->trapframe->a0 = 0;
+
+  // increment reference counts on open file descriptors.
+  for(i = 0; i < NOFILE; i++)
+    if(p->ofile[i])
+      np->ofile[i] = filedup(p->ofile[i]);
+  np->cwd = idup(p->cwd);
+
+  safestrcpy(np->name, p->name, sizeof(p->name));
+
+  pid = np->pid;
+
+  release(&np->lock);
+
+  acquire(&wait_lock);
+  np->parent = p;
+  release(&wait_lock);
+
+  acquire(&np->lock);
+  np->state = RUNNABLE;
+  release(&np->lock);
+
+  return pid;
+}
+
+// Pass p's abandoned children to init.
+// Caller must hold wait_lock.
+void
+reparent(struct proc *p)
+{
+  struct proc *pp;
+
+  for(pp = proc; pp < &proc[NPROC]; pp++){
+    if(pp->parent == p){
+      pp->parent = initproc;
+      wakeup(initproc);
+    }
+  }
+}
+
+// Exit the current process.  Does not return.
+// An exited process remains in the zombie state
+// until its parent calls wait().
+void
+exit(int status)
+{
+  struct proc *p = myproc();
+
+  if(p == initproc)
+    panic("init exiting");
+
+  // Close all open files.
+  for(int fd = 0; fd < NOFILE; fd++){
+    if(p->ofile[fd]){
+      struct file *f = p->ofile[fd];
+      fileclose(f);
+      p->ofile[fd] = 0;
+    }
+  }
+
+  begin_op();
+  iput(p->cwd);
+  end_op();
+  p->cwd = 0;
+
+  acquire(&wait_lock);
+
+  // Give any children to init.
+  reparent(p);
+
+  // Parent might be sleeping in wait().
+  wakeup(p->parent);
+  
+  acquire(&p->lock);
+
+  p->xstate = status;
+  p->state = ZOMBIE;
+
+  release(&wait_lock);
+
+  // Jump into the scheduler, never to return.
+  sched();
+  panic("zombie exit");
+}
+
+// Wait for a child process to exit and return its pid.
+// Return -1 if this process has no children.
+int
+wait(uint64 addr)
+{
+  struct proc *pp;
+  int havekids, pid;
+  struct proc *p = myproc();
+
+  acquire(&wait_lock);
+
+  for(;;){
+    // Scan through table looking for exited children.
+    havekids = 0;
+    for(pp = proc; pp < &proc[NPROC]; pp++){
+      if(pp->parent == p){
+        // make sure the child isn't still in exit() or swtch().
+        acquire(&pp->lock);
+
+        havekids = 1;
+        if(pp->state == ZOMBIE){
+          // Found one.
+          pid = pp->pid;
+          if(addr != 0 && copyout(p->pagetable, addr, (char *)&pp->xstate,
+                                  sizeof(pp->xstate)) < 0) {
+            release(&pp->lock);
+            release(&wait_lock);
+            return -1;
+          }
+          freeproc(pp);
+          release(&pp->lock);
+          release(&wait_lock);
+          return pid;
+        }
+        release(&pp->lock);
+      }
+    }
+
+    // No point waiting if we don't have any children.
+    if(!havekids || killed(p)){
+      release(&wait_lock);
+      return -1;
+    }
+    
+    // Wait for a child to exit.
+    sleep(p, &wait_lock);  //DOC: wait-sleep
+  }
+}
+
+// Per-CPU process scheduler.
+// Each CPU calls scheduler() after setting itself up.
+// Scheduler never returns.  It loops, doing:
+//  - choose a process to run.
+//  - swtch to start running that process.
+//  - eventually that process transfers control
+//    via swtch back to the scheduler.
+void
+scheduler(void)
+{
+  struct proc *p;
+  struct cpu *c = mycpu();
+
+  c->proc = 0;
+  for(;;){
+    // The most recent process to run may have had interrupts
+    // turned off; enable them to avoid a deadlock if all
+    // processes are waiting.
+    intr_on();
+
+    int found = 0;
+    for(p = proc; p < &proc[NPROC]; p++) {
+      acquire(&p->lock);
+      if(p->state == RUNNABLE) {
+        // Switch to chosen process.  It is the process's job
+        // to release its lock and then reacquire it
+        // before jumping back to us.
+        p->state = RUNNING;
+        c->proc = p;
+        swtch(&c->context, &p->context);
+
+        // Process is done running for now.
+        // It should have changed its p->state before coming back.
+        c->proc = 0;
+        found = 1;
+      }
+      release(&p->lock);
+    }
+    if(found == 0) {
+      // nothing to run; stop running on this core until an interrupt.
+      intr_on();
+      asm volatile("wfi");
+    }
+  }
+}
+
+// Switch to scheduler.  Must hold only p->lock
+// and have changed proc->state. Saves and restores
+// intena because intena is a property of this
+// kernel thread, not this CPU. It should
+// be proc->intena and proc->noff, but that would
+// break in the few places where a lock is held but
+// there's no process.
+void
+sched(void)
+{
+  int intena;
+  struct proc *p = myproc();
+
+  if(!holding(&p->lock))
+    panic("sched p->lock");
+  if(mycpu()->noff != 1)
+    panic("sched locks");
+  if(p->state == RUNNING)
+    panic("sched running");
+  if(intr_get())
+    panic("sched interruptible");
+
+  intena = mycpu()->intena;
+  swtch(&p->context, &mycpu()->context);
+  mycpu()->intena = intena;
+}
+
+// Give up the CPU for one scheduling round.
+void
+yield(void)
+{
+  struct proc *p = myproc();
+  acquire(&p->lock);
+  p->state = RUNNABLE;
+  sched();
+  release(&p->lock);
+}
+
+// A fork child's very first scheduling by scheduler()
+// will swtch to forkret.
+void
+forkret(void)
+{
+  static int first = 1;
+
+  // Still holding p->lock from scheduler.
+  release(&myproc()->lock);
+
+  if (first) {
+    // File system initialization must be run in the context of a
+    // regular process (e.g., because it calls sleep), and thus cannot
+    // be run from main().
+    fsinit(ROOTDEV);
+
+    first = 0;
+    // ensure other cores see first=0.
+    __sync_synchronize();
+  }
+
+  usertrapret();
+}
+
+// Atomically release lock and sleep on chan.
+// Reacquires lock when awakened.
+void
+sleep(void *chan, struct spinlock *lk)
+{
+  struct proc *p = myproc();
+  
+  // Must acquire p->lock in order to
+  // change p->state and then call sched.
+  // Once we hold p->lock, we can be
+  // guaranteed that we won't miss any wakeup
+  // (wakeup locks p->lock),
+  // so it's okay to release lk.
+
+  acquire(&p->lock);  //DOC: sleeplock1
+  release(lk);
+
+  // Go to sleep.
+  p->chan = chan;
+  p->state = SLEEPING;
+
+  sched();
+
+  // Tidy up.
+  p->chan = 0;
+
+  // Reacquire original lock.
+  release(&p->lock);
+  acquire(lk);
+}
+
+// Wake up all processes sleeping on chan.
+// Must be called without any p->lock.
+void
+wakeup(void *chan)
+{
+  struct proc *p;
+
+  for(p = proc; p < &proc[NPROC]; p++) {
+    if(p != myproc()){
+      acquire(&p->lock);
+      if(p->state == SLEEPING && p->chan == chan) {
+        p->state = RUNNABLE;
+      }
+      release(&p->lock);
+    }
+  }
+}
+
+// Kill the process with the given pid.
+// The victim won't exit until it tries to return
+// to user space (see usertrap() in trap.c).
+int
+kill(int pid)
+{
+  struct proc *p;
+
+  for(p = proc; p < &proc[NPROC]; p++){
+    acquire(&p->lock);
+    if(p->pid == pid){
+      p->killed = 1;
+      if(p->state == SLEEPING){
+        // Wake process from sleep().
+        p->state = RUNNABLE;
+      }
+      release(&p->lock);
+      return 0;
+    }
+    release(&p->lock);
+  }
+  return -1;
+}
+
+void
+setkilled(struct proc *p)
+{
+  acquire(&p->lock);
+  p->killed = 1;
+  release(&p->lock);
+}
+
+int
+killed(struct proc *p)
+{
+  int k;
+  
+  acquire(&p->lock);
+  k = p->killed;
+  release(&p->lock);
+  return k;
+}
+
+// Copy to either a user address, or kernel address,
+// depending on usr_dst.
+// Returns 0 on success, -1 on error.
+int
+either_copyout(int user_dst, uint64 dst, void *src, uint64 len)
+{
+  struct proc *p = myproc();
+  if(user_dst){
+    return copyout(p->pagetable, dst, src, len);
+  } else {
+    memmove((char *)dst, src, len);
+    return 0;
+  }
+}
+
+// Copy from either a user address, or kernel address,
+// depending on usr_src.
+// Returns 0 on success, -1 on error.
+int
+either_copyin(void *dst, int user_src, uint64 src, uint64 len)
+{
+  struct proc *p = myproc();
+  if(user_src){
+    return copyin(p->pagetable, dst, src, len);
+  } else {
+    memmove(dst, (char*)src, len);
+    return 0;
+  }
+}
+
+// Print a process listing to console.  For debugging.
+// Runs when user types ^P on console.
+// No lock to avoid wedging a stuck machine further.
+void
+procdump(void)
+{
+  static char *states[] = {
+  [UNUSED]    "unused",
+  [USED]      "used",
+  [SLEEPING]  "sleep ",
+  [RUNNABLE]  "runble",
+  [RUNNING]   "run   ",
+  [ZOMBIE]    "zombie"
+  };
+  struct proc *p;
+  char *state;
+
+  printf("\n");
+  for(p = proc; p < &proc[NPROC]; p++){
+    if(p->state == UNUSED)
+      continue;
+    if(p->state >= 0 && p->state < NELEM(states) && states[p->state])
+      state = states[p->state];
+    else
+      state = "???";
+    printf("%d %s %s", p->pid, state, p->name);
+    printf("\n");
+  }
+}
diff --git a/xv6-labs-2024/kernel/proc.d b/xv6-labs-2024/kernel/proc.d
new file mode 100644
index 0000000..5ca3c28
--- /dev/null
+++ b/xv6-labs-2024/kernel/proc.d
@@ -0,0 +1,3 @@
+kernel/proc.o: kernel/proc.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/spinlock.h kernel/proc.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/proc.h b/xv6-labs-2024/kernel/proc.h
new file mode 100644
index 0000000..d021857
--- /dev/null
+++ b/xv6-labs-2024/kernel/proc.h
@@ -0,0 +1,107 @@
+// Saved registers for kernel context switches.
+struct context {
+  uint64 ra;
+  uint64 sp;
+
+  // callee-saved
+  uint64 s0;
+  uint64 s1;
+  uint64 s2;
+  uint64 s3;
+  uint64 s4;
+  uint64 s5;
+  uint64 s6;
+  uint64 s7;
+  uint64 s8;
+  uint64 s9;
+  uint64 s10;
+  uint64 s11;
+};
+
+// Per-CPU state.
+struct cpu {
+  struct proc *proc;          // The process running on this cpu, or null.
+  struct context context;     // swtch() here to enter scheduler().
+  int noff;                   // Depth of push_off() nesting.
+  int intena;                 // Were interrupts enabled before push_off()?
+};
+
+extern struct cpu cpus[NCPU];
+
+// per-process data for the trap handling code in trampoline.S.
+// sits in a page by itself just under the trampoline page in the
+// user page table. not specially mapped in the kernel page table.
+// uservec in trampoline.S saves user registers in the trapframe,
+// then initializes registers from the trapframe's
+// kernel_sp, kernel_hartid, kernel_satp, and jumps to kernel_trap.
+// usertrapret() and userret in trampoline.S set up
+// the trapframe's kernel_*, restore user registers from the
+// trapframe, switch to the user page table, and enter user space.
+// the trapframe includes callee-saved user registers like s0-s11 because the
+// return-to-user path via usertrapret() doesn't return through
+// the entire kernel call stack.
+struct trapframe {
+  /*   0 */ uint64 kernel_satp;   // kernel page table
+  /*   8 */ uint64 kernel_sp;     // top of process's kernel stack
+  /*  16 */ uint64 kernel_trap;   // usertrap()
+  /*  24 */ uint64 epc;           // saved user program counter
+  /*  32 */ uint64 kernel_hartid; // saved kernel tp
+  /*  40 */ uint64 ra;
+  /*  48 */ uint64 sp;
+  /*  56 */ uint64 gp;
+  /*  64 */ uint64 tp;
+  /*  72 */ uint64 t0;
+  /*  80 */ uint64 t1;
+  /*  88 */ uint64 t2;
+  /*  96 */ uint64 s0;
+  /* 104 */ uint64 s1;
+  /* 112 */ uint64 a0;
+  /* 120 */ uint64 a1;
+  /* 128 */ uint64 a2;
+  /* 136 */ uint64 a3;
+  /* 144 */ uint64 a4;
+  /* 152 */ uint64 a5;
+  /* 160 */ uint64 a6;
+  /* 168 */ uint64 a7;
+  /* 176 */ uint64 s2;
+  /* 184 */ uint64 s3;
+  /* 192 */ uint64 s4;
+  /* 200 */ uint64 s5;
+  /* 208 */ uint64 s6;
+  /* 216 */ uint64 s7;
+  /* 224 */ uint64 s8;
+  /* 232 */ uint64 s9;
+  /* 240 */ uint64 s10;
+  /* 248 */ uint64 s11;
+  /* 256 */ uint64 t3;
+  /* 264 */ uint64 t4;
+  /* 272 */ uint64 t5;
+  /* 280 */ uint64 t6;
+};
+
+enum procstate { UNUSED, USED, SLEEPING, RUNNABLE, RUNNING, ZOMBIE };
+
+// Per-process state
+struct proc {
+  struct spinlock lock;
+
+  // p->lock must be held when using these:
+  enum procstate state;        // Process state
+  void *chan;                  // If non-zero, sleeping on chan
+  int killed;                  // If non-zero, have been killed
+  int xstate;                  // Exit status to be returned to parent's wait
+  int pid;                     // Process ID
+
+  // wait_lock must be held when using this:
+  struct proc *parent;         // Parent process
+
+  // these are private to the process, so p->lock need not be held.
+  uint64 kstack;               // Virtual address of kernel stack
+  uint64 sz;                   // Size of process memory (bytes)
+  pagetable_t pagetable;       // User page table
+  struct trapframe *trapframe; // data page for trampoline.S
+  struct context context;      // swtch() here to run process
+  struct file *ofile[NOFILE];  // Open files
+  struct inode *cwd;           // Current directory
+  char name[16];               // Process name (debugging)
+};
diff --git a/xv6-labs-2024/kernel/proc.o b/xv6-labs-2024/kernel/proc.o
new file mode 100644
index 0000000..90f74ca
Binary files /dev/null and b/xv6-labs-2024/kernel/proc.o differ
diff --git a/xv6-labs-2024/kernel/riscv.h b/xv6-labs-2024/kernel/riscv.h
new file mode 100644
index 0000000..6cfff1e
--- /dev/null
+++ b/xv6-labs-2024/kernel/riscv.h
@@ -0,0 +1,401 @@
+#ifndef __ASSEMBLER__
+
+// which hart (core) is this?
+static inline uint64
+r_mhartid()
+{
+  uint64 x;
+  asm volatile("csrr %0, mhartid" : "=r" (x) );
+  return x;
+}
+
+// Machine Status Register, mstatus
+
+#define MSTATUS_MPP_MASK (3L << 11) // previous mode.
+#define MSTATUS_MPP_M (3L << 11)
+#define MSTATUS_MPP_S (1L << 11)
+#define MSTATUS_MPP_U (0L << 11)
+#define MSTATUS_MIE (1L << 3)    // machine-mode interrupt enable.
+
+static inline uint64
+r_mstatus()
+{
+  uint64 x;
+  asm volatile("csrr %0, mstatus" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_mstatus(uint64 x)
+{
+  asm volatile("csrw mstatus, %0" : : "r" (x));
+}
+
+// machine exception program counter, holds the
+// instruction address to which a return from
+// exception will go.
+static inline void 
+w_mepc(uint64 x)
+{
+  asm volatile("csrw mepc, %0" : : "r" (x));
+}
+
+// Supervisor Status Register, sstatus
+
+#define SSTATUS_SPP (1L << 8)  // Previous mode, 1=Supervisor, 0=User
+#define SSTATUS_SPIE (1L << 5) // Supervisor Previous Interrupt Enable
+#define SSTATUS_UPIE (1L << 4) // User Previous Interrupt Enable
+#define SSTATUS_SIE (1L << 1)  // Supervisor Interrupt Enable
+#define SSTATUS_UIE (1L << 0)  // User Interrupt Enable
+
+static inline uint64
+r_sstatus()
+{
+  uint64 x;
+  asm volatile("csrr %0, sstatus" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_sstatus(uint64 x)
+{
+  asm volatile("csrw sstatus, %0" : : "r" (x));
+}
+
+// Supervisor Interrupt Pending
+static inline uint64
+r_sip()
+{
+  uint64 x;
+  asm volatile("csrr %0, sip" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_sip(uint64 x)
+{
+  asm volatile("csrw sip, %0" : : "r" (x));
+}
+
+// Supervisor Interrupt Enable
+#define SIE_SEIE (1L << 9) // external
+#define SIE_STIE (1L << 5) // timer
+#define SIE_SSIE (1L << 1) // software
+static inline uint64
+r_sie()
+{
+  uint64 x;
+  asm volatile("csrr %0, sie" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_sie(uint64 x)
+{
+  asm volatile("csrw sie, %0" : : "r" (x));
+}
+
+// Machine-mode Interrupt Enable
+#define MIE_STIE (1L << 5)  // supervisor timer
+static inline uint64
+r_mie()
+{
+  uint64 x;
+  asm volatile("csrr %0, mie" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_mie(uint64 x)
+{
+  asm volatile("csrw mie, %0" : : "r" (x));
+}
+
+// supervisor exception program counter, holds the
+// instruction address to which a return from
+// exception will go.
+static inline void 
+w_sepc(uint64 x)
+{
+  asm volatile("csrw sepc, %0" : : "r" (x));
+}
+
+static inline uint64
+r_sepc()
+{
+  uint64 x;
+  asm volatile("csrr %0, sepc" : "=r" (x) );
+  return x;
+}
+
+// Machine Exception Delegation
+static inline uint64
+r_medeleg()
+{
+  uint64 x;
+  asm volatile("csrr %0, medeleg" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_medeleg(uint64 x)
+{
+  asm volatile("csrw medeleg, %0" : : "r" (x));
+}
+
+// Machine Interrupt Delegation
+static inline uint64
+r_mideleg()
+{
+  uint64 x;
+  asm volatile("csrr %0, mideleg" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_mideleg(uint64 x)
+{
+  asm volatile("csrw mideleg, %0" : : "r" (x));
+}
+
+// Supervisor Trap-Vector Base Address
+// low two bits are mode.
+static inline void 
+w_stvec(uint64 x)
+{
+  asm volatile("csrw stvec, %0" : : "r" (x));
+}
+
+static inline uint64
+r_stvec()
+{
+  uint64 x;
+  asm volatile("csrr %0, stvec" : "=r" (x) );
+  return x;
+}
+
+// Supervisor Timer Comparison Register
+static inline uint64
+r_stimecmp()
+{
+  uint64 x;
+  // asm volatile("csrr %0, stimecmp" : "=r" (x) );
+  asm volatile("csrr %0, 0x14d" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_stimecmp(uint64 x)
+{
+  // asm volatile("csrw stimecmp, %0" : : "r" (x));
+  asm volatile("csrw 0x14d, %0" : : "r" (x));
+}
+
+// Machine Environment Configuration Register
+static inline uint64
+r_menvcfg()
+{
+  uint64 x;
+  // asm volatile("csrr %0, menvcfg" : "=r" (x) );
+  asm volatile("csrr %0, 0x30a" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_menvcfg(uint64 x)
+{
+  //asm volatile("csrw menvcfg, %0" : : "r" (x));
+  asm volatile("csrw 0x30a, %0" : : "r" (x));
+}
+
+// Physical Memory Protection
+static inline void
+w_pmpcfg0(uint64 x)
+{
+  asm volatile("csrw pmpcfg0, %0" : : "r" (x));
+}
+
+static inline void
+w_pmpaddr0(uint64 x)
+{
+  asm volatile("csrw pmpaddr0, %0" : : "r" (x));
+}
+
+// use riscv's sv39 page table scheme.
+#define SATP_SV39 (8L << 60)
+
+#define MAKE_SATP(pagetable) (SATP_SV39 | (((uint64)pagetable) >> 12))
+
+// supervisor address translation and protection;
+// holds the address of the page table.
+static inline void 
+w_satp(uint64 x)
+{
+  asm volatile("csrw satp, %0" : : "r" (x));
+}
+
+static inline uint64
+r_satp()
+{
+  uint64 x;
+  asm volatile("csrr %0, satp" : "=r" (x) );
+  return x;
+}
+
+// Supervisor Trap Cause
+static inline uint64
+r_scause()
+{
+  uint64 x;
+  asm volatile("csrr %0, scause" : "=r" (x) );
+  return x;
+}
+
+// Supervisor Trap Value
+static inline uint64
+r_stval()
+{
+  uint64 x;
+  asm volatile("csrr %0, stval" : "=r" (x) );
+  return x;
+}
+
+// Machine-mode Counter-Enable
+static inline void 
+w_mcounteren(uint64 x)
+{
+  asm volatile("csrw mcounteren, %0" : : "r" (x));
+}
+
+static inline uint64
+r_mcounteren()
+{
+  uint64 x;
+  asm volatile("csrr %0, mcounteren" : "=r" (x) );
+  return x;
+}
+
+// machine-mode cycle counter
+static inline uint64
+r_time()
+{
+  uint64 x;
+  asm volatile("csrr %0, time" : "=r" (x) );
+  return x;
+}
+
+// enable device interrupts
+static inline void
+intr_on()
+{
+  w_sstatus(r_sstatus() | SSTATUS_SIE);
+}
+
+// disable device interrupts
+static inline void
+intr_off()
+{
+  w_sstatus(r_sstatus() & ~SSTATUS_SIE);
+}
+
+// are device interrupts enabled?
+static inline int
+intr_get()
+{
+  uint64 x = r_sstatus();
+  return (x & SSTATUS_SIE) != 0;
+}
+
+static inline uint64
+r_sp()
+{
+  uint64 x;
+  asm volatile("mv %0, sp" : "=r" (x) );
+  return x;
+}
+
+static inline uint64
+r_fp()
+{
+  uint64 x;
+  asm volatile("mv %0, s0" : "=r" (x) );
+  return x;
+}
+
+// read and write tp, the thread pointer, which xv6 uses to hold
+// this core's hartid (core number), the index into cpus[].
+static inline uint64
+r_tp()
+{
+  uint64 x;
+  asm volatile("mv %0, tp" : "=r" (x) );
+  return x;
+}
+
+static inline void 
+w_tp(uint64 x)
+{
+  asm volatile("mv tp, %0" : : "r" (x));
+}
+
+static inline uint64
+r_ra()
+{
+  uint64 x;
+  asm volatile("mv %0, ra" : "=r" (x) );
+  return x;
+}
+
+// flush the TLB.
+static inline void
+sfence_vma()
+{
+  // the zero, zero means flush all TLB entries.
+  asm volatile("sfence.vma zero, zero");
+}
+
+typedef uint64 pte_t;
+typedef uint64 *pagetable_t; // 512 PTEs
+
+#endif // __ASSEMBLER__
+
+#define PGSIZE 4096 // bytes per page
+#define PGSHIFT 12  // bits of offset within a page
+
+#ifdef LAB_PGTBL
+#define SUPERPGSIZE (2 * (1 << 20)) // bytes per page
+#define SUPERPGROUNDUP(sz)  (((sz)+SUPERPGSIZE-1) & ~(SUPERPGSIZE-1))
+#endif
+
+#define PGROUNDUP(sz)  (((sz)+PGSIZE-1) & ~(PGSIZE-1))
+#define PGROUNDDOWN(a) (((a)) & ~(PGSIZE-1))
+
+#define PTE_V (1L << 0) // valid
+#define PTE_R (1L << 1)
+#define PTE_W (1L << 2)
+#define PTE_X (1L << 3)
+#define PTE_U (1L << 4) // user can access
+
+
+
+#if defined(LAB_MMAP) || defined(LAB_PGTBL)
+#define PTE_LEAF(pte) (((pte) & PTE_R) | ((pte) & PTE_W) | ((pte) & PTE_X))
+#endif
+
+// shift a physical address to the right place for a PTE.
+#define PA2PTE(pa) ((((uint64)pa) >> 12) << 10)
+
+#define PTE2PA(pte) (((pte) >> 10) << 12)
+
+#define PTE_FLAGS(pte) ((pte) & 0x3FF)
+
+// extract the three 9-bit page table indices from a virtual address.
+#define PXMASK          0x1FF // 9 bits
+#define PXSHIFT(level)  (PGSHIFT+(9*(level)))
+#define PX(level, va) ((((uint64) (va)) >> PXSHIFT(level)) & PXMASK)
+
+// one beyond the highest possible virtual address.
+// MAXVA is actually one bit less than the max allowed by
+// Sv39, to avoid having to sign-extend virtual addresses
+// that have the high bit set.
+#define MAXVA (1L << (9 + 9 + 9 + 12 - 1))
diff --git a/xv6-labs-2024/kernel/sleeplock.c b/xv6-labs-2024/kernel/sleeplock.c
new file mode 100644
index 0000000..81de585
--- /dev/null
+++ b/xv6-labs-2024/kernel/sleeplock.c
@@ -0,0 +1,55 @@
+// Sleeping locks
+
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "memlayout.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "sleeplock.h"
+
+void
+initsleeplock(struct sleeplock *lk, char *name)
+{
+  initlock(&lk->lk, "sleep lock");
+  lk->name = name;
+  lk->locked = 0;
+  lk->pid = 0;
+}
+
+void
+acquiresleep(struct sleeplock *lk)
+{
+  acquire(&lk->lk);
+  while (lk->locked) {
+    sleep(lk, &lk->lk);
+  }
+  lk->locked = 1;
+  lk->pid = myproc()->pid;
+  release(&lk->lk);
+}
+
+void
+releasesleep(struct sleeplock *lk)
+{
+  acquire(&lk->lk);
+  lk->locked = 0;
+  lk->pid = 0;
+  wakeup(lk);
+  release(&lk->lk);
+}
+
+int
+holdingsleep(struct sleeplock *lk)
+{
+  int r;
+  
+  acquire(&lk->lk);
+  r = lk->locked && (lk->pid == myproc()->pid);
+  release(&lk->lk);
+  return r;
+}
+
+
+
diff --git a/xv6-labs-2024/kernel/sleeplock.d b/xv6-labs-2024/kernel/sleeplock.d
new file mode 100644
index 0000000..d02ff7f
--- /dev/null
+++ b/xv6-labs-2024/kernel/sleeplock.d
@@ -0,0 +1,4 @@
+kernel/sleeplock.o: kernel/sleeplock.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/riscv.h kernel/defs.h kernel/param.h kernel/memlayout.h \
+ kernel/spinlock.h kernel/proc.h kernel/sleeplock.h
diff --git a/xv6-labs-2024/kernel/sleeplock.h b/xv6-labs-2024/kernel/sleeplock.h
new file mode 100644
index 0000000..110e6f3
--- /dev/null
+++ b/xv6-labs-2024/kernel/sleeplock.h
@@ -0,0 +1,10 @@
+// Long-term locks for processes
+struct sleeplock {
+  uint locked;       // Is the lock held?
+  struct spinlock lk; // spinlock protecting this sleep lock
+  
+  // For debugging:
+  char *name;        // Name of lock.
+  int pid;           // Process holding lock
+};
+
diff --git a/xv6-labs-2024/kernel/sleeplock.o b/xv6-labs-2024/kernel/sleeplock.o
new file mode 100644
index 0000000..e436240
Binary files /dev/null and b/xv6-labs-2024/kernel/sleeplock.o differ
diff --git a/xv6-labs-2024/kernel/spinlock.c b/xv6-labs-2024/kernel/spinlock.c
new file mode 100644
index 0000000..9840302
--- /dev/null
+++ b/xv6-labs-2024/kernel/spinlock.c
@@ -0,0 +1,110 @@
+// Mutual exclusion spin locks.
+
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "spinlock.h"
+#include "riscv.h"
+#include "proc.h"
+#include "defs.h"
+
+void
+initlock(struct spinlock *lk, char *name)
+{
+  lk->name = name;
+  lk->locked = 0;
+  lk->cpu = 0;
+}
+
+// Acquire the lock.
+// Loops (spins) until the lock is acquired.
+void
+acquire(struct spinlock *lk)
+{
+  push_off(); // disable interrupts to avoid deadlock.
+  if(holding(lk))
+    panic("acquire");
+
+  // On RISC-V, sync_lock_test_and_set turns into an atomic swap:
+  //   a5 = 1
+  //   s1 = &lk->locked
+  //   amoswap.w.aq a5, a5, (s1)
+  while(__sync_lock_test_and_set(&lk->locked, 1) != 0)
+    ;
+
+  // Tell the C compiler and the processor to not move loads or stores
+  // past this point, to ensure that the critical section's memory
+  // references happen strictly after the lock is acquired.
+  // On RISC-V, this emits a fence instruction.
+  __sync_synchronize();
+
+  // Record info about lock acquisition for holding() and debugging.
+  lk->cpu = mycpu();
+}
+
+// Release the lock.
+void
+release(struct spinlock *lk)
+{
+  if(!holding(lk))
+    panic("release");
+
+  lk->cpu = 0;
+
+  // Tell the C compiler and the CPU to not move loads or stores
+  // past this point, to ensure that all the stores in the critical
+  // section are visible to other CPUs before the lock is released,
+  // and that loads in the critical section occur strictly before
+  // the lock is released.
+  // On RISC-V, this emits a fence instruction.
+  __sync_synchronize();
+
+  // Release the lock, equivalent to lk->locked = 0.
+  // This code doesn't use a C assignment, since the C standard
+  // implies that an assignment might be implemented with
+  // multiple store instructions.
+  // On RISC-V, sync_lock_release turns into an atomic swap:
+  //   s1 = &lk->locked
+  //   amoswap.w zero, zero, (s1)
+  __sync_lock_release(&lk->locked);
+
+  pop_off();
+}
+
+// Check whether this cpu is holding the lock.
+// Interrupts must be off.
+int
+holding(struct spinlock *lk)
+{
+  int r;
+  r = (lk->locked && lk->cpu == mycpu());
+  return r;
+}
+
+// push_off/pop_off are like intr_off()/intr_on() except that they are matched:
+// it takes two pop_off()s to undo two push_off()s.  Also, if interrupts
+// are initially off, then push_off, pop_off leaves them off.
+
+void
+push_off(void)
+{
+  int old = intr_get();
+
+  intr_off();
+  if(mycpu()->noff == 0)
+    mycpu()->intena = old;
+  mycpu()->noff += 1;
+}
+
+void
+pop_off(void)
+{
+  struct cpu *c = mycpu();
+  if(intr_get())
+    panic("pop_off - interruptible");
+  if(c->noff < 1)
+    panic("pop_off");
+  c->noff -= 1;
+  if(c->noff == 0 && c->intena)
+    intr_on();
+}
diff --git a/xv6-labs-2024/kernel/spinlock.d b/xv6-labs-2024/kernel/spinlock.d
new file mode 100644
index 0000000..e571bfc
--- /dev/null
+++ b/xv6-labs-2024/kernel/spinlock.d
@@ -0,0 +1,4 @@
+kernel/spinlock.o: kernel/spinlock.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/param.h kernel/memlayout.h kernel/spinlock.h kernel/riscv.h \
+ kernel/proc.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/spinlock.h b/xv6-labs-2024/kernel/spinlock.h
new file mode 100644
index 0000000..4392820
--- /dev/null
+++ b/xv6-labs-2024/kernel/spinlock.h
@@ -0,0 +1,9 @@
+// Mutual exclusion lock.
+struct spinlock {
+  uint locked;       // Is the lock held?
+
+  // For debugging:
+  char *name;        // Name of lock.
+  struct cpu *cpu;   // The cpu holding the lock.
+};
+
diff --git a/xv6-labs-2024/kernel/spinlock.o b/xv6-labs-2024/kernel/spinlock.o
new file mode 100644
index 0000000..1395466
Binary files /dev/null and b/xv6-labs-2024/kernel/spinlock.o differ
diff --git a/xv6-labs-2024/kernel/start.c b/xv6-labs-2024/kernel/start.c
new file mode 100644
index 0000000..9ee35f1
--- /dev/null
+++ b/xv6-labs-2024/kernel/start.c
@@ -0,0 +1,66 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "defs.h"
+
+void main();
+void timerinit();
+
+// entry.S needs one stack per CPU.
+__attribute__ ((aligned (16))) char stack0[4096 * NCPU];
+
+// entry.S jumps here in machine mode on stack0.
+void
+start()
+{
+  // set M Previous Privilege mode to Supervisor, for mret.
+  unsigned long x = r_mstatus();
+  x &= ~MSTATUS_MPP_MASK;
+  x |= MSTATUS_MPP_S;
+  w_mstatus(x);
+
+  // set M Exception Program Counter to main, for mret.
+  // requires gcc -mcmodel=medany
+  w_mepc((uint64)main);
+
+  // disable paging for now.
+  w_satp(0);
+
+  // delegate all interrupts and exceptions to supervisor mode.
+  w_medeleg(0xffff);
+  w_mideleg(0xffff);
+  w_sie(r_sie() | SIE_SEIE | SIE_STIE | SIE_SSIE);
+
+  // configure Physical Memory Protection to give supervisor mode
+  // access to all of physical memory.
+  w_pmpaddr0(0x3fffffffffffffull);
+  w_pmpcfg0(0xf);
+
+  // ask for clock interrupts.
+  timerinit();
+
+  // keep each CPU's hartid in its tp register, for cpuid().
+  int id = r_mhartid();
+  w_tp(id);
+
+  // switch to supervisor mode and jump to main().
+  asm volatile("mret");
+}
+
+// ask each hart to generate timer interrupts.
+void
+timerinit()
+{
+  // enable supervisor-mode timer interrupts.
+  w_mie(r_mie() | MIE_STIE);
+  
+  // enable the sstc extension (i.e. stimecmp).
+  w_menvcfg(r_menvcfg() | (1L << 63)); 
+  
+  // allow supervisor to use stimecmp and time.
+  w_mcounteren(r_mcounteren() | 2);
+  
+  // ask for the very first timer interrupt.
+  w_stimecmp(r_time() + 1000000);
+}
diff --git a/xv6-labs-2024/kernel/start.d b/xv6-labs-2024/kernel/start.d
new file mode 100644
index 0000000..df9574d
--- /dev/null
+++ b/xv6-labs-2024/kernel/start.d
@@ -0,0 +1,3 @@
+kernel/start.o: kernel/start.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/param.h kernel/memlayout.h kernel/riscv.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/start.o b/xv6-labs-2024/kernel/start.o
new file mode 100644
index 0000000..25a900a
Binary files /dev/null and b/xv6-labs-2024/kernel/start.o differ
diff --git a/xv6-labs-2024/kernel/stat.h b/xv6-labs-2024/kernel/stat.h
new file mode 100644
index 0000000..19543af
--- /dev/null
+++ b/xv6-labs-2024/kernel/stat.h
@@ -0,0 +1,11 @@
+#define T_DIR     1   // Directory
+#define T_FILE    2   // File
+#define T_DEVICE  3   // Device
+
+struct stat {
+  int dev;     // File system's disk device
+  uint ino;    // Inode number
+  short type;  // Type of file
+  short nlink; // Number of links to file
+  uint64 size; // Size of file in bytes
+};
diff --git a/xv6-labs-2024/kernel/string.c b/xv6-labs-2024/kernel/string.c
new file mode 100644
index 0000000..153536f
--- /dev/null
+++ b/xv6-labs-2024/kernel/string.c
@@ -0,0 +1,107 @@
+#include "types.h"
+
+void*
+memset(void *dst, int c, uint n)
+{
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+    cdst[i] = c;
+  }
+  return dst;
+}
+
+int
+memcmp(const void *v1, const void *v2, uint n)
+{
+  const uchar *s1, *s2;
+
+  s1 = v1;
+  s2 = v2;
+  while(n-- > 0){
+    if(*s1 != *s2)
+      return *s1 - *s2;
+    s1++, s2++;
+  }
+
+  return 0;
+}
+
+void*
+memmove(void *dst, const void *src, uint n)
+{
+  const char *s;
+  char *d;
+
+  if(n == 0)
+    return dst;
+  
+  s = src;
+  d = dst;
+  if(s < d && s + n > d){
+    s += n;
+    d += n;
+    while(n-- > 0)
+      *--d = *--s;
+  } else
+    while(n-- > 0)
+      *d++ = *s++;
+
+  return dst;
+}
+
+// memcpy exists to placate GCC.  Use memmove.
+void*
+memcpy(void *dst, const void *src, uint n)
+{
+  return memmove(dst, src, n);
+}
+
+int
+strncmp(const char *p, const char *q, uint n)
+{
+  while(n > 0 && *p && *p == *q)
+    n--, p++, q++;
+  if(n == 0)
+    return 0;
+  return (uchar)*p - (uchar)*q;
+}
+
+char*
+strncpy(char *s, const char *t, int n)
+{
+  char *os;
+
+  os = s;
+  while(n-- > 0 && (*s++ = *t++) != 0)
+    ;
+  while(n-- > 0)
+    *s++ = 0;
+  return os;
+}
+
+// Like strncpy but guaranteed to NUL-terminate.
+char*
+safestrcpy(char *s, const char *t, int n)
+{
+  char *os;
+
+  os = s;
+  if(n <= 0)
+    return os;
+  while(--n > 0 && (*s++ = *t++) != 0)
+    ;
+  *s = 0;
+  return os;
+}
+
+int
+strlen(const char *s)
+{
+  int n;
+
+  for(n = 0; s[n]; n++)
+    ;
+  return n;
+}
+
diff --git a/xv6-labs-2024/kernel/string.d b/xv6-labs-2024/kernel/string.d
new file mode 100644
index 0000000..e04f6d3
--- /dev/null
+++ b/xv6-labs-2024/kernel/string.d
@@ -0,0 +1,2 @@
+kernel/string.o: kernel/string.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h
diff --git a/xv6-labs-2024/kernel/string.o b/xv6-labs-2024/kernel/string.o
new file mode 100644
index 0000000..fcbd3d6
Binary files /dev/null and b/xv6-labs-2024/kernel/string.o differ
diff --git a/xv6-labs-2024/kernel/swtch.S b/xv6-labs-2024/kernel/swtch.S
new file mode 100644
index 0000000..17a8663
--- /dev/null
+++ b/xv6-labs-2024/kernel/swtch.S
@@ -0,0 +1,42 @@
+# Context switch
+#
+#   void swtch(struct context *old, struct context *new);
+# 
+# Save current registers in old. Load from new.	
+
+
+.globl swtch
+swtch:
+        sd ra, 0(a0)
+        sd sp, 8(a0)
+        sd s0, 16(a0)
+        sd s1, 24(a0)
+        sd s2, 32(a0)
+        sd s3, 40(a0)
+        sd s4, 48(a0)
+        sd s5, 56(a0)
+        sd s6, 64(a0)
+        sd s7, 72(a0)
+        sd s8, 80(a0)
+        sd s9, 88(a0)
+        sd s10, 96(a0)
+        sd s11, 104(a0)
+
+        ld ra, 0(a1)
+        ld sp, 8(a1)
+        ld s0, 16(a1)
+        ld s1, 24(a1)
+        ld s2, 32(a1)
+        ld s3, 40(a1)
+        ld s4, 48(a1)
+        ld s5, 56(a1)
+        ld s6, 64(a1)
+        ld s7, 72(a1)
+        ld s8, 80(a1)
+        ld s9, 88(a1)
+        ld s10, 96(a1)
+        ld s11, 104(a1)
+        
+        ret
+
+	
diff --git a/xv6-labs-2024/kernel/swtch.o b/xv6-labs-2024/kernel/swtch.o
new file mode 100644
index 0000000..f3443f3
Binary files /dev/null and b/xv6-labs-2024/kernel/swtch.o differ
diff --git a/xv6-labs-2024/kernel/syscall.c b/xv6-labs-2024/kernel/syscall.c
new file mode 100644
index 0000000..ed65409
--- /dev/null
+++ b/xv6-labs-2024/kernel/syscall.c
@@ -0,0 +1,147 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "syscall.h"
+#include "defs.h"
+
+// Fetch the uint64 at addr from the current process.
+int
+fetchaddr(uint64 addr, uint64 *ip)
+{
+  struct proc *p = myproc();
+  if(addr >= p->sz || addr+sizeof(uint64) > p->sz) // both tests needed, in case of overflow
+    return -1;
+  if(copyin(p->pagetable, (char *)ip, addr, sizeof(*ip)) != 0)
+    return -1;
+  return 0;
+}
+
+// Fetch the nul-terminated string at addr from the current process.
+// Returns length of string, not including nul, or -1 for error.
+int
+fetchstr(uint64 addr, char *buf, int max)
+{
+  struct proc *p = myproc();
+  if(copyinstr(p->pagetable, buf, addr, max) < 0)
+    return -1;
+  return strlen(buf);
+}
+
+static uint64
+argraw(int n)
+{
+  struct proc *p = myproc();
+  switch (n) {
+  case 0:
+    return p->trapframe->a0;
+  case 1:
+    return p->trapframe->a1;
+  case 2:
+    return p->trapframe->a2;
+  case 3:
+    return p->trapframe->a3;
+  case 4:
+    return p->trapframe->a4;
+  case 5:
+    return p->trapframe->a5;
+  }
+  panic("argraw");
+  return -1;
+}
+
+// Fetch the nth 32-bit system call argument.
+void
+argint(int n, int *ip)
+{
+  *ip = argraw(n);
+}
+
+// Retrieve an argument as a pointer.
+// Doesn't check for legality, since
+// copyin/copyout will do that.
+void
+argaddr(int n, uint64 *ip)
+{
+  *ip = argraw(n);
+}
+
+// Fetch the nth word-sized system call argument as a null-terminated string.
+// Copies into buf, at most max.
+// Returns string length if OK (including nul), -1 if error.
+int
+argstr(int n, char *buf, int max)
+{
+  uint64 addr;
+  argaddr(n, &addr);
+  return fetchstr(addr, buf, max);
+}
+
+// Prototypes for the functions that handle system calls.
+extern uint64 sys_fork(void);
+extern uint64 sys_exit(void);
+extern uint64 sys_wait(void);
+extern uint64 sys_pipe(void);
+extern uint64 sys_read(void);
+extern uint64 sys_kill(void);
+extern uint64 sys_exec(void);
+extern uint64 sys_fstat(void);
+extern uint64 sys_chdir(void);
+extern uint64 sys_dup(void);
+extern uint64 sys_getpid(void);
+extern uint64 sys_sbrk(void);
+extern uint64 sys_sleep(void);
+extern uint64 sys_uptime(void);
+extern uint64 sys_open(void);
+extern uint64 sys_write(void);
+extern uint64 sys_mknod(void);
+extern uint64 sys_unlink(void);
+extern uint64 sys_link(void);
+extern uint64 sys_mkdir(void);
+extern uint64 sys_close(void);
+
+// An array mapping syscall numbers from syscall.h
+// to the function that handles the system call.
+static uint64 (*syscalls[])(void) = {
+[SYS_fork]    sys_fork,
+[SYS_exit]    sys_exit,
+[SYS_wait]    sys_wait,
+[SYS_pipe]    sys_pipe,
+[SYS_read]    sys_read,
+[SYS_kill]    sys_kill,
+[SYS_exec]    sys_exec,
+[SYS_fstat]   sys_fstat,
+[SYS_chdir]   sys_chdir,
+[SYS_dup]     sys_dup,
+[SYS_getpid]  sys_getpid,
+[SYS_sbrk]    sys_sbrk,
+[SYS_sleep]   sys_sleep,
+[SYS_uptime]  sys_uptime,
+[SYS_open]    sys_open,
+[SYS_write]   sys_write,
+[SYS_mknod]   sys_mknod,
+[SYS_unlink]  sys_unlink,
+[SYS_link]    sys_link,
+[SYS_mkdir]   sys_mkdir,
+[SYS_close]   sys_close,
+};
+
+void
+syscall(void)
+{
+  int num;
+  struct proc *p = myproc();
+
+  num = p->trapframe->a7;
+  if(num > 0 && num < NELEM(syscalls) && syscalls[num]) {
+    // Use num to lookup the system call function for num, call it,
+    // and store its return value in p->trapframe->a0
+    p->trapframe->a0 = syscalls[num]();
+  } else {
+    printf("%d %s: unknown sys call %d\n",
+            p->pid, p->name, num);
+    p->trapframe->a0 = -1;
+  }
+}
diff --git a/xv6-labs-2024/kernel/syscall.d b/xv6-labs-2024/kernel/syscall.d
new file mode 100644
index 0000000..f4fbd5b
--- /dev/null
+++ b/xv6-labs-2024/kernel/syscall.d
@@ -0,0 +1,4 @@
+kernel/syscall.o: kernel/syscall.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/param.h kernel/memlayout.h kernel/riscv.h kernel/spinlock.h \
+ kernel/proc.h kernel/syscall.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/syscall.h b/xv6-labs-2024/kernel/syscall.h
new file mode 100644
index 0000000..bc5f356
--- /dev/null
+++ b/xv6-labs-2024/kernel/syscall.h
@@ -0,0 +1,22 @@
+// System call numbers
+#define SYS_fork    1
+#define SYS_exit    2
+#define SYS_wait    3
+#define SYS_pipe    4
+#define SYS_read    5
+#define SYS_kill    6
+#define SYS_exec    7
+#define SYS_fstat   8
+#define SYS_chdir   9
+#define SYS_dup    10
+#define SYS_getpid 11
+#define SYS_sbrk   12
+#define SYS_sleep  13
+#define SYS_uptime 14
+#define SYS_open   15
+#define SYS_write  16
+#define SYS_mknod  17
+#define SYS_unlink 18
+#define SYS_link   19
+#define SYS_mkdir  20
+#define SYS_close  21
diff --git a/xv6-labs-2024/kernel/syscall.o b/xv6-labs-2024/kernel/syscall.o
new file mode 100644
index 0000000..d86bd8d
Binary files /dev/null and b/xv6-labs-2024/kernel/syscall.o differ
diff --git a/xv6-labs-2024/kernel/sysfile.c b/xv6-labs-2024/kernel/sysfile.c
new file mode 100644
index 0000000..16b668c
--- /dev/null
+++ b/xv6-labs-2024/kernel/sysfile.c
@@ -0,0 +1,505 @@
+//
+// File-system system calls.
+// Mostly argument checking, since we don't trust
+// user code, and calls into file.c and fs.c.
+//
+
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "stat.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "fs.h"
+#include "sleeplock.h"
+#include "file.h"
+#include "fcntl.h"
+
+// Fetch the nth word-sized system call argument as a file descriptor
+// and return both the descriptor and the corresponding struct file.
+static int
+argfd(int n, int *pfd, struct file **pf)
+{
+  int fd;
+  struct file *f;
+
+  argint(n, &fd);
+  if(fd < 0 || fd >= NOFILE || (f=myproc()->ofile[fd]) == 0)
+    return -1;
+  if(pfd)
+    *pfd = fd;
+  if(pf)
+    *pf = f;
+  return 0;
+}
+
+// Allocate a file descriptor for the given file.
+// Takes over file reference from caller on success.
+static int
+fdalloc(struct file *f)
+{
+  int fd;
+  struct proc *p = myproc();
+
+  for(fd = 0; fd < NOFILE; fd++){
+    if(p->ofile[fd] == 0){
+      p->ofile[fd] = f;
+      return fd;
+    }
+  }
+  return -1;
+}
+
+uint64
+sys_dup(void)
+{
+  struct file *f;
+  int fd;
+
+  if(argfd(0, 0, &f) < 0)
+    return -1;
+  if((fd=fdalloc(f)) < 0)
+    return -1;
+  filedup(f);
+  return fd;
+}
+
+uint64
+sys_read(void)
+{
+  struct file *f;
+  int n;
+  uint64 p;
+
+  argaddr(1, &p);
+  argint(2, &n);
+  if(argfd(0, 0, &f) < 0)
+    return -1;
+  return fileread(f, p, n);
+}
+
+uint64
+sys_write(void)
+{
+  struct file *f;
+  int n;
+  uint64 p;
+  
+  argaddr(1, &p);
+  argint(2, &n);
+  if(argfd(0, 0, &f) < 0)
+    return -1;
+
+  return filewrite(f, p, n);
+}
+
+uint64
+sys_close(void)
+{
+  int fd;
+  struct file *f;
+
+  if(argfd(0, &fd, &f) < 0)
+    return -1;
+  myproc()->ofile[fd] = 0;
+  fileclose(f);
+  return 0;
+}
+
+uint64
+sys_fstat(void)
+{
+  struct file *f;
+  uint64 st; // user pointer to struct stat
+
+  argaddr(1, &st);
+  if(argfd(0, 0, &f) < 0)
+    return -1;
+  return filestat(f, st);
+}
+
+// Create the path new as a link to the same inode as old.
+uint64
+sys_link(void)
+{
+  char name[DIRSIZ], new[MAXPATH], old[MAXPATH];
+  struct inode *dp, *ip;
+
+  if(argstr(0, old, MAXPATH) < 0 || argstr(1, new, MAXPATH) < 0)
+    return -1;
+
+  begin_op();
+  if((ip = namei(old)) == 0){
+    end_op();
+    return -1;
+  }
+
+  ilock(ip);
+  if(ip->type == T_DIR){
+    iunlockput(ip);
+    end_op();
+    return -1;
+  }
+
+  ip->nlink++;
+  iupdate(ip);
+  iunlock(ip);
+
+  if((dp = nameiparent(new, name)) == 0)
+    goto bad;
+  ilock(dp);
+  if(dp->dev != ip->dev || dirlink(dp, name, ip->inum) < 0){
+    iunlockput(dp);
+    goto bad;
+  }
+  iunlockput(dp);
+  iput(ip);
+
+  end_op();
+
+  return 0;
+
+bad:
+  ilock(ip);
+  ip->nlink--;
+  iupdate(ip);
+  iunlockput(ip);
+  end_op();
+  return -1;
+}
+
+// Is the directory dp empty except for "." and ".." ?
+static int
+isdirempty(struct inode *dp)
+{
+  int off;
+  struct dirent de;
+
+  for(off=2*sizeof(de); off<dp->size; off+=sizeof(de)){
+    if(readi(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+      panic("isdirempty: readi");
+    if(de.inum != 0)
+      return 0;
+  }
+  return 1;
+}
+
+uint64
+sys_unlink(void)
+{
+  struct inode *ip, *dp;
+  struct dirent de;
+  char name[DIRSIZ], path[MAXPATH];
+  uint off;
+
+  if(argstr(0, path, MAXPATH) < 0)
+    return -1;
+
+  begin_op();
+  if((dp = nameiparent(path, name)) == 0){
+    end_op();
+    return -1;
+  }
+
+  ilock(dp);
+
+  // Cannot unlink "." or "..".
+  if(namecmp(name, ".") == 0 || namecmp(name, "..") == 0)
+    goto bad;
+
+  if((ip = dirlookup(dp, name, &off)) == 0)
+    goto bad;
+  ilock(ip);
+
+  if(ip->nlink < 1)
+    panic("unlink: nlink < 1");
+  if(ip->type == T_DIR && !isdirempty(ip)){
+    iunlockput(ip);
+    goto bad;
+  }
+
+  memset(&de, 0, sizeof(de));
+  if(writei(dp, 0, (uint64)&de, off, sizeof(de)) != sizeof(de))
+    panic("unlink: writei");
+  if(ip->type == T_DIR){
+    dp->nlink--;
+    iupdate(dp);
+  }
+  iunlockput(dp);
+
+  ip->nlink--;
+  iupdate(ip);
+  iunlockput(ip);
+
+  end_op();
+
+  return 0;
+
+bad:
+  iunlockput(dp);
+  end_op();
+  return -1;
+}
+
+static struct inode*
+create(char *path, short type, short major, short minor)
+{
+  struct inode *ip, *dp;
+  char name[DIRSIZ];
+
+  if((dp = nameiparent(path, name)) == 0)
+    return 0;
+
+  ilock(dp);
+
+  if((ip = dirlookup(dp, name, 0)) != 0){
+    iunlockput(dp);
+    ilock(ip);
+    if(type == T_FILE && (ip->type == T_FILE || ip->type == T_DEVICE))
+      return ip;
+    iunlockput(ip);
+    return 0;
+  }
+
+  if((ip = ialloc(dp->dev, type)) == 0){
+    iunlockput(dp);
+    return 0;
+  }
+
+  ilock(ip);
+  ip->major = major;
+  ip->minor = minor;
+  ip->nlink = 1;
+  iupdate(ip);
+
+  if(type == T_DIR){  // Create . and .. entries.
+    // No ip->nlink++ for ".": avoid cyclic ref count.
+    if(dirlink(ip, ".", ip->inum) < 0 || dirlink(ip, "..", dp->inum) < 0)
+      goto fail;
+  }
+
+  if(dirlink(dp, name, ip->inum) < 0)
+    goto fail;
+
+  if(type == T_DIR){
+    // now that success is guaranteed:
+    dp->nlink++;  // for ".."
+    iupdate(dp);
+  }
+
+  iunlockput(dp);
+
+  return ip;
+
+ fail:
+  // something went wrong. de-allocate ip.
+  ip->nlink = 0;
+  iupdate(ip);
+  iunlockput(ip);
+  iunlockput(dp);
+  return 0;
+}
+
+uint64
+sys_open(void)
+{
+  char path[MAXPATH];
+  int fd, omode;
+  struct file *f;
+  struct inode *ip;
+  int n;
+
+  argint(1, &omode);
+  if((n = argstr(0, path, MAXPATH)) < 0)
+    return -1;
+
+  begin_op();
+
+  if(omode & O_CREATE){
+    ip = create(path, T_FILE, 0, 0);
+    if(ip == 0){
+      end_op();
+      return -1;
+    }
+  } else {
+    if((ip = namei(path)) == 0){
+      end_op();
+      return -1;
+    }
+    ilock(ip);
+    if(ip->type == T_DIR && omode != O_RDONLY){
+      iunlockput(ip);
+      end_op();
+      return -1;
+    }
+  }
+
+  if(ip->type == T_DEVICE && (ip->major < 0 || ip->major >= NDEV)){
+    iunlockput(ip);
+    end_op();
+    return -1;
+  }
+
+  if((f = filealloc()) == 0 || (fd = fdalloc(f)) < 0){
+    if(f)
+      fileclose(f);
+    iunlockput(ip);
+    end_op();
+    return -1;
+  }
+
+  if(ip->type == T_DEVICE){
+    f->type = FD_DEVICE;
+    f->major = ip->major;
+  } else {
+    f->type = FD_INODE;
+    f->off = 0;
+  }
+  f->ip = ip;
+  f->readable = !(omode & O_WRONLY);
+  f->writable = (omode & O_WRONLY) || (omode & O_RDWR);
+
+  if((omode & O_TRUNC) && ip->type == T_FILE){
+    itrunc(ip);
+  }
+
+  iunlock(ip);
+  end_op();
+
+  return fd;
+}
+
+uint64
+sys_mkdir(void)
+{
+  char path[MAXPATH];
+  struct inode *ip;
+
+  begin_op();
+  if(argstr(0, path, MAXPATH) < 0 || (ip = create(path, T_DIR, 0, 0)) == 0){
+    end_op();
+    return -1;
+  }
+  iunlockput(ip);
+  end_op();
+  return 0;
+}
+
+uint64
+sys_mknod(void)
+{
+  struct inode *ip;
+  char path[MAXPATH];
+  int major, minor;
+
+  begin_op();
+  argint(1, &major);
+  argint(2, &minor);
+  if((argstr(0, path, MAXPATH)) < 0 ||
+     (ip = create(path, T_DEVICE, major, minor)) == 0){
+    end_op();
+    return -1;
+  }
+  iunlockput(ip);
+  end_op();
+  return 0;
+}
+
+uint64
+sys_chdir(void)
+{
+  char path[MAXPATH];
+  struct inode *ip;
+  struct proc *p = myproc();
+  
+  begin_op();
+  if(argstr(0, path, MAXPATH) < 0 || (ip = namei(path)) == 0){
+    end_op();
+    return -1;
+  }
+  ilock(ip);
+  if(ip->type != T_DIR){
+    iunlockput(ip);
+    end_op();
+    return -1;
+  }
+  iunlock(ip);
+  iput(p->cwd);
+  end_op();
+  p->cwd = ip;
+  return 0;
+}
+
+uint64
+sys_exec(void)
+{
+  char path[MAXPATH], *argv[MAXARG];
+  int i;
+  uint64 uargv, uarg;
+
+  argaddr(1, &uargv);
+  if(argstr(0, path, MAXPATH) < 0) {
+    return -1;
+  }
+  memset(argv, 0, sizeof(argv));
+  for(i=0;; i++){
+    if(i >= NELEM(argv)){
+      goto bad;
+    }
+    if(fetchaddr(uargv+sizeof(uint64)*i, (uint64*)&uarg) < 0){
+      goto bad;
+    }
+    if(uarg == 0){
+      argv[i] = 0;
+      break;
+    }
+    argv[i] = kalloc();
+    if(argv[i] == 0)
+      goto bad;
+    if(fetchstr(uarg, argv[i], PGSIZE) < 0)
+      goto bad;
+  }
+
+  int ret = exec(path, argv);
+
+  for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
+    kfree(argv[i]);
+
+  return ret;
+
+ bad:
+  for(i = 0; i < NELEM(argv) && argv[i] != 0; i++)
+    kfree(argv[i]);
+  return -1;
+}
+
+uint64
+sys_pipe(void)
+{
+  uint64 fdarray; // user pointer to array of two integers
+  struct file *rf, *wf;
+  int fd0, fd1;
+  struct proc *p = myproc();
+
+  argaddr(0, &fdarray);
+  if(pipealloc(&rf, &wf) < 0)
+    return -1;
+  fd0 = -1;
+  if((fd0 = fdalloc(rf)) < 0 || (fd1 = fdalloc(wf)) < 0){
+    if(fd0 >= 0)
+      p->ofile[fd0] = 0;
+    fileclose(rf);
+    fileclose(wf);
+    return -1;
+  }
+  if(copyout(p->pagetable, fdarray, (char*)&fd0, sizeof(fd0)) < 0 ||
+     copyout(p->pagetable, fdarray+sizeof(fd0), (char *)&fd1, sizeof(fd1)) < 0){
+    p->ofile[fd0] = 0;
+    p->ofile[fd1] = 0;
+    fileclose(rf);
+    fileclose(wf);
+    return -1;
+  }
+  return 0;
+}
diff --git a/xv6-labs-2024/kernel/sysfile.d b/xv6-labs-2024/kernel/sysfile.d
new file mode 100644
index 0000000..af7971b
--- /dev/null
+++ b/xv6-labs-2024/kernel/sysfile.d
@@ -0,0 +1,5 @@
+kernel/sysfile.o: kernel/sysfile.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/riscv.h kernel/defs.h kernel/param.h kernel/stat.h \
+ kernel/spinlock.h kernel/proc.h kernel/fs.h kernel/sleeplock.h \
+ kernel/file.h kernel/fcntl.h
diff --git a/xv6-labs-2024/kernel/sysfile.o b/xv6-labs-2024/kernel/sysfile.o
new file mode 100644
index 0000000..58f3f46
Binary files /dev/null and b/xv6-labs-2024/kernel/sysfile.o differ
diff --git a/xv6-labs-2024/kernel/sysproc.c b/xv6-labs-2024/kernel/sysproc.c
new file mode 100644
index 0000000..3b4d5bd
--- /dev/null
+++ b/xv6-labs-2024/kernel/sysproc.c
@@ -0,0 +1,93 @@
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "memlayout.h"
+#include "spinlock.h"
+#include "proc.h"
+
+uint64
+sys_exit(void)
+{
+  int n;
+  argint(0, &n);
+  exit(n);
+  return 0;  // not reached
+}
+
+uint64
+sys_getpid(void)
+{
+  return myproc()->pid;
+}
+
+uint64
+sys_fork(void)
+{
+  return fork();
+}
+
+uint64
+sys_wait(void)
+{
+  uint64 p;
+  argaddr(0, &p);
+  return wait(p);
+}
+
+uint64
+sys_sbrk(void)
+{
+  uint64 addr;
+  int n;
+
+  argint(0, &n);
+  addr = myproc()->sz;
+  if(growproc(n) < 0)
+    return -1;
+  return addr;
+}
+
+uint64
+sys_sleep(void)
+{
+  int n;
+  uint ticks0;
+
+  argint(0, &n);
+  if(n < 0)
+    n = 0;
+  acquire(&tickslock);
+  ticks0 = ticks;
+  while(ticks - ticks0 < n){
+    if(killed(myproc())){
+      release(&tickslock);
+      return -1;
+    }
+    sleep(&ticks, &tickslock);
+  }
+  release(&tickslock);
+  return 0;
+}
+
+uint64
+sys_kill(void)
+{
+  int pid;
+
+  argint(0, &pid);
+  return kill(pid);
+}
+
+// return how many clock tick interrupts have occurred
+// since start.
+uint64
+sys_uptime(void)
+{
+  uint xticks;
+
+  acquire(&tickslock);
+  xticks = ticks;
+  release(&tickslock);
+  return xticks;
+}
diff --git a/xv6-labs-2024/kernel/sysproc.d b/xv6-labs-2024/kernel/sysproc.d
new file mode 100644
index 0000000..8b95f87
--- /dev/null
+++ b/xv6-labs-2024/kernel/sysproc.d
@@ -0,0 +1,4 @@
+kernel/sysproc.o: kernel/sysproc.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/riscv.h kernel/defs.h kernel/param.h kernel/memlayout.h \
+ kernel/spinlock.h kernel/proc.h
diff --git a/xv6-labs-2024/kernel/sysproc.o b/xv6-labs-2024/kernel/sysproc.o
new file mode 100644
index 0000000..52e1df7
Binary files /dev/null and b/xv6-labs-2024/kernel/sysproc.o differ
diff --git a/xv6-labs-2024/kernel/trampoline.S b/xv6-labs-2024/kernel/trampoline.S
new file mode 100644
index 0000000..693f8a1
--- /dev/null
+++ b/xv6-labs-2024/kernel/trampoline.S
@@ -0,0 +1,151 @@
+        #
+        # low-level code to handle traps from user space into
+        # the kernel, and returns from kernel to user.
+        #
+        # the kernel maps the page holding this code
+        # at the same virtual address (TRAMPOLINE)
+        # in user and kernel space so that it continues
+        # to work when it switches page tables.
+        # kernel.ld causes this code to start at 
+        # a page boundary.
+        #
+
+#include "riscv.h"
+#include "memlayout.h"
+
+.section trampsec
+.globl trampoline
+.globl usertrap
+trampoline:
+.align 4
+.globl uservec
+uservec:    
+	#
+        # trap.c sets stvec to point here, so
+        # traps from user space start here,
+        # in supervisor mode, but with a
+        # user page table.
+        #
+
+        # save user a0 in sscratch so
+        # a0 can be used to get at TRAPFRAME.
+        csrw sscratch, a0
+
+        # each process has a separate p->trapframe memory area,
+        # but it's mapped to the same virtual address
+        # (TRAPFRAME) in every process's user page table.
+        li a0, TRAPFRAME
+        
+        # save the user registers in TRAPFRAME
+        sd ra, 40(a0)
+        sd sp, 48(a0)
+        sd gp, 56(a0)
+        sd tp, 64(a0)
+        sd t0, 72(a0)
+        sd t1, 80(a0)
+        sd t2, 88(a0)
+        sd s0, 96(a0)
+        sd s1, 104(a0)
+        sd a1, 120(a0)
+        sd a2, 128(a0)
+        sd a3, 136(a0)
+        sd a4, 144(a0)
+        sd a5, 152(a0)
+        sd a6, 160(a0)
+        sd a7, 168(a0)
+        sd s2, 176(a0)
+        sd s3, 184(a0)
+        sd s4, 192(a0)
+        sd s5, 200(a0)
+        sd s6, 208(a0)
+        sd s7, 216(a0)
+        sd s8, 224(a0)
+        sd s9, 232(a0)
+        sd s10, 240(a0)
+        sd s11, 248(a0)
+        sd t3, 256(a0)
+        sd t4, 264(a0)
+        sd t5, 272(a0)
+        sd t6, 280(a0)
+
+	# save the user a0 in p->trapframe->a0
+        csrr t0, sscratch
+        sd t0, 112(a0)
+
+        # initialize kernel stack pointer, from p->trapframe->kernel_sp
+        ld sp, 8(a0)
+
+        # make tp hold the current hartid, from p->trapframe->kernel_hartid
+        ld tp, 32(a0)
+
+        # load the address of usertrap(), from p->trapframe->kernel_trap
+        ld t0, 16(a0)
+
+        # fetch the kernel page table address, from p->trapframe->kernel_satp.
+        ld t1, 0(a0)
+
+        # wait for any previous memory operations to complete, so that
+        # they use the user page table.
+        sfence.vma zero, zero
+
+        # install the kernel page table.
+        csrw satp, t1
+
+        # flush now-stale user entries from the TLB.
+        sfence.vma zero, zero
+
+        # jump to usertrap(), which does not return
+        jr t0
+
+.globl userret
+userret:
+        # userret(pagetable)
+        # called by usertrapret() in trap.c to
+        # switch from kernel to user.
+        # a0: user page table, for satp.
+
+        # switch to the user page table.
+        sfence.vma zero, zero
+        csrw satp, a0
+        sfence.vma zero, zero
+
+        li a0, TRAPFRAME
+
+        # restore all but a0 from TRAPFRAME
+        ld ra, 40(a0)
+        ld sp, 48(a0)
+        ld gp, 56(a0)
+        ld tp, 64(a0)
+        ld t0, 72(a0)
+        ld t1, 80(a0)
+        ld t2, 88(a0)
+        ld s0, 96(a0)
+        ld s1, 104(a0)
+        ld a1, 120(a0)
+        ld a2, 128(a0)
+        ld a3, 136(a0)
+        ld a4, 144(a0)
+        ld a5, 152(a0)
+        ld a6, 160(a0)
+        ld a7, 168(a0)
+        ld s2, 176(a0)
+        ld s3, 184(a0)
+        ld s4, 192(a0)
+        ld s5, 200(a0)
+        ld s6, 208(a0)
+        ld s7, 216(a0)
+        ld s8, 224(a0)
+        ld s9, 232(a0)
+        ld s10, 240(a0)
+        ld s11, 248(a0)
+        ld t3, 256(a0)
+        ld t4, 264(a0)
+        ld t5, 272(a0)
+        ld t6, 280(a0)
+
+	# restore user a0
+        ld a0, 112(a0)
+        
+        # return to user mode and user pc.
+        # usertrapret() set up sstatus and sepc.
+        sret
diff --git a/xv6-labs-2024/kernel/trampoline.o b/xv6-labs-2024/kernel/trampoline.o
new file mode 100644
index 0000000..7d28ea6
Binary files /dev/null and b/xv6-labs-2024/kernel/trampoline.o differ
diff --git a/xv6-labs-2024/kernel/trap.c b/xv6-labs-2024/kernel/trap.c
new file mode 100644
index 0000000..d454a7d
--- /dev/null
+++ b/xv6-labs-2024/kernel/trap.c
@@ -0,0 +1,218 @@
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "defs.h"
+
+struct spinlock tickslock;
+uint ticks;
+
+extern char trampoline[], uservec[], userret[];
+
+// in kernelvec.S, calls kerneltrap().
+void kernelvec();
+
+extern int devintr();
+
+void
+trapinit(void)
+{
+  initlock(&tickslock, "time");
+}
+
+// set up to take exceptions and traps while in the kernel.
+void
+trapinithart(void)
+{
+  w_stvec((uint64)kernelvec);
+}
+
+//
+// handle an interrupt, exception, or system call from user space.
+// called from trampoline.S
+//
+void
+usertrap(void)
+{
+  int which_dev = 0;
+
+  if((r_sstatus() & SSTATUS_SPP) != 0)
+    panic("usertrap: not from user mode");
+
+  // send interrupts and exceptions to kerneltrap(),
+  // since we're now in the kernel.
+  w_stvec((uint64)kernelvec);
+
+  struct proc *p = myproc();
+  
+  // save user program counter.
+  p->trapframe->epc = r_sepc();
+  
+  if(r_scause() == 8){
+    // system call
+
+    if(killed(p))
+      exit(-1);
+
+    // sepc points to the ecall instruction,
+    // but we want to return to the next instruction.
+    p->trapframe->epc += 4;
+
+    // an interrupt will change sepc, scause, and sstatus,
+    // so enable only now that we're done with those registers.
+    intr_on();
+
+    syscall();
+  } else if((which_dev = devintr()) != 0){
+    // ok
+  } else {
+    printf("usertrap(): unexpected scause 0x%lx pid=%d\n", r_scause(), p->pid);
+    printf("            sepc=0x%lx stval=0x%lx\n", r_sepc(), r_stval());
+    setkilled(p);
+  }
+
+  if(killed(p))
+    exit(-1);
+
+  // give up the CPU if this is a timer interrupt.
+  if(which_dev == 2)
+    yield();
+
+  usertrapret();
+}
+
+//
+// return to user space
+//
+void
+usertrapret(void)
+{
+  struct proc *p = myproc();
+
+  // we're about to switch the destination of traps from
+  // kerneltrap() to usertrap(), so turn off interrupts until
+  // we're back in user space, where usertrap() is correct.
+  intr_off();
+
+  // send syscalls, interrupts, and exceptions to uservec in trampoline.S
+  uint64 trampoline_uservec = TRAMPOLINE + (uservec - trampoline);
+  w_stvec(trampoline_uservec);
+
+  // set up trapframe values that uservec will need when
+  // the process next traps into the kernel.
+  p->trapframe->kernel_satp = r_satp();         // kernel page table
+  p->trapframe->kernel_sp = p->kstack + PGSIZE; // process's kernel stack
+  p->trapframe->kernel_trap = (uint64)usertrap;
+  p->trapframe->kernel_hartid = r_tp();         // hartid for cpuid()
+
+  // set up the registers that trampoline.S's sret will use
+  // to get to user space.
+  
+  // set S Previous Privilege mode to User.
+  unsigned long x = r_sstatus();
+  x &= ~SSTATUS_SPP; // clear SPP to 0 for user mode
+  x |= SSTATUS_SPIE; // enable interrupts in user mode
+  w_sstatus(x);
+
+  // set S Exception Program Counter to the saved user pc.
+  w_sepc(p->trapframe->epc);
+
+  // tell trampoline.S the user page table to switch to.
+  uint64 satp = MAKE_SATP(p->pagetable);
+
+  // jump to userret in trampoline.S at the top of memory, which 
+  // switches to the user page table, restores user registers,
+  // and switches to user mode with sret.
+  uint64 trampoline_userret = TRAMPOLINE + (userret - trampoline);
+  ((void (*)(uint64))trampoline_userret)(satp);
+}
+
+// interrupts and exceptions from kernel code go here via kernelvec,
+// on whatever the current kernel stack is.
+void 
+kerneltrap()
+{
+  int which_dev = 0;
+  uint64 sepc = r_sepc();
+  uint64 sstatus = r_sstatus();
+  uint64 scause = r_scause();
+  
+  if((sstatus & SSTATUS_SPP) == 0)
+    panic("kerneltrap: not from supervisor mode");
+  if(intr_get() != 0)
+    panic("kerneltrap: interrupts enabled");
+
+  if((which_dev = devintr()) == 0){
+    // interrupt or trap from an unknown source
+    printf("scause=0x%lx sepc=0x%lx stval=0x%lx\n", scause, r_sepc(), r_stval());
+    panic("kerneltrap");
+  }
+
+  // give up the CPU if this is a timer interrupt.
+  if(which_dev == 2 && myproc() != 0)
+    yield();
+
+  // the yield() may have caused some traps to occur,
+  // so restore trap registers for use by kernelvec.S's sepc instruction.
+  w_sepc(sepc);
+  w_sstatus(sstatus);
+}
+
+void
+clockintr()
+{
+  if(cpuid() == 0){
+    acquire(&tickslock);
+    ticks++;
+    wakeup(&ticks);
+    release(&tickslock);
+  }
+
+  // ask for the next timer interrupt. this also clears
+  // the interrupt request. 1000000 is about a tenth
+  // of a second.
+  w_stimecmp(r_time() + 1000000);
+}
+
+// check if it's an external interrupt or software interrupt,
+// and handle it.
+// returns 2 if timer interrupt,
+// 1 if other device,
+// 0 if not recognized.
+int
+devintr()
+{
+  uint64 scause = r_scause();
+
+  if(scause == 0x8000000000000009L){
+    // this is a supervisor external interrupt, via PLIC.
+
+    // irq indicates which device interrupted.
+    int irq = plic_claim();
+
+    if(irq == UART0_IRQ){
+      uartintr();
+    } else if(irq == VIRTIO0_IRQ){
+      virtio_disk_intr();
+    } else if(irq){
+      printf("unexpected interrupt irq=%d\n", irq);
+    }
+
+    // the PLIC allows each device to raise at most one
+    // interrupt at a time; tell the PLIC the device is
+    // now allowed to interrupt again.
+    if(irq)
+      plic_complete(irq);
+
+    return 1;
+  } else if(scause == 0x8000000000000005L){
+    // timer interrupt.
+    clockintr();
+    return 2;
+  } else {
+    return 0;
+  }
+}
+
diff --git a/xv6-labs-2024/kernel/trap.d b/xv6-labs-2024/kernel/trap.d
new file mode 100644
index 0000000..a256b6d
--- /dev/null
+++ b/xv6-labs-2024/kernel/trap.d
@@ -0,0 +1,3 @@
+kernel/trap.o: kernel/trap.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/spinlock.h kernel/proc.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/trap.o b/xv6-labs-2024/kernel/trap.o
new file mode 100644
index 0000000..2db8e4d
Binary files /dev/null and b/xv6-labs-2024/kernel/trap.o differ
diff --git a/xv6-labs-2024/kernel/types.h b/xv6-labs-2024/kernel/types.h
new file mode 100644
index 0000000..ee73164
--- /dev/null
+++ b/xv6-labs-2024/kernel/types.h
@@ -0,0 +1,10 @@
+typedef unsigned int   uint;
+typedef unsigned short ushort;
+typedef unsigned char  uchar;
+
+typedef unsigned char uint8;
+typedef unsigned short uint16;
+typedef unsigned int  uint32;
+typedef unsigned long uint64;
+
+typedef uint64 pde_t;
diff --git a/xv6-labs-2024/kernel/uart.c b/xv6-labs-2024/kernel/uart.c
new file mode 100644
index 0000000..83846ad
--- /dev/null
+++ b/xv6-labs-2024/kernel/uart.c
@@ -0,0 +1,191 @@
+//
+// low-level driver routines for 16550a UART.
+//
+
+#include "types.h"
+#include "param.h"
+#include "memlayout.h"
+#include "riscv.h"
+#include "spinlock.h"
+#include "proc.h"
+#include "defs.h"
+
+// the UART control registers are memory-mapped
+// at address UART0. this macro returns the
+// address of one of the registers.
+#define Reg(reg) ((volatile unsigned char *)(UART0 + (reg)))
+
+// the UART control registers.
+// some have different meanings for
+// read vs write.
+// see http://byterunner.com/16550.html
+#define RHR 0                 // receive holding register (for input bytes)
+#define THR 0                 // transmit holding register (for output bytes)
+#define IER 1                 // interrupt enable register
+#define IER_RX_ENABLE (1<<0)
+#define IER_TX_ENABLE (1<<1)
+#define FCR 2                 // FIFO control register
+#define FCR_FIFO_ENABLE (1<<0)
+#define FCR_FIFO_CLEAR (3<<1) // clear the content of the two FIFOs
+#define ISR 2                 // interrupt status register
+#define LCR 3                 // line control register
+#define LCR_EIGHT_BITS (3<<0)
+#define LCR_BAUD_LATCH (1<<7) // special mode to set baud rate
+#define LSR 5                 // line status register
+#define LSR_RX_READY (1<<0)   // input is waiting to be read from RHR
+#define LSR_TX_IDLE (1<<5)    // THR can accept another character to send
+
+#define ReadReg(reg) (*(Reg(reg)))
+#define WriteReg(reg, v) (*(Reg(reg)) = (v))
+
+// the transmit output buffer.
+struct spinlock uart_tx_lock;
+#define UART_TX_BUF_SIZE 32
+char uart_tx_buf[UART_TX_BUF_SIZE];
+uint64 uart_tx_w; // write next to uart_tx_buf[uart_tx_w % UART_TX_BUF_SIZE]
+uint64 uart_tx_r; // read next from uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE]
+
+extern volatile int panicked; // from printf.c
+
+void uartstart();
+
+void
+uartinit(void)
+{
+  // disable interrupts.
+  WriteReg(IER, 0x00);
+
+  // special mode to set baud rate.
+  WriteReg(LCR, LCR_BAUD_LATCH);
+
+  // LSB for baud rate of 38.4K.
+  WriteReg(0, 0x03);
+
+  // MSB for baud rate of 38.4K.
+  WriteReg(1, 0x00);
+
+  // leave set-baud mode,
+  // and set word length to 8 bits, no parity.
+  WriteReg(LCR, LCR_EIGHT_BITS);
+
+  // reset and enable FIFOs.
+  WriteReg(FCR, FCR_FIFO_ENABLE | FCR_FIFO_CLEAR);
+
+  // enable transmit and receive interrupts.
+  WriteReg(IER, IER_TX_ENABLE | IER_RX_ENABLE);
+
+  initlock(&uart_tx_lock, "uart");
+}
+
+// add a character to the output buffer and tell the
+// UART to start sending if it isn't already.
+// blocks if the output buffer is full.
+// because it may block, it can't be called
+// from interrupts; it's only suitable for use
+// by write().
+void
+uartputc(int c)
+{
+  acquire(&uart_tx_lock);
+
+  if(panicked){
+    for(;;)
+      ;
+  }
+  while(uart_tx_w == uart_tx_r + UART_TX_BUF_SIZE){
+    // buffer is full.
+    // wait for uartstart() to open up space in the buffer.
+    sleep(&uart_tx_r, &uart_tx_lock);
+  }
+  uart_tx_buf[uart_tx_w % UART_TX_BUF_SIZE] = c;
+  uart_tx_w += 1;
+  uartstart();
+  release(&uart_tx_lock);
+}
+
+
+// alternate version of uartputc() that doesn't 
+// use interrupts, for use by kernel printf() and
+// to echo characters. it spins waiting for the uart's
+// output register to be empty.
+void
+uartputc_sync(int c)
+{
+  push_off();
+
+  if(panicked){
+    for(;;)
+      ;
+  }
+
+  // wait for Transmit Holding Empty to be set in LSR.
+  while((ReadReg(LSR) & LSR_TX_IDLE) == 0)
+    ;
+  WriteReg(THR, c);
+
+  pop_off();
+}
+
+// if the UART is idle, and a character is waiting
+// in the transmit buffer, send it.
+// caller must hold uart_tx_lock.
+// called from both the top- and bottom-half.
+void
+uartstart()
+{
+  while(1){
+    if(uart_tx_w == uart_tx_r){
+      // transmit buffer is empty.
+      ReadReg(ISR);
+      return;
+    }
+    
+    if((ReadReg(LSR) & LSR_TX_IDLE) == 0){
+      // the UART transmit holding register is full,
+      // so we cannot give it another byte.
+      // it will interrupt when it's ready for a new byte.
+      return;
+    }
+    
+    int c = uart_tx_buf[uart_tx_r % UART_TX_BUF_SIZE];
+    uart_tx_r += 1;
+    
+    // maybe uartputc() is waiting for space in the buffer.
+    wakeup(&uart_tx_r);
+    
+    WriteReg(THR, c);
+  }
+}
+
+// read one input character from the UART.
+// return -1 if none is waiting.
+int
+uartgetc(void)
+{
+  if(ReadReg(LSR) & 0x01){
+    // input data is ready.
+    return ReadReg(RHR);
+  } else {
+    return -1;
+  }
+}
+
+// handle a uart interrupt, raised because input has
+// arrived, or the uart is ready for more output, or
+// both. called from devintr().
+void
+uartintr(void)
+{
+  // read and process incoming characters.
+  while(1){
+    int c = uartgetc();
+    if(c == -1)
+      break;
+    consoleintr(c);
+  }
+
+  // send buffered characters.
+  acquire(&uart_tx_lock);
+  uartstart();
+  release(&uart_tx_lock);
+}
diff --git a/xv6-labs-2024/kernel/uart.d b/xv6-labs-2024/kernel/uart.d
new file mode 100644
index 0000000..154ae19
--- /dev/null
+++ b/xv6-labs-2024/kernel/uart.d
@@ -0,0 +1,3 @@
+kernel/uart.o: kernel/uart.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/param.h kernel/memlayout.h kernel/riscv.h \
+ kernel/spinlock.h kernel/proc.h kernel/defs.h
diff --git a/xv6-labs-2024/kernel/uart.o b/xv6-labs-2024/kernel/uart.o
new file mode 100644
index 0000000..121a3a1
Binary files /dev/null and b/xv6-labs-2024/kernel/uart.o differ
diff --git a/xv6-labs-2024/kernel/virtio.h b/xv6-labs-2024/kernel/virtio.h
new file mode 100644
index 0000000..96272b4
--- /dev/null
+++ b/xv6-labs-2024/kernel/virtio.h
@@ -0,0 +1,96 @@
+//
+// virtio device definitions.
+// for both the mmio interface, and virtio descriptors.
+// only tested with qemu.
+//
+// the virtio spec:
+// https://docs.oasis-open.org/virtio/virtio/v1.1/virtio-v1.1.pdf
+//
+
+// virtio mmio control registers, mapped starting at 0x10001000.
+// from qemu virtio_mmio.h
+#define VIRTIO_MMIO_MAGIC_VALUE		0x000 // 0x74726976
+#define VIRTIO_MMIO_VERSION		0x004 // version; should be 2
+#define VIRTIO_MMIO_DEVICE_ID		0x008 // device type; 1 is net, 2 is disk
+#define VIRTIO_MMIO_VENDOR_ID		0x00c // 0x554d4551
+#define VIRTIO_MMIO_DEVICE_FEATURES	0x010
+#define VIRTIO_MMIO_DRIVER_FEATURES	0x020
+#define VIRTIO_MMIO_QUEUE_SEL		0x030 // select queue, write-only
+#define VIRTIO_MMIO_QUEUE_NUM_MAX	0x034 // max size of current queue, read-only
+#define VIRTIO_MMIO_QUEUE_NUM		0x038 // size of current queue, write-only
+#define VIRTIO_MMIO_QUEUE_READY		0x044 // ready bit
+#define VIRTIO_MMIO_QUEUE_NOTIFY	0x050 // write-only
+#define VIRTIO_MMIO_INTERRUPT_STATUS	0x060 // read-only
+#define VIRTIO_MMIO_INTERRUPT_ACK	0x064 // write-only
+#define VIRTIO_MMIO_STATUS		0x070 // read/write
+#define VIRTIO_MMIO_QUEUE_DESC_LOW	0x080 // physical address for descriptor table, write-only
+#define VIRTIO_MMIO_QUEUE_DESC_HIGH	0x084
+#define VIRTIO_MMIO_DRIVER_DESC_LOW	0x090 // physical address for available ring, write-only
+#define VIRTIO_MMIO_DRIVER_DESC_HIGH	0x094
+#define VIRTIO_MMIO_DEVICE_DESC_LOW	0x0a0 // physical address for used ring, write-only
+#define VIRTIO_MMIO_DEVICE_DESC_HIGH	0x0a4
+
+// status register bits, from qemu virtio_config.h
+#define VIRTIO_CONFIG_S_ACKNOWLEDGE	1
+#define VIRTIO_CONFIG_S_DRIVER		2
+#define VIRTIO_CONFIG_S_DRIVER_OK	4
+#define VIRTIO_CONFIG_S_FEATURES_OK	8
+
+// device feature bits
+#define VIRTIO_BLK_F_RO              5	/* Disk is read-only */
+#define VIRTIO_BLK_F_SCSI            7	/* Supports scsi command passthru */
+#define VIRTIO_BLK_F_CONFIG_WCE     11	/* Writeback mode available in config */
+#define VIRTIO_BLK_F_MQ             12	/* support more than one vq */
+#define VIRTIO_F_ANY_LAYOUT         27
+#define VIRTIO_RING_F_INDIRECT_DESC 28
+#define VIRTIO_RING_F_EVENT_IDX     29
+
+// this many virtio descriptors.
+// must be a power of two.
+#define NUM 8
+
+// a single descriptor, from the spec.
+struct virtq_desc {
+  uint64 addr;
+  uint32 len;
+  uint16 flags;
+  uint16 next;
+};
+#define VRING_DESC_F_NEXT  1 // chained with another descriptor
+#define VRING_DESC_F_WRITE 2 // device writes (vs read)
+
+// the (entire) avail ring, from the spec.
+struct virtq_avail {
+  uint16 flags; // always zero
+  uint16 idx;   // driver will write ring[idx] next
+  uint16 ring[NUM]; // descriptor numbers of chain heads
+  uint16 unused;
+};
+
+// one entry in the "used" ring, with which the
+// device tells the driver about completed requests.
+struct virtq_used_elem {
+  uint32 id;   // index of start of completed descriptor chain
+  uint32 len;
+};
+
+struct virtq_used {
+  uint16 flags; // always zero
+  uint16 idx;   // device increments when it adds a ring[] entry
+  struct virtq_used_elem ring[NUM];
+};
+
+// these are specific to virtio block devices, e.g. disks,
+// described in Section 5.2 of the spec.
+
+#define VIRTIO_BLK_T_IN  0 // read the disk
+#define VIRTIO_BLK_T_OUT 1 // write the disk
+
+// the format of the first descriptor in a disk request.
+// to be followed by two more descriptors containing
+// the block, and a one-byte status.
+struct virtio_blk_req {
+  uint32 type; // VIRTIO_BLK_T_IN or ..._OUT
+  uint32 reserved;
+  uint64 sector;
+};
diff --git a/xv6-labs-2024/kernel/virtio_disk.c b/xv6-labs-2024/kernel/virtio_disk.c
new file mode 100644
index 0000000..ae6c164
--- /dev/null
+++ b/xv6-labs-2024/kernel/virtio_disk.c
@@ -0,0 +1,327 @@
+//
+// driver for qemu's virtio disk device.
+// uses qemu's mmio interface to virtio.
+//
+// qemu ... -drive file=fs.img,if=none,format=raw,id=x0 -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0
+//
+
+#include "types.h"
+#include "riscv.h"
+#include "defs.h"
+#include "param.h"
+#include "memlayout.h"
+#include "spinlock.h"
+#include "sleeplock.h"
+#include "fs.h"
+#include "buf.h"
+#include "virtio.h"
+
+// the address of virtio mmio register r.
+#define R(r) ((volatile uint32 *)(VIRTIO0 + (r)))
+
+static struct disk {
+  // a set (not a ring) of DMA descriptors, with which the
+  // driver tells the device where to read and write individual
+  // disk operations. there are NUM descriptors.
+  // most commands consist of a "chain" (a linked list) of a couple of
+  // these descriptors.
+  struct virtq_desc *desc;
+
+  // a ring in which the driver writes descriptor numbers
+  // that the driver would like the device to process.  it only
+  // includes the head descriptor of each chain. the ring has
+  // NUM elements.
+  struct virtq_avail *avail;
+
+  // a ring in which the device writes descriptor numbers that
+  // the device has finished processing (just the head of each chain).
+  // there are NUM used ring entries.
+  struct virtq_used *used;
+
+  // our own book-keeping.
+  char free[NUM];  // is a descriptor free?
+  uint16 used_idx; // we've looked this far in used[2..NUM].
+
+  // track info about in-flight operations,
+  // for use when completion interrupt arrives.
+  // indexed by first descriptor index of chain.
+  struct {
+    struct buf *b;
+    char status;
+  } info[NUM];
+
+  // disk command headers.
+  // one-for-one with descriptors, for convenience.
+  struct virtio_blk_req ops[NUM];
+  
+  struct spinlock vdisk_lock;
+  
+} disk;
+
+void
+virtio_disk_init(void)
+{
+  uint32 status = 0;
+
+  initlock(&disk.vdisk_lock, "virtio_disk");
+
+  if(*R(VIRTIO_MMIO_MAGIC_VALUE) != 0x74726976 ||
+     *R(VIRTIO_MMIO_VERSION) != 2 ||
+     *R(VIRTIO_MMIO_DEVICE_ID) != 2 ||
+     *R(VIRTIO_MMIO_VENDOR_ID) != 0x554d4551){
+    panic("could not find virtio disk");
+  }
+  
+  // reset device
+  *R(VIRTIO_MMIO_STATUS) = status;
+
+  // set ACKNOWLEDGE status bit
+  status |= VIRTIO_CONFIG_S_ACKNOWLEDGE;
+  *R(VIRTIO_MMIO_STATUS) = status;
+
+  // set DRIVER status bit
+  status |= VIRTIO_CONFIG_S_DRIVER;
+  *R(VIRTIO_MMIO_STATUS) = status;
+
+  // negotiate features
+  uint64 features = *R(VIRTIO_MMIO_DEVICE_FEATURES);
+  features &= ~(1 << VIRTIO_BLK_F_RO);
+  features &= ~(1 << VIRTIO_BLK_F_SCSI);
+  features &= ~(1 << VIRTIO_BLK_F_CONFIG_WCE);
+  features &= ~(1 << VIRTIO_BLK_F_MQ);
+  features &= ~(1 << VIRTIO_F_ANY_LAYOUT);
+  features &= ~(1 << VIRTIO_RING_F_EVENT_IDX);
+  features &= ~(1 << VIRTIO_RING_F_INDIRECT_DESC);
+  *R(VIRTIO_MMIO_DRIVER_FEATURES) = features;
+
+  // tell device that feature negotiation is complete.
+  status |= VIRTIO_CONFIG_S_FEATURES_OK;
+  *R(VIRTIO_MMIO_STATUS) = status;
+
+  // re-read status to ensure FEATURES_OK is set.
+  status = *R(VIRTIO_MMIO_STATUS);
+  if(!(status & VIRTIO_CONFIG_S_FEATURES_OK))
+    panic("virtio disk FEATURES_OK unset");
+
+  // initialize queue 0.
+  *R(VIRTIO_MMIO_QUEUE_SEL) = 0;
+
+  // ensure queue 0 is not in use.
+  if(*R(VIRTIO_MMIO_QUEUE_READY))
+    panic("virtio disk should not be ready");
+
+  // check maximum queue size.
+  uint32 max = *R(VIRTIO_MMIO_QUEUE_NUM_MAX);
+  if(max == 0)
+    panic("virtio disk has no queue 0");
+  if(max < NUM)
+    panic("virtio disk max queue too short");
+
+  // allocate and zero queue memory.
+  disk.desc = kalloc();
+  disk.avail = kalloc();
+  disk.used = kalloc();
+  if(!disk.desc || !disk.avail || !disk.used)
+    panic("virtio disk kalloc");
+  memset(disk.desc, 0, PGSIZE);
+  memset(disk.avail, 0, PGSIZE);
+  memset(disk.used, 0, PGSIZE);
+
+  // set queue size.
+  *R(VIRTIO_MMIO_QUEUE_NUM) = NUM;
+
+  // write physical addresses.
+  *R(VIRTIO_MMIO_QUEUE_DESC_LOW) = (uint64)disk.desc;
+  *R(VIRTIO_MMIO_QUEUE_DESC_HIGH) = (uint64)disk.desc >> 32;
+  *R(VIRTIO_MMIO_DRIVER_DESC_LOW) = (uint64)disk.avail;
+  *R(VIRTIO_MMIO_DRIVER_DESC_HIGH) = (uint64)disk.avail >> 32;
+  *R(VIRTIO_MMIO_DEVICE_DESC_LOW) = (uint64)disk.used;
+  *R(VIRTIO_MMIO_DEVICE_DESC_HIGH) = (uint64)disk.used >> 32;
+
+  // queue is ready.
+  *R(VIRTIO_MMIO_QUEUE_READY) = 0x1;
+
+  // all NUM descriptors start out unused.
+  for(int i = 0; i < NUM; i++)
+    disk.free[i] = 1;
+
+  // tell device we're completely ready.
+  status |= VIRTIO_CONFIG_S_DRIVER_OK;
+  *R(VIRTIO_MMIO_STATUS) = status;
+
+  // plic.c and trap.c arrange for interrupts from VIRTIO0_IRQ.
+}
+
+// find a free descriptor, mark it non-free, return its index.
+static int
+alloc_desc()
+{
+  for(int i = 0; i < NUM; i++){
+    if(disk.free[i]){
+      disk.free[i] = 0;
+      return i;
+    }
+  }
+  return -1;
+}
+
+// mark a descriptor as free.
+static void
+free_desc(int i)
+{
+  if(i >= NUM)
+    panic("free_desc 1");
+  if(disk.free[i])
+    panic("free_desc 2");
+  disk.desc[i].addr = 0;
+  disk.desc[i].len = 0;
+  disk.desc[i].flags = 0;
+  disk.desc[i].next = 0;
+  disk.free[i] = 1;
+  wakeup(&disk.free[0]);
+}
+
+// free a chain of descriptors.
+static void
+free_chain(int i)
+{
+  while(1){
+    int flag = disk.desc[i].flags;
+    int nxt = disk.desc[i].next;
+    free_desc(i);
+    if(flag & VRING_DESC_F_NEXT)
+      i = nxt;
+    else
+      break;
+  }
+}
+
+// allocate three descriptors (they need not be contiguous).
+// disk transfers always use three descriptors.
+static int
+alloc3_desc(int *idx)
+{
+  for(int i = 0; i < 3; i++){
+    idx[i] = alloc_desc();
+    if(idx[i] < 0){
+      for(int j = 0; j < i; j++)
+        free_desc(idx[j]);
+      return -1;
+    }
+  }
+  return 0;
+}
+
+void
+virtio_disk_rw(struct buf *b, int write)
+{
+  uint64 sector = b->blockno * (BSIZE / 512);
+
+  acquire(&disk.vdisk_lock);
+
+  // the spec's Section 5.2 says that legacy block operations use
+  // three descriptors: one for type/reserved/sector, one for the
+  // data, one for a 1-byte status result.
+
+  // allocate the three descriptors.
+  int idx[3];
+  while(1){
+    if(alloc3_desc(idx) == 0) {
+      break;
+    }
+    sleep(&disk.free[0], &disk.vdisk_lock);
+  }
+
+  // format the three descriptors.
+  // qemu's virtio-blk.c reads them.
+
+  struct virtio_blk_req *buf0 = &disk.ops[idx[0]];
+
+  if(write)
+    buf0->type = VIRTIO_BLK_T_OUT; // write the disk
+  else
+    buf0->type = VIRTIO_BLK_T_IN; // read the disk
+  buf0->reserved = 0;
+  buf0->sector = sector;
+
+  disk.desc[idx[0]].addr = (uint64) buf0;
+  disk.desc[idx[0]].len = sizeof(struct virtio_blk_req);
+  disk.desc[idx[0]].flags = VRING_DESC_F_NEXT;
+  disk.desc[idx[0]].next = idx[1];
+
+  disk.desc[idx[1]].addr = (uint64) b->data;
+  disk.desc[idx[1]].len = BSIZE;
+  if(write)
+    disk.desc[idx[1]].flags = 0; // device reads b->data
+  else
+    disk.desc[idx[1]].flags = VRING_DESC_F_WRITE; // device writes b->data
+  disk.desc[idx[1]].flags |= VRING_DESC_F_NEXT;
+  disk.desc[idx[1]].next = idx[2];
+
+  disk.info[idx[0]].status = 0xff; // device writes 0 on success
+  disk.desc[idx[2]].addr = (uint64) &disk.info[idx[0]].status;
+  disk.desc[idx[2]].len = 1;
+  disk.desc[idx[2]].flags = VRING_DESC_F_WRITE; // device writes the status
+  disk.desc[idx[2]].next = 0;
+
+  // record struct buf for virtio_disk_intr().
+  b->disk = 1;
+  disk.info[idx[0]].b = b;
+
+  // tell the device the first index in our chain of descriptors.
+  disk.avail->ring[disk.avail->idx % NUM] = idx[0];
+
+  __sync_synchronize();
+
+  // tell the device another avail ring entry is available.
+  disk.avail->idx += 1; // not % NUM ...
+
+  __sync_synchronize();
+
+  *R(VIRTIO_MMIO_QUEUE_NOTIFY) = 0; // value is queue number
+
+  // Wait for virtio_disk_intr() to say request has finished.
+  while(b->disk == 1) {
+    sleep(b, &disk.vdisk_lock);
+  }
+
+  disk.info[idx[0]].b = 0;
+  free_chain(idx[0]);
+
+  release(&disk.vdisk_lock);
+}
+
+void
+virtio_disk_intr()
+{
+  acquire(&disk.vdisk_lock);
+
+  // the device won't raise another interrupt until we tell it
+  // we've seen this interrupt, which the following line does.
+  // this may race with the device writing new entries to
+  // the "used" ring, in which case we may process the new
+  // completion entries in this interrupt, and have nothing to do
+  // in the next interrupt, which is harmless.
+  *R(VIRTIO_MMIO_INTERRUPT_ACK) = *R(VIRTIO_MMIO_INTERRUPT_STATUS) & 0x3;
+
+  __sync_synchronize();
+
+  // the device increments disk.used->idx when it
+  // adds an entry to the used ring.
+
+  while(disk.used_idx != disk.used->idx){
+    __sync_synchronize();
+    int id = disk.used->ring[disk.used_idx % NUM].id;
+
+    if(disk.info[id].status != 0)
+      panic("virtio_disk_intr status");
+
+    struct buf *b = disk.info[id].b;
+    b->disk = 0;   // disk is done with buf
+    wakeup(b);
+
+    disk.used_idx += 1;
+  }
+
+  release(&disk.vdisk_lock);
+}
diff --git a/xv6-labs-2024/kernel/virtio_disk.d b/xv6-labs-2024/kernel/virtio_disk.d
new file mode 100644
index 0000000..29e5c17
--- /dev/null
+++ b/xv6-labs-2024/kernel/virtio_disk.d
@@ -0,0 +1,5 @@
+kernel/virtio_disk.o: kernel/virtio_disk.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/riscv.h kernel/defs.h kernel/param.h kernel/memlayout.h \
+ kernel/spinlock.h kernel/sleeplock.h kernel/fs.h kernel/buf.h \
+ kernel/virtio.h
diff --git a/xv6-labs-2024/kernel/virtio_disk.o b/xv6-labs-2024/kernel/virtio_disk.o
new file mode 100644
index 0000000..f3b19a6
Binary files /dev/null and b/xv6-labs-2024/kernel/virtio_disk.o differ
diff --git a/xv6-labs-2024/kernel/vm.c b/xv6-labs-2024/kernel/vm.c
new file mode 100644
index 0000000..62421a2
--- /dev/null
+++ b/xv6-labs-2024/kernel/vm.c
@@ -0,0 +1,451 @@
+#include "param.h"
+#include "types.h"
+#include "memlayout.h"
+#include "elf.h"
+#include "riscv.h"
+#include "defs.h"
+#include "fs.h"
+
+/*
+ * the kernel's page table.
+ */
+pagetable_t kernel_pagetable;
+
+extern char etext[];  // kernel.ld sets this to end of kernel code.
+
+extern char trampoline[]; // trampoline.S
+
+// Make a direct-map page table for the kernel.
+pagetable_t
+kvmmake(void)
+{
+  pagetable_t kpgtbl;
+
+  kpgtbl = (pagetable_t) kalloc();
+  memset(kpgtbl, 0, PGSIZE);
+
+  // uart registers
+  kvmmap(kpgtbl, UART0, UART0, PGSIZE, PTE_R | PTE_W);
+
+  // virtio mmio disk interface
+  kvmmap(kpgtbl, VIRTIO0, VIRTIO0, PGSIZE, PTE_R | PTE_W);
+
+  // PLIC
+  kvmmap(kpgtbl, PLIC, PLIC, 0x4000000, PTE_R | PTE_W);
+
+  // map kernel text executable and read-only.
+  kvmmap(kpgtbl, KERNBASE, KERNBASE, (uint64)etext-KERNBASE, PTE_R | PTE_X);
+
+  // map kernel data and the physical RAM we'll make use of.
+  kvmmap(kpgtbl, (uint64)etext, (uint64)etext, PHYSTOP-(uint64)etext, PTE_R | PTE_W);
+
+  // map the trampoline for trap entry/exit to
+  // the highest virtual address in the kernel.
+  kvmmap(kpgtbl, TRAMPOLINE, (uint64)trampoline, PGSIZE, PTE_R | PTE_X);
+
+  // allocate and map a kernel stack for each process.
+  proc_mapstacks(kpgtbl);
+  
+  return kpgtbl;
+}
+
+// Initialize the one kernel_pagetable
+void
+kvminit(void)
+{
+  kernel_pagetable = kvmmake();
+}
+
+// Switch h/w page table register to the kernel's page table,
+// and enable paging.
+void
+kvminithart()
+{
+  // wait for any previous writes to the page table memory to finish.
+  sfence_vma();
+
+  w_satp(MAKE_SATP(kernel_pagetable));
+
+  // flush stale entries from the TLB.
+  sfence_vma();
+}
+
+// Return the address of the PTE in page table pagetable
+// that corresponds to virtual address va.  If alloc!=0,
+// create any required page-table pages.
+//
+// The risc-v Sv39 scheme has three levels of page-table
+// pages. A page-table page contains 512 64-bit PTEs.
+// A 64-bit virtual address is split into five fields:
+//   39..63 -- must be zero.
+//   30..38 -- 9 bits of level-2 index.
+//   21..29 -- 9 bits of level-1 index.
+//   12..20 -- 9 bits of level-0 index.
+//    0..11 -- 12 bits of byte offset within the page.
+pte_t *
+walk(pagetable_t pagetable, uint64 va, int alloc)
+{
+  if(va >= MAXVA)
+    panic("walk");
+
+  for(int level = 2; level > 0; level--) {
+    pte_t *pte = &pagetable[PX(level, va)];
+    if(*pte & PTE_V) {
+      pagetable = (pagetable_t)PTE2PA(*pte);
+    } else {
+      if(!alloc || (pagetable = (pde_t*)kalloc()) == 0)
+        return 0;
+      memset(pagetable, 0, PGSIZE);
+      *pte = PA2PTE(pagetable) | PTE_V;
+    }
+  }
+  return &pagetable[PX(0, va)];
+}
+
+// Look up a virtual address, return the physical address,
+// or 0 if not mapped.
+// Can only be used to look up user pages.
+uint64
+walkaddr(pagetable_t pagetable, uint64 va)
+{
+  pte_t *pte;
+  uint64 pa;
+
+  if(va >= MAXVA)
+    return 0;
+
+  pte = walk(pagetable, va, 0);
+  if(pte == 0)
+    return 0;
+  if((*pte & PTE_V) == 0)
+    return 0;
+  if((*pte & PTE_U) == 0)
+    return 0;
+  pa = PTE2PA(*pte);
+  return pa;
+}
+
+// add a mapping to the kernel page table.
+// only used when booting.
+// does not flush TLB or enable paging.
+void
+kvmmap(pagetable_t kpgtbl, uint64 va, uint64 pa, uint64 sz, int perm)
+{
+  if(mappages(kpgtbl, va, sz, pa, perm) != 0)
+    panic("kvmmap");
+}
+
+// Create PTEs for virtual addresses starting at va that refer to
+// physical addresses starting at pa.
+// va and size MUST be page-aligned.
+// Returns 0 on success, -1 if walk() couldn't
+// allocate a needed page-table page.
+int
+mappages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm)
+{
+  uint64 a, last;
+  pte_t *pte;
+
+  if((va % PGSIZE) != 0)
+    panic("mappages: va not aligned");
+
+  if((size % PGSIZE) != 0)
+    panic("mappages: size not aligned");
+
+  if(size == 0)
+    panic("mappages: size");
+  
+  a = va;
+  last = va + size - PGSIZE;
+  for(;;){
+    if((pte = walk(pagetable, a, 1)) == 0)
+      return -1;
+    if(*pte & PTE_V)
+      panic("mappages: remap");
+    *pte = PA2PTE(pa) | perm | PTE_V;
+    if(a == last)
+      break;
+    a += PGSIZE;
+    pa += PGSIZE;
+  }
+  return 0;
+}
+
+// Remove npages of mappings starting from va. va must be
+// page-aligned. The mappings must exist.
+// Optionally free the physical memory.
+void
+uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free)
+{
+  uint64 a;
+  pte_t *pte;
+
+  if((va % PGSIZE) != 0)
+    panic("uvmunmap: not aligned");
+
+  for(a = va; a < va + npages*PGSIZE; a += PGSIZE){
+    if((pte = walk(pagetable, a, 0)) == 0)
+      panic("uvmunmap: walk");
+    if((*pte & PTE_V) == 0)
+      panic("uvmunmap: not mapped");
+    if(PTE_FLAGS(*pte) == PTE_V)
+      panic("uvmunmap: not a leaf");
+    if(do_free){
+      uint64 pa = PTE2PA(*pte);
+      kfree((void*)pa);
+    }
+    *pte = 0;
+  }
+}
+
+// create an empty user page table.
+// returns 0 if out of memory.
+pagetable_t
+uvmcreate()
+{
+  pagetable_t pagetable;
+  pagetable = (pagetable_t) kalloc();
+  if(pagetable == 0)
+    return 0;
+  memset(pagetable, 0, PGSIZE);
+  return pagetable;
+}
+
+// Load the user initcode into address 0 of pagetable,
+// for the very first process.
+// sz must be less than a page.
+void
+uvmfirst(pagetable_t pagetable, uchar *src, uint sz)
+{
+  char *mem;
+
+  if(sz >= PGSIZE)
+    panic("uvmfirst: more than a page");
+  mem = kalloc();
+  memset(mem, 0, PGSIZE);
+  mappages(pagetable, 0, PGSIZE, (uint64)mem, PTE_W|PTE_R|PTE_X|PTE_U);
+  memmove(mem, src, sz);
+}
+
+// Allocate PTEs and physical memory to grow process from oldsz to
+// newsz, which need not be page aligned.  Returns new size or 0 on error.
+uint64
+uvmalloc(pagetable_t pagetable, uint64 oldsz, uint64 newsz, int xperm)
+{
+  char *mem;
+  uint64 a;
+
+  if(newsz < oldsz)
+    return oldsz;
+
+  oldsz = PGROUNDUP(oldsz);
+  for(a = oldsz; a < newsz; a += PGSIZE){
+    mem = kalloc();
+    if(mem == 0){
+      uvmdealloc(pagetable, a, oldsz);
+      return 0;
+    }
+    memset(mem, 0, PGSIZE);
+    if(mappages(pagetable, a, PGSIZE, (uint64)mem, PTE_R|PTE_U|xperm) != 0){
+      kfree(mem);
+      uvmdealloc(pagetable, a, oldsz);
+      return 0;
+    }
+  }
+  return newsz;
+}
+
+// Deallocate user pages to bring the process size from oldsz to
+// newsz.  oldsz and newsz need not be page-aligned, nor does newsz
+// need to be less than oldsz.  oldsz can be larger than the actual
+// process size.  Returns the new process size.
+uint64
+uvmdealloc(pagetable_t pagetable, uint64 oldsz, uint64 newsz)
+{
+  if(newsz >= oldsz)
+    return oldsz;
+
+  if(PGROUNDUP(newsz) < PGROUNDUP(oldsz)){
+    int npages = (PGROUNDUP(oldsz) - PGROUNDUP(newsz)) / PGSIZE;
+    uvmunmap(pagetable, PGROUNDUP(newsz), npages, 1);
+  }
+
+  return newsz;
+}
+
+// Recursively free page-table pages.
+// All leaf mappings must already have been removed.
+void
+freewalk(pagetable_t pagetable)
+{
+  // there are 2^9 = 512 PTEs in a page table.
+  for(int i = 0; i < 512; i++){
+    pte_t pte = pagetable[i];
+    if((pte & PTE_V) && (pte & (PTE_R|PTE_W|PTE_X)) == 0){
+      // this PTE points to a lower-level page table.
+      uint64 child = PTE2PA(pte);
+      freewalk((pagetable_t)child);
+      pagetable[i] = 0;
+    } else if(pte & PTE_V){
+      panic("freewalk: leaf");
+    }
+  }
+  kfree((void*)pagetable);
+}
+
+// Free user memory pages,
+// then free page-table pages.
+void
+uvmfree(pagetable_t pagetable, uint64 sz)
+{
+  if(sz > 0)
+    uvmunmap(pagetable, 0, PGROUNDUP(sz)/PGSIZE, 1);
+  freewalk(pagetable);
+}
+
+// Given a parent process's page table, copy
+// its memory into a child's page table.
+// Copies both the page table and the
+// physical memory.
+// returns 0 on success, -1 on failure.
+// frees any allocated pages on failure.
+int
+uvmcopy(pagetable_t old, pagetable_t new, uint64 sz)
+{
+  pte_t *pte;
+  uint64 pa, i;
+  uint flags;
+  char *mem;
+
+  for(i = 0; i < sz; i += PGSIZE){
+    if((pte = walk(old, i, 0)) == 0)
+      panic("uvmcopy: pte should exist");
+    if((*pte & PTE_V) == 0)
+      panic("uvmcopy: page not present");
+    pa = PTE2PA(*pte);
+    flags = PTE_FLAGS(*pte);
+    if((mem = kalloc()) == 0)
+      goto err;
+    memmove(mem, (char*)pa, PGSIZE);
+    if(mappages(new, i, PGSIZE, (uint64)mem, flags) != 0){
+      kfree(mem);
+      goto err;
+    }
+  }
+  return 0;
+
+ err:
+  uvmunmap(new, 0, i / PGSIZE, 1);
+  return -1;
+}
+
+// mark a PTE invalid for user access.
+// used by exec for the user stack guard page.
+void
+uvmclear(pagetable_t pagetable, uint64 va)
+{
+  pte_t *pte;
+  
+  pte = walk(pagetable, va, 0);
+  if(pte == 0)
+    panic("uvmclear");
+  *pte &= ~PTE_U;
+}
+
+// Copy from kernel to user.
+// Copy len bytes from src to virtual address dstva in a given page table.
+// Return 0 on success, -1 on error.
+int
+copyout(pagetable_t pagetable, uint64 dstva, char *src, uint64 len)
+{
+  uint64 n, va0, pa0;
+  pte_t *pte;
+
+  while(len > 0){
+    va0 = PGROUNDDOWN(dstva);
+    if(va0 >= MAXVA)
+      return -1;
+    pte = walk(pagetable, va0, 0);
+    if(pte == 0 || (*pte & PTE_V) == 0 || (*pte & PTE_U) == 0 ||
+       (*pte & PTE_W) == 0)
+      return -1;
+    pa0 = PTE2PA(*pte);
+    n = PGSIZE - (dstva - va0);
+    if(n > len)
+      n = len;
+    memmove((void *)(pa0 + (dstva - va0)), src, n);
+
+    len -= n;
+    src += n;
+    dstva = va0 + PGSIZE;
+  }
+  return 0;
+}
+
+// Copy from user to kernel.
+// Copy len bytes to dst from virtual address srcva in a given page table.
+// Return 0 on success, -1 on error.
+int
+copyin(pagetable_t pagetable, char *dst, uint64 srcva, uint64 len)
+{
+  uint64 n, va0, pa0;
+
+  while(len > 0){
+    va0 = PGROUNDDOWN(srcva);
+    pa0 = walkaddr(pagetable, va0);
+    if(pa0 == 0)
+      return -1;
+    n = PGSIZE - (srcva - va0);
+    if(n > len)
+      n = len;
+    memmove(dst, (void *)(pa0 + (srcva - va0)), n);
+
+    len -= n;
+    dst += n;
+    srcva = va0 + PGSIZE;
+  }
+  return 0;
+}
+
+// Copy a null-terminated string from user to kernel.
+// Copy bytes to dst from virtual address srcva in a given page table,
+// until a '\0', or max.
+// Return 0 on success, -1 on error.
+int
+copyinstr(pagetable_t pagetable, char *dst, uint64 srcva, uint64 max)
+{
+  uint64 n, va0, pa0;
+  int got_null = 0;
+
+  while(got_null == 0 && max > 0){
+    va0 = PGROUNDDOWN(srcva);
+    pa0 = walkaddr(pagetable, va0);
+    if(pa0 == 0)
+      return -1;
+    n = PGSIZE - (srcva - va0);
+    if(n > max)
+      n = max;
+
+    char *p = (char *) (pa0 + (srcva - va0));
+    while(n > 0){
+      if(*p == '\0'){
+        *dst = '\0';
+        got_null = 1;
+        break;
+      } else {
+        *dst = *p;
+      }
+      --n;
+      --max;
+      p++;
+      dst++;
+    }
+
+    srcva = va0 + PGSIZE;
+  }
+  if(got_null){
+    return 0;
+  } else {
+    return -1;
+  }
+}
diff --git a/xv6-labs-2024/kernel/vm.d b/xv6-labs-2024/kernel/vm.d
new file mode 100644
index 0000000..55d102f
--- /dev/null
+++ b/xv6-labs-2024/kernel/vm.d
@@ -0,0 +1,3 @@
+kernel/vm.o: kernel/vm.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/param.h kernel/types.h kernel/memlayout.h kernel/elf.h \
+ kernel/riscv.h kernel/defs.h kernel/fs.h
diff --git a/xv6-labs-2024/kernel/vm.o b/xv6-labs-2024/kernel/vm.o
new file mode 100644
index 0000000..12730fa
Binary files /dev/null and b/xv6-labs-2024/kernel/vm.o differ
diff --git a/xv6-labs-2024/mkfs/mkfs b/xv6-labs-2024/mkfs/mkfs
new file mode 100755
index 0000000..9404401
Binary files /dev/null and b/xv6-labs-2024/mkfs/mkfs differ
diff --git a/xv6-labs-2024/mkfs/mkfs.c b/xv6-labs-2024/mkfs/mkfs.c
new file mode 100644
index 0000000..f39983d
--- /dev/null
+++ b/xv6-labs-2024/mkfs/mkfs.c
@@ -0,0 +1,303 @@
+#include <stdio.h>
+#include <unistd.h>
+#include <stdlib.h>
+#include <string.h>
+#include <fcntl.h>
+#include <assert.h>
+
+#define stat xv6_stat  // avoid clash with host struct stat
+#include "kernel/types.h"
+#include "kernel/fs.h"
+#include "kernel/stat.h"
+#include "kernel/param.h"
+
+#ifndef static_assert
+#define static_assert(a, b) do { switch (0) case 0: case (a): ; } while (0)
+#endif
+
+#define NINODES 200
+
+// Disk layout:
+// [ boot block | sb block | log | inode blocks | free bit map | data blocks ]
+
+int nbitmap = FSSIZE/BPB + 1;
+int ninodeblocks = NINODES / IPB + 1;
+int nlog = LOGSIZE;
+int nmeta;    // Number of meta blocks (boot, sb, nlog, inode, bitmap)
+int nblocks;  // Number of data blocks
+
+int fsfd;
+struct superblock sb;
+char zeroes[BSIZE];
+uint freeinode = 1;
+uint freeblock;
+
+
+void balloc(int);
+void wsect(uint, void*);
+void winode(uint, struct dinode*);
+void rinode(uint inum, struct dinode *ip);
+void rsect(uint sec, void *buf);
+uint ialloc(ushort type);
+void iappend(uint inum, void *p, int n);
+void die(const char *);
+
+// convert to riscv byte order
+ushort
+xshort(ushort x)
+{
+  ushort y;
+  uchar *a = (uchar*)&y;
+  a[0] = x;
+  a[1] = x >> 8;
+  return y;
+}
+
+uint
+xint(uint x)
+{
+  uint y;
+  uchar *a = (uchar*)&y;
+  a[0] = x;
+  a[1] = x >> 8;
+  a[2] = x >> 16;
+  a[3] = x >> 24;
+  return y;
+}
+
+int
+main(int argc, char *argv[])
+{
+  int i, cc, fd;
+  uint rootino, inum, off;
+  struct dirent de;
+  char buf[BSIZE];
+  struct dinode din;
+
+
+  static_assert(sizeof(int) == 4, "Integers must be 4 bytes!");
+
+  if(argc < 2){
+    fprintf(stderr, "Usage: mkfs fs.img files...\n");
+    exit(1);
+  }
+
+  assert((BSIZE % sizeof(struct dinode)) == 0);
+  assert((BSIZE % sizeof(struct dirent)) == 0);
+
+  fsfd = open(argv[1], O_RDWR|O_CREAT|O_TRUNC, 0666);
+  if(fsfd < 0)
+    die(argv[1]);
+
+  // 1 fs block = 1 disk sector
+  nmeta = 2 + nlog + ninodeblocks + nbitmap;
+  nblocks = FSSIZE - nmeta;
+
+  sb.magic = FSMAGIC;
+  sb.size = xint(FSSIZE);
+  sb.nblocks = xint(nblocks);
+  sb.ninodes = xint(NINODES);
+  sb.nlog = xint(nlog);
+  sb.logstart = xint(2);
+  sb.inodestart = xint(2+nlog);
+  sb.bmapstart = xint(2+nlog+ninodeblocks);
+
+  printf("nmeta %d (boot, super, log blocks %u inode blocks %u, bitmap blocks %u) blocks %d total %d\n",
+         nmeta, nlog, ninodeblocks, nbitmap, nblocks, FSSIZE);
+
+  freeblock = nmeta;     // the first free block that we can allocate
+
+  for(i = 0; i < FSSIZE; i++)
+    wsect(i, zeroes);
+
+  memset(buf, 0, sizeof(buf));
+  memmove(buf, &sb, sizeof(sb));
+  wsect(1, buf);
+
+  rootino = ialloc(T_DIR);
+  assert(rootino == ROOTINO);
+
+  bzero(&de, sizeof(de));
+  de.inum = xshort(rootino);
+  strcpy(de.name, ".");
+  iappend(rootino, &de, sizeof(de));
+
+  bzero(&de, sizeof(de));
+  de.inum = xshort(rootino);
+  strcpy(de.name, "..");
+  iappend(rootino, &de, sizeof(de));
+
+  for(i = 2; i < argc; i++){
+    // get rid of "user/"
+    char *shortname;
+    if(strncmp(argv[i], "user/", 5) == 0)
+      shortname = argv[i] + 5;
+    else
+      shortname = argv[i];
+    
+    assert(index(shortname, '/') == 0);
+
+    if((fd = open(argv[i], 0)) < 0)
+      die(argv[i]);
+
+    // Skip leading _ in name when writing to file system.
+    // The binaries are named _rm, _cat, etc. to keep the
+    // build operating system from trying to execute them
+    // in place of system binaries like rm and cat.
+    if(shortname[0] == '_')
+      shortname += 1;
+
+    assert(strlen(shortname) <= DIRSIZ);
+    
+    inum = ialloc(T_FILE);
+
+    bzero(&de, sizeof(de));
+    de.inum = xshort(inum);
+    strncpy(de.name, shortname, DIRSIZ);
+    iappend(rootino, &de, sizeof(de));
+
+    while((cc = read(fd, buf, sizeof(buf))) > 0)
+      iappend(inum, buf, cc);
+
+    close(fd);
+  }
+
+  // fix size of root inode dir
+  rinode(rootino, &din);
+  off = xint(din.size);
+  off = ((off/BSIZE) + 1) * BSIZE;
+  din.size = xint(off);
+  winode(rootino, &din);
+
+  balloc(freeblock);
+
+  exit(0);
+}
+
+void
+wsect(uint sec, void *buf)
+{
+  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE)
+    die("lseek");
+  if(write(fsfd, buf, BSIZE) != BSIZE)
+    die("write");
+}
+
+void
+winode(uint inum, struct dinode *ip)
+{
+  char buf[BSIZE];
+  uint bn;
+  struct dinode *dip;
+
+  bn = IBLOCK(inum, sb);
+  rsect(bn, buf);
+  dip = ((struct dinode*)buf) + (inum % IPB);
+  *dip = *ip;
+  wsect(bn, buf);
+}
+
+void
+rinode(uint inum, struct dinode *ip)
+{
+  char buf[BSIZE];
+  uint bn;
+  struct dinode *dip;
+
+  bn = IBLOCK(inum, sb);
+  rsect(bn, buf);
+  dip = ((struct dinode*)buf) + (inum % IPB);
+  *ip = *dip;
+}
+
+void
+rsect(uint sec, void *buf)
+{
+  if(lseek(fsfd, sec * BSIZE, 0) != sec * BSIZE)
+    die("lseek");
+  if(read(fsfd, buf, BSIZE) != BSIZE)
+    die("read");
+}
+
+uint
+ialloc(ushort type)
+{
+  uint inum = freeinode++;
+  struct dinode din;
+
+  bzero(&din, sizeof(din));
+  din.type = xshort(type);
+  din.nlink = xshort(1);
+  din.size = xint(0);
+  winode(inum, &din);
+  return inum;
+}
+
+void
+balloc(int used)
+{
+  uchar buf[BSIZE];
+  int i;
+
+  printf("balloc: first %d blocks have been allocated\n", used);
+  assert(used < BPB);
+  bzero(buf, BSIZE);
+  for(i = 0; i < used; i++){
+    buf[i/8] = buf[i/8] | (0x1 << (i%8));
+  }
+  printf("balloc: write bitmap block at sector %d\n", sb.bmapstart);
+  wsect(sb.bmapstart, buf);
+}
+
+#define min(a, b) ((a) < (b) ? (a) : (b))
+
+void
+iappend(uint inum, void *xp, int n)
+{
+  char *p = (char*)xp;
+  uint fbn, off, n1;
+  struct dinode din;
+  char buf[BSIZE];
+  uint indirect[NINDIRECT];
+  uint x;
+
+  rinode(inum, &din);
+  off = xint(din.size);
+  // printf("append inum %d at off %d sz %d\n", inum, off, n);
+  while(n > 0){
+    fbn = off / BSIZE;
+    assert(fbn < MAXFILE);
+    if(fbn < NDIRECT){
+      if(xint(din.addrs[fbn]) == 0){
+        din.addrs[fbn] = xint(freeblock++);
+      }
+      x = xint(din.addrs[fbn]);
+    } else {
+      if(xint(din.addrs[NDIRECT]) == 0){
+        din.addrs[NDIRECT] = xint(freeblock++);
+      }
+      rsect(xint(din.addrs[NDIRECT]), (char*)indirect);
+      if(indirect[fbn - NDIRECT] == 0){
+        indirect[fbn - NDIRECT] = xint(freeblock++);
+        wsect(xint(din.addrs[NDIRECT]), (char*)indirect);
+      }
+      x = xint(indirect[fbn-NDIRECT]);
+    }
+    n1 = min(n, (fbn + 1) * BSIZE - off);
+    rsect(x, buf);
+    bcopy(p, buf + off - (fbn * BSIZE), n1);
+    wsect(x, buf);
+    n -= n1;
+    off += n1;
+    p += n1;
+  }
+  din.size = xint(off);
+  winode(inum, &din);
+}
+
+void
+die(const char *s)
+{
+  perror(s);
+  exit(1);
+}
diff --git a/xv6-labs-2024/user/_cat b/xv6-labs-2024/user/_cat
new file mode 100755
index 0000000..879f570
Binary files /dev/null and b/xv6-labs-2024/user/_cat differ
diff --git a/xv6-labs-2024/user/_echo b/xv6-labs-2024/user/_echo
new file mode 100755
index 0000000..61ce175
Binary files /dev/null and b/xv6-labs-2024/user/_echo differ
diff --git a/xv6-labs-2024/user/_find b/xv6-labs-2024/user/_find
new file mode 100755
index 0000000..02c4f14
Binary files /dev/null and b/xv6-labs-2024/user/_find differ
diff --git a/xv6-labs-2024/user/_forktest b/xv6-labs-2024/user/_forktest
new file mode 100755
index 0000000..31dbfc8
Binary files /dev/null and b/xv6-labs-2024/user/_forktest differ
diff --git a/xv6-labs-2024/user/_grep b/xv6-labs-2024/user/_grep
new file mode 100755
index 0000000..42a6833
Binary files /dev/null and b/xv6-labs-2024/user/_grep differ
diff --git a/xv6-labs-2024/user/_grind b/xv6-labs-2024/user/_grind
new file mode 100755
index 0000000..ecfcbe5
Binary files /dev/null and b/xv6-labs-2024/user/_grind differ
diff --git a/xv6-labs-2024/user/_init b/xv6-labs-2024/user/_init
new file mode 100755
index 0000000..ffcb4b5
Binary files /dev/null and b/xv6-labs-2024/user/_init differ
diff --git a/xv6-labs-2024/user/_kill b/xv6-labs-2024/user/_kill
new file mode 100755
index 0000000..f5dfa1b
Binary files /dev/null and b/xv6-labs-2024/user/_kill differ
diff --git a/xv6-labs-2024/user/_ln b/xv6-labs-2024/user/_ln
new file mode 100755
index 0000000..0acb287
Binary files /dev/null and b/xv6-labs-2024/user/_ln differ
diff --git a/xv6-labs-2024/user/_ls b/xv6-labs-2024/user/_ls
new file mode 100755
index 0000000..1d22093
Binary files /dev/null and b/xv6-labs-2024/user/_ls differ
diff --git a/xv6-labs-2024/user/_mkdir b/xv6-labs-2024/user/_mkdir
new file mode 100755
index 0000000..04a3fa6
Binary files /dev/null and b/xv6-labs-2024/user/_mkdir differ
diff --git a/xv6-labs-2024/user/_pingpong b/xv6-labs-2024/user/_pingpong
new file mode 100755
index 0000000..c38ffad
Binary files /dev/null and b/xv6-labs-2024/user/_pingpong differ
diff --git a/xv6-labs-2024/user/_primes b/xv6-labs-2024/user/_primes
new file mode 100755
index 0000000..3b18e86
Binary files /dev/null and b/xv6-labs-2024/user/_primes differ
diff --git a/xv6-labs-2024/user/_rm b/xv6-labs-2024/user/_rm
new file mode 100755
index 0000000..21f7bfa
Binary files /dev/null and b/xv6-labs-2024/user/_rm differ
diff --git a/xv6-labs-2024/user/_sh b/xv6-labs-2024/user/_sh
new file mode 100755
index 0000000..f43310f
Binary files /dev/null and b/xv6-labs-2024/user/_sh differ
diff --git a/xv6-labs-2024/user/_stressfs b/xv6-labs-2024/user/_stressfs
new file mode 100755
index 0000000..e2deb20
Binary files /dev/null and b/xv6-labs-2024/user/_stressfs differ
diff --git a/xv6-labs-2024/user/_usertests b/xv6-labs-2024/user/_usertests
new file mode 100755
index 0000000..b3872ab
Binary files /dev/null and b/xv6-labs-2024/user/_usertests differ
diff --git a/xv6-labs-2024/user/_wc b/xv6-labs-2024/user/_wc
new file mode 100755
index 0000000..702a7c1
Binary files /dev/null and b/xv6-labs-2024/user/_wc differ
diff --git a/xv6-labs-2024/user/_xargs b/xv6-labs-2024/user/_xargs
new file mode 100755
index 0000000..77acba7
Binary files /dev/null and b/xv6-labs-2024/user/_xargs differ
diff --git a/xv6-labs-2024/user/_zombie b/xv6-labs-2024/user/_zombie
new file mode 100755
index 0000000..8a908b9
Binary files /dev/null and b/xv6-labs-2024/user/_zombie differ
diff --git a/xv6-labs-2024/user/cat.asm b/xv6-labs-2024/user/cat.asm
new file mode 100644
index 0000000..711d42c
--- /dev/null
+++ b/xv6-labs-2024/user/cat.asm
@@ -0,0 +1,1114 @@
+
+user/_cat:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <cat>:
+   0:	7179                	addi	sp,sp,-48
+   2:	f406                	sd	ra,40(sp)
+   4:	f022                	sd	s0,32(sp)
+   6:	ec26                	sd	s1,24(sp)
+   8:	e84a                	sd	s2,16(sp)
+   a:	e44e                	sd	s3,8(sp)
+   c:	1800                	addi	s0,sp,48
+   e:	89aa                	mv	s3,a0
+  10:	00001917          	auipc	s2,0x1
+  14:	00090913          	mv	s2,s2
+  18:	20000613          	li	a2,512
+  1c:	85ca                	mv	a1,s2
+  1e:	854e                	mv	a0,s3
+  20:	34c000ef          	jal	36c <read>
+  24:	84aa                	mv	s1,a0
+  26:	02a05363          	blez	a0,4c <cat+0x4c>
+  2a:	8626                	mv	a2,s1
+  2c:	85ca                	mv	a1,s2
+  2e:	4505                	li	a0,1
+  30:	344000ef          	jal	374 <write>
+  34:	fe9502e3          	beq	a0,s1,18 <cat+0x18>
+  38:	00001597          	auipc	a1,0x1
+  3c:	8e858593          	addi	a1,a1,-1816 # 920 <malloc+0x100>
+  40:	4509                	li	a0,2
+  42:	700000ef          	jal	742 <fprintf>
+  46:	4505                	li	a0,1
+  48:	30c000ef          	jal	354 <exit>
+  4c:	00054963          	bltz	a0,5e <cat+0x5e>
+  50:	70a2                	ld	ra,40(sp)
+  52:	7402                	ld	s0,32(sp)
+  54:	64e2                	ld	s1,24(sp)
+  56:	6942                	ld	s2,16(sp)
+  58:	69a2                	ld	s3,8(sp)
+  5a:	6145                	addi	sp,sp,48
+  5c:	8082                	ret
+  5e:	00001597          	auipc	a1,0x1
+  62:	8da58593          	addi	a1,a1,-1830 # 938 <malloc+0x118>
+  66:	4509                	li	a0,2
+  68:	6da000ef          	jal	742 <fprintf>
+  6c:	4505                	li	a0,1
+  6e:	2e6000ef          	jal	354 <exit>
+
+0000000000000072 <main>:
+  72:	7179                	addi	sp,sp,-48
+  74:	f406                	sd	ra,40(sp)
+  76:	f022                	sd	s0,32(sp)
+  78:	1800                	addi	s0,sp,48
+  7a:	4785                	li	a5,1
+  7c:	04a7d263          	bge	a5,a0,c0 <main+0x4e>
+  80:	ec26                	sd	s1,24(sp)
+  82:	e84a                	sd	s2,16(sp)
+  84:	e44e                	sd	s3,8(sp)
+  86:	00858913          	addi	s2,a1,8
+  8a:	ffe5099b          	addiw	s3,a0,-2
+  8e:	02099793          	slli	a5,s3,0x20
+  92:	01d7d993          	srli	s3,a5,0x1d
+  96:	05c1                	addi	a1,a1,16
+  98:	99ae                	add	s3,s3,a1
+  9a:	4581                	li	a1,0
+  9c:	00093503          	ld	a0,0(s2) # 1010 <buf>
+  a0:	2f4000ef          	jal	394 <open>
+  a4:	84aa                	mv	s1,a0
+  a6:	02054663          	bltz	a0,d2 <main+0x60>
+  aa:	f57ff0ef          	jal	0 <cat>
+  ae:	8526                	mv	a0,s1
+  b0:	2cc000ef          	jal	37c <close>
+  b4:	0921                	addi	s2,s2,8
+  b6:	ff3912e3          	bne	s2,s3,9a <main+0x28>
+  ba:	4501                	li	a0,0
+  bc:	298000ef          	jal	354 <exit>
+  c0:	ec26                	sd	s1,24(sp)
+  c2:	e84a                	sd	s2,16(sp)
+  c4:	e44e                	sd	s3,8(sp)
+  c6:	4501                	li	a0,0
+  c8:	f39ff0ef          	jal	0 <cat>
+  cc:	4501                	li	a0,0
+  ce:	286000ef          	jal	354 <exit>
+  d2:	00093603          	ld	a2,0(s2)
+  d6:	00001597          	auipc	a1,0x1
+  da:	87a58593          	addi	a1,a1,-1926 # 950 <malloc+0x130>
+  de:	4509                	li	a0,2
+  e0:	662000ef          	jal	742 <fprintf>
+  e4:	4505                	li	a0,1
+  e6:	26e000ef          	jal	354 <exit>
+
+00000000000000ea <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  ea:	1141                	addi	sp,sp,-16
+  ec:	e406                	sd	ra,8(sp)
+  ee:	e022                	sd	s0,0(sp)
+  f0:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  f2:	f81ff0ef          	jal	72 <main>
+  exit(0);
+  f6:	4501                	li	a0,0
+  f8:	25c000ef          	jal	354 <exit>
+
+00000000000000fc <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  fc:	1141                	addi	sp,sp,-16
+  fe:	e422                	sd	s0,8(sp)
+ 100:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 102:	87aa                	mv	a5,a0
+ 104:	0585                	addi	a1,a1,1
+ 106:	0785                	addi	a5,a5,1
+ 108:	fff5c703          	lbu	a4,-1(a1)
+ 10c:	fee78fa3          	sb	a4,-1(a5)
+ 110:	fb75                	bnez	a4,104 <strcpy+0x8>
+    ;
+  return os;
+}
+ 112:	6422                	ld	s0,8(sp)
+ 114:	0141                	addi	sp,sp,16
+ 116:	8082                	ret
+
+0000000000000118 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 118:	1141                	addi	sp,sp,-16
+ 11a:	e422                	sd	s0,8(sp)
+ 11c:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 11e:	00054783          	lbu	a5,0(a0)
+ 122:	cb91                	beqz	a5,136 <strcmp+0x1e>
+ 124:	0005c703          	lbu	a4,0(a1)
+ 128:	00f71763          	bne	a4,a5,136 <strcmp+0x1e>
+    p++, q++;
+ 12c:	0505                	addi	a0,a0,1
+ 12e:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 130:	00054783          	lbu	a5,0(a0)
+ 134:	fbe5                	bnez	a5,124 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 136:	0005c503          	lbu	a0,0(a1)
+}
+ 13a:	40a7853b          	subw	a0,a5,a0
+ 13e:	6422                	ld	s0,8(sp)
+ 140:	0141                	addi	sp,sp,16
+ 142:	8082                	ret
+
+0000000000000144 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 144:	1141                	addi	sp,sp,-16
+ 146:	e422                	sd	s0,8(sp)
+ 148:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 14a:	00054783          	lbu	a5,0(a0)
+ 14e:	cf91                	beqz	a5,16a <strlen+0x26>
+ 150:	0505                	addi	a0,a0,1
+ 152:	87aa                	mv	a5,a0
+ 154:	86be                	mv	a3,a5
+ 156:	0785                	addi	a5,a5,1
+ 158:	fff7c703          	lbu	a4,-1(a5)
+ 15c:	ff65                	bnez	a4,154 <strlen+0x10>
+ 15e:	40a6853b          	subw	a0,a3,a0
+ 162:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 164:	6422                	ld	s0,8(sp)
+ 166:	0141                	addi	sp,sp,16
+ 168:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 16a:	4501                	li	a0,0
+ 16c:	bfe5                	j	164 <strlen+0x20>
+
+000000000000016e <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 16e:	1141                	addi	sp,sp,-16
+ 170:	e422                	sd	s0,8(sp)
+ 172:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 174:	ca19                	beqz	a2,18a <memset+0x1c>
+ 176:	87aa                	mv	a5,a0
+ 178:	1602                	slli	a2,a2,0x20
+ 17a:	9201                	srli	a2,a2,0x20
+ 17c:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 180:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 184:	0785                	addi	a5,a5,1
+ 186:	fee79de3          	bne	a5,a4,180 <memset+0x12>
+  }
+  return dst;
+}
+ 18a:	6422                	ld	s0,8(sp)
+ 18c:	0141                	addi	sp,sp,16
+ 18e:	8082                	ret
+
+0000000000000190 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 190:	1141                	addi	sp,sp,-16
+ 192:	e422                	sd	s0,8(sp)
+ 194:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 196:	00054783          	lbu	a5,0(a0)
+ 19a:	cb99                	beqz	a5,1b0 <strchr+0x20>
+    if(*s == c)
+ 19c:	00f58763          	beq	a1,a5,1aa <strchr+0x1a>
+  for(; *s; s++)
+ 1a0:	0505                	addi	a0,a0,1
+ 1a2:	00054783          	lbu	a5,0(a0)
+ 1a6:	fbfd                	bnez	a5,19c <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 1a8:	4501                	li	a0,0
+}
+ 1aa:	6422                	ld	s0,8(sp)
+ 1ac:	0141                	addi	sp,sp,16
+ 1ae:	8082                	ret
+  return 0;
+ 1b0:	4501                	li	a0,0
+ 1b2:	bfe5                	j	1aa <strchr+0x1a>
+
+00000000000001b4 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 1b4:	711d                	addi	sp,sp,-96
+ 1b6:	ec86                	sd	ra,88(sp)
+ 1b8:	e8a2                	sd	s0,80(sp)
+ 1ba:	e4a6                	sd	s1,72(sp)
+ 1bc:	e0ca                	sd	s2,64(sp)
+ 1be:	fc4e                	sd	s3,56(sp)
+ 1c0:	f852                	sd	s4,48(sp)
+ 1c2:	f456                	sd	s5,40(sp)
+ 1c4:	f05a                	sd	s6,32(sp)
+ 1c6:	ec5e                	sd	s7,24(sp)
+ 1c8:	1080                	addi	s0,sp,96
+ 1ca:	8baa                	mv	s7,a0
+ 1cc:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 1ce:	892a                	mv	s2,a0
+ 1d0:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 1d2:	4aa9                	li	s5,10
+ 1d4:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 1d6:	89a6                	mv	s3,s1
+ 1d8:	2485                	addiw	s1,s1,1
+ 1da:	0344d663          	bge	s1,s4,206 <gets+0x52>
+    cc = read(0, &c, 1);
+ 1de:	4605                	li	a2,1
+ 1e0:	faf40593          	addi	a1,s0,-81
+ 1e4:	4501                	li	a0,0
+ 1e6:	186000ef          	jal	36c <read>
+    if(cc < 1)
+ 1ea:	00a05e63          	blez	a0,206 <gets+0x52>
+    buf[i++] = c;
+ 1ee:	faf44783          	lbu	a5,-81(s0)
+ 1f2:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 1f6:	01578763          	beq	a5,s5,204 <gets+0x50>
+ 1fa:	0905                	addi	s2,s2,1
+ 1fc:	fd679de3          	bne	a5,s6,1d6 <gets+0x22>
+    buf[i++] = c;
+ 200:	89a6                	mv	s3,s1
+ 202:	a011                	j	206 <gets+0x52>
+ 204:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 206:	99de                	add	s3,s3,s7
+ 208:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 20c:	855e                	mv	a0,s7
+ 20e:	60e6                	ld	ra,88(sp)
+ 210:	6446                	ld	s0,80(sp)
+ 212:	64a6                	ld	s1,72(sp)
+ 214:	6906                	ld	s2,64(sp)
+ 216:	79e2                	ld	s3,56(sp)
+ 218:	7a42                	ld	s4,48(sp)
+ 21a:	7aa2                	ld	s5,40(sp)
+ 21c:	7b02                	ld	s6,32(sp)
+ 21e:	6be2                	ld	s7,24(sp)
+ 220:	6125                	addi	sp,sp,96
+ 222:	8082                	ret
+
+0000000000000224 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 224:	1101                	addi	sp,sp,-32
+ 226:	ec06                	sd	ra,24(sp)
+ 228:	e822                	sd	s0,16(sp)
+ 22a:	e04a                	sd	s2,0(sp)
+ 22c:	1000                	addi	s0,sp,32
+ 22e:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 230:	4581                	li	a1,0
+ 232:	162000ef          	jal	394 <open>
+  if(fd < 0)
+ 236:	02054263          	bltz	a0,25a <stat+0x36>
+ 23a:	e426                	sd	s1,8(sp)
+ 23c:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 23e:	85ca                	mv	a1,s2
+ 240:	16c000ef          	jal	3ac <fstat>
+ 244:	892a                	mv	s2,a0
+  close(fd);
+ 246:	8526                	mv	a0,s1
+ 248:	134000ef          	jal	37c <close>
+  return r;
+ 24c:	64a2                	ld	s1,8(sp)
+}
+ 24e:	854a                	mv	a0,s2
+ 250:	60e2                	ld	ra,24(sp)
+ 252:	6442                	ld	s0,16(sp)
+ 254:	6902                	ld	s2,0(sp)
+ 256:	6105                	addi	sp,sp,32
+ 258:	8082                	ret
+    return -1;
+ 25a:	597d                	li	s2,-1
+ 25c:	bfcd                	j	24e <stat+0x2a>
+
+000000000000025e <atoi>:
+
+int
+atoi(const char *s)
+{
+ 25e:	1141                	addi	sp,sp,-16
+ 260:	e422                	sd	s0,8(sp)
+ 262:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 264:	00054683          	lbu	a3,0(a0)
+ 268:	fd06879b          	addiw	a5,a3,-48
+ 26c:	0ff7f793          	zext.b	a5,a5
+ 270:	4625                	li	a2,9
+ 272:	02f66863          	bltu	a2,a5,2a2 <atoi+0x44>
+ 276:	872a                	mv	a4,a0
+  n = 0;
+ 278:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 27a:	0705                	addi	a4,a4,1
+ 27c:	0025179b          	slliw	a5,a0,0x2
+ 280:	9fa9                	addw	a5,a5,a0
+ 282:	0017979b          	slliw	a5,a5,0x1
+ 286:	9fb5                	addw	a5,a5,a3
+ 288:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 28c:	00074683          	lbu	a3,0(a4)
+ 290:	fd06879b          	addiw	a5,a3,-48
+ 294:	0ff7f793          	zext.b	a5,a5
+ 298:	fef671e3          	bgeu	a2,a5,27a <atoi+0x1c>
+  return n;
+}
+ 29c:	6422                	ld	s0,8(sp)
+ 29e:	0141                	addi	sp,sp,16
+ 2a0:	8082                	ret
+  n = 0;
+ 2a2:	4501                	li	a0,0
+ 2a4:	bfe5                	j	29c <atoi+0x3e>
+
+00000000000002a6 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 2a6:	1141                	addi	sp,sp,-16
+ 2a8:	e422                	sd	s0,8(sp)
+ 2aa:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 2ac:	02b57463          	bgeu	a0,a1,2d4 <memmove+0x2e>
+    while(n-- > 0)
+ 2b0:	00c05f63          	blez	a2,2ce <memmove+0x28>
+ 2b4:	1602                	slli	a2,a2,0x20
+ 2b6:	9201                	srli	a2,a2,0x20
+ 2b8:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 2bc:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 2be:	0585                	addi	a1,a1,1
+ 2c0:	0705                	addi	a4,a4,1
+ 2c2:	fff5c683          	lbu	a3,-1(a1)
+ 2c6:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 2ca:	fef71ae3          	bne	a4,a5,2be <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2ce:	6422                	ld	s0,8(sp)
+ 2d0:	0141                	addi	sp,sp,16
+ 2d2:	8082                	ret
+    dst += n;
+ 2d4:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2d8:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2da:	fec05ae3          	blez	a2,2ce <memmove+0x28>
+ 2de:	fff6079b          	addiw	a5,a2,-1
+ 2e2:	1782                	slli	a5,a5,0x20
+ 2e4:	9381                	srli	a5,a5,0x20
+ 2e6:	fff7c793          	not	a5,a5
+ 2ea:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 2ec:	15fd                	addi	a1,a1,-1
+ 2ee:	177d                	addi	a4,a4,-1
+ 2f0:	0005c683          	lbu	a3,0(a1)
+ 2f4:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 2f8:	fee79ae3          	bne	a5,a4,2ec <memmove+0x46>
+ 2fc:	bfc9                	j	2ce <memmove+0x28>
+
+00000000000002fe <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 2fe:	1141                	addi	sp,sp,-16
+ 300:	e422                	sd	s0,8(sp)
+ 302:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 304:	ca05                	beqz	a2,334 <memcmp+0x36>
+ 306:	fff6069b          	addiw	a3,a2,-1
+ 30a:	1682                	slli	a3,a3,0x20
+ 30c:	9281                	srli	a3,a3,0x20
+ 30e:	0685                	addi	a3,a3,1
+ 310:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 312:	00054783          	lbu	a5,0(a0)
+ 316:	0005c703          	lbu	a4,0(a1)
+ 31a:	00e79863          	bne	a5,a4,32a <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 31e:	0505                	addi	a0,a0,1
+    p2++;
+ 320:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 322:	fed518e3          	bne	a0,a3,312 <memcmp+0x14>
+  }
+  return 0;
+ 326:	4501                	li	a0,0
+ 328:	a019                	j	32e <memcmp+0x30>
+      return *p1 - *p2;
+ 32a:	40e7853b          	subw	a0,a5,a4
+}
+ 32e:	6422                	ld	s0,8(sp)
+ 330:	0141                	addi	sp,sp,16
+ 332:	8082                	ret
+  return 0;
+ 334:	4501                	li	a0,0
+ 336:	bfe5                	j	32e <memcmp+0x30>
+
+0000000000000338 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 338:	1141                	addi	sp,sp,-16
+ 33a:	e406                	sd	ra,8(sp)
+ 33c:	e022                	sd	s0,0(sp)
+ 33e:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 340:	f67ff0ef          	jal	2a6 <memmove>
+}
+ 344:	60a2                	ld	ra,8(sp)
+ 346:	6402                	ld	s0,0(sp)
+ 348:	0141                	addi	sp,sp,16
+ 34a:	8082                	ret
+
+000000000000034c <fork>:
+ 34c:	4885                	li	a7,1
+ 34e:	00000073          	ecall
+ 352:	8082                	ret
+
+0000000000000354 <exit>:
+ 354:	4889                	li	a7,2
+ 356:	00000073          	ecall
+ 35a:	8082                	ret
+
+000000000000035c <wait>:
+ 35c:	488d                	li	a7,3
+ 35e:	00000073          	ecall
+ 362:	8082                	ret
+
+0000000000000364 <pipe>:
+ 364:	4891                	li	a7,4
+ 366:	00000073          	ecall
+ 36a:	8082                	ret
+
+000000000000036c <read>:
+ 36c:	4895                	li	a7,5
+ 36e:	00000073          	ecall
+ 372:	8082                	ret
+
+0000000000000374 <write>:
+ 374:	48c1                	li	a7,16
+ 376:	00000073          	ecall
+ 37a:	8082                	ret
+
+000000000000037c <close>:
+ 37c:	48d5                	li	a7,21
+ 37e:	00000073          	ecall
+ 382:	8082                	ret
+
+0000000000000384 <kill>:
+ 384:	4899                	li	a7,6
+ 386:	00000073          	ecall
+ 38a:	8082                	ret
+
+000000000000038c <exec>:
+ 38c:	489d                	li	a7,7
+ 38e:	00000073          	ecall
+ 392:	8082                	ret
+
+0000000000000394 <open>:
+ 394:	48bd                	li	a7,15
+ 396:	00000073          	ecall
+ 39a:	8082                	ret
+
+000000000000039c <mknod>:
+ 39c:	48c5                	li	a7,17
+ 39e:	00000073          	ecall
+ 3a2:	8082                	ret
+
+00000000000003a4 <unlink>:
+ 3a4:	48c9                	li	a7,18
+ 3a6:	00000073          	ecall
+ 3aa:	8082                	ret
+
+00000000000003ac <fstat>:
+ 3ac:	48a1                	li	a7,8
+ 3ae:	00000073          	ecall
+ 3b2:	8082                	ret
+
+00000000000003b4 <link>:
+ 3b4:	48cd                	li	a7,19
+ 3b6:	00000073          	ecall
+ 3ba:	8082                	ret
+
+00000000000003bc <mkdir>:
+ 3bc:	48d1                	li	a7,20
+ 3be:	00000073          	ecall
+ 3c2:	8082                	ret
+
+00000000000003c4 <chdir>:
+ 3c4:	48a5                	li	a7,9
+ 3c6:	00000073          	ecall
+ 3ca:	8082                	ret
+
+00000000000003cc <dup>:
+ 3cc:	48a9                	li	a7,10
+ 3ce:	00000073          	ecall
+ 3d2:	8082                	ret
+
+00000000000003d4 <getpid>:
+ 3d4:	48ad                	li	a7,11
+ 3d6:	00000073          	ecall
+ 3da:	8082                	ret
+
+00000000000003dc <sbrk>:
+ 3dc:	48b1                	li	a7,12
+ 3de:	00000073          	ecall
+ 3e2:	8082                	ret
+
+00000000000003e4 <sleep>:
+ 3e4:	48b5                	li	a7,13
+ 3e6:	00000073          	ecall
+ 3ea:	8082                	ret
+
+00000000000003ec <uptime>:
+ 3ec:	48b9                	li	a7,14
+ 3ee:	00000073          	ecall
+ 3f2:	8082                	ret
+
+00000000000003f4 <putc>:
+ 3f4:	1101                	addi	sp,sp,-32
+ 3f6:	ec06                	sd	ra,24(sp)
+ 3f8:	e822                	sd	s0,16(sp)
+ 3fa:	1000                	addi	s0,sp,32
+ 3fc:	feb407a3          	sb	a1,-17(s0)
+ 400:	4605                	li	a2,1
+ 402:	fef40593          	addi	a1,s0,-17
+ 406:	f6fff0ef          	jal	374 <write>
+ 40a:	60e2                	ld	ra,24(sp)
+ 40c:	6442                	ld	s0,16(sp)
+ 40e:	6105                	addi	sp,sp,32
+ 410:	8082                	ret
+
+0000000000000412 <printint>:
+ 412:	7139                	addi	sp,sp,-64
+ 414:	fc06                	sd	ra,56(sp)
+ 416:	f822                	sd	s0,48(sp)
+ 418:	f426                	sd	s1,40(sp)
+ 41a:	0080                	addi	s0,sp,64
+ 41c:	84aa                	mv	s1,a0
+ 41e:	c299                	beqz	a3,424 <printint+0x12>
+ 420:	0805c963          	bltz	a1,4b2 <printint+0xa0>
+ 424:	2581                	sext.w	a1,a1
+ 426:	4881                	li	a7,0
+ 428:	fc040693          	addi	a3,s0,-64
+ 42c:	4701                	li	a4,0
+ 42e:	2601                	sext.w	a2,a2
+ 430:	00000517          	auipc	a0,0x0
+ 434:	54050513          	addi	a0,a0,1344 # 970 <digits>
+ 438:	883a                	mv	a6,a4
+ 43a:	2705                	addiw	a4,a4,1
+ 43c:	02c5f7bb          	remuw	a5,a1,a2
+ 440:	1782                	slli	a5,a5,0x20
+ 442:	9381                	srli	a5,a5,0x20
+ 444:	97aa                	add	a5,a5,a0
+ 446:	0007c783          	lbu	a5,0(a5)
+ 44a:	00f68023          	sb	a5,0(a3)
+ 44e:	0005879b          	sext.w	a5,a1
+ 452:	02c5d5bb          	divuw	a1,a1,a2
+ 456:	0685                	addi	a3,a3,1
+ 458:	fec7f0e3          	bgeu	a5,a2,438 <printint+0x26>
+ 45c:	00088c63          	beqz	a7,474 <printint+0x62>
+ 460:	fd070793          	addi	a5,a4,-48
+ 464:	00878733          	add	a4,a5,s0
+ 468:	02d00793          	li	a5,45
+ 46c:	fef70823          	sb	a5,-16(a4)
+ 470:	0028071b          	addiw	a4,a6,2
+ 474:	02e05a63          	blez	a4,4a8 <printint+0x96>
+ 478:	f04a                	sd	s2,32(sp)
+ 47a:	ec4e                	sd	s3,24(sp)
+ 47c:	fc040793          	addi	a5,s0,-64
+ 480:	00e78933          	add	s2,a5,a4
+ 484:	fff78993          	addi	s3,a5,-1
+ 488:	99ba                	add	s3,s3,a4
+ 48a:	377d                	addiw	a4,a4,-1
+ 48c:	1702                	slli	a4,a4,0x20
+ 48e:	9301                	srli	a4,a4,0x20
+ 490:	40e989b3          	sub	s3,s3,a4
+ 494:	fff94583          	lbu	a1,-1(s2)
+ 498:	8526                	mv	a0,s1
+ 49a:	f5bff0ef          	jal	3f4 <putc>
+ 49e:	197d                	addi	s2,s2,-1
+ 4a0:	ff391ae3          	bne	s2,s3,494 <printint+0x82>
+ 4a4:	7902                	ld	s2,32(sp)
+ 4a6:	69e2                	ld	s3,24(sp)
+ 4a8:	70e2                	ld	ra,56(sp)
+ 4aa:	7442                	ld	s0,48(sp)
+ 4ac:	74a2                	ld	s1,40(sp)
+ 4ae:	6121                	addi	sp,sp,64
+ 4b0:	8082                	ret
+ 4b2:	40b005bb          	negw	a1,a1
+ 4b6:	4885                	li	a7,1
+ 4b8:	bf85                	j	428 <printint+0x16>
+
+00000000000004ba <vprintf>:
+ 4ba:	711d                	addi	sp,sp,-96
+ 4bc:	ec86                	sd	ra,88(sp)
+ 4be:	e8a2                	sd	s0,80(sp)
+ 4c0:	e0ca                	sd	s2,64(sp)
+ 4c2:	1080                	addi	s0,sp,96
+ 4c4:	0005c903          	lbu	s2,0(a1)
+ 4c8:	26090863          	beqz	s2,738 <vprintf+0x27e>
+ 4cc:	e4a6                	sd	s1,72(sp)
+ 4ce:	fc4e                	sd	s3,56(sp)
+ 4d0:	f852                	sd	s4,48(sp)
+ 4d2:	f456                	sd	s5,40(sp)
+ 4d4:	f05a                	sd	s6,32(sp)
+ 4d6:	ec5e                	sd	s7,24(sp)
+ 4d8:	e862                	sd	s8,16(sp)
+ 4da:	e466                	sd	s9,8(sp)
+ 4dc:	8b2a                	mv	s6,a0
+ 4de:	8a2e                	mv	s4,a1
+ 4e0:	8bb2                	mv	s7,a2
+ 4e2:	4981                	li	s3,0
+ 4e4:	4481                	li	s1,0
+ 4e6:	4701                	li	a4,0
+ 4e8:	02500a93          	li	s5,37
+ 4ec:	06400c13          	li	s8,100
+ 4f0:	06c00c93          	li	s9,108
+ 4f4:	a005                	j	514 <vprintf+0x5a>
+ 4f6:	85ca                	mv	a1,s2
+ 4f8:	855a                	mv	a0,s6
+ 4fa:	efbff0ef          	jal	3f4 <putc>
+ 4fe:	a019                	j	504 <vprintf+0x4a>
+ 500:	03598263          	beq	s3,s5,524 <vprintf+0x6a>
+ 504:	2485                	addiw	s1,s1,1
+ 506:	8726                	mv	a4,s1
+ 508:	009a07b3          	add	a5,s4,s1
+ 50c:	0007c903          	lbu	s2,0(a5)
+ 510:	20090c63          	beqz	s2,728 <vprintf+0x26e>
+ 514:	0009079b          	sext.w	a5,s2
+ 518:	fe0994e3          	bnez	s3,500 <vprintf+0x46>
+ 51c:	fd579de3          	bne	a5,s5,4f6 <vprintf+0x3c>
+ 520:	89be                	mv	s3,a5
+ 522:	b7cd                	j	504 <vprintf+0x4a>
+ 524:	00ea06b3          	add	a3,s4,a4
+ 528:	0016c683          	lbu	a3,1(a3)
+ 52c:	8636                	mv	a2,a3
+ 52e:	c681                	beqz	a3,536 <vprintf+0x7c>
+ 530:	9752                	add	a4,a4,s4
+ 532:	00274603          	lbu	a2,2(a4)
+ 536:	03878f63          	beq	a5,s8,574 <vprintf+0xba>
+ 53a:	05978963          	beq	a5,s9,58c <vprintf+0xd2>
+ 53e:	07500713          	li	a4,117
+ 542:	0ee78363          	beq	a5,a4,628 <vprintf+0x16e>
+ 546:	07800713          	li	a4,120
+ 54a:	12e78563          	beq	a5,a4,674 <vprintf+0x1ba>
+ 54e:	07000713          	li	a4,112
+ 552:	14e78a63          	beq	a5,a4,6a6 <vprintf+0x1ec>
+ 556:	07300713          	li	a4,115
+ 55a:	18e78a63          	beq	a5,a4,6ee <vprintf+0x234>
+ 55e:	02500713          	li	a4,37
+ 562:	04e79563          	bne	a5,a4,5ac <vprintf+0xf2>
+ 566:	02500593          	li	a1,37
+ 56a:	855a                	mv	a0,s6
+ 56c:	e89ff0ef          	jal	3f4 <putc>
+ 570:	4981                	li	s3,0
+ 572:	bf49                	j	504 <vprintf+0x4a>
+ 574:	008b8913          	addi	s2,s7,8
+ 578:	4685                	li	a3,1
+ 57a:	4629                	li	a2,10
+ 57c:	000ba583          	lw	a1,0(s7)
+ 580:	855a                	mv	a0,s6
+ 582:	e91ff0ef          	jal	412 <printint>
+ 586:	8bca                	mv	s7,s2
+ 588:	4981                	li	s3,0
+ 58a:	bfad                	j	504 <vprintf+0x4a>
+ 58c:	06400793          	li	a5,100
+ 590:	02f68963          	beq	a3,a5,5c2 <vprintf+0x108>
+ 594:	06c00793          	li	a5,108
+ 598:	04f68263          	beq	a3,a5,5dc <vprintf+0x122>
+ 59c:	07500793          	li	a5,117
+ 5a0:	0af68063          	beq	a3,a5,640 <vprintf+0x186>
+ 5a4:	07800793          	li	a5,120
+ 5a8:	0ef68263          	beq	a3,a5,68c <vprintf+0x1d2>
+ 5ac:	02500593          	li	a1,37
+ 5b0:	855a                	mv	a0,s6
+ 5b2:	e43ff0ef          	jal	3f4 <putc>
+ 5b6:	85ca                	mv	a1,s2
+ 5b8:	855a                	mv	a0,s6
+ 5ba:	e3bff0ef          	jal	3f4 <putc>
+ 5be:	4981                	li	s3,0
+ 5c0:	b791                	j	504 <vprintf+0x4a>
+ 5c2:	008b8913          	addi	s2,s7,8
+ 5c6:	4685                	li	a3,1
+ 5c8:	4629                	li	a2,10
+ 5ca:	000ba583          	lw	a1,0(s7)
+ 5ce:	855a                	mv	a0,s6
+ 5d0:	e43ff0ef          	jal	412 <printint>
+ 5d4:	2485                	addiw	s1,s1,1
+ 5d6:	8bca                	mv	s7,s2
+ 5d8:	4981                	li	s3,0
+ 5da:	b72d                	j	504 <vprintf+0x4a>
+ 5dc:	06400793          	li	a5,100
+ 5e0:	02f60763          	beq	a2,a5,60e <vprintf+0x154>
+ 5e4:	07500793          	li	a5,117
+ 5e8:	06f60963          	beq	a2,a5,65a <vprintf+0x1a0>
+ 5ec:	07800793          	li	a5,120
+ 5f0:	faf61ee3          	bne	a2,a5,5ac <vprintf+0xf2>
+ 5f4:	008b8913          	addi	s2,s7,8
+ 5f8:	4681                	li	a3,0
+ 5fa:	4641                	li	a2,16
+ 5fc:	000ba583          	lw	a1,0(s7)
+ 600:	855a                	mv	a0,s6
+ 602:	e11ff0ef          	jal	412 <printint>
+ 606:	2489                	addiw	s1,s1,2
+ 608:	8bca                	mv	s7,s2
+ 60a:	4981                	li	s3,0
+ 60c:	bde5                	j	504 <vprintf+0x4a>
+ 60e:	008b8913          	addi	s2,s7,8
+ 612:	4685                	li	a3,1
+ 614:	4629                	li	a2,10
+ 616:	000ba583          	lw	a1,0(s7)
+ 61a:	855a                	mv	a0,s6
+ 61c:	df7ff0ef          	jal	412 <printint>
+ 620:	2489                	addiw	s1,s1,2
+ 622:	8bca                	mv	s7,s2
+ 624:	4981                	li	s3,0
+ 626:	bdf9                	j	504 <vprintf+0x4a>
+ 628:	008b8913          	addi	s2,s7,8
+ 62c:	4681                	li	a3,0
+ 62e:	4629                	li	a2,10
+ 630:	000ba583          	lw	a1,0(s7)
+ 634:	855a                	mv	a0,s6
+ 636:	dddff0ef          	jal	412 <printint>
+ 63a:	8bca                	mv	s7,s2
+ 63c:	4981                	li	s3,0
+ 63e:	b5d9                	j	504 <vprintf+0x4a>
+ 640:	008b8913          	addi	s2,s7,8
+ 644:	4681                	li	a3,0
+ 646:	4629                	li	a2,10
+ 648:	000ba583          	lw	a1,0(s7)
+ 64c:	855a                	mv	a0,s6
+ 64e:	dc5ff0ef          	jal	412 <printint>
+ 652:	2485                	addiw	s1,s1,1
+ 654:	8bca                	mv	s7,s2
+ 656:	4981                	li	s3,0
+ 658:	b575                	j	504 <vprintf+0x4a>
+ 65a:	008b8913          	addi	s2,s7,8
+ 65e:	4681                	li	a3,0
+ 660:	4629                	li	a2,10
+ 662:	000ba583          	lw	a1,0(s7)
+ 666:	855a                	mv	a0,s6
+ 668:	dabff0ef          	jal	412 <printint>
+ 66c:	2489                	addiw	s1,s1,2
+ 66e:	8bca                	mv	s7,s2
+ 670:	4981                	li	s3,0
+ 672:	bd49                	j	504 <vprintf+0x4a>
+ 674:	008b8913          	addi	s2,s7,8
+ 678:	4681                	li	a3,0
+ 67a:	4641                	li	a2,16
+ 67c:	000ba583          	lw	a1,0(s7)
+ 680:	855a                	mv	a0,s6
+ 682:	d91ff0ef          	jal	412 <printint>
+ 686:	8bca                	mv	s7,s2
+ 688:	4981                	li	s3,0
+ 68a:	bdad                	j	504 <vprintf+0x4a>
+ 68c:	008b8913          	addi	s2,s7,8
+ 690:	4681                	li	a3,0
+ 692:	4641                	li	a2,16
+ 694:	000ba583          	lw	a1,0(s7)
+ 698:	855a                	mv	a0,s6
+ 69a:	d79ff0ef          	jal	412 <printint>
+ 69e:	2485                	addiw	s1,s1,1
+ 6a0:	8bca                	mv	s7,s2
+ 6a2:	4981                	li	s3,0
+ 6a4:	b585                	j	504 <vprintf+0x4a>
+ 6a6:	e06a                	sd	s10,0(sp)
+ 6a8:	008b8d13          	addi	s10,s7,8
+ 6ac:	000bb983          	ld	s3,0(s7)
+ 6b0:	03000593          	li	a1,48
+ 6b4:	855a                	mv	a0,s6
+ 6b6:	d3fff0ef          	jal	3f4 <putc>
+ 6ba:	07800593          	li	a1,120
+ 6be:	855a                	mv	a0,s6
+ 6c0:	d35ff0ef          	jal	3f4 <putc>
+ 6c4:	4941                	li	s2,16
+ 6c6:	00000b97          	auipc	s7,0x0
+ 6ca:	2aab8b93          	addi	s7,s7,682 # 970 <digits>
+ 6ce:	03c9d793          	srli	a5,s3,0x3c
+ 6d2:	97de                	add	a5,a5,s7
+ 6d4:	0007c583          	lbu	a1,0(a5)
+ 6d8:	855a                	mv	a0,s6
+ 6da:	d1bff0ef          	jal	3f4 <putc>
+ 6de:	0992                	slli	s3,s3,0x4
+ 6e0:	397d                	addiw	s2,s2,-1
+ 6e2:	fe0916e3          	bnez	s2,6ce <vprintf+0x214>
+ 6e6:	8bea                	mv	s7,s10
+ 6e8:	4981                	li	s3,0
+ 6ea:	6d02                	ld	s10,0(sp)
+ 6ec:	bd21                	j	504 <vprintf+0x4a>
+ 6ee:	008b8993          	addi	s3,s7,8
+ 6f2:	000bb903          	ld	s2,0(s7)
+ 6f6:	00090f63          	beqz	s2,714 <vprintf+0x25a>
+ 6fa:	00094583          	lbu	a1,0(s2)
+ 6fe:	c195                	beqz	a1,722 <vprintf+0x268>
+ 700:	855a                	mv	a0,s6
+ 702:	cf3ff0ef          	jal	3f4 <putc>
+ 706:	0905                	addi	s2,s2,1
+ 708:	00094583          	lbu	a1,0(s2)
+ 70c:	f9f5                	bnez	a1,700 <vprintf+0x246>
+ 70e:	8bce                	mv	s7,s3
+ 710:	4981                	li	s3,0
+ 712:	bbcd                	j	504 <vprintf+0x4a>
+ 714:	00000917          	auipc	s2,0x0
+ 718:	25490913          	addi	s2,s2,596 # 968 <malloc+0x148>
+ 71c:	02800593          	li	a1,40
+ 720:	b7c5                	j	700 <vprintf+0x246>
+ 722:	8bce                	mv	s7,s3
+ 724:	4981                	li	s3,0
+ 726:	bbf9                	j	504 <vprintf+0x4a>
+ 728:	64a6                	ld	s1,72(sp)
+ 72a:	79e2                	ld	s3,56(sp)
+ 72c:	7a42                	ld	s4,48(sp)
+ 72e:	7aa2                	ld	s5,40(sp)
+ 730:	7b02                	ld	s6,32(sp)
+ 732:	6be2                	ld	s7,24(sp)
+ 734:	6c42                	ld	s8,16(sp)
+ 736:	6ca2                	ld	s9,8(sp)
+ 738:	60e6                	ld	ra,88(sp)
+ 73a:	6446                	ld	s0,80(sp)
+ 73c:	6906                	ld	s2,64(sp)
+ 73e:	6125                	addi	sp,sp,96
+ 740:	8082                	ret
+
+0000000000000742 <fprintf>:
+ 742:	715d                	addi	sp,sp,-80
+ 744:	ec06                	sd	ra,24(sp)
+ 746:	e822                	sd	s0,16(sp)
+ 748:	1000                	addi	s0,sp,32
+ 74a:	e010                	sd	a2,0(s0)
+ 74c:	e414                	sd	a3,8(s0)
+ 74e:	e818                	sd	a4,16(s0)
+ 750:	ec1c                	sd	a5,24(s0)
+ 752:	03043023          	sd	a6,32(s0)
+ 756:	03143423          	sd	a7,40(s0)
+ 75a:	fe843423          	sd	s0,-24(s0)
+ 75e:	8622                	mv	a2,s0
+ 760:	d5bff0ef          	jal	4ba <vprintf>
+ 764:	60e2                	ld	ra,24(sp)
+ 766:	6442                	ld	s0,16(sp)
+ 768:	6161                	addi	sp,sp,80
+ 76a:	8082                	ret
+
+000000000000076c <printf>:
+ 76c:	711d                	addi	sp,sp,-96
+ 76e:	ec06                	sd	ra,24(sp)
+ 770:	e822                	sd	s0,16(sp)
+ 772:	1000                	addi	s0,sp,32
+ 774:	e40c                	sd	a1,8(s0)
+ 776:	e810                	sd	a2,16(s0)
+ 778:	ec14                	sd	a3,24(s0)
+ 77a:	f018                	sd	a4,32(s0)
+ 77c:	f41c                	sd	a5,40(s0)
+ 77e:	03043823          	sd	a6,48(s0)
+ 782:	03143c23          	sd	a7,56(s0)
+ 786:	00840613          	addi	a2,s0,8
+ 78a:	fec43423          	sd	a2,-24(s0)
+ 78e:	85aa                	mv	a1,a0
+ 790:	4505                	li	a0,1
+ 792:	d29ff0ef          	jal	4ba <vprintf>
+ 796:	60e2                	ld	ra,24(sp)
+ 798:	6442                	ld	s0,16(sp)
+ 79a:	6125                	addi	sp,sp,96
+ 79c:	8082                	ret
+
+000000000000079e <free>:
+ 79e:	1141                	addi	sp,sp,-16
+ 7a0:	e422                	sd	s0,8(sp)
+ 7a2:	0800                	addi	s0,sp,16
+ 7a4:	ff050693          	addi	a3,a0,-16
+ 7a8:	00001797          	auipc	a5,0x1
+ 7ac:	8587b783          	ld	a5,-1960(a5) # 1000 <freep>
+ 7b0:	a02d                	j	7da <free+0x3c>
+ 7b2:	4618                	lw	a4,8(a2)
+ 7b4:	9f2d                	addw	a4,a4,a1
+ 7b6:	fee52c23          	sw	a4,-8(a0)
+ 7ba:	6398                	ld	a4,0(a5)
+ 7bc:	6310                	ld	a2,0(a4)
+ 7be:	a83d                	j	7fc <free+0x5e>
+ 7c0:	ff852703          	lw	a4,-8(a0)
+ 7c4:	9f31                	addw	a4,a4,a2
+ 7c6:	c798                	sw	a4,8(a5)
+ 7c8:	ff053683          	ld	a3,-16(a0)
+ 7cc:	a091                	j	810 <free+0x72>
+ 7ce:	6398                	ld	a4,0(a5)
+ 7d0:	00e7e463          	bltu	a5,a4,7d8 <free+0x3a>
+ 7d4:	00e6ea63          	bltu	a3,a4,7e8 <free+0x4a>
+ 7d8:	87ba                	mv	a5,a4
+ 7da:	fed7fae3          	bgeu	a5,a3,7ce <free+0x30>
+ 7de:	6398                	ld	a4,0(a5)
+ 7e0:	00e6e463          	bltu	a3,a4,7e8 <free+0x4a>
+ 7e4:	fee7eae3          	bltu	a5,a4,7d8 <free+0x3a>
+ 7e8:	ff852583          	lw	a1,-8(a0)
+ 7ec:	6390                	ld	a2,0(a5)
+ 7ee:	02059813          	slli	a6,a1,0x20
+ 7f2:	01c85713          	srli	a4,a6,0x1c
+ 7f6:	9736                	add	a4,a4,a3
+ 7f8:	fae60de3          	beq	a2,a4,7b2 <free+0x14>
+ 7fc:	fec53823          	sd	a2,-16(a0)
+ 800:	4790                	lw	a2,8(a5)
+ 802:	02061593          	slli	a1,a2,0x20
+ 806:	01c5d713          	srli	a4,a1,0x1c
+ 80a:	973e                	add	a4,a4,a5
+ 80c:	fae68ae3          	beq	a3,a4,7c0 <free+0x22>
+ 810:	e394                	sd	a3,0(a5)
+ 812:	00000717          	auipc	a4,0x0
+ 816:	7ef73723          	sd	a5,2030(a4) # 1000 <freep>
+ 81a:	6422                	ld	s0,8(sp)
+ 81c:	0141                	addi	sp,sp,16
+ 81e:	8082                	ret
+
+0000000000000820 <malloc>:
+ 820:	7139                	addi	sp,sp,-64
+ 822:	fc06                	sd	ra,56(sp)
+ 824:	f822                	sd	s0,48(sp)
+ 826:	f426                	sd	s1,40(sp)
+ 828:	ec4e                	sd	s3,24(sp)
+ 82a:	0080                	addi	s0,sp,64
+ 82c:	02051493          	slli	s1,a0,0x20
+ 830:	9081                	srli	s1,s1,0x20
+ 832:	04bd                	addi	s1,s1,15
+ 834:	8091                	srli	s1,s1,0x4
+ 836:	0014899b          	addiw	s3,s1,1
+ 83a:	0485                	addi	s1,s1,1
+ 83c:	00000517          	auipc	a0,0x0
+ 840:	7c453503          	ld	a0,1988(a0) # 1000 <freep>
+ 844:	c915                	beqz	a0,878 <malloc+0x58>
+ 846:	611c                	ld	a5,0(a0)
+ 848:	4798                	lw	a4,8(a5)
+ 84a:	08977a63          	bgeu	a4,s1,8de <malloc+0xbe>
+ 84e:	f04a                	sd	s2,32(sp)
+ 850:	e852                	sd	s4,16(sp)
+ 852:	e456                	sd	s5,8(sp)
+ 854:	e05a                	sd	s6,0(sp)
+ 856:	8a4e                	mv	s4,s3
+ 858:	0009871b          	sext.w	a4,s3
+ 85c:	6685                	lui	a3,0x1
+ 85e:	00d77363          	bgeu	a4,a3,864 <malloc+0x44>
+ 862:	6a05                	lui	s4,0x1
+ 864:	000a0b1b          	sext.w	s6,s4
+ 868:	004a1a1b          	slliw	s4,s4,0x4
+ 86c:	00000917          	auipc	s2,0x0
+ 870:	79490913          	addi	s2,s2,1940 # 1000 <freep>
+ 874:	5afd                	li	s5,-1
+ 876:	a081                	j	8b6 <malloc+0x96>
+ 878:	f04a                	sd	s2,32(sp)
+ 87a:	e852                	sd	s4,16(sp)
+ 87c:	e456                	sd	s5,8(sp)
+ 87e:	e05a                	sd	s6,0(sp)
+ 880:	00001797          	auipc	a5,0x1
+ 884:	99078793          	addi	a5,a5,-1648 # 1210 <base>
+ 888:	00000717          	auipc	a4,0x0
+ 88c:	76f73c23          	sd	a5,1912(a4) # 1000 <freep>
+ 890:	e39c                	sd	a5,0(a5)
+ 892:	0007a423          	sw	zero,8(a5)
+ 896:	b7c1                	j	856 <malloc+0x36>
+ 898:	6398                	ld	a4,0(a5)
+ 89a:	e118                	sd	a4,0(a0)
+ 89c:	a8a9                	j	8f6 <malloc+0xd6>
+ 89e:	01652423          	sw	s6,8(a0)
+ 8a2:	0541                	addi	a0,a0,16
+ 8a4:	efbff0ef          	jal	79e <free>
+ 8a8:	00093503          	ld	a0,0(s2)
+ 8ac:	c12d                	beqz	a0,90e <malloc+0xee>
+ 8ae:	611c                	ld	a5,0(a0)
+ 8b0:	4798                	lw	a4,8(a5)
+ 8b2:	02977263          	bgeu	a4,s1,8d6 <malloc+0xb6>
+ 8b6:	00093703          	ld	a4,0(s2)
+ 8ba:	853e                	mv	a0,a5
+ 8bc:	fef719e3          	bne	a4,a5,8ae <malloc+0x8e>
+ 8c0:	8552                	mv	a0,s4
+ 8c2:	b1bff0ef          	jal	3dc <sbrk>
+ 8c6:	fd551ce3          	bne	a0,s5,89e <malloc+0x7e>
+ 8ca:	4501                	li	a0,0
+ 8cc:	7902                	ld	s2,32(sp)
+ 8ce:	6a42                	ld	s4,16(sp)
+ 8d0:	6aa2                	ld	s5,8(sp)
+ 8d2:	6b02                	ld	s6,0(sp)
+ 8d4:	a03d                	j	902 <malloc+0xe2>
+ 8d6:	7902                	ld	s2,32(sp)
+ 8d8:	6a42                	ld	s4,16(sp)
+ 8da:	6aa2                	ld	s5,8(sp)
+ 8dc:	6b02                	ld	s6,0(sp)
+ 8de:	fae48de3          	beq	s1,a4,898 <malloc+0x78>
+ 8e2:	4137073b          	subw	a4,a4,s3
+ 8e6:	c798                	sw	a4,8(a5)
+ 8e8:	02071693          	slli	a3,a4,0x20
+ 8ec:	01c6d713          	srli	a4,a3,0x1c
+ 8f0:	97ba                	add	a5,a5,a4
+ 8f2:	0137a423          	sw	s3,8(a5)
+ 8f6:	00000717          	auipc	a4,0x0
+ 8fa:	70a73523          	sd	a0,1802(a4) # 1000 <freep>
+ 8fe:	01078513          	addi	a0,a5,16
+ 902:	70e2                	ld	ra,56(sp)
+ 904:	7442                	ld	s0,48(sp)
+ 906:	74a2                	ld	s1,40(sp)
+ 908:	69e2                	ld	s3,24(sp)
+ 90a:	6121                	addi	sp,sp,64
+ 90c:	8082                	ret
+ 90e:	7902                	ld	s2,32(sp)
+ 910:	6a42                	ld	s4,16(sp)
+ 912:	6aa2                	ld	s5,8(sp)
+ 914:	6b02                	ld	s6,0(sp)
+ 916:	b7f5                	j	902 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/cat.c b/xv6-labs-2024/user/cat.c
new file mode 100644
index 0000000..6d873a9
--- /dev/null
+++ b/xv6-labs-2024/user/cat.c
@@ -0,0 +1,43 @@
+#include "kernel/types.h"
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+char buf[512];
+
+void
+cat(int fd)
+{
+  int n;
+
+  while((n = read(fd, buf, sizeof(buf))) > 0) {
+    if (write(1, buf, n) != n) {
+      fprintf(2, "cat: write error\n");
+      exit(1);
+    }
+  }
+  if(n < 0){
+    fprintf(2, "cat: read error\n");
+    exit(1);
+  }
+}
+
+int
+main(int argc, char *argv[])
+{
+  int fd, i;
+
+  if(argc <= 1){
+    cat(0);
+    exit(0);
+  }
+
+  for(i = 1; i < argc; i++){
+    if((fd = open(argv[i], O_RDONLY)) < 0){
+      fprintf(2, "cat: cannot open %s\n", argv[i]);
+      exit(1);
+    }
+    cat(fd);
+    close(fd);
+  }
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/cat.d b/xv6-labs-2024/user/cat.d
new file mode 100644
index 0000000..7125d60
--- /dev/null
+++ b/xv6-labs-2024/user/cat.d
@@ -0,0 +1,2 @@
+user/cat.o: user/cat.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/fcntl.h user/user.h
diff --git a/xv6-labs-2024/user/cat.o b/xv6-labs-2024/user/cat.o
new file mode 100644
index 0000000..eec5865
Binary files /dev/null and b/xv6-labs-2024/user/cat.o differ
diff --git a/xv6-labs-2024/user/cat.sym b/xv6-labs-2024/user/cat.sym
new file mode 100644
index 0000000..47173aa
--- /dev/null
+++ b/xv6-labs-2024/user/cat.sym
@@ -0,0 +1,65 @@
+0000000000000000 .text
+0000000000000918 .rodata
+0000000000000988 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 cat.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+00000000000003f4 putc
+0000000000000412 printint
+0000000000000970 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001210 base
+00000000000000fc strcpy
+000000000000076c printf
+00000000000002a6 memmove
+000000000000039c mknod
+00000000000001b4 gets
+00000000000003d4 getpid
+0000000000000338 memcpy
+0000000000000000 cat
+0000000000000820 malloc
+00000000000003e4 sleep
+0000000000000364 pipe
+0000000000000374 write
+00000000000003ac fstat
+0000000000000742 fprintf
+0000000000000384 kill
+00000000000004ba vprintf
+00000000000003c4 chdir
+000000000000038c exec
+000000000000035c wait
+000000000000036c read
+00000000000003a4 unlink
+00000000000002fe memcmp
+000000000000034c fork
+00000000000003dc sbrk
+00000000000003ec uptime
+000000000000016e memset
+0000000000000072 main
+0000000000000118 strcmp
+00000000000003cc dup
+0000000000001010 buf
+0000000000000224 stat
+00000000000003b4 link
+0000000000000354 exit
+00000000000000ea start
+000000000000025e atoi
+0000000000000144 strlen
+0000000000000394 open
+0000000000000190 strchr
+00000000000003bc mkdir
+000000000000037c close
+000000000000079e free
diff --git a/xv6-labs-2024/user/echo.asm b/xv6-labs-2024/user/echo.asm
new file mode 100644
index 0000000..545802c
--- /dev/null
+++ b/xv6-labs-2024/user/echo.asm
@@ -0,0 +1,1072 @@
+
+user/_echo:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	7139                	addi	sp,sp,-64
+   2:	fc06                	sd	ra,56(sp)
+   4:	f822                	sd	s0,48(sp)
+   6:	f426                	sd	s1,40(sp)
+   8:	f04a                	sd	s2,32(sp)
+   a:	ec4e                	sd	s3,24(sp)
+   c:	e852                	sd	s4,16(sp)
+   e:	e456                	sd	s5,8(sp)
+  10:	0080                	addi	s0,sp,64
+  12:	4785                	li	a5,1
+  14:	06a7d063          	bge	a5,a0,74 <main+0x74>
+  18:	00858493          	addi	s1,a1,8
+  1c:	3579                	addiw	a0,a0,-2
+  1e:	02051793          	slli	a5,a0,0x20
+  22:	01d7d513          	srli	a0,a5,0x1d
+  26:	00a48a33          	add	s4,s1,a0
+  2a:	05c1                	addi	a1,a1,16
+  2c:	00a589b3          	add	s3,a1,a0
+  30:	00001a97          	auipc	s5,0x1
+  34:	880a8a93          	addi	s5,s5,-1920 # 8b0 <malloc+0x100>
+  38:	a809                	j	4a <main+0x4a>
+  3a:	4605                	li	a2,1
+  3c:	85d6                	mv	a1,s5
+  3e:	4505                	li	a0,1
+  40:	2c4000ef          	jal	304 <write>
+  44:	04a1                	addi	s1,s1,8
+  46:	03348763          	beq	s1,s3,74 <main+0x74>
+  4a:	0004b903          	ld	s2,0(s1)
+  4e:	854a                	mv	a0,s2
+  50:	084000ef          	jal	d4 <strlen>
+  54:	0005061b          	sext.w	a2,a0
+  58:	85ca                	mv	a1,s2
+  5a:	4505                	li	a0,1
+  5c:	2a8000ef          	jal	304 <write>
+  60:	fd449de3          	bne	s1,s4,3a <main+0x3a>
+  64:	4605                	li	a2,1
+  66:	00001597          	auipc	a1,0x1
+  6a:	85258593          	addi	a1,a1,-1966 # 8b8 <malloc+0x108>
+  6e:	4505                	li	a0,1
+  70:	294000ef          	jal	304 <write>
+  74:	4501                	li	a0,0
+  76:	26e000ef          	jal	2e4 <exit>
+
+000000000000007a <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  7a:	1141                	addi	sp,sp,-16
+  7c:	e406                	sd	ra,8(sp)
+  7e:	e022                	sd	s0,0(sp)
+  80:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  82:	f7fff0ef          	jal	0 <main>
+  exit(0);
+  86:	4501                	li	a0,0
+  88:	25c000ef          	jal	2e4 <exit>
+
+000000000000008c <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  8c:	1141                	addi	sp,sp,-16
+  8e:	e422                	sd	s0,8(sp)
+  90:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  92:	87aa                	mv	a5,a0
+  94:	0585                	addi	a1,a1,1
+  96:	0785                	addi	a5,a5,1
+  98:	fff5c703          	lbu	a4,-1(a1)
+  9c:	fee78fa3          	sb	a4,-1(a5)
+  a0:	fb75                	bnez	a4,94 <strcpy+0x8>
+    ;
+  return os;
+}
+  a2:	6422                	ld	s0,8(sp)
+  a4:	0141                	addi	sp,sp,16
+  a6:	8082                	ret
+
+00000000000000a8 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  a8:	1141                	addi	sp,sp,-16
+  aa:	e422                	sd	s0,8(sp)
+  ac:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  ae:	00054783          	lbu	a5,0(a0)
+  b2:	cb91                	beqz	a5,c6 <strcmp+0x1e>
+  b4:	0005c703          	lbu	a4,0(a1)
+  b8:	00f71763          	bne	a4,a5,c6 <strcmp+0x1e>
+    p++, q++;
+  bc:	0505                	addi	a0,a0,1
+  be:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  c0:	00054783          	lbu	a5,0(a0)
+  c4:	fbe5                	bnez	a5,b4 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  c6:	0005c503          	lbu	a0,0(a1)
+}
+  ca:	40a7853b          	subw	a0,a5,a0
+  ce:	6422                	ld	s0,8(sp)
+  d0:	0141                	addi	sp,sp,16
+  d2:	8082                	ret
+
+00000000000000d4 <strlen>:
+
+uint
+strlen(const char *s)
+{
+  d4:	1141                	addi	sp,sp,-16
+  d6:	e422                	sd	s0,8(sp)
+  d8:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  da:	00054783          	lbu	a5,0(a0)
+  de:	cf91                	beqz	a5,fa <strlen+0x26>
+  e0:	0505                	addi	a0,a0,1
+  e2:	87aa                	mv	a5,a0
+  e4:	86be                	mv	a3,a5
+  e6:	0785                	addi	a5,a5,1
+  e8:	fff7c703          	lbu	a4,-1(a5)
+  ec:	ff65                	bnez	a4,e4 <strlen+0x10>
+  ee:	40a6853b          	subw	a0,a3,a0
+  f2:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  f4:	6422                	ld	s0,8(sp)
+  f6:	0141                	addi	sp,sp,16
+  f8:	8082                	ret
+  for(n = 0; s[n]; n++)
+  fa:	4501                	li	a0,0
+  fc:	bfe5                	j	f4 <strlen+0x20>
+
+00000000000000fe <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  fe:	1141                	addi	sp,sp,-16
+ 100:	e422                	sd	s0,8(sp)
+ 102:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 104:	ca19                	beqz	a2,11a <memset+0x1c>
+ 106:	87aa                	mv	a5,a0
+ 108:	1602                	slli	a2,a2,0x20
+ 10a:	9201                	srli	a2,a2,0x20
+ 10c:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 110:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 114:	0785                	addi	a5,a5,1
+ 116:	fee79de3          	bne	a5,a4,110 <memset+0x12>
+  }
+  return dst;
+}
+ 11a:	6422                	ld	s0,8(sp)
+ 11c:	0141                	addi	sp,sp,16
+ 11e:	8082                	ret
+
+0000000000000120 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 120:	1141                	addi	sp,sp,-16
+ 122:	e422                	sd	s0,8(sp)
+ 124:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 126:	00054783          	lbu	a5,0(a0)
+ 12a:	cb99                	beqz	a5,140 <strchr+0x20>
+    if(*s == c)
+ 12c:	00f58763          	beq	a1,a5,13a <strchr+0x1a>
+  for(; *s; s++)
+ 130:	0505                	addi	a0,a0,1
+ 132:	00054783          	lbu	a5,0(a0)
+ 136:	fbfd                	bnez	a5,12c <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 138:	4501                	li	a0,0
+}
+ 13a:	6422                	ld	s0,8(sp)
+ 13c:	0141                	addi	sp,sp,16
+ 13e:	8082                	ret
+  return 0;
+ 140:	4501                	li	a0,0
+ 142:	bfe5                	j	13a <strchr+0x1a>
+
+0000000000000144 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 144:	711d                	addi	sp,sp,-96
+ 146:	ec86                	sd	ra,88(sp)
+ 148:	e8a2                	sd	s0,80(sp)
+ 14a:	e4a6                	sd	s1,72(sp)
+ 14c:	e0ca                	sd	s2,64(sp)
+ 14e:	fc4e                	sd	s3,56(sp)
+ 150:	f852                	sd	s4,48(sp)
+ 152:	f456                	sd	s5,40(sp)
+ 154:	f05a                	sd	s6,32(sp)
+ 156:	ec5e                	sd	s7,24(sp)
+ 158:	1080                	addi	s0,sp,96
+ 15a:	8baa                	mv	s7,a0
+ 15c:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 15e:	892a                	mv	s2,a0
+ 160:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 162:	4aa9                	li	s5,10
+ 164:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 166:	89a6                	mv	s3,s1
+ 168:	2485                	addiw	s1,s1,1
+ 16a:	0344d663          	bge	s1,s4,196 <gets+0x52>
+    cc = read(0, &c, 1);
+ 16e:	4605                	li	a2,1
+ 170:	faf40593          	addi	a1,s0,-81
+ 174:	4501                	li	a0,0
+ 176:	186000ef          	jal	2fc <read>
+    if(cc < 1)
+ 17a:	00a05e63          	blez	a0,196 <gets+0x52>
+    buf[i++] = c;
+ 17e:	faf44783          	lbu	a5,-81(s0)
+ 182:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 186:	01578763          	beq	a5,s5,194 <gets+0x50>
+ 18a:	0905                	addi	s2,s2,1
+ 18c:	fd679de3          	bne	a5,s6,166 <gets+0x22>
+    buf[i++] = c;
+ 190:	89a6                	mv	s3,s1
+ 192:	a011                	j	196 <gets+0x52>
+ 194:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 196:	99de                	add	s3,s3,s7
+ 198:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 19c:	855e                	mv	a0,s7
+ 19e:	60e6                	ld	ra,88(sp)
+ 1a0:	6446                	ld	s0,80(sp)
+ 1a2:	64a6                	ld	s1,72(sp)
+ 1a4:	6906                	ld	s2,64(sp)
+ 1a6:	79e2                	ld	s3,56(sp)
+ 1a8:	7a42                	ld	s4,48(sp)
+ 1aa:	7aa2                	ld	s5,40(sp)
+ 1ac:	7b02                	ld	s6,32(sp)
+ 1ae:	6be2                	ld	s7,24(sp)
+ 1b0:	6125                	addi	sp,sp,96
+ 1b2:	8082                	ret
+
+00000000000001b4 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 1b4:	1101                	addi	sp,sp,-32
+ 1b6:	ec06                	sd	ra,24(sp)
+ 1b8:	e822                	sd	s0,16(sp)
+ 1ba:	e04a                	sd	s2,0(sp)
+ 1bc:	1000                	addi	s0,sp,32
+ 1be:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 1c0:	4581                	li	a1,0
+ 1c2:	162000ef          	jal	324 <open>
+  if(fd < 0)
+ 1c6:	02054263          	bltz	a0,1ea <stat+0x36>
+ 1ca:	e426                	sd	s1,8(sp)
+ 1cc:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 1ce:	85ca                	mv	a1,s2
+ 1d0:	16c000ef          	jal	33c <fstat>
+ 1d4:	892a                	mv	s2,a0
+  close(fd);
+ 1d6:	8526                	mv	a0,s1
+ 1d8:	134000ef          	jal	30c <close>
+  return r;
+ 1dc:	64a2                	ld	s1,8(sp)
+}
+ 1de:	854a                	mv	a0,s2
+ 1e0:	60e2                	ld	ra,24(sp)
+ 1e2:	6442                	ld	s0,16(sp)
+ 1e4:	6902                	ld	s2,0(sp)
+ 1e6:	6105                	addi	sp,sp,32
+ 1e8:	8082                	ret
+    return -1;
+ 1ea:	597d                	li	s2,-1
+ 1ec:	bfcd                	j	1de <stat+0x2a>
+
+00000000000001ee <atoi>:
+
+int
+atoi(const char *s)
+{
+ 1ee:	1141                	addi	sp,sp,-16
+ 1f0:	e422                	sd	s0,8(sp)
+ 1f2:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 1f4:	00054683          	lbu	a3,0(a0)
+ 1f8:	fd06879b          	addiw	a5,a3,-48
+ 1fc:	0ff7f793          	zext.b	a5,a5
+ 200:	4625                	li	a2,9
+ 202:	02f66863          	bltu	a2,a5,232 <atoi+0x44>
+ 206:	872a                	mv	a4,a0
+  n = 0;
+ 208:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 20a:	0705                	addi	a4,a4,1
+ 20c:	0025179b          	slliw	a5,a0,0x2
+ 210:	9fa9                	addw	a5,a5,a0
+ 212:	0017979b          	slliw	a5,a5,0x1
+ 216:	9fb5                	addw	a5,a5,a3
+ 218:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 21c:	00074683          	lbu	a3,0(a4)
+ 220:	fd06879b          	addiw	a5,a3,-48
+ 224:	0ff7f793          	zext.b	a5,a5
+ 228:	fef671e3          	bgeu	a2,a5,20a <atoi+0x1c>
+  return n;
+}
+ 22c:	6422                	ld	s0,8(sp)
+ 22e:	0141                	addi	sp,sp,16
+ 230:	8082                	ret
+  n = 0;
+ 232:	4501                	li	a0,0
+ 234:	bfe5                	j	22c <atoi+0x3e>
+
+0000000000000236 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 236:	1141                	addi	sp,sp,-16
+ 238:	e422                	sd	s0,8(sp)
+ 23a:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 23c:	02b57463          	bgeu	a0,a1,264 <memmove+0x2e>
+    while(n-- > 0)
+ 240:	00c05f63          	blez	a2,25e <memmove+0x28>
+ 244:	1602                	slli	a2,a2,0x20
+ 246:	9201                	srli	a2,a2,0x20
+ 248:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 24c:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 24e:	0585                	addi	a1,a1,1
+ 250:	0705                	addi	a4,a4,1
+ 252:	fff5c683          	lbu	a3,-1(a1)
+ 256:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 25a:	fef71ae3          	bne	a4,a5,24e <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 25e:	6422                	ld	s0,8(sp)
+ 260:	0141                	addi	sp,sp,16
+ 262:	8082                	ret
+    dst += n;
+ 264:	00c50733          	add	a4,a0,a2
+    src += n;
+ 268:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 26a:	fec05ae3          	blez	a2,25e <memmove+0x28>
+ 26e:	fff6079b          	addiw	a5,a2,-1
+ 272:	1782                	slli	a5,a5,0x20
+ 274:	9381                	srli	a5,a5,0x20
+ 276:	fff7c793          	not	a5,a5
+ 27a:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 27c:	15fd                	addi	a1,a1,-1
+ 27e:	177d                	addi	a4,a4,-1
+ 280:	0005c683          	lbu	a3,0(a1)
+ 284:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 288:	fee79ae3          	bne	a5,a4,27c <memmove+0x46>
+ 28c:	bfc9                	j	25e <memmove+0x28>
+
+000000000000028e <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 28e:	1141                	addi	sp,sp,-16
+ 290:	e422                	sd	s0,8(sp)
+ 292:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 294:	ca05                	beqz	a2,2c4 <memcmp+0x36>
+ 296:	fff6069b          	addiw	a3,a2,-1
+ 29a:	1682                	slli	a3,a3,0x20
+ 29c:	9281                	srli	a3,a3,0x20
+ 29e:	0685                	addi	a3,a3,1
+ 2a0:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 2a2:	00054783          	lbu	a5,0(a0)
+ 2a6:	0005c703          	lbu	a4,0(a1)
+ 2aa:	00e79863          	bne	a5,a4,2ba <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 2ae:	0505                	addi	a0,a0,1
+    p2++;
+ 2b0:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 2b2:	fed518e3          	bne	a0,a3,2a2 <memcmp+0x14>
+  }
+  return 0;
+ 2b6:	4501                	li	a0,0
+ 2b8:	a019                	j	2be <memcmp+0x30>
+      return *p1 - *p2;
+ 2ba:	40e7853b          	subw	a0,a5,a4
+}
+ 2be:	6422                	ld	s0,8(sp)
+ 2c0:	0141                	addi	sp,sp,16
+ 2c2:	8082                	ret
+  return 0;
+ 2c4:	4501                	li	a0,0
+ 2c6:	bfe5                	j	2be <memcmp+0x30>
+
+00000000000002c8 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 2c8:	1141                	addi	sp,sp,-16
+ 2ca:	e406                	sd	ra,8(sp)
+ 2cc:	e022                	sd	s0,0(sp)
+ 2ce:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 2d0:	f67ff0ef          	jal	236 <memmove>
+}
+ 2d4:	60a2                	ld	ra,8(sp)
+ 2d6:	6402                	ld	s0,0(sp)
+ 2d8:	0141                	addi	sp,sp,16
+ 2da:	8082                	ret
+
+00000000000002dc <fork>:
+ 2dc:	4885                	li	a7,1
+ 2de:	00000073          	ecall
+ 2e2:	8082                	ret
+
+00000000000002e4 <exit>:
+ 2e4:	4889                	li	a7,2
+ 2e6:	00000073          	ecall
+ 2ea:	8082                	ret
+
+00000000000002ec <wait>:
+ 2ec:	488d                	li	a7,3
+ 2ee:	00000073          	ecall
+ 2f2:	8082                	ret
+
+00000000000002f4 <pipe>:
+ 2f4:	4891                	li	a7,4
+ 2f6:	00000073          	ecall
+ 2fa:	8082                	ret
+
+00000000000002fc <read>:
+ 2fc:	4895                	li	a7,5
+ 2fe:	00000073          	ecall
+ 302:	8082                	ret
+
+0000000000000304 <write>:
+ 304:	48c1                	li	a7,16
+ 306:	00000073          	ecall
+ 30a:	8082                	ret
+
+000000000000030c <close>:
+ 30c:	48d5                	li	a7,21
+ 30e:	00000073          	ecall
+ 312:	8082                	ret
+
+0000000000000314 <kill>:
+ 314:	4899                	li	a7,6
+ 316:	00000073          	ecall
+ 31a:	8082                	ret
+
+000000000000031c <exec>:
+ 31c:	489d                	li	a7,7
+ 31e:	00000073          	ecall
+ 322:	8082                	ret
+
+0000000000000324 <open>:
+ 324:	48bd                	li	a7,15
+ 326:	00000073          	ecall
+ 32a:	8082                	ret
+
+000000000000032c <mknod>:
+ 32c:	48c5                	li	a7,17
+ 32e:	00000073          	ecall
+ 332:	8082                	ret
+
+0000000000000334 <unlink>:
+ 334:	48c9                	li	a7,18
+ 336:	00000073          	ecall
+ 33a:	8082                	ret
+
+000000000000033c <fstat>:
+ 33c:	48a1                	li	a7,8
+ 33e:	00000073          	ecall
+ 342:	8082                	ret
+
+0000000000000344 <link>:
+ 344:	48cd                	li	a7,19
+ 346:	00000073          	ecall
+ 34a:	8082                	ret
+
+000000000000034c <mkdir>:
+ 34c:	48d1                	li	a7,20
+ 34e:	00000073          	ecall
+ 352:	8082                	ret
+
+0000000000000354 <chdir>:
+ 354:	48a5                	li	a7,9
+ 356:	00000073          	ecall
+ 35a:	8082                	ret
+
+000000000000035c <dup>:
+ 35c:	48a9                	li	a7,10
+ 35e:	00000073          	ecall
+ 362:	8082                	ret
+
+0000000000000364 <getpid>:
+ 364:	48ad                	li	a7,11
+ 366:	00000073          	ecall
+ 36a:	8082                	ret
+
+000000000000036c <sbrk>:
+ 36c:	48b1                	li	a7,12
+ 36e:	00000073          	ecall
+ 372:	8082                	ret
+
+0000000000000374 <sleep>:
+ 374:	48b5                	li	a7,13
+ 376:	00000073          	ecall
+ 37a:	8082                	ret
+
+000000000000037c <uptime>:
+ 37c:	48b9                	li	a7,14
+ 37e:	00000073          	ecall
+ 382:	8082                	ret
+
+0000000000000384 <putc>:
+ 384:	1101                	addi	sp,sp,-32
+ 386:	ec06                	sd	ra,24(sp)
+ 388:	e822                	sd	s0,16(sp)
+ 38a:	1000                	addi	s0,sp,32
+ 38c:	feb407a3          	sb	a1,-17(s0)
+ 390:	4605                	li	a2,1
+ 392:	fef40593          	addi	a1,s0,-17
+ 396:	f6fff0ef          	jal	304 <write>
+ 39a:	60e2                	ld	ra,24(sp)
+ 39c:	6442                	ld	s0,16(sp)
+ 39e:	6105                	addi	sp,sp,32
+ 3a0:	8082                	ret
+
+00000000000003a2 <printint>:
+ 3a2:	7139                	addi	sp,sp,-64
+ 3a4:	fc06                	sd	ra,56(sp)
+ 3a6:	f822                	sd	s0,48(sp)
+ 3a8:	f426                	sd	s1,40(sp)
+ 3aa:	0080                	addi	s0,sp,64
+ 3ac:	84aa                	mv	s1,a0
+ 3ae:	c299                	beqz	a3,3b4 <printint+0x12>
+ 3b0:	0805c963          	bltz	a1,442 <printint+0xa0>
+ 3b4:	2581                	sext.w	a1,a1
+ 3b6:	4881                	li	a7,0
+ 3b8:	fc040693          	addi	a3,s0,-64
+ 3bc:	4701                	li	a4,0
+ 3be:	2601                	sext.w	a2,a2
+ 3c0:	00000517          	auipc	a0,0x0
+ 3c4:	50850513          	addi	a0,a0,1288 # 8c8 <digits>
+ 3c8:	883a                	mv	a6,a4
+ 3ca:	2705                	addiw	a4,a4,1
+ 3cc:	02c5f7bb          	remuw	a5,a1,a2
+ 3d0:	1782                	slli	a5,a5,0x20
+ 3d2:	9381                	srli	a5,a5,0x20
+ 3d4:	97aa                	add	a5,a5,a0
+ 3d6:	0007c783          	lbu	a5,0(a5)
+ 3da:	00f68023          	sb	a5,0(a3)
+ 3de:	0005879b          	sext.w	a5,a1
+ 3e2:	02c5d5bb          	divuw	a1,a1,a2
+ 3e6:	0685                	addi	a3,a3,1
+ 3e8:	fec7f0e3          	bgeu	a5,a2,3c8 <printint+0x26>
+ 3ec:	00088c63          	beqz	a7,404 <printint+0x62>
+ 3f0:	fd070793          	addi	a5,a4,-48
+ 3f4:	00878733          	add	a4,a5,s0
+ 3f8:	02d00793          	li	a5,45
+ 3fc:	fef70823          	sb	a5,-16(a4)
+ 400:	0028071b          	addiw	a4,a6,2
+ 404:	02e05a63          	blez	a4,438 <printint+0x96>
+ 408:	f04a                	sd	s2,32(sp)
+ 40a:	ec4e                	sd	s3,24(sp)
+ 40c:	fc040793          	addi	a5,s0,-64
+ 410:	00e78933          	add	s2,a5,a4
+ 414:	fff78993          	addi	s3,a5,-1
+ 418:	99ba                	add	s3,s3,a4
+ 41a:	377d                	addiw	a4,a4,-1
+ 41c:	1702                	slli	a4,a4,0x20
+ 41e:	9301                	srli	a4,a4,0x20
+ 420:	40e989b3          	sub	s3,s3,a4
+ 424:	fff94583          	lbu	a1,-1(s2)
+ 428:	8526                	mv	a0,s1
+ 42a:	f5bff0ef          	jal	384 <putc>
+ 42e:	197d                	addi	s2,s2,-1
+ 430:	ff391ae3          	bne	s2,s3,424 <printint+0x82>
+ 434:	7902                	ld	s2,32(sp)
+ 436:	69e2                	ld	s3,24(sp)
+ 438:	70e2                	ld	ra,56(sp)
+ 43a:	7442                	ld	s0,48(sp)
+ 43c:	74a2                	ld	s1,40(sp)
+ 43e:	6121                	addi	sp,sp,64
+ 440:	8082                	ret
+ 442:	40b005bb          	negw	a1,a1
+ 446:	4885                	li	a7,1
+ 448:	bf85                	j	3b8 <printint+0x16>
+
+000000000000044a <vprintf>:
+ 44a:	711d                	addi	sp,sp,-96
+ 44c:	ec86                	sd	ra,88(sp)
+ 44e:	e8a2                	sd	s0,80(sp)
+ 450:	e0ca                	sd	s2,64(sp)
+ 452:	1080                	addi	s0,sp,96
+ 454:	0005c903          	lbu	s2,0(a1)
+ 458:	26090863          	beqz	s2,6c8 <vprintf+0x27e>
+ 45c:	e4a6                	sd	s1,72(sp)
+ 45e:	fc4e                	sd	s3,56(sp)
+ 460:	f852                	sd	s4,48(sp)
+ 462:	f456                	sd	s5,40(sp)
+ 464:	f05a                	sd	s6,32(sp)
+ 466:	ec5e                	sd	s7,24(sp)
+ 468:	e862                	sd	s8,16(sp)
+ 46a:	e466                	sd	s9,8(sp)
+ 46c:	8b2a                	mv	s6,a0
+ 46e:	8a2e                	mv	s4,a1
+ 470:	8bb2                	mv	s7,a2
+ 472:	4981                	li	s3,0
+ 474:	4481                	li	s1,0
+ 476:	4701                	li	a4,0
+ 478:	02500a93          	li	s5,37
+ 47c:	06400c13          	li	s8,100
+ 480:	06c00c93          	li	s9,108
+ 484:	a005                	j	4a4 <vprintf+0x5a>
+ 486:	85ca                	mv	a1,s2
+ 488:	855a                	mv	a0,s6
+ 48a:	efbff0ef          	jal	384 <putc>
+ 48e:	a019                	j	494 <vprintf+0x4a>
+ 490:	03598263          	beq	s3,s5,4b4 <vprintf+0x6a>
+ 494:	2485                	addiw	s1,s1,1
+ 496:	8726                	mv	a4,s1
+ 498:	009a07b3          	add	a5,s4,s1
+ 49c:	0007c903          	lbu	s2,0(a5)
+ 4a0:	20090c63          	beqz	s2,6b8 <vprintf+0x26e>
+ 4a4:	0009079b          	sext.w	a5,s2
+ 4a8:	fe0994e3          	bnez	s3,490 <vprintf+0x46>
+ 4ac:	fd579de3          	bne	a5,s5,486 <vprintf+0x3c>
+ 4b0:	89be                	mv	s3,a5
+ 4b2:	b7cd                	j	494 <vprintf+0x4a>
+ 4b4:	00ea06b3          	add	a3,s4,a4
+ 4b8:	0016c683          	lbu	a3,1(a3)
+ 4bc:	8636                	mv	a2,a3
+ 4be:	c681                	beqz	a3,4c6 <vprintf+0x7c>
+ 4c0:	9752                	add	a4,a4,s4
+ 4c2:	00274603          	lbu	a2,2(a4)
+ 4c6:	03878f63          	beq	a5,s8,504 <vprintf+0xba>
+ 4ca:	05978963          	beq	a5,s9,51c <vprintf+0xd2>
+ 4ce:	07500713          	li	a4,117
+ 4d2:	0ee78363          	beq	a5,a4,5b8 <vprintf+0x16e>
+ 4d6:	07800713          	li	a4,120
+ 4da:	12e78563          	beq	a5,a4,604 <vprintf+0x1ba>
+ 4de:	07000713          	li	a4,112
+ 4e2:	14e78a63          	beq	a5,a4,636 <vprintf+0x1ec>
+ 4e6:	07300713          	li	a4,115
+ 4ea:	18e78a63          	beq	a5,a4,67e <vprintf+0x234>
+ 4ee:	02500713          	li	a4,37
+ 4f2:	04e79563          	bne	a5,a4,53c <vprintf+0xf2>
+ 4f6:	02500593          	li	a1,37
+ 4fa:	855a                	mv	a0,s6
+ 4fc:	e89ff0ef          	jal	384 <putc>
+ 500:	4981                	li	s3,0
+ 502:	bf49                	j	494 <vprintf+0x4a>
+ 504:	008b8913          	addi	s2,s7,8
+ 508:	4685                	li	a3,1
+ 50a:	4629                	li	a2,10
+ 50c:	000ba583          	lw	a1,0(s7)
+ 510:	855a                	mv	a0,s6
+ 512:	e91ff0ef          	jal	3a2 <printint>
+ 516:	8bca                	mv	s7,s2
+ 518:	4981                	li	s3,0
+ 51a:	bfad                	j	494 <vprintf+0x4a>
+ 51c:	06400793          	li	a5,100
+ 520:	02f68963          	beq	a3,a5,552 <vprintf+0x108>
+ 524:	06c00793          	li	a5,108
+ 528:	04f68263          	beq	a3,a5,56c <vprintf+0x122>
+ 52c:	07500793          	li	a5,117
+ 530:	0af68063          	beq	a3,a5,5d0 <vprintf+0x186>
+ 534:	07800793          	li	a5,120
+ 538:	0ef68263          	beq	a3,a5,61c <vprintf+0x1d2>
+ 53c:	02500593          	li	a1,37
+ 540:	855a                	mv	a0,s6
+ 542:	e43ff0ef          	jal	384 <putc>
+ 546:	85ca                	mv	a1,s2
+ 548:	855a                	mv	a0,s6
+ 54a:	e3bff0ef          	jal	384 <putc>
+ 54e:	4981                	li	s3,0
+ 550:	b791                	j	494 <vprintf+0x4a>
+ 552:	008b8913          	addi	s2,s7,8
+ 556:	4685                	li	a3,1
+ 558:	4629                	li	a2,10
+ 55a:	000ba583          	lw	a1,0(s7)
+ 55e:	855a                	mv	a0,s6
+ 560:	e43ff0ef          	jal	3a2 <printint>
+ 564:	2485                	addiw	s1,s1,1
+ 566:	8bca                	mv	s7,s2
+ 568:	4981                	li	s3,0
+ 56a:	b72d                	j	494 <vprintf+0x4a>
+ 56c:	06400793          	li	a5,100
+ 570:	02f60763          	beq	a2,a5,59e <vprintf+0x154>
+ 574:	07500793          	li	a5,117
+ 578:	06f60963          	beq	a2,a5,5ea <vprintf+0x1a0>
+ 57c:	07800793          	li	a5,120
+ 580:	faf61ee3          	bne	a2,a5,53c <vprintf+0xf2>
+ 584:	008b8913          	addi	s2,s7,8
+ 588:	4681                	li	a3,0
+ 58a:	4641                	li	a2,16
+ 58c:	000ba583          	lw	a1,0(s7)
+ 590:	855a                	mv	a0,s6
+ 592:	e11ff0ef          	jal	3a2 <printint>
+ 596:	2489                	addiw	s1,s1,2
+ 598:	8bca                	mv	s7,s2
+ 59a:	4981                	li	s3,0
+ 59c:	bde5                	j	494 <vprintf+0x4a>
+ 59e:	008b8913          	addi	s2,s7,8
+ 5a2:	4685                	li	a3,1
+ 5a4:	4629                	li	a2,10
+ 5a6:	000ba583          	lw	a1,0(s7)
+ 5aa:	855a                	mv	a0,s6
+ 5ac:	df7ff0ef          	jal	3a2 <printint>
+ 5b0:	2489                	addiw	s1,s1,2
+ 5b2:	8bca                	mv	s7,s2
+ 5b4:	4981                	li	s3,0
+ 5b6:	bdf9                	j	494 <vprintf+0x4a>
+ 5b8:	008b8913          	addi	s2,s7,8
+ 5bc:	4681                	li	a3,0
+ 5be:	4629                	li	a2,10
+ 5c0:	000ba583          	lw	a1,0(s7)
+ 5c4:	855a                	mv	a0,s6
+ 5c6:	dddff0ef          	jal	3a2 <printint>
+ 5ca:	8bca                	mv	s7,s2
+ 5cc:	4981                	li	s3,0
+ 5ce:	b5d9                	j	494 <vprintf+0x4a>
+ 5d0:	008b8913          	addi	s2,s7,8
+ 5d4:	4681                	li	a3,0
+ 5d6:	4629                	li	a2,10
+ 5d8:	000ba583          	lw	a1,0(s7)
+ 5dc:	855a                	mv	a0,s6
+ 5de:	dc5ff0ef          	jal	3a2 <printint>
+ 5e2:	2485                	addiw	s1,s1,1
+ 5e4:	8bca                	mv	s7,s2
+ 5e6:	4981                	li	s3,0
+ 5e8:	b575                	j	494 <vprintf+0x4a>
+ 5ea:	008b8913          	addi	s2,s7,8
+ 5ee:	4681                	li	a3,0
+ 5f0:	4629                	li	a2,10
+ 5f2:	000ba583          	lw	a1,0(s7)
+ 5f6:	855a                	mv	a0,s6
+ 5f8:	dabff0ef          	jal	3a2 <printint>
+ 5fc:	2489                	addiw	s1,s1,2
+ 5fe:	8bca                	mv	s7,s2
+ 600:	4981                	li	s3,0
+ 602:	bd49                	j	494 <vprintf+0x4a>
+ 604:	008b8913          	addi	s2,s7,8
+ 608:	4681                	li	a3,0
+ 60a:	4641                	li	a2,16
+ 60c:	000ba583          	lw	a1,0(s7)
+ 610:	855a                	mv	a0,s6
+ 612:	d91ff0ef          	jal	3a2 <printint>
+ 616:	8bca                	mv	s7,s2
+ 618:	4981                	li	s3,0
+ 61a:	bdad                	j	494 <vprintf+0x4a>
+ 61c:	008b8913          	addi	s2,s7,8
+ 620:	4681                	li	a3,0
+ 622:	4641                	li	a2,16
+ 624:	000ba583          	lw	a1,0(s7)
+ 628:	855a                	mv	a0,s6
+ 62a:	d79ff0ef          	jal	3a2 <printint>
+ 62e:	2485                	addiw	s1,s1,1
+ 630:	8bca                	mv	s7,s2
+ 632:	4981                	li	s3,0
+ 634:	b585                	j	494 <vprintf+0x4a>
+ 636:	e06a                	sd	s10,0(sp)
+ 638:	008b8d13          	addi	s10,s7,8
+ 63c:	000bb983          	ld	s3,0(s7)
+ 640:	03000593          	li	a1,48
+ 644:	855a                	mv	a0,s6
+ 646:	d3fff0ef          	jal	384 <putc>
+ 64a:	07800593          	li	a1,120
+ 64e:	855a                	mv	a0,s6
+ 650:	d35ff0ef          	jal	384 <putc>
+ 654:	4941                	li	s2,16
+ 656:	00000b97          	auipc	s7,0x0
+ 65a:	272b8b93          	addi	s7,s7,626 # 8c8 <digits>
+ 65e:	03c9d793          	srli	a5,s3,0x3c
+ 662:	97de                	add	a5,a5,s7
+ 664:	0007c583          	lbu	a1,0(a5)
+ 668:	855a                	mv	a0,s6
+ 66a:	d1bff0ef          	jal	384 <putc>
+ 66e:	0992                	slli	s3,s3,0x4
+ 670:	397d                	addiw	s2,s2,-1
+ 672:	fe0916e3          	bnez	s2,65e <vprintf+0x214>
+ 676:	8bea                	mv	s7,s10
+ 678:	4981                	li	s3,0
+ 67a:	6d02                	ld	s10,0(sp)
+ 67c:	bd21                	j	494 <vprintf+0x4a>
+ 67e:	008b8993          	addi	s3,s7,8
+ 682:	000bb903          	ld	s2,0(s7)
+ 686:	00090f63          	beqz	s2,6a4 <vprintf+0x25a>
+ 68a:	00094583          	lbu	a1,0(s2)
+ 68e:	c195                	beqz	a1,6b2 <vprintf+0x268>
+ 690:	855a                	mv	a0,s6
+ 692:	cf3ff0ef          	jal	384 <putc>
+ 696:	0905                	addi	s2,s2,1
+ 698:	00094583          	lbu	a1,0(s2)
+ 69c:	f9f5                	bnez	a1,690 <vprintf+0x246>
+ 69e:	8bce                	mv	s7,s3
+ 6a0:	4981                	li	s3,0
+ 6a2:	bbcd                	j	494 <vprintf+0x4a>
+ 6a4:	00000917          	auipc	s2,0x0
+ 6a8:	21c90913          	addi	s2,s2,540 # 8c0 <malloc+0x110>
+ 6ac:	02800593          	li	a1,40
+ 6b0:	b7c5                	j	690 <vprintf+0x246>
+ 6b2:	8bce                	mv	s7,s3
+ 6b4:	4981                	li	s3,0
+ 6b6:	bbf9                	j	494 <vprintf+0x4a>
+ 6b8:	64a6                	ld	s1,72(sp)
+ 6ba:	79e2                	ld	s3,56(sp)
+ 6bc:	7a42                	ld	s4,48(sp)
+ 6be:	7aa2                	ld	s5,40(sp)
+ 6c0:	7b02                	ld	s6,32(sp)
+ 6c2:	6be2                	ld	s7,24(sp)
+ 6c4:	6c42                	ld	s8,16(sp)
+ 6c6:	6ca2                	ld	s9,8(sp)
+ 6c8:	60e6                	ld	ra,88(sp)
+ 6ca:	6446                	ld	s0,80(sp)
+ 6cc:	6906                	ld	s2,64(sp)
+ 6ce:	6125                	addi	sp,sp,96
+ 6d0:	8082                	ret
+
+00000000000006d2 <fprintf>:
+ 6d2:	715d                	addi	sp,sp,-80
+ 6d4:	ec06                	sd	ra,24(sp)
+ 6d6:	e822                	sd	s0,16(sp)
+ 6d8:	1000                	addi	s0,sp,32
+ 6da:	e010                	sd	a2,0(s0)
+ 6dc:	e414                	sd	a3,8(s0)
+ 6de:	e818                	sd	a4,16(s0)
+ 6e0:	ec1c                	sd	a5,24(s0)
+ 6e2:	03043023          	sd	a6,32(s0)
+ 6e6:	03143423          	sd	a7,40(s0)
+ 6ea:	fe843423          	sd	s0,-24(s0)
+ 6ee:	8622                	mv	a2,s0
+ 6f0:	d5bff0ef          	jal	44a <vprintf>
+ 6f4:	60e2                	ld	ra,24(sp)
+ 6f6:	6442                	ld	s0,16(sp)
+ 6f8:	6161                	addi	sp,sp,80
+ 6fa:	8082                	ret
+
+00000000000006fc <printf>:
+ 6fc:	711d                	addi	sp,sp,-96
+ 6fe:	ec06                	sd	ra,24(sp)
+ 700:	e822                	sd	s0,16(sp)
+ 702:	1000                	addi	s0,sp,32
+ 704:	e40c                	sd	a1,8(s0)
+ 706:	e810                	sd	a2,16(s0)
+ 708:	ec14                	sd	a3,24(s0)
+ 70a:	f018                	sd	a4,32(s0)
+ 70c:	f41c                	sd	a5,40(s0)
+ 70e:	03043823          	sd	a6,48(s0)
+ 712:	03143c23          	sd	a7,56(s0)
+ 716:	00840613          	addi	a2,s0,8
+ 71a:	fec43423          	sd	a2,-24(s0)
+ 71e:	85aa                	mv	a1,a0
+ 720:	4505                	li	a0,1
+ 722:	d29ff0ef          	jal	44a <vprintf>
+ 726:	60e2                	ld	ra,24(sp)
+ 728:	6442                	ld	s0,16(sp)
+ 72a:	6125                	addi	sp,sp,96
+ 72c:	8082                	ret
+
+000000000000072e <free>:
+ 72e:	1141                	addi	sp,sp,-16
+ 730:	e422                	sd	s0,8(sp)
+ 732:	0800                	addi	s0,sp,16
+ 734:	ff050693          	addi	a3,a0,-16
+ 738:	00001797          	auipc	a5,0x1
+ 73c:	8c87b783          	ld	a5,-1848(a5) # 1000 <freep>
+ 740:	a02d                	j	76a <free+0x3c>
+ 742:	4618                	lw	a4,8(a2)
+ 744:	9f2d                	addw	a4,a4,a1
+ 746:	fee52c23          	sw	a4,-8(a0)
+ 74a:	6398                	ld	a4,0(a5)
+ 74c:	6310                	ld	a2,0(a4)
+ 74e:	a83d                	j	78c <free+0x5e>
+ 750:	ff852703          	lw	a4,-8(a0)
+ 754:	9f31                	addw	a4,a4,a2
+ 756:	c798                	sw	a4,8(a5)
+ 758:	ff053683          	ld	a3,-16(a0)
+ 75c:	a091                	j	7a0 <free+0x72>
+ 75e:	6398                	ld	a4,0(a5)
+ 760:	00e7e463          	bltu	a5,a4,768 <free+0x3a>
+ 764:	00e6ea63          	bltu	a3,a4,778 <free+0x4a>
+ 768:	87ba                	mv	a5,a4
+ 76a:	fed7fae3          	bgeu	a5,a3,75e <free+0x30>
+ 76e:	6398                	ld	a4,0(a5)
+ 770:	00e6e463          	bltu	a3,a4,778 <free+0x4a>
+ 774:	fee7eae3          	bltu	a5,a4,768 <free+0x3a>
+ 778:	ff852583          	lw	a1,-8(a0)
+ 77c:	6390                	ld	a2,0(a5)
+ 77e:	02059813          	slli	a6,a1,0x20
+ 782:	01c85713          	srli	a4,a6,0x1c
+ 786:	9736                	add	a4,a4,a3
+ 788:	fae60de3          	beq	a2,a4,742 <free+0x14>
+ 78c:	fec53823          	sd	a2,-16(a0)
+ 790:	4790                	lw	a2,8(a5)
+ 792:	02061593          	slli	a1,a2,0x20
+ 796:	01c5d713          	srli	a4,a1,0x1c
+ 79a:	973e                	add	a4,a4,a5
+ 79c:	fae68ae3          	beq	a3,a4,750 <free+0x22>
+ 7a0:	e394                	sd	a3,0(a5)
+ 7a2:	00001717          	auipc	a4,0x1
+ 7a6:	84f73f23          	sd	a5,-1954(a4) # 1000 <freep>
+ 7aa:	6422                	ld	s0,8(sp)
+ 7ac:	0141                	addi	sp,sp,16
+ 7ae:	8082                	ret
+
+00000000000007b0 <malloc>:
+ 7b0:	7139                	addi	sp,sp,-64
+ 7b2:	fc06                	sd	ra,56(sp)
+ 7b4:	f822                	sd	s0,48(sp)
+ 7b6:	f426                	sd	s1,40(sp)
+ 7b8:	ec4e                	sd	s3,24(sp)
+ 7ba:	0080                	addi	s0,sp,64
+ 7bc:	02051493          	slli	s1,a0,0x20
+ 7c0:	9081                	srli	s1,s1,0x20
+ 7c2:	04bd                	addi	s1,s1,15
+ 7c4:	8091                	srli	s1,s1,0x4
+ 7c6:	0014899b          	addiw	s3,s1,1
+ 7ca:	0485                	addi	s1,s1,1
+ 7cc:	00001517          	auipc	a0,0x1
+ 7d0:	83453503          	ld	a0,-1996(a0) # 1000 <freep>
+ 7d4:	c915                	beqz	a0,808 <malloc+0x58>
+ 7d6:	611c                	ld	a5,0(a0)
+ 7d8:	4798                	lw	a4,8(a5)
+ 7da:	08977a63          	bgeu	a4,s1,86e <malloc+0xbe>
+ 7de:	f04a                	sd	s2,32(sp)
+ 7e0:	e852                	sd	s4,16(sp)
+ 7e2:	e456                	sd	s5,8(sp)
+ 7e4:	e05a                	sd	s6,0(sp)
+ 7e6:	8a4e                	mv	s4,s3
+ 7e8:	0009871b          	sext.w	a4,s3
+ 7ec:	6685                	lui	a3,0x1
+ 7ee:	00d77363          	bgeu	a4,a3,7f4 <malloc+0x44>
+ 7f2:	6a05                	lui	s4,0x1
+ 7f4:	000a0b1b          	sext.w	s6,s4
+ 7f8:	004a1a1b          	slliw	s4,s4,0x4
+ 7fc:	00001917          	auipc	s2,0x1
+ 800:	80490913          	addi	s2,s2,-2044 # 1000 <freep>
+ 804:	5afd                	li	s5,-1
+ 806:	a081                	j	846 <malloc+0x96>
+ 808:	f04a                	sd	s2,32(sp)
+ 80a:	e852                	sd	s4,16(sp)
+ 80c:	e456                	sd	s5,8(sp)
+ 80e:	e05a                	sd	s6,0(sp)
+ 810:	00001797          	auipc	a5,0x1
+ 814:	80078793          	addi	a5,a5,-2048 # 1010 <base>
+ 818:	00000717          	auipc	a4,0x0
+ 81c:	7ef73423          	sd	a5,2024(a4) # 1000 <freep>
+ 820:	e39c                	sd	a5,0(a5)
+ 822:	0007a423          	sw	zero,8(a5)
+ 826:	b7c1                	j	7e6 <malloc+0x36>
+ 828:	6398                	ld	a4,0(a5)
+ 82a:	e118                	sd	a4,0(a0)
+ 82c:	a8a9                	j	886 <malloc+0xd6>
+ 82e:	01652423          	sw	s6,8(a0)
+ 832:	0541                	addi	a0,a0,16
+ 834:	efbff0ef          	jal	72e <free>
+ 838:	00093503          	ld	a0,0(s2)
+ 83c:	c12d                	beqz	a0,89e <malloc+0xee>
+ 83e:	611c                	ld	a5,0(a0)
+ 840:	4798                	lw	a4,8(a5)
+ 842:	02977263          	bgeu	a4,s1,866 <malloc+0xb6>
+ 846:	00093703          	ld	a4,0(s2)
+ 84a:	853e                	mv	a0,a5
+ 84c:	fef719e3          	bne	a4,a5,83e <malloc+0x8e>
+ 850:	8552                	mv	a0,s4
+ 852:	b1bff0ef          	jal	36c <sbrk>
+ 856:	fd551ce3          	bne	a0,s5,82e <malloc+0x7e>
+ 85a:	4501                	li	a0,0
+ 85c:	7902                	ld	s2,32(sp)
+ 85e:	6a42                	ld	s4,16(sp)
+ 860:	6aa2                	ld	s5,8(sp)
+ 862:	6b02                	ld	s6,0(sp)
+ 864:	a03d                	j	892 <malloc+0xe2>
+ 866:	7902                	ld	s2,32(sp)
+ 868:	6a42                	ld	s4,16(sp)
+ 86a:	6aa2                	ld	s5,8(sp)
+ 86c:	6b02                	ld	s6,0(sp)
+ 86e:	fae48de3          	beq	s1,a4,828 <malloc+0x78>
+ 872:	4137073b          	subw	a4,a4,s3
+ 876:	c798                	sw	a4,8(a5)
+ 878:	02071693          	slli	a3,a4,0x20
+ 87c:	01c6d713          	srli	a4,a3,0x1c
+ 880:	97ba                	add	a5,a5,a4
+ 882:	0137a423          	sw	s3,8(a5)
+ 886:	00000717          	auipc	a4,0x0
+ 88a:	76a73d23          	sd	a0,1914(a4) # 1000 <freep>
+ 88e:	01078513          	addi	a0,a5,16
+ 892:	70e2                	ld	ra,56(sp)
+ 894:	7442                	ld	s0,48(sp)
+ 896:	74a2                	ld	s1,40(sp)
+ 898:	69e2                	ld	s3,24(sp)
+ 89a:	6121                	addi	sp,sp,64
+ 89c:	8082                	ret
+ 89e:	7902                	ld	s2,32(sp)
+ 8a0:	6a42                	ld	s4,16(sp)
+ 8a2:	6aa2                	ld	s5,8(sp)
+ 8a4:	6b02                	ld	s6,0(sp)
+ 8a6:	b7f5                	j	892 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/echo.c b/xv6-labs-2024/user/echo.c
new file mode 100644
index 0000000..3f19cd7
--- /dev/null
+++ b/xv6-labs-2024/user/echo.c
@@ -0,0 +1,19 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char *argv[])
+{
+  int i;
+
+  for(i = 1; i < argc; i++){
+    write(1, argv[i], strlen(argv[i]));
+    if(i + 1 < argc){
+      write(1, " ", 1);
+    } else {
+      write(1, "\n", 1);
+    }
+  }
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/echo.d b/xv6-labs-2024/user/echo.d
new file mode 100644
index 0000000..7383bdb
--- /dev/null
+++ b/xv6-labs-2024/user/echo.d
@@ -0,0 +1,2 @@
+user/echo.o: user/echo.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/echo.o b/xv6-labs-2024/user/echo.o
new file mode 100644
index 0000000..bf4762a
Binary files /dev/null and b/xv6-labs-2024/user/echo.o differ
diff --git a/xv6-labs-2024/user/echo.sym b/xv6-labs-2024/user/echo.sym
new file mode 100644
index 0000000..aa95bfa
--- /dev/null
+++ b/xv6-labs-2024/user/echo.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+00000000000008a8 .rodata
+00000000000008e0 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 echo.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000384 putc
+00000000000003a2 printint
+00000000000008c8 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+000000000000008c strcpy
+00000000000006fc printf
+0000000000000236 memmove
+000000000000032c mknod
+0000000000000144 gets
+0000000000000364 getpid
+00000000000002c8 memcpy
+00000000000007b0 malloc
+0000000000000374 sleep
+00000000000002f4 pipe
+0000000000000304 write
+000000000000033c fstat
+00000000000006d2 fprintf
+0000000000000314 kill
+000000000000044a vprintf
+0000000000000354 chdir
+000000000000031c exec
+00000000000002ec wait
+00000000000002fc read
+0000000000000334 unlink
+000000000000028e memcmp
+00000000000002dc fork
+000000000000036c sbrk
+000000000000037c uptime
+00000000000000fe memset
+0000000000000000 main
+00000000000000a8 strcmp
+000000000000035c dup
+00000000000001b4 stat
+0000000000000344 link
+00000000000002e4 exit
+000000000000007a start
+00000000000001ee atoi
+00000000000000d4 strlen
+0000000000000324 open
+0000000000000120 strchr
+000000000000034c mkdir
+000000000000030c close
+000000000000072e free
diff --git a/xv6-labs-2024/user/find.asm b/xv6-labs-2024/user/find.asm
new file mode 100644
index 0000000..f0520cf
--- /dev/null
+++ b/xv6-labs-2024/user/find.asm
@@ -0,0 +1,1182 @@
+
+user/_find:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <nameComparison>:
+   0:	1141                	addi	sp,sp,-16
+   2:	e406                	sd	ra,8(sp)
+   4:	e022                	sd	s0,0(sp)
+   6:	0800                	addi	s0,sp,16
+   8:	20c000ef          	jal	214 <strcmp>
+   c:	00153513          	seqz	a0,a0
+  10:	60a2                	ld	ra,8(sp)
+  12:	6402                	ld	s0,0(sp)
+  14:	0141                	addi	sp,sp,16
+  16:	8082                	ret
+
+0000000000000018 <find>:
+  18:	d8010113          	addi	sp,sp,-640
+  1c:	26113c23          	sd	ra,632(sp)
+  20:	26813823          	sd	s0,624(sp)
+  24:	27213023          	sd	s2,608(sp)
+  28:	25313c23          	sd	s3,600(sp)
+  2c:	0500                	addi	s0,sp,640
+  2e:	89aa                	mv	s3,a0
+  30:	892e                	mv	s2,a1
+  32:	4581                	li	a1,0
+  34:	854a                	mv	a0,s2
+  36:	45a000ef          	jal	490 <open>
+  3a:	0e054463          	bltz	a0,122 <find+0x10a>
+  3e:	26913423          	sd	s1,616(sp)
+  42:	84aa                	mv	s1,a0
+  44:	d8840593          	addi	a1,s0,-632
+  48:	460000ef          	jal	4a8 <fstat>
+  4c:	0e054463          	bltz	a0,134 <find+0x11c>
+  50:	854a                	mv	a0,s2
+  52:	1ee000ef          	jal	240 <strlen>
+  56:	2541                	addiw	a0,a0,16
+  58:	20000793          	li	a5,512
+  5c:	0ea7ea63          	bltu	a5,a0,150 <find+0x138>
+  60:	25413823          	sd	s4,592(sp)
+  64:	25513423          	sd	s5,584(sp)
+  68:	25613023          	sd	s6,576(sp)
+  6c:	23713c23          	sd	s7,568(sp)
+  70:	85ca                	mv	a1,s2
+  72:	db040513          	addi	a0,s0,-592
+  76:	182000ef          	jal	1f8 <strcpy>
+  7a:	db040513          	addi	a0,s0,-592
+  7e:	1c2000ef          	jal	240 <strlen>
+  82:	1502                	slli	a0,a0,0x20
+  84:	9101                	srli	a0,a0,0x20
+  86:	db040793          	addi	a5,s0,-592
+  8a:	00a78933          	add	s2,a5,a0
+  8e:	00190b93          	addi	s7,s2,1
+  92:	02f00793          	li	a5,47
+  96:	00f90023          	sb	a5,0(s2)
+  9a:	00001a97          	auipc	s5,0x1
+  9e:	9cea8a93          	addi	s5,s5,-1586 # a68 <malloc+0x14c>
+  a2:	4a05                	li	s4,1
+  a4:	00001b17          	auipc	s6,0x1
+  a8:	9ccb0b13          	addi	s6,s6,-1588 # a70 <malloc+0x154>
+  ac:	4641                	li	a2,16
+  ae:	da040593          	addi	a1,s0,-608
+  b2:	8526                	mv	a0,s1
+  b4:	3b4000ef          	jal	468 <read>
+  b8:	47c1                	li	a5,16
+  ba:	0cf51663          	bne	a0,a5,186 <find+0x16e>
+  be:	da045783          	lhu	a5,-608(s0)
+  c2:	d7ed                	beqz	a5,ac <find+0x94>
+  c4:	85d6                	mv	a1,s5
+  c6:	da240513          	addi	a0,s0,-606
+  ca:	f37ff0ef          	jal	0 <nameComparison>
+  ce:	fd450fe3          	beq	a0,s4,ac <find+0x94>
+  d2:	85da                	mv	a1,s6
+  d4:	da240513          	addi	a0,s0,-606
+  d8:	f29ff0ef          	jal	0 <nameComparison>
+  dc:	fd4508e3          	beq	a0,s4,ac <find+0x94>
+  e0:	4639                	li	a2,14
+  e2:	da240593          	addi	a1,s0,-606
+  e6:	855e                	mv	a0,s7
+  e8:	2ba000ef          	jal	3a2 <memmove>
+  ec:	000907a3          	sb	zero,15(s2)
+  f0:	d8840593          	addi	a1,s0,-632
+  f4:	db040513          	addi	a0,s0,-592
+  f8:	228000ef          	jal	320 <stat>
+  fc:	06054363          	bltz	a0,162 <find+0x14a>
+ 100:	da240593          	addi	a1,s0,-606
+ 104:	854e                	mv	a0,s3
+ 106:	efbff0ef          	jal	0 <nameComparison>
+ 10a:	07450563          	beq	a0,s4,174 <find+0x15c>
+ 10e:	d9041783          	lh	a5,-624(s0)
+ 112:	f9479de3          	bne	a5,s4,ac <find+0x94>
+ 116:	db040593          	addi	a1,s0,-592
+ 11a:	854e                	mv	a0,s3
+ 11c:	efdff0ef          	jal	18 <find>
+ 120:	b771                	j	ac <find+0x94>
+ 122:	864e                	mv	a2,s3
+ 124:	00001597          	auipc	a1,0x1
+ 128:	8fc58593          	addi	a1,a1,-1796 # a20 <malloc+0x104>
+ 12c:	4509                	li	a0,2
+ 12e:	710000ef          	jal	83e <fprintf>
+ 132:	a0bd                	j	1a0 <find+0x188>
+ 134:	864e                	mv	a2,s3
+ 136:	00001597          	auipc	a1,0x1
+ 13a:	90258593          	addi	a1,a1,-1790 # a38 <malloc+0x11c>
+ 13e:	4509                	li	a0,2
+ 140:	6fe000ef          	jal	83e <fprintf>
+ 144:	8526                	mv	a0,s1
+ 146:	332000ef          	jal	478 <close>
+ 14a:	26813483          	ld	s1,616(sp)
+ 14e:	a889                	j	1a0 <find+0x188>
+ 150:	00001517          	auipc	a0,0x1
+ 154:	90050513          	addi	a0,a0,-1792 # a50 <malloc+0x134>
+ 158:	710000ef          	jal	868 <printf>
+ 15c:	26813483          	ld	s1,616(sp)
+ 160:	a081                	j	1a0 <find+0x188>
+ 162:	db040593          	addi	a1,s0,-592
+ 166:	00001517          	auipc	a0,0x1
+ 16a:	8d250513          	addi	a0,a0,-1838 # a38 <malloc+0x11c>
+ 16e:	6fa000ef          	jal	868 <printf>
+ 172:	bf2d                	j	ac <find+0x94>
+ 174:	db040593          	addi	a1,s0,-592
+ 178:	00001517          	auipc	a0,0x1
+ 17c:	8b850513          	addi	a0,a0,-1864 # a30 <malloc+0x114>
+ 180:	6e8000ef          	jal	868 <printf>
+ 184:	b769                	j	10e <find+0xf6>
+ 186:	8526                	mv	a0,s1
+ 188:	2f0000ef          	jal	478 <close>
+ 18c:	26813483          	ld	s1,616(sp)
+ 190:	25013a03          	ld	s4,592(sp)
+ 194:	24813a83          	ld	s5,584(sp)
+ 198:	24013b03          	ld	s6,576(sp)
+ 19c:	23813b83          	ld	s7,568(sp)
+ 1a0:	27813083          	ld	ra,632(sp)
+ 1a4:	27013403          	ld	s0,624(sp)
+ 1a8:	26013903          	ld	s2,608(sp)
+ 1ac:	25813983          	ld	s3,600(sp)
+ 1b0:	28010113          	addi	sp,sp,640
+ 1b4:	8082                	ret
+
+00000000000001b6 <main>:
+ 1b6:	1141                	addi	sp,sp,-16
+ 1b8:	e406                	sd	ra,8(sp)
+ 1ba:	e022                	sd	s0,0(sp)
+ 1bc:	0800                	addi	s0,sp,16
+ 1be:	470d                	li	a4,3
+ 1c0:	00e50b63          	beq	a0,a4,1d6 <main+0x20>
+ 1c4:	00001517          	auipc	a0,0x1
+ 1c8:	8b450513          	addi	a0,a0,-1868 # a78 <malloc+0x15c>
+ 1cc:	69c000ef          	jal	868 <printf>
+ 1d0:	4501                	li	a0,0
+ 1d2:	27e000ef          	jal	450 <exit>
+ 1d6:	87ae                	mv	a5,a1
+ 1d8:	658c                	ld	a1,8(a1)
+ 1da:	6b88                	ld	a0,16(a5)
+ 1dc:	e3dff0ef          	jal	18 <find>
+ 1e0:	4501                	li	a0,0
+ 1e2:	26e000ef          	jal	450 <exit>
+
+00000000000001e6 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 1e6:	1141                	addi	sp,sp,-16
+ 1e8:	e406                	sd	ra,8(sp)
+ 1ea:	e022                	sd	s0,0(sp)
+ 1ec:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 1ee:	fc9ff0ef          	jal	1b6 <main>
+  exit(0);
+ 1f2:	4501                	li	a0,0
+ 1f4:	25c000ef          	jal	450 <exit>
+
+00000000000001f8 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 1f8:	1141                	addi	sp,sp,-16
+ 1fa:	e422                	sd	s0,8(sp)
+ 1fc:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 1fe:	87aa                	mv	a5,a0
+ 200:	0585                	addi	a1,a1,1
+ 202:	0785                	addi	a5,a5,1
+ 204:	fff5c703          	lbu	a4,-1(a1)
+ 208:	fee78fa3          	sb	a4,-1(a5)
+ 20c:	fb75                	bnez	a4,200 <strcpy+0x8>
+    ;
+  return os;
+}
+ 20e:	6422                	ld	s0,8(sp)
+ 210:	0141                	addi	sp,sp,16
+ 212:	8082                	ret
+
+0000000000000214 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 214:	1141                	addi	sp,sp,-16
+ 216:	e422                	sd	s0,8(sp)
+ 218:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 21a:	00054783          	lbu	a5,0(a0)
+ 21e:	cb91                	beqz	a5,232 <strcmp+0x1e>
+ 220:	0005c703          	lbu	a4,0(a1)
+ 224:	00f71763          	bne	a4,a5,232 <strcmp+0x1e>
+    p++, q++;
+ 228:	0505                	addi	a0,a0,1
+ 22a:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 22c:	00054783          	lbu	a5,0(a0)
+ 230:	fbe5                	bnez	a5,220 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 232:	0005c503          	lbu	a0,0(a1)
+}
+ 236:	40a7853b          	subw	a0,a5,a0
+ 23a:	6422                	ld	s0,8(sp)
+ 23c:	0141                	addi	sp,sp,16
+ 23e:	8082                	ret
+
+0000000000000240 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 240:	1141                	addi	sp,sp,-16
+ 242:	e422                	sd	s0,8(sp)
+ 244:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 246:	00054783          	lbu	a5,0(a0)
+ 24a:	cf91                	beqz	a5,266 <strlen+0x26>
+ 24c:	0505                	addi	a0,a0,1
+ 24e:	87aa                	mv	a5,a0
+ 250:	86be                	mv	a3,a5
+ 252:	0785                	addi	a5,a5,1
+ 254:	fff7c703          	lbu	a4,-1(a5)
+ 258:	ff65                	bnez	a4,250 <strlen+0x10>
+ 25a:	40a6853b          	subw	a0,a3,a0
+ 25e:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 260:	6422                	ld	s0,8(sp)
+ 262:	0141                	addi	sp,sp,16
+ 264:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 266:	4501                	li	a0,0
+ 268:	bfe5                	j	260 <strlen+0x20>
+
+000000000000026a <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 26a:	1141                	addi	sp,sp,-16
+ 26c:	e422                	sd	s0,8(sp)
+ 26e:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 270:	ca19                	beqz	a2,286 <memset+0x1c>
+ 272:	87aa                	mv	a5,a0
+ 274:	1602                	slli	a2,a2,0x20
+ 276:	9201                	srli	a2,a2,0x20
+ 278:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 27c:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 280:	0785                	addi	a5,a5,1
+ 282:	fee79de3          	bne	a5,a4,27c <memset+0x12>
+  }
+  return dst;
+}
+ 286:	6422                	ld	s0,8(sp)
+ 288:	0141                	addi	sp,sp,16
+ 28a:	8082                	ret
+
+000000000000028c <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 28c:	1141                	addi	sp,sp,-16
+ 28e:	e422                	sd	s0,8(sp)
+ 290:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 292:	00054783          	lbu	a5,0(a0)
+ 296:	cb99                	beqz	a5,2ac <strchr+0x20>
+    if(*s == c)
+ 298:	00f58763          	beq	a1,a5,2a6 <strchr+0x1a>
+  for(; *s; s++)
+ 29c:	0505                	addi	a0,a0,1
+ 29e:	00054783          	lbu	a5,0(a0)
+ 2a2:	fbfd                	bnez	a5,298 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 2a4:	4501                	li	a0,0
+}
+ 2a6:	6422                	ld	s0,8(sp)
+ 2a8:	0141                	addi	sp,sp,16
+ 2aa:	8082                	ret
+  return 0;
+ 2ac:	4501                	li	a0,0
+ 2ae:	bfe5                	j	2a6 <strchr+0x1a>
+
+00000000000002b0 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 2b0:	711d                	addi	sp,sp,-96
+ 2b2:	ec86                	sd	ra,88(sp)
+ 2b4:	e8a2                	sd	s0,80(sp)
+ 2b6:	e4a6                	sd	s1,72(sp)
+ 2b8:	e0ca                	sd	s2,64(sp)
+ 2ba:	fc4e                	sd	s3,56(sp)
+ 2bc:	f852                	sd	s4,48(sp)
+ 2be:	f456                	sd	s5,40(sp)
+ 2c0:	f05a                	sd	s6,32(sp)
+ 2c2:	ec5e                	sd	s7,24(sp)
+ 2c4:	1080                	addi	s0,sp,96
+ 2c6:	8baa                	mv	s7,a0
+ 2c8:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 2ca:	892a                	mv	s2,a0
+ 2cc:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 2ce:	4aa9                	li	s5,10
+ 2d0:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 2d2:	89a6                	mv	s3,s1
+ 2d4:	2485                	addiw	s1,s1,1
+ 2d6:	0344d663          	bge	s1,s4,302 <gets+0x52>
+    cc = read(0, &c, 1);
+ 2da:	4605                	li	a2,1
+ 2dc:	faf40593          	addi	a1,s0,-81
+ 2e0:	4501                	li	a0,0
+ 2e2:	186000ef          	jal	468 <read>
+    if(cc < 1)
+ 2e6:	00a05e63          	blez	a0,302 <gets+0x52>
+    buf[i++] = c;
+ 2ea:	faf44783          	lbu	a5,-81(s0)
+ 2ee:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 2f2:	01578763          	beq	a5,s5,300 <gets+0x50>
+ 2f6:	0905                	addi	s2,s2,1
+ 2f8:	fd679de3          	bne	a5,s6,2d2 <gets+0x22>
+    buf[i++] = c;
+ 2fc:	89a6                	mv	s3,s1
+ 2fe:	a011                	j	302 <gets+0x52>
+ 300:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 302:	99de                	add	s3,s3,s7
+ 304:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 308:	855e                	mv	a0,s7
+ 30a:	60e6                	ld	ra,88(sp)
+ 30c:	6446                	ld	s0,80(sp)
+ 30e:	64a6                	ld	s1,72(sp)
+ 310:	6906                	ld	s2,64(sp)
+ 312:	79e2                	ld	s3,56(sp)
+ 314:	7a42                	ld	s4,48(sp)
+ 316:	7aa2                	ld	s5,40(sp)
+ 318:	7b02                	ld	s6,32(sp)
+ 31a:	6be2                	ld	s7,24(sp)
+ 31c:	6125                	addi	sp,sp,96
+ 31e:	8082                	ret
+
+0000000000000320 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 320:	1101                	addi	sp,sp,-32
+ 322:	ec06                	sd	ra,24(sp)
+ 324:	e822                	sd	s0,16(sp)
+ 326:	e04a                	sd	s2,0(sp)
+ 328:	1000                	addi	s0,sp,32
+ 32a:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 32c:	4581                	li	a1,0
+ 32e:	162000ef          	jal	490 <open>
+  if(fd < 0)
+ 332:	02054263          	bltz	a0,356 <stat+0x36>
+ 336:	e426                	sd	s1,8(sp)
+ 338:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 33a:	85ca                	mv	a1,s2
+ 33c:	16c000ef          	jal	4a8 <fstat>
+ 340:	892a                	mv	s2,a0
+  close(fd);
+ 342:	8526                	mv	a0,s1
+ 344:	134000ef          	jal	478 <close>
+  return r;
+ 348:	64a2                	ld	s1,8(sp)
+}
+ 34a:	854a                	mv	a0,s2
+ 34c:	60e2                	ld	ra,24(sp)
+ 34e:	6442                	ld	s0,16(sp)
+ 350:	6902                	ld	s2,0(sp)
+ 352:	6105                	addi	sp,sp,32
+ 354:	8082                	ret
+    return -1;
+ 356:	597d                	li	s2,-1
+ 358:	bfcd                	j	34a <stat+0x2a>
+
+000000000000035a <atoi>:
+
+int
+atoi(const char *s)
+{
+ 35a:	1141                	addi	sp,sp,-16
+ 35c:	e422                	sd	s0,8(sp)
+ 35e:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 360:	00054683          	lbu	a3,0(a0)
+ 364:	fd06879b          	addiw	a5,a3,-48
+ 368:	0ff7f793          	zext.b	a5,a5
+ 36c:	4625                	li	a2,9
+ 36e:	02f66863          	bltu	a2,a5,39e <atoi+0x44>
+ 372:	872a                	mv	a4,a0
+  n = 0;
+ 374:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 376:	0705                	addi	a4,a4,1
+ 378:	0025179b          	slliw	a5,a0,0x2
+ 37c:	9fa9                	addw	a5,a5,a0
+ 37e:	0017979b          	slliw	a5,a5,0x1
+ 382:	9fb5                	addw	a5,a5,a3
+ 384:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 388:	00074683          	lbu	a3,0(a4)
+ 38c:	fd06879b          	addiw	a5,a3,-48
+ 390:	0ff7f793          	zext.b	a5,a5
+ 394:	fef671e3          	bgeu	a2,a5,376 <atoi+0x1c>
+  return n;
+}
+ 398:	6422                	ld	s0,8(sp)
+ 39a:	0141                	addi	sp,sp,16
+ 39c:	8082                	ret
+  n = 0;
+ 39e:	4501                	li	a0,0
+ 3a0:	bfe5                	j	398 <atoi+0x3e>
+
+00000000000003a2 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 3a2:	1141                	addi	sp,sp,-16
+ 3a4:	e422                	sd	s0,8(sp)
+ 3a6:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 3a8:	02b57463          	bgeu	a0,a1,3d0 <memmove+0x2e>
+    while(n-- > 0)
+ 3ac:	00c05f63          	blez	a2,3ca <memmove+0x28>
+ 3b0:	1602                	slli	a2,a2,0x20
+ 3b2:	9201                	srli	a2,a2,0x20
+ 3b4:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 3b8:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 3ba:	0585                	addi	a1,a1,1
+ 3bc:	0705                	addi	a4,a4,1
+ 3be:	fff5c683          	lbu	a3,-1(a1)
+ 3c2:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 3c6:	fef71ae3          	bne	a4,a5,3ba <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 3ca:	6422                	ld	s0,8(sp)
+ 3cc:	0141                	addi	sp,sp,16
+ 3ce:	8082                	ret
+    dst += n;
+ 3d0:	00c50733          	add	a4,a0,a2
+    src += n;
+ 3d4:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 3d6:	fec05ae3          	blez	a2,3ca <memmove+0x28>
+ 3da:	fff6079b          	addiw	a5,a2,-1
+ 3de:	1782                	slli	a5,a5,0x20
+ 3e0:	9381                	srli	a5,a5,0x20
+ 3e2:	fff7c793          	not	a5,a5
+ 3e6:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 3e8:	15fd                	addi	a1,a1,-1
+ 3ea:	177d                	addi	a4,a4,-1
+ 3ec:	0005c683          	lbu	a3,0(a1)
+ 3f0:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 3f4:	fee79ae3          	bne	a5,a4,3e8 <memmove+0x46>
+ 3f8:	bfc9                	j	3ca <memmove+0x28>
+
+00000000000003fa <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 3fa:	1141                	addi	sp,sp,-16
+ 3fc:	e422                	sd	s0,8(sp)
+ 3fe:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 400:	ca05                	beqz	a2,430 <memcmp+0x36>
+ 402:	fff6069b          	addiw	a3,a2,-1
+ 406:	1682                	slli	a3,a3,0x20
+ 408:	9281                	srli	a3,a3,0x20
+ 40a:	0685                	addi	a3,a3,1
+ 40c:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 40e:	00054783          	lbu	a5,0(a0)
+ 412:	0005c703          	lbu	a4,0(a1)
+ 416:	00e79863          	bne	a5,a4,426 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 41a:	0505                	addi	a0,a0,1
+    p2++;
+ 41c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 41e:	fed518e3          	bne	a0,a3,40e <memcmp+0x14>
+  }
+  return 0;
+ 422:	4501                	li	a0,0
+ 424:	a019                	j	42a <memcmp+0x30>
+      return *p1 - *p2;
+ 426:	40e7853b          	subw	a0,a5,a4
+}
+ 42a:	6422                	ld	s0,8(sp)
+ 42c:	0141                	addi	sp,sp,16
+ 42e:	8082                	ret
+  return 0;
+ 430:	4501                	li	a0,0
+ 432:	bfe5                	j	42a <memcmp+0x30>
+
+0000000000000434 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 434:	1141                	addi	sp,sp,-16
+ 436:	e406                	sd	ra,8(sp)
+ 438:	e022                	sd	s0,0(sp)
+ 43a:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 43c:	f67ff0ef          	jal	3a2 <memmove>
+}
+ 440:	60a2                	ld	ra,8(sp)
+ 442:	6402                	ld	s0,0(sp)
+ 444:	0141                	addi	sp,sp,16
+ 446:	8082                	ret
+
+0000000000000448 <fork>:
+ 448:	4885                	li	a7,1
+ 44a:	00000073          	ecall
+ 44e:	8082                	ret
+
+0000000000000450 <exit>:
+ 450:	4889                	li	a7,2
+ 452:	00000073          	ecall
+ 456:	8082                	ret
+
+0000000000000458 <wait>:
+ 458:	488d                	li	a7,3
+ 45a:	00000073          	ecall
+ 45e:	8082                	ret
+
+0000000000000460 <pipe>:
+ 460:	4891                	li	a7,4
+ 462:	00000073          	ecall
+ 466:	8082                	ret
+
+0000000000000468 <read>:
+ 468:	4895                	li	a7,5
+ 46a:	00000073          	ecall
+ 46e:	8082                	ret
+
+0000000000000470 <write>:
+ 470:	48c1                	li	a7,16
+ 472:	00000073          	ecall
+ 476:	8082                	ret
+
+0000000000000478 <close>:
+ 478:	48d5                	li	a7,21
+ 47a:	00000073          	ecall
+ 47e:	8082                	ret
+
+0000000000000480 <kill>:
+ 480:	4899                	li	a7,6
+ 482:	00000073          	ecall
+ 486:	8082                	ret
+
+0000000000000488 <exec>:
+ 488:	489d                	li	a7,7
+ 48a:	00000073          	ecall
+ 48e:	8082                	ret
+
+0000000000000490 <open>:
+ 490:	48bd                	li	a7,15
+ 492:	00000073          	ecall
+ 496:	8082                	ret
+
+0000000000000498 <mknod>:
+ 498:	48c5                	li	a7,17
+ 49a:	00000073          	ecall
+ 49e:	8082                	ret
+
+00000000000004a0 <unlink>:
+ 4a0:	48c9                	li	a7,18
+ 4a2:	00000073          	ecall
+ 4a6:	8082                	ret
+
+00000000000004a8 <fstat>:
+ 4a8:	48a1                	li	a7,8
+ 4aa:	00000073          	ecall
+ 4ae:	8082                	ret
+
+00000000000004b0 <link>:
+ 4b0:	48cd                	li	a7,19
+ 4b2:	00000073          	ecall
+ 4b6:	8082                	ret
+
+00000000000004b8 <mkdir>:
+ 4b8:	48d1                	li	a7,20
+ 4ba:	00000073          	ecall
+ 4be:	8082                	ret
+
+00000000000004c0 <chdir>:
+ 4c0:	48a5                	li	a7,9
+ 4c2:	00000073          	ecall
+ 4c6:	8082                	ret
+
+00000000000004c8 <dup>:
+ 4c8:	48a9                	li	a7,10
+ 4ca:	00000073          	ecall
+ 4ce:	8082                	ret
+
+00000000000004d0 <getpid>:
+ 4d0:	48ad                	li	a7,11
+ 4d2:	00000073          	ecall
+ 4d6:	8082                	ret
+
+00000000000004d8 <sbrk>:
+ 4d8:	48b1                	li	a7,12
+ 4da:	00000073          	ecall
+ 4de:	8082                	ret
+
+00000000000004e0 <sleep>:
+ 4e0:	48b5                	li	a7,13
+ 4e2:	00000073          	ecall
+ 4e6:	8082                	ret
+
+00000000000004e8 <uptime>:
+ 4e8:	48b9                	li	a7,14
+ 4ea:	00000073          	ecall
+ 4ee:	8082                	ret
+
+00000000000004f0 <putc>:
+ 4f0:	1101                	addi	sp,sp,-32
+ 4f2:	ec06                	sd	ra,24(sp)
+ 4f4:	e822                	sd	s0,16(sp)
+ 4f6:	1000                	addi	s0,sp,32
+ 4f8:	feb407a3          	sb	a1,-17(s0)
+ 4fc:	4605                	li	a2,1
+ 4fe:	fef40593          	addi	a1,s0,-17
+ 502:	f6fff0ef          	jal	470 <write>
+ 506:	60e2                	ld	ra,24(sp)
+ 508:	6442                	ld	s0,16(sp)
+ 50a:	6105                	addi	sp,sp,32
+ 50c:	8082                	ret
+
+000000000000050e <printint>:
+ 50e:	7139                	addi	sp,sp,-64
+ 510:	fc06                	sd	ra,56(sp)
+ 512:	f822                	sd	s0,48(sp)
+ 514:	f426                	sd	s1,40(sp)
+ 516:	0080                	addi	s0,sp,64
+ 518:	84aa                	mv	s1,a0
+ 51a:	c299                	beqz	a3,520 <printint+0x12>
+ 51c:	0805c963          	bltz	a1,5ae <printint+0xa0>
+ 520:	2581                	sext.w	a1,a1
+ 522:	4881                	li	a7,0
+ 524:	fc040693          	addi	a3,s0,-64
+ 528:	4701                	li	a4,0
+ 52a:	2601                	sext.w	a2,a2
+ 52c:	00000517          	auipc	a0,0x0
+ 530:	58c50513          	addi	a0,a0,1420 # ab8 <digits>
+ 534:	883a                	mv	a6,a4
+ 536:	2705                	addiw	a4,a4,1
+ 538:	02c5f7bb          	remuw	a5,a1,a2
+ 53c:	1782                	slli	a5,a5,0x20
+ 53e:	9381                	srli	a5,a5,0x20
+ 540:	97aa                	add	a5,a5,a0
+ 542:	0007c783          	lbu	a5,0(a5)
+ 546:	00f68023          	sb	a5,0(a3)
+ 54a:	0005879b          	sext.w	a5,a1
+ 54e:	02c5d5bb          	divuw	a1,a1,a2
+ 552:	0685                	addi	a3,a3,1
+ 554:	fec7f0e3          	bgeu	a5,a2,534 <printint+0x26>
+ 558:	00088c63          	beqz	a7,570 <printint+0x62>
+ 55c:	fd070793          	addi	a5,a4,-48
+ 560:	00878733          	add	a4,a5,s0
+ 564:	02d00793          	li	a5,45
+ 568:	fef70823          	sb	a5,-16(a4)
+ 56c:	0028071b          	addiw	a4,a6,2
+ 570:	02e05a63          	blez	a4,5a4 <printint+0x96>
+ 574:	f04a                	sd	s2,32(sp)
+ 576:	ec4e                	sd	s3,24(sp)
+ 578:	fc040793          	addi	a5,s0,-64
+ 57c:	00e78933          	add	s2,a5,a4
+ 580:	fff78993          	addi	s3,a5,-1
+ 584:	99ba                	add	s3,s3,a4
+ 586:	377d                	addiw	a4,a4,-1
+ 588:	1702                	slli	a4,a4,0x20
+ 58a:	9301                	srli	a4,a4,0x20
+ 58c:	40e989b3          	sub	s3,s3,a4
+ 590:	fff94583          	lbu	a1,-1(s2)
+ 594:	8526                	mv	a0,s1
+ 596:	f5bff0ef          	jal	4f0 <putc>
+ 59a:	197d                	addi	s2,s2,-1
+ 59c:	ff391ae3          	bne	s2,s3,590 <printint+0x82>
+ 5a0:	7902                	ld	s2,32(sp)
+ 5a2:	69e2                	ld	s3,24(sp)
+ 5a4:	70e2                	ld	ra,56(sp)
+ 5a6:	7442                	ld	s0,48(sp)
+ 5a8:	74a2                	ld	s1,40(sp)
+ 5aa:	6121                	addi	sp,sp,64
+ 5ac:	8082                	ret
+ 5ae:	40b005bb          	negw	a1,a1
+ 5b2:	4885                	li	a7,1
+ 5b4:	bf85                	j	524 <printint+0x16>
+
+00000000000005b6 <vprintf>:
+ 5b6:	711d                	addi	sp,sp,-96
+ 5b8:	ec86                	sd	ra,88(sp)
+ 5ba:	e8a2                	sd	s0,80(sp)
+ 5bc:	e0ca                	sd	s2,64(sp)
+ 5be:	1080                	addi	s0,sp,96
+ 5c0:	0005c903          	lbu	s2,0(a1)
+ 5c4:	26090863          	beqz	s2,834 <vprintf+0x27e>
+ 5c8:	e4a6                	sd	s1,72(sp)
+ 5ca:	fc4e                	sd	s3,56(sp)
+ 5cc:	f852                	sd	s4,48(sp)
+ 5ce:	f456                	sd	s5,40(sp)
+ 5d0:	f05a                	sd	s6,32(sp)
+ 5d2:	ec5e                	sd	s7,24(sp)
+ 5d4:	e862                	sd	s8,16(sp)
+ 5d6:	e466                	sd	s9,8(sp)
+ 5d8:	8b2a                	mv	s6,a0
+ 5da:	8a2e                	mv	s4,a1
+ 5dc:	8bb2                	mv	s7,a2
+ 5de:	4981                	li	s3,0
+ 5e0:	4481                	li	s1,0
+ 5e2:	4701                	li	a4,0
+ 5e4:	02500a93          	li	s5,37
+ 5e8:	06400c13          	li	s8,100
+ 5ec:	06c00c93          	li	s9,108
+ 5f0:	a005                	j	610 <vprintf+0x5a>
+ 5f2:	85ca                	mv	a1,s2
+ 5f4:	855a                	mv	a0,s6
+ 5f6:	efbff0ef          	jal	4f0 <putc>
+ 5fa:	a019                	j	600 <vprintf+0x4a>
+ 5fc:	03598263          	beq	s3,s5,620 <vprintf+0x6a>
+ 600:	2485                	addiw	s1,s1,1
+ 602:	8726                	mv	a4,s1
+ 604:	009a07b3          	add	a5,s4,s1
+ 608:	0007c903          	lbu	s2,0(a5)
+ 60c:	20090c63          	beqz	s2,824 <vprintf+0x26e>
+ 610:	0009079b          	sext.w	a5,s2
+ 614:	fe0994e3          	bnez	s3,5fc <vprintf+0x46>
+ 618:	fd579de3          	bne	a5,s5,5f2 <vprintf+0x3c>
+ 61c:	89be                	mv	s3,a5
+ 61e:	b7cd                	j	600 <vprintf+0x4a>
+ 620:	00ea06b3          	add	a3,s4,a4
+ 624:	0016c683          	lbu	a3,1(a3)
+ 628:	8636                	mv	a2,a3
+ 62a:	c681                	beqz	a3,632 <vprintf+0x7c>
+ 62c:	9752                	add	a4,a4,s4
+ 62e:	00274603          	lbu	a2,2(a4)
+ 632:	03878f63          	beq	a5,s8,670 <vprintf+0xba>
+ 636:	05978963          	beq	a5,s9,688 <vprintf+0xd2>
+ 63a:	07500713          	li	a4,117
+ 63e:	0ee78363          	beq	a5,a4,724 <vprintf+0x16e>
+ 642:	07800713          	li	a4,120
+ 646:	12e78563          	beq	a5,a4,770 <vprintf+0x1ba>
+ 64a:	07000713          	li	a4,112
+ 64e:	14e78a63          	beq	a5,a4,7a2 <vprintf+0x1ec>
+ 652:	07300713          	li	a4,115
+ 656:	18e78a63          	beq	a5,a4,7ea <vprintf+0x234>
+ 65a:	02500713          	li	a4,37
+ 65e:	04e79563          	bne	a5,a4,6a8 <vprintf+0xf2>
+ 662:	02500593          	li	a1,37
+ 666:	855a                	mv	a0,s6
+ 668:	e89ff0ef          	jal	4f0 <putc>
+ 66c:	4981                	li	s3,0
+ 66e:	bf49                	j	600 <vprintf+0x4a>
+ 670:	008b8913          	addi	s2,s7,8
+ 674:	4685                	li	a3,1
+ 676:	4629                	li	a2,10
+ 678:	000ba583          	lw	a1,0(s7)
+ 67c:	855a                	mv	a0,s6
+ 67e:	e91ff0ef          	jal	50e <printint>
+ 682:	8bca                	mv	s7,s2
+ 684:	4981                	li	s3,0
+ 686:	bfad                	j	600 <vprintf+0x4a>
+ 688:	06400793          	li	a5,100
+ 68c:	02f68963          	beq	a3,a5,6be <vprintf+0x108>
+ 690:	06c00793          	li	a5,108
+ 694:	04f68263          	beq	a3,a5,6d8 <vprintf+0x122>
+ 698:	07500793          	li	a5,117
+ 69c:	0af68063          	beq	a3,a5,73c <vprintf+0x186>
+ 6a0:	07800793          	li	a5,120
+ 6a4:	0ef68263          	beq	a3,a5,788 <vprintf+0x1d2>
+ 6a8:	02500593          	li	a1,37
+ 6ac:	855a                	mv	a0,s6
+ 6ae:	e43ff0ef          	jal	4f0 <putc>
+ 6b2:	85ca                	mv	a1,s2
+ 6b4:	855a                	mv	a0,s6
+ 6b6:	e3bff0ef          	jal	4f0 <putc>
+ 6ba:	4981                	li	s3,0
+ 6bc:	b791                	j	600 <vprintf+0x4a>
+ 6be:	008b8913          	addi	s2,s7,8
+ 6c2:	4685                	li	a3,1
+ 6c4:	4629                	li	a2,10
+ 6c6:	000ba583          	lw	a1,0(s7)
+ 6ca:	855a                	mv	a0,s6
+ 6cc:	e43ff0ef          	jal	50e <printint>
+ 6d0:	2485                	addiw	s1,s1,1
+ 6d2:	8bca                	mv	s7,s2
+ 6d4:	4981                	li	s3,0
+ 6d6:	b72d                	j	600 <vprintf+0x4a>
+ 6d8:	06400793          	li	a5,100
+ 6dc:	02f60763          	beq	a2,a5,70a <vprintf+0x154>
+ 6e0:	07500793          	li	a5,117
+ 6e4:	06f60963          	beq	a2,a5,756 <vprintf+0x1a0>
+ 6e8:	07800793          	li	a5,120
+ 6ec:	faf61ee3          	bne	a2,a5,6a8 <vprintf+0xf2>
+ 6f0:	008b8913          	addi	s2,s7,8
+ 6f4:	4681                	li	a3,0
+ 6f6:	4641                	li	a2,16
+ 6f8:	000ba583          	lw	a1,0(s7)
+ 6fc:	855a                	mv	a0,s6
+ 6fe:	e11ff0ef          	jal	50e <printint>
+ 702:	2489                	addiw	s1,s1,2
+ 704:	8bca                	mv	s7,s2
+ 706:	4981                	li	s3,0
+ 708:	bde5                	j	600 <vprintf+0x4a>
+ 70a:	008b8913          	addi	s2,s7,8
+ 70e:	4685                	li	a3,1
+ 710:	4629                	li	a2,10
+ 712:	000ba583          	lw	a1,0(s7)
+ 716:	855a                	mv	a0,s6
+ 718:	df7ff0ef          	jal	50e <printint>
+ 71c:	2489                	addiw	s1,s1,2
+ 71e:	8bca                	mv	s7,s2
+ 720:	4981                	li	s3,0
+ 722:	bdf9                	j	600 <vprintf+0x4a>
+ 724:	008b8913          	addi	s2,s7,8
+ 728:	4681                	li	a3,0
+ 72a:	4629                	li	a2,10
+ 72c:	000ba583          	lw	a1,0(s7)
+ 730:	855a                	mv	a0,s6
+ 732:	dddff0ef          	jal	50e <printint>
+ 736:	8bca                	mv	s7,s2
+ 738:	4981                	li	s3,0
+ 73a:	b5d9                	j	600 <vprintf+0x4a>
+ 73c:	008b8913          	addi	s2,s7,8
+ 740:	4681                	li	a3,0
+ 742:	4629                	li	a2,10
+ 744:	000ba583          	lw	a1,0(s7)
+ 748:	855a                	mv	a0,s6
+ 74a:	dc5ff0ef          	jal	50e <printint>
+ 74e:	2485                	addiw	s1,s1,1
+ 750:	8bca                	mv	s7,s2
+ 752:	4981                	li	s3,0
+ 754:	b575                	j	600 <vprintf+0x4a>
+ 756:	008b8913          	addi	s2,s7,8
+ 75a:	4681                	li	a3,0
+ 75c:	4629                	li	a2,10
+ 75e:	000ba583          	lw	a1,0(s7)
+ 762:	855a                	mv	a0,s6
+ 764:	dabff0ef          	jal	50e <printint>
+ 768:	2489                	addiw	s1,s1,2
+ 76a:	8bca                	mv	s7,s2
+ 76c:	4981                	li	s3,0
+ 76e:	bd49                	j	600 <vprintf+0x4a>
+ 770:	008b8913          	addi	s2,s7,8
+ 774:	4681                	li	a3,0
+ 776:	4641                	li	a2,16
+ 778:	000ba583          	lw	a1,0(s7)
+ 77c:	855a                	mv	a0,s6
+ 77e:	d91ff0ef          	jal	50e <printint>
+ 782:	8bca                	mv	s7,s2
+ 784:	4981                	li	s3,0
+ 786:	bdad                	j	600 <vprintf+0x4a>
+ 788:	008b8913          	addi	s2,s7,8
+ 78c:	4681                	li	a3,0
+ 78e:	4641                	li	a2,16
+ 790:	000ba583          	lw	a1,0(s7)
+ 794:	855a                	mv	a0,s6
+ 796:	d79ff0ef          	jal	50e <printint>
+ 79a:	2485                	addiw	s1,s1,1
+ 79c:	8bca                	mv	s7,s2
+ 79e:	4981                	li	s3,0
+ 7a0:	b585                	j	600 <vprintf+0x4a>
+ 7a2:	e06a                	sd	s10,0(sp)
+ 7a4:	008b8d13          	addi	s10,s7,8
+ 7a8:	000bb983          	ld	s3,0(s7)
+ 7ac:	03000593          	li	a1,48
+ 7b0:	855a                	mv	a0,s6
+ 7b2:	d3fff0ef          	jal	4f0 <putc>
+ 7b6:	07800593          	li	a1,120
+ 7ba:	855a                	mv	a0,s6
+ 7bc:	d35ff0ef          	jal	4f0 <putc>
+ 7c0:	4941                	li	s2,16
+ 7c2:	00000b97          	auipc	s7,0x0
+ 7c6:	2f6b8b93          	addi	s7,s7,758 # ab8 <digits>
+ 7ca:	03c9d793          	srli	a5,s3,0x3c
+ 7ce:	97de                	add	a5,a5,s7
+ 7d0:	0007c583          	lbu	a1,0(a5)
+ 7d4:	855a                	mv	a0,s6
+ 7d6:	d1bff0ef          	jal	4f0 <putc>
+ 7da:	0992                	slli	s3,s3,0x4
+ 7dc:	397d                	addiw	s2,s2,-1
+ 7de:	fe0916e3          	bnez	s2,7ca <vprintf+0x214>
+ 7e2:	8bea                	mv	s7,s10
+ 7e4:	4981                	li	s3,0
+ 7e6:	6d02                	ld	s10,0(sp)
+ 7e8:	bd21                	j	600 <vprintf+0x4a>
+ 7ea:	008b8993          	addi	s3,s7,8
+ 7ee:	000bb903          	ld	s2,0(s7)
+ 7f2:	00090f63          	beqz	s2,810 <vprintf+0x25a>
+ 7f6:	00094583          	lbu	a1,0(s2)
+ 7fa:	c195                	beqz	a1,81e <vprintf+0x268>
+ 7fc:	855a                	mv	a0,s6
+ 7fe:	cf3ff0ef          	jal	4f0 <putc>
+ 802:	0905                	addi	s2,s2,1
+ 804:	00094583          	lbu	a1,0(s2)
+ 808:	f9f5                	bnez	a1,7fc <vprintf+0x246>
+ 80a:	8bce                	mv	s7,s3
+ 80c:	4981                	li	s3,0
+ 80e:	bbcd                	j	600 <vprintf+0x4a>
+ 810:	00000917          	auipc	s2,0x0
+ 814:	2a090913          	addi	s2,s2,672 # ab0 <malloc+0x194>
+ 818:	02800593          	li	a1,40
+ 81c:	b7c5                	j	7fc <vprintf+0x246>
+ 81e:	8bce                	mv	s7,s3
+ 820:	4981                	li	s3,0
+ 822:	bbf9                	j	600 <vprintf+0x4a>
+ 824:	64a6                	ld	s1,72(sp)
+ 826:	79e2                	ld	s3,56(sp)
+ 828:	7a42                	ld	s4,48(sp)
+ 82a:	7aa2                	ld	s5,40(sp)
+ 82c:	7b02                	ld	s6,32(sp)
+ 82e:	6be2                	ld	s7,24(sp)
+ 830:	6c42                	ld	s8,16(sp)
+ 832:	6ca2                	ld	s9,8(sp)
+ 834:	60e6                	ld	ra,88(sp)
+ 836:	6446                	ld	s0,80(sp)
+ 838:	6906                	ld	s2,64(sp)
+ 83a:	6125                	addi	sp,sp,96
+ 83c:	8082                	ret
+
+000000000000083e <fprintf>:
+ 83e:	715d                	addi	sp,sp,-80
+ 840:	ec06                	sd	ra,24(sp)
+ 842:	e822                	sd	s0,16(sp)
+ 844:	1000                	addi	s0,sp,32
+ 846:	e010                	sd	a2,0(s0)
+ 848:	e414                	sd	a3,8(s0)
+ 84a:	e818                	sd	a4,16(s0)
+ 84c:	ec1c                	sd	a5,24(s0)
+ 84e:	03043023          	sd	a6,32(s0)
+ 852:	03143423          	sd	a7,40(s0)
+ 856:	fe843423          	sd	s0,-24(s0)
+ 85a:	8622                	mv	a2,s0
+ 85c:	d5bff0ef          	jal	5b6 <vprintf>
+ 860:	60e2                	ld	ra,24(sp)
+ 862:	6442                	ld	s0,16(sp)
+ 864:	6161                	addi	sp,sp,80
+ 866:	8082                	ret
+
+0000000000000868 <printf>:
+ 868:	711d                	addi	sp,sp,-96
+ 86a:	ec06                	sd	ra,24(sp)
+ 86c:	e822                	sd	s0,16(sp)
+ 86e:	1000                	addi	s0,sp,32
+ 870:	e40c                	sd	a1,8(s0)
+ 872:	e810                	sd	a2,16(s0)
+ 874:	ec14                	sd	a3,24(s0)
+ 876:	f018                	sd	a4,32(s0)
+ 878:	f41c                	sd	a5,40(s0)
+ 87a:	03043823          	sd	a6,48(s0)
+ 87e:	03143c23          	sd	a7,56(s0)
+ 882:	00840613          	addi	a2,s0,8
+ 886:	fec43423          	sd	a2,-24(s0)
+ 88a:	85aa                	mv	a1,a0
+ 88c:	4505                	li	a0,1
+ 88e:	d29ff0ef          	jal	5b6 <vprintf>
+ 892:	60e2                	ld	ra,24(sp)
+ 894:	6442                	ld	s0,16(sp)
+ 896:	6125                	addi	sp,sp,96
+ 898:	8082                	ret
+
+000000000000089a <free>:
+ 89a:	1141                	addi	sp,sp,-16
+ 89c:	e422                	sd	s0,8(sp)
+ 89e:	0800                	addi	s0,sp,16
+ 8a0:	ff050693          	addi	a3,a0,-16
+ 8a4:	00000797          	auipc	a5,0x0
+ 8a8:	75c7b783          	ld	a5,1884(a5) # 1000 <freep>
+ 8ac:	a02d                	j	8d6 <free+0x3c>
+ 8ae:	4618                	lw	a4,8(a2)
+ 8b0:	9f2d                	addw	a4,a4,a1
+ 8b2:	fee52c23          	sw	a4,-8(a0)
+ 8b6:	6398                	ld	a4,0(a5)
+ 8b8:	6310                	ld	a2,0(a4)
+ 8ba:	a83d                	j	8f8 <free+0x5e>
+ 8bc:	ff852703          	lw	a4,-8(a0)
+ 8c0:	9f31                	addw	a4,a4,a2
+ 8c2:	c798                	sw	a4,8(a5)
+ 8c4:	ff053683          	ld	a3,-16(a0)
+ 8c8:	a091                	j	90c <free+0x72>
+ 8ca:	6398                	ld	a4,0(a5)
+ 8cc:	00e7e463          	bltu	a5,a4,8d4 <free+0x3a>
+ 8d0:	00e6ea63          	bltu	a3,a4,8e4 <free+0x4a>
+ 8d4:	87ba                	mv	a5,a4
+ 8d6:	fed7fae3          	bgeu	a5,a3,8ca <free+0x30>
+ 8da:	6398                	ld	a4,0(a5)
+ 8dc:	00e6e463          	bltu	a3,a4,8e4 <free+0x4a>
+ 8e0:	fee7eae3          	bltu	a5,a4,8d4 <free+0x3a>
+ 8e4:	ff852583          	lw	a1,-8(a0)
+ 8e8:	6390                	ld	a2,0(a5)
+ 8ea:	02059813          	slli	a6,a1,0x20
+ 8ee:	01c85713          	srli	a4,a6,0x1c
+ 8f2:	9736                	add	a4,a4,a3
+ 8f4:	fae60de3          	beq	a2,a4,8ae <free+0x14>
+ 8f8:	fec53823          	sd	a2,-16(a0)
+ 8fc:	4790                	lw	a2,8(a5)
+ 8fe:	02061593          	slli	a1,a2,0x20
+ 902:	01c5d713          	srli	a4,a1,0x1c
+ 906:	973e                	add	a4,a4,a5
+ 908:	fae68ae3          	beq	a3,a4,8bc <free+0x22>
+ 90c:	e394                	sd	a3,0(a5)
+ 90e:	00000717          	auipc	a4,0x0
+ 912:	6ef73923          	sd	a5,1778(a4) # 1000 <freep>
+ 916:	6422                	ld	s0,8(sp)
+ 918:	0141                	addi	sp,sp,16
+ 91a:	8082                	ret
+
+000000000000091c <malloc>:
+ 91c:	7139                	addi	sp,sp,-64
+ 91e:	fc06                	sd	ra,56(sp)
+ 920:	f822                	sd	s0,48(sp)
+ 922:	f426                	sd	s1,40(sp)
+ 924:	ec4e                	sd	s3,24(sp)
+ 926:	0080                	addi	s0,sp,64
+ 928:	02051493          	slli	s1,a0,0x20
+ 92c:	9081                	srli	s1,s1,0x20
+ 92e:	04bd                	addi	s1,s1,15
+ 930:	8091                	srli	s1,s1,0x4
+ 932:	0014899b          	addiw	s3,s1,1
+ 936:	0485                	addi	s1,s1,1
+ 938:	00000517          	auipc	a0,0x0
+ 93c:	6c853503          	ld	a0,1736(a0) # 1000 <freep>
+ 940:	c915                	beqz	a0,974 <malloc+0x58>
+ 942:	611c                	ld	a5,0(a0)
+ 944:	4798                	lw	a4,8(a5)
+ 946:	08977a63          	bgeu	a4,s1,9da <malloc+0xbe>
+ 94a:	f04a                	sd	s2,32(sp)
+ 94c:	e852                	sd	s4,16(sp)
+ 94e:	e456                	sd	s5,8(sp)
+ 950:	e05a                	sd	s6,0(sp)
+ 952:	8a4e                	mv	s4,s3
+ 954:	0009871b          	sext.w	a4,s3
+ 958:	6685                	lui	a3,0x1
+ 95a:	00d77363          	bgeu	a4,a3,960 <malloc+0x44>
+ 95e:	6a05                	lui	s4,0x1
+ 960:	000a0b1b          	sext.w	s6,s4
+ 964:	004a1a1b          	slliw	s4,s4,0x4
+ 968:	00000917          	auipc	s2,0x0
+ 96c:	69890913          	addi	s2,s2,1688 # 1000 <freep>
+ 970:	5afd                	li	s5,-1
+ 972:	a081                	j	9b2 <malloc+0x96>
+ 974:	f04a                	sd	s2,32(sp)
+ 976:	e852                	sd	s4,16(sp)
+ 978:	e456                	sd	s5,8(sp)
+ 97a:	e05a                	sd	s6,0(sp)
+ 97c:	00000797          	auipc	a5,0x0
+ 980:	69478793          	addi	a5,a5,1684 # 1010 <base>
+ 984:	00000717          	auipc	a4,0x0
+ 988:	66f73e23          	sd	a5,1660(a4) # 1000 <freep>
+ 98c:	e39c                	sd	a5,0(a5)
+ 98e:	0007a423          	sw	zero,8(a5)
+ 992:	b7c1                	j	952 <malloc+0x36>
+ 994:	6398                	ld	a4,0(a5)
+ 996:	e118                	sd	a4,0(a0)
+ 998:	a8a9                	j	9f2 <malloc+0xd6>
+ 99a:	01652423          	sw	s6,8(a0)
+ 99e:	0541                	addi	a0,a0,16
+ 9a0:	efbff0ef          	jal	89a <free>
+ 9a4:	00093503          	ld	a0,0(s2)
+ 9a8:	c12d                	beqz	a0,a0a <malloc+0xee>
+ 9aa:	611c                	ld	a5,0(a0)
+ 9ac:	4798                	lw	a4,8(a5)
+ 9ae:	02977263          	bgeu	a4,s1,9d2 <malloc+0xb6>
+ 9b2:	00093703          	ld	a4,0(s2)
+ 9b6:	853e                	mv	a0,a5
+ 9b8:	fef719e3          	bne	a4,a5,9aa <malloc+0x8e>
+ 9bc:	8552                	mv	a0,s4
+ 9be:	b1bff0ef          	jal	4d8 <sbrk>
+ 9c2:	fd551ce3          	bne	a0,s5,99a <malloc+0x7e>
+ 9c6:	4501                	li	a0,0
+ 9c8:	7902                	ld	s2,32(sp)
+ 9ca:	6a42                	ld	s4,16(sp)
+ 9cc:	6aa2                	ld	s5,8(sp)
+ 9ce:	6b02                	ld	s6,0(sp)
+ 9d0:	a03d                	j	9fe <malloc+0xe2>
+ 9d2:	7902                	ld	s2,32(sp)
+ 9d4:	6a42                	ld	s4,16(sp)
+ 9d6:	6aa2                	ld	s5,8(sp)
+ 9d8:	6b02                	ld	s6,0(sp)
+ 9da:	fae48de3          	beq	s1,a4,994 <malloc+0x78>
+ 9de:	4137073b          	subw	a4,a4,s3
+ 9e2:	c798                	sw	a4,8(a5)
+ 9e4:	02071693          	slli	a3,a4,0x20
+ 9e8:	01c6d713          	srli	a4,a3,0x1c
+ 9ec:	97ba                	add	a5,a5,a4
+ 9ee:	0137a423          	sw	s3,8(a5)
+ 9f2:	00000717          	auipc	a4,0x0
+ 9f6:	60a73723          	sd	a0,1550(a4) # 1000 <freep>
+ 9fa:	01078513          	addi	a0,a5,16
+ 9fe:	70e2                	ld	ra,56(sp)
+ a00:	7442                	ld	s0,48(sp)
+ a02:	74a2                	ld	s1,40(sp)
+ a04:	69e2                	ld	s3,24(sp)
+ a06:	6121                	addi	sp,sp,64
+ a08:	8082                	ret
+ a0a:	7902                	ld	s2,32(sp)
+ a0c:	6a42                	ld	s4,16(sp)
+ a0e:	6aa2                	ld	s5,8(sp)
+ a10:	6b02                	ld	s6,0(sp)
+ a12:	b7f5                	j	9fe <malloc+0xe2>
diff --git a/xv6-labs-2024/user/find.c b/xv6-labs-2024/user/find.c
new file mode 100644
index 0000000..76f44ab
--- /dev/null
+++ b/xv6-labs-2024/user/find.c
@@ -0,0 +1,92 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+
+int nameComparison(const char *name1, const char *name2) // Hàm so sánh 2 chuỗi có giống nhau hay không 
+{
+	if (strcmp(name1, name2) == 0)
+	{
+		return 1;
+	}
+	return 0;
+}
+
+void
+find(char *fileName, char* currentDir) // currentDir lưu tên của thư mục cha trong khi đệ quy
+{
+	char buf[512], *p;
+    int fd;
+    struct dirent de;
+    struct stat st;
+	
+	if((fd = open(currentDir, O_RDONLY)) < 0)
+	{
+		fprintf(2, "ls: cannot open %s\n", fileName);
+		return;
+	}
+
+	if(fstat(fd, &st) < 0)
+	{
+		fprintf(2, "ls: cannot stat %s\n", fileName);
+		close(fd);
+		return;
+    }
+
+	if(strlen(currentDir) + 1 + DIRSIZ + 1 > sizeof buf)
+	{
+		printf("ls: path too long\n");
+		return;
+	}
+
+    strcpy(buf, currentDir);
+    p = buf+strlen(buf);
+    *p++ = '/';
+
+    while(read(fd, &de, sizeof(de)) == sizeof(de))
+	{
+    	if(de.inum == 0)
+		{
+        	continue;
+		}
+
+		if(nameComparison(de.name, ".") == 1 || nameComparison(de.name, "..") == 1)
+		{
+			continue;
+		}
+
+		memmove(p, de.name, DIRSIZ);
+    	p[DIRSIZ] = 0; // Cập nhật đường dẫn mới tới thư mục con (buf)
+
+    	if(stat(buf, &st) < 0)
+		{
+       		printf("ls: cannot stat %s\n", buf);
+        	continue;
+        }
+
+		if(nameComparison(fileName, de.name) == 1)
+		{
+			printf("%s\n", buf);
+		}
+
+		if(st.type == T_DIR)
+		{
+			find(fileName, buf); // currentDir đã được thay đổi thành buf
+		}
+  	}
+    close(fd);
+}
+
+int
+main(int argc, char *argv[])
+{
+	if (argc != 3)
+	{
+		printf("Error: Arguments do not fit the command parameter(s).\n");
+		exit(0);
+	}
+
+	find(argv[2], argv[1]);
+	exit(0);	
+}
diff --git a/xv6-labs-2024/user/find.d b/xv6-labs-2024/user/find.d
new file mode 100644
index 0000000..c857d33
--- /dev/null
+++ b/xv6-labs-2024/user/find.d
@@ -0,0 +1,2 @@
+user/find.o: user/find.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h kernel/fs.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/find.o b/xv6-labs-2024/user/find.o
new file mode 100644
index 0000000..8a8f8fc
Binary files /dev/null and b/xv6-labs-2024/user/find.o differ
diff --git a/xv6-labs-2024/user/find.sym b/xv6-labs-2024/user/find.sym
new file mode 100644
index 0000000..867a201
--- /dev/null
+++ b/xv6-labs-2024/user/find.sym
@@ -0,0 +1,65 @@
+0000000000000000 .text
+0000000000000a18 .rodata
+0000000000000ad0 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 find.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+00000000000004f0 putc
+000000000000050e printint
+0000000000000ab8 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+00000000000001f8 strcpy
+0000000000000868 printf
+00000000000003a2 memmove
+0000000000000498 mknod
+0000000000000000 nameComparison
+00000000000002b0 gets
+00000000000004d0 getpid
+0000000000000434 memcpy
+000000000000091c malloc
+00000000000004e0 sleep
+0000000000000460 pipe
+0000000000000470 write
+00000000000004a8 fstat
+000000000000083e fprintf
+0000000000000480 kill
+00000000000005b6 vprintf
+00000000000004c0 chdir
+0000000000000488 exec
+0000000000000458 wait
+0000000000000468 read
+00000000000004a0 unlink
+0000000000000018 find
+00000000000003fa memcmp
+0000000000000448 fork
+00000000000004d8 sbrk
+00000000000004e8 uptime
+000000000000026a memset
+00000000000001b6 main
+0000000000000214 strcmp
+00000000000004c8 dup
+0000000000000320 stat
+00000000000004b0 link
+0000000000000450 exit
+00000000000001e6 start
+000000000000035a atoi
+0000000000000240 strlen
+0000000000000490 open
+000000000000028c strchr
+00000000000004b8 mkdir
+0000000000000478 close
+000000000000089a free
diff --git a/xv6-labs-2024/user/forktest.asm b/xv6-labs-2024/user/forktest.asm
new file mode 100644
index 0000000..724fdb0
--- /dev/null
+++ b/xv6-labs-2024/user/forktest.asm
@@ -0,0 +1,621 @@
+
+user/_forktest:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <print>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	e426                	sd	s1,8(sp)
+   8:	1000                	addi	s0,sp,32
+   a:	84aa                	mv	s1,a0
+   c:	124000ef          	jal	130 <strlen>
+  10:	0005061b          	sext.w	a2,a0
+  14:	85a6                	mv	a1,s1
+  16:	4505                	li	a0,1
+  18:	348000ef          	jal	360 <write>
+  1c:	60e2                	ld	ra,24(sp)
+  1e:	6442                	ld	s0,16(sp)
+  20:	64a2                	ld	s1,8(sp)
+  22:	6105                	addi	sp,sp,32
+  24:	8082                	ret
+
+0000000000000026 <forktest>:
+  26:	1101                	addi	sp,sp,-32
+  28:	ec06                	sd	ra,24(sp)
+  2a:	e822                	sd	s0,16(sp)
+  2c:	e426                	sd	s1,8(sp)
+  2e:	e04a                	sd	s2,0(sp)
+  30:	1000                	addi	s0,sp,32
+  32:	00000517          	auipc	a0,0x0
+  36:	3ae50513          	addi	a0,a0,942 # 3e0 <uptime+0x8>
+  3a:	fc7ff0ef          	jal	0 <print>
+  3e:	4481                	li	s1,0
+  40:	3e800913          	li	s2,1000
+  44:	2f4000ef          	jal	338 <fork>
+  48:	04054363          	bltz	a0,8e <forktest+0x68>
+  4c:	cd09                	beqz	a0,66 <forktest+0x40>
+  4e:	2485                	addiw	s1,s1,1
+  50:	ff249ae3          	bne	s1,s2,44 <forktest+0x1e>
+  54:	00000517          	auipc	a0,0x0
+  58:	3dc50513          	addi	a0,a0,988 # 430 <uptime+0x58>
+  5c:	fa5ff0ef          	jal	0 <print>
+  60:	4505                	li	a0,1
+  62:	2de000ef          	jal	340 <exit>
+  66:	2da000ef          	jal	340 <exit>
+  6a:	00000517          	auipc	a0,0x0
+  6e:	38650513          	addi	a0,a0,902 # 3f0 <uptime+0x18>
+  72:	f8fff0ef          	jal	0 <print>
+  76:	4505                	li	a0,1
+  78:	2c8000ef          	jal	340 <exit>
+  7c:	00000517          	auipc	a0,0x0
+  80:	38c50513          	addi	a0,a0,908 # 408 <uptime+0x30>
+  84:	f7dff0ef          	jal	0 <print>
+  88:	4505                	li	a0,1
+  8a:	2b6000ef          	jal	340 <exit>
+  8e:	00905963          	blez	s1,a0 <forktest+0x7a>
+  92:	4501                	li	a0,0
+  94:	2b4000ef          	jal	348 <wait>
+  98:	fc0549e3          	bltz	a0,6a <forktest+0x44>
+  9c:	34fd                	addiw	s1,s1,-1
+  9e:	f8f5                	bnez	s1,92 <forktest+0x6c>
+  a0:	4501                	li	a0,0
+  a2:	2a6000ef          	jal	348 <wait>
+  a6:	57fd                	li	a5,-1
+  a8:	fcf51ae3          	bne	a0,a5,7c <forktest+0x56>
+  ac:	00000517          	auipc	a0,0x0
+  b0:	37450513          	addi	a0,a0,884 # 420 <uptime+0x48>
+  b4:	f4dff0ef          	jal	0 <print>
+  b8:	60e2                	ld	ra,24(sp)
+  ba:	6442                	ld	s0,16(sp)
+  bc:	64a2                	ld	s1,8(sp)
+  be:	6902                	ld	s2,0(sp)
+  c0:	6105                	addi	sp,sp,32
+  c2:	8082                	ret
+
+00000000000000c4 <main>:
+  c4:	1141                	addi	sp,sp,-16
+  c6:	e406                	sd	ra,8(sp)
+  c8:	e022                	sd	s0,0(sp)
+  ca:	0800                	addi	s0,sp,16
+  cc:	f5bff0ef          	jal	26 <forktest>
+  d0:	4501                	li	a0,0
+  d2:	26e000ef          	jal	340 <exit>
+
+00000000000000d6 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  d6:	1141                	addi	sp,sp,-16
+  d8:	e406                	sd	ra,8(sp)
+  da:	e022                	sd	s0,0(sp)
+  dc:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  de:	fe7ff0ef          	jal	c4 <main>
+  exit(0);
+  e2:	4501                	li	a0,0
+  e4:	25c000ef          	jal	340 <exit>
+
+00000000000000e8 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  e8:	1141                	addi	sp,sp,-16
+  ea:	e422                	sd	s0,8(sp)
+  ec:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  ee:	87aa                	mv	a5,a0
+  f0:	0585                	addi	a1,a1,1
+  f2:	0785                	addi	a5,a5,1
+  f4:	fff5c703          	lbu	a4,-1(a1)
+  f8:	fee78fa3          	sb	a4,-1(a5)
+  fc:	fb75                	bnez	a4,f0 <strcpy+0x8>
+    ;
+  return os;
+}
+  fe:	6422                	ld	s0,8(sp)
+ 100:	0141                	addi	sp,sp,16
+ 102:	8082                	ret
+
+0000000000000104 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 104:	1141                	addi	sp,sp,-16
+ 106:	e422                	sd	s0,8(sp)
+ 108:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 10a:	00054783          	lbu	a5,0(a0)
+ 10e:	cb91                	beqz	a5,122 <strcmp+0x1e>
+ 110:	0005c703          	lbu	a4,0(a1)
+ 114:	00f71763          	bne	a4,a5,122 <strcmp+0x1e>
+    p++, q++;
+ 118:	0505                	addi	a0,a0,1
+ 11a:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 11c:	00054783          	lbu	a5,0(a0)
+ 120:	fbe5                	bnez	a5,110 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 122:	0005c503          	lbu	a0,0(a1)
+}
+ 126:	40a7853b          	subw	a0,a5,a0
+ 12a:	6422                	ld	s0,8(sp)
+ 12c:	0141                	addi	sp,sp,16
+ 12e:	8082                	ret
+
+0000000000000130 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 130:	1141                	addi	sp,sp,-16
+ 132:	e422                	sd	s0,8(sp)
+ 134:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 136:	00054783          	lbu	a5,0(a0)
+ 13a:	cf91                	beqz	a5,156 <strlen+0x26>
+ 13c:	0505                	addi	a0,a0,1
+ 13e:	87aa                	mv	a5,a0
+ 140:	86be                	mv	a3,a5
+ 142:	0785                	addi	a5,a5,1
+ 144:	fff7c703          	lbu	a4,-1(a5)
+ 148:	ff65                	bnez	a4,140 <strlen+0x10>
+ 14a:	40a6853b          	subw	a0,a3,a0
+ 14e:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 150:	6422                	ld	s0,8(sp)
+ 152:	0141                	addi	sp,sp,16
+ 154:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 156:	4501                	li	a0,0
+ 158:	bfe5                	j	150 <strlen+0x20>
+
+000000000000015a <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 15a:	1141                	addi	sp,sp,-16
+ 15c:	e422                	sd	s0,8(sp)
+ 15e:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 160:	ca19                	beqz	a2,176 <memset+0x1c>
+ 162:	87aa                	mv	a5,a0
+ 164:	1602                	slli	a2,a2,0x20
+ 166:	9201                	srli	a2,a2,0x20
+ 168:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 16c:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 170:	0785                	addi	a5,a5,1
+ 172:	fee79de3          	bne	a5,a4,16c <memset+0x12>
+  }
+  return dst;
+}
+ 176:	6422                	ld	s0,8(sp)
+ 178:	0141                	addi	sp,sp,16
+ 17a:	8082                	ret
+
+000000000000017c <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 17c:	1141                	addi	sp,sp,-16
+ 17e:	e422                	sd	s0,8(sp)
+ 180:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 182:	00054783          	lbu	a5,0(a0)
+ 186:	cb99                	beqz	a5,19c <strchr+0x20>
+    if(*s == c)
+ 188:	00f58763          	beq	a1,a5,196 <strchr+0x1a>
+  for(; *s; s++)
+ 18c:	0505                	addi	a0,a0,1
+ 18e:	00054783          	lbu	a5,0(a0)
+ 192:	fbfd                	bnez	a5,188 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 194:	4501                	li	a0,0
+}
+ 196:	6422                	ld	s0,8(sp)
+ 198:	0141                	addi	sp,sp,16
+ 19a:	8082                	ret
+  return 0;
+ 19c:	4501                	li	a0,0
+ 19e:	bfe5                	j	196 <strchr+0x1a>
+
+00000000000001a0 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 1a0:	711d                	addi	sp,sp,-96
+ 1a2:	ec86                	sd	ra,88(sp)
+ 1a4:	e8a2                	sd	s0,80(sp)
+ 1a6:	e4a6                	sd	s1,72(sp)
+ 1a8:	e0ca                	sd	s2,64(sp)
+ 1aa:	fc4e                	sd	s3,56(sp)
+ 1ac:	f852                	sd	s4,48(sp)
+ 1ae:	f456                	sd	s5,40(sp)
+ 1b0:	f05a                	sd	s6,32(sp)
+ 1b2:	ec5e                	sd	s7,24(sp)
+ 1b4:	1080                	addi	s0,sp,96
+ 1b6:	8baa                	mv	s7,a0
+ 1b8:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 1ba:	892a                	mv	s2,a0
+ 1bc:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 1be:	4aa9                	li	s5,10
+ 1c0:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 1c2:	89a6                	mv	s3,s1
+ 1c4:	2485                	addiw	s1,s1,1
+ 1c6:	0344d663          	bge	s1,s4,1f2 <gets+0x52>
+    cc = read(0, &c, 1);
+ 1ca:	4605                	li	a2,1
+ 1cc:	faf40593          	addi	a1,s0,-81
+ 1d0:	4501                	li	a0,0
+ 1d2:	186000ef          	jal	358 <read>
+    if(cc < 1)
+ 1d6:	00a05e63          	blez	a0,1f2 <gets+0x52>
+    buf[i++] = c;
+ 1da:	faf44783          	lbu	a5,-81(s0)
+ 1de:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 1e2:	01578763          	beq	a5,s5,1f0 <gets+0x50>
+ 1e6:	0905                	addi	s2,s2,1
+ 1e8:	fd679de3          	bne	a5,s6,1c2 <gets+0x22>
+    buf[i++] = c;
+ 1ec:	89a6                	mv	s3,s1
+ 1ee:	a011                	j	1f2 <gets+0x52>
+ 1f0:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 1f2:	99de                	add	s3,s3,s7
+ 1f4:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 1f8:	855e                	mv	a0,s7
+ 1fa:	60e6                	ld	ra,88(sp)
+ 1fc:	6446                	ld	s0,80(sp)
+ 1fe:	64a6                	ld	s1,72(sp)
+ 200:	6906                	ld	s2,64(sp)
+ 202:	79e2                	ld	s3,56(sp)
+ 204:	7a42                	ld	s4,48(sp)
+ 206:	7aa2                	ld	s5,40(sp)
+ 208:	7b02                	ld	s6,32(sp)
+ 20a:	6be2                	ld	s7,24(sp)
+ 20c:	6125                	addi	sp,sp,96
+ 20e:	8082                	ret
+
+0000000000000210 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 210:	1101                	addi	sp,sp,-32
+ 212:	ec06                	sd	ra,24(sp)
+ 214:	e822                	sd	s0,16(sp)
+ 216:	e04a                	sd	s2,0(sp)
+ 218:	1000                	addi	s0,sp,32
+ 21a:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 21c:	4581                	li	a1,0
+ 21e:	162000ef          	jal	380 <open>
+  if(fd < 0)
+ 222:	02054263          	bltz	a0,246 <stat+0x36>
+ 226:	e426                	sd	s1,8(sp)
+ 228:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 22a:	85ca                	mv	a1,s2
+ 22c:	16c000ef          	jal	398 <fstat>
+ 230:	892a                	mv	s2,a0
+  close(fd);
+ 232:	8526                	mv	a0,s1
+ 234:	134000ef          	jal	368 <close>
+  return r;
+ 238:	64a2                	ld	s1,8(sp)
+}
+ 23a:	854a                	mv	a0,s2
+ 23c:	60e2                	ld	ra,24(sp)
+ 23e:	6442                	ld	s0,16(sp)
+ 240:	6902                	ld	s2,0(sp)
+ 242:	6105                	addi	sp,sp,32
+ 244:	8082                	ret
+    return -1;
+ 246:	597d                	li	s2,-1
+ 248:	bfcd                	j	23a <stat+0x2a>
+
+000000000000024a <atoi>:
+
+int
+atoi(const char *s)
+{
+ 24a:	1141                	addi	sp,sp,-16
+ 24c:	e422                	sd	s0,8(sp)
+ 24e:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 250:	00054683          	lbu	a3,0(a0)
+ 254:	fd06879b          	addiw	a5,a3,-48
+ 258:	0ff7f793          	zext.b	a5,a5
+ 25c:	4625                	li	a2,9
+ 25e:	02f66863          	bltu	a2,a5,28e <atoi+0x44>
+ 262:	872a                	mv	a4,a0
+  n = 0;
+ 264:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 266:	0705                	addi	a4,a4,1
+ 268:	0025179b          	slliw	a5,a0,0x2
+ 26c:	9fa9                	addw	a5,a5,a0
+ 26e:	0017979b          	slliw	a5,a5,0x1
+ 272:	9fb5                	addw	a5,a5,a3
+ 274:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 278:	00074683          	lbu	a3,0(a4)
+ 27c:	fd06879b          	addiw	a5,a3,-48
+ 280:	0ff7f793          	zext.b	a5,a5
+ 284:	fef671e3          	bgeu	a2,a5,266 <atoi+0x1c>
+  return n;
+}
+ 288:	6422                	ld	s0,8(sp)
+ 28a:	0141                	addi	sp,sp,16
+ 28c:	8082                	ret
+  n = 0;
+ 28e:	4501                	li	a0,0
+ 290:	bfe5                	j	288 <atoi+0x3e>
+
+0000000000000292 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 292:	1141                	addi	sp,sp,-16
+ 294:	e422                	sd	s0,8(sp)
+ 296:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 298:	02b57463          	bgeu	a0,a1,2c0 <memmove+0x2e>
+    while(n-- > 0)
+ 29c:	00c05f63          	blez	a2,2ba <memmove+0x28>
+ 2a0:	1602                	slli	a2,a2,0x20
+ 2a2:	9201                	srli	a2,a2,0x20
+ 2a4:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 2a8:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 2aa:	0585                	addi	a1,a1,1
+ 2ac:	0705                	addi	a4,a4,1
+ 2ae:	fff5c683          	lbu	a3,-1(a1)
+ 2b2:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 2b6:	fef71ae3          	bne	a4,a5,2aa <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2ba:	6422                	ld	s0,8(sp)
+ 2bc:	0141                	addi	sp,sp,16
+ 2be:	8082                	ret
+    dst += n;
+ 2c0:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2c4:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2c6:	fec05ae3          	blez	a2,2ba <memmove+0x28>
+ 2ca:	fff6079b          	addiw	a5,a2,-1
+ 2ce:	1782                	slli	a5,a5,0x20
+ 2d0:	9381                	srli	a5,a5,0x20
+ 2d2:	fff7c793          	not	a5,a5
+ 2d6:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 2d8:	15fd                	addi	a1,a1,-1
+ 2da:	177d                	addi	a4,a4,-1
+ 2dc:	0005c683          	lbu	a3,0(a1)
+ 2e0:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 2e4:	fee79ae3          	bne	a5,a4,2d8 <memmove+0x46>
+ 2e8:	bfc9                	j	2ba <memmove+0x28>
+
+00000000000002ea <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 2ea:	1141                	addi	sp,sp,-16
+ 2ec:	e422                	sd	s0,8(sp)
+ 2ee:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 2f0:	ca05                	beqz	a2,320 <memcmp+0x36>
+ 2f2:	fff6069b          	addiw	a3,a2,-1
+ 2f6:	1682                	slli	a3,a3,0x20
+ 2f8:	9281                	srli	a3,a3,0x20
+ 2fa:	0685                	addi	a3,a3,1
+ 2fc:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 2fe:	00054783          	lbu	a5,0(a0)
+ 302:	0005c703          	lbu	a4,0(a1)
+ 306:	00e79863          	bne	a5,a4,316 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 30a:	0505                	addi	a0,a0,1
+    p2++;
+ 30c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 30e:	fed518e3          	bne	a0,a3,2fe <memcmp+0x14>
+  }
+  return 0;
+ 312:	4501                	li	a0,0
+ 314:	a019                	j	31a <memcmp+0x30>
+      return *p1 - *p2;
+ 316:	40e7853b          	subw	a0,a5,a4
+}
+ 31a:	6422                	ld	s0,8(sp)
+ 31c:	0141                	addi	sp,sp,16
+ 31e:	8082                	ret
+  return 0;
+ 320:	4501                	li	a0,0
+ 322:	bfe5                	j	31a <memcmp+0x30>
+
+0000000000000324 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 324:	1141                	addi	sp,sp,-16
+ 326:	e406                	sd	ra,8(sp)
+ 328:	e022                	sd	s0,0(sp)
+ 32a:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 32c:	f67ff0ef          	jal	292 <memmove>
+}
+ 330:	60a2                	ld	ra,8(sp)
+ 332:	6402                	ld	s0,0(sp)
+ 334:	0141                	addi	sp,sp,16
+ 336:	8082                	ret
+
+0000000000000338 <fork>:
+ 338:	4885                	li	a7,1
+ 33a:	00000073          	ecall
+ 33e:	8082                	ret
+
+0000000000000340 <exit>:
+ 340:	4889                	li	a7,2
+ 342:	00000073          	ecall
+ 346:	8082                	ret
+
+0000000000000348 <wait>:
+ 348:	488d                	li	a7,3
+ 34a:	00000073          	ecall
+ 34e:	8082                	ret
+
+0000000000000350 <pipe>:
+ 350:	4891                	li	a7,4
+ 352:	00000073          	ecall
+ 356:	8082                	ret
+
+0000000000000358 <read>:
+ 358:	4895                	li	a7,5
+ 35a:	00000073          	ecall
+ 35e:	8082                	ret
+
+0000000000000360 <write>:
+ 360:	48c1                	li	a7,16
+ 362:	00000073          	ecall
+ 366:	8082                	ret
+
+0000000000000368 <close>:
+ 368:	48d5                	li	a7,21
+ 36a:	00000073          	ecall
+ 36e:	8082                	ret
+
+0000000000000370 <kill>:
+ 370:	4899                	li	a7,6
+ 372:	00000073          	ecall
+ 376:	8082                	ret
+
+0000000000000378 <exec>:
+ 378:	489d                	li	a7,7
+ 37a:	00000073          	ecall
+ 37e:	8082                	ret
+
+0000000000000380 <open>:
+ 380:	48bd                	li	a7,15
+ 382:	00000073          	ecall
+ 386:	8082                	ret
+
+0000000000000388 <mknod>:
+ 388:	48c5                	li	a7,17
+ 38a:	00000073          	ecall
+ 38e:	8082                	ret
+
+0000000000000390 <unlink>:
+ 390:	48c9                	li	a7,18
+ 392:	00000073          	ecall
+ 396:	8082                	ret
+
+0000000000000398 <fstat>:
+ 398:	48a1                	li	a7,8
+ 39a:	00000073          	ecall
+ 39e:	8082                	ret
+
+00000000000003a0 <link>:
+ 3a0:	48cd                	li	a7,19
+ 3a2:	00000073          	ecall
+ 3a6:	8082                	ret
+
+00000000000003a8 <mkdir>:
+ 3a8:	48d1                	li	a7,20
+ 3aa:	00000073          	ecall
+ 3ae:	8082                	ret
+
+00000000000003b0 <chdir>:
+ 3b0:	48a5                	li	a7,9
+ 3b2:	00000073          	ecall
+ 3b6:	8082                	ret
+
+00000000000003b8 <dup>:
+ 3b8:	48a9                	li	a7,10
+ 3ba:	00000073          	ecall
+ 3be:	8082                	ret
+
+00000000000003c0 <getpid>:
+ 3c0:	48ad                	li	a7,11
+ 3c2:	00000073          	ecall
+ 3c6:	8082                	ret
+
+00000000000003c8 <sbrk>:
+ 3c8:	48b1                	li	a7,12
+ 3ca:	00000073          	ecall
+ 3ce:	8082                	ret
+
+00000000000003d0 <sleep>:
+ 3d0:	48b5                	li	a7,13
+ 3d2:	00000073          	ecall
+ 3d6:	8082                	ret
+
+00000000000003d8 <uptime>:
+ 3d8:	48b9                	li	a7,14
+ 3da:	00000073          	ecall
+ 3de:	8082                	ret
diff --git a/xv6-labs-2024/user/forktest.c b/xv6-labs-2024/user/forktest.c
new file mode 100644
index 0000000..384e75f
--- /dev/null
+++ b/xv6-labs-2024/user/forktest.c
@@ -0,0 +1,56 @@
+// Test that fork fails gracefully.
+// Tiny executable so that the limit can be filling the proc table.
+
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+#define N  1000
+
+void
+print(const char *s)
+{
+  write(1, s, strlen(s));
+}
+
+void
+forktest(void)
+{
+  int n, pid;
+
+  print("fork test\n");
+
+  for(n=0; n<N; n++){
+    pid = fork();
+    if(pid < 0)
+      break;
+    if(pid == 0)
+      exit(0);
+  }
+
+  if(n == N){
+    print("fork claimed to work N times!\n");
+    exit(1);
+  }
+
+  for(; n > 0; n--){
+    if(wait(0) < 0){
+      print("wait stopped early\n");
+      exit(1);
+    }
+  }
+
+  if(wait(0) != -1){
+    print("wait got too many\n");
+    exit(1);
+  }
+
+  print("fork test OK\n");
+}
+
+int
+main(void)
+{
+  forktest();
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/forktest.d b/xv6-labs-2024/user/forktest.d
new file mode 100644
index 0000000..b796849
--- /dev/null
+++ b/xv6-labs-2024/user/forktest.d
@@ -0,0 +1,3 @@
+user/forktest.o: user/forktest.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/forktest.o b/xv6-labs-2024/user/forktest.o
new file mode 100644
index 0000000..609a07c
Binary files /dev/null and b/xv6-labs-2024/user/forktest.o differ
diff --git a/xv6-labs-2024/user/grep.asm b/xv6-labs-2024/user/grep.asm
new file mode 100644
index 0000000..39c63c8
--- /dev/null
+++ b/xv6-labs-2024/user/grep.asm
@@ -0,0 +1,1261 @@
+
+user/_grep:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <matchstar>:
+   0:	7179                	addi	sp,sp,-48
+   2:	f406                	sd	ra,40(sp)
+   4:	f022                	sd	s0,32(sp)
+   6:	ec26                	sd	s1,24(sp)
+   8:	e84a                	sd	s2,16(sp)
+   a:	e44e                	sd	s3,8(sp)
+   c:	e052                	sd	s4,0(sp)
+   e:	1800                	addi	s0,sp,48
+  10:	892a                	mv	s2,a0
+  12:	89ae                	mv	s3,a1
+  14:	84b2                	mv	s1,a2
+  16:	02e00a13          	li	s4,46
+  1a:	85a6                	mv	a1,s1
+  1c:	854e                	mv	a0,s3
+  1e:	02c000ef          	jal	4a <matchhere>
+  22:	e919                	bnez	a0,38 <matchstar+0x38>
+  24:	0004c783          	lbu	a5,0(s1)
+  28:	cb89                	beqz	a5,3a <matchstar+0x3a>
+  2a:	0485                	addi	s1,s1,1
+  2c:	2781                	sext.w	a5,a5
+  2e:	ff2786e3          	beq	a5,s2,1a <matchstar+0x1a>
+  32:	ff4904e3          	beq	s2,s4,1a <matchstar+0x1a>
+  36:	a011                	j	3a <matchstar+0x3a>
+  38:	4505                	li	a0,1
+  3a:	70a2                	ld	ra,40(sp)
+  3c:	7402                	ld	s0,32(sp)
+  3e:	64e2                	ld	s1,24(sp)
+  40:	6942                	ld	s2,16(sp)
+  42:	69a2                	ld	s3,8(sp)
+  44:	6a02                	ld	s4,0(sp)
+  46:	6145                	addi	sp,sp,48
+  48:	8082                	ret
+
+000000000000004a <matchhere>:
+  4a:	00054703          	lbu	a4,0(a0)
+  4e:	c73d                	beqz	a4,bc <matchhere+0x72>
+  50:	1141                	addi	sp,sp,-16
+  52:	e406                	sd	ra,8(sp)
+  54:	e022                	sd	s0,0(sp)
+  56:	0800                	addi	s0,sp,16
+  58:	87aa                	mv	a5,a0
+  5a:	00154683          	lbu	a3,1(a0)
+  5e:	02a00613          	li	a2,42
+  62:	02c68563          	beq	a3,a2,8c <matchhere+0x42>
+  66:	02400613          	li	a2,36
+  6a:	02c70863          	beq	a4,a2,9a <matchhere+0x50>
+  6e:	0005c683          	lbu	a3,0(a1)
+  72:	4501                	li	a0,0
+  74:	ca81                	beqz	a3,84 <matchhere+0x3a>
+  76:	02e00613          	li	a2,46
+  7a:	02c70b63          	beq	a4,a2,b0 <matchhere+0x66>
+  7e:	4501                	li	a0,0
+  80:	02d70863          	beq	a4,a3,b0 <matchhere+0x66>
+  84:	60a2                	ld	ra,8(sp)
+  86:	6402                	ld	s0,0(sp)
+  88:	0141                	addi	sp,sp,16
+  8a:	8082                	ret
+  8c:	862e                	mv	a2,a1
+  8e:	00250593          	addi	a1,a0,2
+  92:	853a                	mv	a0,a4
+  94:	f6dff0ef          	jal	0 <matchstar>
+  98:	b7f5                	j	84 <matchhere+0x3a>
+  9a:	c691                	beqz	a3,a6 <matchhere+0x5c>
+  9c:	0005c683          	lbu	a3,0(a1)
+  a0:	fef9                	bnez	a3,7e <matchhere+0x34>
+  a2:	4501                	li	a0,0
+  a4:	b7c5                	j	84 <matchhere+0x3a>
+  a6:	0005c503          	lbu	a0,0(a1)
+  aa:	00153513          	seqz	a0,a0
+  ae:	bfd9                	j	84 <matchhere+0x3a>
+  b0:	0585                	addi	a1,a1,1
+  b2:	00178513          	addi	a0,a5,1
+  b6:	f95ff0ef          	jal	4a <matchhere>
+  ba:	b7e9                	j	84 <matchhere+0x3a>
+  bc:	4505                	li	a0,1
+  be:	8082                	ret
+
+00000000000000c0 <match>:
+  c0:	1101                	addi	sp,sp,-32
+  c2:	ec06                	sd	ra,24(sp)
+  c4:	e822                	sd	s0,16(sp)
+  c6:	e426                	sd	s1,8(sp)
+  c8:	e04a                	sd	s2,0(sp)
+  ca:	1000                	addi	s0,sp,32
+  cc:	892a                	mv	s2,a0
+  ce:	84ae                	mv	s1,a1
+  d0:	00054703          	lbu	a4,0(a0)
+  d4:	05e00793          	li	a5,94
+  d8:	00f70c63          	beq	a4,a5,f0 <match+0x30>
+  dc:	85a6                	mv	a1,s1
+  de:	854a                	mv	a0,s2
+  e0:	f6bff0ef          	jal	4a <matchhere>
+  e4:	e911                	bnez	a0,f8 <match+0x38>
+  e6:	0485                	addi	s1,s1,1
+  e8:	fff4c783          	lbu	a5,-1(s1)
+  ec:	fbe5                	bnez	a5,dc <match+0x1c>
+  ee:	a031                	j	fa <match+0x3a>
+  f0:	0505                	addi	a0,a0,1
+  f2:	f59ff0ef          	jal	4a <matchhere>
+  f6:	a011                	j	fa <match+0x3a>
+  f8:	4505                	li	a0,1
+  fa:	60e2                	ld	ra,24(sp)
+  fc:	6442                	ld	s0,16(sp)
+  fe:	64a2                	ld	s1,8(sp)
+ 100:	6902                	ld	s2,0(sp)
+ 102:	6105                	addi	sp,sp,32
+ 104:	8082                	ret
+
+0000000000000106 <grep>:
+ 106:	715d                	addi	sp,sp,-80
+ 108:	e486                	sd	ra,72(sp)
+ 10a:	e0a2                	sd	s0,64(sp)
+ 10c:	fc26                	sd	s1,56(sp)
+ 10e:	f84a                	sd	s2,48(sp)
+ 110:	f44e                	sd	s3,40(sp)
+ 112:	f052                	sd	s4,32(sp)
+ 114:	ec56                	sd	s5,24(sp)
+ 116:	e85a                	sd	s6,16(sp)
+ 118:	e45e                	sd	s7,8(sp)
+ 11a:	e062                	sd	s8,0(sp)
+ 11c:	0880                	addi	s0,sp,80
+ 11e:	89aa                	mv	s3,a0
+ 120:	8b2e                	mv	s6,a1
+ 122:	4a01                	li	s4,0
+ 124:	3ff00b93          	li	s7,1023
+ 128:	00001a97          	auipc	s5,0x1
+ 12c:	ee8a8a93          	addi	s5,s5,-280 # 1010 <buf>
+ 130:	a835                	j	16c <grep+0x66>
+ 132:	00148913          	addi	s2,s1,1
+ 136:	45a9                	li	a1,10
+ 138:	854a                	mv	a0,s2
+ 13a:	1c6000ef          	jal	300 <strchr>
+ 13e:	84aa                	mv	s1,a0
+ 140:	c505                	beqz	a0,168 <grep+0x62>
+ 142:	00048023          	sb	zero,0(s1)
+ 146:	85ca                	mv	a1,s2
+ 148:	854e                	mv	a0,s3
+ 14a:	f77ff0ef          	jal	c0 <match>
+ 14e:	d175                	beqz	a0,132 <grep+0x2c>
+ 150:	47a9                	li	a5,10
+ 152:	00f48023          	sb	a5,0(s1)
+ 156:	00148613          	addi	a2,s1,1
+ 15a:	4126063b          	subw	a2,a2,s2
+ 15e:	85ca                	mv	a1,s2
+ 160:	4505                	li	a0,1
+ 162:	382000ef          	jal	4e4 <write>
+ 166:	b7f1                	j	132 <grep+0x2c>
+ 168:	03404563          	bgtz	s4,192 <grep+0x8c>
+ 16c:	414b863b          	subw	a2,s7,s4
+ 170:	014a85b3          	add	a1,s5,s4
+ 174:	855a                	mv	a0,s6
+ 176:	366000ef          	jal	4dc <read>
+ 17a:	02a05963          	blez	a0,1ac <grep+0xa6>
+ 17e:	00aa0c3b          	addw	s8,s4,a0
+ 182:	000c0a1b          	sext.w	s4,s8
+ 186:	014a87b3          	add	a5,s5,s4
+ 18a:	00078023          	sb	zero,0(a5)
+ 18e:	8956                	mv	s2,s5
+ 190:	b75d                	j	136 <grep+0x30>
+ 192:	00001517          	auipc	a0,0x1
+ 196:	e7e50513          	addi	a0,a0,-386 # 1010 <buf>
+ 19a:	40a90a33          	sub	s4,s2,a0
+ 19e:	414c0a3b          	subw	s4,s8,s4
+ 1a2:	8652                	mv	a2,s4
+ 1a4:	85ca                	mv	a1,s2
+ 1a6:	270000ef          	jal	416 <memmove>
+ 1aa:	b7c9                	j	16c <grep+0x66>
+ 1ac:	60a6                	ld	ra,72(sp)
+ 1ae:	6406                	ld	s0,64(sp)
+ 1b0:	74e2                	ld	s1,56(sp)
+ 1b2:	7942                	ld	s2,48(sp)
+ 1b4:	79a2                	ld	s3,40(sp)
+ 1b6:	7a02                	ld	s4,32(sp)
+ 1b8:	6ae2                	ld	s5,24(sp)
+ 1ba:	6b42                	ld	s6,16(sp)
+ 1bc:	6ba2                	ld	s7,8(sp)
+ 1be:	6c02                	ld	s8,0(sp)
+ 1c0:	6161                	addi	sp,sp,80
+ 1c2:	8082                	ret
+
+00000000000001c4 <main>:
+ 1c4:	7179                	addi	sp,sp,-48
+ 1c6:	f406                	sd	ra,40(sp)
+ 1c8:	f022                	sd	s0,32(sp)
+ 1ca:	ec26                	sd	s1,24(sp)
+ 1cc:	e84a                	sd	s2,16(sp)
+ 1ce:	e44e                	sd	s3,8(sp)
+ 1d0:	e052                	sd	s4,0(sp)
+ 1d2:	1800                	addi	s0,sp,48
+ 1d4:	4785                	li	a5,1
+ 1d6:	04a7d663          	bge	a5,a0,222 <main+0x5e>
+ 1da:	0085ba03          	ld	s4,8(a1)
+ 1de:	4789                	li	a5,2
+ 1e0:	04a7db63          	bge	a5,a0,236 <main+0x72>
+ 1e4:	01058913          	addi	s2,a1,16
+ 1e8:	ffd5099b          	addiw	s3,a0,-3
+ 1ec:	02099793          	slli	a5,s3,0x20
+ 1f0:	01d7d993          	srli	s3,a5,0x1d
+ 1f4:	05e1                	addi	a1,a1,24
+ 1f6:	99ae                	add	s3,s3,a1
+ 1f8:	4581                	li	a1,0
+ 1fa:	00093503          	ld	a0,0(s2)
+ 1fe:	306000ef          	jal	504 <open>
+ 202:	84aa                	mv	s1,a0
+ 204:	04054063          	bltz	a0,244 <main+0x80>
+ 208:	85aa                	mv	a1,a0
+ 20a:	8552                	mv	a0,s4
+ 20c:	efbff0ef          	jal	106 <grep>
+ 210:	8526                	mv	a0,s1
+ 212:	2da000ef          	jal	4ec <close>
+ 216:	0921                	addi	s2,s2,8
+ 218:	ff3910e3          	bne	s2,s3,1f8 <main+0x34>
+ 21c:	4501                	li	a0,0
+ 21e:	2a6000ef          	jal	4c4 <exit>
+ 222:	00001597          	auipc	a1,0x1
+ 226:	86e58593          	addi	a1,a1,-1938 # a90 <malloc+0x100>
+ 22a:	4509                	li	a0,2
+ 22c:	686000ef          	jal	8b2 <fprintf>
+ 230:	4505                	li	a0,1
+ 232:	292000ef          	jal	4c4 <exit>
+ 236:	4581                	li	a1,0
+ 238:	8552                	mv	a0,s4
+ 23a:	ecdff0ef          	jal	106 <grep>
+ 23e:	4501                	li	a0,0
+ 240:	284000ef          	jal	4c4 <exit>
+ 244:	00093583          	ld	a1,0(s2)
+ 248:	00001517          	auipc	a0,0x1
+ 24c:	86850513          	addi	a0,a0,-1944 # ab0 <malloc+0x120>
+ 250:	68c000ef          	jal	8dc <printf>
+ 254:	4505                	li	a0,1
+ 256:	26e000ef          	jal	4c4 <exit>
+
+000000000000025a <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 25a:	1141                	addi	sp,sp,-16
+ 25c:	e406                	sd	ra,8(sp)
+ 25e:	e022                	sd	s0,0(sp)
+ 260:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 262:	f63ff0ef          	jal	1c4 <main>
+  exit(0);
+ 266:	4501                	li	a0,0
+ 268:	25c000ef          	jal	4c4 <exit>
+
+000000000000026c <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 26c:	1141                	addi	sp,sp,-16
+ 26e:	e422                	sd	s0,8(sp)
+ 270:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 272:	87aa                	mv	a5,a0
+ 274:	0585                	addi	a1,a1,1
+ 276:	0785                	addi	a5,a5,1
+ 278:	fff5c703          	lbu	a4,-1(a1)
+ 27c:	fee78fa3          	sb	a4,-1(a5)
+ 280:	fb75                	bnez	a4,274 <strcpy+0x8>
+    ;
+  return os;
+}
+ 282:	6422                	ld	s0,8(sp)
+ 284:	0141                	addi	sp,sp,16
+ 286:	8082                	ret
+
+0000000000000288 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 288:	1141                	addi	sp,sp,-16
+ 28a:	e422                	sd	s0,8(sp)
+ 28c:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 28e:	00054783          	lbu	a5,0(a0)
+ 292:	cb91                	beqz	a5,2a6 <strcmp+0x1e>
+ 294:	0005c703          	lbu	a4,0(a1)
+ 298:	00f71763          	bne	a4,a5,2a6 <strcmp+0x1e>
+    p++, q++;
+ 29c:	0505                	addi	a0,a0,1
+ 29e:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 2a0:	00054783          	lbu	a5,0(a0)
+ 2a4:	fbe5                	bnez	a5,294 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 2a6:	0005c503          	lbu	a0,0(a1)
+}
+ 2aa:	40a7853b          	subw	a0,a5,a0
+ 2ae:	6422                	ld	s0,8(sp)
+ 2b0:	0141                	addi	sp,sp,16
+ 2b2:	8082                	ret
+
+00000000000002b4 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 2b4:	1141                	addi	sp,sp,-16
+ 2b6:	e422                	sd	s0,8(sp)
+ 2b8:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 2ba:	00054783          	lbu	a5,0(a0)
+ 2be:	cf91                	beqz	a5,2da <strlen+0x26>
+ 2c0:	0505                	addi	a0,a0,1
+ 2c2:	87aa                	mv	a5,a0
+ 2c4:	86be                	mv	a3,a5
+ 2c6:	0785                	addi	a5,a5,1
+ 2c8:	fff7c703          	lbu	a4,-1(a5)
+ 2cc:	ff65                	bnez	a4,2c4 <strlen+0x10>
+ 2ce:	40a6853b          	subw	a0,a3,a0
+ 2d2:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 2d4:	6422                	ld	s0,8(sp)
+ 2d6:	0141                	addi	sp,sp,16
+ 2d8:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 2da:	4501                	li	a0,0
+ 2dc:	bfe5                	j	2d4 <strlen+0x20>
+
+00000000000002de <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 2de:	1141                	addi	sp,sp,-16
+ 2e0:	e422                	sd	s0,8(sp)
+ 2e2:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 2e4:	ca19                	beqz	a2,2fa <memset+0x1c>
+ 2e6:	87aa                	mv	a5,a0
+ 2e8:	1602                	slli	a2,a2,0x20
+ 2ea:	9201                	srli	a2,a2,0x20
+ 2ec:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 2f0:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 2f4:	0785                	addi	a5,a5,1
+ 2f6:	fee79de3          	bne	a5,a4,2f0 <memset+0x12>
+  }
+  return dst;
+}
+ 2fa:	6422                	ld	s0,8(sp)
+ 2fc:	0141                	addi	sp,sp,16
+ 2fe:	8082                	ret
+
+0000000000000300 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 300:	1141                	addi	sp,sp,-16
+ 302:	e422                	sd	s0,8(sp)
+ 304:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 306:	00054783          	lbu	a5,0(a0)
+ 30a:	cb99                	beqz	a5,320 <strchr+0x20>
+    if(*s == c)
+ 30c:	00f58763          	beq	a1,a5,31a <strchr+0x1a>
+  for(; *s; s++)
+ 310:	0505                	addi	a0,a0,1
+ 312:	00054783          	lbu	a5,0(a0)
+ 316:	fbfd                	bnez	a5,30c <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 318:	4501                	li	a0,0
+}
+ 31a:	6422                	ld	s0,8(sp)
+ 31c:	0141                	addi	sp,sp,16
+ 31e:	8082                	ret
+  return 0;
+ 320:	4501                	li	a0,0
+ 322:	bfe5                	j	31a <strchr+0x1a>
+
+0000000000000324 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 324:	711d                	addi	sp,sp,-96
+ 326:	ec86                	sd	ra,88(sp)
+ 328:	e8a2                	sd	s0,80(sp)
+ 32a:	e4a6                	sd	s1,72(sp)
+ 32c:	e0ca                	sd	s2,64(sp)
+ 32e:	fc4e                	sd	s3,56(sp)
+ 330:	f852                	sd	s4,48(sp)
+ 332:	f456                	sd	s5,40(sp)
+ 334:	f05a                	sd	s6,32(sp)
+ 336:	ec5e                	sd	s7,24(sp)
+ 338:	1080                	addi	s0,sp,96
+ 33a:	8baa                	mv	s7,a0
+ 33c:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 33e:	892a                	mv	s2,a0
+ 340:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 342:	4aa9                	li	s5,10
+ 344:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 346:	89a6                	mv	s3,s1
+ 348:	2485                	addiw	s1,s1,1
+ 34a:	0344d663          	bge	s1,s4,376 <gets+0x52>
+    cc = read(0, &c, 1);
+ 34e:	4605                	li	a2,1
+ 350:	faf40593          	addi	a1,s0,-81
+ 354:	4501                	li	a0,0
+ 356:	186000ef          	jal	4dc <read>
+    if(cc < 1)
+ 35a:	00a05e63          	blez	a0,376 <gets+0x52>
+    buf[i++] = c;
+ 35e:	faf44783          	lbu	a5,-81(s0)
+ 362:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 366:	01578763          	beq	a5,s5,374 <gets+0x50>
+ 36a:	0905                	addi	s2,s2,1
+ 36c:	fd679de3          	bne	a5,s6,346 <gets+0x22>
+    buf[i++] = c;
+ 370:	89a6                	mv	s3,s1
+ 372:	a011                	j	376 <gets+0x52>
+ 374:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 376:	99de                	add	s3,s3,s7
+ 378:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 37c:	855e                	mv	a0,s7
+ 37e:	60e6                	ld	ra,88(sp)
+ 380:	6446                	ld	s0,80(sp)
+ 382:	64a6                	ld	s1,72(sp)
+ 384:	6906                	ld	s2,64(sp)
+ 386:	79e2                	ld	s3,56(sp)
+ 388:	7a42                	ld	s4,48(sp)
+ 38a:	7aa2                	ld	s5,40(sp)
+ 38c:	7b02                	ld	s6,32(sp)
+ 38e:	6be2                	ld	s7,24(sp)
+ 390:	6125                	addi	sp,sp,96
+ 392:	8082                	ret
+
+0000000000000394 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 394:	1101                	addi	sp,sp,-32
+ 396:	ec06                	sd	ra,24(sp)
+ 398:	e822                	sd	s0,16(sp)
+ 39a:	e04a                	sd	s2,0(sp)
+ 39c:	1000                	addi	s0,sp,32
+ 39e:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 3a0:	4581                	li	a1,0
+ 3a2:	162000ef          	jal	504 <open>
+  if(fd < 0)
+ 3a6:	02054263          	bltz	a0,3ca <stat+0x36>
+ 3aa:	e426                	sd	s1,8(sp)
+ 3ac:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 3ae:	85ca                	mv	a1,s2
+ 3b0:	16c000ef          	jal	51c <fstat>
+ 3b4:	892a                	mv	s2,a0
+  close(fd);
+ 3b6:	8526                	mv	a0,s1
+ 3b8:	134000ef          	jal	4ec <close>
+  return r;
+ 3bc:	64a2                	ld	s1,8(sp)
+}
+ 3be:	854a                	mv	a0,s2
+ 3c0:	60e2                	ld	ra,24(sp)
+ 3c2:	6442                	ld	s0,16(sp)
+ 3c4:	6902                	ld	s2,0(sp)
+ 3c6:	6105                	addi	sp,sp,32
+ 3c8:	8082                	ret
+    return -1;
+ 3ca:	597d                	li	s2,-1
+ 3cc:	bfcd                	j	3be <stat+0x2a>
+
+00000000000003ce <atoi>:
+
+int
+atoi(const char *s)
+{
+ 3ce:	1141                	addi	sp,sp,-16
+ 3d0:	e422                	sd	s0,8(sp)
+ 3d2:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 3d4:	00054683          	lbu	a3,0(a0)
+ 3d8:	fd06879b          	addiw	a5,a3,-48
+ 3dc:	0ff7f793          	zext.b	a5,a5
+ 3e0:	4625                	li	a2,9
+ 3e2:	02f66863          	bltu	a2,a5,412 <atoi+0x44>
+ 3e6:	872a                	mv	a4,a0
+  n = 0;
+ 3e8:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 3ea:	0705                	addi	a4,a4,1
+ 3ec:	0025179b          	slliw	a5,a0,0x2
+ 3f0:	9fa9                	addw	a5,a5,a0
+ 3f2:	0017979b          	slliw	a5,a5,0x1
+ 3f6:	9fb5                	addw	a5,a5,a3
+ 3f8:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 3fc:	00074683          	lbu	a3,0(a4)
+ 400:	fd06879b          	addiw	a5,a3,-48
+ 404:	0ff7f793          	zext.b	a5,a5
+ 408:	fef671e3          	bgeu	a2,a5,3ea <atoi+0x1c>
+  return n;
+}
+ 40c:	6422                	ld	s0,8(sp)
+ 40e:	0141                	addi	sp,sp,16
+ 410:	8082                	ret
+  n = 0;
+ 412:	4501                	li	a0,0
+ 414:	bfe5                	j	40c <atoi+0x3e>
+
+0000000000000416 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 416:	1141                	addi	sp,sp,-16
+ 418:	e422                	sd	s0,8(sp)
+ 41a:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 41c:	02b57463          	bgeu	a0,a1,444 <memmove+0x2e>
+    while(n-- > 0)
+ 420:	00c05f63          	blez	a2,43e <memmove+0x28>
+ 424:	1602                	slli	a2,a2,0x20
+ 426:	9201                	srli	a2,a2,0x20
+ 428:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 42c:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 42e:	0585                	addi	a1,a1,1
+ 430:	0705                	addi	a4,a4,1
+ 432:	fff5c683          	lbu	a3,-1(a1)
+ 436:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 43a:	fef71ae3          	bne	a4,a5,42e <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 43e:	6422                	ld	s0,8(sp)
+ 440:	0141                	addi	sp,sp,16
+ 442:	8082                	ret
+    dst += n;
+ 444:	00c50733          	add	a4,a0,a2
+    src += n;
+ 448:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 44a:	fec05ae3          	blez	a2,43e <memmove+0x28>
+ 44e:	fff6079b          	addiw	a5,a2,-1
+ 452:	1782                	slli	a5,a5,0x20
+ 454:	9381                	srli	a5,a5,0x20
+ 456:	fff7c793          	not	a5,a5
+ 45a:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 45c:	15fd                	addi	a1,a1,-1
+ 45e:	177d                	addi	a4,a4,-1
+ 460:	0005c683          	lbu	a3,0(a1)
+ 464:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 468:	fee79ae3          	bne	a5,a4,45c <memmove+0x46>
+ 46c:	bfc9                	j	43e <memmove+0x28>
+
+000000000000046e <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 46e:	1141                	addi	sp,sp,-16
+ 470:	e422                	sd	s0,8(sp)
+ 472:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 474:	ca05                	beqz	a2,4a4 <memcmp+0x36>
+ 476:	fff6069b          	addiw	a3,a2,-1
+ 47a:	1682                	slli	a3,a3,0x20
+ 47c:	9281                	srli	a3,a3,0x20
+ 47e:	0685                	addi	a3,a3,1
+ 480:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 482:	00054783          	lbu	a5,0(a0)
+ 486:	0005c703          	lbu	a4,0(a1)
+ 48a:	00e79863          	bne	a5,a4,49a <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 48e:	0505                	addi	a0,a0,1
+    p2++;
+ 490:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 492:	fed518e3          	bne	a0,a3,482 <memcmp+0x14>
+  }
+  return 0;
+ 496:	4501                	li	a0,0
+ 498:	a019                	j	49e <memcmp+0x30>
+      return *p1 - *p2;
+ 49a:	40e7853b          	subw	a0,a5,a4
+}
+ 49e:	6422                	ld	s0,8(sp)
+ 4a0:	0141                	addi	sp,sp,16
+ 4a2:	8082                	ret
+  return 0;
+ 4a4:	4501                	li	a0,0
+ 4a6:	bfe5                	j	49e <memcmp+0x30>
+
+00000000000004a8 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 4a8:	1141                	addi	sp,sp,-16
+ 4aa:	e406                	sd	ra,8(sp)
+ 4ac:	e022                	sd	s0,0(sp)
+ 4ae:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 4b0:	f67ff0ef          	jal	416 <memmove>
+}
+ 4b4:	60a2                	ld	ra,8(sp)
+ 4b6:	6402                	ld	s0,0(sp)
+ 4b8:	0141                	addi	sp,sp,16
+ 4ba:	8082                	ret
+
+00000000000004bc <fork>:
+ 4bc:	4885                	li	a7,1
+ 4be:	00000073          	ecall
+ 4c2:	8082                	ret
+
+00000000000004c4 <exit>:
+ 4c4:	4889                	li	a7,2
+ 4c6:	00000073          	ecall
+ 4ca:	8082                	ret
+
+00000000000004cc <wait>:
+ 4cc:	488d                	li	a7,3
+ 4ce:	00000073          	ecall
+ 4d2:	8082                	ret
+
+00000000000004d4 <pipe>:
+ 4d4:	4891                	li	a7,4
+ 4d6:	00000073          	ecall
+ 4da:	8082                	ret
+
+00000000000004dc <read>:
+ 4dc:	4895                	li	a7,5
+ 4de:	00000073          	ecall
+ 4e2:	8082                	ret
+
+00000000000004e4 <write>:
+ 4e4:	48c1                	li	a7,16
+ 4e6:	00000073          	ecall
+ 4ea:	8082                	ret
+
+00000000000004ec <close>:
+ 4ec:	48d5                	li	a7,21
+ 4ee:	00000073          	ecall
+ 4f2:	8082                	ret
+
+00000000000004f4 <kill>:
+ 4f4:	4899                	li	a7,6
+ 4f6:	00000073          	ecall
+ 4fa:	8082                	ret
+
+00000000000004fc <exec>:
+ 4fc:	489d                	li	a7,7
+ 4fe:	00000073          	ecall
+ 502:	8082                	ret
+
+0000000000000504 <open>:
+ 504:	48bd                	li	a7,15
+ 506:	00000073          	ecall
+ 50a:	8082                	ret
+
+000000000000050c <mknod>:
+ 50c:	48c5                	li	a7,17
+ 50e:	00000073          	ecall
+ 512:	8082                	ret
+
+0000000000000514 <unlink>:
+ 514:	48c9                	li	a7,18
+ 516:	00000073          	ecall
+ 51a:	8082                	ret
+
+000000000000051c <fstat>:
+ 51c:	48a1                	li	a7,8
+ 51e:	00000073          	ecall
+ 522:	8082                	ret
+
+0000000000000524 <link>:
+ 524:	48cd                	li	a7,19
+ 526:	00000073          	ecall
+ 52a:	8082                	ret
+
+000000000000052c <mkdir>:
+ 52c:	48d1                	li	a7,20
+ 52e:	00000073          	ecall
+ 532:	8082                	ret
+
+0000000000000534 <chdir>:
+ 534:	48a5                	li	a7,9
+ 536:	00000073          	ecall
+ 53a:	8082                	ret
+
+000000000000053c <dup>:
+ 53c:	48a9                	li	a7,10
+ 53e:	00000073          	ecall
+ 542:	8082                	ret
+
+0000000000000544 <getpid>:
+ 544:	48ad                	li	a7,11
+ 546:	00000073          	ecall
+ 54a:	8082                	ret
+
+000000000000054c <sbrk>:
+ 54c:	48b1                	li	a7,12
+ 54e:	00000073          	ecall
+ 552:	8082                	ret
+
+0000000000000554 <sleep>:
+ 554:	48b5                	li	a7,13
+ 556:	00000073          	ecall
+ 55a:	8082                	ret
+
+000000000000055c <uptime>:
+ 55c:	48b9                	li	a7,14
+ 55e:	00000073          	ecall
+ 562:	8082                	ret
+
+0000000000000564 <putc>:
+ 564:	1101                	addi	sp,sp,-32
+ 566:	ec06                	sd	ra,24(sp)
+ 568:	e822                	sd	s0,16(sp)
+ 56a:	1000                	addi	s0,sp,32
+ 56c:	feb407a3          	sb	a1,-17(s0)
+ 570:	4605                	li	a2,1
+ 572:	fef40593          	addi	a1,s0,-17
+ 576:	f6fff0ef          	jal	4e4 <write>
+ 57a:	60e2                	ld	ra,24(sp)
+ 57c:	6442                	ld	s0,16(sp)
+ 57e:	6105                	addi	sp,sp,32
+ 580:	8082                	ret
+
+0000000000000582 <printint>:
+ 582:	7139                	addi	sp,sp,-64
+ 584:	fc06                	sd	ra,56(sp)
+ 586:	f822                	sd	s0,48(sp)
+ 588:	f426                	sd	s1,40(sp)
+ 58a:	0080                	addi	s0,sp,64
+ 58c:	84aa                	mv	s1,a0
+ 58e:	c299                	beqz	a3,594 <printint+0x12>
+ 590:	0805c963          	bltz	a1,622 <printint+0xa0>
+ 594:	2581                	sext.w	a1,a1
+ 596:	4881                	li	a7,0
+ 598:	fc040693          	addi	a3,s0,-64
+ 59c:	4701                	li	a4,0
+ 59e:	2601                	sext.w	a2,a2
+ 5a0:	00000517          	auipc	a0,0x0
+ 5a4:	53050513          	addi	a0,a0,1328 # ad0 <digits>
+ 5a8:	883a                	mv	a6,a4
+ 5aa:	2705                	addiw	a4,a4,1
+ 5ac:	02c5f7bb          	remuw	a5,a1,a2
+ 5b0:	1782                	slli	a5,a5,0x20
+ 5b2:	9381                	srli	a5,a5,0x20
+ 5b4:	97aa                	add	a5,a5,a0
+ 5b6:	0007c783          	lbu	a5,0(a5)
+ 5ba:	00f68023          	sb	a5,0(a3)
+ 5be:	0005879b          	sext.w	a5,a1
+ 5c2:	02c5d5bb          	divuw	a1,a1,a2
+ 5c6:	0685                	addi	a3,a3,1
+ 5c8:	fec7f0e3          	bgeu	a5,a2,5a8 <printint+0x26>
+ 5cc:	00088c63          	beqz	a7,5e4 <printint+0x62>
+ 5d0:	fd070793          	addi	a5,a4,-48
+ 5d4:	00878733          	add	a4,a5,s0
+ 5d8:	02d00793          	li	a5,45
+ 5dc:	fef70823          	sb	a5,-16(a4)
+ 5e0:	0028071b          	addiw	a4,a6,2
+ 5e4:	02e05a63          	blez	a4,618 <printint+0x96>
+ 5e8:	f04a                	sd	s2,32(sp)
+ 5ea:	ec4e                	sd	s3,24(sp)
+ 5ec:	fc040793          	addi	a5,s0,-64
+ 5f0:	00e78933          	add	s2,a5,a4
+ 5f4:	fff78993          	addi	s3,a5,-1
+ 5f8:	99ba                	add	s3,s3,a4
+ 5fa:	377d                	addiw	a4,a4,-1
+ 5fc:	1702                	slli	a4,a4,0x20
+ 5fe:	9301                	srli	a4,a4,0x20
+ 600:	40e989b3          	sub	s3,s3,a4
+ 604:	fff94583          	lbu	a1,-1(s2)
+ 608:	8526                	mv	a0,s1
+ 60a:	f5bff0ef          	jal	564 <putc>
+ 60e:	197d                	addi	s2,s2,-1
+ 610:	ff391ae3          	bne	s2,s3,604 <printint+0x82>
+ 614:	7902                	ld	s2,32(sp)
+ 616:	69e2                	ld	s3,24(sp)
+ 618:	70e2                	ld	ra,56(sp)
+ 61a:	7442                	ld	s0,48(sp)
+ 61c:	74a2                	ld	s1,40(sp)
+ 61e:	6121                	addi	sp,sp,64
+ 620:	8082                	ret
+ 622:	40b005bb          	negw	a1,a1
+ 626:	4885                	li	a7,1
+ 628:	bf85                	j	598 <printint+0x16>
+
+000000000000062a <vprintf>:
+ 62a:	711d                	addi	sp,sp,-96
+ 62c:	ec86                	sd	ra,88(sp)
+ 62e:	e8a2                	sd	s0,80(sp)
+ 630:	e0ca                	sd	s2,64(sp)
+ 632:	1080                	addi	s0,sp,96
+ 634:	0005c903          	lbu	s2,0(a1)
+ 638:	26090863          	beqz	s2,8a8 <vprintf+0x27e>
+ 63c:	e4a6                	sd	s1,72(sp)
+ 63e:	fc4e                	sd	s3,56(sp)
+ 640:	f852                	sd	s4,48(sp)
+ 642:	f456                	sd	s5,40(sp)
+ 644:	f05a                	sd	s6,32(sp)
+ 646:	ec5e                	sd	s7,24(sp)
+ 648:	e862                	sd	s8,16(sp)
+ 64a:	e466                	sd	s9,8(sp)
+ 64c:	8b2a                	mv	s6,a0
+ 64e:	8a2e                	mv	s4,a1
+ 650:	8bb2                	mv	s7,a2
+ 652:	4981                	li	s3,0
+ 654:	4481                	li	s1,0
+ 656:	4701                	li	a4,0
+ 658:	02500a93          	li	s5,37
+ 65c:	06400c13          	li	s8,100
+ 660:	06c00c93          	li	s9,108
+ 664:	a005                	j	684 <vprintf+0x5a>
+ 666:	85ca                	mv	a1,s2
+ 668:	855a                	mv	a0,s6
+ 66a:	efbff0ef          	jal	564 <putc>
+ 66e:	a019                	j	674 <vprintf+0x4a>
+ 670:	03598263          	beq	s3,s5,694 <vprintf+0x6a>
+ 674:	2485                	addiw	s1,s1,1
+ 676:	8726                	mv	a4,s1
+ 678:	009a07b3          	add	a5,s4,s1
+ 67c:	0007c903          	lbu	s2,0(a5)
+ 680:	20090c63          	beqz	s2,898 <vprintf+0x26e>
+ 684:	0009079b          	sext.w	a5,s2
+ 688:	fe0994e3          	bnez	s3,670 <vprintf+0x46>
+ 68c:	fd579de3          	bne	a5,s5,666 <vprintf+0x3c>
+ 690:	89be                	mv	s3,a5
+ 692:	b7cd                	j	674 <vprintf+0x4a>
+ 694:	00ea06b3          	add	a3,s4,a4
+ 698:	0016c683          	lbu	a3,1(a3)
+ 69c:	8636                	mv	a2,a3
+ 69e:	c681                	beqz	a3,6a6 <vprintf+0x7c>
+ 6a0:	9752                	add	a4,a4,s4
+ 6a2:	00274603          	lbu	a2,2(a4)
+ 6a6:	03878f63          	beq	a5,s8,6e4 <vprintf+0xba>
+ 6aa:	05978963          	beq	a5,s9,6fc <vprintf+0xd2>
+ 6ae:	07500713          	li	a4,117
+ 6b2:	0ee78363          	beq	a5,a4,798 <vprintf+0x16e>
+ 6b6:	07800713          	li	a4,120
+ 6ba:	12e78563          	beq	a5,a4,7e4 <vprintf+0x1ba>
+ 6be:	07000713          	li	a4,112
+ 6c2:	14e78a63          	beq	a5,a4,816 <vprintf+0x1ec>
+ 6c6:	07300713          	li	a4,115
+ 6ca:	18e78a63          	beq	a5,a4,85e <vprintf+0x234>
+ 6ce:	02500713          	li	a4,37
+ 6d2:	04e79563          	bne	a5,a4,71c <vprintf+0xf2>
+ 6d6:	02500593          	li	a1,37
+ 6da:	855a                	mv	a0,s6
+ 6dc:	e89ff0ef          	jal	564 <putc>
+ 6e0:	4981                	li	s3,0
+ 6e2:	bf49                	j	674 <vprintf+0x4a>
+ 6e4:	008b8913          	addi	s2,s7,8
+ 6e8:	4685                	li	a3,1
+ 6ea:	4629                	li	a2,10
+ 6ec:	000ba583          	lw	a1,0(s7)
+ 6f0:	855a                	mv	a0,s6
+ 6f2:	e91ff0ef          	jal	582 <printint>
+ 6f6:	8bca                	mv	s7,s2
+ 6f8:	4981                	li	s3,0
+ 6fa:	bfad                	j	674 <vprintf+0x4a>
+ 6fc:	06400793          	li	a5,100
+ 700:	02f68963          	beq	a3,a5,732 <vprintf+0x108>
+ 704:	06c00793          	li	a5,108
+ 708:	04f68263          	beq	a3,a5,74c <vprintf+0x122>
+ 70c:	07500793          	li	a5,117
+ 710:	0af68063          	beq	a3,a5,7b0 <vprintf+0x186>
+ 714:	07800793          	li	a5,120
+ 718:	0ef68263          	beq	a3,a5,7fc <vprintf+0x1d2>
+ 71c:	02500593          	li	a1,37
+ 720:	855a                	mv	a0,s6
+ 722:	e43ff0ef          	jal	564 <putc>
+ 726:	85ca                	mv	a1,s2
+ 728:	855a                	mv	a0,s6
+ 72a:	e3bff0ef          	jal	564 <putc>
+ 72e:	4981                	li	s3,0
+ 730:	b791                	j	674 <vprintf+0x4a>
+ 732:	008b8913          	addi	s2,s7,8
+ 736:	4685                	li	a3,1
+ 738:	4629                	li	a2,10
+ 73a:	000ba583          	lw	a1,0(s7)
+ 73e:	855a                	mv	a0,s6
+ 740:	e43ff0ef          	jal	582 <printint>
+ 744:	2485                	addiw	s1,s1,1
+ 746:	8bca                	mv	s7,s2
+ 748:	4981                	li	s3,0
+ 74a:	b72d                	j	674 <vprintf+0x4a>
+ 74c:	06400793          	li	a5,100
+ 750:	02f60763          	beq	a2,a5,77e <vprintf+0x154>
+ 754:	07500793          	li	a5,117
+ 758:	06f60963          	beq	a2,a5,7ca <vprintf+0x1a0>
+ 75c:	07800793          	li	a5,120
+ 760:	faf61ee3          	bne	a2,a5,71c <vprintf+0xf2>
+ 764:	008b8913          	addi	s2,s7,8
+ 768:	4681                	li	a3,0
+ 76a:	4641                	li	a2,16
+ 76c:	000ba583          	lw	a1,0(s7)
+ 770:	855a                	mv	a0,s6
+ 772:	e11ff0ef          	jal	582 <printint>
+ 776:	2489                	addiw	s1,s1,2
+ 778:	8bca                	mv	s7,s2
+ 77a:	4981                	li	s3,0
+ 77c:	bde5                	j	674 <vprintf+0x4a>
+ 77e:	008b8913          	addi	s2,s7,8
+ 782:	4685                	li	a3,1
+ 784:	4629                	li	a2,10
+ 786:	000ba583          	lw	a1,0(s7)
+ 78a:	855a                	mv	a0,s6
+ 78c:	df7ff0ef          	jal	582 <printint>
+ 790:	2489                	addiw	s1,s1,2
+ 792:	8bca                	mv	s7,s2
+ 794:	4981                	li	s3,0
+ 796:	bdf9                	j	674 <vprintf+0x4a>
+ 798:	008b8913          	addi	s2,s7,8
+ 79c:	4681                	li	a3,0
+ 79e:	4629                	li	a2,10
+ 7a0:	000ba583          	lw	a1,0(s7)
+ 7a4:	855a                	mv	a0,s6
+ 7a6:	dddff0ef          	jal	582 <printint>
+ 7aa:	8bca                	mv	s7,s2
+ 7ac:	4981                	li	s3,0
+ 7ae:	b5d9                	j	674 <vprintf+0x4a>
+ 7b0:	008b8913          	addi	s2,s7,8
+ 7b4:	4681                	li	a3,0
+ 7b6:	4629                	li	a2,10
+ 7b8:	000ba583          	lw	a1,0(s7)
+ 7bc:	855a                	mv	a0,s6
+ 7be:	dc5ff0ef          	jal	582 <printint>
+ 7c2:	2485                	addiw	s1,s1,1
+ 7c4:	8bca                	mv	s7,s2
+ 7c6:	4981                	li	s3,0
+ 7c8:	b575                	j	674 <vprintf+0x4a>
+ 7ca:	008b8913          	addi	s2,s7,8
+ 7ce:	4681                	li	a3,0
+ 7d0:	4629                	li	a2,10
+ 7d2:	000ba583          	lw	a1,0(s7)
+ 7d6:	855a                	mv	a0,s6
+ 7d8:	dabff0ef          	jal	582 <printint>
+ 7dc:	2489                	addiw	s1,s1,2
+ 7de:	8bca                	mv	s7,s2
+ 7e0:	4981                	li	s3,0
+ 7e2:	bd49                	j	674 <vprintf+0x4a>
+ 7e4:	008b8913          	addi	s2,s7,8
+ 7e8:	4681                	li	a3,0
+ 7ea:	4641                	li	a2,16
+ 7ec:	000ba583          	lw	a1,0(s7)
+ 7f0:	855a                	mv	a0,s6
+ 7f2:	d91ff0ef          	jal	582 <printint>
+ 7f6:	8bca                	mv	s7,s2
+ 7f8:	4981                	li	s3,0
+ 7fa:	bdad                	j	674 <vprintf+0x4a>
+ 7fc:	008b8913          	addi	s2,s7,8
+ 800:	4681                	li	a3,0
+ 802:	4641                	li	a2,16
+ 804:	000ba583          	lw	a1,0(s7)
+ 808:	855a                	mv	a0,s6
+ 80a:	d79ff0ef          	jal	582 <printint>
+ 80e:	2485                	addiw	s1,s1,1
+ 810:	8bca                	mv	s7,s2
+ 812:	4981                	li	s3,0
+ 814:	b585                	j	674 <vprintf+0x4a>
+ 816:	e06a                	sd	s10,0(sp)
+ 818:	008b8d13          	addi	s10,s7,8
+ 81c:	000bb983          	ld	s3,0(s7)
+ 820:	03000593          	li	a1,48
+ 824:	855a                	mv	a0,s6
+ 826:	d3fff0ef          	jal	564 <putc>
+ 82a:	07800593          	li	a1,120
+ 82e:	855a                	mv	a0,s6
+ 830:	d35ff0ef          	jal	564 <putc>
+ 834:	4941                	li	s2,16
+ 836:	00000b97          	auipc	s7,0x0
+ 83a:	29ab8b93          	addi	s7,s7,666 # ad0 <digits>
+ 83e:	03c9d793          	srli	a5,s3,0x3c
+ 842:	97de                	add	a5,a5,s7
+ 844:	0007c583          	lbu	a1,0(a5)
+ 848:	855a                	mv	a0,s6
+ 84a:	d1bff0ef          	jal	564 <putc>
+ 84e:	0992                	slli	s3,s3,0x4
+ 850:	397d                	addiw	s2,s2,-1
+ 852:	fe0916e3          	bnez	s2,83e <vprintf+0x214>
+ 856:	8bea                	mv	s7,s10
+ 858:	4981                	li	s3,0
+ 85a:	6d02                	ld	s10,0(sp)
+ 85c:	bd21                	j	674 <vprintf+0x4a>
+ 85e:	008b8993          	addi	s3,s7,8
+ 862:	000bb903          	ld	s2,0(s7)
+ 866:	00090f63          	beqz	s2,884 <vprintf+0x25a>
+ 86a:	00094583          	lbu	a1,0(s2)
+ 86e:	c195                	beqz	a1,892 <vprintf+0x268>
+ 870:	855a                	mv	a0,s6
+ 872:	cf3ff0ef          	jal	564 <putc>
+ 876:	0905                	addi	s2,s2,1
+ 878:	00094583          	lbu	a1,0(s2)
+ 87c:	f9f5                	bnez	a1,870 <vprintf+0x246>
+ 87e:	8bce                	mv	s7,s3
+ 880:	4981                	li	s3,0
+ 882:	bbcd                	j	674 <vprintf+0x4a>
+ 884:	00000917          	auipc	s2,0x0
+ 888:	24490913          	addi	s2,s2,580 # ac8 <malloc+0x138>
+ 88c:	02800593          	li	a1,40
+ 890:	b7c5                	j	870 <vprintf+0x246>
+ 892:	8bce                	mv	s7,s3
+ 894:	4981                	li	s3,0
+ 896:	bbf9                	j	674 <vprintf+0x4a>
+ 898:	64a6                	ld	s1,72(sp)
+ 89a:	79e2                	ld	s3,56(sp)
+ 89c:	7a42                	ld	s4,48(sp)
+ 89e:	7aa2                	ld	s5,40(sp)
+ 8a0:	7b02                	ld	s6,32(sp)
+ 8a2:	6be2                	ld	s7,24(sp)
+ 8a4:	6c42                	ld	s8,16(sp)
+ 8a6:	6ca2                	ld	s9,8(sp)
+ 8a8:	60e6                	ld	ra,88(sp)
+ 8aa:	6446                	ld	s0,80(sp)
+ 8ac:	6906                	ld	s2,64(sp)
+ 8ae:	6125                	addi	sp,sp,96
+ 8b0:	8082                	ret
+
+00000000000008b2 <fprintf>:
+ 8b2:	715d                	addi	sp,sp,-80
+ 8b4:	ec06                	sd	ra,24(sp)
+ 8b6:	e822                	sd	s0,16(sp)
+ 8b8:	1000                	addi	s0,sp,32
+ 8ba:	e010                	sd	a2,0(s0)
+ 8bc:	e414                	sd	a3,8(s0)
+ 8be:	e818                	sd	a4,16(s0)
+ 8c0:	ec1c                	sd	a5,24(s0)
+ 8c2:	03043023          	sd	a6,32(s0)
+ 8c6:	03143423          	sd	a7,40(s0)
+ 8ca:	fe843423          	sd	s0,-24(s0)
+ 8ce:	8622                	mv	a2,s0
+ 8d0:	d5bff0ef          	jal	62a <vprintf>
+ 8d4:	60e2                	ld	ra,24(sp)
+ 8d6:	6442                	ld	s0,16(sp)
+ 8d8:	6161                	addi	sp,sp,80
+ 8da:	8082                	ret
+
+00000000000008dc <printf>:
+ 8dc:	711d                	addi	sp,sp,-96
+ 8de:	ec06                	sd	ra,24(sp)
+ 8e0:	e822                	sd	s0,16(sp)
+ 8e2:	1000                	addi	s0,sp,32
+ 8e4:	e40c                	sd	a1,8(s0)
+ 8e6:	e810                	sd	a2,16(s0)
+ 8e8:	ec14                	sd	a3,24(s0)
+ 8ea:	f018                	sd	a4,32(s0)
+ 8ec:	f41c                	sd	a5,40(s0)
+ 8ee:	03043823          	sd	a6,48(s0)
+ 8f2:	03143c23          	sd	a7,56(s0)
+ 8f6:	00840613          	addi	a2,s0,8
+ 8fa:	fec43423          	sd	a2,-24(s0)
+ 8fe:	85aa                	mv	a1,a0
+ 900:	4505                	li	a0,1
+ 902:	d29ff0ef          	jal	62a <vprintf>
+ 906:	60e2                	ld	ra,24(sp)
+ 908:	6442                	ld	s0,16(sp)
+ 90a:	6125                	addi	sp,sp,96
+ 90c:	8082                	ret
+
+000000000000090e <free>:
+ 90e:	1141                	addi	sp,sp,-16
+ 910:	e422                	sd	s0,8(sp)
+ 912:	0800                	addi	s0,sp,16
+ 914:	ff050693          	addi	a3,a0,-16
+ 918:	00000797          	auipc	a5,0x0
+ 91c:	6e87b783          	ld	a5,1768(a5) # 1000 <freep>
+ 920:	a02d                	j	94a <free+0x3c>
+ 922:	4618                	lw	a4,8(a2)
+ 924:	9f2d                	addw	a4,a4,a1
+ 926:	fee52c23          	sw	a4,-8(a0)
+ 92a:	6398                	ld	a4,0(a5)
+ 92c:	6310                	ld	a2,0(a4)
+ 92e:	a83d                	j	96c <free+0x5e>
+ 930:	ff852703          	lw	a4,-8(a0)
+ 934:	9f31                	addw	a4,a4,a2
+ 936:	c798                	sw	a4,8(a5)
+ 938:	ff053683          	ld	a3,-16(a0)
+ 93c:	a091                	j	980 <free+0x72>
+ 93e:	6398                	ld	a4,0(a5)
+ 940:	00e7e463          	bltu	a5,a4,948 <free+0x3a>
+ 944:	00e6ea63          	bltu	a3,a4,958 <free+0x4a>
+ 948:	87ba                	mv	a5,a4
+ 94a:	fed7fae3          	bgeu	a5,a3,93e <free+0x30>
+ 94e:	6398                	ld	a4,0(a5)
+ 950:	00e6e463          	bltu	a3,a4,958 <free+0x4a>
+ 954:	fee7eae3          	bltu	a5,a4,948 <free+0x3a>
+ 958:	ff852583          	lw	a1,-8(a0)
+ 95c:	6390                	ld	a2,0(a5)
+ 95e:	02059813          	slli	a6,a1,0x20
+ 962:	01c85713          	srli	a4,a6,0x1c
+ 966:	9736                	add	a4,a4,a3
+ 968:	fae60de3          	beq	a2,a4,922 <free+0x14>
+ 96c:	fec53823          	sd	a2,-16(a0)
+ 970:	4790                	lw	a2,8(a5)
+ 972:	02061593          	slli	a1,a2,0x20
+ 976:	01c5d713          	srli	a4,a1,0x1c
+ 97a:	973e                	add	a4,a4,a5
+ 97c:	fae68ae3          	beq	a3,a4,930 <free+0x22>
+ 980:	e394                	sd	a3,0(a5)
+ 982:	00000717          	auipc	a4,0x0
+ 986:	66f73f23          	sd	a5,1662(a4) # 1000 <freep>
+ 98a:	6422                	ld	s0,8(sp)
+ 98c:	0141                	addi	sp,sp,16
+ 98e:	8082                	ret
+
+0000000000000990 <malloc>:
+ 990:	7139                	addi	sp,sp,-64
+ 992:	fc06                	sd	ra,56(sp)
+ 994:	f822                	sd	s0,48(sp)
+ 996:	f426                	sd	s1,40(sp)
+ 998:	ec4e                	sd	s3,24(sp)
+ 99a:	0080                	addi	s0,sp,64
+ 99c:	02051493          	slli	s1,a0,0x20
+ 9a0:	9081                	srli	s1,s1,0x20
+ 9a2:	04bd                	addi	s1,s1,15
+ 9a4:	8091                	srli	s1,s1,0x4
+ 9a6:	0014899b          	addiw	s3,s1,1
+ 9aa:	0485                	addi	s1,s1,1
+ 9ac:	00000517          	auipc	a0,0x0
+ 9b0:	65453503          	ld	a0,1620(a0) # 1000 <freep>
+ 9b4:	c915                	beqz	a0,9e8 <malloc+0x58>
+ 9b6:	611c                	ld	a5,0(a0)
+ 9b8:	4798                	lw	a4,8(a5)
+ 9ba:	08977a63          	bgeu	a4,s1,a4e <malloc+0xbe>
+ 9be:	f04a                	sd	s2,32(sp)
+ 9c0:	e852                	sd	s4,16(sp)
+ 9c2:	e456                	sd	s5,8(sp)
+ 9c4:	e05a                	sd	s6,0(sp)
+ 9c6:	8a4e                	mv	s4,s3
+ 9c8:	0009871b          	sext.w	a4,s3
+ 9cc:	6685                	lui	a3,0x1
+ 9ce:	00d77363          	bgeu	a4,a3,9d4 <malloc+0x44>
+ 9d2:	6a05                	lui	s4,0x1
+ 9d4:	000a0b1b          	sext.w	s6,s4
+ 9d8:	004a1a1b          	slliw	s4,s4,0x4
+ 9dc:	00000917          	auipc	s2,0x0
+ 9e0:	62490913          	addi	s2,s2,1572 # 1000 <freep>
+ 9e4:	5afd                	li	s5,-1
+ 9e6:	a081                	j	a26 <malloc+0x96>
+ 9e8:	f04a                	sd	s2,32(sp)
+ 9ea:	e852                	sd	s4,16(sp)
+ 9ec:	e456                	sd	s5,8(sp)
+ 9ee:	e05a                	sd	s6,0(sp)
+ 9f0:	00001797          	auipc	a5,0x1
+ 9f4:	a2078793          	addi	a5,a5,-1504 # 1410 <base>
+ 9f8:	00000717          	auipc	a4,0x0
+ 9fc:	60f73423          	sd	a5,1544(a4) # 1000 <freep>
+ a00:	e39c                	sd	a5,0(a5)
+ a02:	0007a423          	sw	zero,8(a5)
+ a06:	b7c1                	j	9c6 <malloc+0x36>
+ a08:	6398                	ld	a4,0(a5)
+ a0a:	e118                	sd	a4,0(a0)
+ a0c:	a8a9                	j	a66 <malloc+0xd6>
+ a0e:	01652423          	sw	s6,8(a0)
+ a12:	0541                	addi	a0,a0,16
+ a14:	efbff0ef          	jal	90e <free>
+ a18:	00093503          	ld	a0,0(s2)
+ a1c:	c12d                	beqz	a0,a7e <malloc+0xee>
+ a1e:	611c                	ld	a5,0(a0)
+ a20:	4798                	lw	a4,8(a5)
+ a22:	02977263          	bgeu	a4,s1,a46 <malloc+0xb6>
+ a26:	00093703          	ld	a4,0(s2)
+ a2a:	853e                	mv	a0,a5
+ a2c:	fef719e3          	bne	a4,a5,a1e <malloc+0x8e>
+ a30:	8552                	mv	a0,s4
+ a32:	b1bff0ef          	jal	54c <sbrk>
+ a36:	fd551ce3          	bne	a0,s5,a0e <malloc+0x7e>
+ a3a:	4501                	li	a0,0
+ a3c:	7902                	ld	s2,32(sp)
+ a3e:	6a42                	ld	s4,16(sp)
+ a40:	6aa2                	ld	s5,8(sp)
+ a42:	6b02                	ld	s6,0(sp)
+ a44:	a03d                	j	a72 <malloc+0xe2>
+ a46:	7902                	ld	s2,32(sp)
+ a48:	6a42                	ld	s4,16(sp)
+ a4a:	6aa2                	ld	s5,8(sp)
+ a4c:	6b02                	ld	s6,0(sp)
+ a4e:	fae48de3          	beq	s1,a4,a08 <malloc+0x78>
+ a52:	4137073b          	subw	a4,a4,s3
+ a56:	c798                	sw	a4,8(a5)
+ a58:	02071693          	slli	a3,a4,0x20
+ a5c:	01c6d713          	srli	a4,a3,0x1c
+ a60:	97ba                	add	a5,a5,a4
+ a62:	0137a423          	sw	s3,8(a5)
+ a66:	00000717          	auipc	a4,0x0
+ a6a:	58a73d23          	sd	a0,1434(a4) # 1000 <freep>
+ a6e:	01078513          	addi	a0,a5,16
+ a72:	70e2                	ld	ra,56(sp)
+ a74:	7442                	ld	s0,48(sp)
+ a76:	74a2                	ld	s1,40(sp)
+ a78:	69e2                	ld	s3,24(sp)
+ a7a:	6121                	addi	sp,sp,64
+ a7c:	8082                	ret
+ a7e:	7902                	ld	s2,32(sp)
+ a80:	6a42                	ld	s4,16(sp)
+ a82:	6aa2                	ld	s5,8(sp)
+ a84:	6b02                	ld	s6,0(sp)
+ a86:	b7f5                	j	a72 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/grep.c b/xv6-labs-2024/user/grep.c
new file mode 100644
index 0000000..6c33766
--- /dev/null
+++ b/xv6-labs-2024/user/grep.c
@@ -0,0 +1,107 @@
+// Simple grep.  Only supports ^ . * $ operators.
+
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+char buf[1024];
+int match(char*, char*);
+
+void
+grep(char *pattern, int fd)
+{
+  int n, m;
+  char *p, *q;
+
+  m = 0;
+  while((n = read(fd, buf+m, sizeof(buf)-m-1)) > 0){
+    m += n;
+    buf[m] = '\0';
+    p = buf;
+    while((q = strchr(p, '\n')) != 0){
+      *q = 0;
+      if(match(pattern, p)){
+        *q = '\n';
+        write(1, p, q+1 - p);
+      }
+      p = q+1;
+    }
+    if(m > 0){
+      m -= p - buf;
+      memmove(buf, p, m);
+    }
+  }
+}
+
+int
+main(int argc, char *argv[])
+{
+  int fd, i;
+  char *pattern;
+
+  if(argc <= 1){
+    fprintf(2, "usage: grep pattern [file ...]\n");
+    exit(1);
+  }
+  pattern = argv[1];
+
+  if(argc <= 2){
+    grep(pattern, 0);
+    exit(0);
+  }
+
+  for(i = 2; i < argc; i++){
+    if((fd = open(argv[i], O_RDONLY)) < 0){
+      printf("grep: cannot open %s\n", argv[i]);
+      exit(1);
+    }
+    grep(pattern, fd);
+    close(fd);
+  }
+  exit(0);
+}
+
+// Regexp matcher from Kernighan & Pike,
+// The Practice of Programming, Chapter 9, or
+// https://www.cs.princeton.edu/courses/archive/spr09/cos333/beautiful.html
+
+int matchhere(char*, char*);
+int matchstar(int, char*, char*);
+
+int
+match(char *re, char *text)
+{
+  if(re[0] == '^')
+    return matchhere(re+1, text);
+  do{  // must look at empty string
+    if(matchhere(re, text))
+      return 1;
+  }while(*text++ != '\0');
+  return 0;
+}
+
+// matchhere: search for re at beginning of text
+int matchhere(char *re, char *text)
+{
+  if(re[0] == '\0')
+    return 1;
+  if(re[1] == '*')
+    return matchstar(re[0], re+2, text);
+  if(re[0] == '$' && re[1] == '\0')
+    return *text == '\0';
+  if(*text!='\0' && (re[0]=='.' || re[0]==*text))
+    return matchhere(re+1, text+1);
+  return 0;
+}
+
+// matchstar: search for c*re at beginning of text
+int matchstar(int c, char *re, char *text)
+{
+  do{  // a * matches zero or more instances
+    if(matchhere(re, text))
+      return 1;
+  }while(*text!='\0' && (*text++==c || c=='.'));
+  return 0;
+}
+
diff --git a/xv6-labs-2024/user/grep.d b/xv6-labs-2024/user/grep.d
new file mode 100644
index 0000000..5ee0fe8
--- /dev/null
+++ b/xv6-labs-2024/user/grep.d
@@ -0,0 +1,2 @@
+user/grep.o: user/grep.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h kernel/fcntl.h user/user.h
diff --git a/xv6-labs-2024/user/grep.o b/xv6-labs-2024/user/grep.o
new file mode 100644
index 0000000..523f9cb
Binary files /dev/null and b/xv6-labs-2024/user/grep.o differ
diff --git a/xv6-labs-2024/user/grep.sym b/xv6-labs-2024/user/grep.sym
new file mode 100644
index 0000000..a7246c0
--- /dev/null
+++ b/xv6-labs-2024/user/grep.sym
@@ -0,0 +1,68 @@
+0000000000000000 .text
+0000000000000a88 .rodata
+0000000000000ae8 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 grep.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000564 putc
+0000000000000582 printint
+0000000000000ad0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001410 base
+000000000000026c strcpy
+00000000000008dc printf
+0000000000000416 memmove
+000000000000004a matchhere
+000000000000050c mknod
+0000000000000324 gets
+0000000000000544 getpid
+00000000000004a8 memcpy
+0000000000000106 grep
+0000000000000990 malloc
+0000000000000554 sleep
+00000000000004d4 pipe
+00000000000004e4 write
+000000000000051c fstat
+00000000000008b2 fprintf
+00000000000004f4 kill
+000000000000062a vprintf
+0000000000000534 chdir
+00000000000004fc exec
+00000000000004cc wait
+00000000000004dc read
+0000000000000514 unlink
+000000000000046e memcmp
+00000000000004bc fork
+000000000000054c sbrk
+000000000000055c uptime
+00000000000002de memset
+00000000000001c4 main
+0000000000000000 matchstar
+0000000000000288 strcmp
+000000000000053c dup
+0000000000001010 buf
+0000000000000394 stat
+00000000000000c0 match
+0000000000000524 link
+00000000000004c4 exit
+000000000000025a start
+00000000000003ce atoi
+00000000000002b4 strlen
+0000000000000504 open
+0000000000000300 strchr
+000000000000052c mkdir
+00000000000004ec close
+000000000000090e free
diff --git a/xv6-labs-2024/user/grind.asm b/xv6-labs-2024/user/grind.asm
new file mode 100644
index 0000000..5608ece
--- /dev/null
+++ b/xv6-labs-2024/user/grind.asm
@@ -0,0 +1,1714 @@
+
+user/_grind:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <do_rand>:
+       0:	1141                	addi	sp,sp,-16
+       2:	e422                	sd	s0,8(sp)
+       4:	0800                	addi	s0,sp,16
+       6:	611c                	ld	a5,0(a0)
+       8:	80000737          	lui	a4,0x80000
+       c:	ffe74713          	xori	a4,a4,-2
+      10:	02e7f7b3          	remu	a5,a5,a4
+      14:	0785                	addi	a5,a5,1
+      16:	66fd                	lui	a3,0x1f
+      18:	31d68693          	addi	a3,a3,797 # 1f31d <base+0x1cf15>
+      1c:	02d7e733          	rem	a4,a5,a3
+      20:	6611                	lui	a2,0x4
+      22:	1a760613          	addi	a2,a2,423 # 41a7 <base+0x1d9f>
+      26:	02c70733          	mul	a4,a4,a2
+      2a:	02d7c7b3          	div	a5,a5,a3
+      2e:	76fd                	lui	a3,0xfffff
+      30:	4ec68693          	addi	a3,a3,1260 # fffffffffffff4ec <base+0xffffffffffffd0e4>
+      34:	02d787b3          	mul	a5,a5,a3
+      38:	97ba                	add	a5,a5,a4
+      3a:	0007c963          	bltz	a5,4c <do_rand+0x4c>
+      3e:	17fd                	addi	a5,a5,-1
+      40:	e11c                	sd	a5,0(a0)
+      42:	0007851b          	sext.w	a0,a5
+      46:	6422                	ld	s0,8(sp)
+      48:	0141                	addi	sp,sp,16
+      4a:	8082                	ret
+      4c:	80000737          	lui	a4,0x80000
+      50:	fff74713          	not	a4,a4
+      54:	97ba                	add	a5,a5,a4
+      56:	b7e5                	j	3e <do_rand+0x3e>
+
+0000000000000058 <rand>:
+      58:	1141                	addi	sp,sp,-16
+      5a:	e406                	sd	ra,8(sp)
+      5c:	e022                	sd	s0,0(sp)
+      5e:	0800                	addi	s0,sp,16
+      60:	00002517          	auipc	a0,0x2
+      64:	fa050513          	addi	a0,a0,-96 # 2000 <rand_next>
+      68:	f99ff0ef          	jal	0 <do_rand>
+      6c:	60a2                	ld	ra,8(sp)
+      6e:	6402                	ld	s0,0(sp)
+      70:	0141                	addi	sp,sp,16
+      72:	8082                	ret
+
+0000000000000074 <go>:
+      74:	7119                	addi	sp,sp,-128
+      76:	fc86                	sd	ra,120(sp)
+      78:	f8a2                	sd	s0,112(sp)
+      7a:	f4a6                	sd	s1,104(sp)
+      7c:	e4d6                	sd	s5,72(sp)
+      7e:	0100                	addi	s0,sp,128
+      80:	84aa                	mv	s1,a0
+      82:	4501                	li	a0,0
+      84:	353000ef          	jal	bd6 <sbrk>
+      88:	8aaa                	mv	s5,a0
+      8a:	00001517          	auipc	a0,0x1
+      8e:	09650513          	addi	a0,a0,150 # 1120 <malloc+0x106>
+      92:	325000ef          	jal	bb6 <mkdir>
+      96:	00001517          	auipc	a0,0x1
+      9a:	08a50513          	addi	a0,a0,138 # 1120 <malloc+0x106>
+      9e:	321000ef          	jal	bbe <chdir>
+      a2:	cd19                	beqz	a0,c0 <go+0x4c>
+      a4:	f0ca                	sd	s2,96(sp)
+      a6:	ecce                	sd	s3,88(sp)
+      a8:	e8d2                	sd	s4,80(sp)
+      aa:	e0da                	sd	s6,64(sp)
+      ac:	fc5e                	sd	s7,56(sp)
+      ae:	00001517          	auipc	a0,0x1
+      b2:	07a50513          	addi	a0,a0,122 # 1128 <malloc+0x10e>
+      b6:	6b1000ef          	jal	f66 <printf>
+      ba:	4505                	li	a0,1
+      bc:	293000ef          	jal	b4e <exit>
+      c0:	f0ca                	sd	s2,96(sp)
+      c2:	ecce                	sd	s3,88(sp)
+      c4:	e8d2                	sd	s4,80(sp)
+      c6:	e0da                	sd	s6,64(sp)
+      c8:	fc5e                	sd	s7,56(sp)
+      ca:	00001517          	auipc	a0,0x1
+      ce:	08650513          	addi	a0,a0,134 # 1150 <malloc+0x136>
+      d2:	2ed000ef          	jal	bbe <chdir>
+      d6:	00001997          	auipc	s3,0x1
+      da:	08a98993          	addi	s3,s3,138 # 1160 <malloc+0x146>
+      de:	c489                	beqz	s1,e8 <go+0x74>
+      e0:	00001997          	auipc	s3,0x1
+      e4:	07898993          	addi	s3,s3,120 # 1158 <malloc+0x13e>
+      e8:	4481                	li	s1,0
+      ea:	5a7d                	li	s4,-1
+      ec:	00001917          	auipc	s2,0x1
+      f0:	34490913          	addi	s2,s2,836 # 1430 <malloc+0x416>
+      f4:	a819                	j	10a <go+0x96>
+      f6:	20200593          	li	a1,514
+      fa:	00001517          	auipc	a0,0x1
+      fe:	06e50513          	addi	a0,a0,110 # 1168 <malloc+0x14e>
+     102:	28d000ef          	jal	b8e <open>
+     106:	271000ef          	jal	b76 <close>
+     10a:	0485                	addi	s1,s1,1
+     10c:	1f400793          	li	a5,500
+     110:	02f4f7b3          	remu	a5,s1,a5
+     114:	e791                	bnez	a5,120 <go+0xac>
+     116:	4605                	li	a2,1
+     118:	85ce                	mv	a1,s3
+     11a:	4505                	li	a0,1
+     11c:	253000ef          	jal	b6e <write>
+     120:	f39ff0ef          	jal	58 <rand>
+     124:	47dd                	li	a5,23
+     126:	02f5653b          	remw	a0,a0,a5
+     12a:	0005071b          	sext.w	a4,a0
+     12e:	47d9                	li	a5,22
+     130:	fce7ede3          	bltu	a5,a4,10a <go+0x96>
+     134:	02051793          	slli	a5,a0,0x20
+     138:	01e7d513          	srli	a0,a5,0x1e
+     13c:	954a                	add	a0,a0,s2
+     13e:	411c                	lw	a5,0(a0)
+     140:	97ca                	add	a5,a5,s2
+     142:	8782                	jr	a5
+     144:	20200593          	li	a1,514
+     148:	00001517          	auipc	a0,0x1
+     14c:	03050513          	addi	a0,a0,48 # 1178 <malloc+0x15e>
+     150:	23f000ef          	jal	b8e <open>
+     154:	223000ef          	jal	b76 <close>
+     158:	bf4d                	j	10a <go+0x96>
+     15a:	00001517          	auipc	a0,0x1
+     15e:	00e50513          	addi	a0,a0,14 # 1168 <malloc+0x14e>
+     162:	23d000ef          	jal	b9e <unlink>
+     166:	b755                	j	10a <go+0x96>
+     168:	00001517          	auipc	a0,0x1
+     16c:	fb850513          	addi	a0,a0,-72 # 1120 <malloc+0x106>
+     170:	24f000ef          	jal	bbe <chdir>
+     174:	ed11                	bnez	a0,190 <go+0x11c>
+     176:	00001517          	auipc	a0,0x1
+     17a:	01a50513          	addi	a0,a0,26 # 1190 <malloc+0x176>
+     17e:	221000ef          	jal	b9e <unlink>
+     182:	00001517          	auipc	a0,0x1
+     186:	fce50513          	addi	a0,a0,-50 # 1150 <malloc+0x136>
+     18a:	235000ef          	jal	bbe <chdir>
+     18e:	bfb5                	j	10a <go+0x96>
+     190:	00001517          	auipc	a0,0x1
+     194:	f9850513          	addi	a0,a0,-104 # 1128 <malloc+0x10e>
+     198:	5cf000ef          	jal	f66 <printf>
+     19c:	4505                	li	a0,1
+     19e:	1b1000ef          	jal	b4e <exit>
+     1a2:	8552                	mv	a0,s4
+     1a4:	1d3000ef          	jal	b76 <close>
+     1a8:	20200593          	li	a1,514
+     1ac:	00001517          	auipc	a0,0x1
+     1b0:	fec50513          	addi	a0,a0,-20 # 1198 <malloc+0x17e>
+     1b4:	1db000ef          	jal	b8e <open>
+     1b8:	8a2a                	mv	s4,a0
+     1ba:	bf81                	j	10a <go+0x96>
+     1bc:	8552                	mv	a0,s4
+     1be:	1b9000ef          	jal	b76 <close>
+     1c2:	20200593          	li	a1,514
+     1c6:	00001517          	auipc	a0,0x1
+     1ca:	fe250513          	addi	a0,a0,-30 # 11a8 <malloc+0x18e>
+     1ce:	1c1000ef          	jal	b8e <open>
+     1d2:	8a2a                	mv	s4,a0
+     1d4:	bf1d                	j	10a <go+0x96>
+     1d6:	3e700613          	li	a2,999
+     1da:	00002597          	auipc	a1,0x2
+     1de:	e4658593          	addi	a1,a1,-442 # 2020 <buf.0>
+     1e2:	8552                	mv	a0,s4
+     1e4:	18b000ef          	jal	b6e <write>
+     1e8:	b70d                	j	10a <go+0x96>
+     1ea:	3e700613          	li	a2,999
+     1ee:	00002597          	auipc	a1,0x2
+     1f2:	e3258593          	addi	a1,a1,-462 # 2020 <buf.0>
+     1f6:	8552                	mv	a0,s4
+     1f8:	16f000ef          	jal	b66 <read>
+     1fc:	b739                	j	10a <go+0x96>
+     1fe:	00001517          	auipc	a0,0x1
+     202:	f6a50513          	addi	a0,a0,-150 # 1168 <malloc+0x14e>
+     206:	1b1000ef          	jal	bb6 <mkdir>
+     20a:	20200593          	li	a1,514
+     20e:	00001517          	auipc	a0,0x1
+     212:	fb250513          	addi	a0,a0,-78 # 11c0 <malloc+0x1a6>
+     216:	179000ef          	jal	b8e <open>
+     21a:	15d000ef          	jal	b76 <close>
+     21e:	00001517          	auipc	a0,0x1
+     222:	fb250513          	addi	a0,a0,-78 # 11d0 <malloc+0x1b6>
+     226:	179000ef          	jal	b9e <unlink>
+     22a:	b5c5                	j	10a <go+0x96>
+     22c:	00001517          	auipc	a0,0x1
+     230:	fac50513          	addi	a0,a0,-84 # 11d8 <malloc+0x1be>
+     234:	183000ef          	jal	bb6 <mkdir>
+     238:	20200593          	li	a1,514
+     23c:	00001517          	auipc	a0,0x1
+     240:	fa450513          	addi	a0,a0,-92 # 11e0 <malloc+0x1c6>
+     244:	14b000ef          	jal	b8e <open>
+     248:	12f000ef          	jal	b76 <close>
+     24c:	00001517          	auipc	a0,0x1
+     250:	fa450513          	addi	a0,a0,-92 # 11f0 <malloc+0x1d6>
+     254:	14b000ef          	jal	b9e <unlink>
+     258:	bd4d                	j	10a <go+0x96>
+     25a:	00001517          	auipc	a0,0x1
+     25e:	f9e50513          	addi	a0,a0,-98 # 11f8 <malloc+0x1de>
+     262:	13d000ef          	jal	b9e <unlink>
+     266:	00001597          	auipc	a1,0x1
+     26a:	f2a58593          	addi	a1,a1,-214 # 1190 <malloc+0x176>
+     26e:	00001517          	auipc	a0,0x1
+     272:	f9250513          	addi	a0,a0,-110 # 1200 <malloc+0x1e6>
+     276:	139000ef          	jal	bae <link>
+     27a:	bd41                	j	10a <go+0x96>
+     27c:	00001517          	auipc	a0,0x1
+     280:	f9c50513          	addi	a0,a0,-100 # 1218 <malloc+0x1fe>
+     284:	11b000ef          	jal	b9e <unlink>
+     288:	00001597          	auipc	a1,0x1
+     28c:	f1058593          	addi	a1,a1,-240 # 1198 <malloc+0x17e>
+     290:	00001517          	auipc	a0,0x1
+     294:	f9850513          	addi	a0,a0,-104 # 1228 <malloc+0x20e>
+     298:	117000ef          	jal	bae <link>
+     29c:	b5bd                	j	10a <go+0x96>
+     29e:	0a9000ef          	jal	b46 <fork>
+     2a2:	c519                	beqz	a0,2b0 <go+0x23c>
+     2a4:	00054863          	bltz	a0,2b4 <go+0x240>
+     2a8:	4501                	li	a0,0
+     2aa:	0ad000ef          	jal	b56 <wait>
+     2ae:	bdb1                	j	10a <go+0x96>
+     2b0:	09f000ef          	jal	b4e <exit>
+     2b4:	00001517          	auipc	a0,0x1
+     2b8:	f7c50513          	addi	a0,a0,-132 # 1230 <malloc+0x216>
+     2bc:	4ab000ef          	jal	f66 <printf>
+     2c0:	4505                	li	a0,1
+     2c2:	08d000ef          	jal	b4e <exit>
+     2c6:	081000ef          	jal	b46 <fork>
+     2ca:	c519                	beqz	a0,2d8 <go+0x264>
+     2cc:	00054d63          	bltz	a0,2e6 <go+0x272>
+     2d0:	4501                	li	a0,0
+     2d2:	085000ef          	jal	b56 <wait>
+     2d6:	bd15                	j	10a <go+0x96>
+     2d8:	06f000ef          	jal	b46 <fork>
+     2dc:	06b000ef          	jal	b46 <fork>
+     2e0:	4501                	li	a0,0
+     2e2:	06d000ef          	jal	b4e <exit>
+     2e6:	00001517          	auipc	a0,0x1
+     2ea:	f4a50513          	addi	a0,a0,-182 # 1230 <malloc+0x216>
+     2ee:	479000ef          	jal	f66 <printf>
+     2f2:	4505                	li	a0,1
+     2f4:	05b000ef          	jal	b4e <exit>
+     2f8:	6505                	lui	a0,0x1
+     2fa:	77b50513          	addi	a0,a0,1915 # 177b <digits+0x2eb>
+     2fe:	0d9000ef          	jal	bd6 <sbrk>
+     302:	b521                	j	10a <go+0x96>
+     304:	4501                	li	a0,0
+     306:	0d1000ef          	jal	bd6 <sbrk>
+     30a:	e0aaf0e3          	bgeu	s5,a0,10a <go+0x96>
+     30e:	4501                	li	a0,0
+     310:	0c7000ef          	jal	bd6 <sbrk>
+     314:	40aa853b          	subw	a0,s5,a0
+     318:	0bf000ef          	jal	bd6 <sbrk>
+     31c:	b3fd                	j	10a <go+0x96>
+     31e:	029000ef          	jal	b46 <fork>
+     322:	8b2a                	mv	s6,a0
+     324:	c10d                	beqz	a0,346 <go+0x2d2>
+     326:	02054d63          	bltz	a0,360 <go+0x2ec>
+     32a:	00001517          	auipc	a0,0x1
+     32e:	f2650513          	addi	a0,a0,-218 # 1250 <malloc+0x236>
+     332:	08d000ef          	jal	bbe <chdir>
+     336:	ed15                	bnez	a0,372 <go+0x2fe>
+     338:	855a                	mv	a0,s6
+     33a:	045000ef          	jal	b7e <kill>
+     33e:	4501                	li	a0,0
+     340:	017000ef          	jal	b56 <wait>
+     344:	b3d9                	j	10a <go+0x96>
+     346:	20200593          	li	a1,514
+     34a:	00001517          	auipc	a0,0x1
+     34e:	efe50513          	addi	a0,a0,-258 # 1248 <malloc+0x22e>
+     352:	03d000ef          	jal	b8e <open>
+     356:	021000ef          	jal	b76 <close>
+     35a:	4501                	li	a0,0
+     35c:	7f2000ef          	jal	b4e <exit>
+     360:	00001517          	auipc	a0,0x1
+     364:	ed050513          	addi	a0,a0,-304 # 1230 <malloc+0x216>
+     368:	3ff000ef          	jal	f66 <printf>
+     36c:	4505                	li	a0,1
+     36e:	7e0000ef          	jal	b4e <exit>
+     372:	00001517          	auipc	a0,0x1
+     376:	eee50513          	addi	a0,a0,-274 # 1260 <malloc+0x246>
+     37a:	3ed000ef          	jal	f66 <printf>
+     37e:	4505                	li	a0,1
+     380:	7ce000ef          	jal	b4e <exit>
+     384:	7c2000ef          	jal	b46 <fork>
+     388:	c519                	beqz	a0,396 <go+0x322>
+     38a:	00054d63          	bltz	a0,3a4 <go+0x330>
+     38e:	4501                	li	a0,0
+     390:	7c6000ef          	jal	b56 <wait>
+     394:	bb9d                	j	10a <go+0x96>
+     396:	039000ef          	jal	bce <getpid>
+     39a:	7e4000ef          	jal	b7e <kill>
+     39e:	4501                	li	a0,0
+     3a0:	7ae000ef          	jal	b4e <exit>
+     3a4:	00001517          	auipc	a0,0x1
+     3a8:	e8c50513          	addi	a0,a0,-372 # 1230 <malloc+0x216>
+     3ac:	3bb000ef          	jal	f66 <printf>
+     3b0:	4505                	li	a0,1
+     3b2:	79c000ef          	jal	b4e <exit>
+     3b6:	f9840513          	addi	a0,s0,-104
+     3ba:	7a4000ef          	jal	b5e <pipe>
+     3be:	02054363          	bltz	a0,3e4 <go+0x370>
+     3c2:	784000ef          	jal	b46 <fork>
+     3c6:	c905                	beqz	a0,3f6 <go+0x382>
+     3c8:	08054263          	bltz	a0,44c <go+0x3d8>
+     3cc:	f9842503          	lw	a0,-104(s0)
+     3d0:	7a6000ef          	jal	b76 <close>
+     3d4:	f9c42503          	lw	a0,-100(s0)
+     3d8:	79e000ef          	jal	b76 <close>
+     3dc:	4501                	li	a0,0
+     3de:	778000ef          	jal	b56 <wait>
+     3e2:	b325                	j	10a <go+0x96>
+     3e4:	00001517          	auipc	a0,0x1
+     3e8:	e9450513          	addi	a0,a0,-364 # 1278 <malloc+0x25e>
+     3ec:	37b000ef          	jal	f66 <printf>
+     3f0:	4505                	li	a0,1
+     3f2:	75c000ef          	jal	b4e <exit>
+     3f6:	750000ef          	jal	b46 <fork>
+     3fa:	74c000ef          	jal	b46 <fork>
+     3fe:	4605                	li	a2,1
+     400:	00001597          	auipc	a1,0x1
+     404:	e9058593          	addi	a1,a1,-368 # 1290 <malloc+0x276>
+     408:	f9c42503          	lw	a0,-100(s0)
+     40c:	762000ef          	jal	b6e <write>
+     410:	4785                	li	a5,1
+     412:	00f51f63          	bne	a0,a5,430 <go+0x3bc>
+     416:	4605                	li	a2,1
+     418:	f9040593          	addi	a1,s0,-112
+     41c:	f9842503          	lw	a0,-104(s0)
+     420:	746000ef          	jal	b66 <read>
+     424:	4785                	li	a5,1
+     426:	00f51c63          	bne	a0,a5,43e <go+0x3ca>
+     42a:	4501                	li	a0,0
+     42c:	722000ef          	jal	b4e <exit>
+     430:	00001517          	auipc	a0,0x1
+     434:	e6850513          	addi	a0,a0,-408 # 1298 <malloc+0x27e>
+     438:	32f000ef          	jal	f66 <printf>
+     43c:	bfe9                	j	416 <go+0x3a2>
+     43e:	00001517          	auipc	a0,0x1
+     442:	e7a50513          	addi	a0,a0,-390 # 12b8 <malloc+0x29e>
+     446:	321000ef          	jal	f66 <printf>
+     44a:	b7c5                	j	42a <go+0x3b6>
+     44c:	00001517          	auipc	a0,0x1
+     450:	de450513          	addi	a0,a0,-540 # 1230 <malloc+0x216>
+     454:	313000ef          	jal	f66 <printf>
+     458:	4505                	li	a0,1
+     45a:	6f4000ef          	jal	b4e <exit>
+     45e:	6e8000ef          	jal	b46 <fork>
+     462:	c519                	beqz	a0,470 <go+0x3fc>
+     464:	04054f63          	bltz	a0,4c2 <go+0x44e>
+     468:	4501                	li	a0,0
+     46a:	6ec000ef          	jal	b56 <wait>
+     46e:	b971                	j	10a <go+0x96>
+     470:	00001517          	auipc	a0,0x1
+     474:	dd850513          	addi	a0,a0,-552 # 1248 <malloc+0x22e>
+     478:	726000ef          	jal	b9e <unlink>
+     47c:	00001517          	auipc	a0,0x1
+     480:	dcc50513          	addi	a0,a0,-564 # 1248 <malloc+0x22e>
+     484:	732000ef          	jal	bb6 <mkdir>
+     488:	00001517          	auipc	a0,0x1
+     48c:	dc050513          	addi	a0,a0,-576 # 1248 <malloc+0x22e>
+     490:	72e000ef          	jal	bbe <chdir>
+     494:	00001517          	auipc	a0,0x1
+     498:	e4450513          	addi	a0,a0,-444 # 12d8 <malloc+0x2be>
+     49c:	702000ef          	jal	b9e <unlink>
+     4a0:	20200593          	li	a1,514
+     4a4:	00001517          	auipc	a0,0x1
+     4a8:	dec50513          	addi	a0,a0,-532 # 1290 <malloc+0x276>
+     4ac:	6e2000ef          	jal	b8e <open>
+     4b0:	00001517          	auipc	a0,0x1
+     4b4:	de050513          	addi	a0,a0,-544 # 1290 <malloc+0x276>
+     4b8:	6e6000ef          	jal	b9e <unlink>
+     4bc:	4501                	li	a0,0
+     4be:	690000ef          	jal	b4e <exit>
+     4c2:	00001517          	auipc	a0,0x1
+     4c6:	d6e50513          	addi	a0,a0,-658 # 1230 <malloc+0x216>
+     4ca:	29d000ef          	jal	f66 <printf>
+     4ce:	4505                	li	a0,1
+     4d0:	67e000ef          	jal	b4e <exit>
+     4d4:	00001517          	auipc	a0,0x1
+     4d8:	e0c50513          	addi	a0,a0,-500 # 12e0 <malloc+0x2c6>
+     4dc:	6c2000ef          	jal	b9e <unlink>
+     4e0:	20200593          	li	a1,514
+     4e4:	00001517          	auipc	a0,0x1
+     4e8:	dfc50513          	addi	a0,a0,-516 # 12e0 <malloc+0x2c6>
+     4ec:	6a2000ef          	jal	b8e <open>
+     4f0:	8b2a                	mv	s6,a0
+     4f2:	04054763          	bltz	a0,540 <go+0x4cc>
+     4f6:	4605                	li	a2,1
+     4f8:	00001597          	auipc	a1,0x1
+     4fc:	d9858593          	addi	a1,a1,-616 # 1290 <malloc+0x276>
+     500:	66e000ef          	jal	b6e <write>
+     504:	4785                	li	a5,1
+     506:	04f51663          	bne	a0,a5,552 <go+0x4de>
+     50a:	f9840593          	addi	a1,s0,-104
+     50e:	855a                	mv	a0,s6
+     510:	696000ef          	jal	ba6 <fstat>
+     514:	e921                	bnez	a0,564 <go+0x4f0>
+     516:	fa843583          	ld	a1,-88(s0)
+     51a:	4785                	li	a5,1
+     51c:	04f59d63          	bne	a1,a5,576 <go+0x502>
+     520:	f9c42583          	lw	a1,-100(s0)
+     524:	0c800793          	li	a5,200
+     528:	06b7e163          	bltu	a5,a1,58a <go+0x516>
+     52c:	855a                	mv	a0,s6
+     52e:	648000ef          	jal	b76 <close>
+     532:	00001517          	auipc	a0,0x1
+     536:	dae50513          	addi	a0,a0,-594 # 12e0 <malloc+0x2c6>
+     53a:	664000ef          	jal	b9e <unlink>
+     53e:	b6f1                	j	10a <go+0x96>
+     540:	00001517          	auipc	a0,0x1
+     544:	da850513          	addi	a0,a0,-600 # 12e8 <malloc+0x2ce>
+     548:	21f000ef          	jal	f66 <printf>
+     54c:	4505                	li	a0,1
+     54e:	600000ef          	jal	b4e <exit>
+     552:	00001517          	auipc	a0,0x1
+     556:	dae50513          	addi	a0,a0,-594 # 1300 <malloc+0x2e6>
+     55a:	20d000ef          	jal	f66 <printf>
+     55e:	4505                	li	a0,1
+     560:	5ee000ef          	jal	b4e <exit>
+     564:	00001517          	auipc	a0,0x1
+     568:	db450513          	addi	a0,a0,-588 # 1318 <malloc+0x2fe>
+     56c:	1fb000ef          	jal	f66 <printf>
+     570:	4505                	li	a0,1
+     572:	5dc000ef          	jal	b4e <exit>
+     576:	2581                	sext.w	a1,a1
+     578:	00001517          	auipc	a0,0x1
+     57c:	db850513          	addi	a0,a0,-584 # 1330 <malloc+0x316>
+     580:	1e7000ef          	jal	f66 <printf>
+     584:	4505                	li	a0,1
+     586:	5c8000ef          	jal	b4e <exit>
+     58a:	00001517          	auipc	a0,0x1
+     58e:	dce50513          	addi	a0,a0,-562 # 1358 <malloc+0x33e>
+     592:	1d5000ef          	jal	f66 <printf>
+     596:	4505                	li	a0,1
+     598:	5b6000ef          	jal	b4e <exit>
+     59c:	f8840513          	addi	a0,s0,-120
+     5a0:	5be000ef          	jal	b5e <pipe>
+     5a4:	0a054563          	bltz	a0,64e <go+0x5da>
+     5a8:	f9040513          	addi	a0,s0,-112
+     5ac:	5b2000ef          	jal	b5e <pipe>
+     5b0:	0a054963          	bltz	a0,662 <go+0x5ee>
+     5b4:	592000ef          	jal	b46 <fork>
+     5b8:	cd5d                	beqz	a0,676 <go+0x602>
+     5ba:	14054263          	bltz	a0,6fe <go+0x68a>
+     5be:	588000ef          	jal	b46 <fork>
+     5c2:	14050863          	beqz	a0,712 <go+0x69e>
+     5c6:	1e054663          	bltz	a0,7b2 <go+0x73e>
+     5ca:	f8842503          	lw	a0,-120(s0)
+     5ce:	5a8000ef          	jal	b76 <close>
+     5d2:	f8c42503          	lw	a0,-116(s0)
+     5d6:	5a0000ef          	jal	b76 <close>
+     5da:	f9442503          	lw	a0,-108(s0)
+     5de:	598000ef          	jal	b76 <close>
+     5e2:	f8042023          	sw	zero,-128(s0)
+     5e6:	4605                	li	a2,1
+     5e8:	f8040593          	addi	a1,s0,-128
+     5ec:	f9042503          	lw	a0,-112(s0)
+     5f0:	576000ef          	jal	b66 <read>
+     5f4:	4605                	li	a2,1
+     5f6:	f8140593          	addi	a1,s0,-127
+     5fa:	f9042503          	lw	a0,-112(s0)
+     5fe:	568000ef          	jal	b66 <read>
+     602:	4605                	li	a2,1
+     604:	f8240593          	addi	a1,s0,-126
+     608:	f9042503          	lw	a0,-112(s0)
+     60c:	55a000ef          	jal	b66 <read>
+     610:	f9042503          	lw	a0,-112(s0)
+     614:	562000ef          	jal	b76 <close>
+     618:	f8440513          	addi	a0,s0,-124
+     61c:	53a000ef          	jal	b56 <wait>
+     620:	f9840513          	addi	a0,s0,-104
+     624:	532000ef          	jal	b56 <wait>
+     628:	f8442783          	lw	a5,-124(s0)
+     62c:	f9842b83          	lw	s7,-104(s0)
+     630:	0177eb33          	or	s6,a5,s7
+     634:	180b1963          	bnez	s6,7c6 <go+0x752>
+     638:	00001597          	auipc	a1,0x1
+     63c:	dc058593          	addi	a1,a1,-576 # 13f8 <malloc+0x3de>
+     640:	f8040513          	addi	a0,s0,-128
+     644:	2ce000ef          	jal	912 <strcmp>
+     648:	ac0501e3          	beqz	a0,10a <go+0x96>
+     64c:	aab5                	j	7c8 <go+0x754>
+     64e:	00001597          	auipc	a1,0x1
+     652:	c2a58593          	addi	a1,a1,-982 # 1278 <malloc+0x25e>
+     656:	4509                	li	a0,2
+     658:	0e5000ef          	jal	f3c <fprintf>
+     65c:	4505                	li	a0,1
+     65e:	4f0000ef          	jal	b4e <exit>
+     662:	00001597          	auipc	a1,0x1
+     666:	c1658593          	addi	a1,a1,-1002 # 1278 <malloc+0x25e>
+     66a:	4509                	li	a0,2
+     66c:	0d1000ef          	jal	f3c <fprintf>
+     670:	4505                	li	a0,1
+     672:	4dc000ef          	jal	b4e <exit>
+     676:	f9042503          	lw	a0,-112(s0)
+     67a:	4fc000ef          	jal	b76 <close>
+     67e:	f9442503          	lw	a0,-108(s0)
+     682:	4f4000ef          	jal	b76 <close>
+     686:	f8842503          	lw	a0,-120(s0)
+     68a:	4ec000ef          	jal	b76 <close>
+     68e:	4505                	li	a0,1
+     690:	4e6000ef          	jal	b76 <close>
+     694:	f8c42503          	lw	a0,-116(s0)
+     698:	52e000ef          	jal	bc6 <dup>
+     69c:	4785                	li	a5,1
+     69e:	00f50c63          	beq	a0,a5,6b6 <go+0x642>
+     6a2:	00001597          	auipc	a1,0x1
+     6a6:	cde58593          	addi	a1,a1,-802 # 1380 <malloc+0x366>
+     6aa:	4509                	li	a0,2
+     6ac:	091000ef          	jal	f3c <fprintf>
+     6b0:	4505                	li	a0,1
+     6b2:	49c000ef          	jal	b4e <exit>
+     6b6:	f8c42503          	lw	a0,-116(s0)
+     6ba:	4bc000ef          	jal	b76 <close>
+     6be:	00001797          	auipc	a5,0x1
+     6c2:	cda78793          	addi	a5,a5,-806 # 1398 <malloc+0x37e>
+     6c6:	f8f43c23          	sd	a5,-104(s0)
+     6ca:	00001797          	auipc	a5,0x1
+     6ce:	cd678793          	addi	a5,a5,-810 # 13a0 <malloc+0x386>
+     6d2:	faf43023          	sd	a5,-96(s0)
+     6d6:	fa043423          	sd	zero,-88(s0)
+     6da:	f9840593          	addi	a1,s0,-104
+     6de:	00001517          	auipc	a0,0x1
+     6e2:	cca50513          	addi	a0,a0,-822 # 13a8 <malloc+0x38e>
+     6e6:	4a0000ef          	jal	b86 <exec>
+     6ea:	00001597          	auipc	a1,0x1
+     6ee:	cce58593          	addi	a1,a1,-818 # 13b8 <malloc+0x39e>
+     6f2:	4509                	li	a0,2
+     6f4:	049000ef          	jal	f3c <fprintf>
+     6f8:	4509                	li	a0,2
+     6fa:	454000ef          	jal	b4e <exit>
+     6fe:	00001597          	auipc	a1,0x1
+     702:	b3258593          	addi	a1,a1,-1230 # 1230 <malloc+0x216>
+     706:	4509                	li	a0,2
+     708:	035000ef          	jal	f3c <fprintf>
+     70c:	450d                	li	a0,3
+     70e:	440000ef          	jal	b4e <exit>
+     712:	f8c42503          	lw	a0,-116(s0)
+     716:	460000ef          	jal	b76 <close>
+     71a:	f9042503          	lw	a0,-112(s0)
+     71e:	458000ef          	jal	b76 <close>
+     722:	4501                	li	a0,0
+     724:	452000ef          	jal	b76 <close>
+     728:	f8842503          	lw	a0,-120(s0)
+     72c:	49a000ef          	jal	bc6 <dup>
+     730:	c919                	beqz	a0,746 <go+0x6d2>
+     732:	00001597          	auipc	a1,0x1
+     736:	c4e58593          	addi	a1,a1,-946 # 1380 <malloc+0x366>
+     73a:	4509                	li	a0,2
+     73c:	001000ef          	jal	f3c <fprintf>
+     740:	4511                	li	a0,4
+     742:	40c000ef          	jal	b4e <exit>
+     746:	f8842503          	lw	a0,-120(s0)
+     74a:	42c000ef          	jal	b76 <close>
+     74e:	4505                	li	a0,1
+     750:	426000ef          	jal	b76 <close>
+     754:	f9442503          	lw	a0,-108(s0)
+     758:	46e000ef          	jal	bc6 <dup>
+     75c:	4785                	li	a5,1
+     75e:	00f50c63          	beq	a0,a5,776 <go+0x702>
+     762:	00001597          	auipc	a1,0x1
+     766:	c1e58593          	addi	a1,a1,-994 # 1380 <malloc+0x366>
+     76a:	4509                	li	a0,2
+     76c:	7d0000ef          	jal	f3c <fprintf>
+     770:	4515                	li	a0,5
+     772:	3dc000ef          	jal	b4e <exit>
+     776:	f9442503          	lw	a0,-108(s0)
+     77a:	3fc000ef          	jal	b76 <close>
+     77e:	00001797          	auipc	a5,0x1
+     782:	c5278793          	addi	a5,a5,-942 # 13d0 <malloc+0x3b6>
+     786:	f8f43c23          	sd	a5,-104(s0)
+     78a:	fa043023          	sd	zero,-96(s0)
+     78e:	f9840593          	addi	a1,s0,-104
+     792:	00001517          	auipc	a0,0x1
+     796:	c4650513          	addi	a0,a0,-954 # 13d8 <malloc+0x3be>
+     79a:	3ec000ef          	jal	b86 <exec>
+     79e:	00001597          	auipc	a1,0x1
+     7a2:	c4258593          	addi	a1,a1,-958 # 13e0 <malloc+0x3c6>
+     7a6:	4509                	li	a0,2
+     7a8:	794000ef          	jal	f3c <fprintf>
+     7ac:	4519                	li	a0,6
+     7ae:	3a0000ef          	jal	b4e <exit>
+     7b2:	00001597          	auipc	a1,0x1
+     7b6:	a7e58593          	addi	a1,a1,-1410 # 1230 <malloc+0x216>
+     7ba:	4509                	li	a0,2
+     7bc:	780000ef          	jal	f3c <fprintf>
+     7c0:	451d                	li	a0,7
+     7c2:	38c000ef          	jal	b4e <exit>
+     7c6:	8b3e                	mv	s6,a5
+     7c8:	f8040693          	addi	a3,s0,-128
+     7cc:	865e                	mv	a2,s7
+     7ce:	85da                	mv	a1,s6
+     7d0:	00001517          	auipc	a0,0x1
+     7d4:	c3050513          	addi	a0,a0,-976 # 1400 <malloc+0x3e6>
+     7d8:	78e000ef          	jal	f66 <printf>
+     7dc:	4505                	li	a0,1
+     7de:	370000ef          	jal	b4e <exit>
+
+00000000000007e2 <iter>:
+     7e2:	7179                	addi	sp,sp,-48
+     7e4:	f406                	sd	ra,40(sp)
+     7e6:	f022                	sd	s0,32(sp)
+     7e8:	1800                	addi	s0,sp,48
+     7ea:	00001517          	auipc	a0,0x1
+     7ee:	a5e50513          	addi	a0,a0,-1442 # 1248 <malloc+0x22e>
+     7f2:	3ac000ef          	jal	b9e <unlink>
+     7f6:	00001517          	auipc	a0,0x1
+     7fa:	a0250513          	addi	a0,a0,-1534 # 11f8 <malloc+0x1de>
+     7fe:	3a0000ef          	jal	b9e <unlink>
+     802:	344000ef          	jal	b46 <fork>
+     806:	02054163          	bltz	a0,828 <iter+0x46>
+     80a:	ec26                	sd	s1,24(sp)
+     80c:	84aa                	mv	s1,a0
+     80e:	e905                	bnez	a0,83e <iter+0x5c>
+     810:	e84a                	sd	s2,16(sp)
+     812:	00001717          	auipc	a4,0x1
+     816:	7ee70713          	addi	a4,a4,2030 # 2000 <rand_next>
+     81a:	631c                	ld	a5,0(a4)
+     81c:	01f7c793          	xori	a5,a5,31
+     820:	e31c                	sd	a5,0(a4)
+     822:	4501                	li	a0,0
+     824:	851ff0ef          	jal	74 <go>
+     828:	ec26                	sd	s1,24(sp)
+     82a:	e84a                	sd	s2,16(sp)
+     82c:	00001517          	auipc	a0,0x1
+     830:	a0450513          	addi	a0,a0,-1532 # 1230 <malloc+0x216>
+     834:	732000ef          	jal	f66 <printf>
+     838:	4505                	li	a0,1
+     83a:	314000ef          	jal	b4e <exit>
+     83e:	e84a                	sd	s2,16(sp)
+     840:	306000ef          	jal	b46 <fork>
+     844:	892a                	mv	s2,a0
+     846:	02054063          	bltz	a0,866 <iter+0x84>
+     84a:	e51d                	bnez	a0,878 <iter+0x96>
+     84c:	00001697          	auipc	a3,0x1
+     850:	7b468693          	addi	a3,a3,1972 # 2000 <rand_next>
+     854:	629c                	ld	a5,0(a3)
+     856:	6709                	lui	a4,0x2
+     858:	c0970713          	addi	a4,a4,-1015 # 1c09 <digits+0x779>
+     85c:	8fb9                	xor	a5,a5,a4
+     85e:	e29c                	sd	a5,0(a3)
+     860:	4505                	li	a0,1
+     862:	813ff0ef          	jal	74 <go>
+     866:	00001517          	auipc	a0,0x1
+     86a:	9ca50513          	addi	a0,a0,-1590 # 1230 <malloc+0x216>
+     86e:	6f8000ef          	jal	f66 <printf>
+     872:	4505                	li	a0,1
+     874:	2da000ef          	jal	b4e <exit>
+     878:	57fd                	li	a5,-1
+     87a:	fcf42e23          	sw	a5,-36(s0)
+     87e:	fdc40513          	addi	a0,s0,-36
+     882:	2d4000ef          	jal	b56 <wait>
+     886:	fdc42783          	lw	a5,-36(s0)
+     88a:	eb99                	bnez	a5,8a0 <iter+0xbe>
+     88c:	57fd                	li	a5,-1
+     88e:	fcf42c23          	sw	a5,-40(s0)
+     892:	fd840513          	addi	a0,s0,-40
+     896:	2c0000ef          	jal	b56 <wait>
+     89a:	4501                	li	a0,0
+     89c:	2b2000ef          	jal	b4e <exit>
+     8a0:	8526                	mv	a0,s1
+     8a2:	2dc000ef          	jal	b7e <kill>
+     8a6:	854a                	mv	a0,s2
+     8a8:	2d6000ef          	jal	b7e <kill>
+     8ac:	b7c5                	j	88c <iter+0xaa>
+
+00000000000008ae <main>:
+     8ae:	1101                	addi	sp,sp,-32
+     8b0:	ec06                	sd	ra,24(sp)
+     8b2:	e822                	sd	s0,16(sp)
+     8b4:	e426                	sd	s1,8(sp)
+     8b6:	1000                	addi	s0,sp,32
+     8b8:	00001497          	auipc	s1,0x1
+     8bc:	74848493          	addi	s1,s1,1864 # 2000 <rand_next>
+     8c0:	a809                	j	8d2 <main+0x24>
+     8c2:	f21ff0ef          	jal	7e2 <iter>
+     8c6:	4551                	li	a0,20
+     8c8:	316000ef          	jal	bde <sleep>
+     8cc:	609c                	ld	a5,0(s1)
+     8ce:	0785                	addi	a5,a5,1
+     8d0:	e09c                	sd	a5,0(s1)
+     8d2:	274000ef          	jal	b46 <fork>
+     8d6:	d575                	beqz	a0,8c2 <main+0x14>
+     8d8:	fea057e3          	blez	a0,8c6 <main+0x18>
+     8dc:	4501                	li	a0,0
+     8de:	278000ef          	jal	b56 <wait>
+     8e2:	b7d5                	j	8c6 <main+0x18>
+
+00000000000008e4 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+     8e4:	1141                	addi	sp,sp,-16
+     8e6:	e406                	sd	ra,8(sp)
+     8e8:	e022                	sd	s0,0(sp)
+     8ea:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+     8ec:	fc3ff0ef          	jal	8ae <main>
+  exit(0);
+     8f0:	4501                	li	a0,0
+     8f2:	25c000ef          	jal	b4e <exit>
+
+00000000000008f6 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+     8f6:	1141                	addi	sp,sp,-16
+     8f8:	e422                	sd	s0,8(sp)
+     8fa:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+     8fc:	87aa                	mv	a5,a0
+     8fe:	0585                	addi	a1,a1,1
+     900:	0785                	addi	a5,a5,1
+     902:	fff5c703          	lbu	a4,-1(a1)
+     906:	fee78fa3          	sb	a4,-1(a5)
+     90a:	fb75                	bnez	a4,8fe <strcpy+0x8>
+    ;
+  return os;
+}
+     90c:	6422                	ld	s0,8(sp)
+     90e:	0141                	addi	sp,sp,16
+     910:	8082                	ret
+
+0000000000000912 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+     912:	1141                	addi	sp,sp,-16
+     914:	e422                	sd	s0,8(sp)
+     916:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+     918:	00054783          	lbu	a5,0(a0)
+     91c:	cb91                	beqz	a5,930 <strcmp+0x1e>
+     91e:	0005c703          	lbu	a4,0(a1)
+     922:	00f71763          	bne	a4,a5,930 <strcmp+0x1e>
+    p++, q++;
+     926:	0505                	addi	a0,a0,1
+     928:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+     92a:	00054783          	lbu	a5,0(a0)
+     92e:	fbe5                	bnez	a5,91e <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+     930:	0005c503          	lbu	a0,0(a1)
+}
+     934:	40a7853b          	subw	a0,a5,a0
+     938:	6422                	ld	s0,8(sp)
+     93a:	0141                	addi	sp,sp,16
+     93c:	8082                	ret
+
+000000000000093e <strlen>:
+
+uint
+strlen(const char *s)
+{
+     93e:	1141                	addi	sp,sp,-16
+     940:	e422                	sd	s0,8(sp)
+     942:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+     944:	00054783          	lbu	a5,0(a0)
+     948:	cf91                	beqz	a5,964 <strlen+0x26>
+     94a:	0505                	addi	a0,a0,1
+     94c:	87aa                	mv	a5,a0
+     94e:	86be                	mv	a3,a5
+     950:	0785                	addi	a5,a5,1
+     952:	fff7c703          	lbu	a4,-1(a5)
+     956:	ff65                	bnez	a4,94e <strlen+0x10>
+     958:	40a6853b          	subw	a0,a3,a0
+     95c:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+     95e:	6422                	ld	s0,8(sp)
+     960:	0141                	addi	sp,sp,16
+     962:	8082                	ret
+  for(n = 0; s[n]; n++)
+     964:	4501                	li	a0,0
+     966:	bfe5                	j	95e <strlen+0x20>
+
+0000000000000968 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+     968:	1141                	addi	sp,sp,-16
+     96a:	e422                	sd	s0,8(sp)
+     96c:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+     96e:	ca19                	beqz	a2,984 <memset+0x1c>
+     970:	87aa                	mv	a5,a0
+     972:	1602                	slli	a2,a2,0x20
+     974:	9201                	srli	a2,a2,0x20
+     976:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+     97a:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+     97e:	0785                	addi	a5,a5,1
+     980:	fee79de3          	bne	a5,a4,97a <memset+0x12>
+  }
+  return dst;
+}
+     984:	6422                	ld	s0,8(sp)
+     986:	0141                	addi	sp,sp,16
+     988:	8082                	ret
+
+000000000000098a <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+     98a:	1141                	addi	sp,sp,-16
+     98c:	e422                	sd	s0,8(sp)
+     98e:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+     990:	00054783          	lbu	a5,0(a0)
+     994:	cb99                	beqz	a5,9aa <strchr+0x20>
+    if(*s == c)
+     996:	00f58763          	beq	a1,a5,9a4 <strchr+0x1a>
+  for(; *s; s++)
+     99a:	0505                	addi	a0,a0,1
+     99c:	00054783          	lbu	a5,0(a0)
+     9a0:	fbfd                	bnez	a5,996 <strchr+0xc>
+      return (char*)s;
+  return 0;
+     9a2:	4501                	li	a0,0
+}
+     9a4:	6422                	ld	s0,8(sp)
+     9a6:	0141                	addi	sp,sp,16
+     9a8:	8082                	ret
+  return 0;
+     9aa:	4501                	li	a0,0
+     9ac:	bfe5                	j	9a4 <strchr+0x1a>
+
+00000000000009ae <gets>:
+
+char*
+gets(char *buf, int max)
+{
+     9ae:	711d                	addi	sp,sp,-96
+     9b0:	ec86                	sd	ra,88(sp)
+     9b2:	e8a2                	sd	s0,80(sp)
+     9b4:	e4a6                	sd	s1,72(sp)
+     9b6:	e0ca                	sd	s2,64(sp)
+     9b8:	fc4e                	sd	s3,56(sp)
+     9ba:	f852                	sd	s4,48(sp)
+     9bc:	f456                	sd	s5,40(sp)
+     9be:	f05a                	sd	s6,32(sp)
+     9c0:	ec5e                	sd	s7,24(sp)
+     9c2:	1080                	addi	s0,sp,96
+     9c4:	8baa                	mv	s7,a0
+     9c6:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+     9c8:	892a                	mv	s2,a0
+     9ca:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+     9cc:	4aa9                	li	s5,10
+     9ce:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+     9d0:	89a6                	mv	s3,s1
+     9d2:	2485                	addiw	s1,s1,1
+     9d4:	0344d663          	bge	s1,s4,a00 <gets+0x52>
+    cc = read(0, &c, 1);
+     9d8:	4605                	li	a2,1
+     9da:	faf40593          	addi	a1,s0,-81
+     9de:	4501                	li	a0,0
+     9e0:	186000ef          	jal	b66 <read>
+    if(cc < 1)
+     9e4:	00a05e63          	blez	a0,a00 <gets+0x52>
+    buf[i++] = c;
+     9e8:	faf44783          	lbu	a5,-81(s0)
+     9ec:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+     9f0:	01578763          	beq	a5,s5,9fe <gets+0x50>
+     9f4:	0905                	addi	s2,s2,1
+     9f6:	fd679de3          	bne	a5,s6,9d0 <gets+0x22>
+    buf[i++] = c;
+     9fa:	89a6                	mv	s3,s1
+     9fc:	a011                	j	a00 <gets+0x52>
+     9fe:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+     a00:	99de                	add	s3,s3,s7
+     a02:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+     a06:	855e                	mv	a0,s7
+     a08:	60e6                	ld	ra,88(sp)
+     a0a:	6446                	ld	s0,80(sp)
+     a0c:	64a6                	ld	s1,72(sp)
+     a0e:	6906                	ld	s2,64(sp)
+     a10:	79e2                	ld	s3,56(sp)
+     a12:	7a42                	ld	s4,48(sp)
+     a14:	7aa2                	ld	s5,40(sp)
+     a16:	7b02                	ld	s6,32(sp)
+     a18:	6be2                	ld	s7,24(sp)
+     a1a:	6125                	addi	sp,sp,96
+     a1c:	8082                	ret
+
+0000000000000a1e <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+     a1e:	1101                	addi	sp,sp,-32
+     a20:	ec06                	sd	ra,24(sp)
+     a22:	e822                	sd	s0,16(sp)
+     a24:	e04a                	sd	s2,0(sp)
+     a26:	1000                	addi	s0,sp,32
+     a28:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+     a2a:	4581                	li	a1,0
+     a2c:	162000ef          	jal	b8e <open>
+  if(fd < 0)
+     a30:	02054263          	bltz	a0,a54 <stat+0x36>
+     a34:	e426                	sd	s1,8(sp)
+     a36:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+     a38:	85ca                	mv	a1,s2
+     a3a:	16c000ef          	jal	ba6 <fstat>
+     a3e:	892a                	mv	s2,a0
+  close(fd);
+     a40:	8526                	mv	a0,s1
+     a42:	134000ef          	jal	b76 <close>
+  return r;
+     a46:	64a2                	ld	s1,8(sp)
+}
+     a48:	854a                	mv	a0,s2
+     a4a:	60e2                	ld	ra,24(sp)
+     a4c:	6442                	ld	s0,16(sp)
+     a4e:	6902                	ld	s2,0(sp)
+     a50:	6105                	addi	sp,sp,32
+     a52:	8082                	ret
+    return -1;
+     a54:	597d                	li	s2,-1
+     a56:	bfcd                	j	a48 <stat+0x2a>
+
+0000000000000a58 <atoi>:
+
+int
+atoi(const char *s)
+{
+     a58:	1141                	addi	sp,sp,-16
+     a5a:	e422                	sd	s0,8(sp)
+     a5c:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+     a5e:	00054683          	lbu	a3,0(a0)
+     a62:	fd06879b          	addiw	a5,a3,-48
+     a66:	0ff7f793          	zext.b	a5,a5
+     a6a:	4625                	li	a2,9
+     a6c:	02f66863          	bltu	a2,a5,a9c <atoi+0x44>
+     a70:	872a                	mv	a4,a0
+  n = 0;
+     a72:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+     a74:	0705                	addi	a4,a4,1
+     a76:	0025179b          	slliw	a5,a0,0x2
+     a7a:	9fa9                	addw	a5,a5,a0
+     a7c:	0017979b          	slliw	a5,a5,0x1
+     a80:	9fb5                	addw	a5,a5,a3
+     a82:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+     a86:	00074683          	lbu	a3,0(a4)
+     a8a:	fd06879b          	addiw	a5,a3,-48
+     a8e:	0ff7f793          	zext.b	a5,a5
+     a92:	fef671e3          	bgeu	a2,a5,a74 <atoi+0x1c>
+  return n;
+}
+     a96:	6422                	ld	s0,8(sp)
+     a98:	0141                	addi	sp,sp,16
+     a9a:	8082                	ret
+  n = 0;
+     a9c:	4501                	li	a0,0
+     a9e:	bfe5                	j	a96 <atoi+0x3e>
+
+0000000000000aa0 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+     aa0:	1141                	addi	sp,sp,-16
+     aa2:	e422                	sd	s0,8(sp)
+     aa4:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+     aa6:	02b57463          	bgeu	a0,a1,ace <memmove+0x2e>
+    while(n-- > 0)
+     aaa:	00c05f63          	blez	a2,ac8 <memmove+0x28>
+     aae:	1602                	slli	a2,a2,0x20
+     ab0:	9201                	srli	a2,a2,0x20
+     ab2:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+     ab6:	872a                	mv	a4,a0
+      *dst++ = *src++;
+     ab8:	0585                	addi	a1,a1,1
+     aba:	0705                	addi	a4,a4,1
+     abc:	fff5c683          	lbu	a3,-1(a1)
+     ac0:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+     ac4:	fef71ae3          	bne	a4,a5,ab8 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+     ac8:	6422                	ld	s0,8(sp)
+     aca:	0141                	addi	sp,sp,16
+     acc:	8082                	ret
+    dst += n;
+     ace:	00c50733          	add	a4,a0,a2
+    src += n;
+     ad2:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+     ad4:	fec05ae3          	blez	a2,ac8 <memmove+0x28>
+     ad8:	fff6079b          	addiw	a5,a2,-1
+     adc:	1782                	slli	a5,a5,0x20
+     ade:	9381                	srli	a5,a5,0x20
+     ae0:	fff7c793          	not	a5,a5
+     ae4:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+     ae6:	15fd                	addi	a1,a1,-1
+     ae8:	177d                	addi	a4,a4,-1
+     aea:	0005c683          	lbu	a3,0(a1)
+     aee:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+     af2:	fee79ae3          	bne	a5,a4,ae6 <memmove+0x46>
+     af6:	bfc9                	j	ac8 <memmove+0x28>
+
+0000000000000af8 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+     af8:	1141                	addi	sp,sp,-16
+     afa:	e422                	sd	s0,8(sp)
+     afc:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+     afe:	ca05                	beqz	a2,b2e <memcmp+0x36>
+     b00:	fff6069b          	addiw	a3,a2,-1
+     b04:	1682                	slli	a3,a3,0x20
+     b06:	9281                	srli	a3,a3,0x20
+     b08:	0685                	addi	a3,a3,1
+     b0a:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+     b0c:	00054783          	lbu	a5,0(a0)
+     b10:	0005c703          	lbu	a4,0(a1)
+     b14:	00e79863          	bne	a5,a4,b24 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+     b18:	0505                	addi	a0,a0,1
+    p2++;
+     b1a:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+     b1c:	fed518e3          	bne	a0,a3,b0c <memcmp+0x14>
+  }
+  return 0;
+     b20:	4501                	li	a0,0
+     b22:	a019                	j	b28 <memcmp+0x30>
+      return *p1 - *p2;
+     b24:	40e7853b          	subw	a0,a5,a4
+}
+     b28:	6422                	ld	s0,8(sp)
+     b2a:	0141                	addi	sp,sp,16
+     b2c:	8082                	ret
+  return 0;
+     b2e:	4501                	li	a0,0
+     b30:	bfe5                	j	b28 <memcmp+0x30>
+
+0000000000000b32 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+     b32:	1141                	addi	sp,sp,-16
+     b34:	e406                	sd	ra,8(sp)
+     b36:	e022                	sd	s0,0(sp)
+     b38:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+     b3a:	f67ff0ef          	jal	aa0 <memmove>
+}
+     b3e:	60a2                	ld	ra,8(sp)
+     b40:	6402                	ld	s0,0(sp)
+     b42:	0141                	addi	sp,sp,16
+     b44:	8082                	ret
+
+0000000000000b46 <fork>:
+     b46:	4885                	li	a7,1
+     b48:	00000073          	ecall
+     b4c:	8082                	ret
+
+0000000000000b4e <exit>:
+     b4e:	4889                	li	a7,2
+     b50:	00000073          	ecall
+     b54:	8082                	ret
+
+0000000000000b56 <wait>:
+     b56:	488d                	li	a7,3
+     b58:	00000073          	ecall
+     b5c:	8082                	ret
+
+0000000000000b5e <pipe>:
+     b5e:	4891                	li	a7,4
+     b60:	00000073          	ecall
+     b64:	8082                	ret
+
+0000000000000b66 <read>:
+     b66:	4895                	li	a7,5
+     b68:	00000073          	ecall
+     b6c:	8082                	ret
+
+0000000000000b6e <write>:
+     b6e:	48c1                	li	a7,16
+     b70:	00000073          	ecall
+     b74:	8082                	ret
+
+0000000000000b76 <close>:
+     b76:	48d5                	li	a7,21
+     b78:	00000073          	ecall
+     b7c:	8082                	ret
+
+0000000000000b7e <kill>:
+     b7e:	4899                	li	a7,6
+     b80:	00000073          	ecall
+     b84:	8082                	ret
+
+0000000000000b86 <exec>:
+     b86:	489d                	li	a7,7
+     b88:	00000073          	ecall
+     b8c:	8082                	ret
+
+0000000000000b8e <open>:
+     b8e:	48bd                	li	a7,15
+     b90:	00000073          	ecall
+     b94:	8082                	ret
+
+0000000000000b96 <mknod>:
+     b96:	48c5                	li	a7,17
+     b98:	00000073          	ecall
+     b9c:	8082                	ret
+
+0000000000000b9e <unlink>:
+     b9e:	48c9                	li	a7,18
+     ba0:	00000073          	ecall
+     ba4:	8082                	ret
+
+0000000000000ba6 <fstat>:
+     ba6:	48a1                	li	a7,8
+     ba8:	00000073          	ecall
+     bac:	8082                	ret
+
+0000000000000bae <link>:
+     bae:	48cd                	li	a7,19
+     bb0:	00000073          	ecall
+     bb4:	8082                	ret
+
+0000000000000bb6 <mkdir>:
+     bb6:	48d1                	li	a7,20
+     bb8:	00000073          	ecall
+     bbc:	8082                	ret
+
+0000000000000bbe <chdir>:
+     bbe:	48a5                	li	a7,9
+     bc0:	00000073          	ecall
+     bc4:	8082                	ret
+
+0000000000000bc6 <dup>:
+     bc6:	48a9                	li	a7,10
+     bc8:	00000073          	ecall
+     bcc:	8082                	ret
+
+0000000000000bce <getpid>:
+     bce:	48ad                	li	a7,11
+     bd0:	00000073          	ecall
+     bd4:	8082                	ret
+
+0000000000000bd6 <sbrk>:
+     bd6:	48b1                	li	a7,12
+     bd8:	00000073          	ecall
+     bdc:	8082                	ret
+
+0000000000000bde <sleep>:
+     bde:	48b5                	li	a7,13
+     be0:	00000073          	ecall
+     be4:	8082                	ret
+
+0000000000000be6 <uptime>:
+     be6:	48b9                	li	a7,14
+     be8:	00000073          	ecall
+     bec:	8082                	ret
+
+0000000000000bee <putc>:
+     bee:	1101                	addi	sp,sp,-32
+     bf0:	ec06                	sd	ra,24(sp)
+     bf2:	e822                	sd	s0,16(sp)
+     bf4:	1000                	addi	s0,sp,32
+     bf6:	feb407a3          	sb	a1,-17(s0)
+     bfa:	4605                	li	a2,1
+     bfc:	fef40593          	addi	a1,s0,-17
+     c00:	f6fff0ef          	jal	b6e <write>
+     c04:	60e2                	ld	ra,24(sp)
+     c06:	6442                	ld	s0,16(sp)
+     c08:	6105                	addi	sp,sp,32
+     c0a:	8082                	ret
+
+0000000000000c0c <printint>:
+     c0c:	7139                	addi	sp,sp,-64
+     c0e:	fc06                	sd	ra,56(sp)
+     c10:	f822                	sd	s0,48(sp)
+     c12:	f426                	sd	s1,40(sp)
+     c14:	0080                	addi	s0,sp,64
+     c16:	84aa                	mv	s1,a0
+     c18:	c299                	beqz	a3,c1e <printint+0x12>
+     c1a:	0805c963          	bltz	a1,cac <printint+0xa0>
+     c1e:	2581                	sext.w	a1,a1
+     c20:	4881                	li	a7,0
+     c22:	fc040693          	addi	a3,s0,-64
+     c26:	4701                	li	a4,0
+     c28:	2601                	sext.w	a2,a2
+     c2a:	00001517          	auipc	a0,0x1
+     c2e:	86650513          	addi	a0,a0,-1946 # 1490 <digits>
+     c32:	883a                	mv	a6,a4
+     c34:	2705                	addiw	a4,a4,1
+     c36:	02c5f7bb          	remuw	a5,a1,a2
+     c3a:	1782                	slli	a5,a5,0x20
+     c3c:	9381                	srli	a5,a5,0x20
+     c3e:	97aa                	add	a5,a5,a0
+     c40:	0007c783          	lbu	a5,0(a5)
+     c44:	00f68023          	sb	a5,0(a3)
+     c48:	0005879b          	sext.w	a5,a1
+     c4c:	02c5d5bb          	divuw	a1,a1,a2
+     c50:	0685                	addi	a3,a3,1
+     c52:	fec7f0e3          	bgeu	a5,a2,c32 <printint+0x26>
+     c56:	00088c63          	beqz	a7,c6e <printint+0x62>
+     c5a:	fd070793          	addi	a5,a4,-48
+     c5e:	00878733          	add	a4,a5,s0
+     c62:	02d00793          	li	a5,45
+     c66:	fef70823          	sb	a5,-16(a4)
+     c6a:	0028071b          	addiw	a4,a6,2
+     c6e:	02e05a63          	blez	a4,ca2 <printint+0x96>
+     c72:	f04a                	sd	s2,32(sp)
+     c74:	ec4e                	sd	s3,24(sp)
+     c76:	fc040793          	addi	a5,s0,-64
+     c7a:	00e78933          	add	s2,a5,a4
+     c7e:	fff78993          	addi	s3,a5,-1
+     c82:	99ba                	add	s3,s3,a4
+     c84:	377d                	addiw	a4,a4,-1
+     c86:	1702                	slli	a4,a4,0x20
+     c88:	9301                	srli	a4,a4,0x20
+     c8a:	40e989b3          	sub	s3,s3,a4
+     c8e:	fff94583          	lbu	a1,-1(s2)
+     c92:	8526                	mv	a0,s1
+     c94:	f5bff0ef          	jal	bee <putc>
+     c98:	197d                	addi	s2,s2,-1
+     c9a:	ff391ae3          	bne	s2,s3,c8e <printint+0x82>
+     c9e:	7902                	ld	s2,32(sp)
+     ca0:	69e2                	ld	s3,24(sp)
+     ca2:	70e2                	ld	ra,56(sp)
+     ca4:	7442                	ld	s0,48(sp)
+     ca6:	74a2                	ld	s1,40(sp)
+     ca8:	6121                	addi	sp,sp,64
+     caa:	8082                	ret
+     cac:	40b005bb          	negw	a1,a1
+     cb0:	4885                	li	a7,1
+     cb2:	bf85                	j	c22 <printint+0x16>
+
+0000000000000cb4 <vprintf>:
+     cb4:	711d                	addi	sp,sp,-96
+     cb6:	ec86                	sd	ra,88(sp)
+     cb8:	e8a2                	sd	s0,80(sp)
+     cba:	e0ca                	sd	s2,64(sp)
+     cbc:	1080                	addi	s0,sp,96
+     cbe:	0005c903          	lbu	s2,0(a1)
+     cc2:	26090863          	beqz	s2,f32 <vprintf+0x27e>
+     cc6:	e4a6                	sd	s1,72(sp)
+     cc8:	fc4e                	sd	s3,56(sp)
+     cca:	f852                	sd	s4,48(sp)
+     ccc:	f456                	sd	s5,40(sp)
+     cce:	f05a                	sd	s6,32(sp)
+     cd0:	ec5e                	sd	s7,24(sp)
+     cd2:	e862                	sd	s8,16(sp)
+     cd4:	e466                	sd	s9,8(sp)
+     cd6:	8b2a                	mv	s6,a0
+     cd8:	8a2e                	mv	s4,a1
+     cda:	8bb2                	mv	s7,a2
+     cdc:	4981                	li	s3,0
+     cde:	4481                	li	s1,0
+     ce0:	4701                	li	a4,0
+     ce2:	02500a93          	li	s5,37
+     ce6:	06400c13          	li	s8,100
+     cea:	06c00c93          	li	s9,108
+     cee:	a005                	j	d0e <vprintf+0x5a>
+     cf0:	85ca                	mv	a1,s2
+     cf2:	855a                	mv	a0,s6
+     cf4:	efbff0ef          	jal	bee <putc>
+     cf8:	a019                	j	cfe <vprintf+0x4a>
+     cfa:	03598263          	beq	s3,s5,d1e <vprintf+0x6a>
+     cfe:	2485                	addiw	s1,s1,1
+     d00:	8726                	mv	a4,s1
+     d02:	009a07b3          	add	a5,s4,s1
+     d06:	0007c903          	lbu	s2,0(a5)
+     d0a:	20090c63          	beqz	s2,f22 <vprintf+0x26e>
+     d0e:	0009079b          	sext.w	a5,s2
+     d12:	fe0994e3          	bnez	s3,cfa <vprintf+0x46>
+     d16:	fd579de3          	bne	a5,s5,cf0 <vprintf+0x3c>
+     d1a:	89be                	mv	s3,a5
+     d1c:	b7cd                	j	cfe <vprintf+0x4a>
+     d1e:	00ea06b3          	add	a3,s4,a4
+     d22:	0016c683          	lbu	a3,1(a3)
+     d26:	8636                	mv	a2,a3
+     d28:	c681                	beqz	a3,d30 <vprintf+0x7c>
+     d2a:	9752                	add	a4,a4,s4
+     d2c:	00274603          	lbu	a2,2(a4)
+     d30:	03878f63          	beq	a5,s8,d6e <vprintf+0xba>
+     d34:	05978963          	beq	a5,s9,d86 <vprintf+0xd2>
+     d38:	07500713          	li	a4,117
+     d3c:	0ee78363          	beq	a5,a4,e22 <vprintf+0x16e>
+     d40:	07800713          	li	a4,120
+     d44:	12e78563          	beq	a5,a4,e6e <vprintf+0x1ba>
+     d48:	07000713          	li	a4,112
+     d4c:	14e78a63          	beq	a5,a4,ea0 <vprintf+0x1ec>
+     d50:	07300713          	li	a4,115
+     d54:	18e78a63          	beq	a5,a4,ee8 <vprintf+0x234>
+     d58:	02500713          	li	a4,37
+     d5c:	04e79563          	bne	a5,a4,da6 <vprintf+0xf2>
+     d60:	02500593          	li	a1,37
+     d64:	855a                	mv	a0,s6
+     d66:	e89ff0ef          	jal	bee <putc>
+     d6a:	4981                	li	s3,0
+     d6c:	bf49                	j	cfe <vprintf+0x4a>
+     d6e:	008b8913          	addi	s2,s7,8
+     d72:	4685                	li	a3,1
+     d74:	4629                	li	a2,10
+     d76:	000ba583          	lw	a1,0(s7)
+     d7a:	855a                	mv	a0,s6
+     d7c:	e91ff0ef          	jal	c0c <printint>
+     d80:	8bca                	mv	s7,s2
+     d82:	4981                	li	s3,0
+     d84:	bfad                	j	cfe <vprintf+0x4a>
+     d86:	06400793          	li	a5,100
+     d8a:	02f68963          	beq	a3,a5,dbc <vprintf+0x108>
+     d8e:	06c00793          	li	a5,108
+     d92:	04f68263          	beq	a3,a5,dd6 <vprintf+0x122>
+     d96:	07500793          	li	a5,117
+     d9a:	0af68063          	beq	a3,a5,e3a <vprintf+0x186>
+     d9e:	07800793          	li	a5,120
+     da2:	0ef68263          	beq	a3,a5,e86 <vprintf+0x1d2>
+     da6:	02500593          	li	a1,37
+     daa:	855a                	mv	a0,s6
+     dac:	e43ff0ef          	jal	bee <putc>
+     db0:	85ca                	mv	a1,s2
+     db2:	855a                	mv	a0,s6
+     db4:	e3bff0ef          	jal	bee <putc>
+     db8:	4981                	li	s3,0
+     dba:	b791                	j	cfe <vprintf+0x4a>
+     dbc:	008b8913          	addi	s2,s7,8
+     dc0:	4685                	li	a3,1
+     dc2:	4629                	li	a2,10
+     dc4:	000ba583          	lw	a1,0(s7)
+     dc8:	855a                	mv	a0,s6
+     dca:	e43ff0ef          	jal	c0c <printint>
+     dce:	2485                	addiw	s1,s1,1
+     dd0:	8bca                	mv	s7,s2
+     dd2:	4981                	li	s3,0
+     dd4:	b72d                	j	cfe <vprintf+0x4a>
+     dd6:	06400793          	li	a5,100
+     dda:	02f60763          	beq	a2,a5,e08 <vprintf+0x154>
+     dde:	07500793          	li	a5,117
+     de2:	06f60963          	beq	a2,a5,e54 <vprintf+0x1a0>
+     de6:	07800793          	li	a5,120
+     dea:	faf61ee3          	bne	a2,a5,da6 <vprintf+0xf2>
+     dee:	008b8913          	addi	s2,s7,8
+     df2:	4681                	li	a3,0
+     df4:	4641                	li	a2,16
+     df6:	000ba583          	lw	a1,0(s7)
+     dfa:	855a                	mv	a0,s6
+     dfc:	e11ff0ef          	jal	c0c <printint>
+     e00:	2489                	addiw	s1,s1,2
+     e02:	8bca                	mv	s7,s2
+     e04:	4981                	li	s3,0
+     e06:	bde5                	j	cfe <vprintf+0x4a>
+     e08:	008b8913          	addi	s2,s7,8
+     e0c:	4685                	li	a3,1
+     e0e:	4629                	li	a2,10
+     e10:	000ba583          	lw	a1,0(s7)
+     e14:	855a                	mv	a0,s6
+     e16:	df7ff0ef          	jal	c0c <printint>
+     e1a:	2489                	addiw	s1,s1,2
+     e1c:	8bca                	mv	s7,s2
+     e1e:	4981                	li	s3,0
+     e20:	bdf9                	j	cfe <vprintf+0x4a>
+     e22:	008b8913          	addi	s2,s7,8
+     e26:	4681                	li	a3,0
+     e28:	4629                	li	a2,10
+     e2a:	000ba583          	lw	a1,0(s7)
+     e2e:	855a                	mv	a0,s6
+     e30:	dddff0ef          	jal	c0c <printint>
+     e34:	8bca                	mv	s7,s2
+     e36:	4981                	li	s3,0
+     e38:	b5d9                	j	cfe <vprintf+0x4a>
+     e3a:	008b8913          	addi	s2,s7,8
+     e3e:	4681                	li	a3,0
+     e40:	4629                	li	a2,10
+     e42:	000ba583          	lw	a1,0(s7)
+     e46:	855a                	mv	a0,s6
+     e48:	dc5ff0ef          	jal	c0c <printint>
+     e4c:	2485                	addiw	s1,s1,1
+     e4e:	8bca                	mv	s7,s2
+     e50:	4981                	li	s3,0
+     e52:	b575                	j	cfe <vprintf+0x4a>
+     e54:	008b8913          	addi	s2,s7,8
+     e58:	4681                	li	a3,0
+     e5a:	4629                	li	a2,10
+     e5c:	000ba583          	lw	a1,0(s7)
+     e60:	855a                	mv	a0,s6
+     e62:	dabff0ef          	jal	c0c <printint>
+     e66:	2489                	addiw	s1,s1,2
+     e68:	8bca                	mv	s7,s2
+     e6a:	4981                	li	s3,0
+     e6c:	bd49                	j	cfe <vprintf+0x4a>
+     e6e:	008b8913          	addi	s2,s7,8
+     e72:	4681                	li	a3,0
+     e74:	4641                	li	a2,16
+     e76:	000ba583          	lw	a1,0(s7)
+     e7a:	855a                	mv	a0,s6
+     e7c:	d91ff0ef          	jal	c0c <printint>
+     e80:	8bca                	mv	s7,s2
+     e82:	4981                	li	s3,0
+     e84:	bdad                	j	cfe <vprintf+0x4a>
+     e86:	008b8913          	addi	s2,s7,8
+     e8a:	4681                	li	a3,0
+     e8c:	4641                	li	a2,16
+     e8e:	000ba583          	lw	a1,0(s7)
+     e92:	855a                	mv	a0,s6
+     e94:	d79ff0ef          	jal	c0c <printint>
+     e98:	2485                	addiw	s1,s1,1
+     e9a:	8bca                	mv	s7,s2
+     e9c:	4981                	li	s3,0
+     e9e:	b585                	j	cfe <vprintf+0x4a>
+     ea0:	e06a                	sd	s10,0(sp)
+     ea2:	008b8d13          	addi	s10,s7,8
+     ea6:	000bb983          	ld	s3,0(s7)
+     eaa:	03000593          	li	a1,48
+     eae:	855a                	mv	a0,s6
+     eb0:	d3fff0ef          	jal	bee <putc>
+     eb4:	07800593          	li	a1,120
+     eb8:	855a                	mv	a0,s6
+     eba:	d35ff0ef          	jal	bee <putc>
+     ebe:	4941                	li	s2,16
+     ec0:	00000b97          	auipc	s7,0x0
+     ec4:	5d0b8b93          	addi	s7,s7,1488 # 1490 <digits>
+     ec8:	03c9d793          	srli	a5,s3,0x3c
+     ecc:	97de                	add	a5,a5,s7
+     ece:	0007c583          	lbu	a1,0(a5)
+     ed2:	855a                	mv	a0,s6
+     ed4:	d1bff0ef          	jal	bee <putc>
+     ed8:	0992                	slli	s3,s3,0x4
+     eda:	397d                	addiw	s2,s2,-1
+     edc:	fe0916e3          	bnez	s2,ec8 <vprintf+0x214>
+     ee0:	8bea                	mv	s7,s10
+     ee2:	4981                	li	s3,0
+     ee4:	6d02                	ld	s10,0(sp)
+     ee6:	bd21                	j	cfe <vprintf+0x4a>
+     ee8:	008b8993          	addi	s3,s7,8
+     eec:	000bb903          	ld	s2,0(s7)
+     ef0:	00090f63          	beqz	s2,f0e <vprintf+0x25a>
+     ef4:	00094583          	lbu	a1,0(s2)
+     ef8:	c195                	beqz	a1,f1c <vprintf+0x268>
+     efa:	855a                	mv	a0,s6
+     efc:	cf3ff0ef          	jal	bee <putc>
+     f00:	0905                	addi	s2,s2,1
+     f02:	00094583          	lbu	a1,0(s2)
+     f06:	f9f5                	bnez	a1,efa <vprintf+0x246>
+     f08:	8bce                	mv	s7,s3
+     f0a:	4981                	li	s3,0
+     f0c:	bbcd                	j	cfe <vprintf+0x4a>
+     f0e:	00000917          	auipc	s2,0x0
+     f12:	51a90913          	addi	s2,s2,1306 # 1428 <malloc+0x40e>
+     f16:	02800593          	li	a1,40
+     f1a:	b7c5                	j	efa <vprintf+0x246>
+     f1c:	8bce                	mv	s7,s3
+     f1e:	4981                	li	s3,0
+     f20:	bbf9                	j	cfe <vprintf+0x4a>
+     f22:	64a6                	ld	s1,72(sp)
+     f24:	79e2                	ld	s3,56(sp)
+     f26:	7a42                	ld	s4,48(sp)
+     f28:	7aa2                	ld	s5,40(sp)
+     f2a:	7b02                	ld	s6,32(sp)
+     f2c:	6be2                	ld	s7,24(sp)
+     f2e:	6c42                	ld	s8,16(sp)
+     f30:	6ca2                	ld	s9,8(sp)
+     f32:	60e6                	ld	ra,88(sp)
+     f34:	6446                	ld	s0,80(sp)
+     f36:	6906                	ld	s2,64(sp)
+     f38:	6125                	addi	sp,sp,96
+     f3a:	8082                	ret
+
+0000000000000f3c <fprintf>:
+     f3c:	715d                	addi	sp,sp,-80
+     f3e:	ec06                	sd	ra,24(sp)
+     f40:	e822                	sd	s0,16(sp)
+     f42:	1000                	addi	s0,sp,32
+     f44:	e010                	sd	a2,0(s0)
+     f46:	e414                	sd	a3,8(s0)
+     f48:	e818                	sd	a4,16(s0)
+     f4a:	ec1c                	sd	a5,24(s0)
+     f4c:	03043023          	sd	a6,32(s0)
+     f50:	03143423          	sd	a7,40(s0)
+     f54:	fe843423          	sd	s0,-24(s0)
+     f58:	8622                	mv	a2,s0
+     f5a:	d5bff0ef          	jal	cb4 <vprintf>
+     f5e:	60e2                	ld	ra,24(sp)
+     f60:	6442                	ld	s0,16(sp)
+     f62:	6161                	addi	sp,sp,80
+     f64:	8082                	ret
+
+0000000000000f66 <printf>:
+     f66:	711d                	addi	sp,sp,-96
+     f68:	ec06                	sd	ra,24(sp)
+     f6a:	e822                	sd	s0,16(sp)
+     f6c:	1000                	addi	s0,sp,32
+     f6e:	e40c                	sd	a1,8(s0)
+     f70:	e810                	sd	a2,16(s0)
+     f72:	ec14                	sd	a3,24(s0)
+     f74:	f018                	sd	a4,32(s0)
+     f76:	f41c                	sd	a5,40(s0)
+     f78:	03043823          	sd	a6,48(s0)
+     f7c:	03143c23          	sd	a7,56(s0)
+     f80:	00840613          	addi	a2,s0,8
+     f84:	fec43423          	sd	a2,-24(s0)
+     f88:	85aa                	mv	a1,a0
+     f8a:	4505                	li	a0,1
+     f8c:	d29ff0ef          	jal	cb4 <vprintf>
+     f90:	60e2                	ld	ra,24(sp)
+     f92:	6442                	ld	s0,16(sp)
+     f94:	6125                	addi	sp,sp,96
+     f96:	8082                	ret
+
+0000000000000f98 <free>:
+     f98:	1141                	addi	sp,sp,-16
+     f9a:	e422                	sd	s0,8(sp)
+     f9c:	0800                	addi	s0,sp,16
+     f9e:	ff050693          	addi	a3,a0,-16
+     fa2:	00001797          	auipc	a5,0x1
+     fa6:	06e7b783          	ld	a5,110(a5) # 2010 <freep>
+     faa:	a02d                	j	fd4 <free+0x3c>
+     fac:	4618                	lw	a4,8(a2)
+     fae:	9f2d                	addw	a4,a4,a1
+     fb0:	fee52c23          	sw	a4,-8(a0)
+     fb4:	6398                	ld	a4,0(a5)
+     fb6:	6310                	ld	a2,0(a4)
+     fb8:	a83d                	j	ff6 <free+0x5e>
+     fba:	ff852703          	lw	a4,-8(a0)
+     fbe:	9f31                	addw	a4,a4,a2
+     fc0:	c798                	sw	a4,8(a5)
+     fc2:	ff053683          	ld	a3,-16(a0)
+     fc6:	a091                	j	100a <free+0x72>
+     fc8:	6398                	ld	a4,0(a5)
+     fca:	00e7e463          	bltu	a5,a4,fd2 <free+0x3a>
+     fce:	00e6ea63          	bltu	a3,a4,fe2 <free+0x4a>
+     fd2:	87ba                	mv	a5,a4
+     fd4:	fed7fae3          	bgeu	a5,a3,fc8 <free+0x30>
+     fd8:	6398                	ld	a4,0(a5)
+     fda:	00e6e463          	bltu	a3,a4,fe2 <free+0x4a>
+     fde:	fee7eae3          	bltu	a5,a4,fd2 <free+0x3a>
+     fe2:	ff852583          	lw	a1,-8(a0)
+     fe6:	6390                	ld	a2,0(a5)
+     fe8:	02059813          	slli	a6,a1,0x20
+     fec:	01c85713          	srli	a4,a6,0x1c
+     ff0:	9736                	add	a4,a4,a3
+     ff2:	fae60de3          	beq	a2,a4,fac <free+0x14>
+     ff6:	fec53823          	sd	a2,-16(a0)
+     ffa:	4790                	lw	a2,8(a5)
+     ffc:	02061593          	slli	a1,a2,0x20
+    1000:	01c5d713          	srli	a4,a1,0x1c
+    1004:	973e                	add	a4,a4,a5
+    1006:	fae68ae3          	beq	a3,a4,fba <free+0x22>
+    100a:	e394                	sd	a3,0(a5)
+    100c:	00001717          	auipc	a4,0x1
+    1010:	00f73223          	sd	a5,4(a4) # 2010 <freep>
+    1014:	6422                	ld	s0,8(sp)
+    1016:	0141                	addi	sp,sp,16
+    1018:	8082                	ret
+
+000000000000101a <malloc>:
+    101a:	7139                	addi	sp,sp,-64
+    101c:	fc06                	sd	ra,56(sp)
+    101e:	f822                	sd	s0,48(sp)
+    1020:	f426                	sd	s1,40(sp)
+    1022:	ec4e                	sd	s3,24(sp)
+    1024:	0080                	addi	s0,sp,64
+    1026:	02051493          	slli	s1,a0,0x20
+    102a:	9081                	srli	s1,s1,0x20
+    102c:	04bd                	addi	s1,s1,15
+    102e:	8091                	srli	s1,s1,0x4
+    1030:	0014899b          	addiw	s3,s1,1
+    1034:	0485                	addi	s1,s1,1
+    1036:	00001517          	auipc	a0,0x1
+    103a:	fda53503          	ld	a0,-38(a0) # 2010 <freep>
+    103e:	c915                	beqz	a0,1072 <malloc+0x58>
+    1040:	611c                	ld	a5,0(a0)
+    1042:	4798                	lw	a4,8(a5)
+    1044:	08977a63          	bgeu	a4,s1,10d8 <malloc+0xbe>
+    1048:	f04a                	sd	s2,32(sp)
+    104a:	e852                	sd	s4,16(sp)
+    104c:	e456                	sd	s5,8(sp)
+    104e:	e05a                	sd	s6,0(sp)
+    1050:	8a4e                	mv	s4,s3
+    1052:	0009871b          	sext.w	a4,s3
+    1056:	6685                	lui	a3,0x1
+    1058:	00d77363          	bgeu	a4,a3,105e <malloc+0x44>
+    105c:	6a05                	lui	s4,0x1
+    105e:	000a0b1b          	sext.w	s6,s4
+    1062:	004a1a1b          	slliw	s4,s4,0x4
+    1066:	00001917          	auipc	s2,0x1
+    106a:	faa90913          	addi	s2,s2,-86 # 2010 <freep>
+    106e:	5afd                	li	s5,-1
+    1070:	a081                	j	10b0 <malloc+0x96>
+    1072:	f04a                	sd	s2,32(sp)
+    1074:	e852                	sd	s4,16(sp)
+    1076:	e456                	sd	s5,8(sp)
+    1078:	e05a                	sd	s6,0(sp)
+    107a:	00001797          	auipc	a5,0x1
+    107e:	38e78793          	addi	a5,a5,910 # 2408 <base>
+    1082:	00001717          	auipc	a4,0x1
+    1086:	f8f73723          	sd	a5,-114(a4) # 2010 <freep>
+    108a:	e39c                	sd	a5,0(a5)
+    108c:	0007a423          	sw	zero,8(a5)
+    1090:	b7c1                	j	1050 <malloc+0x36>
+    1092:	6398                	ld	a4,0(a5)
+    1094:	e118                	sd	a4,0(a0)
+    1096:	a8a9                	j	10f0 <malloc+0xd6>
+    1098:	01652423          	sw	s6,8(a0)
+    109c:	0541                	addi	a0,a0,16
+    109e:	efbff0ef          	jal	f98 <free>
+    10a2:	00093503          	ld	a0,0(s2)
+    10a6:	c12d                	beqz	a0,1108 <malloc+0xee>
+    10a8:	611c                	ld	a5,0(a0)
+    10aa:	4798                	lw	a4,8(a5)
+    10ac:	02977263          	bgeu	a4,s1,10d0 <malloc+0xb6>
+    10b0:	00093703          	ld	a4,0(s2)
+    10b4:	853e                	mv	a0,a5
+    10b6:	fef719e3          	bne	a4,a5,10a8 <malloc+0x8e>
+    10ba:	8552                	mv	a0,s4
+    10bc:	b1bff0ef          	jal	bd6 <sbrk>
+    10c0:	fd551ce3          	bne	a0,s5,1098 <malloc+0x7e>
+    10c4:	4501                	li	a0,0
+    10c6:	7902                	ld	s2,32(sp)
+    10c8:	6a42                	ld	s4,16(sp)
+    10ca:	6aa2                	ld	s5,8(sp)
+    10cc:	6b02                	ld	s6,0(sp)
+    10ce:	a03d                	j	10fc <malloc+0xe2>
+    10d0:	7902                	ld	s2,32(sp)
+    10d2:	6a42                	ld	s4,16(sp)
+    10d4:	6aa2                	ld	s5,8(sp)
+    10d6:	6b02                	ld	s6,0(sp)
+    10d8:	fae48de3          	beq	s1,a4,1092 <malloc+0x78>
+    10dc:	4137073b          	subw	a4,a4,s3
+    10e0:	c798                	sw	a4,8(a5)
+    10e2:	02071693          	slli	a3,a4,0x20
+    10e6:	01c6d713          	srli	a4,a3,0x1c
+    10ea:	97ba                	add	a5,a5,a4
+    10ec:	0137a423          	sw	s3,8(a5)
+    10f0:	00001717          	auipc	a4,0x1
+    10f4:	f2a73023          	sd	a0,-224(a4) # 2010 <freep>
+    10f8:	01078513          	addi	a0,a5,16
+    10fc:	70e2                	ld	ra,56(sp)
+    10fe:	7442                	ld	s0,48(sp)
+    1100:	74a2                	ld	s1,40(sp)
+    1102:	69e2                	ld	s3,24(sp)
+    1104:	6121                	addi	sp,sp,64
+    1106:	8082                	ret
+    1108:	7902                	ld	s2,32(sp)
+    110a:	6a42                	ld	s4,16(sp)
+    110c:	6aa2                	ld	s5,8(sp)
+    110e:	6b02                	ld	s6,0(sp)
+    1110:	b7f5                	j	10fc <malloc+0xe2>
diff --git a/xv6-labs-2024/user/grind.c b/xv6-labs-2024/user/grind.c
new file mode 100644
index 0000000..431ed19
--- /dev/null
+++ b/xv6-labs-2024/user/grind.c
@@ -0,0 +1,351 @@
+//
+// run random system calls in parallel forever.
+//
+
+#include "kernel/param.h"
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+#include "kernel/syscall.h"
+#include "kernel/memlayout.h"
+#include "kernel/riscv.h"
+
+// from FreeBSD.
+int
+do_rand(unsigned long *ctx)
+{
+/*
+ * Compute x = (7^5 * x) mod (2^31 - 1)
+ * without overflowing 31 bits:
+ *      (2^31 - 1) = 127773 * (7^5) + 2836
+ * From "Random number generators: good ones are hard to find",
+ * Park and Miller, Communications of the ACM, vol. 31, no. 10,
+ * October 1988, p. 1195.
+ */
+    long hi, lo, x;
+
+    /* Transform to [1, 0x7ffffffe] range. */
+    x = (*ctx % 0x7ffffffe) + 1;
+    hi = x / 127773;
+    lo = x % 127773;
+    x = 16807 * lo - 2836 * hi;
+    if (x < 0)
+        x += 0x7fffffff;
+    /* Transform to [0, 0x7ffffffd] range. */
+    x--;
+    *ctx = x;
+    return (x);
+}
+
+unsigned long rand_next = 1;
+
+int
+rand(void)
+{
+    return (do_rand(&rand_next));
+}
+
+void
+go(int which_child)
+{
+  int fd = -1;
+  static char buf[999];
+  char *break0 = sbrk(0);
+  uint64 iters = 0;
+
+  mkdir("grindir");
+  if(chdir("grindir") != 0){
+    printf("grind: chdir grindir failed\n");
+    exit(1);
+  }
+  chdir("/");
+  
+  while(1){
+    iters++;
+    if((iters % 500) == 0)
+      write(1, which_child?"B":"A", 1);
+    int what = rand() % 23;
+    if(what == 1){
+      close(open("grindir/../a", O_CREATE|O_RDWR));
+    } else if(what == 2){
+      close(open("grindir/../grindir/../b", O_CREATE|O_RDWR));
+    } else if(what == 3){
+      unlink("grindir/../a");
+    } else if(what == 4){
+      if(chdir("grindir") != 0){
+        printf("grind: chdir grindir failed\n");
+        exit(1);
+      }
+      unlink("../b");
+      chdir("/");
+    } else if(what == 5){
+      close(fd);
+      fd = open("/grindir/../a", O_CREATE|O_RDWR);
+    } else if(what == 6){
+      close(fd);
+      fd = open("/./grindir/./../b", O_CREATE|O_RDWR);
+    } else if(what == 7){
+      write(fd, buf, sizeof(buf));
+    } else if(what == 8){
+      read(fd, buf, sizeof(buf));
+    } else if(what == 9){
+      mkdir("grindir/../a");
+      close(open("a/../a/./a", O_CREATE|O_RDWR));
+      unlink("a/a");
+    } else if(what == 10){
+      mkdir("/../b");
+      close(open("grindir/../b/b", O_CREATE|O_RDWR));
+      unlink("b/b");
+    } else if(what == 11){
+      unlink("b");
+      link("../grindir/./../a", "../b");
+    } else if(what == 12){
+      unlink("../grindir/../a");
+      link(".././b", "/grindir/../a");
+    } else if(what == 13){
+      int pid = fork();
+      if(pid == 0){
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      wait(0);
+    } else if(what == 14){
+      int pid = fork();
+      if(pid == 0){
+        fork();
+        fork();
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      wait(0);
+    } else if(what == 15){
+      sbrk(6011);
+    } else if(what == 16){
+      if(sbrk(0) > break0)
+        sbrk(-(sbrk(0) - break0));
+    } else if(what == 17){
+      int pid = fork();
+      if(pid == 0){
+        close(open("a", O_CREATE|O_RDWR));
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      if(chdir("../grindir/..") != 0){
+        printf("grind: chdir failed\n");
+        exit(1);
+      }
+      kill(pid);
+      wait(0);
+    } else if(what == 18){
+      int pid = fork();
+      if(pid == 0){
+        kill(getpid());
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      wait(0);
+    } else if(what == 19){
+      int fds[2];
+      if(pipe(fds) < 0){
+        printf("grind: pipe failed\n");
+        exit(1);
+      }
+      int pid = fork();
+      if(pid == 0){
+        fork();
+        fork();
+        if(write(fds[1], "x", 1) != 1)
+          printf("grind: pipe write failed\n");
+        char c;
+        if(read(fds[0], &c, 1) != 1)
+          printf("grind: pipe read failed\n");
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      close(fds[0]);
+      close(fds[1]);
+      wait(0);
+    } else if(what == 20){
+      int pid = fork();
+      if(pid == 0){
+        unlink("a");
+        mkdir("a");
+        chdir("a");
+        unlink("../a");
+        fd = open("x", O_CREATE|O_RDWR);
+        unlink("x");
+        exit(0);
+      } else if(pid < 0){
+        printf("grind: fork failed\n");
+        exit(1);
+      }
+      wait(0);
+    } else if(what == 21){
+      unlink("c");
+      // should always succeed. check that there are free i-nodes,
+      // file descriptors, blocks.
+      int fd1 = open("c", O_CREATE|O_RDWR);
+      if(fd1 < 0){
+        printf("grind: create c failed\n");
+        exit(1);
+      }
+      if(write(fd1, "x", 1) != 1){
+        printf("grind: write c failed\n");
+        exit(1);
+      }
+      struct stat st;
+      if(fstat(fd1, &st) != 0){
+        printf("grind: fstat failed\n");
+        exit(1);
+      }
+      if(st.size != 1){
+        printf("grind: fstat reports wrong size %d\n", (int)st.size);
+        exit(1);
+      }
+      if(st.ino > 200){
+        printf("grind: fstat reports crazy i-number %d\n", st.ino);
+        exit(1);
+      }
+      close(fd1);
+      unlink("c");
+    } else if(what == 22){
+      // echo hi | cat
+      int aa[2], bb[2];
+      if(pipe(aa) < 0){
+        fprintf(2, "grind: pipe failed\n");
+        exit(1);
+      }
+      if(pipe(bb) < 0){
+        fprintf(2, "grind: pipe failed\n");
+        exit(1);
+      }
+      int pid1 = fork();
+      if(pid1 == 0){
+        close(bb[0]);
+        close(bb[1]);
+        close(aa[0]);
+        close(1);
+        if(dup(aa[1]) != 1){
+          fprintf(2, "grind: dup failed\n");
+          exit(1);
+        }
+        close(aa[1]);
+        char *args[3] = { "echo", "hi", 0 };
+        exec("grindir/../echo", args);
+        fprintf(2, "grind: echo: not found\n");
+        exit(2);
+      } else if(pid1 < 0){
+        fprintf(2, "grind: fork failed\n");
+        exit(3);
+      }
+      int pid2 = fork();
+      if(pid2 == 0){
+        close(aa[1]);
+        close(bb[0]);
+        close(0);
+        if(dup(aa[0]) != 0){
+          fprintf(2, "grind: dup failed\n");
+          exit(4);
+        }
+        close(aa[0]);
+        close(1);
+        if(dup(bb[1]) != 1){
+          fprintf(2, "grind: dup failed\n");
+          exit(5);
+        }
+        close(bb[1]);
+        char *args[2] = { "cat", 0 };
+        exec("/cat", args);
+        fprintf(2, "grind: cat: not found\n");
+        exit(6);
+      } else if(pid2 < 0){
+        fprintf(2, "grind: fork failed\n");
+        exit(7);
+      }
+      close(aa[0]);
+      close(aa[1]);
+      close(bb[1]);
+      char buf[4] = { 0, 0, 0, 0 };
+      read(bb[0], buf+0, 1);
+      read(bb[0], buf+1, 1);
+      read(bb[0], buf+2, 1);
+      close(bb[0]);
+      int st1, st2;
+      wait(&st1);
+      wait(&st2);
+      if(st1 != 0 || st2 != 0 || strcmp(buf, "hi\n") != 0){
+        printf("grind: exec pipeline failed %d %d \"%s\"\n", st1, st2, buf);
+        exit(1);
+      }
+    }
+  }
+}
+
+void
+iter()
+{
+  unlink("a");
+  unlink("b");
+  
+  int pid1 = fork();
+  if(pid1 < 0){
+    printf("grind: fork failed\n");
+    exit(1);
+  }
+  if(pid1 == 0){
+    rand_next ^= 31;
+    go(0);
+    exit(0);
+  }
+
+  int pid2 = fork();
+  if(pid2 < 0){
+    printf("grind: fork failed\n");
+    exit(1);
+  }
+  if(pid2 == 0){
+    rand_next ^= 7177;
+    go(1);
+    exit(0);
+  }
+
+  int st1 = -1;
+  wait(&st1);
+  if(st1 != 0){
+    kill(pid1);
+    kill(pid2);
+  }
+  int st2 = -1;
+  wait(&st2);
+
+  exit(0);
+}
+
+int
+main()
+{
+  while(1){
+    int pid = fork();
+    if(pid == 0){
+      iter();
+      exit(0);
+    }
+    if(pid > 0){
+      wait(0);
+    }
+    sleep(20);
+    rand_next += 1;
+  }
+}
diff --git a/xv6-labs-2024/user/grind.d b/xv6-labs-2024/user/grind.d
new file mode 100644
index 0000000..0f4fec8
--- /dev/null
+++ b/xv6-labs-2024/user/grind.d
@@ -0,0 +1,3 @@
+user/grind.o: user/grind.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/param.h kernel/types.h kernel/stat.h user/user.h kernel/fs.h \
+ kernel/fcntl.h kernel/syscall.h kernel/memlayout.h kernel/riscv.h
diff --git a/xv6-labs-2024/user/grind.o b/xv6-labs-2024/user/grind.o
new file mode 100644
index 0000000..775c245
Binary files /dev/null and b/xv6-labs-2024/user/grind.o differ
diff --git a/xv6-labs-2024/user/grind.sym b/xv6-labs-2024/user/grind.sym
new file mode 100644
index 0000000..b957ec3
--- /dev/null
+++ b/xv6-labs-2024/user/grind.sym
@@ -0,0 +1,69 @@
+0000000000000000 .text
+0000000000001118 .rodata
+00000000000014a8 .eh_frame
+0000000000002000 .data
+0000000000002010 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_ranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 grind.c
+0000000000002020 buf.0
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000bee putc
+0000000000000c0c printint
+0000000000001490 digits
+0000000000000000 umalloc.c
+0000000000002010 freep
+0000000000002408 base
+00000000000008f6 strcpy
+0000000000000f66 printf
+0000000000000000 do_rand
+0000000000000aa0 memmove
+0000000000000b96 mknod
+00000000000009ae gets
+0000000000000bce getpid
+0000000000000b32 memcpy
+000000000000101a malloc
+0000000000000bde sleep
+0000000000000b5e pipe
+0000000000000074 go
+00000000000007e2 iter
+0000000000000b6e write
+0000000000000ba6 fstat
+0000000000000f3c fprintf
+0000000000000b7e kill
+0000000000000cb4 vprintf
+0000000000000bbe chdir
+0000000000000b86 exec
+0000000000000b56 wait
+0000000000000058 rand
+0000000000000b66 read
+0000000000000b9e unlink
+0000000000000af8 memcmp
+0000000000000b46 fork
+0000000000002000 rand_next
+0000000000000bd6 sbrk
+0000000000000be6 uptime
+0000000000000968 memset
+00000000000008ae main
+0000000000000912 strcmp
+0000000000000bc6 dup
+0000000000000a1e stat
+0000000000000bae link
+0000000000000b4e exit
+00000000000008e4 start
+0000000000000a58 atoi
+000000000000093e strlen
+0000000000000b8e open
+000000000000098a strchr
+0000000000000bb6 mkdir
+0000000000000b76 close
+0000000000000f98 free
diff --git a/xv6-labs-2024/user/init.asm b/xv6-labs-2024/user/init.asm
new file mode 100644
index 0000000..c9c1dae
--- /dev/null
+++ b/xv6-labs-2024/user/init.asm
@@ -0,0 +1,1087 @@
+
+user/_init:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	e426                	sd	s1,8(sp)
+   8:	e04a                	sd	s2,0(sp)
+   a:	1000                	addi	s0,sp,32
+   c:	4589                	li	a1,2
+   e:	00001517          	auipc	a0,0x1
+  12:	8e250513          	addi	a0,a0,-1822 # 8f0 <malloc+0xfe>
+  16:	350000ef          	jal	366 <open>
+  1a:	04054563          	bltz	a0,64 <main+0x64>
+  1e:	4501                	li	a0,0
+  20:	37e000ef          	jal	39e <dup>
+  24:	4501                	li	a0,0
+  26:	378000ef          	jal	39e <dup>
+  2a:	00001917          	auipc	s2,0x1
+  2e:	8ce90913          	addi	s2,s2,-1842 # 8f8 <malloc+0x106>
+  32:	854a                	mv	a0,s2
+  34:	70a000ef          	jal	73e <printf>
+  38:	2e6000ef          	jal	31e <fork>
+  3c:	84aa                	mv	s1,a0
+  3e:	04054363          	bltz	a0,84 <main+0x84>
+  42:	c931                	beqz	a0,96 <main+0x96>
+  44:	4501                	li	a0,0
+  46:	2e8000ef          	jal	32e <wait>
+  4a:	fea484e3          	beq	s1,a0,32 <main+0x32>
+  4e:	fe055be3          	bgez	a0,44 <main+0x44>
+  52:	00001517          	auipc	a0,0x1
+  56:	8f650513          	addi	a0,a0,-1802 # 948 <malloc+0x156>
+  5a:	6e4000ef          	jal	73e <printf>
+  5e:	4505                	li	a0,1
+  60:	2c6000ef          	jal	326 <exit>
+  64:	4601                	li	a2,0
+  66:	4585                	li	a1,1
+  68:	00001517          	auipc	a0,0x1
+  6c:	88850513          	addi	a0,a0,-1912 # 8f0 <malloc+0xfe>
+  70:	2fe000ef          	jal	36e <mknod>
+  74:	4589                	li	a1,2
+  76:	00001517          	auipc	a0,0x1
+  7a:	87a50513          	addi	a0,a0,-1926 # 8f0 <malloc+0xfe>
+  7e:	2e8000ef          	jal	366 <open>
+  82:	bf71                	j	1e <main+0x1e>
+  84:	00001517          	auipc	a0,0x1
+  88:	88c50513          	addi	a0,a0,-1908 # 910 <malloc+0x11e>
+  8c:	6b2000ef          	jal	73e <printf>
+  90:	4505                	li	a0,1
+  92:	294000ef          	jal	326 <exit>
+  96:	00001597          	auipc	a1,0x1
+  9a:	f6a58593          	addi	a1,a1,-150 # 1000 <argv>
+  9e:	00001517          	auipc	a0,0x1
+  a2:	88a50513          	addi	a0,a0,-1910 # 928 <malloc+0x136>
+  a6:	2b8000ef          	jal	35e <exec>
+  aa:	00001517          	auipc	a0,0x1
+  ae:	88650513          	addi	a0,a0,-1914 # 930 <malloc+0x13e>
+  b2:	68c000ef          	jal	73e <printf>
+  b6:	4505                	li	a0,1
+  b8:	26e000ef          	jal	326 <exit>
+
+00000000000000bc <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  bc:	1141                	addi	sp,sp,-16
+  be:	e406                	sd	ra,8(sp)
+  c0:	e022                	sd	s0,0(sp)
+  c2:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  c4:	f3dff0ef          	jal	0 <main>
+  exit(0);
+  c8:	4501                	li	a0,0
+  ca:	25c000ef          	jal	326 <exit>
+
+00000000000000ce <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  ce:	1141                	addi	sp,sp,-16
+  d0:	e422                	sd	s0,8(sp)
+  d2:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  d4:	87aa                	mv	a5,a0
+  d6:	0585                	addi	a1,a1,1
+  d8:	0785                	addi	a5,a5,1
+  da:	fff5c703          	lbu	a4,-1(a1)
+  de:	fee78fa3          	sb	a4,-1(a5)
+  e2:	fb75                	bnez	a4,d6 <strcpy+0x8>
+    ;
+  return os;
+}
+  e4:	6422                	ld	s0,8(sp)
+  e6:	0141                	addi	sp,sp,16
+  e8:	8082                	ret
+
+00000000000000ea <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  ea:	1141                	addi	sp,sp,-16
+  ec:	e422                	sd	s0,8(sp)
+  ee:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  f0:	00054783          	lbu	a5,0(a0)
+  f4:	cb91                	beqz	a5,108 <strcmp+0x1e>
+  f6:	0005c703          	lbu	a4,0(a1)
+  fa:	00f71763          	bne	a4,a5,108 <strcmp+0x1e>
+    p++, q++;
+  fe:	0505                	addi	a0,a0,1
+ 100:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 102:	00054783          	lbu	a5,0(a0)
+ 106:	fbe5                	bnez	a5,f6 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 108:	0005c503          	lbu	a0,0(a1)
+}
+ 10c:	40a7853b          	subw	a0,a5,a0
+ 110:	6422                	ld	s0,8(sp)
+ 112:	0141                	addi	sp,sp,16
+ 114:	8082                	ret
+
+0000000000000116 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 116:	1141                	addi	sp,sp,-16
+ 118:	e422                	sd	s0,8(sp)
+ 11a:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 11c:	00054783          	lbu	a5,0(a0)
+ 120:	cf91                	beqz	a5,13c <strlen+0x26>
+ 122:	0505                	addi	a0,a0,1
+ 124:	87aa                	mv	a5,a0
+ 126:	86be                	mv	a3,a5
+ 128:	0785                	addi	a5,a5,1
+ 12a:	fff7c703          	lbu	a4,-1(a5)
+ 12e:	ff65                	bnez	a4,126 <strlen+0x10>
+ 130:	40a6853b          	subw	a0,a3,a0
+ 134:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 136:	6422                	ld	s0,8(sp)
+ 138:	0141                	addi	sp,sp,16
+ 13a:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 13c:	4501                	li	a0,0
+ 13e:	bfe5                	j	136 <strlen+0x20>
+
+0000000000000140 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 140:	1141                	addi	sp,sp,-16
+ 142:	e422                	sd	s0,8(sp)
+ 144:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 146:	ca19                	beqz	a2,15c <memset+0x1c>
+ 148:	87aa                	mv	a5,a0
+ 14a:	1602                	slli	a2,a2,0x20
+ 14c:	9201                	srli	a2,a2,0x20
+ 14e:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 152:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 156:	0785                	addi	a5,a5,1
+ 158:	fee79de3          	bne	a5,a4,152 <memset+0x12>
+  }
+  return dst;
+}
+ 15c:	6422                	ld	s0,8(sp)
+ 15e:	0141                	addi	sp,sp,16
+ 160:	8082                	ret
+
+0000000000000162 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 162:	1141                	addi	sp,sp,-16
+ 164:	e422                	sd	s0,8(sp)
+ 166:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 168:	00054783          	lbu	a5,0(a0)
+ 16c:	cb99                	beqz	a5,182 <strchr+0x20>
+    if(*s == c)
+ 16e:	00f58763          	beq	a1,a5,17c <strchr+0x1a>
+  for(; *s; s++)
+ 172:	0505                	addi	a0,a0,1
+ 174:	00054783          	lbu	a5,0(a0)
+ 178:	fbfd                	bnez	a5,16e <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 17a:	4501                	li	a0,0
+}
+ 17c:	6422                	ld	s0,8(sp)
+ 17e:	0141                	addi	sp,sp,16
+ 180:	8082                	ret
+  return 0;
+ 182:	4501                	li	a0,0
+ 184:	bfe5                	j	17c <strchr+0x1a>
+
+0000000000000186 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 186:	711d                	addi	sp,sp,-96
+ 188:	ec86                	sd	ra,88(sp)
+ 18a:	e8a2                	sd	s0,80(sp)
+ 18c:	e4a6                	sd	s1,72(sp)
+ 18e:	e0ca                	sd	s2,64(sp)
+ 190:	fc4e                	sd	s3,56(sp)
+ 192:	f852                	sd	s4,48(sp)
+ 194:	f456                	sd	s5,40(sp)
+ 196:	f05a                	sd	s6,32(sp)
+ 198:	ec5e                	sd	s7,24(sp)
+ 19a:	1080                	addi	s0,sp,96
+ 19c:	8baa                	mv	s7,a0
+ 19e:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 1a0:	892a                	mv	s2,a0
+ 1a2:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 1a4:	4aa9                	li	s5,10
+ 1a6:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 1a8:	89a6                	mv	s3,s1
+ 1aa:	2485                	addiw	s1,s1,1
+ 1ac:	0344d663          	bge	s1,s4,1d8 <gets+0x52>
+    cc = read(0, &c, 1);
+ 1b0:	4605                	li	a2,1
+ 1b2:	faf40593          	addi	a1,s0,-81
+ 1b6:	4501                	li	a0,0
+ 1b8:	186000ef          	jal	33e <read>
+    if(cc < 1)
+ 1bc:	00a05e63          	blez	a0,1d8 <gets+0x52>
+    buf[i++] = c;
+ 1c0:	faf44783          	lbu	a5,-81(s0)
+ 1c4:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 1c8:	01578763          	beq	a5,s5,1d6 <gets+0x50>
+ 1cc:	0905                	addi	s2,s2,1
+ 1ce:	fd679de3          	bne	a5,s6,1a8 <gets+0x22>
+    buf[i++] = c;
+ 1d2:	89a6                	mv	s3,s1
+ 1d4:	a011                	j	1d8 <gets+0x52>
+ 1d6:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 1d8:	99de                	add	s3,s3,s7
+ 1da:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 1de:	855e                	mv	a0,s7
+ 1e0:	60e6                	ld	ra,88(sp)
+ 1e2:	6446                	ld	s0,80(sp)
+ 1e4:	64a6                	ld	s1,72(sp)
+ 1e6:	6906                	ld	s2,64(sp)
+ 1e8:	79e2                	ld	s3,56(sp)
+ 1ea:	7a42                	ld	s4,48(sp)
+ 1ec:	7aa2                	ld	s5,40(sp)
+ 1ee:	7b02                	ld	s6,32(sp)
+ 1f0:	6be2                	ld	s7,24(sp)
+ 1f2:	6125                	addi	sp,sp,96
+ 1f4:	8082                	ret
+
+00000000000001f6 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 1f6:	1101                	addi	sp,sp,-32
+ 1f8:	ec06                	sd	ra,24(sp)
+ 1fa:	e822                	sd	s0,16(sp)
+ 1fc:	e04a                	sd	s2,0(sp)
+ 1fe:	1000                	addi	s0,sp,32
+ 200:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 202:	4581                	li	a1,0
+ 204:	162000ef          	jal	366 <open>
+  if(fd < 0)
+ 208:	02054263          	bltz	a0,22c <stat+0x36>
+ 20c:	e426                	sd	s1,8(sp)
+ 20e:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 210:	85ca                	mv	a1,s2
+ 212:	16c000ef          	jal	37e <fstat>
+ 216:	892a                	mv	s2,a0
+  close(fd);
+ 218:	8526                	mv	a0,s1
+ 21a:	134000ef          	jal	34e <close>
+  return r;
+ 21e:	64a2                	ld	s1,8(sp)
+}
+ 220:	854a                	mv	a0,s2
+ 222:	60e2                	ld	ra,24(sp)
+ 224:	6442                	ld	s0,16(sp)
+ 226:	6902                	ld	s2,0(sp)
+ 228:	6105                	addi	sp,sp,32
+ 22a:	8082                	ret
+    return -1;
+ 22c:	597d                	li	s2,-1
+ 22e:	bfcd                	j	220 <stat+0x2a>
+
+0000000000000230 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 230:	1141                	addi	sp,sp,-16
+ 232:	e422                	sd	s0,8(sp)
+ 234:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 236:	00054683          	lbu	a3,0(a0)
+ 23a:	fd06879b          	addiw	a5,a3,-48
+ 23e:	0ff7f793          	zext.b	a5,a5
+ 242:	4625                	li	a2,9
+ 244:	02f66863          	bltu	a2,a5,274 <atoi+0x44>
+ 248:	872a                	mv	a4,a0
+  n = 0;
+ 24a:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 24c:	0705                	addi	a4,a4,1
+ 24e:	0025179b          	slliw	a5,a0,0x2
+ 252:	9fa9                	addw	a5,a5,a0
+ 254:	0017979b          	slliw	a5,a5,0x1
+ 258:	9fb5                	addw	a5,a5,a3
+ 25a:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 25e:	00074683          	lbu	a3,0(a4)
+ 262:	fd06879b          	addiw	a5,a3,-48
+ 266:	0ff7f793          	zext.b	a5,a5
+ 26a:	fef671e3          	bgeu	a2,a5,24c <atoi+0x1c>
+  return n;
+}
+ 26e:	6422                	ld	s0,8(sp)
+ 270:	0141                	addi	sp,sp,16
+ 272:	8082                	ret
+  n = 0;
+ 274:	4501                	li	a0,0
+ 276:	bfe5                	j	26e <atoi+0x3e>
+
+0000000000000278 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 278:	1141                	addi	sp,sp,-16
+ 27a:	e422                	sd	s0,8(sp)
+ 27c:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 27e:	02b57463          	bgeu	a0,a1,2a6 <memmove+0x2e>
+    while(n-- > 0)
+ 282:	00c05f63          	blez	a2,2a0 <memmove+0x28>
+ 286:	1602                	slli	a2,a2,0x20
+ 288:	9201                	srli	a2,a2,0x20
+ 28a:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 28e:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 290:	0585                	addi	a1,a1,1
+ 292:	0705                	addi	a4,a4,1
+ 294:	fff5c683          	lbu	a3,-1(a1)
+ 298:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 29c:	fef71ae3          	bne	a4,a5,290 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2a0:	6422                	ld	s0,8(sp)
+ 2a2:	0141                	addi	sp,sp,16
+ 2a4:	8082                	ret
+    dst += n;
+ 2a6:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2aa:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2ac:	fec05ae3          	blez	a2,2a0 <memmove+0x28>
+ 2b0:	fff6079b          	addiw	a5,a2,-1
+ 2b4:	1782                	slli	a5,a5,0x20
+ 2b6:	9381                	srli	a5,a5,0x20
+ 2b8:	fff7c793          	not	a5,a5
+ 2bc:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 2be:	15fd                	addi	a1,a1,-1
+ 2c0:	177d                	addi	a4,a4,-1
+ 2c2:	0005c683          	lbu	a3,0(a1)
+ 2c6:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 2ca:	fee79ae3          	bne	a5,a4,2be <memmove+0x46>
+ 2ce:	bfc9                	j	2a0 <memmove+0x28>
+
+00000000000002d0 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 2d0:	1141                	addi	sp,sp,-16
+ 2d2:	e422                	sd	s0,8(sp)
+ 2d4:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 2d6:	ca05                	beqz	a2,306 <memcmp+0x36>
+ 2d8:	fff6069b          	addiw	a3,a2,-1
+ 2dc:	1682                	slli	a3,a3,0x20
+ 2de:	9281                	srli	a3,a3,0x20
+ 2e0:	0685                	addi	a3,a3,1
+ 2e2:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 2e4:	00054783          	lbu	a5,0(a0)
+ 2e8:	0005c703          	lbu	a4,0(a1)
+ 2ec:	00e79863          	bne	a5,a4,2fc <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 2f0:	0505                	addi	a0,a0,1
+    p2++;
+ 2f2:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 2f4:	fed518e3          	bne	a0,a3,2e4 <memcmp+0x14>
+  }
+  return 0;
+ 2f8:	4501                	li	a0,0
+ 2fa:	a019                	j	300 <memcmp+0x30>
+      return *p1 - *p2;
+ 2fc:	40e7853b          	subw	a0,a5,a4
+}
+ 300:	6422                	ld	s0,8(sp)
+ 302:	0141                	addi	sp,sp,16
+ 304:	8082                	ret
+  return 0;
+ 306:	4501                	li	a0,0
+ 308:	bfe5                	j	300 <memcmp+0x30>
+
+000000000000030a <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 30a:	1141                	addi	sp,sp,-16
+ 30c:	e406                	sd	ra,8(sp)
+ 30e:	e022                	sd	s0,0(sp)
+ 310:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 312:	f67ff0ef          	jal	278 <memmove>
+}
+ 316:	60a2                	ld	ra,8(sp)
+ 318:	6402                	ld	s0,0(sp)
+ 31a:	0141                	addi	sp,sp,16
+ 31c:	8082                	ret
+
+000000000000031e <fork>:
+ 31e:	4885                	li	a7,1
+ 320:	00000073          	ecall
+ 324:	8082                	ret
+
+0000000000000326 <exit>:
+ 326:	4889                	li	a7,2
+ 328:	00000073          	ecall
+ 32c:	8082                	ret
+
+000000000000032e <wait>:
+ 32e:	488d                	li	a7,3
+ 330:	00000073          	ecall
+ 334:	8082                	ret
+
+0000000000000336 <pipe>:
+ 336:	4891                	li	a7,4
+ 338:	00000073          	ecall
+ 33c:	8082                	ret
+
+000000000000033e <read>:
+ 33e:	4895                	li	a7,5
+ 340:	00000073          	ecall
+ 344:	8082                	ret
+
+0000000000000346 <write>:
+ 346:	48c1                	li	a7,16
+ 348:	00000073          	ecall
+ 34c:	8082                	ret
+
+000000000000034e <close>:
+ 34e:	48d5                	li	a7,21
+ 350:	00000073          	ecall
+ 354:	8082                	ret
+
+0000000000000356 <kill>:
+ 356:	4899                	li	a7,6
+ 358:	00000073          	ecall
+ 35c:	8082                	ret
+
+000000000000035e <exec>:
+ 35e:	489d                	li	a7,7
+ 360:	00000073          	ecall
+ 364:	8082                	ret
+
+0000000000000366 <open>:
+ 366:	48bd                	li	a7,15
+ 368:	00000073          	ecall
+ 36c:	8082                	ret
+
+000000000000036e <mknod>:
+ 36e:	48c5                	li	a7,17
+ 370:	00000073          	ecall
+ 374:	8082                	ret
+
+0000000000000376 <unlink>:
+ 376:	48c9                	li	a7,18
+ 378:	00000073          	ecall
+ 37c:	8082                	ret
+
+000000000000037e <fstat>:
+ 37e:	48a1                	li	a7,8
+ 380:	00000073          	ecall
+ 384:	8082                	ret
+
+0000000000000386 <link>:
+ 386:	48cd                	li	a7,19
+ 388:	00000073          	ecall
+ 38c:	8082                	ret
+
+000000000000038e <mkdir>:
+ 38e:	48d1                	li	a7,20
+ 390:	00000073          	ecall
+ 394:	8082                	ret
+
+0000000000000396 <chdir>:
+ 396:	48a5                	li	a7,9
+ 398:	00000073          	ecall
+ 39c:	8082                	ret
+
+000000000000039e <dup>:
+ 39e:	48a9                	li	a7,10
+ 3a0:	00000073          	ecall
+ 3a4:	8082                	ret
+
+00000000000003a6 <getpid>:
+ 3a6:	48ad                	li	a7,11
+ 3a8:	00000073          	ecall
+ 3ac:	8082                	ret
+
+00000000000003ae <sbrk>:
+ 3ae:	48b1                	li	a7,12
+ 3b0:	00000073          	ecall
+ 3b4:	8082                	ret
+
+00000000000003b6 <sleep>:
+ 3b6:	48b5                	li	a7,13
+ 3b8:	00000073          	ecall
+ 3bc:	8082                	ret
+
+00000000000003be <uptime>:
+ 3be:	48b9                	li	a7,14
+ 3c0:	00000073          	ecall
+ 3c4:	8082                	ret
+
+00000000000003c6 <putc>:
+ 3c6:	1101                	addi	sp,sp,-32
+ 3c8:	ec06                	sd	ra,24(sp)
+ 3ca:	e822                	sd	s0,16(sp)
+ 3cc:	1000                	addi	s0,sp,32
+ 3ce:	feb407a3          	sb	a1,-17(s0)
+ 3d2:	4605                	li	a2,1
+ 3d4:	fef40593          	addi	a1,s0,-17
+ 3d8:	f6fff0ef          	jal	346 <write>
+ 3dc:	60e2                	ld	ra,24(sp)
+ 3de:	6442                	ld	s0,16(sp)
+ 3e0:	6105                	addi	sp,sp,32
+ 3e2:	8082                	ret
+
+00000000000003e4 <printint>:
+ 3e4:	7139                	addi	sp,sp,-64
+ 3e6:	fc06                	sd	ra,56(sp)
+ 3e8:	f822                	sd	s0,48(sp)
+ 3ea:	f426                	sd	s1,40(sp)
+ 3ec:	0080                	addi	s0,sp,64
+ 3ee:	84aa                	mv	s1,a0
+ 3f0:	c299                	beqz	a3,3f6 <printint+0x12>
+ 3f2:	0805c963          	bltz	a1,484 <printint+0xa0>
+ 3f6:	2581                	sext.w	a1,a1
+ 3f8:	4881                	li	a7,0
+ 3fa:	fc040693          	addi	a3,s0,-64
+ 3fe:	4701                	li	a4,0
+ 400:	2601                	sext.w	a2,a2
+ 402:	00000517          	auipc	a0,0x0
+ 406:	56e50513          	addi	a0,a0,1390 # 970 <digits>
+ 40a:	883a                	mv	a6,a4
+ 40c:	2705                	addiw	a4,a4,1
+ 40e:	02c5f7bb          	remuw	a5,a1,a2
+ 412:	1782                	slli	a5,a5,0x20
+ 414:	9381                	srli	a5,a5,0x20
+ 416:	97aa                	add	a5,a5,a0
+ 418:	0007c783          	lbu	a5,0(a5)
+ 41c:	00f68023          	sb	a5,0(a3)
+ 420:	0005879b          	sext.w	a5,a1
+ 424:	02c5d5bb          	divuw	a1,a1,a2
+ 428:	0685                	addi	a3,a3,1
+ 42a:	fec7f0e3          	bgeu	a5,a2,40a <printint+0x26>
+ 42e:	00088c63          	beqz	a7,446 <printint+0x62>
+ 432:	fd070793          	addi	a5,a4,-48
+ 436:	00878733          	add	a4,a5,s0
+ 43a:	02d00793          	li	a5,45
+ 43e:	fef70823          	sb	a5,-16(a4)
+ 442:	0028071b          	addiw	a4,a6,2
+ 446:	02e05a63          	blez	a4,47a <printint+0x96>
+ 44a:	f04a                	sd	s2,32(sp)
+ 44c:	ec4e                	sd	s3,24(sp)
+ 44e:	fc040793          	addi	a5,s0,-64
+ 452:	00e78933          	add	s2,a5,a4
+ 456:	fff78993          	addi	s3,a5,-1
+ 45a:	99ba                	add	s3,s3,a4
+ 45c:	377d                	addiw	a4,a4,-1
+ 45e:	1702                	slli	a4,a4,0x20
+ 460:	9301                	srli	a4,a4,0x20
+ 462:	40e989b3          	sub	s3,s3,a4
+ 466:	fff94583          	lbu	a1,-1(s2)
+ 46a:	8526                	mv	a0,s1
+ 46c:	f5bff0ef          	jal	3c6 <putc>
+ 470:	197d                	addi	s2,s2,-1
+ 472:	ff391ae3          	bne	s2,s3,466 <printint+0x82>
+ 476:	7902                	ld	s2,32(sp)
+ 478:	69e2                	ld	s3,24(sp)
+ 47a:	70e2                	ld	ra,56(sp)
+ 47c:	7442                	ld	s0,48(sp)
+ 47e:	74a2                	ld	s1,40(sp)
+ 480:	6121                	addi	sp,sp,64
+ 482:	8082                	ret
+ 484:	40b005bb          	negw	a1,a1
+ 488:	4885                	li	a7,1
+ 48a:	bf85                	j	3fa <printint+0x16>
+
+000000000000048c <vprintf>:
+ 48c:	711d                	addi	sp,sp,-96
+ 48e:	ec86                	sd	ra,88(sp)
+ 490:	e8a2                	sd	s0,80(sp)
+ 492:	e0ca                	sd	s2,64(sp)
+ 494:	1080                	addi	s0,sp,96
+ 496:	0005c903          	lbu	s2,0(a1)
+ 49a:	26090863          	beqz	s2,70a <vprintf+0x27e>
+ 49e:	e4a6                	sd	s1,72(sp)
+ 4a0:	fc4e                	sd	s3,56(sp)
+ 4a2:	f852                	sd	s4,48(sp)
+ 4a4:	f456                	sd	s5,40(sp)
+ 4a6:	f05a                	sd	s6,32(sp)
+ 4a8:	ec5e                	sd	s7,24(sp)
+ 4aa:	e862                	sd	s8,16(sp)
+ 4ac:	e466                	sd	s9,8(sp)
+ 4ae:	8b2a                	mv	s6,a0
+ 4b0:	8a2e                	mv	s4,a1
+ 4b2:	8bb2                	mv	s7,a2
+ 4b4:	4981                	li	s3,0
+ 4b6:	4481                	li	s1,0
+ 4b8:	4701                	li	a4,0
+ 4ba:	02500a93          	li	s5,37
+ 4be:	06400c13          	li	s8,100
+ 4c2:	06c00c93          	li	s9,108
+ 4c6:	a005                	j	4e6 <vprintf+0x5a>
+ 4c8:	85ca                	mv	a1,s2
+ 4ca:	855a                	mv	a0,s6
+ 4cc:	efbff0ef          	jal	3c6 <putc>
+ 4d0:	a019                	j	4d6 <vprintf+0x4a>
+ 4d2:	03598263          	beq	s3,s5,4f6 <vprintf+0x6a>
+ 4d6:	2485                	addiw	s1,s1,1
+ 4d8:	8726                	mv	a4,s1
+ 4da:	009a07b3          	add	a5,s4,s1
+ 4de:	0007c903          	lbu	s2,0(a5)
+ 4e2:	20090c63          	beqz	s2,6fa <vprintf+0x26e>
+ 4e6:	0009079b          	sext.w	a5,s2
+ 4ea:	fe0994e3          	bnez	s3,4d2 <vprintf+0x46>
+ 4ee:	fd579de3          	bne	a5,s5,4c8 <vprintf+0x3c>
+ 4f2:	89be                	mv	s3,a5
+ 4f4:	b7cd                	j	4d6 <vprintf+0x4a>
+ 4f6:	00ea06b3          	add	a3,s4,a4
+ 4fa:	0016c683          	lbu	a3,1(a3)
+ 4fe:	8636                	mv	a2,a3
+ 500:	c681                	beqz	a3,508 <vprintf+0x7c>
+ 502:	9752                	add	a4,a4,s4
+ 504:	00274603          	lbu	a2,2(a4)
+ 508:	03878f63          	beq	a5,s8,546 <vprintf+0xba>
+ 50c:	05978963          	beq	a5,s9,55e <vprintf+0xd2>
+ 510:	07500713          	li	a4,117
+ 514:	0ee78363          	beq	a5,a4,5fa <vprintf+0x16e>
+ 518:	07800713          	li	a4,120
+ 51c:	12e78563          	beq	a5,a4,646 <vprintf+0x1ba>
+ 520:	07000713          	li	a4,112
+ 524:	14e78a63          	beq	a5,a4,678 <vprintf+0x1ec>
+ 528:	07300713          	li	a4,115
+ 52c:	18e78a63          	beq	a5,a4,6c0 <vprintf+0x234>
+ 530:	02500713          	li	a4,37
+ 534:	04e79563          	bne	a5,a4,57e <vprintf+0xf2>
+ 538:	02500593          	li	a1,37
+ 53c:	855a                	mv	a0,s6
+ 53e:	e89ff0ef          	jal	3c6 <putc>
+ 542:	4981                	li	s3,0
+ 544:	bf49                	j	4d6 <vprintf+0x4a>
+ 546:	008b8913          	addi	s2,s7,8
+ 54a:	4685                	li	a3,1
+ 54c:	4629                	li	a2,10
+ 54e:	000ba583          	lw	a1,0(s7)
+ 552:	855a                	mv	a0,s6
+ 554:	e91ff0ef          	jal	3e4 <printint>
+ 558:	8bca                	mv	s7,s2
+ 55a:	4981                	li	s3,0
+ 55c:	bfad                	j	4d6 <vprintf+0x4a>
+ 55e:	06400793          	li	a5,100
+ 562:	02f68963          	beq	a3,a5,594 <vprintf+0x108>
+ 566:	06c00793          	li	a5,108
+ 56a:	04f68263          	beq	a3,a5,5ae <vprintf+0x122>
+ 56e:	07500793          	li	a5,117
+ 572:	0af68063          	beq	a3,a5,612 <vprintf+0x186>
+ 576:	07800793          	li	a5,120
+ 57a:	0ef68263          	beq	a3,a5,65e <vprintf+0x1d2>
+ 57e:	02500593          	li	a1,37
+ 582:	855a                	mv	a0,s6
+ 584:	e43ff0ef          	jal	3c6 <putc>
+ 588:	85ca                	mv	a1,s2
+ 58a:	855a                	mv	a0,s6
+ 58c:	e3bff0ef          	jal	3c6 <putc>
+ 590:	4981                	li	s3,0
+ 592:	b791                	j	4d6 <vprintf+0x4a>
+ 594:	008b8913          	addi	s2,s7,8
+ 598:	4685                	li	a3,1
+ 59a:	4629                	li	a2,10
+ 59c:	000ba583          	lw	a1,0(s7)
+ 5a0:	855a                	mv	a0,s6
+ 5a2:	e43ff0ef          	jal	3e4 <printint>
+ 5a6:	2485                	addiw	s1,s1,1
+ 5a8:	8bca                	mv	s7,s2
+ 5aa:	4981                	li	s3,0
+ 5ac:	b72d                	j	4d6 <vprintf+0x4a>
+ 5ae:	06400793          	li	a5,100
+ 5b2:	02f60763          	beq	a2,a5,5e0 <vprintf+0x154>
+ 5b6:	07500793          	li	a5,117
+ 5ba:	06f60963          	beq	a2,a5,62c <vprintf+0x1a0>
+ 5be:	07800793          	li	a5,120
+ 5c2:	faf61ee3          	bne	a2,a5,57e <vprintf+0xf2>
+ 5c6:	008b8913          	addi	s2,s7,8
+ 5ca:	4681                	li	a3,0
+ 5cc:	4641                	li	a2,16
+ 5ce:	000ba583          	lw	a1,0(s7)
+ 5d2:	855a                	mv	a0,s6
+ 5d4:	e11ff0ef          	jal	3e4 <printint>
+ 5d8:	2489                	addiw	s1,s1,2
+ 5da:	8bca                	mv	s7,s2
+ 5dc:	4981                	li	s3,0
+ 5de:	bde5                	j	4d6 <vprintf+0x4a>
+ 5e0:	008b8913          	addi	s2,s7,8
+ 5e4:	4685                	li	a3,1
+ 5e6:	4629                	li	a2,10
+ 5e8:	000ba583          	lw	a1,0(s7)
+ 5ec:	855a                	mv	a0,s6
+ 5ee:	df7ff0ef          	jal	3e4 <printint>
+ 5f2:	2489                	addiw	s1,s1,2
+ 5f4:	8bca                	mv	s7,s2
+ 5f6:	4981                	li	s3,0
+ 5f8:	bdf9                	j	4d6 <vprintf+0x4a>
+ 5fa:	008b8913          	addi	s2,s7,8
+ 5fe:	4681                	li	a3,0
+ 600:	4629                	li	a2,10
+ 602:	000ba583          	lw	a1,0(s7)
+ 606:	855a                	mv	a0,s6
+ 608:	dddff0ef          	jal	3e4 <printint>
+ 60c:	8bca                	mv	s7,s2
+ 60e:	4981                	li	s3,0
+ 610:	b5d9                	j	4d6 <vprintf+0x4a>
+ 612:	008b8913          	addi	s2,s7,8
+ 616:	4681                	li	a3,0
+ 618:	4629                	li	a2,10
+ 61a:	000ba583          	lw	a1,0(s7)
+ 61e:	855a                	mv	a0,s6
+ 620:	dc5ff0ef          	jal	3e4 <printint>
+ 624:	2485                	addiw	s1,s1,1
+ 626:	8bca                	mv	s7,s2
+ 628:	4981                	li	s3,0
+ 62a:	b575                	j	4d6 <vprintf+0x4a>
+ 62c:	008b8913          	addi	s2,s7,8
+ 630:	4681                	li	a3,0
+ 632:	4629                	li	a2,10
+ 634:	000ba583          	lw	a1,0(s7)
+ 638:	855a                	mv	a0,s6
+ 63a:	dabff0ef          	jal	3e4 <printint>
+ 63e:	2489                	addiw	s1,s1,2
+ 640:	8bca                	mv	s7,s2
+ 642:	4981                	li	s3,0
+ 644:	bd49                	j	4d6 <vprintf+0x4a>
+ 646:	008b8913          	addi	s2,s7,8
+ 64a:	4681                	li	a3,0
+ 64c:	4641                	li	a2,16
+ 64e:	000ba583          	lw	a1,0(s7)
+ 652:	855a                	mv	a0,s6
+ 654:	d91ff0ef          	jal	3e4 <printint>
+ 658:	8bca                	mv	s7,s2
+ 65a:	4981                	li	s3,0
+ 65c:	bdad                	j	4d6 <vprintf+0x4a>
+ 65e:	008b8913          	addi	s2,s7,8
+ 662:	4681                	li	a3,0
+ 664:	4641                	li	a2,16
+ 666:	000ba583          	lw	a1,0(s7)
+ 66a:	855a                	mv	a0,s6
+ 66c:	d79ff0ef          	jal	3e4 <printint>
+ 670:	2485                	addiw	s1,s1,1
+ 672:	8bca                	mv	s7,s2
+ 674:	4981                	li	s3,0
+ 676:	b585                	j	4d6 <vprintf+0x4a>
+ 678:	e06a                	sd	s10,0(sp)
+ 67a:	008b8d13          	addi	s10,s7,8
+ 67e:	000bb983          	ld	s3,0(s7)
+ 682:	03000593          	li	a1,48
+ 686:	855a                	mv	a0,s6
+ 688:	d3fff0ef          	jal	3c6 <putc>
+ 68c:	07800593          	li	a1,120
+ 690:	855a                	mv	a0,s6
+ 692:	d35ff0ef          	jal	3c6 <putc>
+ 696:	4941                	li	s2,16
+ 698:	00000b97          	auipc	s7,0x0
+ 69c:	2d8b8b93          	addi	s7,s7,728 # 970 <digits>
+ 6a0:	03c9d793          	srli	a5,s3,0x3c
+ 6a4:	97de                	add	a5,a5,s7
+ 6a6:	0007c583          	lbu	a1,0(a5)
+ 6aa:	855a                	mv	a0,s6
+ 6ac:	d1bff0ef          	jal	3c6 <putc>
+ 6b0:	0992                	slli	s3,s3,0x4
+ 6b2:	397d                	addiw	s2,s2,-1
+ 6b4:	fe0916e3          	bnez	s2,6a0 <vprintf+0x214>
+ 6b8:	8bea                	mv	s7,s10
+ 6ba:	4981                	li	s3,0
+ 6bc:	6d02                	ld	s10,0(sp)
+ 6be:	bd21                	j	4d6 <vprintf+0x4a>
+ 6c0:	008b8993          	addi	s3,s7,8
+ 6c4:	000bb903          	ld	s2,0(s7)
+ 6c8:	00090f63          	beqz	s2,6e6 <vprintf+0x25a>
+ 6cc:	00094583          	lbu	a1,0(s2)
+ 6d0:	c195                	beqz	a1,6f4 <vprintf+0x268>
+ 6d2:	855a                	mv	a0,s6
+ 6d4:	cf3ff0ef          	jal	3c6 <putc>
+ 6d8:	0905                	addi	s2,s2,1
+ 6da:	00094583          	lbu	a1,0(s2)
+ 6de:	f9f5                	bnez	a1,6d2 <vprintf+0x246>
+ 6e0:	8bce                	mv	s7,s3
+ 6e2:	4981                	li	s3,0
+ 6e4:	bbcd                	j	4d6 <vprintf+0x4a>
+ 6e6:	00000917          	auipc	s2,0x0
+ 6ea:	28290913          	addi	s2,s2,642 # 968 <malloc+0x176>
+ 6ee:	02800593          	li	a1,40
+ 6f2:	b7c5                	j	6d2 <vprintf+0x246>
+ 6f4:	8bce                	mv	s7,s3
+ 6f6:	4981                	li	s3,0
+ 6f8:	bbf9                	j	4d6 <vprintf+0x4a>
+ 6fa:	64a6                	ld	s1,72(sp)
+ 6fc:	79e2                	ld	s3,56(sp)
+ 6fe:	7a42                	ld	s4,48(sp)
+ 700:	7aa2                	ld	s5,40(sp)
+ 702:	7b02                	ld	s6,32(sp)
+ 704:	6be2                	ld	s7,24(sp)
+ 706:	6c42                	ld	s8,16(sp)
+ 708:	6ca2                	ld	s9,8(sp)
+ 70a:	60e6                	ld	ra,88(sp)
+ 70c:	6446                	ld	s0,80(sp)
+ 70e:	6906                	ld	s2,64(sp)
+ 710:	6125                	addi	sp,sp,96
+ 712:	8082                	ret
+
+0000000000000714 <fprintf>:
+ 714:	715d                	addi	sp,sp,-80
+ 716:	ec06                	sd	ra,24(sp)
+ 718:	e822                	sd	s0,16(sp)
+ 71a:	1000                	addi	s0,sp,32
+ 71c:	e010                	sd	a2,0(s0)
+ 71e:	e414                	sd	a3,8(s0)
+ 720:	e818                	sd	a4,16(s0)
+ 722:	ec1c                	sd	a5,24(s0)
+ 724:	03043023          	sd	a6,32(s0)
+ 728:	03143423          	sd	a7,40(s0)
+ 72c:	fe843423          	sd	s0,-24(s0)
+ 730:	8622                	mv	a2,s0
+ 732:	d5bff0ef          	jal	48c <vprintf>
+ 736:	60e2                	ld	ra,24(sp)
+ 738:	6442                	ld	s0,16(sp)
+ 73a:	6161                	addi	sp,sp,80
+ 73c:	8082                	ret
+
+000000000000073e <printf>:
+ 73e:	711d                	addi	sp,sp,-96
+ 740:	ec06                	sd	ra,24(sp)
+ 742:	e822                	sd	s0,16(sp)
+ 744:	1000                	addi	s0,sp,32
+ 746:	e40c                	sd	a1,8(s0)
+ 748:	e810                	sd	a2,16(s0)
+ 74a:	ec14                	sd	a3,24(s0)
+ 74c:	f018                	sd	a4,32(s0)
+ 74e:	f41c                	sd	a5,40(s0)
+ 750:	03043823          	sd	a6,48(s0)
+ 754:	03143c23          	sd	a7,56(s0)
+ 758:	00840613          	addi	a2,s0,8
+ 75c:	fec43423          	sd	a2,-24(s0)
+ 760:	85aa                	mv	a1,a0
+ 762:	4505                	li	a0,1
+ 764:	d29ff0ef          	jal	48c <vprintf>
+ 768:	60e2                	ld	ra,24(sp)
+ 76a:	6442                	ld	s0,16(sp)
+ 76c:	6125                	addi	sp,sp,96
+ 76e:	8082                	ret
+
+0000000000000770 <free>:
+ 770:	1141                	addi	sp,sp,-16
+ 772:	e422                	sd	s0,8(sp)
+ 774:	0800                	addi	s0,sp,16
+ 776:	ff050693          	addi	a3,a0,-16
+ 77a:	00001797          	auipc	a5,0x1
+ 77e:	8967b783          	ld	a5,-1898(a5) # 1010 <freep>
+ 782:	a02d                	j	7ac <free+0x3c>
+ 784:	4618                	lw	a4,8(a2)
+ 786:	9f2d                	addw	a4,a4,a1
+ 788:	fee52c23          	sw	a4,-8(a0)
+ 78c:	6398                	ld	a4,0(a5)
+ 78e:	6310                	ld	a2,0(a4)
+ 790:	a83d                	j	7ce <free+0x5e>
+ 792:	ff852703          	lw	a4,-8(a0)
+ 796:	9f31                	addw	a4,a4,a2
+ 798:	c798                	sw	a4,8(a5)
+ 79a:	ff053683          	ld	a3,-16(a0)
+ 79e:	a091                	j	7e2 <free+0x72>
+ 7a0:	6398                	ld	a4,0(a5)
+ 7a2:	00e7e463          	bltu	a5,a4,7aa <free+0x3a>
+ 7a6:	00e6ea63          	bltu	a3,a4,7ba <free+0x4a>
+ 7aa:	87ba                	mv	a5,a4
+ 7ac:	fed7fae3          	bgeu	a5,a3,7a0 <free+0x30>
+ 7b0:	6398                	ld	a4,0(a5)
+ 7b2:	00e6e463          	bltu	a3,a4,7ba <free+0x4a>
+ 7b6:	fee7eae3          	bltu	a5,a4,7aa <free+0x3a>
+ 7ba:	ff852583          	lw	a1,-8(a0)
+ 7be:	6390                	ld	a2,0(a5)
+ 7c0:	02059813          	slli	a6,a1,0x20
+ 7c4:	01c85713          	srli	a4,a6,0x1c
+ 7c8:	9736                	add	a4,a4,a3
+ 7ca:	fae60de3          	beq	a2,a4,784 <free+0x14>
+ 7ce:	fec53823          	sd	a2,-16(a0)
+ 7d2:	4790                	lw	a2,8(a5)
+ 7d4:	02061593          	slli	a1,a2,0x20
+ 7d8:	01c5d713          	srli	a4,a1,0x1c
+ 7dc:	973e                	add	a4,a4,a5
+ 7de:	fae68ae3          	beq	a3,a4,792 <free+0x22>
+ 7e2:	e394                	sd	a3,0(a5)
+ 7e4:	00001717          	auipc	a4,0x1
+ 7e8:	82f73623          	sd	a5,-2004(a4) # 1010 <freep>
+ 7ec:	6422                	ld	s0,8(sp)
+ 7ee:	0141                	addi	sp,sp,16
+ 7f0:	8082                	ret
+
+00000000000007f2 <malloc>:
+ 7f2:	7139                	addi	sp,sp,-64
+ 7f4:	fc06                	sd	ra,56(sp)
+ 7f6:	f822                	sd	s0,48(sp)
+ 7f8:	f426                	sd	s1,40(sp)
+ 7fa:	ec4e                	sd	s3,24(sp)
+ 7fc:	0080                	addi	s0,sp,64
+ 7fe:	02051493          	slli	s1,a0,0x20
+ 802:	9081                	srli	s1,s1,0x20
+ 804:	04bd                	addi	s1,s1,15
+ 806:	8091                	srli	s1,s1,0x4
+ 808:	0014899b          	addiw	s3,s1,1
+ 80c:	0485                	addi	s1,s1,1
+ 80e:	00001517          	auipc	a0,0x1
+ 812:	80253503          	ld	a0,-2046(a0) # 1010 <freep>
+ 816:	c915                	beqz	a0,84a <malloc+0x58>
+ 818:	611c                	ld	a5,0(a0)
+ 81a:	4798                	lw	a4,8(a5)
+ 81c:	08977a63          	bgeu	a4,s1,8b0 <malloc+0xbe>
+ 820:	f04a                	sd	s2,32(sp)
+ 822:	e852                	sd	s4,16(sp)
+ 824:	e456                	sd	s5,8(sp)
+ 826:	e05a                	sd	s6,0(sp)
+ 828:	8a4e                	mv	s4,s3
+ 82a:	0009871b          	sext.w	a4,s3
+ 82e:	6685                	lui	a3,0x1
+ 830:	00d77363          	bgeu	a4,a3,836 <malloc+0x44>
+ 834:	6a05                	lui	s4,0x1
+ 836:	000a0b1b          	sext.w	s6,s4
+ 83a:	004a1a1b          	slliw	s4,s4,0x4
+ 83e:	00000917          	auipc	s2,0x0
+ 842:	7d290913          	addi	s2,s2,2002 # 1010 <freep>
+ 846:	5afd                	li	s5,-1
+ 848:	a081                	j	888 <malloc+0x96>
+ 84a:	f04a                	sd	s2,32(sp)
+ 84c:	e852                	sd	s4,16(sp)
+ 84e:	e456                	sd	s5,8(sp)
+ 850:	e05a                	sd	s6,0(sp)
+ 852:	00000797          	auipc	a5,0x0
+ 856:	7ce78793          	addi	a5,a5,1998 # 1020 <base>
+ 85a:	00000717          	auipc	a4,0x0
+ 85e:	7af73b23          	sd	a5,1974(a4) # 1010 <freep>
+ 862:	e39c                	sd	a5,0(a5)
+ 864:	0007a423          	sw	zero,8(a5)
+ 868:	b7c1                	j	828 <malloc+0x36>
+ 86a:	6398                	ld	a4,0(a5)
+ 86c:	e118                	sd	a4,0(a0)
+ 86e:	a8a9                	j	8c8 <malloc+0xd6>
+ 870:	01652423          	sw	s6,8(a0)
+ 874:	0541                	addi	a0,a0,16
+ 876:	efbff0ef          	jal	770 <free>
+ 87a:	00093503          	ld	a0,0(s2)
+ 87e:	c12d                	beqz	a0,8e0 <malloc+0xee>
+ 880:	611c                	ld	a5,0(a0)
+ 882:	4798                	lw	a4,8(a5)
+ 884:	02977263          	bgeu	a4,s1,8a8 <malloc+0xb6>
+ 888:	00093703          	ld	a4,0(s2)
+ 88c:	853e                	mv	a0,a5
+ 88e:	fef719e3          	bne	a4,a5,880 <malloc+0x8e>
+ 892:	8552                	mv	a0,s4
+ 894:	b1bff0ef          	jal	3ae <sbrk>
+ 898:	fd551ce3          	bne	a0,s5,870 <malloc+0x7e>
+ 89c:	4501                	li	a0,0
+ 89e:	7902                	ld	s2,32(sp)
+ 8a0:	6a42                	ld	s4,16(sp)
+ 8a2:	6aa2                	ld	s5,8(sp)
+ 8a4:	6b02                	ld	s6,0(sp)
+ 8a6:	a03d                	j	8d4 <malloc+0xe2>
+ 8a8:	7902                	ld	s2,32(sp)
+ 8aa:	6a42                	ld	s4,16(sp)
+ 8ac:	6aa2                	ld	s5,8(sp)
+ 8ae:	6b02                	ld	s6,0(sp)
+ 8b0:	fae48de3          	beq	s1,a4,86a <malloc+0x78>
+ 8b4:	4137073b          	subw	a4,a4,s3
+ 8b8:	c798                	sw	a4,8(a5)
+ 8ba:	02071693          	slli	a3,a4,0x20
+ 8be:	01c6d713          	srli	a4,a3,0x1c
+ 8c2:	97ba                	add	a5,a5,a4
+ 8c4:	0137a423          	sw	s3,8(a5)
+ 8c8:	00000717          	auipc	a4,0x0
+ 8cc:	74a73423          	sd	a0,1864(a4) # 1010 <freep>
+ 8d0:	01078513          	addi	a0,a5,16
+ 8d4:	70e2                	ld	ra,56(sp)
+ 8d6:	7442                	ld	s0,48(sp)
+ 8d8:	74a2                	ld	s1,40(sp)
+ 8da:	69e2                	ld	s3,24(sp)
+ 8dc:	6121                	addi	sp,sp,64
+ 8de:	8082                	ret
+ 8e0:	7902                	ld	s2,32(sp)
+ 8e2:	6a42                	ld	s4,16(sp)
+ 8e4:	6aa2                	ld	s5,8(sp)
+ 8e6:	6b02                	ld	s6,0(sp)
+ 8e8:	b7f5                	j	8d4 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/init.c b/xv6-labs-2024/user/init.c
new file mode 100644
index 0000000..e0a5689
--- /dev/null
+++ b/xv6-labs-2024/user/init.c
@@ -0,0 +1,54 @@
+// init: The initial user-level program
+
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "kernel/spinlock.h"
+#include "kernel/sleeplock.h"
+#include "kernel/fs.h"
+#include "kernel/file.h"
+#include "user/user.h"
+#include "kernel/fcntl.h"
+
+char *argv[] = { "sh", 0 };
+
+int
+main(void)
+{
+  int pid, wpid;
+
+  if(open("console", O_RDWR) < 0){
+    mknod("console", CONSOLE, 0);
+    open("console", O_RDWR);
+  }
+  dup(0);  // stdout
+  dup(0);  // stderr
+
+  for(;;){
+    printf("init: starting sh\n");
+    pid = fork();
+    if(pid < 0){
+      printf("init: fork failed\n");
+      exit(1);
+    }
+    if(pid == 0){
+      exec("sh", argv);
+      printf("init: exec sh failed\n");
+      exit(1);
+    }
+
+    for(;;){
+      // this call to wait() returns if the shell exits,
+      // or if a parentless process exits.
+      wpid = wait((int *) 0);
+      if(wpid == pid){
+        // the shell exited; restart it.
+        break;
+      } else if(wpid < 0){
+        printf("init: wait returned an error\n");
+        exit(1);
+      } else {
+        // it was a parentless process; do nothing.
+      }
+    }
+  }
+}
diff --git a/xv6-labs-2024/user/init.d b/xv6-labs-2024/user/init.d
new file mode 100644
index 0000000..731e484
--- /dev/null
+++ b/xv6-labs-2024/user/init.d
@@ -0,0 +1,3 @@
+user/init.o: user/init.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h kernel/spinlock.h kernel/sleeplock.h \
+ kernel/fs.h kernel/file.h user/user.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/init.o b/xv6-labs-2024/user/init.o
new file mode 100644
index 0000000..8db48ce
Binary files /dev/null and b/xv6-labs-2024/user/init.o differ
diff --git a/xv6-labs-2024/user/init.sym b/xv6-labs-2024/user/init.sym
new file mode 100644
index 0000000..a6c150c
--- /dev/null
+++ b/xv6-labs-2024/user/init.sym
@@ -0,0 +1,64 @@
+0000000000000000 .text
+00000000000008f0 .rodata
+0000000000000988 .eh_frame
+0000000000001000 .data
+0000000000001010 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 init.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+00000000000003c6 putc
+00000000000003e4 printint
+0000000000000970 digits
+0000000000000000 umalloc.c
+0000000000001010 freep
+0000000000001020 base
+00000000000000ce strcpy
+000000000000073e printf
+0000000000001000 argv
+0000000000000278 memmove
+000000000000036e mknod
+0000000000000186 gets
+00000000000003a6 getpid
+000000000000030a memcpy
+00000000000007f2 malloc
+00000000000003b6 sleep
+0000000000000336 pipe
+0000000000000346 write
+000000000000037e fstat
+0000000000000714 fprintf
+0000000000000356 kill
+000000000000048c vprintf
+0000000000000396 chdir
+000000000000035e exec
+000000000000032e wait
+000000000000033e read
+0000000000000376 unlink
+00000000000002d0 memcmp
+000000000000031e fork
+00000000000003ae sbrk
+00000000000003be uptime
+0000000000000140 memset
+0000000000000000 main
+00000000000000ea strcmp
+000000000000039e dup
+00000000000001f6 stat
+0000000000000386 link
+0000000000000326 exit
+00000000000000bc start
+0000000000000230 atoi
+0000000000000116 strlen
+0000000000000366 open
+0000000000000162 strchr
+000000000000038e mkdir
+000000000000034e close
+0000000000000770 free
diff --git a/xv6-labs-2024/user/initcode b/xv6-labs-2024/user/initcode
new file mode 100755
index 0000000..ce82e86
Binary files /dev/null and b/xv6-labs-2024/user/initcode differ
diff --git a/xv6-labs-2024/user/initcode.S b/xv6-labs-2024/user/initcode.S
new file mode 100644
index 0000000..ba44ff5
--- /dev/null
+++ b/xv6-labs-2024/user/initcode.S
@@ -0,0 +1,28 @@
+# Initial process that execs /init.
+# This code runs in user space.
+
+#include "syscall.h"
+
+# exec(init, argv)
+.globl start
+start:
+        la a0, init
+        la a1, argv
+        li a7, SYS_exec
+        ecall
+
+# for(;;) exit();
+exit:
+        li a7, SYS_exit
+        ecall
+        jal exit
+
+# char init[] = "/init\0";
+init:
+  .string "/init\0"
+
+# char *argv[] = { init, 0 };
+.p2align 2
+argv:
+  .quad init
+  .quad 0
diff --git a/xv6-labs-2024/user/initcode.asm b/xv6-labs-2024/user/initcode.asm
new file mode 100644
index 0000000..00b7104
--- /dev/null
+++ b/xv6-labs-2024/user/initcode.asm
@@ -0,0 +1,41 @@
+
+user/initcode.o:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <start>:
+#include "syscall.h"
+
+# exec(init, argv)
+.globl start
+start:
+        la a0, init
+   0:	00000517          	auipc	a0,0x0
+   4:	00050513          	mv	a0,a0
+        la a1, argv
+   8:	00000597          	auipc	a1,0x0
+   c:	00058593          	mv	a1,a1
+        li a7, SYS_exec
+  10:	00700893          	li	a7,7
+        ecall
+  14:	00000073          	ecall
+
+0000000000000018 <exit>:
+
+# for(;;) exit();
+exit:
+        li a7, SYS_exit
+  18:	00200893          	li	a7,2
+        ecall
+  1c:	00000073          	ecall
+        jal exit
+  20:	ff9ff0ef          	jal	18 <exit>
+
+0000000000000024 <init>:
+  24:	696e692f          	.word	0x696e692f
+  28:	Address 0x28 is out of bounds.
+
+
+000000000000002b <argv>:
+	...
diff --git a/xv6-labs-2024/user/initcode.d b/xv6-labs-2024/user/initcode.d
new file mode 100644
index 0000000..1cc7dff
--- /dev/null
+++ b/xv6-labs-2024/user/initcode.d
@@ -0,0 +1 @@
+user/initcode.o: user/initcode.S kernel/syscall.h
diff --git a/xv6-labs-2024/user/initcode.o b/xv6-labs-2024/user/initcode.o
new file mode 100644
index 0000000..1d7172a
Binary files /dev/null and b/xv6-labs-2024/user/initcode.o differ
diff --git a/xv6-labs-2024/user/initcode.out b/xv6-labs-2024/user/initcode.out
new file mode 100755
index 0000000..c76393a
Binary files /dev/null and b/xv6-labs-2024/user/initcode.out differ
diff --git a/xv6-labs-2024/user/kill.asm b/xv6-labs-2024/user/kill.asm
new file mode 100644
index 0000000..c87d634
--- /dev/null
+++ b/xv6-labs-2024/user/kill.asm
@@ -0,0 +1,1059 @@
+
+user/_kill:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	1000                	addi	s0,sp,32
+   8:	4785                	li	a5,1
+   a:	02a7d963          	bge	a5,a0,3c <main+0x3c>
+   e:	e426                	sd	s1,8(sp)
+  10:	e04a                	sd	s2,0(sp)
+  12:	00858493          	addi	s1,a1,8
+  16:	ffe5091b          	addiw	s2,a0,-2
+  1a:	02091793          	slli	a5,s2,0x20
+  1e:	01d7d913          	srli	s2,a5,0x1d
+  22:	05c1                	addi	a1,a1,16
+  24:	992e                	add	s2,s2,a1
+  26:	6088                	ld	a0,0(s1)
+  28:	1a0000ef          	jal	1c8 <atoi>
+  2c:	2c2000ef          	jal	2ee <kill>
+  30:	04a1                	addi	s1,s1,8
+  32:	ff249ae3          	bne	s1,s2,26 <main+0x26>
+  36:	4501                	li	a0,0
+  38:	286000ef          	jal	2be <exit>
+  3c:	e426                	sd	s1,8(sp)
+  3e:	e04a                	sd	s2,0(sp)
+  40:	00001597          	auipc	a1,0x1
+  44:	85058593          	addi	a1,a1,-1968 # 890 <malloc+0x106>
+  48:	4509                	li	a0,2
+  4a:	662000ef          	jal	6ac <fprintf>
+  4e:	4505                	li	a0,1
+  50:	26e000ef          	jal	2be <exit>
+
+0000000000000054 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  54:	1141                	addi	sp,sp,-16
+  56:	e406                	sd	ra,8(sp)
+  58:	e022                	sd	s0,0(sp)
+  5a:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  5c:	fa5ff0ef          	jal	0 <main>
+  exit(0);
+  60:	4501                	li	a0,0
+  62:	25c000ef          	jal	2be <exit>
+
+0000000000000066 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  66:	1141                	addi	sp,sp,-16
+  68:	e422                	sd	s0,8(sp)
+  6a:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  6c:	87aa                	mv	a5,a0
+  6e:	0585                	addi	a1,a1,1
+  70:	0785                	addi	a5,a5,1
+  72:	fff5c703          	lbu	a4,-1(a1)
+  76:	fee78fa3          	sb	a4,-1(a5)
+  7a:	fb75                	bnez	a4,6e <strcpy+0x8>
+    ;
+  return os;
+}
+  7c:	6422                	ld	s0,8(sp)
+  7e:	0141                	addi	sp,sp,16
+  80:	8082                	ret
+
+0000000000000082 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  82:	1141                	addi	sp,sp,-16
+  84:	e422                	sd	s0,8(sp)
+  86:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  88:	00054783          	lbu	a5,0(a0)
+  8c:	cb91                	beqz	a5,a0 <strcmp+0x1e>
+  8e:	0005c703          	lbu	a4,0(a1)
+  92:	00f71763          	bne	a4,a5,a0 <strcmp+0x1e>
+    p++, q++;
+  96:	0505                	addi	a0,a0,1
+  98:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  9a:	00054783          	lbu	a5,0(a0)
+  9e:	fbe5                	bnez	a5,8e <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  a0:	0005c503          	lbu	a0,0(a1)
+}
+  a4:	40a7853b          	subw	a0,a5,a0
+  a8:	6422                	ld	s0,8(sp)
+  aa:	0141                	addi	sp,sp,16
+  ac:	8082                	ret
+
+00000000000000ae <strlen>:
+
+uint
+strlen(const char *s)
+{
+  ae:	1141                	addi	sp,sp,-16
+  b0:	e422                	sd	s0,8(sp)
+  b2:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  b4:	00054783          	lbu	a5,0(a0)
+  b8:	cf91                	beqz	a5,d4 <strlen+0x26>
+  ba:	0505                	addi	a0,a0,1
+  bc:	87aa                	mv	a5,a0
+  be:	86be                	mv	a3,a5
+  c0:	0785                	addi	a5,a5,1
+  c2:	fff7c703          	lbu	a4,-1(a5)
+  c6:	ff65                	bnez	a4,be <strlen+0x10>
+  c8:	40a6853b          	subw	a0,a3,a0
+  cc:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  ce:	6422                	ld	s0,8(sp)
+  d0:	0141                	addi	sp,sp,16
+  d2:	8082                	ret
+  for(n = 0; s[n]; n++)
+  d4:	4501                	li	a0,0
+  d6:	bfe5                	j	ce <strlen+0x20>
+
+00000000000000d8 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  d8:	1141                	addi	sp,sp,-16
+  da:	e422                	sd	s0,8(sp)
+  dc:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+  de:	ca19                	beqz	a2,f4 <memset+0x1c>
+  e0:	87aa                	mv	a5,a0
+  e2:	1602                	slli	a2,a2,0x20
+  e4:	9201                	srli	a2,a2,0x20
+  e6:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+  ea:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+  ee:	0785                	addi	a5,a5,1
+  f0:	fee79de3          	bne	a5,a4,ea <memset+0x12>
+  }
+  return dst;
+}
+  f4:	6422                	ld	s0,8(sp)
+  f6:	0141                	addi	sp,sp,16
+  f8:	8082                	ret
+
+00000000000000fa <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+  fa:	1141                	addi	sp,sp,-16
+  fc:	e422                	sd	s0,8(sp)
+  fe:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 100:	00054783          	lbu	a5,0(a0)
+ 104:	cb99                	beqz	a5,11a <strchr+0x20>
+    if(*s == c)
+ 106:	00f58763          	beq	a1,a5,114 <strchr+0x1a>
+  for(; *s; s++)
+ 10a:	0505                	addi	a0,a0,1
+ 10c:	00054783          	lbu	a5,0(a0)
+ 110:	fbfd                	bnez	a5,106 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 112:	4501                	li	a0,0
+}
+ 114:	6422                	ld	s0,8(sp)
+ 116:	0141                	addi	sp,sp,16
+ 118:	8082                	ret
+  return 0;
+ 11a:	4501                	li	a0,0
+ 11c:	bfe5                	j	114 <strchr+0x1a>
+
+000000000000011e <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 11e:	711d                	addi	sp,sp,-96
+ 120:	ec86                	sd	ra,88(sp)
+ 122:	e8a2                	sd	s0,80(sp)
+ 124:	e4a6                	sd	s1,72(sp)
+ 126:	e0ca                	sd	s2,64(sp)
+ 128:	fc4e                	sd	s3,56(sp)
+ 12a:	f852                	sd	s4,48(sp)
+ 12c:	f456                	sd	s5,40(sp)
+ 12e:	f05a                	sd	s6,32(sp)
+ 130:	ec5e                	sd	s7,24(sp)
+ 132:	1080                	addi	s0,sp,96
+ 134:	8baa                	mv	s7,a0
+ 136:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 138:	892a                	mv	s2,a0
+ 13a:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 13c:	4aa9                	li	s5,10
+ 13e:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 140:	89a6                	mv	s3,s1
+ 142:	2485                	addiw	s1,s1,1
+ 144:	0344d663          	bge	s1,s4,170 <gets+0x52>
+    cc = read(0, &c, 1);
+ 148:	4605                	li	a2,1
+ 14a:	faf40593          	addi	a1,s0,-81
+ 14e:	4501                	li	a0,0
+ 150:	186000ef          	jal	2d6 <read>
+    if(cc < 1)
+ 154:	00a05e63          	blez	a0,170 <gets+0x52>
+    buf[i++] = c;
+ 158:	faf44783          	lbu	a5,-81(s0)
+ 15c:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 160:	01578763          	beq	a5,s5,16e <gets+0x50>
+ 164:	0905                	addi	s2,s2,1
+ 166:	fd679de3          	bne	a5,s6,140 <gets+0x22>
+    buf[i++] = c;
+ 16a:	89a6                	mv	s3,s1
+ 16c:	a011                	j	170 <gets+0x52>
+ 16e:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 170:	99de                	add	s3,s3,s7
+ 172:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 176:	855e                	mv	a0,s7
+ 178:	60e6                	ld	ra,88(sp)
+ 17a:	6446                	ld	s0,80(sp)
+ 17c:	64a6                	ld	s1,72(sp)
+ 17e:	6906                	ld	s2,64(sp)
+ 180:	79e2                	ld	s3,56(sp)
+ 182:	7a42                	ld	s4,48(sp)
+ 184:	7aa2                	ld	s5,40(sp)
+ 186:	7b02                	ld	s6,32(sp)
+ 188:	6be2                	ld	s7,24(sp)
+ 18a:	6125                	addi	sp,sp,96
+ 18c:	8082                	ret
+
+000000000000018e <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 18e:	1101                	addi	sp,sp,-32
+ 190:	ec06                	sd	ra,24(sp)
+ 192:	e822                	sd	s0,16(sp)
+ 194:	e04a                	sd	s2,0(sp)
+ 196:	1000                	addi	s0,sp,32
+ 198:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 19a:	4581                	li	a1,0
+ 19c:	162000ef          	jal	2fe <open>
+  if(fd < 0)
+ 1a0:	02054263          	bltz	a0,1c4 <stat+0x36>
+ 1a4:	e426                	sd	s1,8(sp)
+ 1a6:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 1a8:	85ca                	mv	a1,s2
+ 1aa:	16c000ef          	jal	316 <fstat>
+ 1ae:	892a                	mv	s2,a0
+  close(fd);
+ 1b0:	8526                	mv	a0,s1
+ 1b2:	134000ef          	jal	2e6 <close>
+  return r;
+ 1b6:	64a2                	ld	s1,8(sp)
+}
+ 1b8:	854a                	mv	a0,s2
+ 1ba:	60e2                	ld	ra,24(sp)
+ 1bc:	6442                	ld	s0,16(sp)
+ 1be:	6902                	ld	s2,0(sp)
+ 1c0:	6105                	addi	sp,sp,32
+ 1c2:	8082                	ret
+    return -1;
+ 1c4:	597d                	li	s2,-1
+ 1c6:	bfcd                	j	1b8 <stat+0x2a>
+
+00000000000001c8 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 1c8:	1141                	addi	sp,sp,-16
+ 1ca:	e422                	sd	s0,8(sp)
+ 1cc:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 1ce:	00054683          	lbu	a3,0(a0)
+ 1d2:	fd06879b          	addiw	a5,a3,-48
+ 1d6:	0ff7f793          	zext.b	a5,a5
+ 1da:	4625                	li	a2,9
+ 1dc:	02f66863          	bltu	a2,a5,20c <atoi+0x44>
+ 1e0:	872a                	mv	a4,a0
+  n = 0;
+ 1e2:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 1e4:	0705                	addi	a4,a4,1
+ 1e6:	0025179b          	slliw	a5,a0,0x2
+ 1ea:	9fa9                	addw	a5,a5,a0
+ 1ec:	0017979b          	slliw	a5,a5,0x1
+ 1f0:	9fb5                	addw	a5,a5,a3
+ 1f2:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 1f6:	00074683          	lbu	a3,0(a4)
+ 1fa:	fd06879b          	addiw	a5,a3,-48
+ 1fe:	0ff7f793          	zext.b	a5,a5
+ 202:	fef671e3          	bgeu	a2,a5,1e4 <atoi+0x1c>
+  return n;
+}
+ 206:	6422                	ld	s0,8(sp)
+ 208:	0141                	addi	sp,sp,16
+ 20a:	8082                	ret
+  n = 0;
+ 20c:	4501                	li	a0,0
+ 20e:	bfe5                	j	206 <atoi+0x3e>
+
+0000000000000210 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 210:	1141                	addi	sp,sp,-16
+ 212:	e422                	sd	s0,8(sp)
+ 214:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 216:	02b57463          	bgeu	a0,a1,23e <memmove+0x2e>
+    while(n-- > 0)
+ 21a:	00c05f63          	blez	a2,238 <memmove+0x28>
+ 21e:	1602                	slli	a2,a2,0x20
+ 220:	9201                	srli	a2,a2,0x20
+ 222:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 226:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 228:	0585                	addi	a1,a1,1
+ 22a:	0705                	addi	a4,a4,1
+ 22c:	fff5c683          	lbu	a3,-1(a1)
+ 230:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 234:	fef71ae3          	bne	a4,a5,228 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 238:	6422                	ld	s0,8(sp)
+ 23a:	0141                	addi	sp,sp,16
+ 23c:	8082                	ret
+    dst += n;
+ 23e:	00c50733          	add	a4,a0,a2
+    src += n;
+ 242:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 244:	fec05ae3          	blez	a2,238 <memmove+0x28>
+ 248:	fff6079b          	addiw	a5,a2,-1
+ 24c:	1782                	slli	a5,a5,0x20
+ 24e:	9381                	srli	a5,a5,0x20
+ 250:	fff7c793          	not	a5,a5
+ 254:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 256:	15fd                	addi	a1,a1,-1
+ 258:	177d                	addi	a4,a4,-1
+ 25a:	0005c683          	lbu	a3,0(a1)
+ 25e:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 262:	fee79ae3          	bne	a5,a4,256 <memmove+0x46>
+ 266:	bfc9                	j	238 <memmove+0x28>
+
+0000000000000268 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 268:	1141                	addi	sp,sp,-16
+ 26a:	e422                	sd	s0,8(sp)
+ 26c:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 26e:	ca05                	beqz	a2,29e <memcmp+0x36>
+ 270:	fff6069b          	addiw	a3,a2,-1
+ 274:	1682                	slli	a3,a3,0x20
+ 276:	9281                	srli	a3,a3,0x20
+ 278:	0685                	addi	a3,a3,1
+ 27a:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 27c:	00054783          	lbu	a5,0(a0)
+ 280:	0005c703          	lbu	a4,0(a1)
+ 284:	00e79863          	bne	a5,a4,294 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 288:	0505                	addi	a0,a0,1
+    p2++;
+ 28a:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 28c:	fed518e3          	bne	a0,a3,27c <memcmp+0x14>
+  }
+  return 0;
+ 290:	4501                	li	a0,0
+ 292:	a019                	j	298 <memcmp+0x30>
+      return *p1 - *p2;
+ 294:	40e7853b          	subw	a0,a5,a4
+}
+ 298:	6422                	ld	s0,8(sp)
+ 29a:	0141                	addi	sp,sp,16
+ 29c:	8082                	ret
+  return 0;
+ 29e:	4501                	li	a0,0
+ 2a0:	bfe5                	j	298 <memcmp+0x30>
+
+00000000000002a2 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 2a2:	1141                	addi	sp,sp,-16
+ 2a4:	e406                	sd	ra,8(sp)
+ 2a6:	e022                	sd	s0,0(sp)
+ 2a8:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 2aa:	f67ff0ef          	jal	210 <memmove>
+}
+ 2ae:	60a2                	ld	ra,8(sp)
+ 2b0:	6402                	ld	s0,0(sp)
+ 2b2:	0141                	addi	sp,sp,16
+ 2b4:	8082                	ret
+
+00000000000002b6 <fork>:
+ 2b6:	4885                	li	a7,1
+ 2b8:	00000073          	ecall
+ 2bc:	8082                	ret
+
+00000000000002be <exit>:
+ 2be:	4889                	li	a7,2
+ 2c0:	00000073          	ecall
+ 2c4:	8082                	ret
+
+00000000000002c6 <wait>:
+ 2c6:	488d                	li	a7,3
+ 2c8:	00000073          	ecall
+ 2cc:	8082                	ret
+
+00000000000002ce <pipe>:
+ 2ce:	4891                	li	a7,4
+ 2d0:	00000073          	ecall
+ 2d4:	8082                	ret
+
+00000000000002d6 <read>:
+ 2d6:	4895                	li	a7,5
+ 2d8:	00000073          	ecall
+ 2dc:	8082                	ret
+
+00000000000002de <write>:
+ 2de:	48c1                	li	a7,16
+ 2e0:	00000073          	ecall
+ 2e4:	8082                	ret
+
+00000000000002e6 <close>:
+ 2e6:	48d5                	li	a7,21
+ 2e8:	00000073          	ecall
+ 2ec:	8082                	ret
+
+00000000000002ee <kill>:
+ 2ee:	4899                	li	a7,6
+ 2f0:	00000073          	ecall
+ 2f4:	8082                	ret
+
+00000000000002f6 <exec>:
+ 2f6:	489d                	li	a7,7
+ 2f8:	00000073          	ecall
+ 2fc:	8082                	ret
+
+00000000000002fe <open>:
+ 2fe:	48bd                	li	a7,15
+ 300:	00000073          	ecall
+ 304:	8082                	ret
+
+0000000000000306 <mknod>:
+ 306:	48c5                	li	a7,17
+ 308:	00000073          	ecall
+ 30c:	8082                	ret
+
+000000000000030e <unlink>:
+ 30e:	48c9                	li	a7,18
+ 310:	00000073          	ecall
+ 314:	8082                	ret
+
+0000000000000316 <fstat>:
+ 316:	48a1                	li	a7,8
+ 318:	00000073          	ecall
+ 31c:	8082                	ret
+
+000000000000031e <link>:
+ 31e:	48cd                	li	a7,19
+ 320:	00000073          	ecall
+ 324:	8082                	ret
+
+0000000000000326 <mkdir>:
+ 326:	48d1                	li	a7,20
+ 328:	00000073          	ecall
+ 32c:	8082                	ret
+
+000000000000032e <chdir>:
+ 32e:	48a5                	li	a7,9
+ 330:	00000073          	ecall
+ 334:	8082                	ret
+
+0000000000000336 <dup>:
+ 336:	48a9                	li	a7,10
+ 338:	00000073          	ecall
+ 33c:	8082                	ret
+
+000000000000033e <getpid>:
+ 33e:	48ad                	li	a7,11
+ 340:	00000073          	ecall
+ 344:	8082                	ret
+
+0000000000000346 <sbrk>:
+ 346:	48b1                	li	a7,12
+ 348:	00000073          	ecall
+ 34c:	8082                	ret
+
+000000000000034e <sleep>:
+ 34e:	48b5                	li	a7,13
+ 350:	00000073          	ecall
+ 354:	8082                	ret
+
+0000000000000356 <uptime>:
+ 356:	48b9                	li	a7,14
+ 358:	00000073          	ecall
+ 35c:	8082                	ret
+
+000000000000035e <putc>:
+ 35e:	1101                	addi	sp,sp,-32
+ 360:	ec06                	sd	ra,24(sp)
+ 362:	e822                	sd	s0,16(sp)
+ 364:	1000                	addi	s0,sp,32
+ 366:	feb407a3          	sb	a1,-17(s0)
+ 36a:	4605                	li	a2,1
+ 36c:	fef40593          	addi	a1,s0,-17
+ 370:	f6fff0ef          	jal	2de <write>
+ 374:	60e2                	ld	ra,24(sp)
+ 376:	6442                	ld	s0,16(sp)
+ 378:	6105                	addi	sp,sp,32
+ 37a:	8082                	ret
+
+000000000000037c <printint>:
+ 37c:	7139                	addi	sp,sp,-64
+ 37e:	fc06                	sd	ra,56(sp)
+ 380:	f822                	sd	s0,48(sp)
+ 382:	f426                	sd	s1,40(sp)
+ 384:	0080                	addi	s0,sp,64
+ 386:	84aa                	mv	s1,a0
+ 388:	c299                	beqz	a3,38e <printint+0x12>
+ 38a:	0805c963          	bltz	a1,41c <printint+0xa0>
+ 38e:	2581                	sext.w	a1,a1
+ 390:	4881                	li	a7,0
+ 392:	fc040693          	addi	a3,s0,-64
+ 396:	4701                	li	a4,0
+ 398:	2601                	sext.w	a2,a2
+ 39a:	00000517          	auipc	a0,0x0
+ 39e:	51650513          	addi	a0,a0,1302 # 8b0 <digits>
+ 3a2:	883a                	mv	a6,a4
+ 3a4:	2705                	addiw	a4,a4,1
+ 3a6:	02c5f7bb          	remuw	a5,a1,a2
+ 3aa:	1782                	slli	a5,a5,0x20
+ 3ac:	9381                	srli	a5,a5,0x20
+ 3ae:	97aa                	add	a5,a5,a0
+ 3b0:	0007c783          	lbu	a5,0(a5)
+ 3b4:	00f68023          	sb	a5,0(a3)
+ 3b8:	0005879b          	sext.w	a5,a1
+ 3bc:	02c5d5bb          	divuw	a1,a1,a2
+ 3c0:	0685                	addi	a3,a3,1
+ 3c2:	fec7f0e3          	bgeu	a5,a2,3a2 <printint+0x26>
+ 3c6:	00088c63          	beqz	a7,3de <printint+0x62>
+ 3ca:	fd070793          	addi	a5,a4,-48
+ 3ce:	00878733          	add	a4,a5,s0
+ 3d2:	02d00793          	li	a5,45
+ 3d6:	fef70823          	sb	a5,-16(a4)
+ 3da:	0028071b          	addiw	a4,a6,2
+ 3de:	02e05a63          	blez	a4,412 <printint+0x96>
+ 3e2:	f04a                	sd	s2,32(sp)
+ 3e4:	ec4e                	sd	s3,24(sp)
+ 3e6:	fc040793          	addi	a5,s0,-64
+ 3ea:	00e78933          	add	s2,a5,a4
+ 3ee:	fff78993          	addi	s3,a5,-1
+ 3f2:	99ba                	add	s3,s3,a4
+ 3f4:	377d                	addiw	a4,a4,-1
+ 3f6:	1702                	slli	a4,a4,0x20
+ 3f8:	9301                	srli	a4,a4,0x20
+ 3fa:	40e989b3          	sub	s3,s3,a4
+ 3fe:	fff94583          	lbu	a1,-1(s2)
+ 402:	8526                	mv	a0,s1
+ 404:	f5bff0ef          	jal	35e <putc>
+ 408:	197d                	addi	s2,s2,-1
+ 40a:	ff391ae3          	bne	s2,s3,3fe <printint+0x82>
+ 40e:	7902                	ld	s2,32(sp)
+ 410:	69e2                	ld	s3,24(sp)
+ 412:	70e2                	ld	ra,56(sp)
+ 414:	7442                	ld	s0,48(sp)
+ 416:	74a2                	ld	s1,40(sp)
+ 418:	6121                	addi	sp,sp,64
+ 41a:	8082                	ret
+ 41c:	40b005bb          	negw	a1,a1
+ 420:	4885                	li	a7,1
+ 422:	bf85                	j	392 <printint+0x16>
+
+0000000000000424 <vprintf>:
+ 424:	711d                	addi	sp,sp,-96
+ 426:	ec86                	sd	ra,88(sp)
+ 428:	e8a2                	sd	s0,80(sp)
+ 42a:	e0ca                	sd	s2,64(sp)
+ 42c:	1080                	addi	s0,sp,96
+ 42e:	0005c903          	lbu	s2,0(a1)
+ 432:	26090863          	beqz	s2,6a2 <vprintf+0x27e>
+ 436:	e4a6                	sd	s1,72(sp)
+ 438:	fc4e                	sd	s3,56(sp)
+ 43a:	f852                	sd	s4,48(sp)
+ 43c:	f456                	sd	s5,40(sp)
+ 43e:	f05a                	sd	s6,32(sp)
+ 440:	ec5e                	sd	s7,24(sp)
+ 442:	e862                	sd	s8,16(sp)
+ 444:	e466                	sd	s9,8(sp)
+ 446:	8b2a                	mv	s6,a0
+ 448:	8a2e                	mv	s4,a1
+ 44a:	8bb2                	mv	s7,a2
+ 44c:	4981                	li	s3,0
+ 44e:	4481                	li	s1,0
+ 450:	4701                	li	a4,0
+ 452:	02500a93          	li	s5,37
+ 456:	06400c13          	li	s8,100
+ 45a:	06c00c93          	li	s9,108
+ 45e:	a005                	j	47e <vprintf+0x5a>
+ 460:	85ca                	mv	a1,s2
+ 462:	855a                	mv	a0,s6
+ 464:	efbff0ef          	jal	35e <putc>
+ 468:	a019                	j	46e <vprintf+0x4a>
+ 46a:	03598263          	beq	s3,s5,48e <vprintf+0x6a>
+ 46e:	2485                	addiw	s1,s1,1
+ 470:	8726                	mv	a4,s1
+ 472:	009a07b3          	add	a5,s4,s1
+ 476:	0007c903          	lbu	s2,0(a5)
+ 47a:	20090c63          	beqz	s2,692 <vprintf+0x26e>
+ 47e:	0009079b          	sext.w	a5,s2
+ 482:	fe0994e3          	bnez	s3,46a <vprintf+0x46>
+ 486:	fd579de3          	bne	a5,s5,460 <vprintf+0x3c>
+ 48a:	89be                	mv	s3,a5
+ 48c:	b7cd                	j	46e <vprintf+0x4a>
+ 48e:	00ea06b3          	add	a3,s4,a4
+ 492:	0016c683          	lbu	a3,1(a3)
+ 496:	8636                	mv	a2,a3
+ 498:	c681                	beqz	a3,4a0 <vprintf+0x7c>
+ 49a:	9752                	add	a4,a4,s4
+ 49c:	00274603          	lbu	a2,2(a4)
+ 4a0:	03878f63          	beq	a5,s8,4de <vprintf+0xba>
+ 4a4:	05978963          	beq	a5,s9,4f6 <vprintf+0xd2>
+ 4a8:	07500713          	li	a4,117
+ 4ac:	0ee78363          	beq	a5,a4,592 <vprintf+0x16e>
+ 4b0:	07800713          	li	a4,120
+ 4b4:	12e78563          	beq	a5,a4,5de <vprintf+0x1ba>
+ 4b8:	07000713          	li	a4,112
+ 4bc:	14e78a63          	beq	a5,a4,610 <vprintf+0x1ec>
+ 4c0:	07300713          	li	a4,115
+ 4c4:	18e78a63          	beq	a5,a4,658 <vprintf+0x234>
+ 4c8:	02500713          	li	a4,37
+ 4cc:	04e79563          	bne	a5,a4,516 <vprintf+0xf2>
+ 4d0:	02500593          	li	a1,37
+ 4d4:	855a                	mv	a0,s6
+ 4d6:	e89ff0ef          	jal	35e <putc>
+ 4da:	4981                	li	s3,0
+ 4dc:	bf49                	j	46e <vprintf+0x4a>
+ 4de:	008b8913          	addi	s2,s7,8
+ 4e2:	4685                	li	a3,1
+ 4e4:	4629                	li	a2,10
+ 4e6:	000ba583          	lw	a1,0(s7)
+ 4ea:	855a                	mv	a0,s6
+ 4ec:	e91ff0ef          	jal	37c <printint>
+ 4f0:	8bca                	mv	s7,s2
+ 4f2:	4981                	li	s3,0
+ 4f4:	bfad                	j	46e <vprintf+0x4a>
+ 4f6:	06400793          	li	a5,100
+ 4fa:	02f68963          	beq	a3,a5,52c <vprintf+0x108>
+ 4fe:	06c00793          	li	a5,108
+ 502:	04f68263          	beq	a3,a5,546 <vprintf+0x122>
+ 506:	07500793          	li	a5,117
+ 50a:	0af68063          	beq	a3,a5,5aa <vprintf+0x186>
+ 50e:	07800793          	li	a5,120
+ 512:	0ef68263          	beq	a3,a5,5f6 <vprintf+0x1d2>
+ 516:	02500593          	li	a1,37
+ 51a:	855a                	mv	a0,s6
+ 51c:	e43ff0ef          	jal	35e <putc>
+ 520:	85ca                	mv	a1,s2
+ 522:	855a                	mv	a0,s6
+ 524:	e3bff0ef          	jal	35e <putc>
+ 528:	4981                	li	s3,0
+ 52a:	b791                	j	46e <vprintf+0x4a>
+ 52c:	008b8913          	addi	s2,s7,8
+ 530:	4685                	li	a3,1
+ 532:	4629                	li	a2,10
+ 534:	000ba583          	lw	a1,0(s7)
+ 538:	855a                	mv	a0,s6
+ 53a:	e43ff0ef          	jal	37c <printint>
+ 53e:	2485                	addiw	s1,s1,1
+ 540:	8bca                	mv	s7,s2
+ 542:	4981                	li	s3,0
+ 544:	b72d                	j	46e <vprintf+0x4a>
+ 546:	06400793          	li	a5,100
+ 54a:	02f60763          	beq	a2,a5,578 <vprintf+0x154>
+ 54e:	07500793          	li	a5,117
+ 552:	06f60963          	beq	a2,a5,5c4 <vprintf+0x1a0>
+ 556:	07800793          	li	a5,120
+ 55a:	faf61ee3          	bne	a2,a5,516 <vprintf+0xf2>
+ 55e:	008b8913          	addi	s2,s7,8
+ 562:	4681                	li	a3,0
+ 564:	4641                	li	a2,16
+ 566:	000ba583          	lw	a1,0(s7)
+ 56a:	855a                	mv	a0,s6
+ 56c:	e11ff0ef          	jal	37c <printint>
+ 570:	2489                	addiw	s1,s1,2
+ 572:	8bca                	mv	s7,s2
+ 574:	4981                	li	s3,0
+ 576:	bde5                	j	46e <vprintf+0x4a>
+ 578:	008b8913          	addi	s2,s7,8
+ 57c:	4685                	li	a3,1
+ 57e:	4629                	li	a2,10
+ 580:	000ba583          	lw	a1,0(s7)
+ 584:	855a                	mv	a0,s6
+ 586:	df7ff0ef          	jal	37c <printint>
+ 58a:	2489                	addiw	s1,s1,2
+ 58c:	8bca                	mv	s7,s2
+ 58e:	4981                	li	s3,0
+ 590:	bdf9                	j	46e <vprintf+0x4a>
+ 592:	008b8913          	addi	s2,s7,8
+ 596:	4681                	li	a3,0
+ 598:	4629                	li	a2,10
+ 59a:	000ba583          	lw	a1,0(s7)
+ 59e:	855a                	mv	a0,s6
+ 5a0:	dddff0ef          	jal	37c <printint>
+ 5a4:	8bca                	mv	s7,s2
+ 5a6:	4981                	li	s3,0
+ 5a8:	b5d9                	j	46e <vprintf+0x4a>
+ 5aa:	008b8913          	addi	s2,s7,8
+ 5ae:	4681                	li	a3,0
+ 5b0:	4629                	li	a2,10
+ 5b2:	000ba583          	lw	a1,0(s7)
+ 5b6:	855a                	mv	a0,s6
+ 5b8:	dc5ff0ef          	jal	37c <printint>
+ 5bc:	2485                	addiw	s1,s1,1
+ 5be:	8bca                	mv	s7,s2
+ 5c0:	4981                	li	s3,0
+ 5c2:	b575                	j	46e <vprintf+0x4a>
+ 5c4:	008b8913          	addi	s2,s7,8
+ 5c8:	4681                	li	a3,0
+ 5ca:	4629                	li	a2,10
+ 5cc:	000ba583          	lw	a1,0(s7)
+ 5d0:	855a                	mv	a0,s6
+ 5d2:	dabff0ef          	jal	37c <printint>
+ 5d6:	2489                	addiw	s1,s1,2
+ 5d8:	8bca                	mv	s7,s2
+ 5da:	4981                	li	s3,0
+ 5dc:	bd49                	j	46e <vprintf+0x4a>
+ 5de:	008b8913          	addi	s2,s7,8
+ 5e2:	4681                	li	a3,0
+ 5e4:	4641                	li	a2,16
+ 5e6:	000ba583          	lw	a1,0(s7)
+ 5ea:	855a                	mv	a0,s6
+ 5ec:	d91ff0ef          	jal	37c <printint>
+ 5f0:	8bca                	mv	s7,s2
+ 5f2:	4981                	li	s3,0
+ 5f4:	bdad                	j	46e <vprintf+0x4a>
+ 5f6:	008b8913          	addi	s2,s7,8
+ 5fa:	4681                	li	a3,0
+ 5fc:	4641                	li	a2,16
+ 5fe:	000ba583          	lw	a1,0(s7)
+ 602:	855a                	mv	a0,s6
+ 604:	d79ff0ef          	jal	37c <printint>
+ 608:	2485                	addiw	s1,s1,1
+ 60a:	8bca                	mv	s7,s2
+ 60c:	4981                	li	s3,0
+ 60e:	b585                	j	46e <vprintf+0x4a>
+ 610:	e06a                	sd	s10,0(sp)
+ 612:	008b8d13          	addi	s10,s7,8
+ 616:	000bb983          	ld	s3,0(s7)
+ 61a:	03000593          	li	a1,48
+ 61e:	855a                	mv	a0,s6
+ 620:	d3fff0ef          	jal	35e <putc>
+ 624:	07800593          	li	a1,120
+ 628:	855a                	mv	a0,s6
+ 62a:	d35ff0ef          	jal	35e <putc>
+ 62e:	4941                	li	s2,16
+ 630:	00000b97          	auipc	s7,0x0
+ 634:	280b8b93          	addi	s7,s7,640 # 8b0 <digits>
+ 638:	03c9d793          	srli	a5,s3,0x3c
+ 63c:	97de                	add	a5,a5,s7
+ 63e:	0007c583          	lbu	a1,0(a5)
+ 642:	855a                	mv	a0,s6
+ 644:	d1bff0ef          	jal	35e <putc>
+ 648:	0992                	slli	s3,s3,0x4
+ 64a:	397d                	addiw	s2,s2,-1
+ 64c:	fe0916e3          	bnez	s2,638 <vprintf+0x214>
+ 650:	8bea                	mv	s7,s10
+ 652:	4981                	li	s3,0
+ 654:	6d02                	ld	s10,0(sp)
+ 656:	bd21                	j	46e <vprintf+0x4a>
+ 658:	008b8993          	addi	s3,s7,8
+ 65c:	000bb903          	ld	s2,0(s7)
+ 660:	00090f63          	beqz	s2,67e <vprintf+0x25a>
+ 664:	00094583          	lbu	a1,0(s2)
+ 668:	c195                	beqz	a1,68c <vprintf+0x268>
+ 66a:	855a                	mv	a0,s6
+ 66c:	cf3ff0ef          	jal	35e <putc>
+ 670:	0905                	addi	s2,s2,1
+ 672:	00094583          	lbu	a1,0(s2)
+ 676:	f9f5                	bnez	a1,66a <vprintf+0x246>
+ 678:	8bce                	mv	s7,s3
+ 67a:	4981                	li	s3,0
+ 67c:	bbcd                	j	46e <vprintf+0x4a>
+ 67e:	00000917          	auipc	s2,0x0
+ 682:	22a90913          	addi	s2,s2,554 # 8a8 <malloc+0x11e>
+ 686:	02800593          	li	a1,40
+ 68a:	b7c5                	j	66a <vprintf+0x246>
+ 68c:	8bce                	mv	s7,s3
+ 68e:	4981                	li	s3,0
+ 690:	bbf9                	j	46e <vprintf+0x4a>
+ 692:	64a6                	ld	s1,72(sp)
+ 694:	79e2                	ld	s3,56(sp)
+ 696:	7a42                	ld	s4,48(sp)
+ 698:	7aa2                	ld	s5,40(sp)
+ 69a:	7b02                	ld	s6,32(sp)
+ 69c:	6be2                	ld	s7,24(sp)
+ 69e:	6c42                	ld	s8,16(sp)
+ 6a0:	6ca2                	ld	s9,8(sp)
+ 6a2:	60e6                	ld	ra,88(sp)
+ 6a4:	6446                	ld	s0,80(sp)
+ 6a6:	6906                	ld	s2,64(sp)
+ 6a8:	6125                	addi	sp,sp,96
+ 6aa:	8082                	ret
+
+00000000000006ac <fprintf>:
+ 6ac:	715d                	addi	sp,sp,-80
+ 6ae:	ec06                	sd	ra,24(sp)
+ 6b0:	e822                	sd	s0,16(sp)
+ 6b2:	1000                	addi	s0,sp,32
+ 6b4:	e010                	sd	a2,0(s0)
+ 6b6:	e414                	sd	a3,8(s0)
+ 6b8:	e818                	sd	a4,16(s0)
+ 6ba:	ec1c                	sd	a5,24(s0)
+ 6bc:	03043023          	sd	a6,32(s0)
+ 6c0:	03143423          	sd	a7,40(s0)
+ 6c4:	fe843423          	sd	s0,-24(s0)
+ 6c8:	8622                	mv	a2,s0
+ 6ca:	d5bff0ef          	jal	424 <vprintf>
+ 6ce:	60e2                	ld	ra,24(sp)
+ 6d0:	6442                	ld	s0,16(sp)
+ 6d2:	6161                	addi	sp,sp,80
+ 6d4:	8082                	ret
+
+00000000000006d6 <printf>:
+ 6d6:	711d                	addi	sp,sp,-96
+ 6d8:	ec06                	sd	ra,24(sp)
+ 6da:	e822                	sd	s0,16(sp)
+ 6dc:	1000                	addi	s0,sp,32
+ 6de:	e40c                	sd	a1,8(s0)
+ 6e0:	e810                	sd	a2,16(s0)
+ 6e2:	ec14                	sd	a3,24(s0)
+ 6e4:	f018                	sd	a4,32(s0)
+ 6e6:	f41c                	sd	a5,40(s0)
+ 6e8:	03043823          	sd	a6,48(s0)
+ 6ec:	03143c23          	sd	a7,56(s0)
+ 6f0:	00840613          	addi	a2,s0,8
+ 6f4:	fec43423          	sd	a2,-24(s0)
+ 6f8:	85aa                	mv	a1,a0
+ 6fa:	4505                	li	a0,1
+ 6fc:	d29ff0ef          	jal	424 <vprintf>
+ 700:	60e2                	ld	ra,24(sp)
+ 702:	6442                	ld	s0,16(sp)
+ 704:	6125                	addi	sp,sp,96
+ 706:	8082                	ret
+
+0000000000000708 <free>:
+ 708:	1141                	addi	sp,sp,-16
+ 70a:	e422                	sd	s0,8(sp)
+ 70c:	0800                	addi	s0,sp,16
+ 70e:	ff050693          	addi	a3,a0,-16
+ 712:	00001797          	auipc	a5,0x1
+ 716:	8ee7b783          	ld	a5,-1810(a5) # 1000 <freep>
+ 71a:	a02d                	j	744 <free+0x3c>
+ 71c:	4618                	lw	a4,8(a2)
+ 71e:	9f2d                	addw	a4,a4,a1
+ 720:	fee52c23          	sw	a4,-8(a0)
+ 724:	6398                	ld	a4,0(a5)
+ 726:	6310                	ld	a2,0(a4)
+ 728:	a83d                	j	766 <free+0x5e>
+ 72a:	ff852703          	lw	a4,-8(a0)
+ 72e:	9f31                	addw	a4,a4,a2
+ 730:	c798                	sw	a4,8(a5)
+ 732:	ff053683          	ld	a3,-16(a0)
+ 736:	a091                	j	77a <free+0x72>
+ 738:	6398                	ld	a4,0(a5)
+ 73a:	00e7e463          	bltu	a5,a4,742 <free+0x3a>
+ 73e:	00e6ea63          	bltu	a3,a4,752 <free+0x4a>
+ 742:	87ba                	mv	a5,a4
+ 744:	fed7fae3          	bgeu	a5,a3,738 <free+0x30>
+ 748:	6398                	ld	a4,0(a5)
+ 74a:	00e6e463          	bltu	a3,a4,752 <free+0x4a>
+ 74e:	fee7eae3          	bltu	a5,a4,742 <free+0x3a>
+ 752:	ff852583          	lw	a1,-8(a0)
+ 756:	6390                	ld	a2,0(a5)
+ 758:	02059813          	slli	a6,a1,0x20
+ 75c:	01c85713          	srli	a4,a6,0x1c
+ 760:	9736                	add	a4,a4,a3
+ 762:	fae60de3          	beq	a2,a4,71c <free+0x14>
+ 766:	fec53823          	sd	a2,-16(a0)
+ 76a:	4790                	lw	a2,8(a5)
+ 76c:	02061593          	slli	a1,a2,0x20
+ 770:	01c5d713          	srli	a4,a1,0x1c
+ 774:	973e                	add	a4,a4,a5
+ 776:	fae68ae3          	beq	a3,a4,72a <free+0x22>
+ 77a:	e394                	sd	a3,0(a5)
+ 77c:	00001717          	auipc	a4,0x1
+ 780:	88f73223          	sd	a5,-1916(a4) # 1000 <freep>
+ 784:	6422                	ld	s0,8(sp)
+ 786:	0141                	addi	sp,sp,16
+ 788:	8082                	ret
+
+000000000000078a <malloc>:
+ 78a:	7139                	addi	sp,sp,-64
+ 78c:	fc06                	sd	ra,56(sp)
+ 78e:	f822                	sd	s0,48(sp)
+ 790:	f426                	sd	s1,40(sp)
+ 792:	ec4e                	sd	s3,24(sp)
+ 794:	0080                	addi	s0,sp,64
+ 796:	02051493          	slli	s1,a0,0x20
+ 79a:	9081                	srli	s1,s1,0x20
+ 79c:	04bd                	addi	s1,s1,15
+ 79e:	8091                	srli	s1,s1,0x4
+ 7a0:	0014899b          	addiw	s3,s1,1
+ 7a4:	0485                	addi	s1,s1,1
+ 7a6:	00001517          	auipc	a0,0x1
+ 7aa:	85a53503          	ld	a0,-1958(a0) # 1000 <freep>
+ 7ae:	c915                	beqz	a0,7e2 <malloc+0x58>
+ 7b0:	611c                	ld	a5,0(a0)
+ 7b2:	4798                	lw	a4,8(a5)
+ 7b4:	08977a63          	bgeu	a4,s1,848 <malloc+0xbe>
+ 7b8:	f04a                	sd	s2,32(sp)
+ 7ba:	e852                	sd	s4,16(sp)
+ 7bc:	e456                	sd	s5,8(sp)
+ 7be:	e05a                	sd	s6,0(sp)
+ 7c0:	8a4e                	mv	s4,s3
+ 7c2:	0009871b          	sext.w	a4,s3
+ 7c6:	6685                	lui	a3,0x1
+ 7c8:	00d77363          	bgeu	a4,a3,7ce <malloc+0x44>
+ 7cc:	6a05                	lui	s4,0x1
+ 7ce:	000a0b1b          	sext.w	s6,s4
+ 7d2:	004a1a1b          	slliw	s4,s4,0x4
+ 7d6:	00001917          	auipc	s2,0x1
+ 7da:	82a90913          	addi	s2,s2,-2006 # 1000 <freep>
+ 7de:	5afd                	li	s5,-1
+ 7e0:	a081                	j	820 <malloc+0x96>
+ 7e2:	f04a                	sd	s2,32(sp)
+ 7e4:	e852                	sd	s4,16(sp)
+ 7e6:	e456                	sd	s5,8(sp)
+ 7e8:	e05a                	sd	s6,0(sp)
+ 7ea:	00001797          	auipc	a5,0x1
+ 7ee:	82678793          	addi	a5,a5,-2010 # 1010 <base>
+ 7f2:	00001717          	auipc	a4,0x1
+ 7f6:	80f73723          	sd	a5,-2034(a4) # 1000 <freep>
+ 7fa:	e39c                	sd	a5,0(a5)
+ 7fc:	0007a423          	sw	zero,8(a5)
+ 800:	b7c1                	j	7c0 <malloc+0x36>
+ 802:	6398                	ld	a4,0(a5)
+ 804:	e118                	sd	a4,0(a0)
+ 806:	a8a9                	j	860 <malloc+0xd6>
+ 808:	01652423          	sw	s6,8(a0)
+ 80c:	0541                	addi	a0,a0,16
+ 80e:	efbff0ef          	jal	708 <free>
+ 812:	00093503          	ld	a0,0(s2)
+ 816:	c12d                	beqz	a0,878 <malloc+0xee>
+ 818:	611c                	ld	a5,0(a0)
+ 81a:	4798                	lw	a4,8(a5)
+ 81c:	02977263          	bgeu	a4,s1,840 <malloc+0xb6>
+ 820:	00093703          	ld	a4,0(s2)
+ 824:	853e                	mv	a0,a5
+ 826:	fef719e3          	bne	a4,a5,818 <malloc+0x8e>
+ 82a:	8552                	mv	a0,s4
+ 82c:	b1bff0ef          	jal	346 <sbrk>
+ 830:	fd551ce3          	bne	a0,s5,808 <malloc+0x7e>
+ 834:	4501                	li	a0,0
+ 836:	7902                	ld	s2,32(sp)
+ 838:	6a42                	ld	s4,16(sp)
+ 83a:	6aa2                	ld	s5,8(sp)
+ 83c:	6b02                	ld	s6,0(sp)
+ 83e:	a03d                	j	86c <malloc+0xe2>
+ 840:	7902                	ld	s2,32(sp)
+ 842:	6a42                	ld	s4,16(sp)
+ 844:	6aa2                	ld	s5,8(sp)
+ 846:	6b02                	ld	s6,0(sp)
+ 848:	fae48de3          	beq	s1,a4,802 <malloc+0x78>
+ 84c:	4137073b          	subw	a4,a4,s3
+ 850:	c798                	sw	a4,8(a5)
+ 852:	02071693          	slli	a3,a4,0x20
+ 856:	01c6d713          	srli	a4,a3,0x1c
+ 85a:	97ba                	add	a5,a5,a4
+ 85c:	0137a423          	sw	s3,8(a5)
+ 860:	00000717          	auipc	a4,0x0
+ 864:	7aa73023          	sd	a0,1952(a4) # 1000 <freep>
+ 868:	01078513          	addi	a0,a5,16
+ 86c:	70e2                	ld	ra,56(sp)
+ 86e:	7442                	ld	s0,48(sp)
+ 870:	74a2                	ld	s1,40(sp)
+ 872:	69e2                	ld	s3,24(sp)
+ 874:	6121                	addi	sp,sp,64
+ 876:	8082                	ret
+ 878:	7902                	ld	s2,32(sp)
+ 87a:	6a42                	ld	s4,16(sp)
+ 87c:	6aa2                	ld	s5,8(sp)
+ 87e:	6b02                	ld	s6,0(sp)
+ 880:	b7f5                	j	86c <malloc+0xe2>
diff --git a/xv6-labs-2024/user/kill.c b/xv6-labs-2024/user/kill.c
new file mode 100644
index 0000000..1b0253b
--- /dev/null
+++ b/xv6-labs-2024/user/kill.c
@@ -0,0 +1,17 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char **argv)
+{
+  int i;
+
+  if(argc < 2){
+    fprintf(2, "usage: kill pid...\n");
+    exit(1);
+  }
+  for(i=1; i<argc; i++)
+    kill(atoi(argv[i]));
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/kill.d b/xv6-labs-2024/user/kill.d
new file mode 100644
index 0000000..a912807
--- /dev/null
+++ b/xv6-labs-2024/user/kill.d
@@ -0,0 +1,2 @@
+user/kill.o: user/kill.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/kill.o b/xv6-labs-2024/user/kill.o
new file mode 100644
index 0000000..3c7b50b
Binary files /dev/null and b/xv6-labs-2024/user/kill.o differ
diff --git a/xv6-labs-2024/user/kill.sym b/xv6-labs-2024/user/kill.sym
new file mode 100644
index 0000000..02bd5af
--- /dev/null
+++ b/xv6-labs-2024/user/kill.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000888 .rodata
+00000000000008c8 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 kill.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+000000000000035e putc
+000000000000037c printint
+00000000000008b0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000066 strcpy
+00000000000006d6 printf
+0000000000000210 memmove
+0000000000000306 mknod
+000000000000011e gets
+000000000000033e getpid
+00000000000002a2 memcpy
+000000000000078a malloc
+000000000000034e sleep
+00000000000002ce pipe
+00000000000002de write
+0000000000000316 fstat
+00000000000006ac fprintf
+00000000000002ee kill
+0000000000000424 vprintf
+000000000000032e chdir
+00000000000002f6 exec
+00000000000002c6 wait
+00000000000002d6 read
+000000000000030e unlink
+0000000000000268 memcmp
+00000000000002b6 fork
+0000000000000346 sbrk
+0000000000000356 uptime
+00000000000000d8 memset
+0000000000000000 main
+0000000000000082 strcmp
+0000000000000336 dup
+000000000000018e stat
+000000000000031e link
+00000000000002be exit
+0000000000000054 start
+00000000000001c8 atoi
+00000000000000ae strlen
+00000000000002fe open
+00000000000000fa strchr
+0000000000000326 mkdir
+00000000000002e6 close
+0000000000000708 free
diff --git a/xv6-labs-2024/user/ln.asm b/xv6-labs-2024/user/ln.asm
new file mode 100644
index 0000000..8426b63
--- /dev/null
+++ b/xv6-labs-2024/user/ln.asm
@@ -0,0 +1,1058 @@
+
+user/_ln:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	1000                	addi	s0,sp,32
+   8:	478d                	li	a5,3
+   a:	00f50d63          	beq	a0,a5,24 <main+0x24>
+   e:	e426                	sd	s1,8(sp)
+  10:	00001597          	auipc	a1,0x1
+  14:	87058593          	addi	a1,a1,-1936 # 880 <malloc+0xfc>
+  18:	4509                	li	a0,2
+  1a:	68c000ef          	jal	6a6 <fprintf>
+  1e:	4505                	li	a0,1
+  20:	298000ef          	jal	2b8 <exit>
+  24:	e426                	sd	s1,8(sp)
+  26:	84ae                	mv	s1,a1
+  28:	698c                	ld	a1,16(a1)
+  2a:	6488                	ld	a0,8(s1)
+  2c:	2ec000ef          	jal	318 <link>
+  30:	00054563          	bltz	a0,3a <main+0x3a>
+  34:	4501                	li	a0,0
+  36:	282000ef          	jal	2b8 <exit>
+  3a:	6894                	ld	a3,16(s1)
+  3c:	6490                	ld	a2,8(s1)
+  3e:	00001597          	auipc	a1,0x1
+  42:	85a58593          	addi	a1,a1,-1958 # 898 <malloc+0x114>
+  46:	4509                	li	a0,2
+  48:	65e000ef          	jal	6a6 <fprintf>
+  4c:	b7e5                	j	34 <main+0x34>
+
+000000000000004e <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  4e:	1141                	addi	sp,sp,-16
+  50:	e406                	sd	ra,8(sp)
+  52:	e022                	sd	s0,0(sp)
+  54:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  56:	fabff0ef          	jal	0 <main>
+  exit(0);
+  5a:	4501                	li	a0,0
+  5c:	25c000ef          	jal	2b8 <exit>
+
+0000000000000060 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  60:	1141                	addi	sp,sp,-16
+  62:	e422                	sd	s0,8(sp)
+  64:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  66:	87aa                	mv	a5,a0
+  68:	0585                	addi	a1,a1,1
+  6a:	0785                	addi	a5,a5,1
+  6c:	fff5c703          	lbu	a4,-1(a1)
+  70:	fee78fa3          	sb	a4,-1(a5)
+  74:	fb75                	bnez	a4,68 <strcpy+0x8>
+    ;
+  return os;
+}
+  76:	6422                	ld	s0,8(sp)
+  78:	0141                	addi	sp,sp,16
+  7a:	8082                	ret
+
+000000000000007c <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  7c:	1141                	addi	sp,sp,-16
+  7e:	e422                	sd	s0,8(sp)
+  80:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  82:	00054783          	lbu	a5,0(a0)
+  86:	cb91                	beqz	a5,9a <strcmp+0x1e>
+  88:	0005c703          	lbu	a4,0(a1)
+  8c:	00f71763          	bne	a4,a5,9a <strcmp+0x1e>
+    p++, q++;
+  90:	0505                	addi	a0,a0,1
+  92:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  94:	00054783          	lbu	a5,0(a0)
+  98:	fbe5                	bnez	a5,88 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  9a:	0005c503          	lbu	a0,0(a1)
+}
+  9e:	40a7853b          	subw	a0,a5,a0
+  a2:	6422                	ld	s0,8(sp)
+  a4:	0141                	addi	sp,sp,16
+  a6:	8082                	ret
+
+00000000000000a8 <strlen>:
+
+uint
+strlen(const char *s)
+{
+  a8:	1141                	addi	sp,sp,-16
+  aa:	e422                	sd	s0,8(sp)
+  ac:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  ae:	00054783          	lbu	a5,0(a0)
+  b2:	cf91                	beqz	a5,ce <strlen+0x26>
+  b4:	0505                	addi	a0,a0,1
+  b6:	87aa                	mv	a5,a0
+  b8:	86be                	mv	a3,a5
+  ba:	0785                	addi	a5,a5,1
+  bc:	fff7c703          	lbu	a4,-1(a5)
+  c0:	ff65                	bnez	a4,b8 <strlen+0x10>
+  c2:	40a6853b          	subw	a0,a3,a0
+  c6:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  c8:	6422                	ld	s0,8(sp)
+  ca:	0141                	addi	sp,sp,16
+  cc:	8082                	ret
+  for(n = 0; s[n]; n++)
+  ce:	4501                	li	a0,0
+  d0:	bfe5                	j	c8 <strlen+0x20>
+
+00000000000000d2 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  d2:	1141                	addi	sp,sp,-16
+  d4:	e422                	sd	s0,8(sp)
+  d6:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+  d8:	ca19                	beqz	a2,ee <memset+0x1c>
+  da:	87aa                	mv	a5,a0
+  dc:	1602                	slli	a2,a2,0x20
+  de:	9201                	srli	a2,a2,0x20
+  e0:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+  e4:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+  e8:	0785                	addi	a5,a5,1
+  ea:	fee79de3          	bne	a5,a4,e4 <memset+0x12>
+  }
+  return dst;
+}
+  ee:	6422                	ld	s0,8(sp)
+  f0:	0141                	addi	sp,sp,16
+  f2:	8082                	ret
+
+00000000000000f4 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+  f4:	1141                	addi	sp,sp,-16
+  f6:	e422                	sd	s0,8(sp)
+  f8:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+  fa:	00054783          	lbu	a5,0(a0)
+  fe:	cb99                	beqz	a5,114 <strchr+0x20>
+    if(*s == c)
+ 100:	00f58763          	beq	a1,a5,10e <strchr+0x1a>
+  for(; *s; s++)
+ 104:	0505                	addi	a0,a0,1
+ 106:	00054783          	lbu	a5,0(a0)
+ 10a:	fbfd                	bnez	a5,100 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 10c:	4501                	li	a0,0
+}
+ 10e:	6422                	ld	s0,8(sp)
+ 110:	0141                	addi	sp,sp,16
+ 112:	8082                	ret
+  return 0;
+ 114:	4501                	li	a0,0
+ 116:	bfe5                	j	10e <strchr+0x1a>
+
+0000000000000118 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 118:	711d                	addi	sp,sp,-96
+ 11a:	ec86                	sd	ra,88(sp)
+ 11c:	e8a2                	sd	s0,80(sp)
+ 11e:	e4a6                	sd	s1,72(sp)
+ 120:	e0ca                	sd	s2,64(sp)
+ 122:	fc4e                	sd	s3,56(sp)
+ 124:	f852                	sd	s4,48(sp)
+ 126:	f456                	sd	s5,40(sp)
+ 128:	f05a                	sd	s6,32(sp)
+ 12a:	ec5e                	sd	s7,24(sp)
+ 12c:	1080                	addi	s0,sp,96
+ 12e:	8baa                	mv	s7,a0
+ 130:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 132:	892a                	mv	s2,a0
+ 134:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 136:	4aa9                	li	s5,10
+ 138:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 13a:	89a6                	mv	s3,s1
+ 13c:	2485                	addiw	s1,s1,1
+ 13e:	0344d663          	bge	s1,s4,16a <gets+0x52>
+    cc = read(0, &c, 1);
+ 142:	4605                	li	a2,1
+ 144:	faf40593          	addi	a1,s0,-81
+ 148:	4501                	li	a0,0
+ 14a:	186000ef          	jal	2d0 <read>
+    if(cc < 1)
+ 14e:	00a05e63          	blez	a0,16a <gets+0x52>
+    buf[i++] = c;
+ 152:	faf44783          	lbu	a5,-81(s0)
+ 156:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 15a:	01578763          	beq	a5,s5,168 <gets+0x50>
+ 15e:	0905                	addi	s2,s2,1
+ 160:	fd679de3          	bne	a5,s6,13a <gets+0x22>
+    buf[i++] = c;
+ 164:	89a6                	mv	s3,s1
+ 166:	a011                	j	16a <gets+0x52>
+ 168:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 16a:	99de                	add	s3,s3,s7
+ 16c:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 170:	855e                	mv	a0,s7
+ 172:	60e6                	ld	ra,88(sp)
+ 174:	6446                	ld	s0,80(sp)
+ 176:	64a6                	ld	s1,72(sp)
+ 178:	6906                	ld	s2,64(sp)
+ 17a:	79e2                	ld	s3,56(sp)
+ 17c:	7a42                	ld	s4,48(sp)
+ 17e:	7aa2                	ld	s5,40(sp)
+ 180:	7b02                	ld	s6,32(sp)
+ 182:	6be2                	ld	s7,24(sp)
+ 184:	6125                	addi	sp,sp,96
+ 186:	8082                	ret
+
+0000000000000188 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 188:	1101                	addi	sp,sp,-32
+ 18a:	ec06                	sd	ra,24(sp)
+ 18c:	e822                	sd	s0,16(sp)
+ 18e:	e04a                	sd	s2,0(sp)
+ 190:	1000                	addi	s0,sp,32
+ 192:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 194:	4581                	li	a1,0
+ 196:	162000ef          	jal	2f8 <open>
+  if(fd < 0)
+ 19a:	02054263          	bltz	a0,1be <stat+0x36>
+ 19e:	e426                	sd	s1,8(sp)
+ 1a0:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 1a2:	85ca                	mv	a1,s2
+ 1a4:	16c000ef          	jal	310 <fstat>
+ 1a8:	892a                	mv	s2,a0
+  close(fd);
+ 1aa:	8526                	mv	a0,s1
+ 1ac:	134000ef          	jal	2e0 <close>
+  return r;
+ 1b0:	64a2                	ld	s1,8(sp)
+}
+ 1b2:	854a                	mv	a0,s2
+ 1b4:	60e2                	ld	ra,24(sp)
+ 1b6:	6442                	ld	s0,16(sp)
+ 1b8:	6902                	ld	s2,0(sp)
+ 1ba:	6105                	addi	sp,sp,32
+ 1bc:	8082                	ret
+    return -1;
+ 1be:	597d                	li	s2,-1
+ 1c0:	bfcd                	j	1b2 <stat+0x2a>
+
+00000000000001c2 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 1c2:	1141                	addi	sp,sp,-16
+ 1c4:	e422                	sd	s0,8(sp)
+ 1c6:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 1c8:	00054683          	lbu	a3,0(a0)
+ 1cc:	fd06879b          	addiw	a5,a3,-48
+ 1d0:	0ff7f793          	zext.b	a5,a5
+ 1d4:	4625                	li	a2,9
+ 1d6:	02f66863          	bltu	a2,a5,206 <atoi+0x44>
+ 1da:	872a                	mv	a4,a0
+  n = 0;
+ 1dc:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 1de:	0705                	addi	a4,a4,1
+ 1e0:	0025179b          	slliw	a5,a0,0x2
+ 1e4:	9fa9                	addw	a5,a5,a0
+ 1e6:	0017979b          	slliw	a5,a5,0x1
+ 1ea:	9fb5                	addw	a5,a5,a3
+ 1ec:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 1f0:	00074683          	lbu	a3,0(a4)
+ 1f4:	fd06879b          	addiw	a5,a3,-48
+ 1f8:	0ff7f793          	zext.b	a5,a5
+ 1fc:	fef671e3          	bgeu	a2,a5,1de <atoi+0x1c>
+  return n;
+}
+ 200:	6422                	ld	s0,8(sp)
+ 202:	0141                	addi	sp,sp,16
+ 204:	8082                	ret
+  n = 0;
+ 206:	4501                	li	a0,0
+ 208:	bfe5                	j	200 <atoi+0x3e>
+
+000000000000020a <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 20a:	1141                	addi	sp,sp,-16
+ 20c:	e422                	sd	s0,8(sp)
+ 20e:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 210:	02b57463          	bgeu	a0,a1,238 <memmove+0x2e>
+    while(n-- > 0)
+ 214:	00c05f63          	blez	a2,232 <memmove+0x28>
+ 218:	1602                	slli	a2,a2,0x20
+ 21a:	9201                	srli	a2,a2,0x20
+ 21c:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 220:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 222:	0585                	addi	a1,a1,1
+ 224:	0705                	addi	a4,a4,1
+ 226:	fff5c683          	lbu	a3,-1(a1)
+ 22a:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 22e:	fef71ae3          	bne	a4,a5,222 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 232:	6422                	ld	s0,8(sp)
+ 234:	0141                	addi	sp,sp,16
+ 236:	8082                	ret
+    dst += n;
+ 238:	00c50733          	add	a4,a0,a2
+    src += n;
+ 23c:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 23e:	fec05ae3          	blez	a2,232 <memmove+0x28>
+ 242:	fff6079b          	addiw	a5,a2,-1
+ 246:	1782                	slli	a5,a5,0x20
+ 248:	9381                	srli	a5,a5,0x20
+ 24a:	fff7c793          	not	a5,a5
+ 24e:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 250:	15fd                	addi	a1,a1,-1
+ 252:	177d                	addi	a4,a4,-1
+ 254:	0005c683          	lbu	a3,0(a1)
+ 258:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 25c:	fee79ae3          	bne	a5,a4,250 <memmove+0x46>
+ 260:	bfc9                	j	232 <memmove+0x28>
+
+0000000000000262 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 262:	1141                	addi	sp,sp,-16
+ 264:	e422                	sd	s0,8(sp)
+ 266:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 268:	ca05                	beqz	a2,298 <memcmp+0x36>
+ 26a:	fff6069b          	addiw	a3,a2,-1
+ 26e:	1682                	slli	a3,a3,0x20
+ 270:	9281                	srli	a3,a3,0x20
+ 272:	0685                	addi	a3,a3,1
+ 274:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 276:	00054783          	lbu	a5,0(a0)
+ 27a:	0005c703          	lbu	a4,0(a1)
+ 27e:	00e79863          	bne	a5,a4,28e <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 282:	0505                	addi	a0,a0,1
+    p2++;
+ 284:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 286:	fed518e3          	bne	a0,a3,276 <memcmp+0x14>
+  }
+  return 0;
+ 28a:	4501                	li	a0,0
+ 28c:	a019                	j	292 <memcmp+0x30>
+      return *p1 - *p2;
+ 28e:	40e7853b          	subw	a0,a5,a4
+}
+ 292:	6422                	ld	s0,8(sp)
+ 294:	0141                	addi	sp,sp,16
+ 296:	8082                	ret
+  return 0;
+ 298:	4501                	li	a0,0
+ 29a:	bfe5                	j	292 <memcmp+0x30>
+
+000000000000029c <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 29c:	1141                	addi	sp,sp,-16
+ 29e:	e406                	sd	ra,8(sp)
+ 2a0:	e022                	sd	s0,0(sp)
+ 2a2:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 2a4:	f67ff0ef          	jal	20a <memmove>
+}
+ 2a8:	60a2                	ld	ra,8(sp)
+ 2aa:	6402                	ld	s0,0(sp)
+ 2ac:	0141                	addi	sp,sp,16
+ 2ae:	8082                	ret
+
+00000000000002b0 <fork>:
+ 2b0:	4885                	li	a7,1
+ 2b2:	00000073          	ecall
+ 2b6:	8082                	ret
+
+00000000000002b8 <exit>:
+ 2b8:	4889                	li	a7,2
+ 2ba:	00000073          	ecall
+ 2be:	8082                	ret
+
+00000000000002c0 <wait>:
+ 2c0:	488d                	li	a7,3
+ 2c2:	00000073          	ecall
+ 2c6:	8082                	ret
+
+00000000000002c8 <pipe>:
+ 2c8:	4891                	li	a7,4
+ 2ca:	00000073          	ecall
+ 2ce:	8082                	ret
+
+00000000000002d0 <read>:
+ 2d0:	4895                	li	a7,5
+ 2d2:	00000073          	ecall
+ 2d6:	8082                	ret
+
+00000000000002d8 <write>:
+ 2d8:	48c1                	li	a7,16
+ 2da:	00000073          	ecall
+ 2de:	8082                	ret
+
+00000000000002e0 <close>:
+ 2e0:	48d5                	li	a7,21
+ 2e2:	00000073          	ecall
+ 2e6:	8082                	ret
+
+00000000000002e8 <kill>:
+ 2e8:	4899                	li	a7,6
+ 2ea:	00000073          	ecall
+ 2ee:	8082                	ret
+
+00000000000002f0 <exec>:
+ 2f0:	489d                	li	a7,7
+ 2f2:	00000073          	ecall
+ 2f6:	8082                	ret
+
+00000000000002f8 <open>:
+ 2f8:	48bd                	li	a7,15
+ 2fa:	00000073          	ecall
+ 2fe:	8082                	ret
+
+0000000000000300 <mknod>:
+ 300:	48c5                	li	a7,17
+ 302:	00000073          	ecall
+ 306:	8082                	ret
+
+0000000000000308 <unlink>:
+ 308:	48c9                	li	a7,18
+ 30a:	00000073          	ecall
+ 30e:	8082                	ret
+
+0000000000000310 <fstat>:
+ 310:	48a1                	li	a7,8
+ 312:	00000073          	ecall
+ 316:	8082                	ret
+
+0000000000000318 <link>:
+ 318:	48cd                	li	a7,19
+ 31a:	00000073          	ecall
+ 31e:	8082                	ret
+
+0000000000000320 <mkdir>:
+ 320:	48d1                	li	a7,20
+ 322:	00000073          	ecall
+ 326:	8082                	ret
+
+0000000000000328 <chdir>:
+ 328:	48a5                	li	a7,9
+ 32a:	00000073          	ecall
+ 32e:	8082                	ret
+
+0000000000000330 <dup>:
+ 330:	48a9                	li	a7,10
+ 332:	00000073          	ecall
+ 336:	8082                	ret
+
+0000000000000338 <getpid>:
+ 338:	48ad                	li	a7,11
+ 33a:	00000073          	ecall
+ 33e:	8082                	ret
+
+0000000000000340 <sbrk>:
+ 340:	48b1                	li	a7,12
+ 342:	00000073          	ecall
+ 346:	8082                	ret
+
+0000000000000348 <sleep>:
+ 348:	48b5                	li	a7,13
+ 34a:	00000073          	ecall
+ 34e:	8082                	ret
+
+0000000000000350 <uptime>:
+ 350:	48b9                	li	a7,14
+ 352:	00000073          	ecall
+ 356:	8082                	ret
+
+0000000000000358 <putc>:
+ 358:	1101                	addi	sp,sp,-32
+ 35a:	ec06                	sd	ra,24(sp)
+ 35c:	e822                	sd	s0,16(sp)
+ 35e:	1000                	addi	s0,sp,32
+ 360:	feb407a3          	sb	a1,-17(s0)
+ 364:	4605                	li	a2,1
+ 366:	fef40593          	addi	a1,s0,-17
+ 36a:	f6fff0ef          	jal	2d8 <write>
+ 36e:	60e2                	ld	ra,24(sp)
+ 370:	6442                	ld	s0,16(sp)
+ 372:	6105                	addi	sp,sp,32
+ 374:	8082                	ret
+
+0000000000000376 <printint>:
+ 376:	7139                	addi	sp,sp,-64
+ 378:	fc06                	sd	ra,56(sp)
+ 37a:	f822                	sd	s0,48(sp)
+ 37c:	f426                	sd	s1,40(sp)
+ 37e:	0080                	addi	s0,sp,64
+ 380:	84aa                	mv	s1,a0
+ 382:	c299                	beqz	a3,388 <printint+0x12>
+ 384:	0805c963          	bltz	a1,416 <printint+0xa0>
+ 388:	2581                	sext.w	a1,a1
+ 38a:	4881                	li	a7,0
+ 38c:	fc040693          	addi	a3,s0,-64
+ 390:	4701                	li	a4,0
+ 392:	2601                	sext.w	a2,a2
+ 394:	00000517          	auipc	a0,0x0
+ 398:	52450513          	addi	a0,a0,1316 # 8b8 <digits>
+ 39c:	883a                	mv	a6,a4
+ 39e:	2705                	addiw	a4,a4,1
+ 3a0:	02c5f7bb          	remuw	a5,a1,a2
+ 3a4:	1782                	slli	a5,a5,0x20
+ 3a6:	9381                	srli	a5,a5,0x20
+ 3a8:	97aa                	add	a5,a5,a0
+ 3aa:	0007c783          	lbu	a5,0(a5)
+ 3ae:	00f68023          	sb	a5,0(a3)
+ 3b2:	0005879b          	sext.w	a5,a1
+ 3b6:	02c5d5bb          	divuw	a1,a1,a2
+ 3ba:	0685                	addi	a3,a3,1
+ 3bc:	fec7f0e3          	bgeu	a5,a2,39c <printint+0x26>
+ 3c0:	00088c63          	beqz	a7,3d8 <printint+0x62>
+ 3c4:	fd070793          	addi	a5,a4,-48
+ 3c8:	00878733          	add	a4,a5,s0
+ 3cc:	02d00793          	li	a5,45
+ 3d0:	fef70823          	sb	a5,-16(a4)
+ 3d4:	0028071b          	addiw	a4,a6,2
+ 3d8:	02e05a63          	blez	a4,40c <printint+0x96>
+ 3dc:	f04a                	sd	s2,32(sp)
+ 3de:	ec4e                	sd	s3,24(sp)
+ 3e0:	fc040793          	addi	a5,s0,-64
+ 3e4:	00e78933          	add	s2,a5,a4
+ 3e8:	fff78993          	addi	s3,a5,-1
+ 3ec:	99ba                	add	s3,s3,a4
+ 3ee:	377d                	addiw	a4,a4,-1
+ 3f0:	1702                	slli	a4,a4,0x20
+ 3f2:	9301                	srli	a4,a4,0x20
+ 3f4:	40e989b3          	sub	s3,s3,a4
+ 3f8:	fff94583          	lbu	a1,-1(s2)
+ 3fc:	8526                	mv	a0,s1
+ 3fe:	f5bff0ef          	jal	358 <putc>
+ 402:	197d                	addi	s2,s2,-1
+ 404:	ff391ae3          	bne	s2,s3,3f8 <printint+0x82>
+ 408:	7902                	ld	s2,32(sp)
+ 40a:	69e2                	ld	s3,24(sp)
+ 40c:	70e2                	ld	ra,56(sp)
+ 40e:	7442                	ld	s0,48(sp)
+ 410:	74a2                	ld	s1,40(sp)
+ 412:	6121                	addi	sp,sp,64
+ 414:	8082                	ret
+ 416:	40b005bb          	negw	a1,a1
+ 41a:	4885                	li	a7,1
+ 41c:	bf85                	j	38c <printint+0x16>
+
+000000000000041e <vprintf>:
+ 41e:	711d                	addi	sp,sp,-96
+ 420:	ec86                	sd	ra,88(sp)
+ 422:	e8a2                	sd	s0,80(sp)
+ 424:	e0ca                	sd	s2,64(sp)
+ 426:	1080                	addi	s0,sp,96
+ 428:	0005c903          	lbu	s2,0(a1)
+ 42c:	26090863          	beqz	s2,69c <vprintf+0x27e>
+ 430:	e4a6                	sd	s1,72(sp)
+ 432:	fc4e                	sd	s3,56(sp)
+ 434:	f852                	sd	s4,48(sp)
+ 436:	f456                	sd	s5,40(sp)
+ 438:	f05a                	sd	s6,32(sp)
+ 43a:	ec5e                	sd	s7,24(sp)
+ 43c:	e862                	sd	s8,16(sp)
+ 43e:	e466                	sd	s9,8(sp)
+ 440:	8b2a                	mv	s6,a0
+ 442:	8a2e                	mv	s4,a1
+ 444:	8bb2                	mv	s7,a2
+ 446:	4981                	li	s3,0
+ 448:	4481                	li	s1,0
+ 44a:	4701                	li	a4,0
+ 44c:	02500a93          	li	s5,37
+ 450:	06400c13          	li	s8,100
+ 454:	06c00c93          	li	s9,108
+ 458:	a005                	j	478 <vprintf+0x5a>
+ 45a:	85ca                	mv	a1,s2
+ 45c:	855a                	mv	a0,s6
+ 45e:	efbff0ef          	jal	358 <putc>
+ 462:	a019                	j	468 <vprintf+0x4a>
+ 464:	03598263          	beq	s3,s5,488 <vprintf+0x6a>
+ 468:	2485                	addiw	s1,s1,1
+ 46a:	8726                	mv	a4,s1
+ 46c:	009a07b3          	add	a5,s4,s1
+ 470:	0007c903          	lbu	s2,0(a5)
+ 474:	20090c63          	beqz	s2,68c <vprintf+0x26e>
+ 478:	0009079b          	sext.w	a5,s2
+ 47c:	fe0994e3          	bnez	s3,464 <vprintf+0x46>
+ 480:	fd579de3          	bne	a5,s5,45a <vprintf+0x3c>
+ 484:	89be                	mv	s3,a5
+ 486:	b7cd                	j	468 <vprintf+0x4a>
+ 488:	00ea06b3          	add	a3,s4,a4
+ 48c:	0016c683          	lbu	a3,1(a3)
+ 490:	8636                	mv	a2,a3
+ 492:	c681                	beqz	a3,49a <vprintf+0x7c>
+ 494:	9752                	add	a4,a4,s4
+ 496:	00274603          	lbu	a2,2(a4)
+ 49a:	03878f63          	beq	a5,s8,4d8 <vprintf+0xba>
+ 49e:	05978963          	beq	a5,s9,4f0 <vprintf+0xd2>
+ 4a2:	07500713          	li	a4,117
+ 4a6:	0ee78363          	beq	a5,a4,58c <vprintf+0x16e>
+ 4aa:	07800713          	li	a4,120
+ 4ae:	12e78563          	beq	a5,a4,5d8 <vprintf+0x1ba>
+ 4b2:	07000713          	li	a4,112
+ 4b6:	14e78a63          	beq	a5,a4,60a <vprintf+0x1ec>
+ 4ba:	07300713          	li	a4,115
+ 4be:	18e78a63          	beq	a5,a4,652 <vprintf+0x234>
+ 4c2:	02500713          	li	a4,37
+ 4c6:	04e79563          	bne	a5,a4,510 <vprintf+0xf2>
+ 4ca:	02500593          	li	a1,37
+ 4ce:	855a                	mv	a0,s6
+ 4d0:	e89ff0ef          	jal	358 <putc>
+ 4d4:	4981                	li	s3,0
+ 4d6:	bf49                	j	468 <vprintf+0x4a>
+ 4d8:	008b8913          	addi	s2,s7,8
+ 4dc:	4685                	li	a3,1
+ 4de:	4629                	li	a2,10
+ 4e0:	000ba583          	lw	a1,0(s7)
+ 4e4:	855a                	mv	a0,s6
+ 4e6:	e91ff0ef          	jal	376 <printint>
+ 4ea:	8bca                	mv	s7,s2
+ 4ec:	4981                	li	s3,0
+ 4ee:	bfad                	j	468 <vprintf+0x4a>
+ 4f0:	06400793          	li	a5,100
+ 4f4:	02f68963          	beq	a3,a5,526 <vprintf+0x108>
+ 4f8:	06c00793          	li	a5,108
+ 4fc:	04f68263          	beq	a3,a5,540 <vprintf+0x122>
+ 500:	07500793          	li	a5,117
+ 504:	0af68063          	beq	a3,a5,5a4 <vprintf+0x186>
+ 508:	07800793          	li	a5,120
+ 50c:	0ef68263          	beq	a3,a5,5f0 <vprintf+0x1d2>
+ 510:	02500593          	li	a1,37
+ 514:	855a                	mv	a0,s6
+ 516:	e43ff0ef          	jal	358 <putc>
+ 51a:	85ca                	mv	a1,s2
+ 51c:	855a                	mv	a0,s6
+ 51e:	e3bff0ef          	jal	358 <putc>
+ 522:	4981                	li	s3,0
+ 524:	b791                	j	468 <vprintf+0x4a>
+ 526:	008b8913          	addi	s2,s7,8
+ 52a:	4685                	li	a3,1
+ 52c:	4629                	li	a2,10
+ 52e:	000ba583          	lw	a1,0(s7)
+ 532:	855a                	mv	a0,s6
+ 534:	e43ff0ef          	jal	376 <printint>
+ 538:	2485                	addiw	s1,s1,1
+ 53a:	8bca                	mv	s7,s2
+ 53c:	4981                	li	s3,0
+ 53e:	b72d                	j	468 <vprintf+0x4a>
+ 540:	06400793          	li	a5,100
+ 544:	02f60763          	beq	a2,a5,572 <vprintf+0x154>
+ 548:	07500793          	li	a5,117
+ 54c:	06f60963          	beq	a2,a5,5be <vprintf+0x1a0>
+ 550:	07800793          	li	a5,120
+ 554:	faf61ee3          	bne	a2,a5,510 <vprintf+0xf2>
+ 558:	008b8913          	addi	s2,s7,8
+ 55c:	4681                	li	a3,0
+ 55e:	4641                	li	a2,16
+ 560:	000ba583          	lw	a1,0(s7)
+ 564:	855a                	mv	a0,s6
+ 566:	e11ff0ef          	jal	376 <printint>
+ 56a:	2489                	addiw	s1,s1,2
+ 56c:	8bca                	mv	s7,s2
+ 56e:	4981                	li	s3,0
+ 570:	bde5                	j	468 <vprintf+0x4a>
+ 572:	008b8913          	addi	s2,s7,8
+ 576:	4685                	li	a3,1
+ 578:	4629                	li	a2,10
+ 57a:	000ba583          	lw	a1,0(s7)
+ 57e:	855a                	mv	a0,s6
+ 580:	df7ff0ef          	jal	376 <printint>
+ 584:	2489                	addiw	s1,s1,2
+ 586:	8bca                	mv	s7,s2
+ 588:	4981                	li	s3,0
+ 58a:	bdf9                	j	468 <vprintf+0x4a>
+ 58c:	008b8913          	addi	s2,s7,8
+ 590:	4681                	li	a3,0
+ 592:	4629                	li	a2,10
+ 594:	000ba583          	lw	a1,0(s7)
+ 598:	855a                	mv	a0,s6
+ 59a:	dddff0ef          	jal	376 <printint>
+ 59e:	8bca                	mv	s7,s2
+ 5a0:	4981                	li	s3,0
+ 5a2:	b5d9                	j	468 <vprintf+0x4a>
+ 5a4:	008b8913          	addi	s2,s7,8
+ 5a8:	4681                	li	a3,0
+ 5aa:	4629                	li	a2,10
+ 5ac:	000ba583          	lw	a1,0(s7)
+ 5b0:	855a                	mv	a0,s6
+ 5b2:	dc5ff0ef          	jal	376 <printint>
+ 5b6:	2485                	addiw	s1,s1,1
+ 5b8:	8bca                	mv	s7,s2
+ 5ba:	4981                	li	s3,0
+ 5bc:	b575                	j	468 <vprintf+0x4a>
+ 5be:	008b8913          	addi	s2,s7,8
+ 5c2:	4681                	li	a3,0
+ 5c4:	4629                	li	a2,10
+ 5c6:	000ba583          	lw	a1,0(s7)
+ 5ca:	855a                	mv	a0,s6
+ 5cc:	dabff0ef          	jal	376 <printint>
+ 5d0:	2489                	addiw	s1,s1,2
+ 5d2:	8bca                	mv	s7,s2
+ 5d4:	4981                	li	s3,0
+ 5d6:	bd49                	j	468 <vprintf+0x4a>
+ 5d8:	008b8913          	addi	s2,s7,8
+ 5dc:	4681                	li	a3,0
+ 5de:	4641                	li	a2,16
+ 5e0:	000ba583          	lw	a1,0(s7)
+ 5e4:	855a                	mv	a0,s6
+ 5e6:	d91ff0ef          	jal	376 <printint>
+ 5ea:	8bca                	mv	s7,s2
+ 5ec:	4981                	li	s3,0
+ 5ee:	bdad                	j	468 <vprintf+0x4a>
+ 5f0:	008b8913          	addi	s2,s7,8
+ 5f4:	4681                	li	a3,0
+ 5f6:	4641                	li	a2,16
+ 5f8:	000ba583          	lw	a1,0(s7)
+ 5fc:	855a                	mv	a0,s6
+ 5fe:	d79ff0ef          	jal	376 <printint>
+ 602:	2485                	addiw	s1,s1,1
+ 604:	8bca                	mv	s7,s2
+ 606:	4981                	li	s3,0
+ 608:	b585                	j	468 <vprintf+0x4a>
+ 60a:	e06a                	sd	s10,0(sp)
+ 60c:	008b8d13          	addi	s10,s7,8
+ 610:	000bb983          	ld	s3,0(s7)
+ 614:	03000593          	li	a1,48
+ 618:	855a                	mv	a0,s6
+ 61a:	d3fff0ef          	jal	358 <putc>
+ 61e:	07800593          	li	a1,120
+ 622:	855a                	mv	a0,s6
+ 624:	d35ff0ef          	jal	358 <putc>
+ 628:	4941                	li	s2,16
+ 62a:	00000b97          	auipc	s7,0x0
+ 62e:	28eb8b93          	addi	s7,s7,654 # 8b8 <digits>
+ 632:	03c9d793          	srli	a5,s3,0x3c
+ 636:	97de                	add	a5,a5,s7
+ 638:	0007c583          	lbu	a1,0(a5)
+ 63c:	855a                	mv	a0,s6
+ 63e:	d1bff0ef          	jal	358 <putc>
+ 642:	0992                	slli	s3,s3,0x4
+ 644:	397d                	addiw	s2,s2,-1
+ 646:	fe0916e3          	bnez	s2,632 <vprintf+0x214>
+ 64a:	8bea                	mv	s7,s10
+ 64c:	4981                	li	s3,0
+ 64e:	6d02                	ld	s10,0(sp)
+ 650:	bd21                	j	468 <vprintf+0x4a>
+ 652:	008b8993          	addi	s3,s7,8
+ 656:	000bb903          	ld	s2,0(s7)
+ 65a:	00090f63          	beqz	s2,678 <vprintf+0x25a>
+ 65e:	00094583          	lbu	a1,0(s2)
+ 662:	c195                	beqz	a1,686 <vprintf+0x268>
+ 664:	855a                	mv	a0,s6
+ 666:	cf3ff0ef          	jal	358 <putc>
+ 66a:	0905                	addi	s2,s2,1
+ 66c:	00094583          	lbu	a1,0(s2)
+ 670:	f9f5                	bnez	a1,664 <vprintf+0x246>
+ 672:	8bce                	mv	s7,s3
+ 674:	4981                	li	s3,0
+ 676:	bbcd                	j	468 <vprintf+0x4a>
+ 678:	00000917          	auipc	s2,0x0
+ 67c:	23890913          	addi	s2,s2,568 # 8b0 <malloc+0x12c>
+ 680:	02800593          	li	a1,40
+ 684:	b7c5                	j	664 <vprintf+0x246>
+ 686:	8bce                	mv	s7,s3
+ 688:	4981                	li	s3,0
+ 68a:	bbf9                	j	468 <vprintf+0x4a>
+ 68c:	64a6                	ld	s1,72(sp)
+ 68e:	79e2                	ld	s3,56(sp)
+ 690:	7a42                	ld	s4,48(sp)
+ 692:	7aa2                	ld	s5,40(sp)
+ 694:	7b02                	ld	s6,32(sp)
+ 696:	6be2                	ld	s7,24(sp)
+ 698:	6c42                	ld	s8,16(sp)
+ 69a:	6ca2                	ld	s9,8(sp)
+ 69c:	60e6                	ld	ra,88(sp)
+ 69e:	6446                	ld	s0,80(sp)
+ 6a0:	6906                	ld	s2,64(sp)
+ 6a2:	6125                	addi	sp,sp,96
+ 6a4:	8082                	ret
+
+00000000000006a6 <fprintf>:
+ 6a6:	715d                	addi	sp,sp,-80
+ 6a8:	ec06                	sd	ra,24(sp)
+ 6aa:	e822                	sd	s0,16(sp)
+ 6ac:	1000                	addi	s0,sp,32
+ 6ae:	e010                	sd	a2,0(s0)
+ 6b0:	e414                	sd	a3,8(s0)
+ 6b2:	e818                	sd	a4,16(s0)
+ 6b4:	ec1c                	sd	a5,24(s0)
+ 6b6:	03043023          	sd	a6,32(s0)
+ 6ba:	03143423          	sd	a7,40(s0)
+ 6be:	fe843423          	sd	s0,-24(s0)
+ 6c2:	8622                	mv	a2,s0
+ 6c4:	d5bff0ef          	jal	41e <vprintf>
+ 6c8:	60e2                	ld	ra,24(sp)
+ 6ca:	6442                	ld	s0,16(sp)
+ 6cc:	6161                	addi	sp,sp,80
+ 6ce:	8082                	ret
+
+00000000000006d0 <printf>:
+ 6d0:	711d                	addi	sp,sp,-96
+ 6d2:	ec06                	sd	ra,24(sp)
+ 6d4:	e822                	sd	s0,16(sp)
+ 6d6:	1000                	addi	s0,sp,32
+ 6d8:	e40c                	sd	a1,8(s0)
+ 6da:	e810                	sd	a2,16(s0)
+ 6dc:	ec14                	sd	a3,24(s0)
+ 6de:	f018                	sd	a4,32(s0)
+ 6e0:	f41c                	sd	a5,40(s0)
+ 6e2:	03043823          	sd	a6,48(s0)
+ 6e6:	03143c23          	sd	a7,56(s0)
+ 6ea:	00840613          	addi	a2,s0,8
+ 6ee:	fec43423          	sd	a2,-24(s0)
+ 6f2:	85aa                	mv	a1,a0
+ 6f4:	4505                	li	a0,1
+ 6f6:	d29ff0ef          	jal	41e <vprintf>
+ 6fa:	60e2                	ld	ra,24(sp)
+ 6fc:	6442                	ld	s0,16(sp)
+ 6fe:	6125                	addi	sp,sp,96
+ 700:	8082                	ret
+
+0000000000000702 <free>:
+ 702:	1141                	addi	sp,sp,-16
+ 704:	e422                	sd	s0,8(sp)
+ 706:	0800                	addi	s0,sp,16
+ 708:	ff050693          	addi	a3,a0,-16
+ 70c:	00001797          	auipc	a5,0x1
+ 710:	8f47b783          	ld	a5,-1804(a5) # 1000 <freep>
+ 714:	a02d                	j	73e <free+0x3c>
+ 716:	4618                	lw	a4,8(a2)
+ 718:	9f2d                	addw	a4,a4,a1
+ 71a:	fee52c23          	sw	a4,-8(a0)
+ 71e:	6398                	ld	a4,0(a5)
+ 720:	6310                	ld	a2,0(a4)
+ 722:	a83d                	j	760 <free+0x5e>
+ 724:	ff852703          	lw	a4,-8(a0)
+ 728:	9f31                	addw	a4,a4,a2
+ 72a:	c798                	sw	a4,8(a5)
+ 72c:	ff053683          	ld	a3,-16(a0)
+ 730:	a091                	j	774 <free+0x72>
+ 732:	6398                	ld	a4,0(a5)
+ 734:	00e7e463          	bltu	a5,a4,73c <free+0x3a>
+ 738:	00e6ea63          	bltu	a3,a4,74c <free+0x4a>
+ 73c:	87ba                	mv	a5,a4
+ 73e:	fed7fae3          	bgeu	a5,a3,732 <free+0x30>
+ 742:	6398                	ld	a4,0(a5)
+ 744:	00e6e463          	bltu	a3,a4,74c <free+0x4a>
+ 748:	fee7eae3          	bltu	a5,a4,73c <free+0x3a>
+ 74c:	ff852583          	lw	a1,-8(a0)
+ 750:	6390                	ld	a2,0(a5)
+ 752:	02059813          	slli	a6,a1,0x20
+ 756:	01c85713          	srli	a4,a6,0x1c
+ 75a:	9736                	add	a4,a4,a3
+ 75c:	fae60de3          	beq	a2,a4,716 <free+0x14>
+ 760:	fec53823          	sd	a2,-16(a0)
+ 764:	4790                	lw	a2,8(a5)
+ 766:	02061593          	slli	a1,a2,0x20
+ 76a:	01c5d713          	srli	a4,a1,0x1c
+ 76e:	973e                	add	a4,a4,a5
+ 770:	fae68ae3          	beq	a3,a4,724 <free+0x22>
+ 774:	e394                	sd	a3,0(a5)
+ 776:	00001717          	auipc	a4,0x1
+ 77a:	88f73523          	sd	a5,-1910(a4) # 1000 <freep>
+ 77e:	6422                	ld	s0,8(sp)
+ 780:	0141                	addi	sp,sp,16
+ 782:	8082                	ret
+
+0000000000000784 <malloc>:
+ 784:	7139                	addi	sp,sp,-64
+ 786:	fc06                	sd	ra,56(sp)
+ 788:	f822                	sd	s0,48(sp)
+ 78a:	f426                	sd	s1,40(sp)
+ 78c:	ec4e                	sd	s3,24(sp)
+ 78e:	0080                	addi	s0,sp,64
+ 790:	02051493          	slli	s1,a0,0x20
+ 794:	9081                	srli	s1,s1,0x20
+ 796:	04bd                	addi	s1,s1,15
+ 798:	8091                	srli	s1,s1,0x4
+ 79a:	0014899b          	addiw	s3,s1,1
+ 79e:	0485                	addi	s1,s1,1
+ 7a0:	00001517          	auipc	a0,0x1
+ 7a4:	86053503          	ld	a0,-1952(a0) # 1000 <freep>
+ 7a8:	c915                	beqz	a0,7dc <malloc+0x58>
+ 7aa:	611c                	ld	a5,0(a0)
+ 7ac:	4798                	lw	a4,8(a5)
+ 7ae:	08977a63          	bgeu	a4,s1,842 <malloc+0xbe>
+ 7b2:	f04a                	sd	s2,32(sp)
+ 7b4:	e852                	sd	s4,16(sp)
+ 7b6:	e456                	sd	s5,8(sp)
+ 7b8:	e05a                	sd	s6,0(sp)
+ 7ba:	8a4e                	mv	s4,s3
+ 7bc:	0009871b          	sext.w	a4,s3
+ 7c0:	6685                	lui	a3,0x1
+ 7c2:	00d77363          	bgeu	a4,a3,7c8 <malloc+0x44>
+ 7c6:	6a05                	lui	s4,0x1
+ 7c8:	000a0b1b          	sext.w	s6,s4
+ 7cc:	004a1a1b          	slliw	s4,s4,0x4
+ 7d0:	00001917          	auipc	s2,0x1
+ 7d4:	83090913          	addi	s2,s2,-2000 # 1000 <freep>
+ 7d8:	5afd                	li	s5,-1
+ 7da:	a081                	j	81a <malloc+0x96>
+ 7dc:	f04a                	sd	s2,32(sp)
+ 7de:	e852                	sd	s4,16(sp)
+ 7e0:	e456                	sd	s5,8(sp)
+ 7e2:	e05a                	sd	s6,0(sp)
+ 7e4:	00001797          	auipc	a5,0x1
+ 7e8:	82c78793          	addi	a5,a5,-2004 # 1010 <base>
+ 7ec:	00001717          	auipc	a4,0x1
+ 7f0:	80f73a23          	sd	a5,-2028(a4) # 1000 <freep>
+ 7f4:	e39c                	sd	a5,0(a5)
+ 7f6:	0007a423          	sw	zero,8(a5)
+ 7fa:	b7c1                	j	7ba <malloc+0x36>
+ 7fc:	6398                	ld	a4,0(a5)
+ 7fe:	e118                	sd	a4,0(a0)
+ 800:	a8a9                	j	85a <malloc+0xd6>
+ 802:	01652423          	sw	s6,8(a0)
+ 806:	0541                	addi	a0,a0,16
+ 808:	efbff0ef          	jal	702 <free>
+ 80c:	00093503          	ld	a0,0(s2)
+ 810:	c12d                	beqz	a0,872 <malloc+0xee>
+ 812:	611c                	ld	a5,0(a0)
+ 814:	4798                	lw	a4,8(a5)
+ 816:	02977263          	bgeu	a4,s1,83a <malloc+0xb6>
+ 81a:	00093703          	ld	a4,0(s2)
+ 81e:	853e                	mv	a0,a5
+ 820:	fef719e3          	bne	a4,a5,812 <malloc+0x8e>
+ 824:	8552                	mv	a0,s4
+ 826:	b1bff0ef          	jal	340 <sbrk>
+ 82a:	fd551ce3          	bne	a0,s5,802 <malloc+0x7e>
+ 82e:	4501                	li	a0,0
+ 830:	7902                	ld	s2,32(sp)
+ 832:	6a42                	ld	s4,16(sp)
+ 834:	6aa2                	ld	s5,8(sp)
+ 836:	6b02                	ld	s6,0(sp)
+ 838:	a03d                	j	866 <malloc+0xe2>
+ 83a:	7902                	ld	s2,32(sp)
+ 83c:	6a42                	ld	s4,16(sp)
+ 83e:	6aa2                	ld	s5,8(sp)
+ 840:	6b02                	ld	s6,0(sp)
+ 842:	fae48de3          	beq	s1,a4,7fc <malloc+0x78>
+ 846:	4137073b          	subw	a4,a4,s3
+ 84a:	c798                	sw	a4,8(a5)
+ 84c:	02071693          	slli	a3,a4,0x20
+ 850:	01c6d713          	srli	a4,a3,0x1c
+ 854:	97ba                	add	a5,a5,a4
+ 856:	0137a423          	sw	s3,8(a5)
+ 85a:	00000717          	auipc	a4,0x0
+ 85e:	7aa73323          	sd	a0,1958(a4) # 1000 <freep>
+ 862:	01078513          	addi	a0,a5,16
+ 866:	70e2                	ld	ra,56(sp)
+ 868:	7442                	ld	s0,48(sp)
+ 86a:	74a2                	ld	s1,40(sp)
+ 86c:	69e2                	ld	s3,24(sp)
+ 86e:	6121                	addi	sp,sp,64
+ 870:	8082                	ret
+ 872:	7902                	ld	s2,32(sp)
+ 874:	6a42                	ld	s4,16(sp)
+ 876:	6aa2                	ld	s5,8(sp)
+ 878:	6b02                	ld	s6,0(sp)
+ 87a:	b7f5                	j	866 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/ln.c b/xv6-labs-2024/user/ln.c
new file mode 100644
index 0000000..1894143
--- /dev/null
+++ b/xv6-labs-2024/user/ln.c
@@ -0,0 +1,15 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char *argv[])
+{
+  if(argc != 3){
+    fprintf(2, "Usage: ln old new\n");
+    exit(1);
+  }
+  if(link(argv[1], argv[2]) < 0)
+    fprintf(2, "link %s %s: failed\n", argv[1], argv[2]);
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/ln.d b/xv6-labs-2024/user/ln.d
new file mode 100644
index 0000000..c8ccc84
--- /dev/null
+++ b/xv6-labs-2024/user/ln.d
@@ -0,0 +1,2 @@
+user/ln.o: user/ln.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/ln.o b/xv6-labs-2024/user/ln.o
new file mode 100644
index 0000000..5a680e9
Binary files /dev/null and b/xv6-labs-2024/user/ln.o differ
diff --git a/xv6-labs-2024/user/ln.sym b/xv6-labs-2024/user/ln.sym
new file mode 100644
index 0000000..83019e1
--- /dev/null
+++ b/xv6-labs-2024/user/ln.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000880 .rodata
+00000000000008d0 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 ln.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000358 putc
+0000000000000376 printint
+00000000000008b8 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000060 strcpy
+00000000000006d0 printf
+000000000000020a memmove
+0000000000000300 mknod
+0000000000000118 gets
+0000000000000338 getpid
+000000000000029c memcpy
+0000000000000784 malloc
+0000000000000348 sleep
+00000000000002c8 pipe
+00000000000002d8 write
+0000000000000310 fstat
+00000000000006a6 fprintf
+00000000000002e8 kill
+000000000000041e vprintf
+0000000000000328 chdir
+00000000000002f0 exec
+00000000000002c0 wait
+00000000000002d0 read
+0000000000000308 unlink
+0000000000000262 memcmp
+00000000000002b0 fork
+0000000000000340 sbrk
+0000000000000350 uptime
+00000000000000d2 memset
+0000000000000000 main
+000000000000007c strcmp
+0000000000000330 dup
+0000000000000188 stat
+0000000000000318 link
+00000000000002b8 exit
+000000000000004e start
+00000000000001c2 atoi
+00000000000000a8 strlen
+00000000000002f8 open
+00000000000000f4 strchr
+0000000000000320 mkdir
+00000000000002e0 close
+0000000000000702 free
diff --git a/xv6-labs-2024/user/ls.asm b/xv6-labs-2024/user/ls.asm
new file mode 100644
index 0000000..3ebd8f3
--- /dev/null
+++ b/xv6-labs-2024/user/ls.asm
@@ -0,0 +1,1230 @@
+
+user/_ls:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <fmtname>:
+   0:	7179                	addi	sp,sp,-48
+   2:	f406                	sd	ra,40(sp)
+   4:	f022                	sd	s0,32(sp)
+   6:	ec26                	sd	s1,24(sp)
+   8:	1800                	addi	s0,sp,48
+   a:	84aa                	mv	s1,a0
+   c:	2b6000ef          	jal	2c2 <strlen>
+  10:	02051793          	slli	a5,a0,0x20
+  14:	9381                	srli	a5,a5,0x20
+  16:	97a6                	add	a5,a5,s1
+  18:	02f00693          	li	a3,47
+  1c:	0097e963          	bltu	a5,s1,2e <fmtname+0x2e>
+  20:	0007c703          	lbu	a4,0(a5)
+  24:	00d70563          	beq	a4,a3,2e <fmtname+0x2e>
+  28:	17fd                	addi	a5,a5,-1
+  2a:	fe97fbe3          	bgeu	a5,s1,20 <fmtname+0x20>
+  2e:	00178493          	addi	s1,a5,1
+  32:	8526                	mv	a0,s1
+  34:	28e000ef          	jal	2c2 <strlen>
+  38:	2501                	sext.w	a0,a0
+  3a:	47b5                	li	a5,13
+  3c:	00a7f863          	bgeu	a5,a0,4c <fmtname+0x4c>
+  40:	8526                	mv	a0,s1
+  42:	70a2                	ld	ra,40(sp)
+  44:	7402                	ld	s0,32(sp)
+  46:	64e2                	ld	s1,24(sp)
+  48:	6145                	addi	sp,sp,48
+  4a:	8082                	ret
+  4c:	e84a                	sd	s2,16(sp)
+  4e:	e44e                	sd	s3,8(sp)
+  50:	8526                	mv	a0,s1
+  52:	270000ef          	jal	2c2 <strlen>
+  56:	00001997          	auipc	s3,0x1
+  5a:	fba98993          	addi	s3,s3,-70 # 1010 <buf.0>
+  5e:	0005061b          	sext.w	a2,a0
+  62:	85a6                	mv	a1,s1
+  64:	854e                	mv	a0,s3
+  66:	3be000ef          	jal	424 <memmove>
+  6a:	8526                	mv	a0,s1
+  6c:	256000ef          	jal	2c2 <strlen>
+  70:	0005091b          	sext.w	s2,a0
+  74:	8526                	mv	a0,s1
+  76:	24c000ef          	jal	2c2 <strlen>
+  7a:	1902                	slli	s2,s2,0x20
+  7c:	02095913          	srli	s2,s2,0x20
+  80:	4639                	li	a2,14
+  82:	9e09                	subw	a2,a2,a0
+  84:	02000593          	li	a1,32
+  88:	01298533          	add	a0,s3,s2
+  8c:	260000ef          	jal	2ec <memset>
+  90:	84ce                	mv	s1,s3
+  92:	6942                	ld	s2,16(sp)
+  94:	69a2                	ld	s3,8(sp)
+  96:	b76d                	j	40 <fmtname+0x40>
+
+0000000000000098 <ls>:
+  98:	d9010113          	addi	sp,sp,-624
+  9c:	26113423          	sd	ra,616(sp)
+  a0:	26813023          	sd	s0,608(sp)
+  a4:	25213823          	sd	s2,592(sp)
+  a8:	1c80                	addi	s0,sp,624
+  aa:	892a                	mv	s2,a0
+  ac:	4581                	li	a1,0
+  ae:	464000ef          	jal	512 <open>
+  b2:	06054363          	bltz	a0,118 <ls+0x80>
+  b6:	24913c23          	sd	s1,600(sp)
+  ba:	84aa                	mv	s1,a0
+  bc:	d9840593          	addi	a1,s0,-616
+  c0:	46a000ef          	jal	52a <fstat>
+  c4:	06054363          	bltz	a0,12a <ls+0x92>
+  c8:	da041783          	lh	a5,-608(s0)
+  cc:	4705                	li	a4,1
+  ce:	06e78c63          	beq	a5,a4,146 <ls+0xae>
+  d2:	37f9                	addiw	a5,a5,-2
+  d4:	17c2                	slli	a5,a5,0x30
+  d6:	93c1                	srli	a5,a5,0x30
+  d8:	02f76263          	bltu	a4,a5,fc <ls+0x64>
+  dc:	854a                	mv	a0,s2
+  de:	f23ff0ef          	jal	0 <fmtname>
+  e2:	85aa                	mv	a1,a0
+  e4:	da842703          	lw	a4,-600(s0)
+  e8:	d9c42683          	lw	a3,-612(s0)
+  ec:	da041603          	lh	a2,-608(s0)
+  f0:	00001517          	auipc	a0,0x1
+  f4:	9e050513          	addi	a0,a0,-1568 # ad0 <malloc+0x132>
+  f8:	7f2000ef          	jal	8ea <printf>
+  fc:	8526                	mv	a0,s1
+  fe:	3fc000ef          	jal	4fa <close>
+ 102:	25813483          	ld	s1,600(sp)
+ 106:	26813083          	ld	ra,616(sp)
+ 10a:	26013403          	ld	s0,608(sp)
+ 10e:	25013903          	ld	s2,592(sp)
+ 112:	27010113          	addi	sp,sp,624
+ 116:	8082                	ret
+ 118:	864a                	mv	a2,s2
+ 11a:	00001597          	auipc	a1,0x1
+ 11e:	98658593          	addi	a1,a1,-1658 # aa0 <malloc+0x102>
+ 122:	4509                	li	a0,2
+ 124:	79c000ef          	jal	8c0 <fprintf>
+ 128:	bff9                	j	106 <ls+0x6e>
+ 12a:	864a                	mv	a2,s2
+ 12c:	00001597          	auipc	a1,0x1
+ 130:	98c58593          	addi	a1,a1,-1652 # ab8 <malloc+0x11a>
+ 134:	4509                	li	a0,2
+ 136:	78a000ef          	jal	8c0 <fprintf>
+ 13a:	8526                	mv	a0,s1
+ 13c:	3be000ef          	jal	4fa <close>
+ 140:	25813483          	ld	s1,600(sp)
+ 144:	b7c9                	j	106 <ls+0x6e>
+ 146:	854a                	mv	a0,s2
+ 148:	17a000ef          	jal	2c2 <strlen>
+ 14c:	2541                	addiw	a0,a0,16
+ 14e:	20000793          	li	a5,512
+ 152:	00a7f963          	bgeu	a5,a0,164 <ls+0xcc>
+ 156:	00001517          	auipc	a0,0x1
+ 15a:	98a50513          	addi	a0,a0,-1654 # ae0 <malloc+0x142>
+ 15e:	78c000ef          	jal	8ea <printf>
+ 162:	bf69                	j	fc <ls+0x64>
+ 164:	25313423          	sd	s3,584(sp)
+ 168:	25413023          	sd	s4,576(sp)
+ 16c:	23513c23          	sd	s5,568(sp)
+ 170:	85ca                	mv	a1,s2
+ 172:	dc040513          	addi	a0,s0,-576
+ 176:	104000ef          	jal	27a <strcpy>
+ 17a:	dc040513          	addi	a0,s0,-576
+ 17e:	144000ef          	jal	2c2 <strlen>
+ 182:	1502                	slli	a0,a0,0x20
+ 184:	9101                	srli	a0,a0,0x20
+ 186:	dc040793          	addi	a5,s0,-576
+ 18a:	00a78933          	add	s2,a5,a0
+ 18e:	00190993          	addi	s3,s2,1
+ 192:	02f00793          	li	a5,47
+ 196:	00f90023          	sb	a5,0(s2)
+ 19a:	00001a17          	auipc	s4,0x1
+ 19e:	936a0a13          	addi	s4,s4,-1738 # ad0 <malloc+0x132>
+ 1a2:	00001a97          	auipc	s5,0x1
+ 1a6:	916a8a93          	addi	s5,s5,-1770 # ab8 <malloc+0x11a>
+ 1aa:	a031                	j	1b6 <ls+0x11e>
+ 1ac:	dc040593          	addi	a1,s0,-576
+ 1b0:	8556                	mv	a0,s5
+ 1b2:	738000ef          	jal	8ea <printf>
+ 1b6:	4641                	li	a2,16
+ 1b8:	db040593          	addi	a1,s0,-592
+ 1bc:	8526                	mv	a0,s1
+ 1be:	32c000ef          	jal	4ea <read>
+ 1c2:	47c1                	li	a5,16
+ 1c4:	04f51463          	bne	a0,a5,20c <ls+0x174>
+ 1c8:	db045783          	lhu	a5,-592(s0)
+ 1cc:	d7ed                	beqz	a5,1b6 <ls+0x11e>
+ 1ce:	4639                	li	a2,14
+ 1d0:	db240593          	addi	a1,s0,-590
+ 1d4:	854e                	mv	a0,s3
+ 1d6:	24e000ef          	jal	424 <memmove>
+ 1da:	000907a3          	sb	zero,15(s2)
+ 1de:	d9840593          	addi	a1,s0,-616
+ 1e2:	dc040513          	addi	a0,s0,-576
+ 1e6:	1bc000ef          	jal	3a2 <stat>
+ 1ea:	fc0541e3          	bltz	a0,1ac <ls+0x114>
+ 1ee:	dc040513          	addi	a0,s0,-576
+ 1f2:	e0fff0ef          	jal	0 <fmtname>
+ 1f6:	85aa                	mv	a1,a0
+ 1f8:	da842703          	lw	a4,-600(s0)
+ 1fc:	d9c42683          	lw	a3,-612(s0)
+ 200:	da041603          	lh	a2,-608(s0)
+ 204:	8552                	mv	a0,s4
+ 206:	6e4000ef          	jal	8ea <printf>
+ 20a:	b775                	j	1b6 <ls+0x11e>
+ 20c:	24813983          	ld	s3,584(sp)
+ 210:	24013a03          	ld	s4,576(sp)
+ 214:	23813a83          	ld	s5,568(sp)
+ 218:	b5d5                	j	fc <ls+0x64>
+
+000000000000021a <main>:
+ 21a:	1101                	addi	sp,sp,-32
+ 21c:	ec06                	sd	ra,24(sp)
+ 21e:	e822                	sd	s0,16(sp)
+ 220:	1000                	addi	s0,sp,32
+ 222:	4785                	li	a5,1
+ 224:	02a7d763          	bge	a5,a0,252 <main+0x38>
+ 228:	e426                	sd	s1,8(sp)
+ 22a:	e04a                	sd	s2,0(sp)
+ 22c:	00858493          	addi	s1,a1,8
+ 230:	ffe5091b          	addiw	s2,a0,-2
+ 234:	02091793          	slli	a5,s2,0x20
+ 238:	01d7d913          	srli	s2,a5,0x1d
+ 23c:	05c1                	addi	a1,a1,16
+ 23e:	992e                	add	s2,s2,a1
+ 240:	6088                	ld	a0,0(s1)
+ 242:	e57ff0ef          	jal	98 <ls>
+ 246:	04a1                	addi	s1,s1,8
+ 248:	ff249ce3          	bne	s1,s2,240 <main+0x26>
+ 24c:	4501                	li	a0,0
+ 24e:	284000ef          	jal	4d2 <exit>
+ 252:	e426                	sd	s1,8(sp)
+ 254:	e04a                	sd	s2,0(sp)
+ 256:	00001517          	auipc	a0,0x1
+ 25a:	8a250513          	addi	a0,a0,-1886 # af8 <malloc+0x15a>
+ 25e:	e3bff0ef          	jal	98 <ls>
+ 262:	4501                	li	a0,0
+ 264:	26e000ef          	jal	4d2 <exit>
+
+0000000000000268 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 268:	1141                	addi	sp,sp,-16
+ 26a:	e406                	sd	ra,8(sp)
+ 26c:	e022                	sd	s0,0(sp)
+ 26e:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 270:	fabff0ef          	jal	21a <main>
+  exit(0);
+ 274:	4501                	li	a0,0
+ 276:	25c000ef          	jal	4d2 <exit>
+
+000000000000027a <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 27a:	1141                	addi	sp,sp,-16
+ 27c:	e422                	sd	s0,8(sp)
+ 27e:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 280:	87aa                	mv	a5,a0
+ 282:	0585                	addi	a1,a1,1
+ 284:	0785                	addi	a5,a5,1
+ 286:	fff5c703          	lbu	a4,-1(a1)
+ 28a:	fee78fa3          	sb	a4,-1(a5)
+ 28e:	fb75                	bnez	a4,282 <strcpy+0x8>
+    ;
+  return os;
+}
+ 290:	6422                	ld	s0,8(sp)
+ 292:	0141                	addi	sp,sp,16
+ 294:	8082                	ret
+
+0000000000000296 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 296:	1141                	addi	sp,sp,-16
+ 298:	e422                	sd	s0,8(sp)
+ 29a:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 29c:	00054783          	lbu	a5,0(a0)
+ 2a0:	cb91                	beqz	a5,2b4 <strcmp+0x1e>
+ 2a2:	0005c703          	lbu	a4,0(a1)
+ 2a6:	00f71763          	bne	a4,a5,2b4 <strcmp+0x1e>
+    p++, q++;
+ 2aa:	0505                	addi	a0,a0,1
+ 2ac:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 2ae:	00054783          	lbu	a5,0(a0)
+ 2b2:	fbe5                	bnez	a5,2a2 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 2b4:	0005c503          	lbu	a0,0(a1)
+}
+ 2b8:	40a7853b          	subw	a0,a5,a0
+ 2bc:	6422                	ld	s0,8(sp)
+ 2be:	0141                	addi	sp,sp,16
+ 2c0:	8082                	ret
+
+00000000000002c2 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 2c2:	1141                	addi	sp,sp,-16
+ 2c4:	e422                	sd	s0,8(sp)
+ 2c6:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 2c8:	00054783          	lbu	a5,0(a0)
+ 2cc:	cf91                	beqz	a5,2e8 <strlen+0x26>
+ 2ce:	0505                	addi	a0,a0,1
+ 2d0:	87aa                	mv	a5,a0
+ 2d2:	86be                	mv	a3,a5
+ 2d4:	0785                	addi	a5,a5,1
+ 2d6:	fff7c703          	lbu	a4,-1(a5)
+ 2da:	ff65                	bnez	a4,2d2 <strlen+0x10>
+ 2dc:	40a6853b          	subw	a0,a3,a0
+ 2e0:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 2e2:	6422                	ld	s0,8(sp)
+ 2e4:	0141                	addi	sp,sp,16
+ 2e6:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 2e8:	4501                	li	a0,0
+ 2ea:	bfe5                	j	2e2 <strlen+0x20>
+
+00000000000002ec <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 2ec:	1141                	addi	sp,sp,-16
+ 2ee:	e422                	sd	s0,8(sp)
+ 2f0:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 2f2:	ca19                	beqz	a2,308 <memset+0x1c>
+ 2f4:	87aa                	mv	a5,a0
+ 2f6:	1602                	slli	a2,a2,0x20
+ 2f8:	9201                	srli	a2,a2,0x20
+ 2fa:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 2fe:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 302:	0785                	addi	a5,a5,1
+ 304:	fee79de3          	bne	a5,a4,2fe <memset+0x12>
+  }
+  return dst;
+}
+ 308:	6422                	ld	s0,8(sp)
+ 30a:	0141                	addi	sp,sp,16
+ 30c:	8082                	ret
+
+000000000000030e <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 30e:	1141                	addi	sp,sp,-16
+ 310:	e422                	sd	s0,8(sp)
+ 312:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 314:	00054783          	lbu	a5,0(a0)
+ 318:	cb99                	beqz	a5,32e <strchr+0x20>
+    if(*s == c)
+ 31a:	00f58763          	beq	a1,a5,328 <strchr+0x1a>
+  for(; *s; s++)
+ 31e:	0505                	addi	a0,a0,1
+ 320:	00054783          	lbu	a5,0(a0)
+ 324:	fbfd                	bnez	a5,31a <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 326:	4501                	li	a0,0
+}
+ 328:	6422                	ld	s0,8(sp)
+ 32a:	0141                	addi	sp,sp,16
+ 32c:	8082                	ret
+  return 0;
+ 32e:	4501                	li	a0,0
+ 330:	bfe5                	j	328 <strchr+0x1a>
+
+0000000000000332 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 332:	711d                	addi	sp,sp,-96
+ 334:	ec86                	sd	ra,88(sp)
+ 336:	e8a2                	sd	s0,80(sp)
+ 338:	e4a6                	sd	s1,72(sp)
+ 33a:	e0ca                	sd	s2,64(sp)
+ 33c:	fc4e                	sd	s3,56(sp)
+ 33e:	f852                	sd	s4,48(sp)
+ 340:	f456                	sd	s5,40(sp)
+ 342:	f05a                	sd	s6,32(sp)
+ 344:	ec5e                	sd	s7,24(sp)
+ 346:	1080                	addi	s0,sp,96
+ 348:	8baa                	mv	s7,a0
+ 34a:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 34c:	892a                	mv	s2,a0
+ 34e:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 350:	4aa9                	li	s5,10
+ 352:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 354:	89a6                	mv	s3,s1
+ 356:	2485                	addiw	s1,s1,1
+ 358:	0344d663          	bge	s1,s4,384 <gets+0x52>
+    cc = read(0, &c, 1);
+ 35c:	4605                	li	a2,1
+ 35e:	faf40593          	addi	a1,s0,-81
+ 362:	4501                	li	a0,0
+ 364:	186000ef          	jal	4ea <read>
+    if(cc < 1)
+ 368:	00a05e63          	blez	a0,384 <gets+0x52>
+    buf[i++] = c;
+ 36c:	faf44783          	lbu	a5,-81(s0)
+ 370:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 374:	01578763          	beq	a5,s5,382 <gets+0x50>
+ 378:	0905                	addi	s2,s2,1
+ 37a:	fd679de3          	bne	a5,s6,354 <gets+0x22>
+    buf[i++] = c;
+ 37e:	89a6                	mv	s3,s1
+ 380:	a011                	j	384 <gets+0x52>
+ 382:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 384:	99de                	add	s3,s3,s7
+ 386:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 38a:	855e                	mv	a0,s7
+ 38c:	60e6                	ld	ra,88(sp)
+ 38e:	6446                	ld	s0,80(sp)
+ 390:	64a6                	ld	s1,72(sp)
+ 392:	6906                	ld	s2,64(sp)
+ 394:	79e2                	ld	s3,56(sp)
+ 396:	7a42                	ld	s4,48(sp)
+ 398:	7aa2                	ld	s5,40(sp)
+ 39a:	7b02                	ld	s6,32(sp)
+ 39c:	6be2                	ld	s7,24(sp)
+ 39e:	6125                	addi	sp,sp,96
+ 3a0:	8082                	ret
+
+00000000000003a2 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 3a2:	1101                	addi	sp,sp,-32
+ 3a4:	ec06                	sd	ra,24(sp)
+ 3a6:	e822                	sd	s0,16(sp)
+ 3a8:	e04a                	sd	s2,0(sp)
+ 3aa:	1000                	addi	s0,sp,32
+ 3ac:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 3ae:	4581                	li	a1,0
+ 3b0:	162000ef          	jal	512 <open>
+  if(fd < 0)
+ 3b4:	02054263          	bltz	a0,3d8 <stat+0x36>
+ 3b8:	e426                	sd	s1,8(sp)
+ 3ba:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 3bc:	85ca                	mv	a1,s2
+ 3be:	16c000ef          	jal	52a <fstat>
+ 3c2:	892a                	mv	s2,a0
+  close(fd);
+ 3c4:	8526                	mv	a0,s1
+ 3c6:	134000ef          	jal	4fa <close>
+  return r;
+ 3ca:	64a2                	ld	s1,8(sp)
+}
+ 3cc:	854a                	mv	a0,s2
+ 3ce:	60e2                	ld	ra,24(sp)
+ 3d0:	6442                	ld	s0,16(sp)
+ 3d2:	6902                	ld	s2,0(sp)
+ 3d4:	6105                	addi	sp,sp,32
+ 3d6:	8082                	ret
+    return -1;
+ 3d8:	597d                	li	s2,-1
+ 3da:	bfcd                	j	3cc <stat+0x2a>
+
+00000000000003dc <atoi>:
+
+int
+atoi(const char *s)
+{
+ 3dc:	1141                	addi	sp,sp,-16
+ 3de:	e422                	sd	s0,8(sp)
+ 3e0:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 3e2:	00054683          	lbu	a3,0(a0)
+ 3e6:	fd06879b          	addiw	a5,a3,-48
+ 3ea:	0ff7f793          	zext.b	a5,a5
+ 3ee:	4625                	li	a2,9
+ 3f0:	02f66863          	bltu	a2,a5,420 <atoi+0x44>
+ 3f4:	872a                	mv	a4,a0
+  n = 0;
+ 3f6:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 3f8:	0705                	addi	a4,a4,1
+ 3fa:	0025179b          	slliw	a5,a0,0x2
+ 3fe:	9fa9                	addw	a5,a5,a0
+ 400:	0017979b          	slliw	a5,a5,0x1
+ 404:	9fb5                	addw	a5,a5,a3
+ 406:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 40a:	00074683          	lbu	a3,0(a4)
+ 40e:	fd06879b          	addiw	a5,a3,-48
+ 412:	0ff7f793          	zext.b	a5,a5
+ 416:	fef671e3          	bgeu	a2,a5,3f8 <atoi+0x1c>
+  return n;
+}
+ 41a:	6422                	ld	s0,8(sp)
+ 41c:	0141                	addi	sp,sp,16
+ 41e:	8082                	ret
+  n = 0;
+ 420:	4501                	li	a0,0
+ 422:	bfe5                	j	41a <atoi+0x3e>
+
+0000000000000424 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 424:	1141                	addi	sp,sp,-16
+ 426:	e422                	sd	s0,8(sp)
+ 428:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 42a:	02b57463          	bgeu	a0,a1,452 <memmove+0x2e>
+    while(n-- > 0)
+ 42e:	00c05f63          	blez	a2,44c <memmove+0x28>
+ 432:	1602                	slli	a2,a2,0x20
+ 434:	9201                	srli	a2,a2,0x20
+ 436:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 43a:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 43c:	0585                	addi	a1,a1,1
+ 43e:	0705                	addi	a4,a4,1
+ 440:	fff5c683          	lbu	a3,-1(a1)
+ 444:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 448:	fef71ae3          	bne	a4,a5,43c <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 44c:	6422                	ld	s0,8(sp)
+ 44e:	0141                	addi	sp,sp,16
+ 450:	8082                	ret
+    dst += n;
+ 452:	00c50733          	add	a4,a0,a2
+    src += n;
+ 456:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 458:	fec05ae3          	blez	a2,44c <memmove+0x28>
+ 45c:	fff6079b          	addiw	a5,a2,-1
+ 460:	1782                	slli	a5,a5,0x20
+ 462:	9381                	srli	a5,a5,0x20
+ 464:	fff7c793          	not	a5,a5
+ 468:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 46a:	15fd                	addi	a1,a1,-1
+ 46c:	177d                	addi	a4,a4,-1
+ 46e:	0005c683          	lbu	a3,0(a1)
+ 472:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 476:	fee79ae3          	bne	a5,a4,46a <memmove+0x46>
+ 47a:	bfc9                	j	44c <memmove+0x28>
+
+000000000000047c <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 47c:	1141                	addi	sp,sp,-16
+ 47e:	e422                	sd	s0,8(sp)
+ 480:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 482:	ca05                	beqz	a2,4b2 <memcmp+0x36>
+ 484:	fff6069b          	addiw	a3,a2,-1
+ 488:	1682                	slli	a3,a3,0x20
+ 48a:	9281                	srli	a3,a3,0x20
+ 48c:	0685                	addi	a3,a3,1
+ 48e:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 490:	00054783          	lbu	a5,0(a0)
+ 494:	0005c703          	lbu	a4,0(a1)
+ 498:	00e79863          	bne	a5,a4,4a8 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 49c:	0505                	addi	a0,a0,1
+    p2++;
+ 49e:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 4a0:	fed518e3          	bne	a0,a3,490 <memcmp+0x14>
+  }
+  return 0;
+ 4a4:	4501                	li	a0,0
+ 4a6:	a019                	j	4ac <memcmp+0x30>
+      return *p1 - *p2;
+ 4a8:	40e7853b          	subw	a0,a5,a4
+}
+ 4ac:	6422                	ld	s0,8(sp)
+ 4ae:	0141                	addi	sp,sp,16
+ 4b0:	8082                	ret
+  return 0;
+ 4b2:	4501                	li	a0,0
+ 4b4:	bfe5                	j	4ac <memcmp+0x30>
+
+00000000000004b6 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 4b6:	1141                	addi	sp,sp,-16
+ 4b8:	e406                	sd	ra,8(sp)
+ 4ba:	e022                	sd	s0,0(sp)
+ 4bc:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 4be:	f67ff0ef          	jal	424 <memmove>
+}
+ 4c2:	60a2                	ld	ra,8(sp)
+ 4c4:	6402                	ld	s0,0(sp)
+ 4c6:	0141                	addi	sp,sp,16
+ 4c8:	8082                	ret
+
+00000000000004ca <fork>:
+ 4ca:	4885                	li	a7,1
+ 4cc:	00000073          	ecall
+ 4d0:	8082                	ret
+
+00000000000004d2 <exit>:
+ 4d2:	4889                	li	a7,2
+ 4d4:	00000073          	ecall
+ 4d8:	8082                	ret
+
+00000000000004da <wait>:
+ 4da:	488d                	li	a7,3
+ 4dc:	00000073          	ecall
+ 4e0:	8082                	ret
+
+00000000000004e2 <pipe>:
+ 4e2:	4891                	li	a7,4
+ 4e4:	00000073          	ecall
+ 4e8:	8082                	ret
+
+00000000000004ea <read>:
+ 4ea:	4895                	li	a7,5
+ 4ec:	00000073          	ecall
+ 4f0:	8082                	ret
+
+00000000000004f2 <write>:
+ 4f2:	48c1                	li	a7,16
+ 4f4:	00000073          	ecall
+ 4f8:	8082                	ret
+
+00000000000004fa <close>:
+ 4fa:	48d5                	li	a7,21
+ 4fc:	00000073          	ecall
+ 500:	8082                	ret
+
+0000000000000502 <kill>:
+ 502:	4899                	li	a7,6
+ 504:	00000073          	ecall
+ 508:	8082                	ret
+
+000000000000050a <exec>:
+ 50a:	489d                	li	a7,7
+ 50c:	00000073          	ecall
+ 510:	8082                	ret
+
+0000000000000512 <open>:
+ 512:	48bd                	li	a7,15
+ 514:	00000073          	ecall
+ 518:	8082                	ret
+
+000000000000051a <mknod>:
+ 51a:	48c5                	li	a7,17
+ 51c:	00000073          	ecall
+ 520:	8082                	ret
+
+0000000000000522 <unlink>:
+ 522:	48c9                	li	a7,18
+ 524:	00000073          	ecall
+ 528:	8082                	ret
+
+000000000000052a <fstat>:
+ 52a:	48a1                	li	a7,8
+ 52c:	00000073          	ecall
+ 530:	8082                	ret
+
+0000000000000532 <link>:
+ 532:	48cd                	li	a7,19
+ 534:	00000073          	ecall
+ 538:	8082                	ret
+
+000000000000053a <mkdir>:
+ 53a:	48d1                	li	a7,20
+ 53c:	00000073          	ecall
+ 540:	8082                	ret
+
+0000000000000542 <chdir>:
+ 542:	48a5                	li	a7,9
+ 544:	00000073          	ecall
+ 548:	8082                	ret
+
+000000000000054a <dup>:
+ 54a:	48a9                	li	a7,10
+ 54c:	00000073          	ecall
+ 550:	8082                	ret
+
+0000000000000552 <getpid>:
+ 552:	48ad                	li	a7,11
+ 554:	00000073          	ecall
+ 558:	8082                	ret
+
+000000000000055a <sbrk>:
+ 55a:	48b1                	li	a7,12
+ 55c:	00000073          	ecall
+ 560:	8082                	ret
+
+0000000000000562 <sleep>:
+ 562:	48b5                	li	a7,13
+ 564:	00000073          	ecall
+ 568:	8082                	ret
+
+000000000000056a <uptime>:
+ 56a:	48b9                	li	a7,14
+ 56c:	00000073          	ecall
+ 570:	8082                	ret
+
+0000000000000572 <putc>:
+ 572:	1101                	addi	sp,sp,-32
+ 574:	ec06                	sd	ra,24(sp)
+ 576:	e822                	sd	s0,16(sp)
+ 578:	1000                	addi	s0,sp,32
+ 57a:	feb407a3          	sb	a1,-17(s0)
+ 57e:	4605                	li	a2,1
+ 580:	fef40593          	addi	a1,s0,-17
+ 584:	f6fff0ef          	jal	4f2 <write>
+ 588:	60e2                	ld	ra,24(sp)
+ 58a:	6442                	ld	s0,16(sp)
+ 58c:	6105                	addi	sp,sp,32
+ 58e:	8082                	ret
+
+0000000000000590 <printint>:
+ 590:	7139                	addi	sp,sp,-64
+ 592:	fc06                	sd	ra,56(sp)
+ 594:	f822                	sd	s0,48(sp)
+ 596:	f426                	sd	s1,40(sp)
+ 598:	0080                	addi	s0,sp,64
+ 59a:	84aa                	mv	s1,a0
+ 59c:	c299                	beqz	a3,5a2 <printint+0x12>
+ 59e:	0805c963          	bltz	a1,630 <printint+0xa0>
+ 5a2:	2581                	sext.w	a1,a1
+ 5a4:	4881                	li	a7,0
+ 5a6:	fc040693          	addi	a3,s0,-64
+ 5aa:	4701                	li	a4,0
+ 5ac:	2601                	sext.w	a2,a2
+ 5ae:	00000517          	auipc	a0,0x0
+ 5b2:	55a50513          	addi	a0,a0,1370 # b08 <digits>
+ 5b6:	883a                	mv	a6,a4
+ 5b8:	2705                	addiw	a4,a4,1
+ 5ba:	02c5f7bb          	remuw	a5,a1,a2
+ 5be:	1782                	slli	a5,a5,0x20
+ 5c0:	9381                	srli	a5,a5,0x20
+ 5c2:	97aa                	add	a5,a5,a0
+ 5c4:	0007c783          	lbu	a5,0(a5)
+ 5c8:	00f68023          	sb	a5,0(a3)
+ 5cc:	0005879b          	sext.w	a5,a1
+ 5d0:	02c5d5bb          	divuw	a1,a1,a2
+ 5d4:	0685                	addi	a3,a3,1
+ 5d6:	fec7f0e3          	bgeu	a5,a2,5b6 <printint+0x26>
+ 5da:	00088c63          	beqz	a7,5f2 <printint+0x62>
+ 5de:	fd070793          	addi	a5,a4,-48
+ 5e2:	00878733          	add	a4,a5,s0
+ 5e6:	02d00793          	li	a5,45
+ 5ea:	fef70823          	sb	a5,-16(a4)
+ 5ee:	0028071b          	addiw	a4,a6,2
+ 5f2:	02e05a63          	blez	a4,626 <printint+0x96>
+ 5f6:	f04a                	sd	s2,32(sp)
+ 5f8:	ec4e                	sd	s3,24(sp)
+ 5fa:	fc040793          	addi	a5,s0,-64
+ 5fe:	00e78933          	add	s2,a5,a4
+ 602:	fff78993          	addi	s3,a5,-1
+ 606:	99ba                	add	s3,s3,a4
+ 608:	377d                	addiw	a4,a4,-1
+ 60a:	1702                	slli	a4,a4,0x20
+ 60c:	9301                	srli	a4,a4,0x20
+ 60e:	40e989b3          	sub	s3,s3,a4
+ 612:	fff94583          	lbu	a1,-1(s2)
+ 616:	8526                	mv	a0,s1
+ 618:	f5bff0ef          	jal	572 <putc>
+ 61c:	197d                	addi	s2,s2,-1
+ 61e:	ff391ae3          	bne	s2,s3,612 <printint+0x82>
+ 622:	7902                	ld	s2,32(sp)
+ 624:	69e2                	ld	s3,24(sp)
+ 626:	70e2                	ld	ra,56(sp)
+ 628:	7442                	ld	s0,48(sp)
+ 62a:	74a2                	ld	s1,40(sp)
+ 62c:	6121                	addi	sp,sp,64
+ 62e:	8082                	ret
+ 630:	40b005bb          	negw	a1,a1
+ 634:	4885                	li	a7,1
+ 636:	bf85                	j	5a6 <printint+0x16>
+
+0000000000000638 <vprintf>:
+ 638:	711d                	addi	sp,sp,-96
+ 63a:	ec86                	sd	ra,88(sp)
+ 63c:	e8a2                	sd	s0,80(sp)
+ 63e:	e0ca                	sd	s2,64(sp)
+ 640:	1080                	addi	s0,sp,96
+ 642:	0005c903          	lbu	s2,0(a1)
+ 646:	26090863          	beqz	s2,8b6 <vprintf+0x27e>
+ 64a:	e4a6                	sd	s1,72(sp)
+ 64c:	fc4e                	sd	s3,56(sp)
+ 64e:	f852                	sd	s4,48(sp)
+ 650:	f456                	sd	s5,40(sp)
+ 652:	f05a                	sd	s6,32(sp)
+ 654:	ec5e                	sd	s7,24(sp)
+ 656:	e862                	sd	s8,16(sp)
+ 658:	e466                	sd	s9,8(sp)
+ 65a:	8b2a                	mv	s6,a0
+ 65c:	8a2e                	mv	s4,a1
+ 65e:	8bb2                	mv	s7,a2
+ 660:	4981                	li	s3,0
+ 662:	4481                	li	s1,0
+ 664:	4701                	li	a4,0
+ 666:	02500a93          	li	s5,37
+ 66a:	06400c13          	li	s8,100
+ 66e:	06c00c93          	li	s9,108
+ 672:	a005                	j	692 <vprintf+0x5a>
+ 674:	85ca                	mv	a1,s2
+ 676:	855a                	mv	a0,s6
+ 678:	efbff0ef          	jal	572 <putc>
+ 67c:	a019                	j	682 <vprintf+0x4a>
+ 67e:	03598263          	beq	s3,s5,6a2 <vprintf+0x6a>
+ 682:	2485                	addiw	s1,s1,1
+ 684:	8726                	mv	a4,s1
+ 686:	009a07b3          	add	a5,s4,s1
+ 68a:	0007c903          	lbu	s2,0(a5)
+ 68e:	20090c63          	beqz	s2,8a6 <vprintf+0x26e>
+ 692:	0009079b          	sext.w	a5,s2
+ 696:	fe0994e3          	bnez	s3,67e <vprintf+0x46>
+ 69a:	fd579de3          	bne	a5,s5,674 <vprintf+0x3c>
+ 69e:	89be                	mv	s3,a5
+ 6a0:	b7cd                	j	682 <vprintf+0x4a>
+ 6a2:	00ea06b3          	add	a3,s4,a4
+ 6a6:	0016c683          	lbu	a3,1(a3)
+ 6aa:	8636                	mv	a2,a3
+ 6ac:	c681                	beqz	a3,6b4 <vprintf+0x7c>
+ 6ae:	9752                	add	a4,a4,s4
+ 6b0:	00274603          	lbu	a2,2(a4)
+ 6b4:	03878f63          	beq	a5,s8,6f2 <vprintf+0xba>
+ 6b8:	05978963          	beq	a5,s9,70a <vprintf+0xd2>
+ 6bc:	07500713          	li	a4,117
+ 6c0:	0ee78363          	beq	a5,a4,7a6 <vprintf+0x16e>
+ 6c4:	07800713          	li	a4,120
+ 6c8:	12e78563          	beq	a5,a4,7f2 <vprintf+0x1ba>
+ 6cc:	07000713          	li	a4,112
+ 6d0:	14e78a63          	beq	a5,a4,824 <vprintf+0x1ec>
+ 6d4:	07300713          	li	a4,115
+ 6d8:	18e78a63          	beq	a5,a4,86c <vprintf+0x234>
+ 6dc:	02500713          	li	a4,37
+ 6e0:	04e79563          	bne	a5,a4,72a <vprintf+0xf2>
+ 6e4:	02500593          	li	a1,37
+ 6e8:	855a                	mv	a0,s6
+ 6ea:	e89ff0ef          	jal	572 <putc>
+ 6ee:	4981                	li	s3,0
+ 6f0:	bf49                	j	682 <vprintf+0x4a>
+ 6f2:	008b8913          	addi	s2,s7,8
+ 6f6:	4685                	li	a3,1
+ 6f8:	4629                	li	a2,10
+ 6fa:	000ba583          	lw	a1,0(s7)
+ 6fe:	855a                	mv	a0,s6
+ 700:	e91ff0ef          	jal	590 <printint>
+ 704:	8bca                	mv	s7,s2
+ 706:	4981                	li	s3,0
+ 708:	bfad                	j	682 <vprintf+0x4a>
+ 70a:	06400793          	li	a5,100
+ 70e:	02f68963          	beq	a3,a5,740 <vprintf+0x108>
+ 712:	06c00793          	li	a5,108
+ 716:	04f68263          	beq	a3,a5,75a <vprintf+0x122>
+ 71a:	07500793          	li	a5,117
+ 71e:	0af68063          	beq	a3,a5,7be <vprintf+0x186>
+ 722:	07800793          	li	a5,120
+ 726:	0ef68263          	beq	a3,a5,80a <vprintf+0x1d2>
+ 72a:	02500593          	li	a1,37
+ 72e:	855a                	mv	a0,s6
+ 730:	e43ff0ef          	jal	572 <putc>
+ 734:	85ca                	mv	a1,s2
+ 736:	855a                	mv	a0,s6
+ 738:	e3bff0ef          	jal	572 <putc>
+ 73c:	4981                	li	s3,0
+ 73e:	b791                	j	682 <vprintf+0x4a>
+ 740:	008b8913          	addi	s2,s7,8
+ 744:	4685                	li	a3,1
+ 746:	4629                	li	a2,10
+ 748:	000ba583          	lw	a1,0(s7)
+ 74c:	855a                	mv	a0,s6
+ 74e:	e43ff0ef          	jal	590 <printint>
+ 752:	2485                	addiw	s1,s1,1
+ 754:	8bca                	mv	s7,s2
+ 756:	4981                	li	s3,0
+ 758:	b72d                	j	682 <vprintf+0x4a>
+ 75a:	06400793          	li	a5,100
+ 75e:	02f60763          	beq	a2,a5,78c <vprintf+0x154>
+ 762:	07500793          	li	a5,117
+ 766:	06f60963          	beq	a2,a5,7d8 <vprintf+0x1a0>
+ 76a:	07800793          	li	a5,120
+ 76e:	faf61ee3          	bne	a2,a5,72a <vprintf+0xf2>
+ 772:	008b8913          	addi	s2,s7,8
+ 776:	4681                	li	a3,0
+ 778:	4641                	li	a2,16
+ 77a:	000ba583          	lw	a1,0(s7)
+ 77e:	855a                	mv	a0,s6
+ 780:	e11ff0ef          	jal	590 <printint>
+ 784:	2489                	addiw	s1,s1,2
+ 786:	8bca                	mv	s7,s2
+ 788:	4981                	li	s3,0
+ 78a:	bde5                	j	682 <vprintf+0x4a>
+ 78c:	008b8913          	addi	s2,s7,8
+ 790:	4685                	li	a3,1
+ 792:	4629                	li	a2,10
+ 794:	000ba583          	lw	a1,0(s7)
+ 798:	855a                	mv	a0,s6
+ 79a:	df7ff0ef          	jal	590 <printint>
+ 79e:	2489                	addiw	s1,s1,2
+ 7a0:	8bca                	mv	s7,s2
+ 7a2:	4981                	li	s3,0
+ 7a4:	bdf9                	j	682 <vprintf+0x4a>
+ 7a6:	008b8913          	addi	s2,s7,8
+ 7aa:	4681                	li	a3,0
+ 7ac:	4629                	li	a2,10
+ 7ae:	000ba583          	lw	a1,0(s7)
+ 7b2:	855a                	mv	a0,s6
+ 7b4:	dddff0ef          	jal	590 <printint>
+ 7b8:	8bca                	mv	s7,s2
+ 7ba:	4981                	li	s3,0
+ 7bc:	b5d9                	j	682 <vprintf+0x4a>
+ 7be:	008b8913          	addi	s2,s7,8
+ 7c2:	4681                	li	a3,0
+ 7c4:	4629                	li	a2,10
+ 7c6:	000ba583          	lw	a1,0(s7)
+ 7ca:	855a                	mv	a0,s6
+ 7cc:	dc5ff0ef          	jal	590 <printint>
+ 7d0:	2485                	addiw	s1,s1,1
+ 7d2:	8bca                	mv	s7,s2
+ 7d4:	4981                	li	s3,0
+ 7d6:	b575                	j	682 <vprintf+0x4a>
+ 7d8:	008b8913          	addi	s2,s7,8
+ 7dc:	4681                	li	a3,0
+ 7de:	4629                	li	a2,10
+ 7e0:	000ba583          	lw	a1,0(s7)
+ 7e4:	855a                	mv	a0,s6
+ 7e6:	dabff0ef          	jal	590 <printint>
+ 7ea:	2489                	addiw	s1,s1,2
+ 7ec:	8bca                	mv	s7,s2
+ 7ee:	4981                	li	s3,0
+ 7f0:	bd49                	j	682 <vprintf+0x4a>
+ 7f2:	008b8913          	addi	s2,s7,8
+ 7f6:	4681                	li	a3,0
+ 7f8:	4641                	li	a2,16
+ 7fa:	000ba583          	lw	a1,0(s7)
+ 7fe:	855a                	mv	a0,s6
+ 800:	d91ff0ef          	jal	590 <printint>
+ 804:	8bca                	mv	s7,s2
+ 806:	4981                	li	s3,0
+ 808:	bdad                	j	682 <vprintf+0x4a>
+ 80a:	008b8913          	addi	s2,s7,8
+ 80e:	4681                	li	a3,0
+ 810:	4641                	li	a2,16
+ 812:	000ba583          	lw	a1,0(s7)
+ 816:	855a                	mv	a0,s6
+ 818:	d79ff0ef          	jal	590 <printint>
+ 81c:	2485                	addiw	s1,s1,1
+ 81e:	8bca                	mv	s7,s2
+ 820:	4981                	li	s3,0
+ 822:	b585                	j	682 <vprintf+0x4a>
+ 824:	e06a                	sd	s10,0(sp)
+ 826:	008b8d13          	addi	s10,s7,8
+ 82a:	000bb983          	ld	s3,0(s7)
+ 82e:	03000593          	li	a1,48
+ 832:	855a                	mv	a0,s6
+ 834:	d3fff0ef          	jal	572 <putc>
+ 838:	07800593          	li	a1,120
+ 83c:	855a                	mv	a0,s6
+ 83e:	d35ff0ef          	jal	572 <putc>
+ 842:	4941                	li	s2,16
+ 844:	00000b97          	auipc	s7,0x0
+ 848:	2c4b8b93          	addi	s7,s7,708 # b08 <digits>
+ 84c:	03c9d793          	srli	a5,s3,0x3c
+ 850:	97de                	add	a5,a5,s7
+ 852:	0007c583          	lbu	a1,0(a5)
+ 856:	855a                	mv	a0,s6
+ 858:	d1bff0ef          	jal	572 <putc>
+ 85c:	0992                	slli	s3,s3,0x4
+ 85e:	397d                	addiw	s2,s2,-1
+ 860:	fe0916e3          	bnez	s2,84c <vprintf+0x214>
+ 864:	8bea                	mv	s7,s10
+ 866:	4981                	li	s3,0
+ 868:	6d02                	ld	s10,0(sp)
+ 86a:	bd21                	j	682 <vprintf+0x4a>
+ 86c:	008b8993          	addi	s3,s7,8
+ 870:	000bb903          	ld	s2,0(s7)
+ 874:	00090f63          	beqz	s2,892 <vprintf+0x25a>
+ 878:	00094583          	lbu	a1,0(s2)
+ 87c:	c195                	beqz	a1,8a0 <vprintf+0x268>
+ 87e:	855a                	mv	a0,s6
+ 880:	cf3ff0ef          	jal	572 <putc>
+ 884:	0905                	addi	s2,s2,1
+ 886:	00094583          	lbu	a1,0(s2)
+ 88a:	f9f5                	bnez	a1,87e <vprintf+0x246>
+ 88c:	8bce                	mv	s7,s3
+ 88e:	4981                	li	s3,0
+ 890:	bbcd                	j	682 <vprintf+0x4a>
+ 892:	00000917          	auipc	s2,0x0
+ 896:	26e90913          	addi	s2,s2,622 # b00 <malloc+0x162>
+ 89a:	02800593          	li	a1,40
+ 89e:	b7c5                	j	87e <vprintf+0x246>
+ 8a0:	8bce                	mv	s7,s3
+ 8a2:	4981                	li	s3,0
+ 8a4:	bbf9                	j	682 <vprintf+0x4a>
+ 8a6:	64a6                	ld	s1,72(sp)
+ 8a8:	79e2                	ld	s3,56(sp)
+ 8aa:	7a42                	ld	s4,48(sp)
+ 8ac:	7aa2                	ld	s5,40(sp)
+ 8ae:	7b02                	ld	s6,32(sp)
+ 8b0:	6be2                	ld	s7,24(sp)
+ 8b2:	6c42                	ld	s8,16(sp)
+ 8b4:	6ca2                	ld	s9,8(sp)
+ 8b6:	60e6                	ld	ra,88(sp)
+ 8b8:	6446                	ld	s0,80(sp)
+ 8ba:	6906                	ld	s2,64(sp)
+ 8bc:	6125                	addi	sp,sp,96
+ 8be:	8082                	ret
+
+00000000000008c0 <fprintf>:
+ 8c0:	715d                	addi	sp,sp,-80
+ 8c2:	ec06                	sd	ra,24(sp)
+ 8c4:	e822                	sd	s0,16(sp)
+ 8c6:	1000                	addi	s0,sp,32
+ 8c8:	e010                	sd	a2,0(s0)
+ 8ca:	e414                	sd	a3,8(s0)
+ 8cc:	e818                	sd	a4,16(s0)
+ 8ce:	ec1c                	sd	a5,24(s0)
+ 8d0:	03043023          	sd	a6,32(s0)
+ 8d4:	03143423          	sd	a7,40(s0)
+ 8d8:	fe843423          	sd	s0,-24(s0)
+ 8dc:	8622                	mv	a2,s0
+ 8de:	d5bff0ef          	jal	638 <vprintf>
+ 8e2:	60e2                	ld	ra,24(sp)
+ 8e4:	6442                	ld	s0,16(sp)
+ 8e6:	6161                	addi	sp,sp,80
+ 8e8:	8082                	ret
+
+00000000000008ea <printf>:
+ 8ea:	711d                	addi	sp,sp,-96
+ 8ec:	ec06                	sd	ra,24(sp)
+ 8ee:	e822                	sd	s0,16(sp)
+ 8f0:	1000                	addi	s0,sp,32
+ 8f2:	e40c                	sd	a1,8(s0)
+ 8f4:	e810                	sd	a2,16(s0)
+ 8f6:	ec14                	sd	a3,24(s0)
+ 8f8:	f018                	sd	a4,32(s0)
+ 8fa:	f41c                	sd	a5,40(s0)
+ 8fc:	03043823          	sd	a6,48(s0)
+ 900:	03143c23          	sd	a7,56(s0)
+ 904:	00840613          	addi	a2,s0,8
+ 908:	fec43423          	sd	a2,-24(s0)
+ 90c:	85aa                	mv	a1,a0
+ 90e:	4505                	li	a0,1
+ 910:	d29ff0ef          	jal	638 <vprintf>
+ 914:	60e2                	ld	ra,24(sp)
+ 916:	6442                	ld	s0,16(sp)
+ 918:	6125                	addi	sp,sp,96
+ 91a:	8082                	ret
+
+000000000000091c <free>:
+ 91c:	1141                	addi	sp,sp,-16
+ 91e:	e422                	sd	s0,8(sp)
+ 920:	0800                	addi	s0,sp,16
+ 922:	ff050693          	addi	a3,a0,-16
+ 926:	00000797          	auipc	a5,0x0
+ 92a:	6da7b783          	ld	a5,1754(a5) # 1000 <freep>
+ 92e:	a02d                	j	958 <free+0x3c>
+ 930:	4618                	lw	a4,8(a2)
+ 932:	9f2d                	addw	a4,a4,a1
+ 934:	fee52c23          	sw	a4,-8(a0)
+ 938:	6398                	ld	a4,0(a5)
+ 93a:	6310                	ld	a2,0(a4)
+ 93c:	a83d                	j	97a <free+0x5e>
+ 93e:	ff852703          	lw	a4,-8(a0)
+ 942:	9f31                	addw	a4,a4,a2
+ 944:	c798                	sw	a4,8(a5)
+ 946:	ff053683          	ld	a3,-16(a0)
+ 94a:	a091                	j	98e <free+0x72>
+ 94c:	6398                	ld	a4,0(a5)
+ 94e:	00e7e463          	bltu	a5,a4,956 <free+0x3a>
+ 952:	00e6ea63          	bltu	a3,a4,966 <free+0x4a>
+ 956:	87ba                	mv	a5,a4
+ 958:	fed7fae3          	bgeu	a5,a3,94c <free+0x30>
+ 95c:	6398                	ld	a4,0(a5)
+ 95e:	00e6e463          	bltu	a3,a4,966 <free+0x4a>
+ 962:	fee7eae3          	bltu	a5,a4,956 <free+0x3a>
+ 966:	ff852583          	lw	a1,-8(a0)
+ 96a:	6390                	ld	a2,0(a5)
+ 96c:	02059813          	slli	a6,a1,0x20
+ 970:	01c85713          	srli	a4,a6,0x1c
+ 974:	9736                	add	a4,a4,a3
+ 976:	fae60de3          	beq	a2,a4,930 <free+0x14>
+ 97a:	fec53823          	sd	a2,-16(a0)
+ 97e:	4790                	lw	a2,8(a5)
+ 980:	02061593          	slli	a1,a2,0x20
+ 984:	01c5d713          	srli	a4,a1,0x1c
+ 988:	973e                	add	a4,a4,a5
+ 98a:	fae68ae3          	beq	a3,a4,93e <free+0x22>
+ 98e:	e394                	sd	a3,0(a5)
+ 990:	00000717          	auipc	a4,0x0
+ 994:	66f73823          	sd	a5,1648(a4) # 1000 <freep>
+ 998:	6422                	ld	s0,8(sp)
+ 99a:	0141                	addi	sp,sp,16
+ 99c:	8082                	ret
+
+000000000000099e <malloc>:
+ 99e:	7139                	addi	sp,sp,-64
+ 9a0:	fc06                	sd	ra,56(sp)
+ 9a2:	f822                	sd	s0,48(sp)
+ 9a4:	f426                	sd	s1,40(sp)
+ 9a6:	ec4e                	sd	s3,24(sp)
+ 9a8:	0080                	addi	s0,sp,64
+ 9aa:	02051493          	slli	s1,a0,0x20
+ 9ae:	9081                	srli	s1,s1,0x20
+ 9b0:	04bd                	addi	s1,s1,15
+ 9b2:	8091                	srli	s1,s1,0x4
+ 9b4:	0014899b          	addiw	s3,s1,1
+ 9b8:	0485                	addi	s1,s1,1
+ 9ba:	00000517          	auipc	a0,0x0
+ 9be:	64653503          	ld	a0,1606(a0) # 1000 <freep>
+ 9c2:	c915                	beqz	a0,9f6 <malloc+0x58>
+ 9c4:	611c                	ld	a5,0(a0)
+ 9c6:	4798                	lw	a4,8(a5)
+ 9c8:	08977a63          	bgeu	a4,s1,a5c <malloc+0xbe>
+ 9cc:	f04a                	sd	s2,32(sp)
+ 9ce:	e852                	sd	s4,16(sp)
+ 9d0:	e456                	sd	s5,8(sp)
+ 9d2:	e05a                	sd	s6,0(sp)
+ 9d4:	8a4e                	mv	s4,s3
+ 9d6:	0009871b          	sext.w	a4,s3
+ 9da:	6685                	lui	a3,0x1
+ 9dc:	00d77363          	bgeu	a4,a3,9e2 <malloc+0x44>
+ 9e0:	6a05                	lui	s4,0x1
+ 9e2:	000a0b1b          	sext.w	s6,s4
+ 9e6:	004a1a1b          	slliw	s4,s4,0x4
+ 9ea:	00000917          	auipc	s2,0x0
+ 9ee:	61690913          	addi	s2,s2,1558 # 1000 <freep>
+ 9f2:	5afd                	li	s5,-1
+ 9f4:	a081                	j	a34 <malloc+0x96>
+ 9f6:	f04a                	sd	s2,32(sp)
+ 9f8:	e852                	sd	s4,16(sp)
+ 9fa:	e456                	sd	s5,8(sp)
+ 9fc:	e05a                	sd	s6,0(sp)
+ 9fe:	00000797          	auipc	a5,0x0
+ a02:	62278793          	addi	a5,a5,1570 # 1020 <base>
+ a06:	00000717          	auipc	a4,0x0
+ a0a:	5ef73d23          	sd	a5,1530(a4) # 1000 <freep>
+ a0e:	e39c                	sd	a5,0(a5)
+ a10:	0007a423          	sw	zero,8(a5)
+ a14:	b7c1                	j	9d4 <malloc+0x36>
+ a16:	6398                	ld	a4,0(a5)
+ a18:	e118                	sd	a4,0(a0)
+ a1a:	a8a9                	j	a74 <malloc+0xd6>
+ a1c:	01652423          	sw	s6,8(a0)
+ a20:	0541                	addi	a0,a0,16
+ a22:	efbff0ef          	jal	91c <free>
+ a26:	00093503          	ld	a0,0(s2)
+ a2a:	c12d                	beqz	a0,a8c <malloc+0xee>
+ a2c:	611c                	ld	a5,0(a0)
+ a2e:	4798                	lw	a4,8(a5)
+ a30:	02977263          	bgeu	a4,s1,a54 <malloc+0xb6>
+ a34:	00093703          	ld	a4,0(s2)
+ a38:	853e                	mv	a0,a5
+ a3a:	fef719e3          	bne	a4,a5,a2c <malloc+0x8e>
+ a3e:	8552                	mv	a0,s4
+ a40:	b1bff0ef          	jal	55a <sbrk>
+ a44:	fd551ce3          	bne	a0,s5,a1c <malloc+0x7e>
+ a48:	4501                	li	a0,0
+ a4a:	7902                	ld	s2,32(sp)
+ a4c:	6a42                	ld	s4,16(sp)
+ a4e:	6aa2                	ld	s5,8(sp)
+ a50:	6b02                	ld	s6,0(sp)
+ a52:	a03d                	j	a80 <malloc+0xe2>
+ a54:	7902                	ld	s2,32(sp)
+ a56:	6a42                	ld	s4,16(sp)
+ a58:	6aa2                	ld	s5,8(sp)
+ a5a:	6b02                	ld	s6,0(sp)
+ a5c:	fae48de3          	beq	s1,a4,a16 <malloc+0x78>
+ a60:	4137073b          	subw	a4,a4,s3
+ a64:	c798                	sw	a4,8(a5)
+ a66:	02071693          	slli	a3,a4,0x20
+ a6a:	01c6d713          	srli	a4,a3,0x1c
+ a6e:	97ba                	add	a5,a5,a4
+ a70:	0137a423          	sw	s3,8(a5)
+ a74:	00000717          	auipc	a4,0x0
+ a78:	58a73623          	sd	a0,1420(a4) # 1000 <freep>
+ a7c:	01078513          	addi	a0,a5,16
+ a80:	70e2                	ld	ra,56(sp)
+ a82:	7442                	ld	s0,48(sp)
+ a84:	74a2                	ld	s1,40(sp)
+ a86:	69e2                	ld	s3,24(sp)
+ a88:	6121                	addi	sp,sp,64
+ a8a:	8082                	ret
+ a8c:	7902                	ld	s2,32(sp)
+ a8e:	6a42                	ld	s4,16(sp)
+ a90:	6aa2                	ld	s5,8(sp)
+ a92:	6b02                	ld	s6,0(sp)
+ a94:	b7f5                	j	a80 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/ls.c b/xv6-labs-2024/user/ls.c
new file mode 100644
index 0000000..39ab074
--- /dev/null
+++ b/xv6-labs-2024/user/ls.c
@@ -0,0 +1,87 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+
+char*
+fmtname(char *path)
+{
+  static char buf[DIRSIZ+1];
+  char *p;
+
+  // Find first character after last slash.
+  for(p=path+strlen(path); p >= path && *p != '/'; p--)
+    ;
+  p++;
+
+  // Return blank-padded name.
+  if(strlen(p) >= DIRSIZ)
+    return p;
+  memmove(buf, p, strlen(p));
+  memset(buf+strlen(p), ' ', DIRSIZ-strlen(p));
+  return buf;
+}
+
+void
+ls(char *path)
+{
+  char buf[512], *p;
+  int fd;
+  struct dirent de;
+  struct stat st;
+
+  if((fd = open(path, O_RDONLY)) < 0){
+    fprintf(2, "ls: cannot open %s\n", path);
+    return;
+  }
+
+  if(fstat(fd, &st) < 0){
+    fprintf(2, "ls: cannot stat %s\n", path);
+    close(fd);
+    return;
+  }
+
+  switch(st.type){
+  case T_DEVICE:
+  case T_FILE:
+    printf("%s %d %d %d\n", fmtname(path), st.type, st.ino, (int) st.size);
+    break;
+
+  case T_DIR:
+    if(strlen(path) + 1 + DIRSIZ + 1 > sizeof buf){
+      printf("ls: path too long\n");
+      break;
+    }
+    strcpy(buf, path);
+    p = buf+strlen(buf);
+    *p++ = '/';
+    while(read(fd, &de, sizeof(de)) == sizeof(de)){
+      if(de.inum == 0)
+        continue;
+      memmove(p, de.name, DIRSIZ);
+      p[DIRSIZ] = 0;
+      if(stat(buf, &st) < 0){
+        printf("ls: cannot stat %s\n", buf);
+        continue;
+      }
+      printf("%s %d %d %d\n", fmtname(buf), st.type, st.ino, (int) st.size);
+    }
+    break;
+  }
+  close(fd);
+}
+
+int
+main(int argc, char *argv[])
+{
+  int i;
+
+  if(argc < 2){
+    ls(".");
+    exit(0);
+  }
+  for(i=1; i<argc; i++)
+    ls(argv[i]);
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/ls.d b/xv6-labs-2024/user/ls.d
new file mode 100644
index 0000000..b4d3215
--- /dev/null
+++ b/xv6-labs-2024/user/ls.d
@@ -0,0 +1,2 @@
+user/ls.o: user/ls.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h kernel/fs.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/ls.o b/xv6-labs-2024/user/ls.o
new file mode 100644
index 0000000..760d081
Binary files /dev/null and b/xv6-labs-2024/user/ls.o differ
diff --git a/xv6-labs-2024/user/ls.sym b/xv6-labs-2024/user/ls.sym
new file mode 100644
index 0000000..78398f0
--- /dev/null
+++ b/xv6-labs-2024/user/ls.sym
@@ -0,0 +1,66 @@
+0000000000000000 .text
+0000000000000a98 .rodata
+0000000000000b20 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 ls.c
+0000000000001010 buf.0
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000572 putc
+0000000000000590 printint
+0000000000000b08 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001020 base
+000000000000027a strcpy
+0000000000000000 fmtname
+00000000000008ea printf
+0000000000000424 memmove
+000000000000051a mknod
+0000000000000332 gets
+0000000000000552 getpid
+00000000000004b6 memcpy
+000000000000099e malloc
+0000000000000562 sleep
+00000000000004e2 pipe
+00000000000004f2 write
+000000000000052a fstat
+00000000000008c0 fprintf
+0000000000000502 kill
+0000000000000638 vprintf
+0000000000000542 chdir
+000000000000050a exec
+00000000000004da wait
+00000000000004ea read
+0000000000000522 unlink
+000000000000047c memcmp
+00000000000004ca fork
+000000000000055a sbrk
+000000000000056a uptime
+00000000000002ec memset
+000000000000021a main
+0000000000000296 strcmp
+000000000000054a dup
+00000000000003a2 stat
+0000000000000532 link
+0000000000000098 ls
+00000000000004d2 exit
+0000000000000268 start
+00000000000003dc atoi
+00000000000002c2 strlen
+0000000000000512 open
+000000000000030e strchr
+000000000000053a mkdir
+00000000000004fa close
+000000000000091c free
diff --git a/xv6-labs-2024/user/mkdir.asm b/xv6-labs-2024/user/mkdir.asm
new file mode 100644
index 0000000..018032b
--- /dev/null
+++ b/xv6-labs-2024/user/mkdir.asm
@@ -0,0 +1,1065 @@
+
+user/_mkdir:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	1000                	addi	s0,sp,32
+   8:	4785                	li	a5,1
+   a:	02a7d763          	bge	a5,a0,38 <main+0x38>
+   e:	e426                	sd	s1,8(sp)
+  10:	e04a                	sd	s2,0(sp)
+  12:	00858493          	addi	s1,a1,8
+  16:	ffe5091b          	addiw	s2,a0,-2
+  1a:	02091793          	slli	a5,s2,0x20
+  1e:	01d7d913          	srli	s2,a5,0x1d
+  22:	05c1                	addi	a1,a1,16
+  24:	992e                	add	s2,s2,a1
+  26:	6088                	ld	a0,0(s1)
+  28:	310000ef          	jal	338 <mkdir>
+  2c:	02054263          	bltz	a0,50 <main+0x50>
+  30:	04a1                	addi	s1,s1,8
+  32:	ff249ae3          	bne	s1,s2,26 <main+0x26>
+  36:	a02d                	j	60 <main+0x60>
+  38:	e426                	sd	s1,8(sp)
+  3a:	e04a                	sd	s2,0(sp)
+  3c:	00001597          	auipc	a1,0x1
+  40:	86458593          	addi	a1,a1,-1948 # 8a0 <malloc+0x104>
+  44:	4509                	li	a0,2
+  46:	678000ef          	jal	6be <fprintf>
+  4a:	4505                	li	a0,1
+  4c:	284000ef          	jal	2d0 <exit>
+  50:	6090                	ld	a2,0(s1)
+  52:	00001597          	auipc	a1,0x1
+  56:	86658593          	addi	a1,a1,-1946 # 8b8 <malloc+0x11c>
+  5a:	4509                	li	a0,2
+  5c:	662000ef          	jal	6be <fprintf>
+  60:	4501                	li	a0,0
+  62:	26e000ef          	jal	2d0 <exit>
+
+0000000000000066 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  66:	1141                	addi	sp,sp,-16
+  68:	e406                	sd	ra,8(sp)
+  6a:	e022                	sd	s0,0(sp)
+  6c:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  6e:	f93ff0ef          	jal	0 <main>
+  exit(0);
+  72:	4501                	li	a0,0
+  74:	25c000ef          	jal	2d0 <exit>
+
+0000000000000078 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  78:	1141                	addi	sp,sp,-16
+  7a:	e422                	sd	s0,8(sp)
+  7c:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  7e:	87aa                	mv	a5,a0
+  80:	0585                	addi	a1,a1,1
+  82:	0785                	addi	a5,a5,1
+  84:	fff5c703          	lbu	a4,-1(a1)
+  88:	fee78fa3          	sb	a4,-1(a5)
+  8c:	fb75                	bnez	a4,80 <strcpy+0x8>
+    ;
+  return os;
+}
+  8e:	6422                	ld	s0,8(sp)
+  90:	0141                	addi	sp,sp,16
+  92:	8082                	ret
+
+0000000000000094 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  94:	1141                	addi	sp,sp,-16
+  96:	e422                	sd	s0,8(sp)
+  98:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  9a:	00054783          	lbu	a5,0(a0)
+  9e:	cb91                	beqz	a5,b2 <strcmp+0x1e>
+  a0:	0005c703          	lbu	a4,0(a1)
+  a4:	00f71763          	bne	a4,a5,b2 <strcmp+0x1e>
+    p++, q++;
+  a8:	0505                	addi	a0,a0,1
+  aa:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  ac:	00054783          	lbu	a5,0(a0)
+  b0:	fbe5                	bnez	a5,a0 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  b2:	0005c503          	lbu	a0,0(a1)
+}
+  b6:	40a7853b          	subw	a0,a5,a0
+  ba:	6422                	ld	s0,8(sp)
+  bc:	0141                	addi	sp,sp,16
+  be:	8082                	ret
+
+00000000000000c0 <strlen>:
+
+uint
+strlen(const char *s)
+{
+  c0:	1141                	addi	sp,sp,-16
+  c2:	e422                	sd	s0,8(sp)
+  c4:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  c6:	00054783          	lbu	a5,0(a0)
+  ca:	cf91                	beqz	a5,e6 <strlen+0x26>
+  cc:	0505                	addi	a0,a0,1
+  ce:	87aa                	mv	a5,a0
+  d0:	86be                	mv	a3,a5
+  d2:	0785                	addi	a5,a5,1
+  d4:	fff7c703          	lbu	a4,-1(a5)
+  d8:	ff65                	bnez	a4,d0 <strlen+0x10>
+  da:	40a6853b          	subw	a0,a3,a0
+  de:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  e0:	6422                	ld	s0,8(sp)
+  e2:	0141                	addi	sp,sp,16
+  e4:	8082                	ret
+  for(n = 0; s[n]; n++)
+  e6:	4501                	li	a0,0
+  e8:	bfe5                	j	e0 <strlen+0x20>
+
+00000000000000ea <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  ea:	1141                	addi	sp,sp,-16
+  ec:	e422                	sd	s0,8(sp)
+  ee:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+  f0:	ca19                	beqz	a2,106 <memset+0x1c>
+  f2:	87aa                	mv	a5,a0
+  f4:	1602                	slli	a2,a2,0x20
+  f6:	9201                	srli	a2,a2,0x20
+  f8:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+  fc:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 100:	0785                	addi	a5,a5,1
+ 102:	fee79de3          	bne	a5,a4,fc <memset+0x12>
+  }
+  return dst;
+}
+ 106:	6422                	ld	s0,8(sp)
+ 108:	0141                	addi	sp,sp,16
+ 10a:	8082                	ret
+
+000000000000010c <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 10c:	1141                	addi	sp,sp,-16
+ 10e:	e422                	sd	s0,8(sp)
+ 110:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 112:	00054783          	lbu	a5,0(a0)
+ 116:	cb99                	beqz	a5,12c <strchr+0x20>
+    if(*s == c)
+ 118:	00f58763          	beq	a1,a5,126 <strchr+0x1a>
+  for(; *s; s++)
+ 11c:	0505                	addi	a0,a0,1
+ 11e:	00054783          	lbu	a5,0(a0)
+ 122:	fbfd                	bnez	a5,118 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 124:	4501                	li	a0,0
+}
+ 126:	6422                	ld	s0,8(sp)
+ 128:	0141                	addi	sp,sp,16
+ 12a:	8082                	ret
+  return 0;
+ 12c:	4501                	li	a0,0
+ 12e:	bfe5                	j	126 <strchr+0x1a>
+
+0000000000000130 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 130:	711d                	addi	sp,sp,-96
+ 132:	ec86                	sd	ra,88(sp)
+ 134:	e8a2                	sd	s0,80(sp)
+ 136:	e4a6                	sd	s1,72(sp)
+ 138:	e0ca                	sd	s2,64(sp)
+ 13a:	fc4e                	sd	s3,56(sp)
+ 13c:	f852                	sd	s4,48(sp)
+ 13e:	f456                	sd	s5,40(sp)
+ 140:	f05a                	sd	s6,32(sp)
+ 142:	ec5e                	sd	s7,24(sp)
+ 144:	1080                	addi	s0,sp,96
+ 146:	8baa                	mv	s7,a0
+ 148:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 14a:	892a                	mv	s2,a0
+ 14c:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 14e:	4aa9                	li	s5,10
+ 150:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 152:	89a6                	mv	s3,s1
+ 154:	2485                	addiw	s1,s1,1
+ 156:	0344d663          	bge	s1,s4,182 <gets+0x52>
+    cc = read(0, &c, 1);
+ 15a:	4605                	li	a2,1
+ 15c:	faf40593          	addi	a1,s0,-81
+ 160:	4501                	li	a0,0
+ 162:	186000ef          	jal	2e8 <read>
+    if(cc < 1)
+ 166:	00a05e63          	blez	a0,182 <gets+0x52>
+    buf[i++] = c;
+ 16a:	faf44783          	lbu	a5,-81(s0)
+ 16e:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 172:	01578763          	beq	a5,s5,180 <gets+0x50>
+ 176:	0905                	addi	s2,s2,1
+ 178:	fd679de3          	bne	a5,s6,152 <gets+0x22>
+    buf[i++] = c;
+ 17c:	89a6                	mv	s3,s1
+ 17e:	a011                	j	182 <gets+0x52>
+ 180:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 182:	99de                	add	s3,s3,s7
+ 184:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 188:	855e                	mv	a0,s7
+ 18a:	60e6                	ld	ra,88(sp)
+ 18c:	6446                	ld	s0,80(sp)
+ 18e:	64a6                	ld	s1,72(sp)
+ 190:	6906                	ld	s2,64(sp)
+ 192:	79e2                	ld	s3,56(sp)
+ 194:	7a42                	ld	s4,48(sp)
+ 196:	7aa2                	ld	s5,40(sp)
+ 198:	7b02                	ld	s6,32(sp)
+ 19a:	6be2                	ld	s7,24(sp)
+ 19c:	6125                	addi	sp,sp,96
+ 19e:	8082                	ret
+
+00000000000001a0 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 1a0:	1101                	addi	sp,sp,-32
+ 1a2:	ec06                	sd	ra,24(sp)
+ 1a4:	e822                	sd	s0,16(sp)
+ 1a6:	e04a                	sd	s2,0(sp)
+ 1a8:	1000                	addi	s0,sp,32
+ 1aa:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 1ac:	4581                	li	a1,0
+ 1ae:	162000ef          	jal	310 <open>
+  if(fd < 0)
+ 1b2:	02054263          	bltz	a0,1d6 <stat+0x36>
+ 1b6:	e426                	sd	s1,8(sp)
+ 1b8:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 1ba:	85ca                	mv	a1,s2
+ 1bc:	16c000ef          	jal	328 <fstat>
+ 1c0:	892a                	mv	s2,a0
+  close(fd);
+ 1c2:	8526                	mv	a0,s1
+ 1c4:	134000ef          	jal	2f8 <close>
+  return r;
+ 1c8:	64a2                	ld	s1,8(sp)
+}
+ 1ca:	854a                	mv	a0,s2
+ 1cc:	60e2                	ld	ra,24(sp)
+ 1ce:	6442                	ld	s0,16(sp)
+ 1d0:	6902                	ld	s2,0(sp)
+ 1d2:	6105                	addi	sp,sp,32
+ 1d4:	8082                	ret
+    return -1;
+ 1d6:	597d                	li	s2,-1
+ 1d8:	bfcd                	j	1ca <stat+0x2a>
+
+00000000000001da <atoi>:
+
+int
+atoi(const char *s)
+{
+ 1da:	1141                	addi	sp,sp,-16
+ 1dc:	e422                	sd	s0,8(sp)
+ 1de:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 1e0:	00054683          	lbu	a3,0(a0)
+ 1e4:	fd06879b          	addiw	a5,a3,-48
+ 1e8:	0ff7f793          	zext.b	a5,a5
+ 1ec:	4625                	li	a2,9
+ 1ee:	02f66863          	bltu	a2,a5,21e <atoi+0x44>
+ 1f2:	872a                	mv	a4,a0
+  n = 0;
+ 1f4:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 1f6:	0705                	addi	a4,a4,1
+ 1f8:	0025179b          	slliw	a5,a0,0x2
+ 1fc:	9fa9                	addw	a5,a5,a0
+ 1fe:	0017979b          	slliw	a5,a5,0x1
+ 202:	9fb5                	addw	a5,a5,a3
+ 204:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 208:	00074683          	lbu	a3,0(a4)
+ 20c:	fd06879b          	addiw	a5,a3,-48
+ 210:	0ff7f793          	zext.b	a5,a5
+ 214:	fef671e3          	bgeu	a2,a5,1f6 <atoi+0x1c>
+  return n;
+}
+ 218:	6422                	ld	s0,8(sp)
+ 21a:	0141                	addi	sp,sp,16
+ 21c:	8082                	ret
+  n = 0;
+ 21e:	4501                	li	a0,0
+ 220:	bfe5                	j	218 <atoi+0x3e>
+
+0000000000000222 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 222:	1141                	addi	sp,sp,-16
+ 224:	e422                	sd	s0,8(sp)
+ 226:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 228:	02b57463          	bgeu	a0,a1,250 <memmove+0x2e>
+    while(n-- > 0)
+ 22c:	00c05f63          	blez	a2,24a <memmove+0x28>
+ 230:	1602                	slli	a2,a2,0x20
+ 232:	9201                	srli	a2,a2,0x20
+ 234:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 238:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 23a:	0585                	addi	a1,a1,1
+ 23c:	0705                	addi	a4,a4,1
+ 23e:	fff5c683          	lbu	a3,-1(a1)
+ 242:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 246:	fef71ae3          	bne	a4,a5,23a <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 24a:	6422                	ld	s0,8(sp)
+ 24c:	0141                	addi	sp,sp,16
+ 24e:	8082                	ret
+    dst += n;
+ 250:	00c50733          	add	a4,a0,a2
+    src += n;
+ 254:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 256:	fec05ae3          	blez	a2,24a <memmove+0x28>
+ 25a:	fff6079b          	addiw	a5,a2,-1
+ 25e:	1782                	slli	a5,a5,0x20
+ 260:	9381                	srli	a5,a5,0x20
+ 262:	fff7c793          	not	a5,a5
+ 266:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 268:	15fd                	addi	a1,a1,-1
+ 26a:	177d                	addi	a4,a4,-1
+ 26c:	0005c683          	lbu	a3,0(a1)
+ 270:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 274:	fee79ae3          	bne	a5,a4,268 <memmove+0x46>
+ 278:	bfc9                	j	24a <memmove+0x28>
+
+000000000000027a <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 27a:	1141                	addi	sp,sp,-16
+ 27c:	e422                	sd	s0,8(sp)
+ 27e:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 280:	ca05                	beqz	a2,2b0 <memcmp+0x36>
+ 282:	fff6069b          	addiw	a3,a2,-1
+ 286:	1682                	slli	a3,a3,0x20
+ 288:	9281                	srli	a3,a3,0x20
+ 28a:	0685                	addi	a3,a3,1
+ 28c:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 28e:	00054783          	lbu	a5,0(a0)
+ 292:	0005c703          	lbu	a4,0(a1)
+ 296:	00e79863          	bne	a5,a4,2a6 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 29a:	0505                	addi	a0,a0,1
+    p2++;
+ 29c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 29e:	fed518e3          	bne	a0,a3,28e <memcmp+0x14>
+  }
+  return 0;
+ 2a2:	4501                	li	a0,0
+ 2a4:	a019                	j	2aa <memcmp+0x30>
+      return *p1 - *p2;
+ 2a6:	40e7853b          	subw	a0,a5,a4
+}
+ 2aa:	6422                	ld	s0,8(sp)
+ 2ac:	0141                	addi	sp,sp,16
+ 2ae:	8082                	ret
+  return 0;
+ 2b0:	4501                	li	a0,0
+ 2b2:	bfe5                	j	2aa <memcmp+0x30>
+
+00000000000002b4 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 2b4:	1141                	addi	sp,sp,-16
+ 2b6:	e406                	sd	ra,8(sp)
+ 2b8:	e022                	sd	s0,0(sp)
+ 2ba:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 2bc:	f67ff0ef          	jal	222 <memmove>
+}
+ 2c0:	60a2                	ld	ra,8(sp)
+ 2c2:	6402                	ld	s0,0(sp)
+ 2c4:	0141                	addi	sp,sp,16
+ 2c6:	8082                	ret
+
+00000000000002c8 <fork>:
+ 2c8:	4885                	li	a7,1
+ 2ca:	00000073          	ecall
+ 2ce:	8082                	ret
+
+00000000000002d0 <exit>:
+ 2d0:	4889                	li	a7,2
+ 2d2:	00000073          	ecall
+ 2d6:	8082                	ret
+
+00000000000002d8 <wait>:
+ 2d8:	488d                	li	a7,3
+ 2da:	00000073          	ecall
+ 2de:	8082                	ret
+
+00000000000002e0 <pipe>:
+ 2e0:	4891                	li	a7,4
+ 2e2:	00000073          	ecall
+ 2e6:	8082                	ret
+
+00000000000002e8 <read>:
+ 2e8:	4895                	li	a7,5
+ 2ea:	00000073          	ecall
+ 2ee:	8082                	ret
+
+00000000000002f0 <write>:
+ 2f0:	48c1                	li	a7,16
+ 2f2:	00000073          	ecall
+ 2f6:	8082                	ret
+
+00000000000002f8 <close>:
+ 2f8:	48d5                	li	a7,21
+ 2fa:	00000073          	ecall
+ 2fe:	8082                	ret
+
+0000000000000300 <kill>:
+ 300:	4899                	li	a7,6
+ 302:	00000073          	ecall
+ 306:	8082                	ret
+
+0000000000000308 <exec>:
+ 308:	489d                	li	a7,7
+ 30a:	00000073          	ecall
+ 30e:	8082                	ret
+
+0000000000000310 <open>:
+ 310:	48bd                	li	a7,15
+ 312:	00000073          	ecall
+ 316:	8082                	ret
+
+0000000000000318 <mknod>:
+ 318:	48c5                	li	a7,17
+ 31a:	00000073          	ecall
+ 31e:	8082                	ret
+
+0000000000000320 <unlink>:
+ 320:	48c9                	li	a7,18
+ 322:	00000073          	ecall
+ 326:	8082                	ret
+
+0000000000000328 <fstat>:
+ 328:	48a1                	li	a7,8
+ 32a:	00000073          	ecall
+ 32e:	8082                	ret
+
+0000000000000330 <link>:
+ 330:	48cd                	li	a7,19
+ 332:	00000073          	ecall
+ 336:	8082                	ret
+
+0000000000000338 <mkdir>:
+ 338:	48d1                	li	a7,20
+ 33a:	00000073          	ecall
+ 33e:	8082                	ret
+
+0000000000000340 <chdir>:
+ 340:	48a5                	li	a7,9
+ 342:	00000073          	ecall
+ 346:	8082                	ret
+
+0000000000000348 <dup>:
+ 348:	48a9                	li	a7,10
+ 34a:	00000073          	ecall
+ 34e:	8082                	ret
+
+0000000000000350 <getpid>:
+ 350:	48ad                	li	a7,11
+ 352:	00000073          	ecall
+ 356:	8082                	ret
+
+0000000000000358 <sbrk>:
+ 358:	48b1                	li	a7,12
+ 35a:	00000073          	ecall
+ 35e:	8082                	ret
+
+0000000000000360 <sleep>:
+ 360:	48b5                	li	a7,13
+ 362:	00000073          	ecall
+ 366:	8082                	ret
+
+0000000000000368 <uptime>:
+ 368:	48b9                	li	a7,14
+ 36a:	00000073          	ecall
+ 36e:	8082                	ret
+
+0000000000000370 <putc>:
+ 370:	1101                	addi	sp,sp,-32
+ 372:	ec06                	sd	ra,24(sp)
+ 374:	e822                	sd	s0,16(sp)
+ 376:	1000                	addi	s0,sp,32
+ 378:	feb407a3          	sb	a1,-17(s0)
+ 37c:	4605                	li	a2,1
+ 37e:	fef40593          	addi	a1,s0,-17
+ 382:	f6fff0ef          	jal	2f0 <write>
+ 386:	60e2                	ld	ra,24(sp)
+ 388:	6442                	ld	s0,16(sp)
+ 38a:	6105                	addi	sp,sp,32
+ 38c:	8082                	ret
+
+000000000000038e <printint>:
+ 38e:	7139                	addi	sp,sp,-64
+ 390:	fc06                	sd	ra,56(sp)
+ 392:	f822                	sd	s0,48(sp)
+ 394:	f426                	sd	s1,40(sp)
+ 396:	0080                	addi	s0,sp,64
+ 398:	84aa                	mv	s1,a0
+ 39a:	c299                	beqz	a3,3a0 <printint+0x12>
+ 39c:	0805c963          	bltz	a1,42e <printint+0xa0>
+ 3a0:	2581                	sext.w	a1,a1
+ 3a2:	4881                	li	a7,0
+ 3a4:	fc040693          	addi	a3,s0,-64
+ 3a8:	4701                	li	a4,0
+ 3aa:	2601                	sext.w	a2,a2
+ 3ac:	00000517          	auipc	a0,0x0
+ 3b0:	53450513          	addi	a0,a0,1332 # 8e0 <digits>
+ 3b4:	883a                	mv	a6,a4
+ 3b6:	2705                	addiw	a4,a4,1
+ 3b8:	02c5f7bb          	remuw	a5,a1,a2
+ 3bc:	1782                	slli	a5,a5,0x20
+ 3be:	9381                	srli	a5,a5,0x20
+ 3c0:	97aa                	add	a5,a5,a0
+ 3c2:	0007c783          	lbu	a5,0(a5)
+ 3c6:	00f68023          	sb	a5,0(a3)
+ 3ca:	0005879b          	sext.w	a5,a1
+ 3ce:	02c5d5bb          	divuw	a1,a1,a2
+ 3d2:	0685                	addi	a3,a3,1
+ 3d4:	fec7f0e3          	bgeu	a5,a2,3b4 <printint+0x26>
+ 3d8:	00088c63          	beqz	a7,3f0 <printint+0x62>
+ 3dc:	fd070793          	addi	a5,a4,-48
+ 3e0:	00878733          	add	a4,a5,s0
+ 3e4:	02d00793          	li	a5,45
+ 3e8:	fef70823          	sb	a5,-16(a4)
+ 3ec:	0028071b          	addiw	a4,a6,2
+ 3f0:	02e05a63          	blez	a4,424 <printint+0x96>
+ 3f4:	f04a                	sd	s2,32(sp)
+ 3f6:	ec4e                	sd	s3,24(sp)
+ 3f8:	fc040793          	addi	a5,s0,-64
+ 3fc:	00e78933          	add	s2,a5,a4
+ 400:	fff78993          	addi	s3,a5,-1
+ 404:	99ba                	add	s3,s3,a4
+ 406:	377d                	addiw	a4,a4,-1
+ 408:	1702                	slli	a4,a4,0x20
+ 40a:	9301                	srli	a4,a4,0x20
+ 40c:	40e989b3          	sub	s3,s3,a4
+ 410:	fff94583          	lbu	a1,-1(s2)
+ 414:	8526                	mv	a0,s1
+ 416:	f5bff0ef          	jal	370 <putc>
+ 41a:	197d                	addi	s2,s2,-1
+ 41c:	ff391ae3          	bne	s2,s3,410 <printint+0x82>
+ 420:	7902                	ld	s2,32(sp)
+ 422:	69e2                	ld	s3,24(sp)
+ 424:	70e2                	ld	ra,56(sp)
+ 426:	7442                	ld	s0,48(sp)
+ 428:	74a2                	ld	s1,40(sp)
+ 42a:	6121                	addi	sp,sp,64
+ 42c:	8082                	ret
+ 42e:	40b005bb          	negw	a1,a1
+ 432:	4885                	li	a7,1
+ 434:	bf85                	j	3a4 <printint+0x16>
+
+0000000000000436 <vprintf>:
+ 436:	711d                	addi	sp,sp,-96
+ 438:	ec86                	sd	ra,88(sp)
+ 43a:	e8a2                	sd	s0,80(sp)
+ 43c:	e0ca                	sd	s2,64(sp)
+ 43e:	1080                	addi	s0,sp,96
+ 440:	0005c903          	lbu	s2,0(a1)
+ 444:	26090863          	beqz	s2,6b4 <vprintf+0x27e>
+ 448:	e4a6                	sd	s1,72(sp)
+ 44a:	fc4e                	sd	s3,56(sp)
+ 44c:	f852                	sd	s4,48(sp)
+ 44e:	f456                	sd	s5,40(sp)
+ 450:	f05a                	sd	s6,32(sp)
+ 452:	ec5e                	sd	s7,24(sp)
+ 454:	e862                	sd	s8,16(sp)
+ 456:	e466                	sd	s9,8(sp)
+ 458:	8b2a                	mv	s6,a0
+ 45a:	8a2e                	mv	s4,a1
+ 45c:	8bb2                	mv	s7,a2
+ 45e:	4981                	li	s3,0
+ 460:	4481                	li	s1,0
+ 462:	4701                	li	a4,0
+ 464:	02500a93          	li	s5,37
+ 468:	06400c13          	li	s8,100
+ 46c:	06c00c93          	li	s9,108
+ 470:	a005                	j	490 <vprintf+0x5a>
+ 472:	85ca                	mv	a1,s2
+ 474:	855a                	mv	a0,s6
+ 476:	efbff0ef          	jal	370 <putc>
+ 47a:	a019                	j	480 <vprintf+0x4a>
+ 47c:	03598263          	beq	s3,s5,4a0 <vprintf+0x6a>
+ 480:	2485                	addiw	s1,s1,1
+ 482:	8726                	mv	a4,s1
+ 484:	009a07b3          	add	a5,s4,s1
+ 488:	0007c903          	lbu	s2,0(a5)
+ 48c:	20090c63          	beqz	s2,6a4 <vprintf+0x26e>
+ 490:	0009079b          	sext.w	a5,s2
+ 494:	fe0994e3          	bnez	s3,47c <vprintf+0x46>
+ 498:	fd579de3          	bne	a5,s5,472 <vprintf+0x3c>
+ 49c:	89be                	mv	s3,a5
+ 49e:	b7cd                	j	480 <vprintf+0x4a>
+ 4a0:	00ea06b3          	add	a3,s4,a4
+ 4a4:	0016c683          	lbu	a3,1(a3)
+ 4a8:	8636                	mv	a2,a3
+ 4aa:	c681                	beqz	a3,4b2 <vprintf+0x7c>
+ 4ac:	9752                	add	a4,a4,s4
+ 4ae:	00274603          	lbu	a2,2(a4)
+ 4b2:	03878f63          	beq	a5,s8,4f0 <vprintf+0xba>
+ 4b6:	05978963          	beq	a5,s9,508 <vprintf+0xd2>
+ 4ba:	07500713          	li	a4,117
+ 4be:	0ee78363          	beq	a5,a4,5a4 <vprintf+0x16e>
+ 4c2:	07800713          	li	a4,120
+ 4c6:	12e78563          	beq	a5,a4,5f0 <vprintf+0x1ba>
+ 4ca:	07000713          	li	a4,112
+ 4ce:	14e78a63          	beq	a5,a4,622 <vprintf+0x1ec>
+ 4d2:	07300713          	li	a4,115
+ 4d6:	18e78a63          	beq	a5,a4,66a <vprintf+0x234>
+ 4da:	02500713          	li	a4,37
+ 4de:	04e79563          	bne	a5,a4,528 <vprintf+0xf2>
+ 4e2:	02500593          	li	a1,37
+ 4e6:	855a                	mv	a0,s6
+ 4e8:	e89ff0ef          	jal	370 <putc>
+ 4ec:	4981                	li	s3,0
+ 4ee:	bf49                	j	480 <vprintf+0x4a>
+ 4f0:	008b8913          	addi	s2,s7,8
+ 4f4:	4685                	li	a3,1
+ 4f6:	4629                	li	a2,10
+ 4f8:	000ba583          	lw	a1,0(s7)
+ 4fc:	855a                	mv	a0,s6
+ 4fe:	e91ff0ef          	jal	38e <printint>
+ 502:	8bca                	mv	s7,s2
+ 504:	4981                	li	s3,0
+ 506:	bfad                	j	480 <vprintf+0x4a>
+ 508:	06400793          	li	a5,100
+ 50c:	02f68963          	beq	a3,a5,53e <vprintf+0x108>
+ 510:	06c00793          	li	a5,108
+ 514:	04f68263          	beq	a3,a5,558 <vprintf+0x122>
+ 518:	07500793          	li	a5,117
+ 51c:	0af68063          	beq	a3,a5,5bc <vprintf+0x186>
+ 520:	07800793          	li	a5,120
+ 524:	0ef68263          	beq	a3,a5,608 <vprintf+0x1d2>
+ 528:	02500593          	li	a1,37
+ 52c:	855a                	mv	a0,s6
+ 52e:	e43ff0ef          	jal	370 <putc>
+ 532:	85ca                	mv	a1,s2
+ 534:	855a                	mv	a0,s6
+ 536:	e3bff0ef          	jal	370 <putc>
+ 53a:	4981                	li	s3,0
+ 53c:	b791                	j	480 <vprintf+0x4a>
+ 53e:	008b8913          	addi	s2,s7,8
+ 542:	4685                	li	a3,1
+ 544:	4629                	li	a2,10
+ 546:	000ba583          	lw	a1,0(s7)
+ 54a:	855a                	mv	a0,s6
+ 54c:	e43ff0ef          	jal	38e <printint>
+ 550:	2485                	addiw	s1,s1,1
+ 552:	8bca                	mv	s7,s2
+ 554:	4981                	li	s3,0
+ 556:	b72d                	j	480 <vprintf+0x4a>
+ 558:	06400793          	li	a5,100
+ 55c:	02f60763          	beq	a2,a5,58a <vprintf+0x154>
+ 560:	07500793          	li	a5,117
+ 564:	06f60963          	beq	a2,a5,5d6 <vprintf+0x1a0>
+ 568:	07800793          	li	a5,120
+ 56c:	faf61ee3          	bne	a2,a5,528 <vprintf+0xf2>
+ 570:	008b8913          	addi	s2,s7,8
+ 574:	4681                	li	a3,0
+ 576:	4641                	li	a2,16
+ 578:	000ba583          	lw	a1,0(s7)
+ 57c:	855a                	mv	a0,s6
+ 57e:	e11ff0ef          	jal	38e <printint>
+ 582:	2489                	addiw	s1,s1,2
+ 584:	8bca                	mv	s7,s2
+ 586:	4981                	li	s3,0
+ 588:	bde5                	j	480 <vprintf+0x4a>
+ 58a:	008b8913          	addi	s2,s7,8
+ 58e:	4685                	li	a3,1
+ 590:	4629                	li	a2,10
+ 592:	000ba583          	lw	a1,0(s7)
+ 596:	855a                	mv	a0,s6
+ 598:	df7ff0ef          	jal	38e <printint>
+ 59c:	2489                	addiw	s1,s1,2
+ 59e:	8bca                	mv	s7,s2
+ 5a0:	4981                	li	s3,0
+ 5a2:	bdf9                	j	480 <vprintf+0x4a>
+ 5a4:	008b8913          	addi	s2,s7,8
+ 5a8:	4681                	li	a3,0
+ 5aa:	4629                	li	a2,10
+ 5ac:	000ba583          	lw	a1,0(s7)
+ 5b0:	855a                	mv	a0,s6
+ 5b2:	dddff0ef          	jal	38e <printint>
+ 5b6:	8bca                	mv	s7,s2
+ 5b8:	4981                	li	s3,0
+ 5ba:	b5d9                	j	480 <vprintf+0x4a>
+ 5bc:	008b8913          	addi	s2,s7,8
+ 5c0:	4681                	li	a3,0
+ 5c2:	4629                	li	a2,10
+ 5c4:	000ba583          	lw	a1,0(s7)
+ 5c8:	855a                	mv	a0,s6
+ 5ca:	dc5ff0ef          	jal	38e <printint>
+ 5ce:	2485                	addiw	s1,s1,1
+ 5d0:	8bca                	mv	s7,s2
+ 5d2:	4981                	li	s3,0
+ 5d4:	b575                	j	480 <vprintf+0x4a>
+ 5d6:	008b8913          	addi	s2,s7,8
+ 5da:	4681                	li	a3,0
+ 5dc:	4629                	li	a2,10
+ 5de:	000ba583          	lw	a1,0(s7)
+ 5e2:	855a                	mv	a0,s6
+ 5e4:	dabff0ef          	jal	38e <printint>
+ 5e8:	2489                	addiw	s1,s1,2
+ 5ea:	8bca                	mv	s7,s2
+ 5ec:	4981                	li	s3,0
+ 5ee:	bd49                	j	480 <vprintf+0x4a>
+ 5f0:	008b8913          	addi	s2,s7,8
+ 5f4:	4681                	li	a3,0
+ 5f6:	4641                	li	a2,16
+ 5f8:	000ba583          	lw	a1,0(s7)
+ 5fc:	855a                	mv	a0,s6
+ 5fe:	d91ff0ef          	jal	38e <printint>
+ 602:	8bca                	mv	s7,s2
+ 604:	4981                	li	s3,0
+ 606:	bdad                	j	480 <vprintf+0x4a>
+ 608:	008b8913          	addi	s2,s7,8
+ 60c:	4681                	li	a3,0
+ 60e:	4641                	li	a2,16
+ 610:	000ba583          	lw	a1,0(s7)
+ 614:	855a                	mv	a0,s6
+ 616:	d79ff0ef          	jal	38e <printint>
+ 61a:	2485                	addiw	s1,s1,1
+ 61c:	8bca                	mv	s7,s2
+ 61e:	4981                	li	s3,0
+ 620:	b585                	j	480 <vprintf+0x4a>
+ 622:	e06a                	sd	s10,0(sp)
+ 624:	008b8d13          	addi	s10,s7,8
+ 628:	000bb983          	ld	s3,0(s7)
+ 62c:	03000593          	li	a1,48
+ 630:	855a                	mv	a0,s6
+ 632:	d3fff0ef          	jal	370 <putc>
+ 636:	07800593          	li	a1,120
+ 63a:	855a                	mv	a0,s6
+ 63c:	d35ff0ef          	jal	370 <putc>
+ 640:	4941                	li	s2,16
+ 642:	00000b97          	auipc	s7,0x0
+ 646:	29eb8b93          	addi	s7,s7,670 # 8e0 <digits>
+ 64a:	03c9d793          	srli	a5,s3,0x3c
+ 64e:	97de                	add	a5,a5,s7
+ 650:	0007c583          	lbu	a1,0(a5)
+ 654:	855a                	mv	a0,s6
+ 656:	d1bff0ef          	jal	370 <putc>
+ 65a:	0992                	slli	s3,s3,0x4
+ 65c:	397d                	addiw	s2,s2,-1
+ 65e:	fe0916e3          	bnez	s2,64a <vprintf+0x214>
+ 662:	8bea                	mv	s7,s10
+ 664:	4981                	li	s3,0
+ 666:	6d02                	ld	s10,0(sp)
+ 668:	bd21                	j	480 <vprintf+0x4a>
+ 66a:	008b8993          	addi	s3,s7,8
+ 66e:	000bb903          	ld	s2,0(s7)
+ 672:	00090f63          	beqz	s2,690 <vprintf+0x25a>
+ 676:	00094583          	lbu	a1,0(s2)
+ 67a:	c195                	beqz	a1,69e <vprintf+0x268>
+ 67c:	855a                	mv	a0,s6
+ 67e:	cf3ff0ef          	jal	370 <putc>
+ 682:	0905                	addi	s2,s2,1
+ 684:	00094583          	lbu	a1,0(s2)
+ 688:	f9f5                	bnez	a1,67c <vprintf+0x246>
+ 68a:	8bce                	mv	s7,s3
+ 68c:	4981                	li	s3,0
+ 68e:	bbcd                	j	480 <vprintf+0x4a>
+ 690:	00000917          	auipc	s2,0x0
+ 694:	24890913          	addi	s2,s2,584 # 8d8 <malloc+0x13c>
+ 698:	02800593          	li	a1,40
+ 69c:	b7c5                	j	67c <vprintf+0x246>
+ 69e:	8bce                	mv	s7,s3
+ 6a0:	4981                	li	s3,0
+ 6a2:	bbf9                	j	480 <vprintf+0x4a>
+ 6a4:	64a6                	ld	s1,72(sp)
+ 6a6:	79e2                	ld	s3,56(sp)
+ 6a8:	7a42                	ld	s4,48(sp)
+ 6aa:	7aa2                	ld	s5,40(sp)
+ 6ac:	7b02                	ld	s6,32(sp)
+ 6ae:	6be2                	ld	s7,24(sp)
+ 6b0:	6c42                	ld	s8,16(sp)
+ 6b2:	6ca2                	ld	s9,8(sp)
+ 6b4:	60e6                	ld	ra,88(sp)
+ 6b6:	6446                	ld	s0,80(sp)
+ 6b8:	6906                	ld	s2,64(sp)
+ 6ba:	6125                	addi	sp,sp,96
+ 6bc:	8082                	ret
+
+00000000000006be <fprintf>:
+ 6be:	715d                	addi	sp,sp,-80
+ 6c0:	ec06                	sd	ra,24(sp)
+ 6c2:	e822                	sd	s0,16(sp)
+ 6c4:	1000                	addi	s0,sp,32
+ 6c6:	e010                	sd	a2,0(s0)
+ 6c8:	e414                	sd	a3,8(s0)
+ 6ca:	e818                	sd	a4,16(s0)
+ 6cc:	ec1c                	sd	a5,24(s0)
+ 6ce:	03043023          	sd	a6,32(s0)
+ 6d2:	03143423          	sd	a7,40(s0)
+ 6d6:	fe843423          	sd	s0,-24(s0)
+ 6da:	8622                	mv	a2,s0
+ 6dc:	d5bff0ef          	jal	436 <vprintf>
+ 6e0:	60e2                	ld	ra,24(sp)
+ 6e2:	6442                	ld	s0,16(sp)
+ 6e4:	6161                	addi	sp,sp,80
+ 6e6:	8082                	ret
+
+00000000000006e8 <printf>:
+ 6e8:	711d                	addi	sp,sp,-96
+ 6ea:	ec06                	sd	ra,24(sp)
+ 6ec:	e822                	sd	s0,16(sp)
+ 6ee:	1000                	addi	s0,sp,32
+ 6f0:	e40c                	sd	a1,8(s0)
+ 6f2:	e810                	sd	a2,16(s0)
+ 6f4:	ec14                	sd	a3,24(s0)
+ 6f6:	f018                	sd	a4,32(s0)
+ 6f8:	f41c                	sd	a5,40(s0)
+ 6fa:	03043823          	sd	a6,48(s0)
+ 6fe:	03143c23          	sd	a7,56(s0)
+ 702:	00840613          	addi	a2,s0,8
+ 706:	fec43423          	sd	a2,-24(s0)
+ 70a:	85aa                	mv	a1,a0
+ 70c:	4505                	li	a0,1
+ 70e:	d29ff0ef          	jal	436 <vprintf>
+ 712:	60e2                	ld	ra,24(sp)
+ 714:	6442                	ld	s0,16(sp)
+ 716:	6125                	addi	sp,sp,96
+ 718:	8082                	ret
+
+000000000000071a <free>:
+ 71a:	1141                	addi	sp,sp,-16
+ 71c:	e422                	sd	s0,8(sp)
+ 71e:	0800                	addi	s0,sp,16
+ 720:	ff050693          	addi	a3,a0,-16
+ 724:	00001797          	auipc	a5,0x1
+ 728:	8dc7b783          	ld	a5,-1828(a5) # 1000 <freep>
+ 72c:	a02d                	j	756 <free+0x3c>
+ 72e:	4618                	lw	a4,8(a2)
+ 730:	9f2d                	addw	a4,a4,a1
+ 732:	fee52c23          	sw	a4,-8(a0)
+ 736:	6398                	ld	a4,0(a5)
+ 738:	6310                	ld	a2,0(a4)
+ 73a:	a83d                	j	778 <free+0x5e>
+ 73c:	ff852703          	lw	a4,-8(a0)
+ 740:	9f31                	addw	a4,a4,a2
+ 742:	c798                	sw	a4,8(a5)
+ 744:	ff053683          	ld	a3,-16(a0)
+ 748:	a091                	j	78c <free+0x72>
+ 74a:	6398                	ld	a4,0(a5)
+ 74c:	00e7e463          	bltu	a5,a4,754 <free+0x3a>
+ 750:	00e6ea63          	bltu	a3,a4,764 <free+0x4a>
+ 754:	87ba                	mv	a5,a4
+ 756:	fed7fae3          	bgeu	a5,a3,74a <free+0x30>
+ 75a:	6398                	ld	a4,0(a5)
+ 75c:	00e6e463          	bltu	a3,a4,764 <free+0x4a>
+ 760:	fee7eae3          	bltu	a5,a4,754 <free+0x3a>
+ 764:	ff852583          	lw	a1,-8(a0)
+ 768:	6390                	ld	a2,0(a5)
+ 76a:	02059813          	slli	a6,a1,0x20
+ 76e:	01c85713          	srli	a4,a6,0x1c
+ 772:	9736                	add	a4,a4,a3
+ 774:	fae60de3          	beq	a2,a4,72e <free+0x14>
+ 778:	fec53823          	sd	a2,-16(a0)
+ 77c:	4790                	lw	a2,8(a5)
+ 77e:	02061593          	slli	a1,a2,0x20
+ 782:	01c5d713          	srli	a4,a1,0x1c
+ 786:	973e                	add	a4,a4,a5
+ 788:	fae68ae3          	beq	a3,a4,73c <free+0x22>
+ 78c:	e394                	sd	a3,0(a5)
+ 78e:	00001717          	auipc	a4,0x1
+ 792:	86f73923          	sd	a5,-1934(a4) # 1000 <freep>
+ 796:	6422                	ld	s0,8(sp)
+ 798:	0141                	addi	sp,sp,16
+ 79a:	8082                	ret
+
+000000000000079c <malloc>:
+ 79c:	7139                	addi	sp,sp,-64
+ 79e:	fc06                	sd	ra,56(sp)
+ 7a0:	f822                	sd	s0,48(sp)
+ 7a2:	f426                	sd	s1,40(sp)
+ 7a4:	ec4e                	sd	s3,24(sp)
+ 7a6:	0080                	addi	s0,sp,64
+ 7a8:	02051493          	slli	s1,a0,0x20
+ 7ac:	9081                	srli	s1,s1,0x20
+ 7ae:	04bd                	addi	s1,s1,15
+ 7b0:	8091                	srli	s1,s1,0x4
+ 7b2:	0014899b          	addiw	s3,s1,1
+ 7b6:	0485                	addi	s1,s1,1
+ 7b8:	00001517          	auipc	a0,0x1
+ 7bc:	84853503          	ld	a0,-1976(a0) # 1000 <freep>
+ 7c0:	c915                	beqz	a0,7f4 <malloc+0x58>
+ 7c2:	611c                	ld	a5,0(a0)
+ 7c4:	4798                	lw	a4,8(a5)
+ 7c6:	08977a63          	bgeu	a4,s1,85a <malloc+0xbe>
+ 7ca:	f04a                	sd	s2,32(sp)
+ 7cc:	e852                	sd	s4,16(sp)
+ 7ce:	e456                	sd	s5,8(sp)
+ 7d0:	e05a                	sd	s6,0(sp)
+ 7d2:	8a4e                	mv	s4,s3
+ 7d4:	0009871b          	sext.w	a4,s3
+ 7d8:	6685                	lui	a3,0x1
+ 7da:	00d77363          	bgeu	a4,a3,7e0 <malloc+0x44>
+ 7de:	6a05                	lui	s4,0x1
+ 7e0:	000a0b1b          	sext.w	s6,s4
+ 7e4:	004a1a1b          	slliw	s4,s4,0x4
+ 7e8:	00001917          	auipc	s2,0x1
+ 7ec:	81890913          	addi	s2,s2,-2024 # 1000 <freep>
+ 7f0:	5afd                	li	s5,-1
+ 7f2:	a081                	j	832 <malloc+0x96>
+ 7f4:	f04a                	sd	s2,32(sp)
+ 7f6:	e852                	sd	s4,16(sp)
+ 7f8:	e456                	sd	s5,8(sp)
+ 7fa:	e05a                	sd	s6,0(sp)
+ 7fc:	00001797          	auipc	a5,0x1
+ 800:	81478793          	addi	a5,a5,-2028 # 1010 <base>
+ 804:	00000717          	auipc	a4,0x0
+ 808:	7ef73e23          	sd	a5,2044(a4) # 1000 <freep>
+ 80c:	e39c                	sd	a5,0(a5)
+ 80e:	0007a423          	sw	zero,8(a5)
+ 812:	b7c1                	j	7d2 <malloc+0x36>
+ 814:	6398                	ld	a4,0(a5)
+ 816:	e118                	sd	a4,0(a0)
+ 818:	a8a9                	j	872 <malloc+0xd6>
+ 81a:	01652423          	sw	s6,8(a0)
+ 81e:	0541                	addi	a0,a0,16
+ 820:	efbff0ef          	jal	71a <free>
+ 824:	00093503          	ld	a0,0(s2)
+ 828:	c12d                	beqz	a0,88a <malloc+0xee>
+ 82a:	611c                	ld	a5,0(a0)
+ 82c:	4798                	lw	a4,8(a5)
+ 82e:	02977263          	bgeu	a4,s1,852 <malloc+0xb6>
+ 832:	00093703          	ld	a4,0(s2)
+ 836:	853e                	mv	a0,a5
+ 838:	fef719e3          	bne	a4,a5,82a <malloc+0x8e>
+ 83c:	8552                	mv	a0,s4
+ 83e:	b1bff0ef          	jal	358 <sbrk>
+ 842:	fd551ce3          	bne	a0,s5,81a <malloc+0x7e>
+ 846:	4501                	li	a0,0
+ 848:	7902                	ld	s2,32(sp)
+ 84a:	6a42                	ld	s4,16(sp)
+ 84c:	6aa2                	ld	s5,8(sp)
+ 84e:	6b02                	ld	s6,0(sp)
+ 850:	a03d                	j	87e <malloc+0xe2>
+ 852:	7902                	ld	s2,32(sp)
+ 854:	6a42                	ld	s4,16(sp)
+ 856:	6aa2                	ld	s5,8(sp)
+ 858:	6b02                	ld	s6,0(sp)
+ 85a:	fae48de3          	beq	s1,a4,814 <malloc+0x78>
+ 85e:	4137073b          	subw	a4,a4,s3
+ 862:	c798                	sw	a4,8(a5)
+ 864:	02071693          	slli	a3,a4,0x20
+ 868:	01c6d713          	srli	a4,a3,0x1c
+ 86c:	97ba                	add	a5,a5,a4
+ 86e:	0137a423          	sw	s3,8(a5)
+ 872:	00000717          	auipc	a4,0x0
+ 876:	78a73723          	sd	a0,1934(a4) # 1000 <freep>
+ 87a:	01078513          	addi	a0,a5,16
+ 87e:	70e2                	ld	ra,56(sp)
+ 880:	7442                	ld	s0,48(sp)
+ 882:	74a2                	ld	s1,40(sp)
+ 884:	69e2                	ld	s3,24(sp)
+ 886:	6121                	addi	sp,sp,64
+ 888:	8082                	ret
+ 88a:	7902                	ld	s2,32(sp)
+ 88c:	6a42                	ld	s4,16(sp)
+ 88e:	6aa2                	ld	s5,8(sp)
+ 890:	6b02                	ld	s6,0(sp)
+ 892:	b7f5                	j	87e <malloc+0xe2>
diff --git a/xv6-labs-2024/user/mkdir.c b/xv6-labs-2024/user/mkdir.c
new file mode 100644
index 0000000..c2b31c1
--- /dev/null
+++ b/xv6-labs-2024/user/mkdir.c
@@ -0,0 +1,23 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char *argv[])
+{
+  int i;
+
+  if(argc < 2){
+    fprintf(2, "Usage: mkdir files...\n");
+    exit(1);
+  }
+
+  for(i = 1; i < argc; i++){
+    if(mkdir(argv[i]) < 0){
+      fprintf(2, "mkdir: %s failed to create\n", argv[i]);
+      break;
+    }
+  }
+
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/mkdir.d b/xv6-labs-2024/user/mkdir.d
new file mode 100644
index 0000000..6adcdb1
--- /dev/null
+++ b/xv6-labs-2024/user/mkdir.d
@@ -0,0 +1,2 @@
+user/mkdir.o: user/mkdir.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/mkdir.o b/xv6-labs-2024/user/mkdir.o
new file mode 100644
index 0000000..58a06da
Binary files /dev/null and b/xv6-labs-2024/user/mkdir.o differ
diff --git a/xv6-labs-2024/user/mkdir.sym b/xv6-labs-2024/user/mkdir.sym
new file mode 100644
index 0000000..fd72e4a
--- /dev/null
+++ b/xv6-labs-2024/user/mkdir.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000898 .rodata
+00000000000008f8 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 mkdir.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000370 putc
+000000000000038e printint
+00000000000008e0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000078 strcpy
+00000000000006e8 printf
+0000000000000222 memmove
+0000000000000318 mknod
+0000000000000130 gets
+0000000000000350 getpid
+00000000000002b4 memcpy
+000000000000079c malloc
+0000000000000360 sleep
+00000000000002e0 pipe
+00000000000002f0 write
+0000000000000328 fstat
+00000000000006be fprintf
+0000000000000300 kill
+0000000000000436 vprintf
+0000000000000340 chdir
+0000000000000308 exec
+00000000000002d8 wait
+00000000000002e8 read
+0000000000000320 unlink
+000000000000027a memcmp
+00000000000002c8 fork
+0000000000000358 sbrk
+0000000000000368 uptime
+00000000000000ea memset
+0000000000000000 main
+0000000000000094 strcmp
+0000000000000348 dup
+00000000000001a0 stat
+0000000000000330 link
+00000000000002d0 exit
+0000000000000066 start
+00000000000001da atoi
+00000000000000c0 strlen
+0000000000000310 open
+000000000000010c strchr
+0000000000000338 mkdir
+00000000000002f8 close
+000000000000071a free
diff --git a/xv6-labs-2024/user/pingpong.asm b/xv6-labs-2024/user/pingpong.asm
new file mode 100644
index 0000000..1ba52dc
--- /dev/null
+++ b/xv6-labs-2024/user/pingpong.asm
@@ -0,0 +1,1105 @@
+
+user/_pingpong:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	7139                	addi	sp,sp,-64
+   2:	fc06                	sd	ra,56(sp)
+   4:	f822                	sd	s0,48(sp)
+   6:	f426                	sd	s1,40(sp)
+   8:	0080                	addi	s0,sp,64
+   a:	fd840513          	addi	a0,s0,-40
+   e:	372000ef          	jal	380 <pipe>
+  12:	84aa                	mv	s1,a0
+  14:	fd040513          	addi	a0,s0,-48
+  18:	368000ef          	jal	380 <pipe>
+  1c:	57fd                	li	a5,-1
+  1e:	00f48463          	beq	s1,a5,26 <main+0x26>
+  22:	00f51b63          	bne	a0,a5,38 <main+0x38>
+  26:	00001517          	auipc	a0,0x1
+  2a:	91a50513          	addi	a0,a0,-1766 # 940 <malloc+0x104>
+  2e:	75a000ef          	jal	788 <printf>
+  32:	4505                	li	a0,1
+  34:	33c000ef          	jal	370 <exit>
+  38:	330000ef          	jal	368 <fork>
+  3c:	04054d63          	bltz	a0,96 <main+0x96>
+  40:	e525                	bnez	a0,a8 <main+0xa8>
+  42:	fdc42503          	lw	a0,-36(s0)
+  46:	352000ef          	jal	398 <close>
+  4a:	4605                	li	a2,1
+  4c:	fcf40593          	addi	a1,s0,-49
+  50:	fd842503          	lw	a0,-40(s0)
+  54:	334000ef          	jal	388 <read>
+  58:	398000ef          	jal	3f0 <getpid>
+  5c:	85aa                	mv	a1,a0
+  5e:	00001517          	auipc	a0,0x1
+  62:	95a50513          	addi	a0,a0,-1702 # 9b8 <malloc+0x17c>
+  66:	722000ef          	jal	788 <printf>
+  6a:	fd842503          	lw	a0,-40(s0)
+  6e:	32a000ef          	jal	398 <close>
+  72:	fd042503          	lw	a0,-48(s0)
+  76:	322000ef          	jal	398 <close>
+  7a:	4605                	li	a2,1
+  7c:	fcf40593          	addi	a1,s0,-49
+  80:	fd442503          	lw	a0,-44(s0)
+  84:	30c000ef          	jal	390 <write>
+  88:	fd442503          	lw	a0,-44(s0)
+  8c:	30c000ef          	jal	398 <close>
+  90:	4501                	li	a0,0
+  92:	2de000ef          	jal	370 <exit>
+  96:	00001517          	auipc	a0,0x1
+  9a:	8ea50513          	addi	a0,a0,-1814 # 980 <malloc+0x144>
+  9e:	6ea000ef          	jal	788 <printf>
+  a2:	4505                	li	a0,1
+  a4:	2cc000ef          	jal	370 <exit>
+  a8:	05400793          	li	a5,84
+  ac:	fcf407a3          	sb	a5,-49(s0)
+  b0:	fd842503          	lw	a0,-40(s0)
+  b4:	2e4000ef          	jal	398 <close>
+  b8:	4605                	li	a2,1
+  ba:	fcf40593          	addi	a1,s0,-49
+  be:	fdc42503          	lw	a0,-36(s0)
+  c2:	2ce000ef          	jal	390 <write>
+  c6:	fdc42503          	lw	a0,-36(s0)
+  ca:	2ce000ef          	jal	398 <close>
+  ce:	fd442503          	lw	a0,-44(s0)
+  d2:	2c6000ef          	jal	398 <close>
+  d6:	4605                	li	a2,1
+  d8:	fcf40593          	addi	a1,s0,-49
+  dc:	fd042503          	lw	a0,-48(s0)
+  e0:	2a8000ef          	jal	388 <read>
+  e4:	30c000ef          	jal	3f0 <getpid>
+  e8:	85aa                	mv	a1,a0
+  ea:	00001517          	auipc	a0,0x1
+  ee:	8e650513          	addi	a0,a0,-1818 # 9d0 <malloc+0x194>
+  f2:	696000ef          	jal	788 <printf>
+  f6:	fd042503          	lw	a0,-48(s0)
+  fa:	29e000ef          	jal	398 <close>
+  fe:	4501                	li	a0,0
+ 100:	278000ef          	jal	378 <wait>
+ 104:	b771                	j	90 <main+0x90>
+
+0000000000000106 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 106:	1141                	addi	sp,sp,-16
+ 108:	e406                	sd	ra,8(sp)
+ 10a:	e022                	sd	s0,0(sp)
+ 10c:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 10e:	ef3ff0ef          	jal	0 <main>
+  exit(0);
+ 112:	4501                	li	a0,0
+ 114:	25c000ef          	jal	370 <exit>
+
+0000000000000118 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 118:	1141                	addi	sp,sp,-16
+ 11a:	e422                	sd	s0,8(sp)
+ 11c:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 11e:	87aa                	mv	a5,a0
+ 120:	0585                	addi	a1,a1,1
+ 122:	0785                	addi	a5,a5,1
+ 124:	fff5c703          	lbu	a4,-1(a1)
+ 128:	fee78fa3          	sb	a4,-1(a5)
+ 12c:	fb75                	bnez	a4,120 <strcpy+0x8>
+    ;
+  return os;
+}
+ 12e:	6422                	ld	s0,8(sp)
+ 130:	0141                	addi	sp,sp,16
+ 132:	8082                	ret
+
+0000000000000134 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 134:	1141                	addi	sp,sp,-16
+ 136:	e422                	sd	s0,8(sp)
+ 138:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 13a:	00054783          	lbu	a5,0(a0)
+ 13e:	cb91                	beqz	a5,152 <strcmp+0x1e>
+ 140:	0005c703          	lbu	a4,0(a1)
+ 144:	00f71763          	bne	a4,a5,152 <strcmp+0x1e>
+    p++, q++;
+ 148:	0505                	addi	a0,a0,1
+ 14a:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 14c:	00054783          	lbu	a5,0(a0)
+ 150:	fbe5                	bnez	a5,140 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 152:	0005c503          	lbu	a0,0(a1)
+}
+ 156:	40a7853b          	subw	a0,a5,a0
+ 15a:	6422                	ld	s0,8(sp)
+ 15c:	0141                	addi	sp,sp,16
+ 15e:	8082                	ret
+
+0000000000000160 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 160:	1141                	addi	sp,sp,-16
+ 162:	e422                	sd	s0,8(sp)
+ 164:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 166:	00054783          	lbu	a5,0(a0)
+ 16a:	cf91                	beqz	a5,186 <strlen+0x26>
+ 16c:	0505                	addi	a0,a0,1
+ 16e:	87aa                	mv	a5,a0
+ 170:	86be                	mv	a3,a5
+ 172:	0785                	addi	a5,a5,1
+ 174:	fff7c703          	lbu	a4,-1(a5)
+ 178:	ff65                	bnez	a4,170 <strlen+0x10>
+ 17a:	40a6853b          	subw	a0,a3,a0
+ 17e:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 180:	6422                	ld	s0,8(sp)
+ 182:	0141                	addi	sp,sp,16
+ 184:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 186:	4501                	li	a0,0
+ 188:	bfe5                	j	180 <strlen+0x20>
+
+000000000000018a <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 18a:	1141                	addi	sp,sp,-16
+ 18c:	e422                	sd	s0,8(sp)
+ 18e:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 190:	ca19                	beqz	a2,1a6 <memset+0x1c>
+ 192:	87aa                	mv	a5,a0
+ 194:	1602                	slli	a2,a2,0x20
+ 196:	9201                	srli	a2,a2,0x20
+ 198:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 19c:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 1a0:	0785                	addi	a5,a5,1
+ 1a2:	fee79de3          	bne	a5,a4,19c <memset+0x12>
+  }
+  return dst;
+}
+ 1a6:	6422                	ld	s0,8(sp)
+ 1a8:	0141                	addi	sp,sp,16
+ 1aa:	8082                	ret
+
+00000000000001ac <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 1ac:	1141                	addi	sp,sp,-16
+ 1ae:	e422                	sd	s0,8(sp)
+ 1b0:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 1b2:	00054783          	lbu	a5,0(a0)
+ 1b6:	cb99                	beqz	a5,1cc <strchr+0x20>
+    if(*s == c)
+ 1b8:	00f58763          	beq	a1,a5,1c6 <strchr+0x1a>
+  for(; *s; s++)
+ 1bc:	0505                	addi	a0,a0,1
+ 1be:	00054783          	lbu	a5,0(a0)
+ 1c2:	fbfd                	bnez	a5,1b8 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 1c4:	4501                	li	a0,0
+}
+ 1c6:	6422                	ld	s0,8(sp)
+ 1c8:	0141                	addi	sp,sp,16
+ 1ca:	8082                	ret
+  return 0;
+ 1cc:	4501                	li	a0,0
+ 1ce:	bfe5                	j	1c6 <strchr+0x1a>
+
+00000000000001d0 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 1d0:	711d                	addi	sp,sp,-96
+ 1d2:	ec86                	sd	ra,88(sp)
+ 1d4:	e8a2                	sd	s0,80(sp)
+ 1d6:	e4a6                	sd	s1,72(sp)
+ 1d8:	e0ca                	sd	s2,64(sp)
+ 1da:	fc4e                	sd	s3,56(sp)
+ 1dc:	f852                	sd	s4,48(sp)
+ 1de:	f456                	sd	s5,40(sp)
+ 1e0:	f05a                	sd	s6,32(sp)
+ 1e2:	ec5e                	sd	s7,24(sp)
+ 1e4:	1080                	addi	s0,sp,96
+ 1e6:	8baa                	mv	s7,a0
+ 1e8:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 1ea:	892a                	mv	s2,a0
+ 1ec:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 1ee:	4aa9                	li	s5,10
+ 1f0:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 1f2:	89a6                	mv	s3,s1
+ 1f4:	2485                	addiw	s1,s1,1
+ 1f6:	0344d663          	bge	s1,s4,222 <gets+0x52>
+    cc = read(0, &c, 1);
+ 1fa:	4605                	li	a2,1
+ 1fc:	faf40593          	addi	a1,s0,-81
+ 200:	4501                	li	a0,0
+ 202:	186000ef          	jal	388 <read>
+    if(cc < 1)
+ 206:	00a05e63          	blez	a0,222 <gets+0x52>
+    buf[i++] = c;
+ 20a:	faf44783          	lbu	a5,-81(s0)
+ 20e:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 212:	01578763          	beq	a5,s5,220 <gets+0x50>
+ 216:	0905                	addi	s2,s2,1
+ 218:	fd679de3          	bne	a5,s6,1f2 <gets+0x22>
+    buf[i++] = c;
+ 21c:	89a6                	mv	s3,s1
+ 21e:	a011                	j	222 <gets+0x52>
+ 220:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 222:	99de                	add	s3,s3,s7
+ 224:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 228:	855e                	mv	a0,s7
+ 22a:	60e6                	ld	ra,88(sp)
+ 22c:	6446                	ld	s0,80(sp)
+ 22e:	64a6                	ld	s1,72(sp)
+ 230:	6906                	ld	s2,64(sp)
+ 232:	79e2                	ld	s3,56(sp)
+ 234:	7a42                	ld	s4,48(sp)
+ 236:	7aa2                	ld	s5,40(sp)
+ 238:	7b02                	ld	s6,32(sp)
+ 23a:	6be2                	ld	s7,24(sp)
+ 23c:	6125                	addi	sp,sp,96
+ 23e:	8082                	ret
+
+0000000000000240 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 240:	1101                	addi	sp,sp,-32
+ 242:	ec06                	sd	ra,24(sp)
+ 244:	e822                	sd	s0,16(sp)
+ 246:	e04a                	sd	s2,0(sp)
+ 248:	1000                	addi	s0,sp,32
+ 24a:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 24c:	4581                	li	a1,0
+ 24e:	162000ef          	jal	3b0 <open>
+  if(fd < 0)
+ 252:	02054263          	bltz	a0,276 <stat+0x36>
+ 256:	e426                	sd	s1,8(sp)
+ 258:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 25a:	85ca                	mv	a1,s2
+ 25c:	16c000ef          	jal	3c8 <fstat>
+ 260:	892a                	mv	s2,a0
+  close(fd);
+ 262:	8526                	mv	a0,s1
+ 264:	134000ef          	jal	398 <close>
+  return r;
+ 268:	64a2                	ld	s1,8(sp)
+}
+ 26a:	854a                	mv	a0,s2
+ 26c:	60e2                	ld	ra,24(sp)
+ 26e:	6442                	ld	s0,16(sp)
+ 270:	6902                	ld	s2,0(sp)
+ 272:	6105                	addi	sp,sp,32
+ 274:	8082                	ret
+    return -1;
+ 276:	597d                	li	s2,-1
+ 278:	bfcd                	j	26a <stat+0x2a>
+
+000000000000027a <atoi>:
+
+int
+atoi(const char *s)
+{
+ 27a:	1141                	addi	sp,sp,-16
+ 27c:	e422                	sd	s0,8(sp)
+ 27e:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 280:	00054683          	lbu	a3,0(a0)
+ 284:	fd06879b          	addiw	a5,a3,-48
+ 288:	0ff7f793          	zext.b	a5,a5
+ 28c:	4625                	li	a2,9
+ 28e:	02f66863          	bltu	a2,a5,2be <atoi+0x44>
+ 292:	872a                	mv	a4,a0
+  n = 0;
+ 294:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 296:	0705                	addi	a4,a4,1
+ 298:	0025179b          	slliw	a5,a0,0x2
+ 29c:	9fa9                	addw	a5,a5,a0
+ 29e:	0017979b          	slliw	a5,a5,0x1
+ 2a2:	9fb5                	addw	a5,a5,a3
+ 2a4:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 2a8:	00074683          	lbu	a3,0(a4)
+ 2ac:	fd06879b          	addiw	a5,a3,-48
+ 2b0:	0ff7f793          	zext.b	a5,a5
+ 2b4:	fef671e3          	bgeu	a2,a5,296 <atoi+0x1c>
+  return n;
+}
+ 2b8:	6422                	ld	s0,8(sp)
+ 2ba:	0141                	addi	sp,sp,16
+ 2bc:	8082                	ret
+  n = 0;
+ 2be:	4501                	li	a0,0
+ 2c0:	bfe5                	j	2b8 <atoi+0x3e>
+
+00000000000002c2 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 2c2:	1141                	addi	sp,sp,-16
+ 2c4:	e422                	sd	s0,8(sp)
+ 2c6:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 2c8:	02b57463          	bgeu	a0,a1,2f0 <memmove+0x2e>
+    while(n-- > 0)
+ 2cc:	00c05f63          	blez	a2,2ea <memmove+0x28>
+ 2d0:	1602                	slli	a2,a2,0x20
+ 2d2:	9201                	srli	a2,a2,0x20
+ 2d4:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 2d8:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 2da:	0585                	addi	a1,a1,1
+ 2dc:	0705                	addi	a4,a4,1
+ 2de:	fff5c683          	lbu	a3,-1(a1)
+ 2e2:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 2e6:	fef71ae3          	bne	a4,a5,2da <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2ea:	6422                	ld	s0,8(sp)
+ 2ec:	0141                	addi	sp,sp,16
+ 2ee:	8082                	ret
+    dst += n;
+ 2f0:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2f4:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2f6:	fec05ae3          	blez	a2,2ea <memmove+0x28>
+ 2fa:	fff6079b          	addiw	a5,a2,-1
+ 2fe:	1782                	slli	a5,a5,0x20
+ 300:	9381                	srli	a5,a5,0x20
+ 302:	fff7c793          	not	a5,a5
+ 306:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 308:	15fd                	addi	a1,a1,-1
+ 30a:	177d                	addi	a4,a4,-1
+ 30c:	0005c683          	lbu	a3,0(a1)
+ 310:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 314:	fee79ae3          	bne	a5,a4,308 <memmove+0x46>
+ 318:	bfc9                	j	2ea <memmove+0x28>
+
+000000000000031a <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 31a:	1141                	addi	sp,sp,-16
+ 31c:	e422                	sd	s0,8(sp)
+ 31e:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 320:	ca05                	beqz	a2,350 <memcmp+0x36>
+ 322:	fff6069b          	addiw	a3,a2,-1
+ 326:	1682                	slli	a3,a3,0x20
+ 328:	9281                	srli	a3,a3,0x20
+ 32a:	0685                	addi	a3,a3,1
+ 32c:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 32e:	00054783          	lbu	a5,0(a0)
+ 332:	0005c703          	lbu	a4,0(a1)
+ 336:	00e79863          	bne	a5,a4,346 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 33a:	0505                	addi	a0,a0,1
+    p2++;
+ 33c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 33e:	fed518e3          	bne	a0,a3,32e <memcmp+0x14>
+  }
+  return 0;
+ 342:	4501                	li	a0,0
+ 344:	a019                	j	34a <memcmp+0x30>
+      return *p1 - *p2;
+ 346:	40e7853b          	subw	a0,a5,a4
+}
+ 34a:	6422                	ld	s0,8(sp)
+ 34c:	0141                	addi	sp,sp,16
+ 34e:	8082                	ret
+  return 0;
+ 350:	4501                	li	a0,0
+ 352:	bfe5                	j	34a <memcmp+0x30>
+
+0000000000000354 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 354:	1141                	addi	sp,sp,-16
+ 356:	e406                	sd	ra,8(sp)
+ 358:	e022                	sd	s0,0(sp)
+ 35a:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 35c:	f67ff0ef          	jal	2c2 <memmove>
+}
+ 360:	60a2                	ld	ra,8(sp)
+ 362:	6402                	ld	s0,0(sp)
+ 364:	0141                	addi	sp,sp,16
+ 366:	8082                	ret
+
+0000000000000368 <fork>:
+ 368:	4885                	li	a7,1
+ 36a:	00000073          	ecall
+ 36e:	8082                	ret
+
+0000000000000370 <exit>:
+ 370:	4889                	li	a7,2
+ 372:	00000073          	ecall
+ 376:	8082                	ret
+
+0000000000000378 <wait>:
+ 378:	488d                	li	a7,3
+ 37a:	00000073          	ecall
+ 37e:	8082                	ret
+
+0000000000000380 <pipe>:
+ 380:	4891                	li	a7,4
+ 382:	00000073          	ecall
+ 386:	8082                	ret
+
+0000000000000388 <read>:
+ 388:	4895                	li	a7,5
+ 38a:	00000073          	ecall
+ 38e:	8082                	ret
+
+0000000000000390 <write>:
+ 390:	48c1                	li	a7,16
+ 392:	00000073          	ecall
+ 396:	8082                	ret
+
+0000000000000398 <close>:
+ 398:	48d5                	li	a7,21
+ 39a:	00000073          	ecall
+ 39e:	8082                	ret
+
+00000000000003a0 <kill>:
+ 3a0:	4899                	li	a7,6
+ 3a2:	00000073          	ecall
+ 3a6:	8082                	ret
+
+00000000000003a8 <exec>:
+ 3a8:	489d                	li	a7,7
+ 3aa:	00000073          	ecall
+ 3ae:	8082                	ret
+
+00000000000003b0 <open>:
+ 3b0:	48bd                	li	a7,15
+ 3b2:	00000073          	ecall
+ 3b6:	8082                	ret
+
+00000000000003b8 <mknod>:
+ 3b8:	48c5                	li	a7,17
+ 3ba:	00000073          	ecall
+ 3be:	8082                	ret
+
+00000000000003c0 <unlink>:
+ 3c0:	48c9                	li	a7,18
+ 3c2:	00000073          	ecall
+ 3c6:	8082                	ret
+
+00000000000003c8 <fstat>:
+ 3c8:	48a1                	li	a7,8
+ 3ca:	00000073          	ecall
+ 3ce:	8082                	ret
+
+00000000000003d0 <link>:
+ 3d0:	48cd                	li	a7,19
+ 3d2:	00000073          	ecall
+ 3d6:	8082                	ret
+
+00000000000003d8 <mkdir>:
+ 3d8:	48d1                	li	a7,20
+ 3da:	00000073          	ecall
+ 3de:	8082                	ret
+
+00000000000003e0 <chdir>:
+ 3e0:	48a5                	li	a7,9
+ 3e2:	00000073          	ecall
+ 3e6:	8082                	ret
+
+00000000000003e8 <dup>:
+ 3e8:	48a9                	li	a7,10
+ 3ea:	00000073          	ecall
+ 3ee:	8082                	ret
+
+00000000000003f0 <getpid>:
+ 3f0:	48ad                	li	a7,11
+ 3f2:	00000073          	ecall
+ 3f6:	8082                	ret
+
+00000000000003f8 <sbrk>:
+ 3f8:	48b1                	li	a7,12
+ 3fa:	00000073          	ecall
+ 3fe:	8082                	ret
+
+0000000000000400 <sleep>:
+ 400:	48b5                	li	a7,13
+ 402:	00000073          	ecall
+ 406:	8082                	ret
+
+0000000000000408 <uptime>:
+ 408:	48b9                	li	a7,14
+ 40a:	00000073          	ecall
+ 40e:	8082                	ret
+
+0000000000000410 <putc>:
+ 410:	1101                	addi	sp,sp,-32
+ 412:	ec06                	sd	ra,24(sp)
+ 414:	e822                	sd	s0,16(sp)
+ 416:	1000                	addi	s0,sp,32
+ 418:	feb407a3          	sb	a1,-17(s0)
+ 41c:	4605                	li	a2,1
+ 41e:	fef40593          	addi	a1,s0,-17
+ 422:	f6fff0ef          	jal	390 <write>
+ 426:	60e2                	ld	ra,24(sp)
+ 428:	6442                	ld	s0,16(sp)
+ 42a:	6105                	addi	sp,sp,32
+ 42c:	8082                	ret
+
+000000000000042e <printint>:
+ 42e:	7139                	addi	sp,sp,-64
+ 430:	fc06                	sd	ra,56(sp)
+ 432:	f822                	sd	s0,48(sp)
+ 434:	f426                	sd	s1,40(sp)
+ 436:	0080                	addi	s0,sp,64
+ 438:	84aa                	mv	s1,a0
+ 43a:	c299                	beqz	a3,440 <printint+0x12>
+ 43c:	0805c963          	bltz	a1,4ce <printint+0xa0>
+ 440:	2581                	sext.w	a1,a1
+ 442:	4881                	li	a7,0
+ 444:	fc040693          	addi	a3,s0,-64
+ 448:	4701                	li	a4,0
+ 44a:	2601                	sext.w	a2,a2
+ 44c:	00000517          	auipc	a0,0x0
+ 450:	5a450513          	addi	a0,a0,1444 # 9f0 <digits>
+ 454:	883a                	mv	a6,a4
+ 456:	2705                	addiw	a4,a4,1
+ 458:	02c5f7bb          	remuw	a5,a1,a2
+ 45c:	1782                	slli	a5,a5,0x20
+ 45e:	9381                	srli	a5,a5,0x20
+ 460:	97aa                	add	a5,a5,a0
+ 462:	0007c783          	lbu	a5,0(a5)
+ 466:	00f68023          	sb	a5,0(a3)
+ 46a:	0005879b          	sext.w	a5,a1
+ 46e:	02c5d5bb          	divuw	a1,a1,a2
+ 472:	0685                	addi	a3,a3,1
+ 474:	fec7f0e3          	bgeu	a5,a2,454 <printint+0x26>
+ 478:	00088c63          	beqz	a7,490 <printint+0x62>
+ 47c:	fd070793          	addi	a5,a4,-48
+ 480:	00878733          	add	a4,a5,s0
+ 484:	02d00793          	li	a5,45
+ 488:	fef70823          	sb	a5,-16(a4)
+ 48c:	0028071b          	addiw	a4,a6,2
+ 490:	02e05a63          	blez	a4,4c4 <printint+0x96>
+ 494:	f04a                	sd	s2,32(sp)
+ 496:	ec4e                	sd	s3,24(sp)
+ 498:	fc040793          	addi	a5,s0,-64
+ 49c:	00e78933          	add	s2,a5,a4
+ 4a0:	fff78993          	addi	s3,a5,-1
+ 4a4:	99ba                	add	s3,s3,a4
+ 4a6:	377d                	addiw	a4,a4,-1
+ 4a8:	1702                	slli	a4,a4,0x20
+ 4aa:	9301                	srli	a4,a4,0x20
+ 4ac:	40e989b3          	sub	s3,s3,a4
+ 4b0:	fff94583          	lbu	a1,-1(s2)
+ 4b4:	8526                	mv	a0,s1
+ 4b6:	f5bff0ef          	jal	410 <putc>
+ 4ba:	197d                	addi	s2,s2,-1
+ 4bc:	ff391ae3          	bne	s2,s3,4b0 <printint+0x82>
+ 4c0:	7902                	ld	s2,32(sp)
+ 4c2:	69e2                	ld	s3,24(sp)
+ 4c4:	70e2                	ld	ra,56(sp)
+ 4c6:	7442                	ld	s0,48(sp)
+ 4c8:	74a2                	ld	s1,40(sp)
+ 4ca:	6121                	addi	sp,sp,64
+ 4cc:	8082                	ret
+ 4ce:	40b005bb          	negw	a1,a1
+ 4d2:	4885                	li	a7,1
+ 4d4:	bf85                	j	444 <printint+0x16>
+
+00000000000004d6 <vprintf>:
+ 4d6:	711d                	addi	sp,sp,-96
+ 4d8:	ec86                	sd	ra,88(sp)
+ 4da:	e8a2                	sd	s0,80(sp)
+ 4dc:	e0ca                	sd	s2,64(sp)
+ 4de:	1080                	addi	s0,sp,96
+ 4e0:	0005c903          	lbu	s2,0(a1)
+ 4e4:	26090863          	beqz	s2,754 <vprintf+0x27e>
+ 4e8:	e4a6                	sd	s1,72(sp)
+ 4ea:	fc4e                	sd	s3,56(sp)
+ 4ec:	f852                	sd	s4,48(sp)
+ 4ee:	f456                	sd	s5,40(sp)
+ 4f0:	f05a                	sd	s6,32(sp)
+ 4f2:	ec5e                	sd	s7,24(sp)
+ 4f4:	e862                	sd	s8,16(sp)
+ 4f6:	e466                	sd	s9,8(sp)
+ 4f8:	8b2a                	mv	s6,a0
+ 4fa:	8a2e                	mv	s4,a1
+ 4fc:	8bb2                	mv	s7,a2
+ 4fe:	4981                	li	s3,0
+ 500:	4481                	li	s1,0
+ 502:	4701                	li	a4,0
+ 504:	02500a93          	li	s5,37
+ 508:	06400c13          	li	s8,100
+ 50c:	06c00c93          	li	s9,108
+ 510:	a005                	j	530 <vprintf+0x5a>
+ 512:	85ca                	mv	a1,s2
+ 514:	855a                	mv	a0,s6
+ 516:	efbff0ef          	jal	410 <putc>
+ 51a:	a019                	j	520 <vprintf+0x4a>
+ 51c:	03598263          	beq	s3,s5,540 <vprintf+0x6a>
+ 520:	2485                	addiw	s1,s1,1
+ 522:	8726                	mv	a4,s1
+ 524:	009a07b3          	add	a5,s4,s1
+ 528:	0007c903          	lbu	s2,0(a5)
+ 52c:	20090c63          	beqz	s2,744 <vprintf+0x26e>
+ 530:	0009079b          	sext.w	a5,s2
+ 534:	fe0994e3          	bnez	s3,51c <vprintf+0x46>
+ 538:	fd579de3          	bne	a5,s5,512 <vprintf+0x3c>
+ 53c:	89be                	mv	s3,a5
+ 53e:	b7cd                	j	520 <vprintf+0x4a>
+ 540:	00ea06b3          	add	a3,s4,a4
+ 544:	0016c683          	lbu	a3,1(a3)
+ 548:	8636                	mv	a2,a3
+ 54a:	c681                	beqz	a3,552 <vprintf+0x7c>
+ 54c:	9752                	add	a4,a4,s4
+ 54e:	00274603          	lbu	a2,2(a4)
+ 552:	03878f63          	beq	a5,s8,590 <vprintf+0xba>
+ 556:	05978963          	beq	a5,s9,5a8 <vprintf+0xd2>
+ 55a:	07500713          	li	a4,117
+ 55e:	0ee78363          	beq	a5,a4,644 <vprintf+0x16e>
+ 562:	07800713          	li	a4,120
+ 566:	12e78563          	beq	a5,a4,690 <vprintf+0x1ba>
+ 56a:	07000713          	li	a4,112
+ 56e:	14e78a63          	beq	a5,a4,6c2 <vprintf+0x1ec>
+ 572:	07300713          	li	a4,115
+ 576:	18e78a63          	beq	a5,a4,70a <vprintf+0x234>
+ 57a:	02500713          	li	a4,37
+ 57e:	04e79563          	bne	a5,a4,5c8 <vprintf+0xf2>
+ 582:	02500593          	li	a1,37
+ 586:	855a                	mv	a0,s6
+ 588:	e89ff0ef          	jal	410 <putc>
+ 58c:	4981                	li	s3,0
+ 58e:	bf49                	j	520 <vprintf+0x4a>
+ 590:	008b8913          	addi	s2,s7,8
+ 594:	4685                	li	a3,1
+ 596:	4629                	li	a2,10
+ 598:	000ba583          	lw	a1,0(s7)
+ 59c:	855a                	mv	a0,s6
+ 59e:	e91ff0ef          	jal	42e <printint>
+ 5a2:	8bca                	mv	s7,s2
+ 5a4:	4981                	li	s3,0
+ 5a6:	bfad                	j	520 <vprintf+0x4a>
+ 5a8:	06400793          	li	a5,100
+ 5ac:	02f68963          	beq	a3,a5,5de <vprintf+0x108>
+ 5b0:	06c00793          	li	a5,108
+ 5b4:	04f68263          	beq	a3,a5,5f8 <vprintf+0x122>
+ 5b8:	07500793          	li	a5,117
+ 5bc:	0af68063          	beq	a3,a5,65c <vprintf+0x186>
+ 5c0:	07800793          	li	a5,120
+ 5c4:	0ef68263          	beq	a3,a5,6a8 <vprintf+0x1d2>
+ 5c8:	02500593          	li	a1,37
+ 5cc:	855a                	mv	a0,s6
+ 5ce:	e43ff0ef          	jal	410 <putc>
+ 5d2:	85ca                	mv	a1,s2
+ 5d4:	855a                	mv	a0,s6
+ 5d6:	e3bff0ef          	jal	410 <putc>
+ 5da:	4981                	li	s3,0
+ 5dc:	b791                	j	520 <vprintf+0x4a>
+ 5de:	008b8913          	addi	s2,s7,8
+ 5e2:	4685                	li	a3,1
+ 5e4:	4629                	li	a2,10
+ 5e6:	000ba583          	lw	a1,0(s7)
+ 5ea:	855a                	mv	a0,s6
+ 5ec:	e43ff0ef          	jal	42e <printint>
+ 5f0:	2485                	addiw	s1,s1,1
+ 5f2:	8bca                	mv	s7,s2
+ 5f4:	4981                	li	s3,0
+ 5f6:	b72d                	j	520 <vprintf+0x4a>
+ 5f8:	06400793          	li	a5,100
+ 5fc:	02f60763          	beq	a2,a5,62a <vprintf+0x154>
+ 600:	07500793          	li	a5,117
+ 604:	06f60963          	beq	a2,a5,676 <vprintf+0x1a0>
+ 608:	07800793          	li	a5,120
+ 60c:	faf61ee3          	bne	a2,a5,5c8 <vprintf+0xf2>
+ 610:	008b8913          	addi	s2,s7,8
+ 614:	4681                	li	a3,0
+ 616:	4641                	li	a2,16
+ 618:	000ba583          	lw	a1,0(s7)
+ 61c:	855a                	mv	a0,s6
+ 61e:	e11ff0ef          	jal	42e <printint>
+ 622:	2489                	addiw	s1,s1,2
+ 624:	8bca                	mv	s7,s2
+ 626:	4981                	li	s3,0
+ 628:	bde5                	j	520 <vprintf+0x4a>
+ 62a:	008b8913          	addi	s2,s7,8
+ 62e:	4685                	li	a3,1
+ 630:	4629                	li	a2,10
+ 632:	000ba583          	lw	a1,0(s7)
+ 636:	855a                	mv	a0,s6
+ 638:	df7ff0ef          	jal	42e <printint>
+ 63c:	2489                	addiw	s1,s1,2
+ 63e:	8bca                	mv	s7,s2
+ 640:	4981                	li	s3,0
+ 642:	bdf9                	j	520 <vprintf+0x4a>
+ 644:	008b8913          	addi	s2,s7,8
+ 648:	4681                	li	a3,0
+ 64a:	4629                	li	a2,10
+ 64c:	000ba583          	lw	a1,0(s7)
+ 650:	855a                	mv	a0,s6
+ 652:	dddff0ef          	jal	42e <printint>
+ 656:	8bca                	mv	s7,s2
+ 658:	4981                	li	s3,0
+ 65a:	b5d9                	j	520 <vprintf+0x4a>
+ 65c:	008b8913          	addi	s2,s7,8
+ 660:	4681                	li	a3,0
+ 662:	4629                	li	a2,10
+ 664:	000ba583          	lw	a1,0(s7)
+ 668:	855a                	mv	a0,s6
+ 66a:	dc5ff0ef          	jal	42e <printint>
+ 66e:	2485                	addiw	s1,s1,1
+ 670:	8bca                	mv	s7,s2
+ 672:	4981                	li	s3,0
+ 674:	b575                	j	520 <vprintf+0x4a>
+ 676:	008b8913          	addi	s2,s7,8
+ 67a:	4681                	li	a3,0
+ 67c:	4629                	li	a2,10
+ 67e:	000ba583          	lw	a1,0(s7)
+ 682:	855a                	mv	a0,s6
+ 684:	dabff0ef          	jal	42e <printint>
+ 688:	2489                	addiw	s1,s1,2
+ 68a:	8bca                	mv	s7,s2
+ 68c:	4981                	li	s3,0
+ 68e:	bd49                	j	520 <vprintf+0x4a>
+ 690:	008b8913          	addi	s2,s7,8
+ 694:	4681                	li	a3,0
+ 696:	4641                	li	a2,16
+ 698:	000ba583          	lw	a1,0(s7)
+ 69c:	855a                	mv	a0,s6
+ 69e:	d91ff0ef          	jal	42e <printint>
+ 6a2:	8bca                	mv	s7,s2
+ 6a4:	4981                	li	s3,0
+ 6a6:	bdad                	j	520 <vprintf+0x4a>
+ 6a8:	008b8913          	addi	s2,s7,8
+ 6ac:	4681                	li	a3,0
+ 6ae:	4641                	li	a2,16
+ 6b0:	000ba583          	lw	a1,0(s7)
+ 6b4:	855a                	mv	a0,s6
+ 6b6:	d79ff0ef          	jal	42e <printint>
+ 6ba:	2485                	addiw	s1,s1,1
+ 6bc:	8bca                	mv	s7,s2
+ 6be:	4981                	li	s3,0
+ 6c0:	b585                	j	520 <vprintf+0x4a>
+ 6c2:	e06a                	sd	s10,0(sp)
+ 6c4:	008b8d13          	addi	s10,s7,8
+ 6c8:	000bb983          	ld	s3,0(s7)
+ 6cc:	03000593          	li	a1,48
+ 6d0:	855a                	mv	a0,s6
+ 6d2:	d3fff0ef          	jal	410 <putc>
+ 6d6:	07800593          	li	a1,120
+ 6da:	855a                	mv	a0,s6
+ 6dc:	d35ff0ef          	jal	410 <putc>
+ 6e0:	4941                	li	s2,16
+ 6e2:	00000b97          	auipc	s7,0x0
+ 6e6:	30eb8b93          	addi	s7,s7,782 # 9f0 <digits>
+ 6ea:	03c9d793          	srli	a5,s3,0x3c
+ 6ee:	97de                	add	a5,a5,s7
+ 6f0:	0007c583          	lbu	a1,0(a5)
+ 6f4:	855a                	mv	a0,s6
+ 6f6:	d1bff0ef          	jal	410 <putc>
+ 6fa:	0992                	slli	s3,s3,0x4
+ 6fc:	397d                	addiw	s2,s2,-1
+ 6fe:	fe0916e3          	bnez	s2,6ea <vprintf+0x214>
+ 702:	8bea                	mv	s7,s10
+ 704:	4981                	li	s3,0
+ 706:	6d02                	ld	s10,0(sp)
+ 708:	bd21                	j	520 <vprintf+0x4a>
+ 70a:	008b8993          	addi	s3,s7,8
+ 70e:	000bb903          	ld	s2,0(s7)
+ 712:	00090f63          	beqz	s2,730 <vprintf+0x25a>
+ 716:	00094583          	lbu	a1,0(s2)
+ 71a:	c195                	beqz	a1,73e <vprintf+0x268>
+ 71c:	855a                	mv	a0,s6
+ 71e:	cf3ff0ef          	jal	410 <putc>
+ 722:	0905                	addi	s2,s2,1
+ 724:	00094583          	lbu	a1,0(s2)
+ 728:	f9f5                	bnez	a1,71c <vprintf+0x246>
+ 72a:	8bce                	mv	s7,s3
+ 72c:	4981                	li	s3,0
+ 72e:	bbcd                	j	520 <vprintf+0x4a>
+ 730:	00000917          	auipc	s2,0x0
+ 734:	2b890913          	addi	s2,s2,696 # 9e8 <malloc+0x1ac>
+ 738:	02800593          	li	a1,40
+ 73c:	b7c5                	j	71c <vprintf+0x246>
+ 73e:	8bce                	mv	s7,s3
+ 740:	4981                	li	s3,0
+ 742:	bbf9                	j	520 <vprintf+0x4a>
+ 744:	64a6                	ld	s1,72(sp)
+ 746:	79e2                	ld	s3,56(sp)
+ 748:	7a42                	ld	s4,48(sp)
+ 74a:	7aa2                	ld	s5,40(sp)
+ 74c:	7b02                	ld	s6,32(sp)
+ 74e:	6be2                	ld	s7,24(sp)
+ 750:	6c42                	ld	s8,16(sp)
+ 752:	6ca2                	ld	s9,8(sp)
+ 754:	60e6                	ld	ra,88(sp)
+ 756:	6446                	ld	s0,80(sp)
+ 758:	6906                	ld	s2,64(sp)
+ 75a:	6125                	addi	sp,sp,96
+ 75c:	8082                	ret
+
+000000000000075e <fprintf>:
+ 75e:	715d                	addi	sp,sp,-80
+ 760:	ec06                	sd	ra,24(sp)
+ 762:	e822                	sd	s0,16(sp)
+ 764:	1000                	addi	s0,sp,32
+ 766:	e010                	sd	a2,0(s0)
+ 768:	e414                	sd	a3,8(s0)
+ 76a:	e818                	sd	a4,16(s0)
+ 76c:	ec1c                	sd	a5,24(s0)
+ 76e:	03043023          	sd	a6,32(s0)
+ 772:	03143423          	sd	a7,40(s0)
+ 776:	fe843423          	sd	s0,-24(s0)
+ 77a:	8622                	mv	a2,s0
+ 77c:	d5bff0ef          	jal	4d6 <vprintf>
+ 780:	60e2                	ld	ra,24(sp)
+ 782:	6442                	ld	s0,16(sp)
+ 784:	6161                	addi	sp,sp,80
+ 786:	8082                	ret
+
+0000000000000788 <printf>:
+ 788:	711d                	addi	sp,sp,-96
+ 78a:	ec06                	sd	ra,24(sp)
+ 78c:	e822                	sd	s0,16(sp)
+ 78e:	1000                	addi	s0,sp,32
+ 790:	e40c                	sd	a1,8(s0)
+ 792:	e810                	sd	a2,16(s0)
+ 794:	ec14                	sd	a3,24(s0)
+ 796:	f018                	sd	a4,32(s0)
+ 798:	f41c                	sd	a5,40(s0)
+ 79a:	03043823          	sd	a6,48(s0)
+ 79e:	03143c23          	sd	a7,56(s0)
+ 7a2:	00840613          	addi	a2,s0,8
+ 7a6:	fec43423          	sd	a2,-24(s0)
+ 7aa:	85aa                	mv	a1,a0
+ 7ac:	4505                	li	a0,1
+ 7ae:	d29ff0ef          	jal	4d6 <vprintf>
+ 7b2:	60e2                	ld	ra,24(sp)
+ 7b4:	6442                	ld	s0,16(sp)
+ 7b6:	6125                	addi	sp,sp,96
+ 7b8:	8082                	ret
+
+00000000000007ba <free>:
+ 7ba:	1141                	addi	sp,sp,-16
+ 7bc:	e422                	sd	s0,8(sp)
+ 7be:	0800                	addi	s0,sp,16
+ 7c0:	ff050693          	addi	a3,a0,-16
+ 7c4:	00001797          	auipc	a5,0x1
+ 7c8:	83c7b783          	ld	a5,-1988(a5) # 1000 <freep>
+ 7cc:	a02d                	j	7f6 <free+0x3c>
+ 7ce:	4618                	lw	a4,8(a2)
+ 7d0:	9f2d                	addw	a4,a4,a1
+ 7d2:	fee52c23          	sw	a4,-8(a0)
+ 7d6:	6398                	ld	a4,0(a5)
+ 7d8:	6310                	ld	a2,0(a4)
+ 7da:	a83d                	j	818 <free+0x5e>
+ 7dc:	ff852703          	lw	a4,-8(a0)
+ 7e0:	9f31                	addw	a4,a4,a2
+ 7e2:	c798                	sw	a4,8(a5)
+ 7e4:	ff053683          	ld	a3,-16(a0)
+ 7e8:	a091                	j	82c <free+0x72>
+ 7ea:	6398                	ld	a4,0(a5)
+ 7ec:	00e7e463          	bltu	a5,a4,7f4 <free+0x3a>
+ 7f0:	00e6ea63          	bltu	a3,a4,804 <free+0x4a>
+ 7f4:	87ba                	mv	a5,a4
+ 7f6:	fed7fae3          	bgeu	a5,a3,7ea <free+0x30>
+ 7fa:	6398                	ld	a4,0(a5)
+ 7fc:	00e6e463          	bltu	a3,a4,804 <free+0x4a>
+ 800:	fee7eae3          	bltu	a5,a4,7f4 <free+0x3a>
+ 804:	ff852583          	lw	a1,-8(a0)
+ 808:	6390                	ld	a2,0(a5)
+ 80a:	02059813          	slli	a6,a1,0x20
+ 80e:	01c85713          	srli	a4,a6,0x1c
+ 812:	9736                	add	a4,a4,a3
+ 814:	fae60de3          	beq	a2,a4,7ce <free+0x14>
+ 818:	fec53823          	sd	a2,-16(a0)
+ 81c:	4790                	lw	a2,8(a5)
+ 81e:	02061593          	slli	a1,a2,0x20
+ 822:	01c5d713          	srli	a4,a1,0x1c
+ 826:	973e                	add	a4,a4,a5
+ 828:	fae68ae3          	beq	a3,a4,7dc <free+0x22>
+ 82c:	e394                	sd	a3,0(a5)
+ 82e:	00000717          	auipc	a4,0x0
+ 832:	7cf73923          	sd	a5,2002(a4) # 1000 <freep>
+ 836:	6422                	ld	s0,8(sp)
+ 838:	0141                	addi	sp,sp,16
+ 83a:	8082                	ret
+
+000000000000083c <malloc>:
+ 83c:	7139                	addi	sp,sp,-64
+ 83e:	fc06                	sd	ra,56(sp)
+ 840:	f822                	sd	s0,48(sp)
+ 842:	f426                	sd	s1,40(sp)
+ 844:	ec4e                	sd	s3,24(sp)
+ 846:	0080                	addi	s0,sp,64
+ 848:	02051493          	slli	s1,a0,0x20
+ 84c:	9081                	srli	s1,s1,0x20
+ 84e:	04bd                	addi	s1,s1,15
+ 850:	8091                	srli	s1,s1,0x4
+ 852:	0014899b          	addiw	s3,s1,1
+ 856:	0485                	addi	s1,s1,1
+ 858:	00000517          	auipc	a0,0x0
+ 85c:	7a853503          	ld	a0,1960(a0) # 1000 <freep>
+ 860:	c915                	beqz	a0,894 <malloc+0x58>
+ 862:	611c                	ld	a5,0(a0)
+ 864:	4798                	lw	a4,8(a5)
+ 866:	08977a63          	bgeu	a4,s1,8fa <malloc+0xbe>
+ 86a:	f04a                	sd	s2,32(sp)
+ 86c:	e852                	sd	s4,16(sp)
+ 86e:	e456                	sd	s5,8(sp)
+ 870:	e05a                	sd	s6,0(sp)
+ 872:	8a4e                	mv	s4,s3
+ 874:	0009871b          	sext.w	a4,s3
+ 878:	6685                	lui	a3,0x1
+ 87a:	00d77363          	bgeu	a4,a3,880 <malloc+0x44>
+ 87e:	6a05                	lui	s4,0x1
+ 880:	000a0b1b          	sext.w	s6,s4
+ 884:	004a1a1b          	slliw	s4,s4,0x4
+ 888:	00000917          	auipc	s2,0x0
+ 88c:	77890913          	addi	s2,s2,1912 # 1000 <freep>
+ 890:	5afd                	li	s5,-1
+ 892:	a081                	j	8d2 <malloc+0x96>
+ 894:	f04a                	sd	s2,32(sp)
+ 896:	e852                	sd	s4,16(sp)
+ 898:	e456                	sd	s5,8(sp)
+ 89a:	e05a                	sd	s6,0(sp)
+ 89c:	00000797          	auipc	a5,0x0
+ 8a0:	77478793          	addi	a5,a5,1908 # 1010 <base>
+ 8a4:	00000717          	auipc	a4,0x0
+ 8a8:	74f73e23          	sd	a5,1884(a4) # 1000 <freep>
+ 8ac:	e39c                	sd	a5,0(a5)
+ 8ae:	0007a423          	sw	zero,8(a5)
+ 8b2:	b7c1                	j	872 <malloc+0x36>
+ 8b4:	6398                	ld	a4,0(a5)
+ 8b6:	e118                	sd	a4,0(a0)
+ 8b8:	a8a9                	j	912 <malloc+0xd6>
+ 8ba:	01652423          	sw	s6,8(a0)
+ 8be:	0541                	addi	a0,a0,16
+ 8c0:	efbff0ef          	jal	7ba <free>
+ 8c4:	00093503          	ld	a0,0(s2)
+ 8c8:	c12d                	beqz	a0,92a <malloc+0xee>
+ 8ca:	611c                	ld	a5,0(a0)
+ 8cc:	4798                	lw	a4,8(a5)
+ 8ce:	02977263          	bgeu	a4,s1,8f2 <malloc+0xb6>
+ 8d2:	00093703          	ld	a4,0(s2)
+ 8d6:	853e                	mv	a0,a5
+ 8d8:	fef719e3          	bne	a4,a5,8ca <malloc+0x8e>
+ 8dc:	8552                	mv	a0,s4
+ 8de:	b1bff0ef          	jal	3f8 <sbrk>
+ 8e2:	fd551ce3          	bne	a0,s5,8ba <malloc+0x7e>
+ 8e6:	4501                	li	a0,0
+ 8e8:	7902                	ld	s2,32(sp)
+ 8ea:	6a42                	ld	s4,16(sp)
+ 8ec:	6aa2                	ld	s5,8(sp)
+ 8ee:	6b02                	ld	s6,0(sp)
+ 8f0:	a03d                	j	91e <malloc+0xe2>
+ 8f2:	7902                	ld	s2,32(sp)
+ 8f4:	6a42                	ld	s4,16(sp)
+ 8f6:	6aa2                	ld	s5,8(sp)
+ 8f8:	6b02                	ld	s6,0(sp)
+ 8fa:	fae48de3          	beq	s1,a4,8b4 <malloc+0x78>
+ 8fe:	4137073b          	subw	a4,a4,s3
+ 902:	c798                	sw	a4,8(a5)
+ 904:	02071693          	slli	a3,a4,0x20
+ 908:	01c6d713          	srli	a4,a3,0x1c
+ 90c:	97ba                	add	a5,a5,a4
+ 90e:	0137a423          	sw	s3,8(a5)
+ 912:	00000717          	auipc	a4,0x0
+ 916:	6ea73723          	sd	a0,1774(a4) # 1000 <freep>
+ 91a:	01078513          	addi	a0,a5,16
+ 91e:	70e2                	ld	ra,56(sp)
+ 920:	7442                	ld	s0,48(sp)
+ 922:	74a2                	ld	s1,40(sp)
+ 924:	69e2                	ld	s3,24(sp)
+ 926:	6121                	addi	sp,sp,64
+ 928:	8082                	ret
+ 92a:	7902                	ld	s2,32(sp)
+ 92c:	6a42                	ld	s4,16(sp)
+ 92e:	6aa2                	ld	s5,8(sp)
+ 930:	6b02                	ld	s6,0(sp)
+ 932:	b7f5                	j	91e <malloc+0xe2>
diff --git a/xv6-labs-2024/user/pingpong.c b/xv6-labs-2024/user/pingpong.c
new file mode 100644
index 0000000..ca57cb0
--- /dev/null
+++ b/xv6-labs-2024/user/pingpong.c
@@ -0,0 +1,56 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int main()
+{   
+
+    int pipe_one[2];
+    int pipe_two[2];  
+    
+    int check_pipe1 = pipe(pipe_one); // Create a parent-to-child pipe
+    int check_pipe2 = pipe(pipe_two); // Create a child-to-parent pipe
+
+    if (check_pipe1 == -1 || check_pipe2 == -1) {
+        printf("Cannot create pipe! - Error: pipe() function failed!");
+        exit(1);
+    }
+
+    int proc = fork();
+    if (proc < 0) {
+        printf("Cannot create process! - Error: fork() function failed!");
+        exit(1);   
+    }
+    else if (proc == 0) { // Child process
+        char mess;
+
+        close(pipe_one[1]); // Close the write end of parent-to-child pipe
+        read(pipe_one[0], &mess, 1); // Read from parent-to-child pipe
+
+        printf("%d: received ping\n", getpid());
+        
+        close(pipe_one[0]); // Close the read end of parent-to-child pipe
+
+        close(pipe_two[0]); // Close the read end of child-to-parent pipe
+        write(pipe_two[1], &mess, 1); // Write to child-to-parent pipe
+        close(pipe_two[1]); // Close the write end of child-to-parent pipe
+        
+    }
+    else { // Parent process
+        char mess = 'T'; // Correct assignment for char type
+        
+        close(pipe_one[0]); // Close the read end of parent-to-child pipe
+        write(pipe_one[1], &mess, 1); // Write to parent-to-child pipe
+        close(pipe_one[1]); // Close the write end of parent-to-child pipe
+
+        close(pipe_two[1]); // Close the write end of child-to-parent pipe
+        read(pipe_two[0], &mess, 1); // Read from child-to-parent pipe
+
+        printf("%d: received pong\n", getpid());
+        
+        close(pipe_two[0]); // Close the read end of child-to-parent pipe
+    
+        wait(0); // Wait for child process to finish
+    }
+    exit(0);
+}
\ No newline at end of file
diff --git a/xv6-labs-2024/user/pingpong.d b/xv6-labs-2024/user/pingpong.d
new file mode 100644
index 0000000..86b0746
--- /dev/null
+++ b/xv6-labs-2024/user/pingpong.d
@@ -0,0 +1,3 @@
+user/pingpong.o: user/pingpong.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/pingpong.o b/xv6-labs-2024/user/pingpong.o
new file mode 100644
index 0000000..1fe5dd6
Binary files /dev/null and b/xv6-labs-2024/user/pingpong.o differ
diff --git a/xv6-labs-2024/user/pingpong.sym b/xv6-labs-2024/user/pingpong.sym
new file mode 100644
index 0000000..e9eb69b
--- /dev/null
+++ b/xv6-labs-2024/user/pingpong.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000938 .rodata
+0000000000000a08 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 pingpong.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000410 putc
+000000000000042e printint
+00000000000009f0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000118 strcpy
+0000000000000788 printf
+00000000000002c2 memmove
+00000000000003b8 mknod
+00000000000001d0 gets
+00000000000003f0 getpid
+0000000000000354 memcpy
+000000000000083c malloc
+0000000000000400 sleep
+0000000000000380 pipe
+0000000000000390 write
+00000000000003c8 fstat
+000000000000075e fprintf
+00000000000003a0 kill
+00000000000004d6 vprintf
+00000000000003e0 chdir
+00000000000003a8 exec
+0000000000000378 wait
+0000000000000388 read
+00000000000003c0 unlink
+000000000000031a memcmp
+0000000000000368 fork
+00000000000003f8 sbrk
+0000000000000408 uptime
+000000000000018a memset
+0000000000000000 main
+0000000000000134 strcmp
+00000000000003e8 dup
+0000000000000240 stat
+00000000000003d0 link
+0000000000000370 exit
+0000000000000106 start
+000000000000027a atoi
+0000000000000160 strlen
+00000000000003b0 open
+00000000000001ac strchr
+00000000000003d8 mkdir
+0000000000000398 close
+00000000000007ba free
diff --git a/xv6-labs-2024/user/primes b/xv6-labs-2024/user/primes
new file mode 100755
index 0000000..f340065
Binary files /dev/null and b/xv6-labs-2024/user/primes differ
diff --git a/xv6-labs-2024/user/primes.asm b/xv6-labs-2024/user/primes.asm
new file mode 100644
index 0000000..2a65b92
--- /dev/null
+++ b/xv6-labs-2024/user/primes.asm
@@ -0,0 +1,1435 @@
+
+user/_primes:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <primes>:
+#include "kernel/stat.h"
+#include "user/user.h"
+
+void primes(int cur_pipe)__attribute__((noreturn));
+
+void primes(int cur_pipe) {
+   0:	7139                	addi	sp,sp,-64
+   2:	fc06                	sd	ra,56(sp)
+   4:	f822                	sd	s0,48(sp)
+   6:	f426                	sd	s1,40(sp)
+   8:	0080                	addi	s0,sp,64
+   a:	84aa                	mv	s1,a0
+    int prime;
+    if (read(cur_pipe, &prime, sizeof(prime)) == 0) {
+   c:	4611                	li	a2,4
+   e:	fdc40593          	addi	a1,s0,-36
+  12:	3d8000ef          	jal	3ea <read>
+  16:	e519                	bnez	a0,24 <primes+0x24>
+        close(cur_pipe);
+  18:	8526                	mv	a0,s1
+  1a:	3e0000ef          	jal	3fa <close>
+        exit(0);
+  1e:	4501                	li	a0,0
+  20:	3b2000ef          	jal	3d2 <exit>
+    }
+
+    // Print the prime number
+    printf("prime: %d\n", prime);
+  24:	fdc42583          	lw	a1,-36(s0)
+  28:	00001517          	auipc	a0,0x1
+  2c:	97850513          	addi	a0,a0,-1672 # 9a0 <malloc+0x102>
+  30:	7ba000ef          	jal	7ea <printf>
+
+    int fd[2];
+    if (pipe(fd) < 0) {
+  34:	fd040513          	addi	a0,s0,-48
+  38:	3aa000ef          	jal	3e2 <pipe>
+  3c:	02054063          	bltz	a0,5c <primes+0x5c>
+        close(cur_pipe);
+        exit(1);
+    }
+
+    int num;
+    int pid = fork();
+  40:	38a000ef          	jal	3ca <fork>
+    if (pid == 0) {
+  44:	e905                	bnez	a0,74 <primes+0x74>
+        // Child process to handle next prime filtering
+        close(fd[1]);  // Close write end in child
+  46:	fd442503          	lw	a0,-44(s0)
+  4a:	3b0000ef          	jal	3fa <close>
+        close(cur_pipe);  // Close current pipe in child
+  4e:	8526                	mv	a0,s1
+  50:	3aa000ef          	jal	3fa <close>
+        primes(fd[0]); // Recursive call
+  54:	fd042503          	lw	a0,-48(s0)
+  58:	fa9ff0ef          	jal	0 <primes>
+        printf("Error creating pipe\n");
+  5c:	00001517          	auipc	a0,0x1
+  60:	95450513          	addi	a0,a0,-1708 # 9b0 <malloc+0x112>
+  64:	786000ef          	jal	7ea <printf>
+        close(cur_pipe);
+  68:	8526                	mv	a0,s1
+  6a:	390000ef          	jal	3fa <close>
+        exit(1);
+  6e:	4505                	li	a0,1
+  70:	362000ef          	jal	3d2 <exit>
+    } else {
+        // Parent process filters numbers
+        close(fd[0]);  // Close read end in parent
+  74:	fd042503          	lw	a0,-48(s0)
+  78:	382000ef          	jal	3fa <close>
+
+        while (read(cur_pipe, &num, sizeof(num)) > 0) {
+  7c:	4611                	li	a2,4
+  7e:	fcc40593          	addi	a1,s0,-52
+  82:	8526                	mv	a0,s1
+  84:	366000ef          	jal	3ea <read>
+  88:	02a05863          	blez	a0,b8 <primes+0xb8>
+            // Only pass numbers that are not divisible by the current prime
+            if (num % prime != 0) {
+  8c:	fcc42783          	lw	a5,-52(s0)
+  90:	fdc42703          	lw	a4,-36(s0)
+  94:	02e7e7bb          	remw	a5,a5,a4
+  98:	d3f5                	beqz	a5,7c <primes+0x7c>
+                if (write(fd[1], &num, sizeof(num)) < 0) {
+  9a:	4611                	li	a2,4
+  9c:	fcc40593          	addi	a1,s0,-52
+  a0:	fd442503          	lw	a0,-44(s0)
+  a4:	34e000ef          	jal	3f2 <write>
+  a8:	fc055ae3          	bgez	a0,7c <primes+0x7c>
+                    printf("Error writing to pipe\n");
+  ac:	00001517          	auipc	a0,0x1
+  b0:	91c50513          	addi	a0,a0,-1764 # 9c8 <malloc+0x12a>
+  b4:	736000ef          	jal	7ea <printf>
+                }
+            }
+        }
+
+        // Close pipes
+        close(fd[1]);
+  b8:	fd442503          	lw	a0,-44(s0)
+  bc:	33e000ef          	jal	3fa <close>
+        close(cur_pipe);
+  c0:	8526                	mv	a0,s1
+  c2:	338000ef          	jal	3fa <close>
+        wait(0);  // Wait for child process
+  c6:	4501                	li	a0,0
+  c8:	312000ef          	jal	3da <wait>
+        exit(0);  // Exit after child finishes
+  cc:	4501                	li	a0,0
+  ce:	304000ef          	jal	3d2 <exit>
+
+00000000000000d2 <main>:
+    }
+}
+
+int main() {
+  d2:	7179                	addi	sp,sp,-48
+  d4:	f406                	sd	ra,40(sp)
+  d6:	f022                	sd	s0,32(sp)
+  d8:	ec26                	sd	s1,24(sp)
+  da:	1800                	addi	s0,sp,48
+    int fd[2];
+    if (pipe(fd) < 0) {
+  dc:	fd840513          	addi	a0,s0,-40
+  e0:	302000ef          	jal	3e2 <pipe>
+  e4:	00054d63          	bltz	a0,fe <main+0x2c>
+        printf("Error creating initial pipe\n");
+        exit(1);
+    }
+
+    int pid = fork();
+  e8:	2e2000ef          	jal	3ca <fork>
+    if (pid == 0) {
+  ec:	e115                	bnez	a0,110 <main+0x3e>
+        // Child process to handle prime numbers
+        close(fd[1]);  // Close write end of the pipe in child
+  ee:	fdc42503          	lw	a0,-36(s0)
+  f2:	308000ef          	jal	3fa <close>
+        primes(fd[0]); // Start the prime number filtering
+  f6:	fd842503          	lw	a0,-40(s0)
+  fa:	f07ff0ef          	jal	0 <primes>
+        printf("Error creating initial pipe\n");
+  fe:	00001517          	auipc	a0,0x1
+ 102:	8e250513          	addi	a0,a0,-1822 # 9e0 <malloc+0x142>
+ 106:	6e4000ef          	jal	7ea <printf>
+        exit(1);
+ 10a:	4505                	li	a0,1
+ 10c:	2c6000ef          	jal	3d2 <exit>
+    } else {
+        // Parent process generates numbers and writes them to the pipe
+        close(fd[0]);  // Close read end of the pipe in parent
+ 110:	fd842503          	lw	a0,-40(s0)
+ 114:	2e6000ef          	jal	3fa <close>
+
+        for (int i = 2; i <= 280; i++) {
+ 118:	4789                	li	a5,2
+ 11a:	fcf42a23          	sw	a5,-44(s0)
+ 11e:	11800493          	li	s1,280
+            if (write(fd[1], &i, sizeof(i)) < 0) {
+ 122:	4611                	li	a2,4
+ 124:	fd440593          	addi	a1,s0,-44
+ 128:	fdc42503          	lw	a0,-36(s0)
+ 12c:	2c6000ef          	jal	3f2 <write>
+ 130:	00054c63          	bltz	a0,148 <main+0x76>
+        for (int i = 2; i <= 280; i++) {
+ 134:	fd442783          	lw	a5,-44(s0)
+ 138:	2785                	addiw	a5,a5,1
+ 13a:	0007871b          	sext.w	a4,a5
+ 13e:	fcf42a23          	sw	a5,-44(s0)
+ 142:	fee4d0e3          	bge	s1,a4,122 <main+0x50>
+ 146:	a039                	j	154 <main+0x82>
+                printf("Error writing to pipe\n");
+ 148:	00001517          	auipc	a0,0x1
+ 14c:	88050513          	addi	a0,a0,-1920 # 9c8 <malloc+0x12a>
+ 150:	69a000ef          	jal	7ea <printf>
+                break;
+            }
+        }
+
+        close(fd[1]);  // Close write end after sending all numbers
+ 154:	fdc42503          	lw	a0,-36(s0)
+ 158:	2a2000ef          	jal	3fa <close>
+        wait(0);       // Wait for child process to finish
+ 15c:	4501                	li	a0,0
+ 15e:	27c000ef          	jal	3da <wait>
+    }
+
+    exit(0);
+ 162:	4501                	li	a0,0
+ 164:	26e000ef          	jal	3d2 <exit>
+
+0000000000000168 <start>:
+ 168:	1141                	addi	sp,sp,-16
+ 16a:	e406                	sd	ra,8(sp)
+ 16c:	e022                	sd	s0,0(sp)
+ 16e:	0800                	addi	s0,sp,16
+ 170:	f63ff0ef          	jal	d2 <main>
+ 174:	4501                	li	a0,0
+ 176:	25c000ef          	jal	3d2 <exit>
+
+000000000000017a <strcpy>:
+ 17a:	1141                	addi	sp,sp,-16
+ 17c:	e422                	sd	s0,8(sp)
+ 17e:	0800                	addi	s0,sp,16
+ 180:	87aa                	mv	a5,a0
+ 182:	0585                	addi	a1,a1,1
+ 184:	0785                	addi	a5,a5,1
+ 186:	fff5c703          	lbu	a4,-1(a1)
+ 18a:	fee78fa3          	sb	a4,-1(a5)
+ 18e:	fb75                	bnez	a4,182 <strcpy+0x8>
+ 190:	6422                	ld	s0,8(sp)
+ 192:	0141                	addi	sp,sp,16
+ 194:	8082                	ret
+
+0000000000000196 <strcmp>:
+ 196:	1141                	addi	sp,sp,-16
+ 198:	e422                	sd	s0,8(sp)
+ 19a:	0800                	addi	s0,sp,16
+ 19c:	00054783          	lbu	a5,0(a0)
+ 1a0:	cb91                	beqz	a5,1b4 <strcmp+0x1e>
+ 1a2:	0005c703          	lbu	a4,0(a1)
+ 1a6:	00f71763          	bne	a4,a5,1b4 <strcmp+0x1e>
+ 1aa:	0505                	addi	a0,a0,1
+ 1ac:	0585                	addi	a1,a1,1
+ 1ae:	00054783          	lbu	a5,0(a0)
+ 1b2:	fbe5                	bnez	a5,1a2 <strcmp+0xc>
+ 1b4:	0005c503          	lbu	a0,0(a1)
+ 1b8:	40a7853b          	subw	a0,a5,a0
+ 1bc:	6422                	ld	s0,8(sp)
+ 1be:	0141                	addi	sp,sp,16
+ 1c0:	8082                	ret
+
+00000000000001c2 <strlen>:
+ 1c2:	1141                	addi	sp,sp,-16
+ 1c4:	e422                	sd	s0,8(sp)
+ 1c6:	0800                	addi	s0,sp,16
+ 1c8:	00054783          	lbu	a5,0(a0)
+ 1cc:	cf91                	beqz	a5,1e8 <strlen+0x26>
+ 1ce:	0505                	addi	a0,a0,1
+ 1d0:	87aa                	mv	a5,a0
+ 1d2:	86be                	mv	a3,a5
+ 1d4:	0785                	addi	a5,a5,1
+ 1d6:	fff7c703          	lbu	a4,-1(a5)
+ 1da:	ff65                	bnez	a4,1d2 <strlen+0x10>
+ 1dc:	40a6853b          	subw	a0,a3,a0
+ 1e0:	2505                	addiw	a0,a0,1
+ 1e2:	6422                	ld	s0,8(sp)
+ 1e4:	0141                	addi	sp,sp,16
+ 1e6:	8082                	ret
+ 1e8:	4501                	li	a0,0
+ 1ea:	bfe5                	j	1e2 <strlen+0x20>
+
+00000000000001ec <memset>:
+ 1ec:	1141                	addi	sp,sp,-16
+ 1ee:	e422                	sd	s0,8(sp)
+ 1f0:	0800                	addi	s0,sp,16
+ 1f2:	ca19                	beqz	a2,208 <memset+0x1c>
+ 1f4:	87aa                	mv	a5,a0
+ 1f6:	1602                	slli	a2,a2,0x20
+ 1f8:	9201                	srli	a2,a2,0x20
+ 1fa:	00a60733          	add	a4,a2,a0
+ 1fe:	00b78023          	sb	a1,0(a5)
+ 202:	0785                	addi	a5,a5,1
+ 204:	fee79de3          	bne	a5,a4,1fe <memset+0x12>
+ 208:	6422                	ld	s0,8(sp)
+ 20a:	0141                	addi	sp,sp,16
+ 20c:	8082                	ret
+
+000000000000020e <strchr>:
+ 20e:	1141                	addi	sp,sp,-16
+ 210:	e422                	sd	s0,8(sp)
+ 212:	0800                	addi	s0,sp,16
+ 214:	00054783          	lbu	a5,0(a0)
+ 218:	cb99                	beqz	a5,22e <strchr+0x20>
+ 21a:	00f58763          	beq	a1,a5,228 <strchr+0x1a>
+ 21e:	0505                	addi	a0,a0,1
+ 220:	00054783          	lbu	a5,0(a0)
+ 224:	fbfd                	bnez	a5,21a <strchr+0xc>
+ 226:	4501                	li	a0,0
+ 228:	6422                	ld	s0,8(sp)
+ 22a:	0141                	addi	sp,sp,16
+ 22c:	8082                	ret
+ 22e:	4501                	li	a0,0
+ 230:	bfe5                	j	228 <strchr+0x1a>
+
+0000000000000232 <gets>:
+ 232:	711d                	addi	sp,sp,-96
+ 234:	ec86                	sd	ra,88(sp)
+ 236:	e8a2                	sd	s0,80(sp)
+ 238:	e4a6                	sd	s1,72(sp)
+ 23a:	e0ca                	sd	s2,64(sp)
+ 23c:	fc4e                	sd	s3,56(sp)
+ 23e:	f852                	sd	s4,48(sp)
+ 240:	f456                	sd	s5,40(sp)
+ 242:	f05a                	sd	s6,32(sp)
+ 244:	ec5e                	sd	s7,24(sp)
+ 246:	1080                	addi	s0,sp,96
+ 248:	8baa                	mv	s7,a0
+ 24a:	8a2e                	mv	s4,a1
+ 24c:	892a                	mv	s2,a0
+ 24e:	4481                	li	s1,0
+ 250:	4aa9                	li	s5,10
+ 252:	4b35                	li	s6,13
+ 254:	89a6                	mv	s3,s1
+ 256:	2485                	addiw	s1,s1,1
+ 258:	0344d663          	bge	s1,s4,284 <gets+0x52>
+ 25c:	4605                	li	a2,1
+ 25e:	faf40593          	addi	a1,s0,-81
+ 262:	4501                	li	a0,0
+ 264:	186000ef          	jal	3ea <read>
+ 268:	00a05e63          	blez	a0,284 <gets+0x52>
+ 26c:	faf44783          	lbu	a5,-81(s0)
+ 270:	00f90023          	sb	a5,0(s2)
+ 274:	01578763          	beq	a5,s5,282 <gets+0x50>
+ 278:	0905                	addi	s2,s2,1
+ 27a:	fd679de3          	bne	a5,s6,254 <gets+0x22>
+ 27e:	89a6                	mv	s3,s1
+ 280:	a011                	j	284 <gets+0x52>
+ 282:	89a6                	mv	s3,s1
+ 284:	99de                	add	s3,s3,s7
+ 286:	00098023          	sb	zero,0(s3)
+ 28a:	855e                	mv	a0,s7
+ 28c:	60e6                	ld	ra,88(sp)
+ 28e:	6446                	ld	s0,80(sp)
+ 290:	64a6                	ld	s1,72(sp)
+ 292:	6906                	ld	s2,64(sp)
+ 294:	79e2                	ld	s3,56(sp)
+ 296:	7a42                	ld	s4,48(sp)
+ 298:	7aa2                	ld	s5,40(sp)
+ 29a:	7b02                	ld	s6,32(sp)
+ 29c:	6be2                	ld	s7,24(sp)
+ 29e:	6125                	addi	sp,sp,96
+ 2a0:	8082                	ret
+
+00000000000002a2 <stat>:
+ 2a2:	1101                	addi	sp,sp,-32
+ 2a4:	ec06                	sd	ra,24(sp)
+ 2a6:	e822                	sd	s0,16(sp)
+ 2a8:	e04a                	sd	s2,0(sp)
+ 2aa:	1000                	addi	s0,sp,32
+ 2ac:	892e                	mv	s2,a1
+ 2ae:	4581                	li	a1,0
+ 2b0:	162000ef          	jal	412 <open>
+ 2b4:	02054263          	bltz	a0,2d8 <stat+0x36>
+ 2b8:	e426                	sd	s1,8(sp)
+ 2ba:	84aa                	mv	s1,a0
+ 2bc:	85ca                	mv	a1,s2
+ 2be:	16c000ef          	jal	42a <fstat>
+ 2c2:	892a                	mv	s2,a0
+ 2c4:	8526                	mv	a0,s1
+ 2c6:	134000ef          	jal	3fa <close>
+ 2ca:	64a2                	ld	s1,8(sp)
+ 2cc:	854a                	mv	a0,s2
+ 2ce:	60e2                	ld	ra,24(sp)
+ 2d0:	6442                	ld	s0,16(sp)
+ 2d2:	6902                	ld	s2,0(sp)
+ 2d4:	6105                	addi	sp,sp,32
+ 2d6:	8082                	ret
+ 2d8:	597d                	li	s2,-1
+ 2da:	bfcd                	j	2cc <stat+0x2a>
+
+00000000000002dc <atoi>:
+ 2dc:	1141                	addi	sp,sp,-16
+ 2de:	e422                	sd	s0,8(sp)
+ 2e0:	0800                	addi	s0,sp,16
+ 2e2:	00054683          	lbu	a3,0(a0)
+ 2e6:	fd06879b          	addiw	a5,a3,-48
+ 2ea:	0ff7f793          	zext.b	a5,a5
+ 2ee:	4625                	li	a2,9
+ 2f0:	02f66863          	bltu	a2,a5,320 <atoi+0x44>
+ 2f4:	872a                	mv	a4,a0
+ 2f6:	4501                	li	a0,0
+ 2f8:	0705                	addi	a4,a4,1
+ 2fa:	0025179b          	slliw	a5,a0,0x2
+ 2fe:	9fa9                	addw	a5,a5,a0
+ 300:	0017979b          	slliw	a5,a5,0x1
+ 304:	9fb5                	addw	a5,a5,a3
+ 306:	fd07851b          	addiw	a0,a5,-48
+ 30a:	00074683          	lbu	a3,0(a4)
+ 30e:	fd06879b          	addiw	a5,a3,-48
+ 312:	0ff7f793          	zext.b	a5,a5
+ 316:	fef671e3          	bgeu	a2,a5,2f8 <atoi+0x1c>
+ 31a:	6422                	ld	s0,8(sp)
+ 31c:	0141                	addi	sp,sp,16
+ 31e:	8082                	ret
+ 320:	4501                	li	a0,0
+ 322:	bfe5                	j	31a <atoi+0x3e>
+
+0000000000000324 <memmove>:
+ 324:	1141                	addi	sp,sp,-16
+ 326:	e422                	sd	s0,8(sp)
+ 328:	0800                	addi	s0,sp,16
+ 32a:	02b57463          	bgeu	a0,a1,352 <memmove+0x2e>
+ 32e:	00c05f63          	blez	a2,34c <memmove+0x28>
+ 332:	1602                	slli	a2,a2,0x20
+ 334:	9201                	srli	a2,a2,0x20
+ 336:	00c507b3          	add	a5,a0,a2
+ 33a:	872a                	mv	a4,a0
+ 33c:	0585                	addi	a1,a1,1
+ 33e:	0705                	addi	a4,a4,1
+ 340:	fff5c683          	lbu	a3,-1(a1)
+ 344:	fed70fa3          	sb	a3,-1(a4)
+ 348:	fef71ae3          	bne	a4,a5,33c <memmove+0x18>
+ 34c:	6422                	ld	s0,8(sp)
+ 34e:	0141                	addi	sp,sp,16
+ 350:	8082                	ret
+ 352:	00c50733          	add	a4,a0,a2
+ 356:	95b2                	add	a1,a1,a2
+ 358:	fec05ae3          	blez	a2,34c <memmove+0x28>
+ 35c:	fff6079b          	addiw	a5,a2,-1
+ 360:	1782                	slli	a5,a5,0x20
+ 362:	9381                	srli	a5,a5,0x20
+ 364:	fff7c793          	not	a5,a5
+ 368:	97ba                	add	a5,a5,a4
+ 36a:	15fd                	addi	a1,a1,-1
+ 36c:	177d                	addi	a4,a4,-1
+ 36e:	0005c683          	lbu	a3,0(a1)
+ 372:	00d70023          	sb	a3,0(a4)
+ 376:	fee79ae3          	bne	a5,a4,36a <memmove+0x46>
+ 37a:	bfc9                	j	34c <memmove+0x28>
+
+000000000000037c <memcmp>:
+ 37c:	1141                	addi	sp,sp,-16
+ 37e:	e422                	sd	s0,8(sp)
+ 380:	0800                	addi	s0,sp,16
+ 382:	ca05                	beqz	a2,3b2 <memcmp+0x36>
+ 384:	fff6069b          	addiw	a3,a2,-1
+ 388:	1682                	slli	a3,a3,0x20
+ 38a:	9281                	srli	a3,a3,0x20
+ 38c:	0685                	addi	a3,a3,1
+ 38e:	96aa                	add	a3,a3,a0
+ 390:	00054783          	lbu	a5,0(a0)
+ 394:	0005c703          	lbu	a4,0(a1)
+ 398:	00e79863          	bne	a5,a4,3a8 <memcmp+0x2c>
+ 39c:	0505                	addi	a0,a0,1
+ 39e:	0585                	addi	a1,a1,1
+ 3a0:	fed518e3          	bne	a0,a3,390 <memcmp+0x14>
+ 3a4:	4501                	li	a0,0
+ 3a6:	a019                	j	3ac <memcmp+0x30>
+ 3a8:	40e7853b          	subw	a0,a5,a4
+ 3ac:	6422                	ld	s0,8(sp)
+ 3ae:	0141                	addi	sp,sp,16
+ 3b0:	8082                	ret
+ 3b2:	4501                	li	a0,0
+ 3b4:	bfe5                	j	3ac <memcmp+0x30>
+
+00000000000003b6 <memcpy>:
+ 3b6:	1141                	addi	sp,sp,-16
+ 3b8:	e406                	sd	ra,8(sp)
+ 3ba:	e022                	sd	s0,0(sp)
+ 3bc:	0800                	addi	s0,sp,16
+ 3be:	f67ff0ef          	jal	324 <memmove>
+ 3c2:	60a2                	ld	ra,8(sp)
+ 3c4:	6402                	ld	s0,0(sp)
+ 3c6:	0141                	addi	sp,sp,16
+ 3c8:	8082                	ret
+
+00000000000003ca <fork>:
+# generated by usys.pl - do not edit
+#include "kernel/syscall.h"
+.global fork
+fork:
+ li a7, SYS_fork
+ 3ca:	4885                	li	a7,1
+ ecall
+ 3cc:	00000073          	ecall
+ ret
+ 3d0:	8082                	ret
+
+00000000000003d2 <exit>:
+.global exit
+exit:
+ li a7, SYS_exit
+ 3d2:	4889                	li	a7,2
+ ecall
+ 3d4:	00000073          	ecall
+ ret
+ 3d8:	8082                	ret
+
+00000000000003da <wait>:
+.global wait
+wait:
+ li a7, SYS_wait
+ 3da:	488d                	li	a7,3
+ ecall
+ 3dc:	00000073          	ecall
+ ret
+ 3e0:	8082                	ret
+
+00000000000003e2 <pipe>:
+.global pipe
+pipe:
+ li a7, SYS_pipe
+ 3e2:	4891                	li	a7,4
+ ecall
+ 3e4:	00000073          	ecall
+ ret
+ 3e8:	8082                	ret
+
+00000000000003ea <read>:
+.global read
+read:
+ li a7, SYS_read
+ 3ea:	4895                	li	a7,5
+ ecall
+ 3ec:	00000073          	ecall
+ ret
+ 3f0:	8082                	ret
+
+00000000000003f2 <write>:
+.global write
+write:
+ li a7, SYS_write
+ 3f2:	48c1                	li	a7,16
+ ecall
+ 3f4:	00000073          	ecall
+ ret
+ 3f8:	8082                	ret
+
+00000000000003fa <close>:
+.global close
+close:
+ li a7, SYS_close
+ 3fa:	48d5                	li	a7,21
+ ecall
+ 3fc:	00000073          	ecall
+ ret
+ 400:	8082                	ret
+
+0000000000000402 <kill>:
+.global kill
+kill:
+ li a7, SYS_kill
+ 402:	4899                	li	a7,6
+ ecall
+ 404:	00000073          	ecall
+ ret
+ 408:	8082                	ret
+
+000000000000040a <exec>:
+.global exec
+exec:
+ li a7, SYS_exec
+ 40a:	489d                	li	a7,7
+ ecall
+ 40c:	00000073          	ecall
+ ret
+ 410:	8082                	ret
+
+0000000000000412 <open>:
+.global open
+open:
+ li a7, SYS_open
+ 412:	48bd                	li	a7,15
+ ecall
+ 414:	00000073          	ecall
+ ret
+ 418:	8082                	ret
+
+000000000000041a <mknod>:
+.global mknod
+mknod:
+ li a7, SYS_mknod
+ 41a:	48c5                	li	a7,17
+ ecall
+ 41c:	00000073          	ecall
+ ret
+ 420:	8082                	ret
+
+0000000000000422 <unlink>:
+.global unlink
+unlink:
+ li a7, SYS_unlink
+ 422:	48c9                	li	a7,18
+ ecall
+ 424:	00000073          	ecall
+ ret
+ 428:	8082                	ret
+
+000000000000042a <fstat>:
+.global fstat
+fstat:
+ li a7, SYS_fstat
+ 42a:	48a1                	li	a7,8
+ ecall
+ 42c:	00000073          	ecall
+ ret
+ 430:	8082                	ret
+
+0000000000000432 <link>:
+.global link
+link:
+ li a7, SYS_link
+ 432:	48cd                	li	a7,19
+ ecall
+ 434:	00000073          	ecall
+ ret
+ 438:	8082                	ret
+
+000000000000043a <mkdir>:
+.global mkdir
+mkdir:
+ li a7, SYS_mkdir
+ 43a:	48d1                	li	a7,20
+ ecall
+ 43c:	00000073          	ecall
+ ret
+ 440:	8082                	ret
+
+0000000000000442 <chdir>:
+.global chdir
+chdir:
+ li a7, SYS_chdir
+ 442:	48a5                	li	a7,9
+ ecall
+ 444:	00000073          	ecall
+ ret
+ 448:	8082                	ret
+
+000000000000044a <dup>:
+.global dup
+dup:
+ li a7, SYS_dup
+ 44a:	48a9                	li	a7,10
+ ecall
+ 44c:	00000073          	ecall
+ ret
+ 450:	8082                	ret
+
+0000000000000452 <getpid>:
+.global getpid
+getpid:
+ li a7, SYS_getpid
+ 452:	48ad                	li	a7,11
+ ecall
+ 454:	00000073          	ecall
+ ret
+ 458:	8082                	ret
+
+000000000000045a <sbrk>:
+.global sbrk
+sbrk:
+ li a7, SYS_sbrk
+ 45a:	48b1                	li	a7,12
+ ecall
+ 45c:	00000073          	ecall
+ ret
+ 460:	8082                	ret
+
+0000000000000462 <sleep>:
+.global sleep
+sleep:
+ li a7, SYS_sleep
+ 462:	48b5                	li	a7,13
+ ecall
+ 464:	00000073          	ecall
+ ret
+ 468:	8082                	ret
+
+000000000000046a <uptime>:
+.global uptime
+uptime:
+ li a7, SYS_uptime
+ 46a:	48b9                	li	a7,14
+ ecall
+ 46c:	00000073          	ecall
+ ret
+ 470:	8082                	ret
+
+0000000000000472 <putc>:
+
+static char digits[] = "0123456789ABCDEF";
+
+static void
+putc(int fd, char c)
+{
+ 472:	1101                	addi	sp,sp,-32
+ 474:	ec06                	sd	ra,24(sp)
+ 476:	e822                	sd	s0,16(sp)
+ 478:	1000                	addi	s0,sp,32
+ 47a:	feb407a3          	sb	a1,-17(s0)
+  write(fd, &c, 1);
+ 47e:	4605                	li	a2,1
+ 480:	fef40593          	addi	a1,s0,-17
+ 484:	f6fff0ef          	jal	3f2 <write>
+}
+ 488:	60e2                	ld	ra,24(sp)
+ 48a:	6442                	ld	s0,16(sp)
+ 48c:	6105                	addi	sp,sp,32
+ 48e:	8082                	ret
+
+0000000000000490 <printint>:
+
+static void
+printint(int fd, int xx, int base, int sgn)
+{
+ 490:	7139                	addi	sp,sp,-64
+ 492:	fc06                	sd	ra,56(sp)
+ 494:	f822                	sd	s0,48(sp)
+ 496:	f426                	sd	s1,40(sp)
+ 498:	0080                	addi	s0,sp,64
+ 49a:	84aa                	mv	s1,a0
+  char buf[16];
+  int i, neg;
+  uint x;
+
+  neg = 0;
+  if(sgn && xx < 0){
+ 49c:	c299                	beqz	a3,4a2 <printint+0x12>
+ 49e:	0805c963          	bltz	a1,530 <printint+0xa0>
+    neg = 1;
+    x = -xx;
+  } else {
+    x = xx;
+ 4a2:	2581                	sext.w	a1,a1
+  neg = 0;
+ 4a4:	4881                	li	a7,0
+ 4a6:	fc040693          	addi	a3,s0,-64
+  }
+
+  i = 0;
+ 4aa:	4701                	li	a4,0
+  do{
+    buf[i++] = digits[x % base];
+ 4ac:	2601                	sext.w	a2,a2
+ 4ae:	00000517          	auipc	a0,0x0
+ 4b2:	55a50513          	addi	a0,a0,1370 # a08 <digits>
+ 4b6:	883a                	mv	a6,a4
+ 4b8:	2705                	addiw	a4,a4,1
+ 4ba:	02c5f7bb          	remuw	a5,a1,a2
+ 4be:	1782                	slli	a5,a5,0x20
+ 4c0:	9381                	srli	a5,a5,0x20
+ 4c2:	97aa                	add	a5,a5,a0
+ 4c4:	0007c783          	lbu	a5,0(a5)
+ 4c8:	00f68023          	sb	a5,0(a3)
+  }while((x /= base) != 0);
+ 4cc:	0005879b          	sext.w	a5,a1
+ 4d0:	02c5d5bb          	divuw	a1,a1,a2
+ 4d4:	0685                	addi	a3,a3,1
+ 4d6:	fec7f0e3          	bgeu	a5,a2,4b6 <printint+0x26>
+  if(neg)
+ 4da:	00088c63          	beqz	a7,4f2 <printint+0x62>
+    buf[i++] = '-';
+ 4de:	fd070793          	addi	a5,a4,-48
+ 4e2:	00878733          	add	a4,a5,s0
+ 4e6:	02d00793          	li	a5,45
+ 4ea:	fef70823          	sb	a5,-16(a4)
+ 4ee:	0028071b          	addiw	a4,a6,2
+
+  while(--i >= 0)
+ 4f2:	02e05a63          	blez	a4,526 <printint+0x96>
+ 4f6:	f04a                	sd	s2,32(sp)
+ 4f8:	ec4e                	sd	s3,24(sp)
+ 4fa:	fc040793          	addi	a5,s0,-64
+ 4fe:	00e78933          	add	s2,a5,a4
+ 502:	fff78993          	addi	s3,a5,-1
+ 506:	99ba                	add	s3,s3,a4
+ 508:	377d                	addiw	a4,a4,-1
+ 50a:	1702                	slli	a4,a4,0x20
+ 50c:	9301                	srli	a4,a4,0x20
+ 50e:	40e989b3          	sub	s3,s3,a4
+    putc(fd, buf[i]);
+ 512:	fff94583          	lbu	a1,-1(s2)
+ 516:	8526                	mv	a0,s1
+ 518:	f5bff0ef          	jal	472 <putc>
+  while(--i >= 0)
+ 51c:	197d                	addi	s2,s2,-1
+ 51e:	ff391ae3          	bne	s2,s3,512 <printint+0x82>
+ 522:	7902                	ld	s2,32(sp)
+ 524:	69e2                	ld	s3,24(sp)
+}
+ 526:	70e2                	ld	ra,56(sp)
+ 528:	7442                	ld	s0,48(sp)
+ 52a:	74a2                	ld	s1,40(sp)
+ 52c:	6121                	addi	sp,sp,64
+ 52e:	8082                	ret
+    x = -xx;
+ 530:	40b005bb          	negw	a1,a1
+    neg = 1;
+ 534:	4885                	li	a7,1
+    x = -xx;
+ 536:	bf85                	j	4a6 <printint+0x16>
+
+0000000000000538 <vprintf>:
+}
+
+// Print to the given fd. Only understands %d, %x, %p, %s.
+void
+vprintf(int fd, const char *fmt, va_list ap)
+{
+ 538:	711d                	addi	sp,sp,-96
+ 53a:	ec86                	sd	ra,88(sp)
+ 53c:	e8a2                	sd	s0,80(sp)
+ 53e:	e0ca                	sd	s2,64(sp)
+ 540:	1080                	addi	s0,sp,96
+  char *s;
+  int c0, c1, c2, i, state;
+
+  state = 0;
+  for(i = 0; fmt[i]; i++){
+ 542:	0005c903          	lbu	s2,0(a1)
+ 546:	26090863          	beqz	s2,7b6 <vprintf+0x27e>
+ 54a:	e4a6                	sd	s1,72(sp)
+ 54c:	fc4e                	sd	s3,56(sp)
+ 54e:	f852                	sd	s4,48(sp)
+ 550:	f456                	sd	s5,40(sp)
+ 552:	f05a                	sd	s6,32(sp)
+ 554:	ec5e                	sd	s7,24(sp)
+ 556:	e862                	sd	s8,16(sp)
+ 558:	e466                	sd	s9,8(sp)
+ 55a:	8b2a                	mv	s6,a0
+ 55c:	8a2e                	mv	s4,a1
+ 55e:	8bb2                	mv	s7,a2
+  state = 0;
+ 560:	4981                	li	s3,0
+  for(i = 0; fmt[i]; i++){
+ 562:	4481                	li	s1,0
+ 564:	4701                	li	a4,0
+      if(c0 == '%'){
+        state = '%';
+      } else {
+        putc(fd, c0);
+      }
+    } else if(state == '%'){
+ 566:	02500a93          	li	s5,37
+      c1 = c2 = 0;
+      if(c0) c1 = fmt[i+1] & 0xff;
+      if(c1) c2 = fmt[i+2] & 0xff;
+      if(c0 == 'd'){
+ 56a:	06400c13          	li	s8,100
+        printint(fd, va_arg(ap, int), 10, 1);
+      } else if(c0 == 'l' && c1 == 'd'){
+ 56e:	06c00c93          	li	s9,108
+ 572:	a005                	j	592 <vprintf+0x5a>
+        putc(fd, c0);
+ 574:	85ca                	mv	a1,s2
+ 576:	855a                	mv	a0,s6
+ 578:	efbff0ef          	jal	472 <putc>
+ 57c:	a019                	j	582 <vprintf+0x4a>
+    } else if(state == '%'){
+ 57e:	03598263          	beq	s3,s5,5a2 <vprintf+0x6a>
+  for(i = 0; fmt[i]; i++){
+ 582:	2485                	addiw	s1,s1,1
+ 584:	8726                	mv	a4,s1
+ 586:	009a07b3          	add	a5,s4,s1
+ 58a:	0007c903          	lbu	s2,0(a5)
+ 58e:	20090c63          	beqz	s2,7a6 <vprintf+0x26e>
+    c0 = fmt[i] & 0xff;
+ 592:	0009079b          	sext.w	a5,s2
+    if(state == 0){
+ 596:	fe0994e3          	bnez	s3,57e <vprintf+0x46>
+      if(c0 == '%'){
+ 59a:	fd579de3          	bne	a5,s5,574 <vprintf+0x3c>
+        state = '%';
+ 59e:	89be                	mv	s3,a5
+ 5a0:	b7cd                	j	582 <vprintf+0x4a>
+      if(c0) c1 = fmt[i+1] & 0xff;
+ 5a2:	00ea06b3          	add	a3,s4,a4
+ 5a6:	0016c683          	lbu	a3,1(a3)
+      c1 = c2 = 0;
+ 5aa:	8636                	mv	a2,a3
+      if(c1) c2 = fmt[i+2] & 0xff;
+ 5ac:	c681                	beqz	a3,5b4 <vprintf+0x7c>
+ 5ae:	9752                	add	a4,a4,s4
+ 5b0:	00274603          	lbu	a2,2(a4)
+      if(c0 == 'd'){
+ 5b4:	03878f63          	beq	a5,s8,5f2 <vprintf+0xba>
+      } else if(c0 == 'l' && c1 == 'd'){
+ 5b8:	05978963          	beq	a5,s9,60a <vprintf+0xd2>
+        printint(fd, va_arg(ap, uint64), 10, 1);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'd'){
+        printint(fd, va_arg(ap, uint64), 10, 1);
+        i += 2;
+      } else if(c0 == 'u'){
+ 5bc:	07500713          	li	a4,117
+ 5c0:	0ee78363          	beq	a5,a4,6a6 <vprintf+0x16e>
+        printint(fd, va_arg(ap, uint64), 10, 0);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'u'){
+        printint(fd, va_arg(ap, uint64), 10, 0);
+        i += 2;
+      } else if(c0 == 'x'){
+ 5c4:	07800713          	li	a4,120
+ 5c8:	12e78563          	beq	a5,a4,6f2 <vprintf+0x1ba>
+        printint(fd, va_arg(ap, uint64), 16, 0);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'x'){
+        printint(fd, va_arg(ap, uint64), 16, 0);
+        i += 2;
+      } else if(c0 == 'p'){
+ 5cc:	07000713          	li	a4,112
+ 5d0:	14e78a63          	beq	a5,a4,724 <vprintf+0x1ec>
+        printptr(fd, va_arg(ap, uint64));
+      } else if(c0 == 's'){
+ 5d4:	07300713          	li	a4,115
+ 5d8:	18e78a63          	beq	a5,a4,76c <vprintf+0x234>
+        if((s = va_arg(ap, char*)) == 0)
+          s = "(null)";
+        for(; *s; s++)
+          putc(fd, *s);
+      } else if(c0 == '%'){
+ 5dc:	02500713          	li	a4,37
+ 5e0:	04e79563          	bne	a5,a4,62a <vprintf+0xf2>
+        putc(fd, '%');
+ 5e4:	02500593          	li	a1,37
+ 5e8:	855a                	mv	a0,s6
+ 5ea:	e89ff0ef          	jal	472 <putc>
+        // Unknown % sequence.  Print it to draw attention.
+        putc(fd, '%');
+        putc(fd, c);
+      }
+#endif
+      state = 0;
+ 5ee:	4981                	li	s3,0
+ 5f0:	bf49                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, int), 10, 1);
+ 5f2:	008b8913          	addi	s2,s7,8
+ 5f6:	4685                	li	a3,1
+ 5f8:	4629                	li	a2,10
+ 5fa:	000ba583          	lw	a1,0(s7)
+ 5fe:	855a                	mv	a0,s6
+ 600:	e91ff0ef          	jal	490 <printint>
+ 604:	8bca                	mv	s7,s2
+      state = 0;
+ 606:	4981                	li	s3,0
+ 608:	bfad                	j	582 <vprintf+0x4a>
+      } else if(c0 == 'l' && c1 == 'd'){
+ 60a:	06400793          	li	a5,100
+ 60e:	02f68963          	beq	a3,a5,640 <vprintf+0x108>
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'd'){
+ 612:	06c00793          	li	a5,108
+ 616:	04f68263          	beq	a3,a5,65a <vprintf+0x122>
+      } else if(c0 == 'l' && c1 == 'u'){
+ 61a:	07500793          	li	a5,117
+ 61e:	0af68063          	beq	a3,a5,6be <vprintf+0x186>
+      } else if(c0 == 'l' && c1 == 'x'){
+ 622:	07800793          	li	a5,120
+ 626:	0ef68263          	beq	a3,a5,70a <vprintf+0x1d2>
+        putc(fd, '%');
+ 62a:	02500593          	li	a1,37
+ 62e:	855a                	mv	a0,s6
+ 630:	e43ff0ef          	jal	472 <putc>
+        putc(fd, c0);
+ 634:	85ca                	mv	a1,s2
+ 636:	855a                	mv	a0,s6
+ 638:	e3bff0ef          	jal	472 <putc>
+      state = 0;
+ 63c:	4981                	li	s3,0
+ 63e:	b791                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, uint64), 10, 1);
+ 640:	008b8913          	addi	s2,s7,8
+ 644:	4685                	li	a3,1
+ 646:	4629                	li	a2,10
+ 648:	000ba583          	lw	a1,0(s7)
+ 64c:	855a                	mv	a0,s6
+ 64e:	e43ff0ef          	jal	490 <printint>
+        i += 1;
+ 652:	2485                	addiw	s1,s1,1
+        printint(fd, va_arg(ap, uint64), 10, 1);
+ 654:	8bca                	mv	s7,s2
+      state = 0;
+ 656:	4981                	li	s3,0
+        i += 1;
+ 658:	b72d                	j	582 <vprintf+0x4a>
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'd'){
+ 65a:	06400793          	li	a5,100
+ 65e:	02f60763          	beq	a2,a5,68c <vprintf+0x154>
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'u'){
+ 662:	07500793          	li	a5,117
+ 666:	06f60963          	beq	a2,a5,6d8 <vprintf+0x1a0>
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'x'){
+ 66a:	07800793          	li	a5,120
+ 66e:	faf61ee3          	bne	a2,a5,62a <vprintf+0xf2>
+        printint(fd, va_arg(ap, uint64), 16, 0);
+ 672:	008b8913          	addi	s2,s7,8
+ 676:	4681                	li	a3,0
+ 678:	4641                	li	a2,16
+ 67a:	000ba583          	lw	a1,0(s7)
+ 67e:	855a                	mv	a0,s6
+ 680:	e11ff0ef          	jal	490 <printint>
+        i += 2;
+ 684:	2489                	addiw	s1,s1,2
+        printint(fd, va_arg(ap, uint64), 16, 0);
+ 686:	8bca                	mv	s7,s2
+      state = 0;
+ 688:	4981                	li	s3,0
+        i += 2;
+ 68a:	bde5                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, uint64), 10, 1);
+ 68c:	008b8913          	addi	s2,s7,8
+ 690:	4685                	li	a3,1
+ 692:	4629                	li	a2,10
+ 694:	000ba583          	lw	a1,0(s7)
+ 698:	855a                	mv	a0,s6
+ 69a:	df7ff0ef          	jal	490 <printint>
+        i += 2;
+ 69e:	2489                	addiw	s1,s1,2
+        printint(fd, va_arg(ap, uint64), 10, 1);
+ 6a0:	8bca                	mv	s7,s2
+      state = 0;
+ 6a2:	4981                	li	s3,0
+        i += 2;
+ 6a4:	bdf9                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, int), 10, 0);
+ 6a6:	008b8913          	addi	s2,s7,8
+ 6aa:	4681                	li	a3,0
+ 6ac:	4629                	li	a2,10
+ 6ae:	000ba583          	lw	a1,0(s7)
+ 6b2:	855a                	mv	a0,s6
+ 6b4:	dddff0ef          	jal	490 <printint>
+ 6b8:	8bca                	mv	s7,s2
+      state = 0;
+ 6ba:	4981                	li	s3,0
+ 6bc:	b5d9                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 6be:	008b8913          	addi	s2,s7,8
+ 6c2:	4681                	li	a3,0
+ 6c4:	4629                	li	a2,10
+ 6c6:	000ba583          	lw	a1,0(s7)
+ 6ca:	855a                	mv	a0,s6
+ 6cc:	dc5ff0ef          	jal	490 <printint>
+        i += 1;
+ 6d0:	2485                	addiw	s1,s1,1
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 6d2:	8bca                	mv	s7,s2
+      state = 0;
+ 6d4:	4981                	li	s3,0
+        i += 1;
+ 6d6:	b575                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 6d8:	008b8913          	addi	s2,s7,8
+ 6dc:	4681                	li	a3,0
+ 6de:	4629                	li	a2,10
+ 6e0:	000ba583          	lw	a1,0(s7)
+ 6e4:	855a                	mv	a0,s6
+ 6e6:	dabff0ef          	jal	490 <printint>
+        i += 2;
+ 6ea:	2489                	addiw	s1,s1,2
+        printint(fd, va_arg(ap, uint64), 10, 0);
+ 6ec:	8bca                	mv	s7,s2
+      state = 0;
+ 6ee:	4981                	li	s3,0
+        i += 2;
+ 6f0:	bd49                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, int), 16, 0);
+ 6f2:	008b8913          	addi	s2,s7,8
+ 6f6:	4681                	li	a3,0
+ 6f8:	4641                	li	a2,16
+ 6fa:	000ba583          	lw	a1,0(s7)
+ 6fe:	855a                	mv	a0,s6
+ 700:	d91ff0ef          	jal	490 <printint>
+ 704:	8bca                	mv	s7,s2
+      state = 0;
+ 706:	4981                	li	s3,0
+ 708:	bdad                	j	582 <vprintf+0x4a>
+        printint(fd, va_arg(ap, uint64), 16, 0);
+ 70a:	008b8913          	addi	s2,s7,8
+ 70e:	4681                	li	a3,0
+ 710:	4641                	li	a2,16
+ 712:	000ba583          	lw	a1,0(s7)
+ 716:	855a                	mv	a0,s6
+ 718:	d79ff0ef          	jal	490 <printint>
+        i += 1;
+ 71c:	2485                	addiw	s1,s1,1
+        printint(fd, va_arg(ap, uint64), 16, 0);
+ 71e:	8bca                	mv	s7,s2
+      state = 0;
+ 720:	4981                	li	s3,0
+        i += 1;
+ 722:	b585                	j	582 <vprintf+0x4a>
+ 724:	e06a                	sd	s10,0(sp)
+        printptr(fd, va_arg(ap, uint64));
+ 726:	008b8d13          	addi	s10,s7,8
+ 72a:	000bb983          	ld	s3,0(s7)
+  putc(fd, '0');
+ 72e:	03000593          	li	a1,48
+ 732:	855a                	mv	a0,s6
+ 734:	d3fff0ef          	jal	472 <putc>
+  putc(fd, 'x');
+ 738:	07800593          	li	a1,120
+ 73c:	855a                	mv	a0,s6
+ 73e:	d35ff0ef          	jal	472 <putc>
+ 742:	4941                	li	s2,16
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+ 744:	00000b97          	auipc	s7,0x0
+ 748:	2c4b8b93          	addi	s7,s7,708 # a08 <digits>
+ 74c:	03c9d793          	srli	a5,s3,0x3c
+ 750:	97de                	add	a5,a5,s7
+ 752:	0007c583          	lbu	a1,0(a5)
+ 756:	855a                	mv	a0,s6
+ 758:	d1bff0ef          	jal	472 <putc>
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+ 75c:	0992                	slli	s3,s3,0x4
+ 75e:	397d                	addiw	s2,s2,-1
+ 760:	fe0916e3          	bnez	s2,74c <vprintf+0x214>
+        printptr(fd, va_arg(ap, uint64));
+ 764:	8bea                	mv	s7,s10
+      state = 0;
+ 766:	4981                	li	s3,0
+ 768:	6d02                	ld	s10,0(sp)
+ 76a:	bd21                	j	582 <vprintf+0x4a>
+        if((s = va_arg(ap, char*)) == 0)
+ 76c:	008b8993          	addi	s3,s7,8
+ 770:	000bb903          	ld	s2,0(s7)
+ 774:	00090f63          	beqz	s2,792 <vprintf+0x25a>
+        for(; *s; s++)
+ 778:	00094583          	lbu	a1,0(s2)
+ 77c:	c195                	beqz	a1,7a0 <vprintf+0x268>
+          putc(fd, *s);
+ 77e:	855a                	mv	a0,s6
+ 780:	cf3ff0ef          	jal	472 <putc>
+        for(; *s; s++)
+ 784:	0905                	addi	s2,s2,1
+ 786:	00094583          	lbu	a1,0(s2)
+ 78a:	f9f5                	bnez	a1,77e <vprintf+0x246>
+        if((s = va_arg(ap, char*)) == 0)
+ 78c:	8bce                	mv	s7,s3
+      state = 0;
+ 78e:	4981                	li	s3,0
+ 790:	bbcd                	j	582 <vprintf+0x4a>
+          s = "(null)";
+ 792:	00000917          	auipc	s2,0x0
+ 796:	26e90913          	addi	s2,s2,622 # a00 <malloc+0x162>
+        for(; *s; s++)
+ 79a:	02800593          	li	a1,40
+ 79e:	b7c5                	j	77e <vprintf+0x246>
+        if((s = va_arg(ap, char*)) == 0)
+ 7a0:	8bce                	mv	s7,s3
+      state = 0;
+ 7a2:	4981                	li	s3,0
+ 7a4:	bbf9                	j	582 <vprintf+0x4a>
+ 7a6:	64a6                	ld	s1,72(sp)
+ 7a8:	79e2                	ld	s3,56(sp)
+ 7aa:	7a42                	ld	s4,48(sp)
+ 7ac:	7aa2                	ld	s5,40(sp)
+ 7ae:	7b02                	ld	s6,32(sp)
+ 7b0:	6be2                	ld	s7,24(sp)
+ 7b2:	6c42                	ld	s8,16(sp)
+ 7b4:	6ca2                	ld	s9,8(sp)
+    }
+  }
+}
+ 7b6:	60e6                	ld	ra,88(sp)
+ 7b8:	6446                	ld	s0,80(sp)
+ 7ba:	6906                	ld	s2,64(sp)
+ 7bc:	6125                	addi	sp,sp,96
+ 7be:	8082                	ret
+
+00000000000007c0 <fprintf>:
+
+void
+fprintf(int fd, const char *fmt, ...)
+{
+ 7c0:	715d                	addi	sp,sp,-80
+ 7c2:	ec06                	sd	ra,24(sp)
+ 7c4:	e822                	sd	s0,16(sp)
+ 7c6:	1000                	addi	s0,sp,32
+ 7c8:	e010                	sd	a2,0(s0)
+ 7ca:	e414                	sd	a3,8(s0)
+ 7cc:	e818                	sd	a4,16(s0)
+ 7ce:	ec1c                	sd	a5,24(s0)
+ 7d0:	03043023          	sd	a6,32(s0)
+ 7d4:	03143423          	sd	a7,40(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 7d8:	fe843423          	sd	s0,-24(s0)
+  vprintf(fd, fmt, ap);
+ 7dc:	8622                	mv	a2,s0
+ 7de:	d5bff0ef          	jal	538 <vprintf>
+}
+ 7e2:	60e2                	ld	ra,24(sp)
+ 7e4:	6442                	ld	s0,16(sp)
+ 7e6:	6161                	addi	sp,sp,80
+ 7e8:	8082                	ret
+
+00000000000007ea <printf>:
+
+void
+printf(const char *fmt, ...)
+{
+ 7ea:	711d                	addi	sp,sp,-96
+ 7ec:	ec06                	sd	ra,24(sp)
+ 7ee:	e822                	sd	s0,16(sp)
+ 7f0:	1000                	addi	s0,sp,32
+ 7f2:	e40c                	sd	a1,8(s0)
+ 7f4:	e810                	sd	a2,16(s0)
+ 7f6:	ec14                	sd	a3,24(s0)
+ 7f8:	f018                	sd	a4,32(s0)
+ 7fa:	f41c                	sd	a5,40(s0)
+ 7fc:	03043823          	sd	a6,48(s0)
+ 800:	03143c23          	sd	a7,56(s0)
+  va_list ap;
+
+  va_start(ap, fmt);
+ 804:	00840613          	addi	a2,s0,8
+ 808:	fec43423          	sd	a2,-24(s0)
+  vprintf(1, fmt, ap);
+ 80c:	85aa                	mv	a1,a0
+ 80e:	4505                	li	a0,1
+ 810:	d29ff0ef          	jal	538 <vprintf>
+}
+ 814:	60e2                	ld	ra,24(sp)
+ 816:	6442                	ld	s0,16(sp)
+ 818:	6125                	addi	sp,sp,96
+ 81a:	8082                	ret
+
+000000000000081c <free>:
+static Header base;
+static Header *freep;
+
+void
+free(void *ap)
+{
+ 81c:	1141                	addi	sp,sp,-16
+ 81e:	e422                	sd	s0,8(sp)
+ 820:	0800                	addi	s0,sp,16
+  Header *bp, *p;
+
+  bp = (Header*)ap - 1;
+ 822:	ff050693          	addi	a3,a0,-16
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 826:	00000797          	auipc	a5,0x0
+ 82a:	7da7b783          	ld	a5,2010(a5) # 1000 <freep>
+ 82e:	a02d                	j	858 <free+0x3c>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+      break;
+  if(bp + bp->s.size == p->s.ptr){
+    bp->s.size += p->s.ptr->s.size;
+ 830:	4618                	lw	a4,8(a2)
+ 832:	9f2d                	addw	a4,a4,a1
+ 834:	fee52c23          	sw	a4,-8(a0)
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 838:	6398                	ld	a4,0(a5)
+ 83a:	6310                	ld	a2,0(a4)
+ 83c:	a83d                	j	87a <free+0x5e>
+  } else
+    bp->s.ptr = p->s.ptr;
+  if(p + p->s.size == bp){
+    p->s.size += bp->s.size;
+ 83e:	ff852703          	lw	a4,-8(a0)
+ 842:	9f31                	addw	a4,a4,a2
+ 844:	c798                	sw	a4,8(a5)
+    p->s.ptr = bp->s.ptr;
+ 846:	ff053683          	ld	a3,-16(a0)
+ 84a:	a091                	j	88e <free+0x72>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 84c:	6398                	ld	a4,0(a5)
+ 84e:	00e7e463          	bltu	a5,a4,856 <free+0x3a>
+ 852:	00e6ea63          	bltu	a3,a4,866 <free+0x4a>
+{
+ 856:	87ba                	mv	a5,a4
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+ 858:	fed7fae3          	bgeu	a5,a3,84c <free+0x30>
+ 85c:	6398                	ld	a4,0(a5)
+ 85e:	00e6e463          	bltu	a3,a4,866 <free+0x4a>
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+ 862:	fee7eae3          	bltu	a5,a4,856 <free+0x3a>
+  if(bp + bp->s.size == p->s.ptr){
+ 866:	ff852583          	lw	a1,-8(a0)
+ 86a:	6390                	ld	a2,0(a5)
+ 86c:	02059813          	slli	a6,a1,0x20
+ 870:	01c85713          	srli	a4,a6,0x1c
+ 874:	9736                	add	a4,a4,a3
+ 876:	fae60de3          	beq	a2,a4,830 <free+0x14>
+    bp->s.ptr = p->s.ptr->s.ptr;
+ 87a:	fec53823          	sd	a2,-16(a0)
+  if(p + p->s.size == bp){
+ 87e:	4790                	lw	a2,8(a5)
+ 880:	02061593          	slli	a1,a2,0x20
+ 884:	01c5d713          	srli	a4,a1,0x1c
+ 888:	973e                	add	a4,a4,a5
+ 88a:	fae68ae3          	beq	a3,a4,83e <free+0x22>
+    p->s.ptr = bp->s.ptr;
+ 88e:	e394                	sd	a3,0(a5)
+  } else
+    p->s.ptr = bp;
+  freep = p;
+ 890:	00000717          	auipc	a4,0x0
+ 894:	76f73823          	sd	a5,1904(a4) # 1000 <freep>
+}
+ 898:	6422                	ld	s0,8(sp)
+ 89a:	0141                	addi	sp,sp,16
+ 89c:	8082                	ret
+
+000000000000089e <malloc>:
+  return freep;
+}
+
+void*
+malloc(uint nbytes)
+{
+ 89e:	7139                	addi	sp,sp,-64
+ 8a0:	fc06                	sd	ra,56(sp)
+ 8a2:	f822                	sd	s0,48(sp)
+ 8a4:	f426                	sd	s1,40(sp)
+ 8a6:	ec4e                	sd	s3,24(sp)
+ 8a8:	0080                	addi	s0,sp,64
+  Header *p, *prevp;
+  uint nunits;
+
+  nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
+ 8aa:	02051493          	slli	s1,a0,0x20
+ 8ae:	9081                	srli	s1,s1,0x20
+ 8b0:	04bd                	addi	s1,s1,15
+ 8b2:	8091                	srli	s1,s1,0x4
+ 8b4:	0014899b          	addiw	s3,s1,1
+ 8b8:	0485                	addi	s1,s1,1
+  if((prevp = freep) == 0){
+ 8ba:	00000517          	auipc	a0,0x0
+ 8be:	74653503          	ld	a0,1862(a0) # 1000 <freep>
+ 8c2:	c915                	beqz	a0,8f6 <malloc+0x58>
+    base.s.ptr = freep = prevp = &base;
+    base.s.size = 0;
+  }
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ 8c4:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ 8c6:	4798                	lw	a4,8(a5)
+ 8c8:	08977a63          	bgeu	a4,s1,95c <malloc+0xbe>
+ 8cc:	f04a                	sd	s2,32(sp)
+ 8ce:	e852                	sd	s4,16(sp)
+ 8d0:	e456                	sd	s5,8(sp)
+ 8d2:	e05a                	sd	s6,0(sp)
+  if(nu < 4096)
+ 8d4:	8a4e                	mv	s4,s3
+ 8d6:	0009871b          	sext.w	a4,s3
+ 8da:	6685                	lui	a3,0x1
+ 8dc:	00d77363          	bgeu	a4,a3,8e2 <malloc+0x44>
+ 8e0:	6a05                	lui	s4,0x1
+ 8e2:	000a0b1b          	sext.w	s6,s4
+  p = sbrk(nu * sizeof(Header));
+ 8e6:	004a1a1b          	slliw	s4,s4,0x4
+        p->s.size = nunits;
+      }
+      freep = prevp;
+      return (void*)(p + 1);
+    }
+    if(p == freep)
+ 8ea:	00000917          	auipc	s2,0x0
+ 8ee:	71690913          	addi	s2,s2,1814 # 1000 <freep>
+  if(p == (char*)-1)
+ 8f2:	5afd                	li	s5,-1
+ 8f4:	a081                	j	934 <malloc+0x96>
+ 8f6:	f04a                	sd	s2,32(sp)
+ 8f8:	e852                	sd	s4,16(sp)
+ 8fa:	e456                	sd	s5,8(sp)
+ 8fc:	e05a                	sd	s6,0(sp)
+    base.s.ptr = freep = prevp = &base;
+ 8fe:	00000797          	auipc	a5,0x0
+ 902:	71278793          	addi	a5,a5,1810 # 1010 <base>
+ 906:	00000717          	auipc	a4,0x0
+ 90a:	6ef73d23          	sd	a5,1786(a4) # 1000 <freep>
+ 90e:	e39c                	sd	a5,0(a5)
+    base.s.size = 0;
+ 910:	0007a423          	sw	zero,8(a5)
+    if(p->s.size >= nunits){
+ 914:	b7c1                	j	8d4 <malloc+0x36>
+        prevp->s.ptr = p->s.ptr;
+ 916:	6398                	ld	a4,0(a5)
+ 918:	e118                	sd	a4,0(a0)
+ 91a:	a8a9                	j	974 <malloc+0xd6>
+  hp->s.size = nu;
+ 91c:	01652423          	sw	s6,8(a0)
+  free((void*)(hp + 1));
+ 920:	0541                	addi	a0,a0,16
+ 922:	efbff0ef          	jal	81c <free>
+  return freep;
+ 926:	00093503          	ld	a0,0(s2)
+      if((p = morecore(nunits)) == 0)
+ 92a:	c12d                	beqz	a0,98c <malloc+0xee>
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+ 92c:	611c                	ld	a5,0(a0)
+    if(p->s.size >= nunits){
+ 92e:	4798                	lw	a4,8(a5)
+ 930:	02977263          	bgeu	a4,s1,954 <malloc+0xb6>
+    if(p == freep)
+ 934:	00093703          	ld	a4,0(s2)
+ 938:	853e                	mv	a0,a5
+ 93a:	fef719e3          	bne	a4,a5,92c <malloc+0x8e>
+  p = sbrk(nu * sizeof(Header));
+ 93e:	8552                	mv	a0,s4
+ 940:	b1bff0ef          	jal	45a <sbrk>
+  if(p == (char*)-1)
+ 944:	fd551ce3          	bne	a0,s5,91c <malloc+0x7e>
+        return 0;
+ 948:	4501                	li	a0,0
+ 94a:	7902                	ld	s2,32(sp)
+ 94c:	6a42                	ld	s4,16(sp)
+ 94e:	6aa2                	ld	s5,8(sp)
+ 950:	6b02                	ld	s6,0(sp)
+ 952:	a03d                	j	980 <malloc+0xe2>
+ 954:	7902                	ld	s2,32(sp)
+ 956:	6a42                	ld	s4,16(sp)
+ 958:	6aa2                	ld	s5,8(sp)
+ 95a:	6b02                	ld	s6,0(sp)
+      if(p->s.size == nunits)
+ 95c:	fae48de3          	beq	s1,a4,916 <malloc+0x78>
+        p->s.size -= nunits;
+ 960:	4137073b          	subw	a4,a4,s3
+ 964:	c798                	sw	a4,8(a5)
+        p += p->s.size;
+ 966:	02071693          	slli	a3,a4,0x20
+ 96a:	01c6d713          	srli	a4,a3,0x1c
+ 96e:	97ba                	add	a5,a5,a4
+        p->s.size = nunits;
+ 970:	0137a423          	sw	s3,8(a5)
+      freep = prevp;
+ 974:	00000717          	auipc	a4,0x0
+ 978:	68a73623          	sd	a0,1676(a4) # 1000 <freep>
+      return (void*)(p + 1);
+ 97c:	01078513          	addi	a0,a5,16
+  }
+}
+ 980:	70e2                	ld	ra,56(sp)
+ 982:	7442                	ld	s0,48(sp)
+ 984:	74a2                	ld	s1,40(sp)
+ 986:	69e2                	ld	s3,24(sp)
+ 988:	6121                	addi	sp,sp,64
+ 98a:	8082                	ret
+ 98c:	7902                	ld	s2,32(sp)
+ 98e:	6a42                	ld	s4,16(sp)
+ 990:	6aa2                	ld	s5,8(sp)
+ 992:	6b02                	ld	s6,0(sp)
+ 994:	b7f5                	j	980 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/primes.c b/xv6-labs-2024/user/primes.c
new file mode 100644
index 0000000..a3954e0
--- /dev/null
+++ b/xv6-labs-2024/user/primes.c
@@ -0,0 +1,81 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+void primes(int cur_pipe)__attribute__((noreturn));
+
+void primes(int cur_pipe) {
+    int prime;
+    if (read(cur_pipe, &prime, sizeof(prime)) == 0) {
+        close(cur_pipe);
+        exit(0);
+    }
+
+    // Print the prime number
+    printf("prime: %d\n", prime);
+
+    int fd[2];
+    if (pipe(fd) < 0) {
+        printf("Error creating pipe\n");
+        close(cur_pipe);
+        exit(1);
+    }
+
+    int num;
+    int pid = fork();
+    if (pid == 0) {
+        // Child process to handle next prime filtering
+        close(fd[1]);  // Close write end in child
+        close(cur_pipe);  // Close current pipe in child, You got a buffer overflow if you not close this pip
+        primes(fd[0]); // Recursive call
+    } else {
+        // Parent process filters numbers
+        close(fd[0]);  // Close read end in parent
+
+        while (read(cur_pipe, &num, sizeof(num)) > 0) {
+            // Only pass numbers that are not divisible by the current prime
+            if (num % prime != 0) {
+                if (write(fd[1], &num, sizeof(num)) < 0) {
+                    printf("Error writing to pipe\n");
+                    break;
+                }
+            }
+        }
+
+        // Close pipes
+        close(fd[1]);
+        close(cur_pipe);
+        wait(0);  // Wait for child process
+        exit(0);  // Exit after child finishes
+    }
+}
+
+int main() {
+    int fd[2];
+    if (pipe(fd) < 0) {
+        printf("Error creating initial pipe\n");
+        exit(1);
+    }
+
+    int pid = fork();
+    if (pid == 0) {
+        // Child process to handle prime numbers
+        close(fd[1]);  // Close write end of the pipe in child
+        primes(fd[0]); // Start the prime number filtering
+    } else {
+        // Parent process generates numbers and writes them to the pipe
+        close(fd[0]);  // Close read end of the pipe in parent
+
+        for (int i = 2; i <= 280; i++) {
+            if (write(fd[1], &i, sizeof(i)) < 0) {
+                printf("Error writing to pipe\n");
+                break;
+            }
+        }
+
+        close(fd[1]);  // Close write end after sending all numbers
+        wait(0);       // Wait for child process to finish
+    }
+
+    exit(0);
+}
diff --git a/xv6-labs-2024/user/primes.d b/xv6-labs-2024/user/primes.d
new file mode 100644
index 0000000..482db87
--- /dev/null
+++ b/xv6-labs-2024/user/primes.d
@@ -0,0 +1,2 @@
+user/primes.o: user/primes.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/primes.o b/xv6-labs-2024/user/primes.o
new file mode 100644
index 0000000..2513534
Binary files /dev/null and b/xv6-labs-2024/user/primes.o differ
diff --git a/xv6-labs-2024/user/primes.sym b/xv6-labs-2024/user/primes.sym
new file mode 100644
index 0000000..d72fb3e
--- /dev/null
+++ b/xv6-labs-2024/user/primes.sym
@@ -0,0 +1,64 @@
+0000000000000000 .text
+0000000000000998 .rodata
+0000000000000a20 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 primes.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000472 putc
+0000000000000490 printint
+0000000000000a08 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+000000000000017a strcpy
+00000000000007ea printf
+0000000000000324 memmove
+000000000000041a mknod
+0000000000000232 gets
+0000000000000452 getpid
+00000000000003b6 memcpy
+000000000000089e malloc
+0000000000000462 sleep
+00000000000003e2 pipe
+00000000000003f2 write
+000000000000042a fstat
+00000000000007c0 fprintf
+0000000000000402 kill
+0000000000000538 vprintf
+0000000000000442 chdir
+000000000000040a exec
+00000000000003da wait
+00000000000003ea read
+0000000000000422 unlink
+000000000000037c memcmp
+00000000000003ca fork
+0000000000000000 primes
+000000000000045a sbrk
+000000000000046a uptime
+00000000000001ec memset
+00000000000000d2 main
+0000000000000196 strcmp
+000000000000044a dup
+00000000000002a2 stat
+0000000000000432 link
+00000000000003d2 exit
+0000000000000168 start
+00000000000002dc atoi
+00000000000001c2 strlen
+0000000000000412 open
+000000000000020e strchr
+000000000000043a mkdir
+00000000000003fa close
+000000000000081c free
diff --git a/xv6-labs-2024/user/printf.c b/xv6-labs-2024/user/printf.c
new file mode 100644
index 0000000..8178746
--- /dev/null
+++ b/xv6-labs-2024/user/printf.c
@@ -0,0 +1,157 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+#include <stdarg.h>
+
+static char digits[] = "0123456789ABCDEF";
+
+static void
+putc(int fd, char c)
+{
+  write(fd, &c, 1);
+}
+
+static void
+printint(int fd, int xx, int base, int sgn)
+{
+  char buf[16];
+  int i, neg;
+  uint x;
+
+  neg = 0;
+  if(sgn && xx < 0){
+    neg = 1;
+    x = -xx;
+  } else {
+    x = xx;
+  }
+
+  i = 0;
+  do{
+    buf[i++] = digits[x % base];
+  }while((x /= base) != 0);
+  if(neg)
+    buf[i++] = '-';
+
+  while(--i >= 0)
+    putc(fd, buf[i]);
+}
+
+static void
+printptr(int fd, uint64 x) {
+  int i;
+  putc(fd, '0');
+  putc(fd, 'x');
+  for (i = 0; i < (sizeof(uint64) * 2); i++, x <<= 4)
+    putc(fd, digits[x >> (sizeof(uint64) * 8 - 4)]);
+}
+
+// Print to the given fd. Only understands %d, %x, %p, %s.
+void
+vprintf(int fd, const char *fmt, va_list ap)
+{
+  char *s;
+  int c0, c1, c2, i, state;
+
+  state = 0;
+  for(i = 0; fmt[i]; i++){
+    c0 = fmt[i] & 0xff;
+    if(state == 0){
+      if(c0 == '%'){
+        state = '%';
+      } else {
+        putc(fd, c0);
+      }
+    } else if(state == '%'){
+      c1 = c2 = 0;
+      if(c0) c1 = fmt[i+1] & 0xff;
+      if(c1) c2 = fmt[i+2] & 0xff;
+      if(c0 == 'd'){
+        printint(fd, va_arg(ap, int), 10, 1);
+      } else if(c0 == 'l' && c1 == 'd'){
+        printint(fd, va_arg(ap, uint64), 10, 1);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'd'){
+        printint(fd, va_arg(ap, uint64), 10, 1);
+        i += 2;
+      } else if(c0 == 'u'){
+        printint(fd, va_arg(ap, int), 10, 0);
+      } else if(c0 == 'l' && c1 == 'u'){
+        printint(fd, va_arg(ap, uint64), 10, 0);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'u'){
+        printint(fd, va_arg(ap, uint64), 10, 0);
+        i += 2;
+      } else if(c0 == 'x'){
+        printint(fd, va_arg(ap, int), 16, 0);
+      } else if(c0 == 'l' && c1 == 'x'){
+        printint(fd, va_arg(ap, uint64), 16, 0);
+        i += 1;
+      } else if(c0 == 'l' && c1 == 'l' && c2 == 'x'){
+        printint(fd, va_arg(ap, uint64), 16, 0);
+        i += 2;
+      } else if(c0 == 'p'){
+        printptr(fd, va_arg(ap, uint64));
+      } else if(c0 == 's'){
+        if((s = va_arg(ap, char*)) == 0)
+          s = "(null)";
+        for(; *s; s++)
+          putc(fd, *s);
+      } else if(c0 == '%'){
+        putc(fd, '%');
+      } else {
+        // Unknown % sequence.  Print it to draw attention.
+        putc(fd, '%');
+        putc(fd, c0);
+      }
+
+#if 0
+      if(c == 'd'){
+        printint(fd, va_arg(ap, int), 10, 1);
+      } else if(c == 'l') {
+        printint(fd, va_arg(ap, uint64), 10, 0);
+      } else if(c == 'x') {
+        printint(fd, va_arg(ap, int), 16, 0);
+      } else if(c == 'p') {
+        printptr(fd, va_arg(ap, uint64));
+      } else if(c == 's'){
+        s = va_arg(ap, char*);
+        if(s == 0)
+          s = "(null)";
+        while(*s != 0){
+          putc(fd, *s);
+          s++;
+        }
+      } else if(c == 'c'){
+        putc(fd, va_arg(ap, uint));
+      } else if(c == '%'){
+        putc(fd, c);
+      } else {
+        // Unknown % sequence.  Print it to draw attention.
+        putc(fd, '%');
+        putc(fd, c);
+      }
+#endif
+      state = 0;
+    }
+  }
+}
+
+void
+fprintf(int fd, const char *fmt, ...)
+{
+  va_list ap;
+
+  va_start(ap, fmt);
+  vprintf(fd, fmt, ap);
+}
+
+void
+printf(const char *fmt, ...)
+{
+  va_list ap;
+
+  va_start(ap, fmt);
+  vprintf(1, fmt, ap);
+}
diff --git a/xv6-labs-2024/user/printf.d b/xv6-labs-2024/user/printf.d
new file mode 100644
index 0000000..4a6f4ef
--- /dev/null
+++ b/xv6-labs-2024/user/printf.d
@@ -0,0 +1,3 @@
+user/printf.o: user/printf.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h \
+ /usr/lib/gcc-cross/riscv64-linux-gnu/13/include/stdarg.h
diff --git a/xv6-labs-2024/user/printf.o b/xv6-labs-2024/user/printf.o
new file mode 100644
index 0000000..b6d5e01
Binary files /dev/null and b/xv6-labs-2024/user/printf.o differ
diff --git a/xv6-labs-2024/user/rm.asm b/xv6-labs-2024/user/rm.asm
new file mode 100644
index 0000000..5d9299f
--- /dev/null
+++ b/xv6-labs-2024/user/rm.asm
@@ -0,0 +1,1065 @@
+
+user/_rm:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	1000                	addi	s0,sp,32
+   8:	4785                	li	a5,1
+   a:	02a7d763          	bge	a5,a0,38 <main+0x38>
+   e:	e426                	sd	s1,8(sp)
+  10:	e04a                	sd	s2,0(sp)
+  12:	00858493          	addi	s1,a1,8
+  16:	ffe5091b          	addiw	s2,a0,-2
+  1a:	02091793          	slli	a5,s2,0x20
+  1e:	01d7d913          	srli	s2,a5,0x1d
+  22:	05c1                	addi	a1,a1,16
+  24:	992e                	add	s2,s2,a1
+  26:	6088                	ld	a0,0(s1)
+  28:	2f8000ef          	jal	320 <unlink>
+  2c:	02054263          	bltz	a0,50 <main+0x50>
+  30:	04a1                	addi	s1,s1,8
+  32:	ff249ae3          	bne	s1,s2,26 <main+0x26>
+  36:	a02d                	j	60 <main+0x60>
+  38:	e426                	sd	s1,8(sp)
+  3a:	e04a                	sd	s2,0(sp)
+  3c:	00001597          	auipc	a1,0x1
+  40:	86458593          	addi	a1,a1,-1948 # 8a0 <malloc+0x104>
+  44:	4509                	li	a0,2
+  46:	678000ef          	jal	6be <fprintf>
+  4a:	4505                	li	a0,1
+  4c:	284000ef          	jal	2d0 <exit>
+  50:	6090                	ld	a2,0(s1)
+  52:	00001597          	auipc	a1,0x1
+  56:	86658593          	addi	a1,a1,-1946 # 8b8 <malloc+0x11c>
+  5a:	4509                	li	a0,2
+  5c:	662000ef          	jal	6be <fprintf>
+  60:	4501                	li	a0,0
+  62:	26e000ef          	jal	2d0 <exit>
+
+0000000000000066 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  66:	1141                	addi	sp,sp,-16
+  68:	e406                	sd	ra,8(sp)
+  6a:	e022                	sd	s0,0(sp)
+  6c:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  6e:	f93ff0ef          	jal	0 <main>
+  exit(0);
+  72:	4501                	li	a0,0
+  74:	25c000ef          	jal	2d0 <exit>
+
+0000000000000078 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  78:	1141                	addi	sp,sp,-16
+  7a:	e422                	sd	s0,8(sp)
+  7c:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  7e:	87aa                	mv	a5,a0
+  80:	0585                	addi	a1,a1,1
+  82:	0785                	addi	a5,a5,1
+  84:	fff5c703          	lbu	a4,-1(a1)
+  88:	fee78fa3          	sb	a4,-1(a5)
+  8c:	fb75                	bnez	a4,80 <strcpy+0x8>
+    ;
+  return os;
+}
+  8e:	6422                	ld	s0,8(sp)
+  90:	0141                	addi	sp,sp,16
+  92:	8082                	ret
+
+0000000000000094 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  94:	1141                	addi	sp,sp,-16
+  96:	e422                	sd	s0,8(sp)
+  98:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  9a:	00054783          	lbu	a5,0(a0)
+  9e:	cb91                	beqz	a5,b2 <strcmp+0x1e>
+  a0:	0005c703          	lbu	a4,0(a1)
+  a4:	00f71763          	bne	a4,a5,b2 <strcmp+0x1e>
+    p++, q++;
+  a8:	0505                	addi	a0,a0,1
+  aa:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  ac:	00054783          	lbu	a5,0(a0)
+  b0:	fbe5                	bnez	a5,a0 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  b2:	0005c503          	lbu	a0,0(a1)
+}
+  b6:	40a7853b          	subw	a0,a5,a0
+  ba:	6422                	ld	s0,8(sp)
+  bc:	0141                	addi	sp,sp,16
+  be:	8082                	ret
+
+00000000000000c0 <strlen>:
+
+uint
+strlen(const char *s)
+{
+  c0:	1141                	addi	sp,sp,-16
+  c2:	e422                	sd	s0,8(sp)
+  c4:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  c6:	00054783          	lbu	a5,0(a0)
+  ca:	cf91                	beqz	a5,e6 <strlen+0x26>
+  cc:	0505                	addi	a0,a0,1
+  ce:	87aa                	mv	a5,a0
+  d0:	86be                	mv	a3,a5
+  d2:	0785                	addi	a5,a5,1
+  d4:	fff7c703          	lbu	a4,-1(a5)
+  d8:	ff65                	bnez	a4,d0 <strlen+0x10>
+  da:	40a6853b          	subw	a0,a3,a0
+  de:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  e0:	6422                	ld	s0,8(sp)
+  e2:	0141                	addi	sp,sp,16
+  e4:	8082                	ret
+  for(n = 0; s[n]; n++)
+  e6:	4501                	li	a0,0
+  e8:	bfe5                	j	e0 <strlen+0x20>
+
+00000000000000ea <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  ea:	1141                	addi	sp,sp,-16
+  ec:	e422                	sd	s0,8(sp)
+  ee:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+  f0:	ca19                	beqz	a2,106 <memset+0x1c>
+  f2:	87aa                	mv	a5,a0
+  f4:	1602                	slli	a2,a2,0x20
+  f6:	9201                	srli	a2,a2,0x20
+  f8:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+  fc:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 100:	0785                	addi	a5,a5,1
+ 102:	fee79de3          	bne	a5,a4,fc <memset+0x12>
+  }
+  return dst;
+}
+ 106:	6422                	ld	s0,8(sp)
+ 108:	0141                	addi	sp,sp,16
+ 10a:	8082                	ret
+
+000000000000010c <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 10c:	1141                	addi	sp,sp,-16
+ 10e:	e422                	sd	s0,8(sp)
+ 110:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 112:	00054783          	lbu	a5,0(a0)
+ 116:	cb99                	beqz	a5,12c <strchr+0x20>
+    if(*s == c)
+ 118:	00f58763          	beq	a1,a5,126 <strchr+0x1a>
+  for(; *s; s++)
+ 11c:	0505                	addi	a0,a0,1
+ 11e:	00054783          	lbu	a5,0(a0)
+ 122:	fbfd                	bnez	a5,118 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 124:	4501                	li	a0,0
+}
+ 126:	6422                	ld	s0,8(sp)
+ 128:	0141                	addi	sp,sp,16
+ 12a:	8082                	ret
+  return 0;
+ 12c:	4501                	li	a0,0
+ 12e:	bfe5                	j	126 <strchr+0x1a>
+
+0000000000000130 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 130:	711d                	addi	sp,sp,-96
+ 132:	ec86                	sd	ra,88(sp)
+ 134:	e8a2                	sd	s0,80(sp)
+ 136:	e4a6                	sd	s1,72(sp)
+ 138:	e0ca                	sd	s2,64(sp)
+ 13a:	fc4e                	sd	s3,56(sp)
+ 13c:	f852                	sd	s4,48(sp)
+ 13e:	f456                	sd	s5,40(sp)
+ 140:	f05a                	sd	s6,32(sp)
+ 142:	ec5e                	sd	s7,24(sp)
+ 144:	1080                	addi	s0,sp,96
+ 146:	8baa                	mv	s7,a0
+ 148:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 14a:	892a                	mv	s2,a0
+ 14c:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 14e:	4aa9                	li	s5,10
+ 150:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 152:	89a6                	mv	s3,s1
+ 154:	2485                	addiw	s1,s1,1
+ 156:	0344d663          	bge	s1,s4,182 <gets+0x52>
+    cc = read(0, &c, 1);
+ 15a:	4605                	li	a2,1
+ 15c:	faf40593          	addi	a1,s0,-81
+ 160:	4501                	li	a0,0
+ 162:	186000ef          	jal	2e8 <read>
+    if(cc < 1)
+ 166:	00a05e63          	blez	a0,182 <gets+0x52>
+    buf[i++] = c;
+ 16a:	faf44783          	lbu	a5,-81(s0)
+ 16e:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 172:	01578763          	beq	a5,s5,180 <gets+0x50>
+ 176:	0905                	addi	s2,s2,1
+ 178:	fd679de3          	bne	a5,s6,152 <gets+0x22>
+    buf[i++] = c;
+ 17c:	89a6                	mv	s3,s1
+ 17e:	a011                	j	182 <gets+0x52>
+ 180:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 182:	99de                	add	s3,s3,s7
+ 184:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 188:	855e                	mv	a0,s7
+ 18a:	60e6                	ld	ra,88(sp)
+ 18c:	6446                	ld	s0,80(sp)
+ 18e:	64a6                	ld	s1,72(sp)
+ 190:	6906                	ld	s2,64(sp)
+ 192:	79e2                	ld	s3,56(sp)
+ 194:	7a42                	ld	s4,48(sp)
+ 196:	7aa2                	ld	s5,40(sp)
+ 198:	7b02                	ld	s6,32(sp)
+ 19a:	6be2                	ld	s7,24(sp)
+ 19c:	6125                	addi	sp,sp,96
+ 19e:	8082                	ret
+
+00000000000001a0 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 1a0:	1101                	addi	sp,sp,-32
+ 1a2:	ec06                	sd	ra,24(sp)
+ 1a4:	e822                	sd	s0,16(sp)
+ 1a6:	e04a                	sd	s2,0(sp)
+ 1a8:	1000                	addi	s0,sp,32
+ 1aa:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 1ac:	4581                	li	a1,0
+ 1ae:	162000ef          	jal	310 <open>
+  if(fd < 0)
+ 1b2:	02054263          	bltz	a0,1d6 <stat+0x36>
+ 1b6:	e426                	sd	s1,8(sp)
+ 1b8:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 1ba:	85ca                	mv	a1,s2
+ 1bc:	16c000ef          	jal	328 <fstat>
+ 1c0:	892a                	mv	s2,a0
+  close(fd);
+ 1c2:	8526                	mv	a0,s1
+ 1c4:	134000ef          	jal	2f8 <close>
+  return r;
+ 1c8:	64a2                	ld	s1,8(sp)
+}
+ 1ca:	854a                	mv	a0,s2
+ 1cc:	60e2                	ld	ra,24(sp)
+ 1ce:	6442                	ld	s0,16(sp)
+ 1d0:	6902                	ld	s2,0(sp)
+ 1d2:	6105                	addi	sp,sp,32
+ 1d4:	8082                	ret
+    return -1;
+ 1d6:	597d                	li	s2,-1
+ 1d8:	bfcd                	j	1ca <stat+0x2a>
+
+00000000000001da <atoi>:
+
+int
+atoi(const char *s)
+{
+ 1da:	1141                	addi	sp,sp,-16
+ 1dc:	e422                	sd	s0,8(sp)
+ 1de:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 1e0:	00054683          	lbu	a3,0(a0)
+ 1e4:	fd06879b          	addiw	a5,a3,-48
+ 1e8:	0ff7f793          	zext.b	a5,a5
+ 1ec:	4625                	li	a2,9
+ 1ee:	02f66863          	bltu	a2,a5,21e <atoi+0x44>
+ 1f2:	872a                	mv	a4,a0
+  n = 0;
+ 1f4:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 1f6:	0705                	addi	a4,a4,1
+ 1f8:	0025179b          	slliw	a5,a0,0x2
+ 1fc:	9fa9                	addw	a5,a5,a0
+ 1fe:	0017979b          	slliw	a5,a5,0x1
+ 202:	9fb5                	addw	a5,a5,a3
+ 204:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 208:	00074683          	lbu	a3,0(a4)
+ 20c:	fd06879b          	addiw	a5,a3,-48
+ 210:	0ff7f793          	zext.b	a5,a5
+ 214:	fef671e3          	bgeu	a2,a5,1f6 <atoi+0x1c>
+  return n;
+}
+ 218:	6422                	ld	s0,8(sp)
+ 21a:	0141                	addi	sp,sp,16
+ 21c:	8082                	ret
+  n = 0;
+ 21e:	4501                	li	a0,0
+ 220:	bfe5                	j	218 <atoi+0x3e>
+
+0000000000000222 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 222:	1141                	addi	sp,sp,-16
+ 224:	e422                	sd	s0,8(sp)
+ 226:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 228:	02b57463          	bgeu	a0,a1,250 <memmove+0x2e>
+    while(n-- > 0)
+ 22c:	00c05f63          	blez	a2,24a <memmove+0x28>
+ 230:	1602                	slli	a2,a2,0x20
+ 232:	9201                	srli	a2,a2,0x20
+ 234:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 238:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 23a:	0585                	addi	a1,a1,1
+ 23c:	0705                	addi	a4,a4,1
+ 23e:	fff5c683          	lbu	a3,-1(a1)
+ 242:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 246:	fef71ae3          	bne	a4,a5,23a <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 24a:	6422                	ld	s0,8(sp)
+ 24c:	0141                	addi	sp,sp,16
+ 24e:	8082                	ret
+    dst += n;
+ 250:	00c50733          	add	a4,a0,a2
+    src += n;
+ 254:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 256:	fec05ae3          	blez	a2,24a <memmove+0x28>
+ 25a:	fff6079b          	addiw	a5,a2,-1
+ 25e:	1782                	slli	a5,a5,0x20
+ 260:	9381                	srli	a5,a5,0x20
+ 262:	fff7c793          	not	a5,a5
+ 266:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 268:	15fd                	addi	a1,a1,-1
+ 26a:	177d                	addi	a4,a4,-1
+ 26c:	0005c683          	lbu	a3,0(a1)
+ 270:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 274:	fee79ae3          	bne	a5,a4,268 <memmove+0x46>
+ 278:	bfc9                	j	24a <memmove+0x28>
+
+000000000000027a <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 27a:	1141                	addi	sp,sp,-16
+ 27c:	e422                	sd	s0,8(sp)
+ 27e:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 280:	ca05                	beqz	a2,2b0 <memcmp+0x36>
+ 282:	fff6069b          	addiw	a3,a2,-1
+ 286:	1682                	slli	a3,a3,0x20
+ 288:	9281                	srli	a3,a3,0x20
+ 28a:	0685                	addi	a3,a3,1
+ 28c:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 28e:	00054783          	lbu	a5,0(a0)
+ 292:	0005c703          	lbu	a4,0(a1)
+ 296:	00e79863          	bne	a5,a4,2a6 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 29a:	0505                	addi	a0,a0,1
+    p2++;
+ 29c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 29e:	fed518e3          	bne	a0,a3,28e <memcmp+0x14>
+  }
+  return 0;
+ 2a2:	4501                	li	a0,0
+ 2a4:	a019                	j	2aa <memcmp+0x30>
+      return *p1 - *p2;
+ 2a6:	40e7853b          	subw	a0,a5,a4
+}
+ 2aa:	6422                	ld	s0,8(sp)
+ 2ac:	0141                	addi	sp,sp,16
+ 2ae:	8082                	ret
+  return 0;
+ 2b0:	4501                	li	a0,0
+ 2b2:	bfe5                	j	2aa <memcmp+0x30>
+
+00000000000002b4 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 2b4:	1141                	addi	sp,sp,-16
+ 2b6:	e406                	sd	ra,8(sp)
+ 2b8:	e022                	sd	s0,0(sp)
+ 2ba:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 2bc:	f67ff0ef          	jal	222 <memmove>
+}
+ 2c0:	60a2                	ld	ra,8(sp)
+ 2c2:	6402                	ld	s0,0(sp)
+ 2c4:	0141                	addi	sp,sp,16
+ 2c6:	8082                	ret
+
+00000000000002c8 <fork>:
+ 2c8:	4885                	li	a7,1
+ 2ca:	00000073          	ecall
+ 2ce:	8082                	ret
+
+00000000000002d0 <exit>:
+ 2d0:	4889                	li	a7,2
+ 2d2:	00000073          	ecall
+ 2d6:	8082                	ret
+
+00000000000002d8 <wait>:
+ 2d8:	488d                	li	a7,3
+ 2da:	00000073          	ecall
+ 2de:	8082                	ret
+
+00000000000002e0 <pipe>:
+ 2e0:	4891                	li	a7,4
+ 2e2:	00000073          	ecall
+ 2e6:	8082                	ret
+
+00000000000002e8 <read>:
+ 2e8:	4895                	li	a7,5
+ 2ea:	00000073          	ecall
+ 2ee:	8082                	ret
+
+00000000000002f0 <write>:
+ 2f0:	48c1                	li	a7,16
+ 2f2:	00000073          	ecall
+ 2f6:	8082                	ret
+
+00000000000002f8 <close>:
+ 2f8:	48d5                	li	a7,21
+ 2fa:	00000073          	ecall
+ 2fe:	8082                	ret
+
+0000000000000300 <kill>:
+ 300:	4899                	li	a7,6
+ 302:	00000073          	ecall
+ 306:	8082                	ret
+
+0000000000000308 <exec>:
+ 308:	489d                	li	a7,7
+ 30a:	00000073          	ecall
+ 30e:	8082                	ret
+
+0000000000000310 <open>:
+ 310:	48bd                	li	a7,15
+ 312:	00000073          	ecall
+ 316:	8082                	ret
+
+0000000000000318 <mknod>:
+ 318:	48c5                	li	a7,17
+ 31a:	00000073          	ecall
+ 31e:	8082                	ret
+
+0000000000000320 <unlink>:
+ 320:	48c9                	li	a7,18
+ 322:	00000073          	ecall
+ 326:	8082                	ret
+
+0000000000000328 <fstat>:
+ 328:	48a1                	li	a7,8
+ 32a:	00000073          	ecall
+ 32e:	8082                	ret
+
+0000000000000330 <link>:
+ 330:	48cd                	li	a7,19
+ 332:	00000073          	ecall
+ 336:	8082                	ret
+
+0000000000000338 <mkdir>:
+ 338:	48d1                	li	a7,20
+ 33a:	00000073          	ecall
+ 33e:	8082                	ret
+
+0000000000000340 <chdir>:
+ 340:	48a5                	li	a7,9
+ 342:	00000073          	ecall
+ 346:	8082                	ret
+
+0000000000000348 <dup>:
+ 348:	48a9                	li	a7,10
+ 34a:	00000073          	ecall
+ 34e:	8082                	ret
+
+0000000000000350 <getpid>:
+ 350:	48ad                	li	a7,11
+ 352:	00000073          	ecall
+ 356:	8082                	ret
+
+0000000000000358 <sbrk>:
+ 358:	48b1                	li	a7,12
+ 35a:	00000073          	ecall
+ 35e:	8082                	ret
+
+0000000000000360 <sleep>:
+ 360:	48b5                	li	a7,13
+ 362:	00000073          	ecall
+ 366:	8082                	ret
+
+0000000000000368 <uptime>:
+ 368:	48b9                	li	a7,14
+ 36a:	00000073          	ecall
+ 36e:	8082                	ret
+
+0000000000000370 <putc>:
+ 370:	1101                	addi	sp,sp,-32
+ 372:	ec06                	sd	ra,24(sp)
+ 374:	e822                	sd	s0,16(sp)
+ 376:	1000                	addi	s0,sp,32
+ 378:	feb407a3          	sb	a1,-17(s0)
+ 37c:	4605                	li	a2,1
+ 37e:	fef40593          	addi	a1,s0,-17
+ 382:	f6fff0ef          	jal	2f0 <write>
+ 386:	60e2                	ld	ra,24(sp)
+ 388:	6442                	ld	s0,16(sp)
+ 38a:	6105                	addi	sp,sp,32
+ 38c:	8082                	ret
+
+000000000000038e <printint>:
+ 38e:	7139                	addi	sp,sp,-64
+ 390:	fc06                	sd	ra,56(sp)
+ 392:	f822                	sd	s0,48(sp)
+ 394:	f426                	sd	s1,40(sp)
+ 396:	0080                	addi	s0,sp,64
+ 398:	84aa                	mv	s1,a0
+ 39a:	c299                	beqz	a3,3a0 <printint+0x12>
+ 39c:	0805c963          	bltz	a1,42e <printint+0xa0>
+ 3a0:	2581                	sext.w	a1,a1
+ 3a2:	4881                	li	a7,0
+ 3a4:	fc040693          	addi	a3,s0,-64
+ 3a8:	4701                	li	a4,0
+ 3aa:	2601                	sext.w	a2,a2
+ 3ac:	00000517          	auipc	a0,0x0
+ 3b0:	53450513          	addi	a0,a0,1332 # 8e0 <digits>
+ 3b4:	883a                	mv	a6,a4
+ 3b6:	2705                	addiw	a4,a4,1
+ 3b8:	02c5f7bb          	remuw	a5,a1,a2
+ 3bc:	1782                	slli	a5,a5,0x20
+ 3be:	9381                	srli	a5,a5,0x20
+ 3c0:	97aa                	add	a5,a5,a0
+ 3c2:	0007c783          	lbu	a5,0(a5)
+ 3c6:	00f68023          	sb	a5,0(a3)
+ 3ca:	0005879b          	sext.w	a5,a1
+ 3ce:	02c5d5bb          	divuw	a1,a1,a2
+ 3d2:	0685                	addi	a3,a3,1
+ 3d4:	fec7f0e3          	bgeu	a5,a2,3b4 <printint+0x26>
+ 3d8:	00088c63          	beqz	a7,3f0 <printint+0x62>
+ 3dc:	fd070793          	addi	a5,a4,-48
+ 3e0:	00878733          	add	a4,a5,s0
+ 3e4:	02d00793          	li	a5,45
+ 3e8:	fef70823          	sb	a5,-16(a4)
+ 3ec:	0028071b          	addiw	a4,a6,2
+ 3f0:	02e05a63          	blez	a4,424 <printint+0x96>
+ 3f4:	f04a                	sd	s2,32(sp)
+ 3f6:	ec4e                	sd	s3,24(sp)
+ 3f8:	fc040793          	addi	a5,s0,-64
+ 3fc:	00e78933          	add	s2,a5,a4
+ 400:	fff78993          	addi	s3,a5,-1
+ 404:	99ba                	add	s3,s3,a4
+ 406:	377d                	addiw	a4,a4,-1
+ 408:	1702                	slli	a4,a4,0x20
+ 40a:	9301                	srli	a4,a4,0x20
+ 40c:	40e989b3          	sub	s3,s3,a4
+ 410:	fff94583          	lbu	a1,-1(s2)
+ 414:	8526                	mv	a0,s1
+ 416:	f5bff0ef          	jal	370 <putc>
+ 41a:	197d                	addi	s2,s2,-1
+ 41c:	ff391ae3          	bne	s2,s3,410 <printint+0x82>
+ 420:	7902                	ld	s2,32(sp)
+ 422:	69e2                	ld	s3,24(sp)
+ 424:	70e2                	ld	ra,56(sp)
+ 426:	7442                	ld	s0,48(sp)
+ 428:	74a2                	ld	s1,40(sp)
+ 42a:	6121                	addi	sp,sp,64
+ 42c:	8082                	ret
+ 42e:	40b005bb          	negw	a1,a1
+ 432:	4885                	li	a7,1
+ 434:	bf85                	j	3a4 <printint+0x16>
+
+0000000000000436 <vprintf>:
+ 436:	711d                	addi	sp,sp,-96
+ 438:	ec86                	sd	ra,88(sp)
+ 43a:	e8a2                	sd	s0,80(sp)
+ 43c:	e0ca                	sd	s2,64(sp)
+ 43e:	1080                	addi	s0,sp,96
+ 440:	0005c903          	lbu	s2,0(a1)
+ 444:	26090863          	beqz	s2,6b4 <vprintf+0x27e>
+ 448:	e4a6                	sd	s1,72(sp)
+ 44a:	fc4e                	sd	s3,56(sp)
+ 44c:	f852                	sd	s4,48(sp)
+ 44e:	f456                	sd	s5,40(sp)
+ 450:	f05a                	sd	s6,32(sp)
+ 452:	ec5e                	sd	s7,24(sp)
+ 454:	e862                	sd	s8,16(sp)
+ 456:	e466                	sd	s9,8(sp)
+ 458:	8b2a                	mv	s6,a0
+ 45a:	8a2e                	mv	s4,a1
+ 45c:	8bb2                	mv	s7,a2
+ 45e:	4981                	li	s3,0
+ 460:	4481                	li	s1,0
+ 462:	4701                	li	a4,0
+ 464:	02500a93          	li	s5,37
+ 468:	06400c13          	li	s8,100
+ 46c:	06c00c93          	li	s9,108
+ 470:	a005                	j	490 <vprintf+0x5a>
+ 472:	85ca                	mv	a1,s2
+ 474:	855a                	mv	a0,s6
+ 476:	efbff0ef          	jal	370 <putc>
+ 47a:	a019                	j	480 <vprintf+0x4a>
+ 47c:	03598263          	beq	s3,s5,4a0 <vprintf+0x6a>
+ 480:	2485                	addiw	s1,s1,1
+ 482:	8726                	mv	a4,s1
+ 484:	009a07b3          	add	a5,s4,s1
+ 488:	0007c903          	lbu	s2,0(a5)
+ 48c:	20090c63          	beqz	s2,6a4 <vprintf+0x26e>
+ 490:	0009079b          	sext.w	a5,s2
+ 494:	fe0994e3          	bnez	s3,47c <vprintf+0x46>
+ 498:	fd579de3          	bne	a5,s5,472 <vprintf+0x3c>
+ 49c:	89be                	mv	s3,a5
+ 49e:	b7cd                	j	480 <vprintf+0x4a>
+ 4a0:	00ea06b3          	add	a3,s4,a4
+ 4a4:	0016c683          	lbu	a3,1(a3)
+ 4a8:	8636                	mv	a2,a3
+ 4aa:	c681                	beqz	a3,4b2 <vprintf+0x7c>
+ 4ac:	9752                	add	a4,a4,s4
+ 4ae:	00274603          	lbu	a2,2(a4)
+ 4b2:	03878f63          	beq	a5,s8,4f0 <vprintf+0xba>
+ 4b6:	05978963          	beq	a5,s9,508 <vprintf+0xd2>
+ 4ba:	07500713          	li	a4,117
+ 4be:	0ee78363          	beq	a5,a4,5a4 <vprintf+0x16e>
+ 4c2:	07800713          	li	a4,120
+ 4c6:	12e78563          	beq	a5,a4,5f0 <vprintf+0x1ba>
+ 4ca:	07000713          	li	a4,112
+ 4ce:	14e78a63          	beq	a5,a4,622 <vprintf+0x1ec>
+ 4d2:	07300713          	li	a4,115
+ 4d6:	18e78a63          	beq	a5,a4,66a <vprintf+0x234>
+ 4da:	02500713          	li	a4,37
+ 4de:	04e79563          	bne	a5,a4,528 <vprintf+0xf2>
+ 4e2:	02500593          	li	a1,37
+ 4e6:	855a                	mv	a0,s6
+ 4e8:	e89ff0ef          	jal	370 <putc>
+ 4ec:	4981                	li	s3,0
+ 4ee:	bf49                	j	480 <vprintf+0x4a>
+ 4f0:	008b8913          	addi	s2,s7,8
+ 4f4:	4685                	li	a3,1
+ 4f6:	4629                	li	a2,10
+ 4f8:	000ba583          	lw	a1,0(s7)
+ 4fc:	855a                	mv	a0,s6
+ 4fe:	e91ff0ef          	jal	38e <printint>
+ 502:	8bca                	mv	s7,s2
+ 504:	4981                	li	s3,0
+ 506:	bfad                	j	480 <vprintf+0x4a>
+ 508:	06400793          	li	a5,100
+ 50c:	02f68963          	beq	a3,a5,53e <vprintf+0x108>
+ 510:	06c00793          	li	a5,108
+ 514:	04f68263          	beq	a3,a5,558 <vprintf+0x122>
+ 518:	07500793          	li	a5,117
+ 51c:	0af68063          	beq	a3,a5,5bc <vprintf+0x186>
+ 520:	07800793          	li	a5,120
+ 524:	0ef68263          	beq	a3,a5,608 <vprintf+0x1d2>
+ 528:	02500593          	li	a1,37
+ 52c:	855a                	mv	a0,s6
+ 52e:	e43ff0ef          	jal	370 <putc>
+ 532:	85ca                	mv	a1,s2
+ 534:	855a                	mv	a0,s6
+ 536:	e3bff0ef          	jal	370 <putc>
+ 53a:	4981                	li	s3,0
+ 53c:	b791                	j	480 <vprintf+0x4a>
+ 53e:	008b8913          	addi	s2,s7,8
+ 542:	4685                	li	a3,1
+ 544:	4629                	li	a2,10
+ 546:	000ba583          	lw	a1,0(s7)
+ 54a:	855a                	mv	a0,s6
+ 54c:	e43ff0ef          	jal	38e <printint>
+ 550:	2485                	addiw	s1,s1,1
+ 552:	8bca                	mv	s7,s2
+ 554:	4981                	li	s3,0
+ 556:	b72d                	j	480 <vprintf+0x4a>
+ 558:	06400793          	li	a5,100
+ 55c:	02f60763          	beq	a2,a5,58a <vprintf+0x154>
+ 560:	07500793          	li	a5,117
+ 564:	06f60963          	beq	a2,a5,5d6 <vprintf+0x1a0>
+ 568:	07800793          	li	a5,120
+ 56c:	faf61ee3          	bne	a2,a5,528 <vprintf+0xf2>
+ 570:	008b8913          	addi	s2,s7,8
+ 574:	4681                	li	a3,0
+ 576:	4641                	li	a2,16
+ 578:	000ba583          	lw	a1,0(s7)
+ 57c:	855a                	mv	a0,s6
+ 57e:	e11ff0ef          	jal	38e <printint>
+ 582:	2489                	addiw	s1,s1,2
+ 584:	8bca                	mv	s7,s2
+ 586:	4981                	li	s3,0
+ 588:	bde5                	j	480 <vprintf+0x4a>
+ 58a:	008b8913          	addi	s2,s7,8
+ 58e:	4685                	li	a3,1
+ 590:	4629                	li	a2,10
+ 592:	000ba583          	lw	a1,0(s7)
+ 596:	855a                	mv	a0,s6
+ 598:	df7ff0ef          	jal	38e <printint>
+ 59c:	2489                	addiw	s1,s1,2
+ 59e:	8bca                	mv	s7,s2
+ 5a0:	4981                	li	s3,0
+ 5a2:	bdf9                	j	480 <vprintf+0x4a>
+ 5a4:	008b8913          	addi	s2,s7,8
+ 5a8:	4681                	li	a3,0
+ 5aa:	4629                	li	a2,10
+ 5ac:	000ba583          	lw	a1,0(s7)
+ 5b0:	855a                	mv	a0,s6
+ 5b2:	dddff0ef          	jal	38e <printint>
+ 5b6:	8bca                	mv	s7,s2
+ 5b8:	4981                	li	s3,0
+ 5ba:	b5d9                	j	480 <vprintf+0x4a>
+ 5bc:	008b8913          	addi	s2,s7,8
+ 5c0:	4681                	li	a3,0
+ 5c2:	4629                	li	a2,10
+ 5c4:	000ba583          	lw	a1,0(s7)
+ 5c8:	855a                	mv	a0,s6
+ 5ca:	dc5ff0ef          	jal	38e <printint>
+ 5ce:	2485                	addiw	s1,s1,1
+ 5d0:	8bca                	mv	s7,s2
+ 5d2:	4981                	li	s3,0
+ 5d4:	b575                	j	480 <vprintf+0x4a>
+ 5d6:	008b8913          	addi	s2,s7,8
+ 5da:	4681                	li	a3,0
+ 5dc:	4629                	li	a2,10
+ 5de:	000ba583          	lw	a1,0(s7)
+ 5e2:	855a                	mv	a0,s6
+ 5e4:	dabff0ef          	jal	38e <printint>
+ 5e8:	2489                	addiw	s1,s1,2
+ 5ea:	8bca                	mv	s7,s2
+ 5ec:	4981                	li	s3,0
+ 5ee:	bd49                	j	480 <vprintf+0x4a>
+ 5f0:	008b8913          	addi	s2,s7,8
+ 5f4:	4681                	li	a3,0
+ 5f6:	4641                	li	a2,16
+ 5f8:	000ba583          	lw	a1,0(s7)
+ 5fc:	855a                	mv	a0,s6
+ 5fe:	d91ff0ef          	jal	38e <printint>
+ 602:	8bca                	mv	s7,s2
+ 604:	4981                	li	s3,0
+ 606:	bdad                	j	480 <vprintf+0x4a>
+ 608:	008b8913          	addi	s2,s7,8
+ 60c:	4681                	li	a3,0
+ 60e:	4641                	li	a2,16
+ 610:	000ba583          	lw	a1,0(s7)
+ 614:	855a                	mv	a0,s6
+ 616:	d79ff0ef          	jal	38e <printint>
+ 61a:	2485                	addiw	s1,s1,1
+ 61c:	8bca                	mv	s7,s2
+ 61e:	4981                	li	s3,0
+ 620:	b585                	j	480 <vprintf+0x4a>
+ 622:	e06a                	sd	s10,0(sp)
+ 624:	008b8d13          	addi	s10,s7,8
+ 628:	000bb983          	ld	s3,0(s7)
+ 62c:	03000593          	li	a1,48
+ 630:	855a                	mv	a0,s6
+ 632:	d3fff0ef          	jal	370 <putc>
+ 636:	07800593          	li	a1,120
+ 63a:	855a                	mv	a0,s6
+ 63c:	d35ff0ef          	jal	370 <putc>
+ 640:	4941                	li	s2,16
+ 642:	00000b97          	auipc	s7,0x0
+ 646:	29eb8b93          	addi	s7,s7,670 # 8e0 <digits>
+ 64a:	03c9d793          	srli	a5,s3,0x3c
+ 64e:	97de                	add	a5,a5,s7
+ 650:	0007c583          	lbu	a1,0(a5)
+ 654:	855a                	mv	a0,s6
+ 656:	d1bff0ef          	jal	370 <putc>
+ 65a:	0992                	slli	s3,s3,0x4
+ 65c:	397d                	addiw	s2,s2,-1
+ 65e:	fe0916e3          	bnez	s2,64a <vprintf+0x214>
+ 662:	8bea                	mv	s7,s10
+ 664:	4981                	li	s3,0
+ 666:	6d02                	ld	s10,0(sp)
+ 668:	bd21                	j	480 <vprintf+0x4a>
+ 66a:	008b8993          	addi	s3,s7,8
+ 66e:	000bb903          	ld	s2,0(s7)
+ 672:	00090f63          	beqz	s2,690 <vprintf+0x25a>
+ 676:	00094583          	lbu	a1,0(s2)
+ 67a:	c195                	beqz	a1,69e <vprintf+0x268>
+ 67c:	855a                	mv	a0,s6
+ 67e:	cf3ff0ef          	jal	370 <putc>
+ 682:	0905                	addi	s2,s2,1
+ 684:	00094583          	lbu	a1,0(s2)
+ 688:	f9f5                	bnez	a1,67c <vprintf+0x246>
+ 68a:	8bce                	mv	s7,s3
+ 68c:	4981                	li	s3,0
+ 68e:	bbcd                	j	480 <vprintf+0x4a>
+ 690:	00000917          	auipc	s2,0x0
+ 694:	24890913          	addi	s2,s2,584 # 8d8 <malloc+0x13c>
+ 698:	02800593          	li	a1,40
+ 69c:	b7c5                	j	67c <vprintf+0x246>
+ 69e:	8bce                	mv	s7,s3
+ 6a0:	4981                	li	s3,0
+ 6a2:	bbf9                	j	480 <vprintf+0x4a>
+ 6a4:	64a6                	ld	s1,72(sp)
+ 6a6:	79e2                	ld	s3,56(sp)
+ 6a8:	7a42                	ld	s4,48(sp)
+ 6aa:	7aa2                	ld	s5,40(sp)
+ 6ac:	7b02                	ld	s6,32(sp)
+ 6ae:	6be2                	ld	s7,24(sp)
+ 6b0:	6c42                	ld	s8,16(sp)
+ 6b2:	6ca2                	ld	s9,8(sp)
+ 6b4:	60e6                	ld	ra,88(sp)
+ 6b6:	6446                	ld	s0,80(sp)
+ 6b8:	6906                	ld	s2,64(sp)
+ 6ba:	6125                	addi	sp,sp,96
+ 6bc:	8082                	ret
+
+00000000000006be <fprintf>:
+ 6be:	715d                	addi	sp,sp,-80
+ 6c0:	ec06                	sd	ra,24(sp)
+ 6c2:	e822                	sd	s0,16(sp)
+ 6c4:	1000                	addi	s0,sp,32
+ 6c6:	e010                	sd	a2,0(s0)
+ 6c8:	e414                	sd	a3,8(s0)
+ 6ca:	e818                	sd	a4,16(s0)
+ 6cc:	ec1c                	sd	a5,24(s0)
+ 6ce:	03043023          	sd	a6,32(s0)
+ 6d2:	03143423          	sd	a7,40(s0)
+ 6d6:	fe843423          	sd	s0,-24(s0)
+ 6da:	8622                	mv	a2,s0
+ 6dc:	d5bff0ef          	jal	436 <vprintf>
+ 6e0:	60e2                	ld	ra,24(sp)
+ 6e2:	6442                	ld	s0,16(sp)
+ 6e4:	6161                	addi	sp,sp,80
+ 6e6:	8082                	ret
+
+00000000000006e8 <printf>:
+ 6e8:	711d                	addi	sp,sp,-96
+ 6ea:	ec06                	sd	ra,24(sp)
+ 6ec:	e822                	sd	s0,16(sp)
+ 6ee:	1000                	addi	s0,sp,32
+ 6f0:	e40c                	sd	a1,8(s0)
+ 6f2:	e810                	sd	a2,16(s0)
+ 6f4:	ec14                	sd	a3,24(s0)
+ 6f6:	f018                	sd	a4,32(s0)
+ 6f8:	f41c                	sd	a5,40(s0)
+ 6fa:	03043823          	sd	a6,48(s0)
+ 6fe:	03143c23          	sd	a7,56(s0)
+ 702:	00840613          	addi	a2,s0,8
+ 706:	fec43423          	sd	a2,-24(s0)
+ 70a:	85aa                	mv	a1,a0
+ 70c:	4505                	li	a0,1
+ 70e:	d29ff0ef          	jal	436 <vprintf>
+ 712:	60e2                	ld	ra,24(sp)
+ 714:	6442                	ld	s0,16(sp)
+ 716:	6125                	addi	sp,sp,96
+ 718:	8082                	ret
+
+000000000000071a <free>:
+ 71a:	1141                	addi	sp,sp,-16
+ 71c:	e422                	sd	s0,8(sp)
+ 71e:	0800                	addi	s0,sp,16
+ 720:	ff050693          	addi	a3,a0,-16
+ 724:	00001797          	auipc	a5,0x1
+ 728:	8dc7b783          	ld	a5,-1828(a5) # 1000 <freep>
+ 72c:	a02d                	j	756 <free+0x3c>
+ 72e:	4618                	lw	a4,8(a2)
+ 730:	9f2d                	addw	a4,a4,a1
+ 732:	fee52c23          	sw	a4,-8(a0)
+ 736:	6398                	ld	a4,0(a5)
+ 738:	6310                	ld	a2,0(a4)
+ 73a:	a83d                	j	778 <free+0x5e>
+ 73c:	ff852703          	lw	a4,-8(a0)
+ 740:	9f31                	addw	a4,a4,a2
+ 742:	c798                	sw	a4,8(a5)
+ 744:	ff053683          	ld	a3,-16(a0)
+ 748:	a091                	j	78c <free+0x72>
+ 74a:	6398                	ld	a4,0(a5)
+ 74c:	00e7e463          	bltu	a5,a4,754 <free+0x3a>
+ 750:	00e6ea63          	bltu	a3,a4,764 <free+0x4a>
+ 754:	87ba                	mv	a5,a4
+ 756:	fed7fae3          	bgeu	a5,a3,74a <free+0x30>
+ 75a:	6398                	ld	a4,0(a5)
+ 75c:	00e6e463          	bltu	a3,a4,764 <free+0x4a>
+ 760:	fee7eae3          	bltu	a5,a4,754 <free+0x3a>
+ 764:	ff852583          	lw	a1,-8(a0)
+ 768:	6390                	ld	a2,0(a5)
+ 76a:	02059813          	slli	a6,a1,0x20
+ 76e:	01c85713          	srli	a4,a6,0x1c
+ 772:	9736                	add	a4,a4,a3
+ 774:	fae60de3          	beq	a2,a4,72e <free+0x14>
+ 778:	fec53823          	sd	a2,-16(a0)
+ 77c:	4790                	lw	a2,8(a5)
+ 77e:	02061593          	slli	a1,a2,0x20
+ 782:	01c5d713          	srli	a4,a1,0x1c
+ 786:	973e                	add	a4,a4,a5
+ 788:	fae68ae3          	beq	a3,a4,73c <free+0x22>
+ 78c:	e394                	sd	a3,0(a5)
+ 78e:	00001717          	auipc	a4,0x1
+ 792:	86f73923          	sd	a5,-1934(a4) # 1000 <freep>
+ 796:	6422                	ld	s0,8(sp)
+ 798:	0141                	addi	sp,sp,16
+ 79a:	8082                	ret
+
+000000000000079c <malloc>:
+ 79c:	7139                	addi	sp,sp,-64
+ 79e:	fc06                	sd	ra,56(sp)
+ 7a0:	f822                	sd	s0,48(sp)
+ 7a2:	f426                	sd	s1,40(sp)
+ 7a4:	ec4e                	sd	s3,24(sp)
+ 7a6:	0080                	addi	s0,sp,64
+ 7a8:	02051493          	slli	s1,a0,0x20
+ 7ac:	9081                	srli	s1,s1,0x20
+ 7ae:	04bd                	addi	s1,s1,15
+ 7b0:	8091                	srli	s1,s1,0x4
+ 7b2:	0014899b          	addiw	s3,s1,1
+ 7b6:	0485                	addi	s1,s1,1
+ 7b8:	00001517          	auipc	a0,0x1
+ 7bc:	84853503          	ld	a0,-1976(a0) # 1000 <freep>
+ 7c0:	c915                	beqz	a0,7f4 <malloc+0x58>
+ 7c2:	611c                	ld	a5,0(a0)
+ 7c4:	4798                	lw	a4,8(a5)
+ 7c6:	08977a63          	bgeu	a4,s1,85a <malloc+0xbe>
+ 7ca:	f04a                	sd	s2,32(sp)
+ 7cc:	e852                	sd	s4,16(sp)
+ 7ce:	e456                	sd	s5,8(sp)
+ 7d0:	e05a                	sd	s6,0(sp)
+ 7d2:	8a4e                	mv	s4,s3
+ 7d4:	0009871b          	sext.w	a4,s3
+ 7d8:	6685                	lui	a3,0x1
+ 7da:	00d77363          	bgeu	a4,a3,7e0 <malloc+0x44>
+ 7de:	6a05                	lui	s4,0x1
+ 7e0:	000a0b1b          	sext.w	s6,s4
+ 7e4:	004a1a1b          	slliw	s4,s4,0x4
+ 7e8:	00001917          	auipc	s2,0x1
+ 7ec:	81890913          	addi	s2,s2,-2024 # 1000 <freep>
+ 7f0:	5afd                	li	s5,-1
+ 7f2:	a081                	j	832 <malloc+0x96>
+ 7f4:	f04a                	sd	s2,32(sp)
+ 7f6:	e852                	sd	s4,16(sp)
+ 7f8:	e456                	sd	s5,8(sp)
+ 7fa:	e05a                	sd	s6,0(sp)
+ 7fc:	00001797          	auipc	a5,0x1
+ 800:	81478793          	addi	a5,a5,-2028 # 1010 <base>
+ 804:	00000717          	auipc	a4,0x0
+ 808:	7ef73e23          	sd	a5,2044(a4) # 1000 <freep>
+ 80c:	e39c                	sd	a5,0(a5)
+ 80e:	0007a423          	sw	zero,8(a5)
+ 812:	b7c1                	j	7d2 <malloc+0x36>
+ 814:	6398                	ld	a4,0(a5)
+ 816:	e118                	sd	a4,0(a0)
+ 818:	a8a9                	j	872 <malloc+0xd6>
+ 81a:	01652423          	sw	s6,8(a0)
+ 81e:	0541                	addi	a0,a0,16
+ 820:	efbff0ef          	jal	71a <free>
+ 824:	00093503          	ld	a0,0(s2)
+ 828:	c12d                	beqz	a0,88a <malloc+0xee>
+ 82a:	611c                	ld	a5,0(a0)
+ 82c:	4798                	lw	a4,8(a5)
+ 82e:	02977263          	bgeu	a4,s1,852 <malloc+0xb6>
+ 832:	00093703          	ld	a4,0(s2)
+ 836:	853e                	mv	a0,a5
+ 838:	fef719e3          	bne	a4,a5,82a <malloc+0x8e>
+ 83c:	8552                	mv	a0,s4
+ 83e:	b1bff0ef          	jal	358 <sbrk>
+ 842:	fd551ce3          	bne	a0,s5,81a <malloc+0x7e>
+ 846:	4501                	li	a0,0
+ 848:	7902                	ld	s2,32(sp)
+ 84a:	6a42                	ld	s4,16(sp)
+ 84c:	6aa2                	ld	s5,8(sp)
+ 84e:	6b02                	ld	s6,0(sp)
+ 850:	a03d                	j	87e <malloc+0xe2>
+ 852:	7902                	ld	s2,32(sp)
+ 854:	6a42                	ld	s4,16(sp)
+ 856:	6aa2                	ld	s5,8(sp)
+ 858:	6b02                	ld	s6,0(sp)
+ 85a:	fae48de3          	beq	s1,a4,814 <malloc+0x78>
+ 85e:	4137073b          	subw	a4,a4,s3
+ 862:	c798                	sw	a4,8(a5)
+ 864:	02071693          	slli	a3,a4,0x20
+ 868:	01c6d713          	srli	a4,a3,0x1c
+ 86c:	97ba                	add	a5,a5,a4
+ 86e:	0137a423          	sw	s3,8(a5)
+ 872:	00000717          	auipc	a4,0x0
+ 876:	78a73723          	sd	a0,1934(a4) # 1000 <freep>
+ 87a:	01078513          	addi	a0,a5,16
+ 87e:	70e2                	ld	ra,56(sp)
+ 880:	7442                	ld	s0,48(sp)
+ 882:	74a2                	ld	s1,40(sp)
+ 884:	69e2                	ld	s3,24(sp)
+ 886:	6121                	addi	sp,sp,64
+ 888:	8082                	ret
+ 88a:	7902                	ld	s2,32(sp)
+ 88c:	6a42                	ld	s4,16(sp)
+ 88e:	6aa2                	ld	s5,8(sp)
+ 890:	6b02                	ld	s6,0(sp)
+ 892:	b7f5                	j	87e <malloc+0xe2>
diff --git a/xv6-labs-2024/user/rm.c b/xv6-labs-2024/user/rm.c
new file mode 100644
index 0000000..26b8f1f
--- /dev/null
+++ b/xv6-labs-2024/user/rm.c
@@ -0,0 +1,23 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(int argc, char *argv[])
+{
+  int i;
+
+  if(argc < 2){
+    fprintf(2, "Usage: rm files...\n");
+    exit(1);
+  }
+
+  for(i = 1; i < argc; i++){
+    if(unlink(argv[i]) < 0){
+      fprintf(2, "rm: %s failed to delete\n", argv[i]);
+      break;
+    }
+  }
+
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/rm.d b/xv6-labs-2024/user/rm.d
new file mode 100644
index 0000000..4ccbaea
--- /dev/null
+++ b/xv6-labs-2024/user/rm.d
@@ -0,0 +1,2 @@
+user/rm.o: user/rm.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/rm.o b/xv6-labs-2024/user/rm.o
new file mode 100644
index 0000000..cd507f1
Binary files /dev/null and b/xv6-labs-2024/user/rm.o differ
diff --git a/xv6-labs-2024/user/rm.sym b/xv6-labs-2024/user/rm.sym
new file mode 100644
index 0000000..db28e77
--- /dev/null
+++ b/xv6-labs-2024/user/rm.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000898 .rodata
+00000000000008f8 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 rm.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000370 putc
+000000000000038e printint
+00000000000008e0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000078 strcpy
+00000000000006e8 printf
+0000000000000222 memmove
+0000000000000318 mknod
+0000000000000130 gets
+0000000000000350 getpid
+00000000000002b4 memcpy
+000000000000079c malloc
+0000000000000360 sleep
+00000000000002e0 pipe
+00000000000002f0 write
+0000000000000328 fstat
+00000000000006be fprintf
+0000000000000300 kill
+0000000000000436 vprintf
+0000000000000340 chdir
+0000000000000308 exec
+00000000000002d8 wait
+00000000000002e8 read
+0000000000000320 unlink
+000000000000027a memcmp
+00000000000002c8 fork
+0000000000000358 sbrk
+0000000000000368 uptime
+00000000000000ea memset
+0000000000000000 main
+0000000000000094 strcmp
+0000000000000348 dup
+00000000000001a0 stat
+0000000000000330 link
+00000000000002d0 exit
+0000000000000066 start
+00000000000001da atoi
+00000000000000c0 strlen
+0000000000000310 open
+000000000000010c strchr
+0000000000000338 mkdir
+00000000000002f8 close
+000000000000071a free
diff --git a/xv6-labs-2024/user/sh.asm b/xv6-labs-2024/user/sh.asm
new file mode 100644
index 0000000..80080d0
--- /dev/null
+++ b/xv6-labs-2024/user/sh.asm
@@ -0,0 +1,1961 @@
+
+user/_sh:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <getcmd>:
+       0:	1101                	addi	sp,sp,-32
+       2:	ec06                	sd	ra,24(sp)
+       4:	e822                	sd	s0,16(sp)
+       6:	e426                	sd	s1,8(sp)
+       8:	e04a                	sd	s2,0(sp)
+       a:	1000                	addi	s0,sp,32
+       c:	84aa                	mv	s1,a0
+       e:	892e                	mv	s2,a1
+      10:	4609                	li	a2,2
+      12:	00001597          	auipc	a1,0x1
+      16:	1ae58593          	addi	a1,a1,430 # 11c0 <malloc+0xf8>
+      1a:	4509                	li	a0,2
+      1c:	401000ef          	jal	c1c <write>
+      20:	864a                	mv	a2,s2
+      22:	4581                	li	a1,0
+      24:	8526                	mv	a0,s1
+      26:	1f1000ef          	jal	a16 <memset>
+      2a:	85ca                	mv	a1,s2
+      2c:	8526                	mv	a0,s1
+      2e:	22f000ef          	jal	a5c <gets>
+      32:	0004c503          	lbu	a0,0(s1)
+      36:	00153513          	seqz	a0,a0
+      3a:	40a00533          	neg	a0,a0
+      3e:	60e2                	ld	ra,24(sp)
+      40:	6442                	ld	s0,16(sp)
+      42:	64a2                	ld	s1,8(sp)
+      44:	6902                	ld	s2,0(sp)
+      46:	6105                	addi	sp,sp,32
+      48:	8082                	ret
+
+000000000000004a <panic>:
+      4a:	1141                	addi	sp,sp,-16
+      4c:	e406                	sd	ra,8(sp)
+      4e:	e022                	sd	s0,0(sp)
+      50:	0800                	addi	s0,sp,16
+      52:	862a                	mv	a2,a0
+      54:	00001597          	auipc	a1,0x1
+      58:	17c58593          	addi	a1,a1,380 # 11d0 <malloc+0x108>
+      5c:	4509                	li	a0,2
+      5e:	78d000ef          	jal	fea <fprintf>
+      62:	4505                	li	a0,1
+      64:	399000ef          	jal	bfc <exit>
+
+0000000000000068 <fork1>:
+      68:	1141                	addi	sp,sp,-16
+      6a:	e406                	sd	ra,8(sp)
+      6c:	e022                	sd	s0,0(sp)
+      6e:	0800                	addi	s0,sp,16
+      70:	385000ef          	jal	bf4 <fork>
+      74:	57fd                	li	a5,-1
+      76:	00f50663          	beq	a0,a5,82 <fork1+0x1a>
+      7a:	60a2                	ld	ra,8(sp)
+      7c:	6402                	ld	s0,0(sp)
+      7e:	0141                	addi	sp,sp,16
+      80:	8082                	ret
+      82:	00001517          	auipc	a0,0x1
+      86:	15650513          	addi	a0,a0,342 # 11d8 <malloc+0x110>
+      8a:	fc1ff0ef          	jal	4a <panic>
+
+000000000000008e <runcmd>:
+      8e:	7179                	addi	sp,sp,-48
+      90:	f406                	sd	ra,40(sp)
+      92:	f022                	sd	s0,32(sp)
+      94:	1800                	addi	s0,sp,48
+      96:	c115                	beqz	a0,ba <runcmd+0x2c>
+      98:	ec26                	sd	s1,24(sp)
+      9a:	84aa                	mv	s1,a0
+      9c:	4118                	lw	a4,0(a0)
+      9e:	4795                	li	a5,5
+      a0:	02e7e163          	bltu	a5,a4,c2 <runcmd+0x34>
+      a4:	00056783          	lwu	a5,0(a0)
+      a8:	078a                	slli	a5,a5,0x2
+      aa:	00001717          	auipc	a4,0x1
+      ae:	22e70713          	addi	a4,a4,558 # 12d8 <malloc+0x210>
+      b2:	97ba                	add	a5,a5,a4
+      b4:	439c                	lw	a5,0(a5)
+      b6:	97ba                	add	a5,a5,a4
+      b8:	8782                	jr	a5
+      ba:	ec26                	sd	s1,24(sp)
+      bc:	4505                	li	a0,1
+      be:	33f000ef          	jal	bfc <exit>
+      c2:	00001517          	auipc	a0,0x1
+      c6:	11e50513          	addi	a0,a0,286 # 11e0 <malloc+0x118>
+      ca:	f81ff0ef          	jal	4a <panic>
+      ce:	6508                	ld	a0,8(a0)
+      d0:	c105                	beqz	a0,f0 <runcmd+0x62>
+      d2:	00848593          	addi	a1,s1,8
+      d6:	35f000ef          	jal	c34 <exec>
+      da:	6490                	ld	a2,8(s1)
+      dc:	00001597          	auipc	a1,0x1
+      e0:	10c58593          	addi	a1,a1,268 # 11e8 <malloc+0x120>
+      e4:	4509                	li	a0,2
+      e6:	705000ef          	jal	fea <fprintf>
+      ea:	4501                	li	a0,0
+      ec:	311000ef          	jal	bfc <exit>
+      f0:	4505                	li	a0,1
+      f2:	30b000ef          	jal	bfc <exit>
+      f6:	5148                	lw	a0,36(a0)
+      f8:	32d000ef          	jal	c24 <close>
+      fc:	508c                	lw	a1,32(s1)
+      fe:	6888                	ld	a0,16(s1)
+     100:	33d000ef          	jal	c3c <open>
+     104:	00054563          	bltz	a0,10e <runcmd+0x80>
+     108:	6488                	ld	a0,8(s1)
+     10a:	f85ff0ef          	jal	8e <runcmd>
+     10e:	6890                	ld	a2,16(s1)
+     110:	00001597          	auipc	a1,0x1
+     114:	0e858593          	addi	a1,a1,232 # 11f8 <malloc+0x130>
+     118:	4509                	li	a0,2
+     11a:	6d1000ef          	jal	fea <fprintf>
+     11e:	4505                	li	a0,1
+     120:	2dd000ef          	jal	bfc <exit>
+     124:	f45ff0ef          	jal	68 <fork1>
+     128:	e501                	bnez	a0,130 <runcmd+0xa2>
+     12a:	6488                	ld	a0,8(s1)
+     12c:	f63ff0ef          	jal	8e <runcmd>
+     130:	4501                	li	a0,0
+     132:	2d3000ef          	jal	c04 <wait>
+     136:	6888                	ld	a0,16(s1)
+     138:	f57ff0ef          	jal	8e <runcmd>
+     13c:	fd840513          	addi	a0,s0,-40
+     140:	2cd000ef          	jal	c0c <pipe>
+     144:	02054763          	bltz	a0,172 <runcmd+0xe4>
+     148:	f21ff0ef          	jal	68 <fork1>
+     14c:	e90d                	bnez	a0,17e <runcmd+0xf0>
+     14e:	4505                	li	a0,1
+     150:	2d5000ef          	jal	c24 <close>
+     154:	fdc42503          	lw	a0,-36(s0)
+     158:	31d000ef          	jal	c74 <dup>
+     15c:	fd842503          	lw	a0,-40(s0)
+     160:	2c5000ef          	jal	c24 <close>
+     164:	fdc42503          	lw	a0,-36(s0)
+     168:	2bd000ef          	jal	c24 <close>
+     16c:	6488                	ld	a0,8(s1)
+     16e:	f21ff0ef          	jal	8e <runcmd>
+     172:	00001517          	auipc	a0,0x1
+     176:	09650513          	addi	a0,a0,150 # 1208 <malloc+0x140>
+     17a:	ed1ff0ef          	jal	4a <panic>
+     17e:	eebff0ef          	jal	68 <fork1>
+     182:	e115                	bnez	a0,1a6 <runcmd+0x118>
+     184:	2a1000ef          	jal	c24 <close>
+     188:	fd842503          	lw	a0,-40(s0)
+     18c:	2e9000ef          	jal	c74 <dup>
+     190:	fd842503          	lw	a0,-40(s0)
+     194:	291000ef          	jal	c24 <close>
+     198:	fdc42503          	lw	a0,-36(s0)
+     19c:	289000ef          	jal	c24 <close>
+     1a0:	6888                	ld	a0,16(s1)
+     1a2:	eedff0ef          	jal	8e <runcmd>
+     1a6:	fd842503          	lw	a0,-40(s0)
+     1aa:	27b000ef          	jal	c24 <close>
+     1ae:	fdc42503          	lw	a0,-36(s0)
+     1b2:	273000ef          	jal	c24 <close>
+     1b6:	4501                	li	a0,0
+     1b8:	24d000ef          	jal	c04 <wait>
+     1bc:	4501                	li	a0,0
+     1be:	247000ef          	jal	c04 <wait>
+     1c2:	b725                	j	ea <runcmd+0x5c>
+     1c4:	ea5ff0ef          	jal	68 <fork1>
+     1c8:	f20511e3          	bnez	a0,ea <runcmd+0x5c>
+     1cc:	6488                	ld	a0,8(s1)
+     1ce:	ec1ff0ef          	jal	8e <runcmd>
+
+00000000000001d2 <execcmd>:
+     1d2:	1101                	addi	sp,sp,-32
+     1d4:	ec06                	sd	ra,24(sp)
+     1d6:	e822                	sd	s0,16(sp)
+     1d8:	e426                	sd	s1,8(sp)
+     1da:	1000                	addi	s0,sp,32
+     1dc:	0a800513          	li	a0,168
+     1e0:	6e9000ef          	jal	10c8 <malloc>
+     1e4:	84aa                	mv	s1,a0
+     1e6:	0a800613          	li	a2,168
+     1ea:	4581                	li	a1,0
+     1ec:	02b000ef          	jal	a16 <memset>
+     1f0:	4785                	li	a5,1
+     1f2:	c09c                	sw	a5,0(s1)
+     1f4:	8526                	mv	a0,s1
+     1f6:	60e2                	ld	ra,24(sp)
+     1f8:	6442                	ld	s0,16(sp)
+     1fa:	64a2                	ld	s1,8(sp)
+     1fc:	6105                	addi	sp,sp,32
+     1fe:	8082                	ret
+
+0000000000000200 <redircmd>:
+     200:	7139                	addi	sp,sp,-64
+     202:	fc06                	sd	ra,56(sp)
+     204:	f822                	sd	s0,48(sp)
+     206:	f426                	sd	s1,40(sp)
+     208:	f04a                	sd	s2,32(sp)
+     20a:	ec4e                	sd	s3,24(sp)
+     20c:	e852                	sd	s4,16(sp)
+     20e:	e456                	sd	s5,8(sp)
+     210:	e05a                	sd	s6,0(sp)
+     212:	0080                	addi	s0,sp,64
+     214:	8b2a                	mv	s6,a0
+     216:	8aae                	mv	s5,a1
+     218:	8a32                	mv	s4,a2
+     21a:	89b6                	mv	s3,a3
+     21c:	893a                	mv	s2,a4
+     21e:	02800513          	li	a0,40
+     222:	6a7000ef          	jal	10c8 <malloc>
+     226:	84aa                	mv	s1,a0
+     228:	02800613          	li	a2,40
+     22c:	4581                	li	a1,0
+     22e:	7e8000ef          	jal	a16 <memset>
+     232:	4789                	li	a5,2
+     234:	c09c                	sw	a5,0(s1)
+     236:	0164b423          	sd	s6,8(s1)
+     23a:	0154b823          	sd	s5,16(s1)
+     23e:	0144bc23          	sd	s4,24(s1)
+     242:	0334a023          	sw	s3,32(s1)
+     246:	0324a223          	sw	s2,36(s1)
+     24a:	8526                	mv	a0,s1
+     24c:	70e2                	ld	ra,56(sp)
+     24e:	7442                	ld	s0,48(sp)
+     250:	74a2                	ld	s1,40(sp)
+     252:	7902                	ld	s2,32(sp)
+     254:	69e2                	ld	s3,24(sp)
+     256:	6a42                	ld	s4,16(sp)
+     258:	6aa2                	ld	s5,8(sp)
+     25a:	6b02                	ld	s6,0(sp)
+     25c:	6121                	addi	sp,sp,64
+     25e:	8082                	ret
+
+0000000000000260 <pipecmd>:
+     260:	7179                	addi	sp,sp,-48
+     262:	f406                	sd	ra,40(sp)
+     264:	f022                	sd	s0,32(sp)
+     266:	ec26                	sd	s1,24(sp)
+     268:	e84a                	sd	s2,16(sp)
+     26a:	e44e                	sd	s3,8(sp)
+     26c:	1800                	addi	s0,sp,48
+     26e:	89aa                	mv	s3,a0
+     270:	892e                	mv	s2,a1
+     272:	4561                	li	a0,24
+     274:	655000ef          	jal	10c8 <malloc>
+     278:	84aa                	mv	s1,a0
+     27a:	4661                	li	a2,24
+     27c:	4581                	li	a1,0
+     27e:	798000ef          	jal	a16 <memset>
+     282:	478d                	li	a5,3
+     284:	c09c                	sw	a5,0(s1)
+     286:	0134b423          	sd	s3,8(s1)
+     28a:	0124b823          	sd	s2,16(s1)
+     28e:	8526                	mv	a0,s1
+     290:	70a2                	ld	ra,40(sp)
+     292:	7402                	ld	s0,32(sp)
+     294:	64e2                	ld	s1,24(sp)
+     296:	6942                	ld	s2,16(sp)
+     298:	69a2                	ld	s3,8(sp)
+     29a:	6145                	addi	sp,sp,48
+     29c:	8082                	ret
+
+000000000000029e <listcmd>:
+     29e:	7179                	addi	sp,sp,-48
+     2a0:	f406                	sd	ra,40(sp)
+     2a2:	f022                	sd	s0,32(sp)
+     2a4:	ec26                	sd	s1,24(sp)
+     2a6:	e84a                	sd	s2,16(sp)
+     2a8:	e44e                	sd	s3,8(sp)
+     2aa:	1800                	addi	s0,sp,48
+     2ac:	89aa                	mv	s3,a0
+     2ae:	892e                	mv	s2,a1
+     2b0:	4561                	li	a0,24
+     2b2:	617000ef          	jal	10c8 <malloc>
+     2b6:	84aa                	mv	s1,a0
+     2b8:	4661                	li	a2,24
+     2ba:	4581                	li	a1,0
+     2bc:	75a000ef          	jal	a16 <memset>
+     2c0:	4791                	li	a5,4
+     2c2:	c09c                	sw	a5,0(s1)
+     2c4:	0134b423          	sd	s3,8(s1)
+     2c8:	0124b823          	sd	s2,16(s1)
+     2cc:	8526                	mv	a0,s1
+     2ce:	70a2                	ld	ra,40(sp)
+     2d0:	7402                	ld	s0,32(sp)
+     2d2:	64e2                	ld	s1,24(sp)
+     2d4:	6942                	ld	s2,16(sp)
+     2d6:	69a2                	ld	s3,8(sp)
+     2d8:	6145                	addi	sp,sp,48
+     2da:	8082                	ret
+
+00000000000002dc <backcmd>:
+     2dc:	1101                	addi	sp,sp,-32
+     2de:	ec06                	sd	ra,24(sp)
+     2e0:	e822                	sd	s0,16(sp)
+     2e2:	e426                	sd	s1,8(sp)
+     2e4:	e04a                	sd	s2,0(sp)
+     2e6:	1000                	addi	s0,sp,32
+     2e8:	892a                	mv	s2,a0
+     2ea:	4541                	li	a0,16
+     2ec:	5dd000ef          	jal	10c8 <malloc>
+     2f0:	84aa                	mv	s1,a0
+     2f2:	4641                	li	a2,16
+     2f4:	4581                	li	a1,0
+     2f6:	720000ef          	jal	a16 <memset>
+     2fa:	4795                	li	a5,5
+     2fc:	c09c                	sw	a5,0(s1)
+     2fe:	0124b423          	sd	s2,8(s1)
+     302:	8526                	mv	a0,s1
+     304:	60e2                	ld	ra,24(sp)
+     306:	6442                	ld	s0,16(sp)
+     308:	64a2                	ld	s1,8(sp)
+     30a:	6902                	ld	s2,0(sp)
+     30c:	6105                	addi	sp,sp,32
+     30e:	8082                	ret
+
+0000000000000310 <gettoken>:
+     310:	7139                	addi	sp,sp,-64
+     312:	fc06                	sd	ra,56(sp)
+     314:	f822                	sd	s0,48(sp)
+     316:	f426                	sd	s1,40(sp)
+     318:	f04a                	sd	s2,32(sp)
+     31a:	ec4e                	sd	s3,24(sp)
+     31c:	e852                	sd	s4,16(sp)
+     31e:	e456                	sd	s5,8(sp)
+     320:	e05a                	sd	s6,0(sp)
+     322:	0080                	addi	s0,sp,64
+     324:	8a2a                	mv	s4,a0
+     326:	892e                	mv	s2,a1
+     328:	8ab2                	mv	s5,a2
+     32a:	8b36                	mv	s6,a3
+     32c:	6104                	ld	s1,0(a0)
+     32e:	00002997          	auipc	s3,0x2
+     332:	cda98993          	addi	s3,s3,-806 # 2008 <whitespace>
+     336:	00b4fc63          	bgeu	s1,a1,34e <gettoken+0x3e>
+     33a:	0004c583          	lbu	a1,0(s1)
+     33e:	854e                	mv	a0,s3
+     340:	6f8000ef          	jal	a38 <strchr>
+     344:	c509                	beqz	a0,34e <gettoken+0x3e>
+     346:	0485                	addi	s1,s1,1
+     348:	fe9919e3          	bne	s2,s1,33a <gettoken+0x2a>
+     34c:	84ca                	mv	s1,s2
+     34e:	000a8463          	beqz	s5,356 <gettoken+0x46>
+     352:	009ab023          	sd	s1,0(s5)
+     356:	0004c783          	lbu	a5,0(s1)
+     35a:	00078a9b          	sext.w	s5,a5
+     35e:	03c00713          	li	a4,60
+     362:	06f76463          	bltu	a4,a5,3ca <gettoken+0xba>
+     366:	03a00713          	li	a4,58
+     36a:	00f76e63          	bltu	a4,a5,386 <gettoken+0x76>
+     36e:	cf89                	beqz	a5,388 <gettoken+0x78>
+     370:	02600713          	li	a4,38
+     374:	00e78963          	beq	a5,a4,386 <gettoken+0x76>
+     378:	fd87879b          	addiw	a5,a5,-40
+     37c:	0ff7f793          	zext.b	a5,a5
+     380:	4705                	li	a4,1
+     382:	06f76b63          	bltu	a4,a5,3f8 <gettoken+0xe8>
+     386:	0485                	addi	s1,s1,1
+     388:	000b0463          	beqz	s6,390 <gettoken+0x80>
+     38c:	009b3023          	sd	s1,0(s6)
+     390:	00002997          	auipc	s3,0x2
+     394:	c7898993          	addi	s3,s3,-904 # 2008 <whitespace>
+     398:	0124fc63          	bgeu	s1,s2,3b0 <gettoken+0xa0>
+     39c:	0004c583          	lbu	a1,0(s1)
+     3a0:	854e                	mv	a0,s3
+     3a2:	696000ef          	jal	a38 <strchr>
+     3a6:	c509                	beqz	a0,3b0 <gettoken+0xa0>
+     3a8:	0485                	addi	s1,s1,1
+     3aa:	fe9919e3          	bne	s2,s1,39c <gettoken+0x8c>
+     3ae:	84ca                	mv	s1,s2
+     3b0:	009a3023          	sd	s1,0(s4)
+     3b4:	8556                	mv	a0,s5
+     3b6:	70e2                	ld	ra,56(sp)
+     3b8:	7442                	ld	s0,48(sp)
+     3ba:	74a2                	ld	s1,40(sp)
+     3bc:	7902                	ld	s2,32(sp)
+     3be:	69e2                	ld	s3,24(sp)
+     3c0:	6a42                	ld	s4,16(sp)
+     3c2:	6aa2                	ld	s5,8(sp)
+     3c4:	6b02                	ld	s6,0(sp)
+     3c6:	6121                	addi	sp,sp,64
+     3c8:	8082                	ret
+     3ca:	03e00713          	li	a4,62
+     3ce:	02e79163          	bne	a5,a4,3f0 <gettoken+0xe0>
+     3d2:	00148693          	addi	a3,s1,1
+     3d6:	0014c703          	lbu	a4,1(s1)
+     3da:	03e00793          	li	a5,62
+     3de:	0489                	addi	s1,s1,2
+     3e0:	02b00a93          	li	s5,43
+     3e4:	faf702e3          	beq	a4,a5,388 <gettoken+0x78>
+     3e8:	84b6                	mv	s1,a3
+     3ea:	03e00a93          	li	s5,62
+     3ee:	bf69                	j	388 <gettoken+0x78>
+     3f0:	07c00713          	li	a4,124
+     3f4:	f8e789e3          	beq	a5,a4,386 <gettoken+0x76>
+     3f8:	00002997          	auipc	s3,0x2
+     3fc:	c1098993          	addi	s3,s3,-1008 # 2008 <whitespace>
+     400:	00002a97          	auipc	s5,0x2
+     404:	c00a8a93          	addi	s5,s5,-1024 # 2000 <symbols>
+     408:	0324fd63          	bgeu	s1,s2,442 <gettoken+0x132>
+     40c:	0004c583          	lbu	a1,0(s1)
+     410:	854e                	mv	a0,s3
+     412:	626000ef          	jal	a38 <strchr>
+     416:	e11d                	bnez	a0,43c <gettoken+0x12c>
+     418:	0004c583          	lbu	a1,0(s1)
+     41c:	8556                	mv	a0,s5
+     41e:	61a000ef          	jal	a38 <strchr>
+     422:	e911                	bnez	a0,436 <gettoken+0x126>
+     424:	0485                	addi	s1,s1,1
+     426:	fe9913e3          	bne	s2,s1,40c <gettoken+0xfc>
+     42a:	84ca                	mv	s1,s2
+     42c:	06100a93          	li	s5,97
+     430:	f40b1ee3          	bnez	s6,38c <gettoken+0x7c>
+     434:	bfb5                	j	3b0 <gettoken+0xa0>
+     436:	06100a93          	li	s5,97
+     43a:	b7b9                	j	388 <gettoken+0x78>
+     43c:	06100a93          	li	s5,97
+     440:	b7a1                	j	388 <gettoken+0x78>
+     442:	06100a93          	li	s5,97
+     446:	f40b13e3          	bnez	s6,38c <gettoken+0x7c>
+     44a:	b79d                	j	3b0 <gettoken+0xa0>
+
+000000000000044c <peek>:
+     44c:	7139                	addi	sp,sp,-64
+     44e:	fc06                	sd	ra,56(sp)
+     450:	f822                	sd	s0,48(sp)
+     452:	f426                	sd	s1,40(sp)
+     454:	f04a                	sd	s2,32(sp)
+     456:	ec4e                	sd	s3,24(sp)
+     458:	e852                	sd	s4,16(sp)
+     45a:	e456                	sd	s5,8(sp)
+     45c:	0080                	addi	s0,sp,64
+     45e:	8a2a                	mv	s4,a0
+     460:	892e                	mv	s2,a1
+     462:	8ab2                	mv	s5,a2
+     464:	6104                	ld	s1,0(a0)
+     466:	00002997          	auipc	s3,0x2
+     46a:	ba298993          	addi	s3,s3,-1118 # 2008 <whitespace>
+     46e:	00b4fc63          	bgeu	s1,a1,486 <peek+0x3a>
+     472:	0004c583          	lbu	a1,0(s1)
+     476:	854e                	mv	a0,s3
+     478:	5c0000ef          	jal	a38 <strchr>
+     47c:	c509                	beqz	a0,486 <peek+0x3a>
+     47e:	0485                	addi	s1,s1,1
+     480:	fe9919e3          	bne	s2,s1,472 <peek+0x26>
+     484:	84ca                	mv	s1,s2
+     486:	009a3023          	sd	s1,0(s4)
+     48a:	0004c583          	lbu	a1,0(s1)
+     48e:	4501                	li	a0,0
+     490:	e991                	bnez	a1,4a4 <peek+0x58>
+     492:	70e2                	ld	ra,56(sp)
+     494:	7442                	ld	s0,48(sp)
+     496:	74a2                	ld	s1,40(sp)
+     498:	7902                	ld	s2,32(sp)
+     49a:	69e2                	ld	s3,24(sp)
+     49c:	6a42                	ld	s4,16(sp)
+     49e:	6aa2                	ld	s5,8(sp)
+     4a0:	6121                	addi	sp,sp,64
+     4a2:	8082                	ret
+     4a4:	8556                	mv	a0,s5
+     4a6:	592000ef          	jal	a38 <strchr>
+     4aa:	00a03533          	snez	a0,a0
+     4ae:	b7d5                	j	492 <peek+0x46>
+
+00000000000004b0 <parseredirs>:
+     4b0:	711d                	addi	sp,sp,-96
+     4b2:	ec86                	sd	ra,88(sp)
+     4b4:	e8a2                	sd	s0,80(sp)
+     4b6:	e4a6                	sd	s1,72(sp)
+     4b8:	e0ca                	sd	s2,64(sp)
+     4ba:	fc4e                	sd	s3,56(sp)
+     4bc:	f852                	sd	s4,48(sp)
+     4be:	f456                	sd	s5,40(sp)
+     4c0:	f05a                	sd	s6,32(sp)
+     4c2:	ec5e                	sd	s7,24(sp)
+     4c4:	1080                	addi	s0,sp,96
+     4c6:	8a2a                	mv	s4,a0
+     4c8:	89ae                	mv	s3,a1
+     4ca:	8932                	mv	s2,a2
+     4cc:	00001a97          	auipc	s5,0x1
+     4d0:	d64a8a93          	addi	s5,s5,-668 # 1230 <malloc+0x168>
+     4d4:	06100b13          	li	s6,97
+     4d8:	03c00b93          	li	s7,60
+     4dc:	a00d                	j	4fe <parseredirs+0x4e>
+     4de:	00001517          	auipc	a0,0x1
+     4e2:	d3250513          	addi	a0,a0,-718 # 1210 <malloc+0x148>
+     4e6:	b65ff0ef          	jal	4a <panic>
+     4ea:	4701                	li	a4,0
+     4ec:	4681                	li	a3,0
+     4ee:	fa043603          	ld	a2,-96(s0)
+     4f2:	fa843583          	ld	a1,-88(s0)
+     4f6:	8552                	mv	a0,s4
+     4f8:	d09ff0ef          	jal	200 <redircmd>
+     4fc:	8a2a                	mv	s4,a0
+     4fe:	8656                	mv	a2,s5
+     500:	85ca                	mv	a1,s2
+     502:	854e                	mv	a0,s3
+     504:	f49ff0ef          	jal	44c <peek>
+     508:	c525                	beqz	a0,570 <parseredirs+0xc0>
+     50a:	4681                	li	a3,0
+     50c:	4601                	li	a2,0
+     50e:	85ca                	mv	a1,s2
+     510:	854e                	mv	a0,s3
+     512:	dffff0ef          	jal	310 <gettoken>
+     516:	84aa                	mv	s1,a0
+     518:	fa040693          	addi	a3,s0,-96
+     51c:	fa840613          	addi	a2,s0,-88
+     520:	85ca                	mv	a1,s2
+     522:	854e                	mv	a0,s3
+     524:	dedff0ef          	jal	310 <gettoken>
+     528:	fb651be3          	bne	a0,s6,4de <parseredirs+0x2e>
+     52c:	fb748fe3          	beq	s1,s7,4ea <parseredirs+0x3a>
+     530:	03e00793          	li	a5,62
+     534:	02f48263          	beq	s1,a5,558 <parseredirs+0xa8>
+     538:	02b00793          	li	a5,43
+     53c:	fcf491e3          	bne	s1,a5,4fe <parseredirs+0x4e>
+     540:	4705                	li	a4,1
+     542:	20100693          	li	a3,513
+     546:	fa043603          	ld	a2,-96(s0)
+     54a:	fa843583          	ld	a1,-88(s0)
+     54e:	8552                	mv	a0,s4
+     550:	cb1ff0ef          	jal	200 <redircmd>
+     554:	8a2a                	mv	s4,a0
+     556:	b765                	j	4fe <parseredirs+0x4e>
+     558:	4705                	li	a4,1
+     55a:	60100693          	li	a3,1537
+     55e:	fa043603          	ld	a2,-96(s0)
+     562:	fa843583          	ld	a1,-88(s0)
+     566:	8552                	mv	a0,s4
+     568:	c99ff0ef          	jal	200 <redircmd>
+     56c:	8a2a                	mv	s4,a0
+     56e:	bf41                	j	4fe <parseredirs+0x4e>
+     570:	8552                	mv	a0,s4
+     572:	60e6                	ld	ra,88(sp)
+     574:	6446                	ld	s0,80(sp)
+     576:	64a6                	ld	s1,72(sp)
+     578:	6906                	ld	s2,64(sp)
+     57a:	79e2                	ld	s3,56(sp)
+     57c:	7a42                	ld	s4,48(sp)
+     57e:	7aa2                	ld	s5,40(sp)
+     580:	7b02                	ld	s6,32(sp)
+     582:	6be2                	ld	s7,24(sp)
+     584:	6125                	addi	sp,sp,96
+     586:	8082                	ret
+
+0000000000000588 <parseexec>:
+     588:	7159                	addi	sp,sp,-112
+     58a:	f486                	sd	ra,104(sp)
+     58c:	f0a2                	sd	s0,96(sp)
+     58e:	eca6                	sd	s1,88(sp)
+     590:	e0d2                	sd	s4,64(sp)
+     592:	fc56                	sd	s5,56(sp)
+     594:	1880                	addi	s0,sp,112
+     596:	8a2a                	mv	s4,a0
+     598:	8aae                	mv	s5,a1
+     59a:	00001617          	auipc	a2,0x1
+     59e:	c9e60613          	addi	a2,a2,-866 # 1238 <malloc+0x170>
+     5a2:	eabff0ef          	jal	44c <peek>
+     5a6:	e915                	bnez	a0,5da <parseexec+0x52>
+     5a8:	e8ca                	sd	s2,80(sp)
+     5aa:	e4ce                	sd	s3,72(sp)
+     5ac:	f85a                	sd	s6,48(sp)
+     5ae:	f45e                	sd	s7,40(sp)
+     5b0:	f062                	sd	s8,32(sp)
+     5b2:	ec66                	sd	s9,24(sp)
+     5b4:	89aa                	mv	s3,a0
+     5b6:	c1dff0ef          	jal	1d2 <execcmd>
+     5ba:	8c2a                	mv	s8,a0
+     5bc:	8656                	mv	a2,s5
+     5be:	85d2                	mv	a1,s4
+     5c0:	ef1ff0ef          	jal	4b0 <parseredirs>
+     5c4:	84aa                	mv	s1,a0
+     5c6:	008c0913          	addi	s2,s8,8
+     5ca:	00001b17          	auipc	s6,0x1
+     5ce:	c8eb0b13          	addi	s6,s6,-882 # 1258 <malloc+0x190>
+     5d2:	06100c93          	li	s9,97
+     5d6:	4ba9                	li	s7,10
+     5d8:	a815                	j	60c <parseexec+0x84>
+     5da:	85d6                	mv	a1,s5
+     5dc:	8552                	mv	a0,s4
+     5de:	170000ef          	jal	74e <parseblock>
+     5e2:	84aa                	mv	s1,a0
+     5e4:	8526                	mv	a0,s1
+     5e6:	70a6                	ld	ra,104(sp)
+     5e8:	7406                	ld	s0,96(sp)
+     5ea:	64e6                	ld	s1,88(sp)
+     5ec:	6a06                	ld	s4,64(sp)
+     5ee:	7ae2                	ld	s5,56(sp)
+     5f0:	6165                	addi	sp,sp,112
+     5f2:	8082                	ret
+     5f4:	00001517          	auipc	a0,0x1
+     5f8:	c4c50513          	addi	a0,a0,-948 # 1240 <malloc+0x178>
+     5fc:	a4fff0ef          	jal	4a <panic>
+     600:	8656                	mv	a2,s5
+     602:	85d2                	mv	a1,s4
+     604:	8526                	mv	a0,s1
+     606:	eabff0ef          	jal	4b0 <parseredirs>
+     60a:	84aa                	mv	s1,a0
+     60c:	865a                	mv	a2,s6
+     60e:	85d6                	mv	a1,s5
+     610:	8552                	mv	a0,s4
+     612:	e3bff0ef          	jal	44c <peek>
+     616:	ed15                	bnez	a0,652 <parseexec+0xca>
+     618:	f9040693          	addi	a3,s0,-112
+     61c:	f9840613          	addi	a2,s0,-104
+     620:	85d6                	mv	a1,s5
+     622:	8552                	mv	a0,s4
+     624:	cedff0ef          	jal	310 <gettoken>
+     628:	c50d                	beqz	a0,652 <parseexec+0xca>
+     62a:	fd9515e3          	bne	a0,s9,5f4 <parseexec+0x6c>
+     62e:	f9843783          	ld	a5,-104(s0)
+     632:	00f93023          	sd	a5,0(s2)
+     636:	f9043783          	ld	a5,-112(s0)
+     63a:	04f93823          	sd	a5,80(s2)
+     63e:	2985                	addiw	s3,s3,1
+     640:	0921                	addi	s2,s2,8
+     642:	fb799fe3          	bne	s3,s7,600 <parseexec+0x78>
+     646:	00001517          	auipc	a0,0x1
+     64a:	c0250513          	addi	a0,a0,-1022 # 1248 <malloc+0x180>
+     64e:	9fdff0ef          	jal	4a <panic>
+     652:	098e                	slli	s3,s3,0x3
+     654:	9c4e                	add	s8,s8,s3
+     656:	000c3423          	sd	zero,8(s8)
+     65a:	040c3c23          	sd	zero,88(s8)
+     65e:	6946                	ld	s2,80(sp)
+     660:	69a6                	ld	s3,72(sp)
+     662:	7b42                	ld	s6,48(sp)
+     664:	7ba2                	ld	s7,40(sp)
+     666:	7c02                	ld	s8,32(sp)
+     668:	6ce2                	ld	s9,24(sp)
+     66a:	bfad                	j	5e4 <parseexec+0x5c>
+
+000000000000066c <parsepipe>:
+     66c:	7179                	addi	sp,sp,-48
+     66e:	f406                	sd	ra,40(sp)
+     670:	f022                	sd	s0,32(sp)
+     672:	ec26                	sd	s1,24(sp)
+     674:	e84a                	sd	s2,16(sp)
+     676:	e44e                	sd	s3,8(sp)
+     678:	1800                	addi	s0,sp,48
+     67a:	892a                	mv	s2,a0
+     67c:	89ae                	mv	s3,a1
+     67e:	f0bff0ef          	jal	588 <parseexec>
+     682:	84aa                	mv	s1,a0
+     684:	00001617          	auipc	a2,0x1
+     688:	bdc60613          	addi	a2,a2,-1060 # 1260 <malloc+0x198>
+     68c:	85ce                	mv	a1,s3
+     68e:	854a                	mv	a0,s2
+     690:	dbdff0ef          	jal	44c <peek>
+     694:	e909                	bnez	a0,6a6 <parsepipe+0x3a>
+     696:	8526                	mv	a0,s1
+     698:	70a2                	ld	ra,40(sp)
+     69a:	7402                	ld	s0,32(sp)
+     69c:	64e2                	ld	s1,24(sp)
+     69e:	6942                	ld	s2,16(sp)
+     6a0:	69a2                	ld	s3,8(sp)
+     6a2:	6145                	addi	sp,sp,48
+     6a4:	8082                	ret
+     6a6:	4681                	li	a3,0
+     6a8:	4601                	li	a2,0
+     6aa:	85ce                	mv	a1,s3
+     6ac:	854a                	mv	a0,s2
+     6ae:	c63ff0ef          	jal	310 <gettoken>
+     6b2:	85ce                	mv	a1,s3
+     6b4:	854a                	mv	a0,s2
+     6b6:	fb7ff0ef          	jal	66c <parsepipe>
+     6ba:	85aa                	mv	a1,a0
+     6bc:	8526                	mv	a0,s1
+     6be:	ba3ff0ef          	jal	260 <pipecmd>
+     6c2:	84aa                	mv	s1,a0
+     6c4:	bfc9                	j	696 <parsepipe+0x2a>
+
+00000000000006c6 <parseline>:
+     6c6:	7179                	addi	sp,sp,-48
+     6c8:	f406                	sd	ra,40(sp)
+     6ca:	f022                	sd	s0,32(sp)
+     6cc:	ec26                	sd	s1,24(sp)
+     6ce:	e84a                	sd	s2,16(sp)
+     6d0:	e44e                	sd	s3,8(sp)
+     6d2:	e052                	sd	s4,0(sp)
+     6d4:	1800                	addi	s0,sp,48
+     6d6:	892a                	mv	s2,a0
+     6d8:	89ae                	mv	s3,a1
+     6da:	f93ff0ef          	jal	66c <parsepipe>
+     6de:	84aa                	mv	s1,a0
+     6e0:	00001a17          	auipc	s4,0x1
+     6e4:	b88a0a13          	addi	s4,s4,-1144 # 1268 <malloc+0x1a0>
+     6e8:	a819                	j	6fe <parseline+0x38>
+     6ea:	4681                	li	a3,0
+     6ec:	4601                	li	a2,0
+     6ee:	85ce                	mv	a1,s3
+     6f0:	854a                	mv	a0,s2
+     6f2:	c1fff0ef          	jal	310 <gettoken>
+     6f6:	8526                	mv	a0,s1
+     6f8:	be5ff0ef          	jal	2dc <backcmd>
+     6fc:	84aa                	mv	s1,a0
+     6fe:	8652                	mv	a2,s4
+     700:	85ce                	mv	a1,s3
+     702:	854a                	mv	a0,s2
+     704:	d49ff0ef          	jal	44c <peek>
+     708:	f16d                	bnez	a0,6ea <parseline+0x24>
+     70a:	00001617          	auipc	a2,0x1
+     70e:	b6660613          	addi	a2,a2,-1178 # 1270 <malloc+0x1a8>
+     712:	85ce                	mv	a1,s3
+     714:	854a                	mv	a0,s2
+     716:	d37ff0ef          	jal	44c <peek>
+     71a:	e911                	bnez	a0,72e <parseline+0x68>
+     71c:	8526                	mv	a0,s1
+     71e:	70a2                	ld	ra,40(sp)
+     720:	7402                	ld	s0,32(sp)
+     722:	64e2                	ld	s1,24(sp)
+     724:	6942                	ld	s2,16(sp)
+     726:	69a2                	ld	s3,8(sp)
+     728:	6a02                	ld	s4,0(sp)
+     72a:	6145                	addi	sp,sp,48
+     72c:	8082                	ret
+     72e:	4681                	li	a3,0
+     730:	4601                	li	a2,0
+     732:	85ce                	mv	a1,s3
+     734:	854a                	mv	a0,s2
+     736:	bdbff0ef          	jal	310 <gettoken>
+     73a:	85ce                	mv	a1,s3
+     73c:	854a                	mv	a0,s2
+     73e:	f89ff0ef          	jal	6c6 <parseline>
+     742:	85aa                	mv	a1,a0
+     744:	8526                	mv	a0,s1
+     746:	b59ff0ef          	jal	29e <listcmd>
+     74a:	84aa                	mv	s1,a0
+     74c:	bfc1                	j	71c <parseline+0x56>
+
+000000000000074e <parseblock>:
+     74e:	7179                	addi	sp,sp,-48
+     750:	f406                	sd	ra,40(sp)
+     752:	f022                	sd	s0,32(sp)
+     754:	ec26                	sd	s1,24(sp)
+     756:	e84a                	sd	s2,16(sp)
+     758:	e44e                	sd	s3,8(sp)
+     75a:	1800                	addi	s0,sp,48
+     75c:	84aa                	mv	s1,a0
+     75e:	892e                	mv	s2,a1
+     760:	00001617          	auipc	a2,0x1
+     764:	ad860613          	addi	a2,a2,-1320 # 1238 <malloc+0x170>
+     768:	ce5ff0ef          	jal	44c <peek>
+     76c:	c539                	beqz	a0,7ba <parseblock+0x6c>
+     76e:	4681                	li	a3,0
+     770:	4601                	li	a2,0
+     772:	85ca                	mv	a1,s2
+     774:	8526                	mv	a0,s1
+     776:	b9bff0ef          	jal	310 <gettoken>
+     77a:	85ca                	mv	a1,s2
+     77c:	8526                	mv	a0,s1
+     77e:	f49ff0ef          	jal	6c6 <parseline>
+     782:	89aa                	mv	s3,a0
+     784:	00001617          	auipc	a2,0x1
+     788:	b0460613          	addi	a2,a2,-1276 # 1288 <malloc+0x1c0>
+     78c:	85ca                	mv	a1,s2
+     78e:	8526                	mv	a0,s1
+     790:	cbdff0ef          	jal	44c <peek>
+     794:	c90d                	beqz	a0,7c6 <parseblock+0x78>
+     796:	4681                	li	a3,0
+     798:	4601                	li	a2,0
+     79a:	85ca                	mv	a1,s2
+     79c:	8526                	mv	a0,s1
+     79e:	b73ff0ef          	jal	310 <gettoken>
+     7a2:	864a                	mv	a2,s2
+     7a4:	85a6                	mv	a1,s1
+     7a6:	854e                	mv	a0,s3
+     7a8:	d09ff0ef          	jal	4b0 <parseredirs>
+     7ac:	70a2                	ld	ra,40(sp)
+     7ae:	7402                	ld	s0,32(sp)
+     7b0:	64e2                	ld	s1,24(sp)
+     7b2:	6942                	ld	s2,16(sp)
+     7b4:	69a2                	ld	s3,8(sp)
+     7b6:	6145                	addi	sp,sp,48
+     7b8:	8082                	ret
+     7ba:	00001517          	auipc	a0,0x1
+     7be:	abe50513          	addi	a0,a0,-1346 # 1278 <malloc+0x1b0>
+     7c2:	889ff0ef          	jal	4a <panic>
+     7c6:	00001517          	auipc	a0,0x1
+     7ca:	aca50513          	addi	a0,a0,-1334 # 1290 <malloc+0x1c8>
+     7ce:	87dff0ef          	jal	4a <panic>
+
+00000000000007d2 <nulterminate>:
+     7d2:	1101                	addi	sp,sp,-32
+     7d4:	ec06                	sd	ra,24(sp)
+     7d6:	e822                	sd	s0,16(sp)
+     7d8:	e426                	sd	s1,8(sp)
+     7da:	1000                	addi	s0,sp,32
+     7dc:	84aa                	mv	s1,a0
+     7de:	c131                	beqz	a0,822 <nulterminate+0x50>
+     7e0:	4118                	lw	a4,0(a0)
+     7e2:	4795                	li	a5,5
+     7e4:	02e7ef63          	bltu	a5,a4,822 <nulterminate+0x50>
+     7e8:	00056783          	lwu	a5,0(a0)
+     7ec:	078a                	slli	a5,a5,0x2
+     7ee:	00001717          	auipc	a4,0x1
+     7f2:	b0270713          	addi	a4,a4,-1278 # 12f0 <malloc+0x228>
+     7f6:	97ba                	add	a5,a5,a4
+     7f8:	439c                	lw	a5,0(a5)
+     7fa:	97ba                	add	a5,a5,a4
+     7fc:	8782                	jr	a5
+     7fe:	651c                	ld	a5,8(a0)
+     800:	c38d                	beqz	a5,822 <nulterminate+0x50>
+     802:	01050793          	addi	a5,a0,16
+     806:	67b8                	ld	a4,72(a5)
+     808:	00070023          	sb	zero,0(a4)
+     80c:	07a1                	addi	a5,a5,8
+     80e:	ff87b703          	ld	a4,-8(a5)
+     812:	fb75                	bnez	a4,806 <nulterminate+0x34>
+     814:	a039                	j	822 <nulterminate+0x50>
+     816:	6508                	ld	a0,8(a0)
+     818:	fbbff0ef          	jal	7d2 <nulterminate>
+     81c:	6c9c                	ld	a5,24(s1)
+     81e:	00078023          	sb	zero,0(a5)
+     822:	8526                	mv	a0,s1
+     824:	60e2                	ld	ra,24(sp)
+     826:	6442                	ld	s0,16(sp)
+     828:	64a2                	ld	s1,8(sp)
+     82a:	6105                	addi	sp,sp,32
+     82c:	8082                	ret
+     82e:	6508                	ld	a0,8(a0)
+     830:	fa3ff0ef          	jal	7d2 <nulterminate>
+     834:	6888                	ld	a0,16(s1)
+     836:	f9dff0ef          	jal	7d2 <nulterminate>
+     83a:	b7e5                	j	822 <nulterminate+0x50>
+     83c:	6508                	ld	a0,8(a0)
+     83e:	f95ff0ef          	jal	7d2 <nulterminate>
+     842:	6888                	ld	a0,16(s1)
+     844:	f8fff0ef          	jal	7d2 <nulterminate>
+     848:	bfe9                	j	822 <nulterminate+0x50>
+     84a:	6508                	ld	a0,8(a0)
+     84c:	f87ff0ef          	jal	7d2 <nulterminate>
+     850:	bfc9                	j	822 <nulterminate+0x50>
+
+0000000000000852 <parsecmd>:
+     852:	7179                	addi	sp,sp,-48
+     854:	f406                	sd	ra,40(sp)
+     856:	f022                	sd	s0,32(sp)
+     858:	ec26                	sd	s1,24(sp)
+     85a:	e84a                	sd	s2,16(sp)
+     85c:	1800                	addi	s0,sp,48
+     85e:	fca43c23          	sd	a0,-40(s0)
+     862:	84aa                	mv	s1,a0
+     864:	188000ef          	jal	9ec <strlen>
+     868:	1502                	slli	a0,a0,0x20
+     86a:	9101                	srli	a0,a0,0x20
+     86c:	94aa                	add	s1,s1,a0
+     86e:	85a6                	mv	a1,s1
+     870:	fd840513          	addi	a0,s0,-40
+     874:	e53ff0ef          	jal	6c6 <parseline>
+     878:	892a                	mv	s2,a0
+     87a:	00001617          	auipc	a2,0x1
+     87e:	94e60613          	addi	a2,a2,-1714 # 11c8 <malloc+0x100>
+     882:	85a6                	mv	a1,s1
+     884:	fd840513          	addi	a0,s0,-40
+     888:	bc5ff0ef          	jal	44c <peek>
+     88c:	fd843603          	ld	a2,-40(s0)
+     890:	00961c63          	bne	a2,s1,8a8 <parsecmd+0x56>
+     894:	854a                	mv	a0,s2
+     896:	f3dff0ef          	jal	7d2 <nulterminate>
+     89a:	854a                	mv	a0,s2
+     89c:	70a2                	ld	ra,40(sp)
+     89e:	7402                	ld	s0,32(sp)
+     8a0:	64e2                	ld	s1,24(sp)
+     8a2:	6942                	ld	s2,16(sp)
+     8a4:	6145                	addi	sp,sp,48
+     8a6:	8082                	ret
+     8a8:	00001597          	auipc	a1,0x1
+     8ac:	a0058593          	addi	a1,a1,-1536 # 12a8 <malloc+0x1e0>
+     8b0:	4509                	li	a0,2
+     8b2:	738000ef          	jal	fea <fprintf>
+     8b6:	00001517          	auipc	a0,0x1
+     8ba:	98a50513          	addi	a0,a0,-1654 # 1240 <malloc+0x178>
+     8be:	f8cff0ef          	jal	4a <panic>
+
+00000000000008c2 <main>:
+     8c2:	7179                	addi	sp,sp,-48
+     8c4:	f406                	sd	ra,40(sp)
+     8c6:	f022                	sd	s0,32(sp)
+     8c8:	ec26                	sd	s1,24(sp)
+     8ca:	e84a                	sd	s2,16(sp)
+     8cc:	e44e                	sd	s3,8(sp)
+     8ce:	e052                	sd	s4,0(sp)
+     8d0:	1800                	addi	s0,sp,48
+     8d2:	00001497          	auipc	s1,0x1
+     8d6:	9e648493          	addi	s1,s1,-1562 # 12b8 <malloc+0x1f0>
+     8da:	4589                	li	a1,2
+     8dc:	8526                	mv	a0,s1
+     8de:	35e000ef          	jal	c3c <open>
+     8e2:	00054763          	bltz	a0,8f0 <main+0x2e>
+     8e6:	4789                	li	a5,2
+     8e8:	fea7d9e3          	bge	a5,a0,8da <main+0x18>
+     8ec:	338000ef          	jal	c24 <close>
+     8f0:	00001497          	auipc	s1,0x1
+     8f4:	73048493          	addi	s1,s1,1840 # 2020 <buf.0>
+     8f8:	06300913          	li	s2,99
+     8fc:	02000993          	li	s3,32
+     900:	a039                	j	90e <main+0x4c>
+     902:	f66ff0ef          	jal	68 <fork1>
+     906:	c93d                	beqz	a0,97c <main+0xba>
+     908:	4501                	li	a0,0
+     90a:	2fa000ef          	jal	c04 <wait>
+     90e:	06400593          	li	a1,100
+     912:	8526                	mv	a0,s1
+     914:	eecff0ef          	jal	0 <getcmd>
+     918:	06054a63          	bltz	a0,98c <main+0xca>
+     91c:	0004c783          	lbu	a5,0(s1)
+     920:	ff2791e3          	bne	a5,s2,902 <main+0x40>
+     924:	0014c703          	lbu	a4,1(s1)
+     928:	06400793          	li	a5,100
+     92c:	fcf71be3          	bne	a4,a5,902 <main+0x40>
+     930:	0024c783          	lbu	a5,2(s1)
+     934:	fd3797e3          	bne	a5,s3,902 <main+0x40>
+     938:	00001a17          	auipc	s4,0x1
+     93c:	6e8a0a13          	addi	s4,s4,1768 # 2020 <buf.0>
+     940:	8552                	mv	a0,s4
+     942:	0aa000ef          	jal	9ec <strlen>
+     946:	fff5079b          	addiw	a5,a0,-1
+     94a:	1782                	slli	a5,a5,0x20
+     94c:	9381                	srli	a5,a5,0x20
+     94e:	9a3e                	add	s4,s4,a5
+     950:	000a0023          	sb	zero,0(s4)
+     954:	00001517          	auipc	a0,0x1
+     958:	6cf50513          	addi	a0,a0,1743 # 2023 <buf.0+0x3>
+     95c:	310000ef          	jal	c6c <chdir>
+     960:	fa0557e3          	bgez	a0,90e <main+0x4c>
+     964:	00001617          	auipc	a2,0x1
+     968:	6bf60613          	addi	a2,a2,1727 # 2023 <buf.0+0x3>
+     96c:	00001597          	auipc	a1,0x1
+     970:	95458593          	addi	a1,a1,-1708 # 12c0 <malloc+0x1f8>
+     974:	4509                	li	a0,2
+     976:	674000ef          	jal	fea <fprintf>
+     97a:	bf51                	j	90e <main+0x4c>
+     97c:	00001517          	auipc	a0,0x1
+     980:	6a450513          	addi	a0,a0,1700 # 2020 <buf.0>
+     984:	ecfff0ef          	jal	852 <parsecmd>
+     988:	f06ff0ef          	jal	8e <runcmd>
+     98c:	4501                	li	a0,0
+     98e:	26e000ef          	jal	bfc <exit>
+
+0000000000000992 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+     992:	1141                	addi	sp,sp,-16
+     994:	e406                	sd	ra,8(sp)
+     996:	e022                	sd	s0,0(sp)
+     998:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+     99a:	f29ff0ef          	jal	8c2 <main>
+  exit(0);
+     99e:	4501                	li	a0,0
+     9a0:	25c000ef          	jal	bfc <exit>
+
+00000000000009a4 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+     9a4:	1141                	addi	sp,sp,-16
+     9a6:	e422                	sd	s0,8(sp)
+     9a8:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+     9aa:	87aa                	mv	a5,a0
+     9ac:	0585                	addi	a1,a1,1
+     9ae:	0785                	addi	a5,a5,1
+     9b0:	fff5c703          	lbu	a4,-1(a1)
+     9b4:	fee78fa3          	sb	a4,-1(a5)
+     9b8:	fb75                	bnez	a4,9ac <strcpy+0x8>
+    ;
+  return os;
+}
+     9ba:	6422                	ld	s0,8(sp)
+     9bc:	0141                	addi	sp,sp,16
+     9be:	8082                	ret
+
+00000000000009c0 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+     9c0:	1141                	addi	sp,sp,-16
+     9c2:	e422                	sd	s0,8(sp)
+     9c4:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+     9c6:	00054783          	lbu	a5,0(a0)
+     9ca:	cb91                	beqz	a5,9de <strcmp+0x1e>
+     9cc:	0005c703          	lbu	a4,0(a1)
+     9d0:	00f71763          	bne	a4,a5,9de <strcmp+0x1e>
+    p++, q++;
+     9d4:	0505                	addi	a0,a0,1
+     9d6:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+     9d8:	00054783          	lbu	a5,0(a0)
+     9dc:	fbe5                	bnez	a5,9cc <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+     9de:	0005c503          	lbu	a0,0(a1)
+}
+     9e2:	40a7853b          	subw	a0,a5,a0
+     9e6:	6422                	ld	s0,8(sp)
+     9e8:	0141                	addi	sp,sp,16
+     9ea:	8082                	ret
+
+00000000000009ec <strlen>:
+
+uint
+strlen(const char *s)
+{
+     9ec:	1141                	addi	sp,sp,-16
+     9ee:	e422                	sd	s0,8(sp)
+     9f0:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+     9f2:	00054783          	lbu	a5,0(a0)
+     9f6:	cf91                	beqz	a5,a12 <strlen+0x26>
+     9f8:	0505                	addi	a0,a0,1
+     9fa:	87aa                	mv	a5,a0
+     9fc:	86be                	mv	a3,a5
+     9fe:	0785                	addi	a5,a5,1
+     a00:	fff7c703          	lbu	a4,-1(a5)
+     a04:	ff65                	bnez	a4,9fc <strlen+0x10>
+     a06:	40a6853b          	subw	a0,a3,a0
+     a0a:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+     a0c:	6422                	ld	s0,8(sp)
+     a0e:	0141                	addi	sp,sp,16
+     a10:	8082                	ret
+  for(n = 0; s[n]; n++)
+     a12:	4501                	li	a0,0
+     a14:	bfe5                	j	a0c <strlen+0x20>
+
+0000000000000a16 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+     a16:	1141                	addi	sp,sp,-16
+     a18:	e422                	sd	s0,8(sp)
+     a1a:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+     a1c:	ca19                	beqz	a2,a32 <memset+0x1c>
+     a1e:	87aa                	mv	a5,a0
+     a20:	1602                	slli	a2,a2,0x20
+     a22:	9201                	srli	a2,a2,0x20
+     a24:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+     a28:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+     a2c:	0785                	addi	a5,a5,1
+     a2e:	fee79de3          	bne	a5,a4,a28 <memset+0x12>
+  }
+  return dst;
+}
+     a32:	6422                	ld	s0,8(sp)
+     a34:	0141                	addi	sp,sp,16
+     a36:	8082                	ret
+
+0000000000000a38 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+     a38:	1141                	addi	sp,sp,-16
+     a3a:	e422                	sd	s0,8(sp)
+     a3c:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+     a3e:	00054783          	lbu	a5,0(a0)
+     a42:	cb99                	beqz	a5,a58 <strchr+0x20>
+    if(*s == c)
+     a44:	00f58763          	beq	a1,a5,a52 <strchr+0x1a>
+  for(; *s; s++)
+     a48:	0505                	addi	a0,a0,1
+     a4a:	00054783          	lbu	a5,0(a0)
+     a4e:	fbfd                	bnez	a5,a44 <strchr+0xc>
+      return (char*)s;
+  return 0;
+     a50:	4501                	li	a0,0
+}
+     a52:	6422                	ld	s0,8(sp)
+     a54:	0141                	addi	sp,sp,16
+     a56:	8082                	ret
+  return 0;
+     a58:	4501                	li	a0,0
+     a5a:	bfe5                	j	a52 <strchr+0x1a>
+
+0000000000000a5c <gets>:
+
+char*
+gets(char *buf, int max)
+{
+     a5c:	711d                	addi	sp,sp,-96
+     a5e:	ec86                	sd	ra,88(sp)
+     a60:	e8a2                	sd	s0,80(sp)
+     a62:	e4a6                	sd	s1,72(sp)
+     a64:	e0ca                	sd	s2,64(sp)
+     a66:	fc4e                	sd	s3,56(sp)
+     a68:	f852                	sd	s4,48(sp)
+     a6a:	f456                	sd	s5,40(sp)
+     a6c:	f05a                	sd	s6,32(sp)
+     a6e:	ec5e                	sd	s7,24(sp)
+     a70:	1080                	addi	s0,sp,96
+     a72:	8baa                	mv	s7,a0
+     a74:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+     a76:	892a                	mv	s2,a0
+     a78:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+     a7a:	4aa9                	li	s5,10
+     a7c:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+     a7e:	89a6                	mv	s3,s1
+     a80:	2485                	addiw	s1,s1,1
+     a82:	0344d663          	bge	s1,s4,aae <gets+0x52>
+    cc = read(0, &c, 1);
+     a86:	4605                	li	a2,1
+     a88:	faf40593          	addi	a1,s0,-81
+     a8c:	4501                	li	a0,0
+     a8e:	186000ef          	jal	c14 <read>
+    if(cc < 1)
+     a92:	00a05e63          	blez	a0,aae <gets+0x52>
+    buf[i++] = c;
+     a96:	faf44783          	lbu	a5,-81(s0)
+     a9a:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+     a9e:	01578763          	beq	a5,s5,aac <gets+0x50>
+     aa2:	0905                	addi	s2,s2,1
+     aa4:	fd679de3          	bne	a5,s6,a7e <gets+0x22>
+    buf[i++] = c;
+     aa8:	89a6                	mv	s3,s1
+     aaa:	a011                	j	aae <gets+0x52>
+     aac:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+     aae:	99de                	add	s3,s3,s7
+     ab0:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+     ab4:	855e                	mv	a0,s7
+     ab6:	60e6                	ld	ra,88(sp)
+     ab8:	6446                	ld	s0,80(sp)
+     aba:	64a6                	ld	s1,72(sp)
+     abc:	6906                	ld	s2,64(sp)
+     abe:	79e2                	ld	s3,56(sp)
+     ac0:	7a42                	ld	s4,48(sp)
+     ac2:	7aa2                	ld	s5,40(sp)
+     ac4:	7b02                	ld	s6,32(sp)
+     ac6:	6be2                	ld	s7,24(sp)
+     ac8:	6125                	addi	sp,sp,96
+     aca:	8082                	ret
+
+0000000000000acc <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+     acc:	1101                	addi	sp,sp,-32
+     ace:	ec06                	sd	ra,24(sp)
+     ad0:	e822                	sd	s0,16(sp)
+     ad2:	e04a                	sd	s2,0(sp)
+     ad4:	1000                	addi	s0,sp,32
+     ad6:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+     ad8:	4581                	li	a1,0
+     ada:	162000ef          	jal	c3c <open>
+  if(fd < 0)
+     ade:	02054263          	bltz	a0,b02 <stat+0x36>
+     ae2:	e426                	sd	s1,8(sp)
+     ae4:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+     ae6:	85ca                	mv	a1,s2
+     ae8:	16c000ef          	jal	c54 <fstat>
+     aec:	892a                	mv	s2,a0
+  close(fd);
+     aee:	8526                	mv	a0,s1
+     af0:	134000ef          	jal	c24 <close>
+  return r;
+     af4:	64a2                	ld	s1,8(sp)
+}
+     af6:	854a                	mv	a0,s2
+     af8:	60e2                	ld	ra,24(sp)
+     afa:	6442                	ld	s0,16(sp)
+     afc:	6902                	ld	s2,0(sp)
+     afe:	6105                	addi	sp,sp,32
+     b00:	8082                	ret
+    return -1;
+     b02:	597d                	li	s2,-1
+     b04:	bfcd                	j	af6 <stat+0x2a>
+
+0000000000000b06 <atoi>:
+
+int
+atoi(const char *s)
+{
+     b06:	1141                	addi	sp,sp,-16
+     b08:	e422                	sd	s0,8(sp)
+     b0a:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+     b0c:	00054683          	lbu	a3,0(a0)
+     b10:	fd06879b          	addiw	a5,a3,-48
+     b14:	0ff7f793          	zext.b	a5,a5
+     b18:	4625                	li	a2,9
+     b1a:	02f66863          	bltu	a2,a5,b4a <atoi+0x44>
+     b1e:	872a                	mv	a4,a0
+  n = 0;
+     b20:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+     b22:	0705                	addi	a4,a4,1
+     b24:	0025179b          	slliw	a5,a0,0x2
+     b28:	9fa9                	addw	a5,a5,a0
+     b2a:	0017979b          	slliw	a5,a5,0x1
+     b2e:	9fb5                	addw	a5,a5,a3
+     b30:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+     b34:	00074683          	lbu	a3,0(a4)
+     b38:	fd06879b          	addiw	a5,a3,-48
+     b3c:	0ff7f793          	zext.b	a5,a5
+     b40:	fef671e3          	bgeu	a2,a5,b22 <atoi+0x1c>
+  return n;
+}
+     b44:	6422                	ld	s0,8(sp)
+     b46:	0141                	addi	sp,sp,16
+     b48:	8082                	ret
+  n = 0;
+     b4a:	4501                	li	a0,0
+     b4c:	bfe5                	j	b44 <atoi+0x3e>
+
+0000000000000b4e <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+     b4e:	1141                	addi	sp,sp,-16
+     b50:	e422                	sd	s0,8(sp)
+     b52:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+     b54:	02b57463          	bgeu	a0,a1,b7c <memmove+0x2e>
+    while(n-- > 0)
+     b58:	00c05f63          	blez	a2,b76 <memmove+0x28>
+     b5c:	1602                	slli	a2,a2,0x20
+     b5e:	9201                	srli	a2,a2,0x20
+     b60:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+     b64:	872a                	mv	a4,a0
+      *dst++ = *src++;
+     b66:	0585                	addi	a1,a1,1
+     b68:	0705                	addi	a4,a4,1
+     b6a:	fff5c683          	lbu	a3,-1(a1)
+     b6e:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+     b72:	fef71ae3          	bne	a4,a5,b66 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+     b76:	6422                	ld	s0,8(sp)
+     b78:	0141                	addi	sp,sp,16
+     b7a:	8082                	ret
+    dst += n;
+     b7c:	00c50733          	add	a4,a0,a2
+    src += n;
+     b80:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+     b82:	fec05ae3          	blez	a2,b76 <memmove+0x28>
+     b86:	fff6079b          	addiw	a5,a2,-1
+     b8a:	1782                	slli	a5,a5,0x20
+     b8c:	9381                	srli	a5,a5,0x20
+     b8e:	fff7c793          	not	a5,a5
+     b92:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+     b94:	15fd                	addi	a1,a1,-1
+     b96:	177d                	addi	a4,a4,-1
+     b98:	0005c683          	lbu	a3,0(a1)
+     b9c:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+     ba0:	fee79ae3          	bne	a5,a4,b94 <memmove+0x46>
+     ba4:	bfc9                	j	b76 <memmove+0x28>
+
+0000000000000ba6 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+     ba6:	1141                	addi	sp,sp,-16
+     ba8:	e422                	sd	s0,8(sp)
+     baa:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+     bac:	ca05                	beqz	a2,bdc <memcmp+0x36>
+     bae:	fff6069b          	addiw	a3,a2,-1
+     bb2:	1682                	slli	a3,a3,0x20
+     bb4:	9281                	srli	a3,a3,0x20
+     bb6:	0685                	addi	a3,a3,1
+     bb8:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+     bba:	00054783          	lbu	a5,0(a0)
+     bbe:	0005c703          	lbu	a4,0(a1)
+     bc2:	00e79863          	bne	a5,a4,bd2 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+     bc6:	0505                	addi	a0,a0,1
+    p2++;
+     bc8:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+     bca:	fed518e3          	bne	a0,a3,bba <memcmp+0x14>
+  }
+  return 0;
+     bce:	4501                	li	a0,0
+     bd0:	a019                	j	bd6 <memcmp+0x30>
+      return *p1 - *p2;
+     bd2:	40e7853b          	subw	a0,a5,a4
+}
+     bd6:	6422                	ld	s0,8(sp)
+     bd8:	0141                	addi	sp,sp,16
+     bda:	8082                	ret
+  return 0;
+     bdc:	4501                	li	a0,0
+     bde:	bfe5                	j	bd6 <memcmp+0x30>
+
+0000000000000be0 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+     be0:	1141                	addi	sp,sp,-16
+     be2:	e406                	sd	ra,8(sp)
+     be4:	e022                	sd	s0,0(sp)
+     be6:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+     be8:	f67ff0ef          	jal	b4e <memmove>
+}
+     bec:	60a2                	ld	ra,8(sp)
+     bee:	6402                	ld	s0,0(sp)
+     bf0:	0141                	addi	sp,sp,16
+     bf2:	8082                	ret
+
+0000000000000bf4 <fork>:
+     bf4:	4885                	li	a7,1
+     bf6:	00000073          	ecall
+     bfa:	8082                	ret
+
+0000000000000bfc <exit>:
+     bfc:	4889                	li	a7,2
+     bfe:	00000073          	ecall
+     c02:	8082                	ret
+
+0000000000000c04 <wait>:
+     c04:	488d                	li	a7,3
+     c06:	00000073          	ecall
+     c0a:	8082                	ret
+
+0000000000000c0c <pipe>:
+     c0c:	4891                	li	a7,4
+     c0e:	00000073          	ecall
+     c12:	8082                	ret
+
+0000000000000c14 <read>:
+     c14:	4895                	li	a7,5
+     c16:	00000073          	ecall
+     c1a:	8082                	ret
+
+0000000000000c1c <write>:
+     c1c:	48c1                	li	a7,16
+     c1e:	00000073          	ecall
+     c22:	8082                	ret
+
+0000000000000c24 <close>:
+     c24:	48d5                	li	a7,21
+     c26:	00000073          	ecall
+     c2a:	8082                	ret
+
+0000000000000c2c <kill>:
+     c2c:	4899                	li	a7,6
+     c2e:	00000073          	ecall
+     c32:	8082                	ret
+
+0000000000000c34 <exec>:
+     c34:	489d                	li	a7,7
+     c36:	00000073          	ecall
+     c3a:	8082                	ret
+
+0000000000000c3c <open>:
+     c3c:	48bd                	li	a7,15
+     c3e:	00000073          	ecall
+     c42:	8082                	ret
+
+0000000000000c44 <mknod>:
+     c44:	48c5                	li	a7,17
+     c46:	00000073          	ecall
+     c4a:	8082                	ret
+
+0000000000000c4c <unlink>:
+     c4c:	48c9                	li	a7,18
+     c4e:	00000073          	ecall
+     c52:	8082                	ret
+
+0000000000000c54 <fstat>:
+     c54:	48a1                	li	a7,8
+     c56:	00000073          	ecall
+     c5a:	8082                	ret
+
+0000000000000c5c <link>:
+     c5c:	48cd                	li	a7,19
+     c5e:	00000073          	ecall
+     c62:	8082                	ret
+
+0000000000000c64 <mkdir>:
+     c64:	48d1                	li	a7,20
+     c66:	00000073          	ecall
+     c6a:	8082                	ret
+
+0000000000000c6c <chdir>:
+     c6c:	48a5                	li	a7,9
+     c6e:	00000073          	ecall
+     c72:	8082                	ret
+
+0000000000000c74 <dup>:
+     c74:	48a9                	li	a7,10
+     c76:	00000073          	ecall
+     c7a:	8082                	ret
+
+0000000000000c7c <getpid>:
+     c7c:	48ad                	li	a7,11
+     c7e:	00000073          	ecall
+     c82:	8082                	ret
+
+0000000000000c84 <sbrk>:
+     c84:	48b1                	li	a7,12
+     c86:	00000073          	ecall
+     c8a:	8082                	ret
+
+0000000000000c8c <sleep>:
+     c8c:	48b5                	li	a7,13
+     c8e:	00000073          	ecall
+     c92:	8082                	ret
+
+0000000000000c94 <uptime>:
+     c94:	48b9                	li	a7,14
+     c96:	00000073          	ecall
+     c9a:	8082                	ret
+
+0000000000000c9c <putc>:
+     c9c:	1101                	addi	sp,sp,-32
+     c9e:	ec06                	sd	ra,24(sp)
+     ca0:	e822                	sd	s0,16(sp)
+     ca2:	1000                	addi	s0,sp,32
+     ca4:	feb407a3          	sb	a1,-17(s0)
+     ca8:	4605                	li	a2,1
+     caa:	fef40593          	addi	a1,s0,-17
+     cae:	f6fff0ef          	jal	c1c <write>
+     cb2:	60e2                	ld	ra,24(sp)
+     cb4:	6442                	ld	s0,16(sp)
+     cb6:	6105                	addi	sp,sp,32
+     cb8:	8082                	ret
+
+0000000000000cba <printint>:
+     cba:	7139                	addi	sp,sp,-64
+     cbc:	fc06                	sd	ra,56(sp)
+     cbe:	f822                	sd	s0,48(sp)
+     cc0:	f426                	sd	s1,40(sp)
+     cc2:	0080                	addi	s0,sp,64
+     cc4:	84aa                	mv	s1,a0
+     cc6:	c299                	beqz	a3,ccc <printint+0x12>
+     cc8:	0805c963          	bltz	a1,d5a <printint+0xa0>
+     ccc:	2581                	sext.w	a1,a1
+     cce:	4881                	li	a7,0
+     cd0:	fc040693          	addi	a3,s0,-64
+     cd4:	4701                	li	a4,0
+     cd6:	2601                	sext.w	a2,a2
+     cd8:	00000517          	auipc	a0,0x0
+     cdc:	63050513          	addi	a0,a0,1584 # 1308 <digits>
+     ce0:	883a                	mv	a6,a4
+     ce2:	2705                	addiw	a4,a4,1
+     ce4:	02c5f7bb          	remuw	a5,a1,a2
+     ce8:	1782                	slli	a5,a5,0x20
+     cea:	9381                	srli	a5,a5,0x20
+     cec:	97aa                	add	a5,a5,a0
+     cee:	0007c783          	lbu	a5,0(a5)
+     cf2:	00f68023          	sb	a5,0(a3)
+     cf6:	0005879b          	sext.w	a5,a1
+     cfa:	02c5d5bb          	divuw	a1,a1,a2
+     cfe:	0685                	addi	a3,a3,1
+     d00:	fec7f0e3          	bgeu	a5,a2,ce0 <printint+0x26>
+     d04:	00088c63          	beqz	a7,d1c <printint+0x62>
+     d08:	fd070793          	addi	a5,a4,-48
+     d0c:	00878733          	add	a4,a5,s0
+     d10:	02d00793          	li	a5,45
+     d14:	fef70823          	sb	a5,-16(a4)
+     d18:	0028071b          	addiw	a4,a6,2
+     d1c:	02e05a63          	blez	a4,d50 <printint+0x96>
+     d20:	f04a                	sd	s2,32(sp)
+     d22:	ec4e                	sd	s3,24(sp)
+     d24:	fc040793          	addi	a5,s0,-64
+     d28:	00e78933          	add	s2,a5,a4
+     d2c:	fff78993          	addi	s3,a5,-1
+     d30:	99ba                	add	s3,s3,a4
+     d32:	377d                	addiw	a4,a4,-1
+     d34:	1702                	slli	a4,a4,0x20
+     d36:	9301                	srli	a4,a4,0x20
+     d38:	40e989b3          	sub	s3,s3,a4
+     d3c:	fff94583          	lbu	a1,-1(s2)
+     d40:	8526                	mv	a0,s1
+     d42:	f5bff0ef          	jal	c9c <putc>
+     d46:	197d                	addi	s2,s2,-1
+     d48:	ff391ae3          	bne	s2,s3,d3c <printint+0x82>
+     d4c:	7902                	ld	s2,32(sp)
+     d4e:	69e2                	ld	s3,24(sp)
+     d50:	70e2                	ld	ra,56(sp)
+     d52:	7442                	ld	s0,48(sp)
+     d54:	74a2                	ld	s1,40(sp)
+     d56:	6121                	addi	sp,sp,64
+     d58:	8082                	ret
+     d5a:	40b005bb          	negw	a1,a1
+     d5e:	4885                	li	a7,1
+     d60:	bf85                	j	cd0 <printint+0x16>
+
+0000000000000d62 <vprintf>:
+     d62:	711d                	addi	sp,sp,-96
+     d64:	ec86                	sd	ra,88(sp)
+     d66:	e8a2                	sd	s0,80(sp)
+     d68:	e0ca                	sd	s2,64(sp)
+     d6a:	1080                	addi	s0,sp,96
+     d6c:	0005c903          	lbu	s2,0(a1)
+     d70:	26090863          	beqz	s2,fe0 <vprintf+0x27e>
+     d74:	e4a6                	sd	s1,72(sp)
+     d76:	fc4e                	sd	s3,56(sp)
+     d78:	f852                	sd	s4,48(sp)
+     d7a:	f456                	sd	s5,40(sp)
+     d7c:	f05a                	sd	s6,32(sp)
+     d7e:	ec5e                	sd	s7,24(sp)
+     d80:	e862                	sd	s8,16(sp)
+     d82:	e466                	sd	s9,8(sp)
+     d84:	8b2a                	mv	s6,a0
+     d86:	8a2e                	mv	s4,a1
+     d88:	8bb2                	mv	s7,a2
+     d8a:	4981                	li	s3,0
+     d8c:	4481                	li	s1,0
+     d8e:	4701                	li	a4,0
+     d90:	02500a93          	li	s5,37
+     d94:	06400c13          	li	s8,100
+     d98:	06c00c93          	li	s9,108
+     d9c:	a005                	j	dbc <vprintf+0x5a>
+     d9e:	85ca                	mv	a1,s2
+     da0:	855a                	mv	a0,s6
+     da2:	efbff0ef          	jal	c9c <putc>
+     da6:	a019                	j	dac <vprintf+0x4a>
+     da8:	03598263          	beq	s3,s5,dcc <vprintf+0x6a>
+     dac:	2485                	addiw	s1,s1,1
+     dae:	8726                	mv	a4,s1
+     db0:	009a07b3          	add	a5,s4,s1
+     db4:	0007c903          	lbu	s2,0(a5)
+     db8:	20090c63          	beqz	s2,fd0 <vprintf+0x26e>
+     dbc:	0009079b          	sext.w	a5,s2
+     dc0:	fe0994e3          	bnez	s3,da8 <vprintf+0x46>
+     dc4:	fd579de3          	bne	a5,s5,d9e <vprintf+0x3c>
+     dc8:	89be                	mv	s3,a5
+     dca:	b7cd                	j	dac <vprintf+0x4a>
+     dcc:	00ea06b3          	add	a3,s4,a4
+     dd0:	0016c683          	lbu	a3,1(a3)
+     dd4:	8636                	mv	a2,a3
+     dd6:	c681                	beqz	a3,dde <vprintf+0x7c>
+     dd8:	9752                	add	a4,a4,s4
+     dda:	00274603          	lbu	a2,2(a4)
+     dde:	03878f63          	beq	a5,s8,e1c <vprintf+0xba>
+     de2:	05978963          	beq	a5,s9,e34 <vprintf+0xd2>
+     de6:	07500713          	li	a4,117
+     dea:	0ee78363          	beq	a5,a4,ed0 <vprintf+0x16e>
+     dee:	07800713          	li	a4,120
+     df2:	12e78563          	beq	a5,a4,f1c <vprintf+0x1ba>
+     df6:	07000713          	li	a4,112
+     dfa:	14e78a63          	beq	a5,a4,f4e <vprintf+0x1ec>
+     dfe:	07300713          	li	a4,115
+     e02:	18e78a63          	beq	a5,a4,f96 <vprintf+0x234>
+     e06:	02500713          	li	a4,37
+     e0a:	04e79563          	bne	a5,a4,e54 <vprintf+0xf2>
+     e0e:	02500593          	li	a1,37
+     e12:	855a                	mv	a0,s6
+     e14:	e89ff0ef          	jal	c9c <putc>
+     e18:	4981                	li	s3,0
+     e1a:	bf49                	j	dac <vprintf+0x4a>
+     e1c:	008b8913          	addi	s2,s7,8
+     e20:	4685                	li	a3,1
+     e22:	4629                	li	a2,10
+     e24:	000ba583          	lw	a1,0(s7)
+     e28:	855a                	mv	a0,s6
+     e2a:	e91ff0ef          	jal	cba <printint>
+     e2e:	8bca                	mv	s7,s2
+     e30:	4981                	li	s3,0
+     e32:	bfad                	j	dac <vprintf+0x4a>
+     e34:	06400793          	li	a5,100
+     e38:	02f68963          	beq	a3,a5,e6a <vprintf+0x108>
+     e3c:	06c00793          	li	a5,108
+     e40:	04f68263          	beq	a3,a5,e84 <vprintf+0x122>
+     e44:	07500793          	li	a5,117
+     e48:	0af68063          	beq	a3,a5,ee8 <vprintf+0x186>
+     e4c:	07800793          	li	a5,120
+     e50:	0ef68263          	beq	a3,a5,f34 <vprintf+0x1d2>
+     e54:	02500593          	li	a1,37
+     e58:	855a                	mv	a0,s6
+     e5a:	e43ff0ef          	jal	c9c <putc>
+     e5e:	85ca                	mv	a1,s2
+     e60:	855a                	mv	a0,s6
+     e62:	e3bff0ef          	jal	c9c <putc>
+     e66:	4981                	li	s3,0
+     e68:	b791                	j	dac <vprintf+0x4a>
+     e6a:	008b8913          	addi	s2,s7,8
+     e6e:	4685                	li	a3,1
+     e70:	4629                	li	a2,10
+     e72:	000ba583          	lw	a1,0(s7)
+     e76:	855a                	mv	a0,s6
+     e78:	e43ff0ef          	jal	cba <printint>
+     e7c:	2485                	addiw	s1,s1,1
+     e7e:	8bca                	mv	s7,s2
+     e80:	4981                	li	s3,0
+     e82:	b72d                	j	dac <vprintf+0x4a>
+     e84:	06400793          	li	a5,100
+     e88:	02f60763          	beq	a2,a5,eb6 <vprintf+0x154>
+     e8c:	07500793          	li	a5,117
+     e90:	06f60963          	beq	a2,a5,f02 <vprintf+0x1a0>
+     e94:	07800793          	li	a5,120
+     e98:	faf61ee3          	bne	a2,a5,e54 <vprintf+0xf2>
+     e9c:	008b8913          	addi	s2,s7,8
+     ea0:	4681                	li	a3,0
+     ea2:	4641                	li	a2,16
+     ea4:	000ba583          	lw	a1,0(s7)
+     ea8:	855a                	mv	a0,s6
+     eaa:	e11ff0ef          	jal	cba <printint>
+     eae:	2489                	addiw	s1,s1,2
+     eb0:	8bca                	mv	s7,s2
+     eb2:	4981                	li	s3,0
+     eb4:	bde5                	j	dac <vprintf+0x4a>
+     eb6:	008b8913          	addi	s2,s7,8
+     eba:	4685                	li	a3,1
+     ebc:	4629                	li	a2,10
+     ebe:	000ba583          	lw	a1,0(s7)
+     ec2:	855a                	mv	a0,s6
+     ec4:	df7ff0ef          	jal	cba <printint>
+     ec8:	2489                	addiw	s1,s1,2
+     eca:	8bca                	mv	s7,s2
+     ecc:	4981                	li	s3,0
+     ece:	bdf9                	j	dac <vprintf+0x4a>
+     ed0:	008b8913          	addi	s2,s7,8
+     ed4:	4681                	li	a3,0
+     ed6:	4629                	li	a2,10
+     ed8:	000ba583          	lw	a1,0(s7)
+     edc:	855a                	mv	a0,s6
+     ede:	dddff0ef          	jal	cba <printint>
+     ee2:	8bca                	mv	s7,s2
+     ee4:	4981                	li	s3,0
+     ee6:	b5d9                	j	dac <vprintf+0x4a>
+     ee8:	008b8913          	addi	s2,s7,8
+     eec:	4681                	li	a3,0
+     eee:	4629                	li	a2,10
+     ef0:	000ba583          	lw	a1,0(s7)
+     ef4:	855a                	mv	a0,s6
+     ef6:	dc5ff0ef          	jal	cba <printint>
+     efa:	2485                	addiw	s1,s1,1
+     efc:	8bca                	mv	s7,s2
+     efe:	4981                	li	s3,0
+     f00:	b575                	j	dac <vprintf+0x4a>
+     f02:	008b8913          	addi	s2,s7,8
+     f06:	4681                	li	a3,0
+     f08:	4629                	li	a2,10
+     f0a:	000ba583          	lw	a1,0(s7)
+     f0e:	855a                	mv	a0,s6
+     f10:	dabff0ef          	jal	cba <printint>
+     f14:	2489                	addiw	s1,s1,2
+     f16:	8bca                	mv	s7,s2
+     f18:	4981                	li	s3,0
+     f1a:	bd49                	j	dac <vprintf+0x4a>
+     f1c:	008b8913          	addi	s2,s7,8
+     f20:	4681                	li	a3,0
+     f22:	4641                	li	a2,16
+     f24:	000ba583          	lw	a1,0(s7)
+     f28:	855a                	mv	a0,s6
+     f2a:	d91ff0ef          	jal	cba <printint>
+     f2e:	8bca                	mv	s7,s2
+     f30:	4981                	li	s3,0
+     f32:	bdad                	j	dac <vprintf+0x4a>
+     f34:	008b8913          	addi	s2,s7,8
+     f38:	4681                	li	a3,0
+     f3a:	4641                	li	a2,16
+     f3c:	000ba583          	lw	a1,0(s7)
+     f40:	855a                	mv	a0,s6
+     f42:	d79ff0ef          	jal	cba <printint>
+     f46:	2485                	addiw	s1,s1,1
+     f48:	8bca                	mv	s7,s2
+     f4a:	4981                	li	s3,0
+     f4c:	b585                	j	dac <vprintf+0x4a>
+     f4e:	e06a                	sd	s10,0(sp)
+     f50:	008b8d13          	addi	s10,s7,8
+     f54:	000bb983          	ld	s3,0(s7)
+     f58:	03000593          	li	a1,48
+     f5c:	855a                	mv	a0,s6
+     f5e:	d3fff0ef          	jal	c9c <putc>
+     f62:	07800593          	li	a1,120
+     f66:	855a                	mv	a0,s6
+     f68:	d35ff0ef          	jal	c9c <putc>
+     f6c:	4941                	li	s2,16
+     f6e:	00000b97          	auipc	s7,0x0
+     f72:	39ab8b93          	addi	s7,s7,922 # 1308 <digits>
+     f76:	03c9d793          	srli	a5,s3,0x3c
+     f7a:	97de                	add	a5,a5,s7
+     f7c:	0007c583          	lbu	a1,0(a5)
+     f80:	855a                	mv	a0,s6
+     f82:	d1bff0ef          	jal	c9c <putc>
+     f86:	0992                	slli	s3,s3,0x4
+     f88:	397d                	addiw	s2,s2,-1
+     f8a:	fe0916e3          	bnez	s2,f76 <vprintf+0x214>
+     f8e:	8bea                	mv	s7,s10
+     f90:	4981                	li	s3,0
+     f92:	6d02                	ld	s10,0(sp)
+     f94:	bd21                	j	dac <vprintf+0x4a>
+     f96:	008b8993          	addi	s3,s7,8
+     f9a:	000bb903          	ld	s2,0(s7)
+     f9e:	00090f63          	beqz	s2,fbc <vprintf+0x25a>
+     fa2:	00094583          	lbu	a1,0(s2)
+     fa6:	c195                	beqz	a1,fca <vprintf+0x268>
+     fa8:	855a                	mv	a0,s6
+     faa:	cf3ff0ef          	jal	c9c <putc>
+     fae:	0905                	addi	s2,s2,1
+     fb0:	00094583          	lbu	a1,0(s2)
+     fb4:	f9f5                	bnez	a1,fa8 <vprintf+0x246>
+     fb6:	8bce                	mv	s7,s3
+     fb8:	4981                	li	s3,0
+     fba:	bbcd                	j	dac <vprintf+0x4a>
+     fbc:	00000917          	auipc	s2,0x0
+     fc0:	31490913          	addi	s2,s2,788 # 12d0 <malloc+0x208>
+     fc4:	02800593          	li	a1,40
+     fc8:	b7c5                	j	fa8 <vprintf+0x246>
+     fca:	8bce                	mv	s7,s3
+     fcc:	4981                	li	s3,0
+     fce:	bbf9                	j	dac <vprintf+0x4a>
+     fd0:	64a6                	ld	s1,72(sp)
+     fd2:	79e2                	ld	s3,56(sp)
+     fd4:	7a42                	ld	s4,48(sp)
+     fd6:	7aa2                	ld	s5,40(sp)
+     fd8:	7b02                	ld	s6,32(sp)
+     fda:	6be2                	ld	s7,24(sp)
+     fdc:	6c42                	ld	s8,16(sp)
+     fde:	6ca2                	ld	s9,8(sp)
+     fe0:	60e6                	ld	ra,88(sp)
+     fe2:	6446                	ld	s0,80(sp)
+     fe4:	6906                	ld	s2,64(sp)
+     fe6:	6125                	addi	sp,sp,96
+     fe8:	8082                	ret
+
+0000000000000fea <fprintf>:
+     fea:	715d                	addi	sp,sp,-80
+     fec:	ec06                	sd	ra,24(sp)
+     fee:	e822                	sd	s0,16(sp)
+     ff0:	1000                	addi	s0,sp,32
+     ff2:	e010                	sd	a2,0(s0)
+     ff4:	e414                	sd	a3,8(s0)
+     ff6:	e818                	sd	a4,16(s0)
+     ff8:	ec1c                	sd	a5,24(s0)
+     ffa:	03043023          	sd	a6,32(s0)
+     ffe:	03143423          	sd	a7,40(s0)
+    1002:	fe843423          	sd	s0,-24(s0)
+    1006:	8622                	mv	a2,s0
+    1008:	d5bff0ef          	jal	d62 <vprintf>
+    100c:	60e2                	ld	ra,24(sp)
+    100e:	6442                	ld	s0,16(sp)
+    1010:	6161                	addi	sp,sp,80
+    1012:	8082                	ret
+
+0000000000001014 <printf>:
+    1014:	711d                	addi	sp,sp,-96
+    1016:	ec06                	sd	ra,24(sp)
+    1018:	e822                	sd	s0,16(sp)
+    101a:	1000                	addi	s0,sp,32
+    101c:	e40c                	sd	a1,8(s0)
+    101e:	e810                	sd	a2,16(s0)
+    1020:	ec14                	sd	a3,24(s0)
+    1022:	f018                	sd	a4,32(s0)
+    1024:	f41c                	sd	a5,40(s0)
+    1026:	03043823          	sd	a6,48(s0)
+    102a:	03143c23          	sd	a7,56(s0)
+    102e:	00840613          	addi	a2,s0,8
+    1032:	fec43423          	sd	a2,-24(s0)
+    1036:	85aa                	mv	a1,a0
+    1038:	4505                	li	a0,1
+    103a:	d29ff0ef          	jal	d62 <vprintf>
+    103e:	60e2                	ld	ra,24(sp)
+    1040:	6442                	ld	s0,16(sp)
+    1042:	6125                	addi	sp,sp,96
+    1044:	8082                	ret
+
+0000000000001046 <free>:
+    1046:	1141                	addi	sp,sp,-16
+    1048:	e422                	sd	s0,8(sp)
+    104a:	0800                	addi	s0,sp,16
+    104c:	ff050693          	addi	a3,a0,-16
+    1050:	00001797          	auipc	a5,0x1
+    1054:	fc07b783          	ld	a5,-64(a5) # 2010 <freep>
+    1058:	a02d                	j	1082 <free+0x3c>
+    105a:	4618                	lw	a4,8(a2)
+    105c:	9f2d                	addw	a4,a4,a1
+    105e:	fee52c23          	sw	a4,-8(a0)
+    1062:	6398                	ld	a4,0(a5)
+    1064:	6310                	ld	a2,0(a4)
+    1066:	a83d                	j	10a4 <free+0x5e>
+    1068:	ff852703          	lw	a4,-8(a0)
+    106c:	9f31                	addw	a4,a4,a2
+    106e:	c798                	sw	a4,8(a5)
+    1070:	ff053683          	ld	a3,-16(a0)
+    1074:	a091                	j	10b8 <free+0x72>
+    1076:	6398                	ld	a4,0(a5)
+    1078:	00e7e463          	bltu	a5,a4,1080 <free+0x3a>
+    107c:	00e6ea63          	bltu	a3,a4,1090 <free+0x4a>
+    1080:	87ba                	mv	a5,a4
+    1082:	fed7fae3          	bgeu	a5,a3,1076 <free+0x30>
+    1086:	6398                	ld	a4,0(a5)
+    1088:	00e6e463          	bltu	a3,a4,1090 <free+0x4a>
+    108c:	fee7eae3          	bltu	a5,a4,1080 <free+0x3a>
+    1090:	ff852583          	lw	a1,-8(a0)
+    1094:	6390                	ld	a2,0(a5)
+    1096:	02059813          	slli	a6,a1,0x20
+    109a:	01c85713          	srli	a4,a6,0x1c
+    109e:	9736                	add	a4,a4,a3
+    10a0:	fae60de3          	beq	a2,a4,105a <free+0x14>
+    10a4:	fec53823          	sd	a2,-16(a0)
+    10a8:	4790                	lw	a2,8(a5)
+    10aa:	02061593          	slli	a1,a2,0x20
+    10ae:	01c5d713          	srli	a4,a1,0x1c
+    10b2:	973e                	add	a4,a4,a5
+    10b4:	fae68ae3          	beq	a3,a4,1068 <free+0x22>
+    10b8:	e394                	sd	a3,0(a5)
+    10ba:	00001717          	auipc	a4,0x1
+    10be:	f4f73b23          	sd	a5,-170(a4) # 2010 <freep>
+    10c2:	6422                	ld	s0,8(sp)
+    10c4:	0141                	addi	sp,sp,16
+    10c6:	8082                	ret
+
+00000000000010c8 <malloc>:
+    10c8:	7139                	addi	sp,sp,-64
+    10ca:	fc06                	sd	ra,56(sp)
+    10cc:	f822                	sd	s0,48(sp)
+    10ce:	f426                	sd	s1,40(sp)
+    10d0:	ec4e                	sd	s3,24(sp)
+    10d2:	0080                	addi	s0,sp,64
+    10d4:	02051493          	slli	s1,a0,0x20
+    10d8:	9081                	srli	s1,s1,0x20
+    10da:	04bd                	addi	s1,s1,15
+    10dc:	8091                	srli	s1,s1,0x4
+    10de:	0014899b          	addiw	s3,s1,1
+    10e2:	0485                	addi	s1,s1,1
+    10e4:	00001517          	auipc	a0,0x1
+    10e8:	f2c53503          	ld	a0,-212(a0) # 2010 <freep>
+    10ec:	c915                	beqz	a0,1120 <malloc+0x58>
+    10ee:	611c                	ld	a5,0(a0)
+    10f0:	4798                	lw	a4,8(a5)
+    10f2:	08977a63          	bgeu	a4,s1,1186 <malloc+0xbe>
+    10f6:	f04a                	sd	s2,32(sp)
+    10f8:	e852                	sd	s4,16(sp)
+    10fa:	e456                	sd	s5,8(sp)
+    10fc:	e05a                	sd	s6,0(sp)
+    10fe:	8a4e                	mv	s4,s3
+    1100:	0009871b          	sext.w	a4,s3
+    1104:	6685                	lui	a3,0x1
+    1106:	00d77363          	bgeu	a4,a3,110c <malloc+0x44>
+    110a:	6a05                	lui	s4,0x1
+    110c:	000a0b1b          	sext.w	s6,s4
+    1110:	004a1a1b          	slliw	s4,s4,0x4
+    1114:	00001917          	auipc	s2,0x1
+    1118:	efc90913          	addi	s2,s2,-260 # 2010 <freep>
+    111c:	5afd                	li	s5,-1
+    111e:	a081                	j	115e <malloc+0x96>
+    1120:	f04a                	sd	s2,32(sp)
+    1122:	e852                	sd	s4,16(sp)
+    1124:	e456                	sd	s5,8(sp)
+    1126:	e05a                	sd	s6,0(sp)
+    1128:	00001797          	auipc	a5,0x1
+    112c:	f6078793          	addi	a5,a5,-160 # 2088 <base>
+    1130:	00001717          	auipc	a4,0x1
+    1134:	eef73023          	sd	a5,-288(a4) # 2010 <freep>
+    1138:	e39c                	sd	a5,0(a5)
+    113a:	0007a423          	sw	zero,8(a5)
+    113e:	b7c1                	j	10fe <malloc+0x36>
+    1140:	6398                	ld	a4,0(a5)
+    1142:	e118                	sd	a4,0(a0)
+    1144:	a8a9                	j	119e <malloc+0xd6>
+    1146:	01652423          	sw	s6,8(a0)
+    114a:	0541                	addi	a0,a0,16
+    114c:	efbff0ef          	jal	1046 <free>
+    1150:	00093503          	ld	a0,0(s2)
+    1154:	c12d                	beqz	a0,11b6 <malloc+0xee>
+    1156:	611c                	ld	a5,0(a0)
+    1158:	4798                	lw	a4,8(a5)
+    115a:	02977263          	bgeu	a4,s1,117e <malloc+0xb6>
+    115e:	00093703          	ld	a4,0(s2)
+    1162:	853e                	mv	a0,a5
+    1164:	fef719e3          	bne	a4,a5,1156 <malloc+0x8e>
+    1168:	8552                	mv	a0,s4
+    116a:	b1bff0ef          	jal	c84 <sbrk>
+    116e:	fd551ce3          	bne	a0,s5,1146 <malloc+0x7e>
+    1172:	4501                	li	a0,0
+    1174:	7902                	ld	s2,32(sp)
+    1176:	6a42                	ld	s4,16(sp)
+    1178:	6aa2                	ld	s5,8(sp)
+    117a:	6b02                	ld	s6,0(sp)
+    117c:	a03d                	j	11aa <malloc+0xe2>
+    117e:	7902                	ld	s2,32(sp)
+    1180:	6a42                	ld	s4,16(sp)
+    1182:	6aa2                	ld	s5,8(sp)
+    1184:	6b02                	ld	s6,0(sp)
+    1186:	fae48de3          	beq	s1,a4,1140 <malloc+0x78>
+    118a:	4137073b          	subw	a4,a4,s3
+    118e:	c798                	sw	a4,8(a5)
+    1190:	02071693          	slli	a3,a4,0x20
+    1194:	01c6d713          	srli	a4,a3,0x1c
+    1198:	97ba                	add	a5,a5,a4
+    119a:	0137a423          	sw	s3,8(a5)
+    119e:	00001717          	auipc	a4,0x1
+    11a2:	e6a73923          	sd	a0,-398(a4) # 2010 <freep>
+    11a6:	01078513          	addi	a0,a5,16
+    11aa:	70e2                	ld	ra,56(sp)
+    11ac:	7442                	ld	s0,48(sp)
+    11ae:	74a2                	ld	s1,40(sp)
+    11b0:	69e2                	ld	s3,24(sp)
+    11b2:	6121                	addi	sp,sp,64
+    11b4:	8082                	ret
+    11b6:	7902                	ld	s2,32(sp)
+    11b8:	6a42                	ld	s4,16(sp)
+    11ba:	6aa2                	ld	s5,8(sp)
+    11bc:	6b02                	ld	s6,0(sp)
+    11be:	b7f5                	j	11aa <malloc+0xe2>
diff --git a/xv6-labs-2024/user/sh.c b/xv6-labs-2024/user/sh.c
new file mode 100644
index 0000000..836ebcb
--- /dev/null
+++ b/xv6-labs-2024/user/sh.c
@@ -0,0 +1,494 @@
+// Shell.
+
+#include "kernel/types.h"
+#include "user/user.h"
+#include "kernel/fcntl.h"
+
+// Parsed command representation
+#define EXEC  1
+#define REDIR 2
+#define PIPE  3
+#define LIST  4
+#define BACK  5
+
+#define MAXARGS 10
+
+struct cmd {
+  int type;
+};
+
+struct execcmd {
+  int type;
+  char *argv[MAXARGS];
+  char *eargv[MAXARGS];
+};
+
+struct redircmd {
+  int type;
+  struct cmd *cmd;
+  char *file;
+  char *efile;
+  int mode;
+  int fd;
+};
+
+struct pipecmd {
+  int type;
+  struct cmd *left;
+  struct cmd *right;
+};
+
+struct listcmd {
+  int type;
+  struct cmd *left;
+  struct cmd *right;
+};
+
+struct backcmd {
+  int type;
+  struct cmd *cmd;
+};
+
+int fork1(void);  // Fork but panics on failure.
+void panic(char*);
+struct cmd *parsecmd(char*);
+void runcmd(struct cmd*) __attribute__((noreturn));
+
+// Execute cmd.  Never returns.
+void
+runcmd(struct cmd *cmd)
+{
+  int p[2];
+  struct backcmd *bcmd;
+  struct execcmd *ecmd;
+  struct listcmd *lcmd;
+  struct pipecmd *pcmd;
+  struct redircmd *rcmd;
+
+  if(cmd == 0)
+    exit(1);
+
+  switch(cmd->type){
+  default:
+    panic("runcmd");
+
+  case EXEC:
+    ecmd = (struct execcmd*)cmd;
+    if(ecmd->argv[0] == 0)
+      exit(1);
+    exec(ecmd->argv[0], ecmd->argv);
+    fprintf(2, "exec %s failed\n", ecmd->argv[0]);
+    break;
+
+  case REDIR:
+    rcmd = (struct redircmd*)cmd;
+    close(rcmd->fd);
+    if(open(rcmd->file, rcmd->mode) < 0){
+      fprintf(2, "open %s failed\n", rcmd->file);
+      exit(1);
+    }
+    runcmd(rcmd->cmd);
+    break;
+
+  case LIST:
+    lcmd = (struct listcmd*)cmd;
+    if(fork1() == 0)
+      runcmd(lcmd->left);
+    wait(0);
+    runcmd(lcmd->right);
+    break;
+
+  case PIPE:
+    pcmd = (struct pipecmd*)cmd;
+    if(pipe(p) < 0)
+      panic("pipe");
+    if(fork1() == 0){
+      close(1);
+      dup(p[1]);
+      close(p[0]);
+      close(p[1]);
+      runcmd(pcmd->left);
+    }
+    if(fork1() == 0){
+      close(0);
+      dup(p[0]);
+      close(p[0]);
+      close(p[1]);
+      runcmd(pcmd->right);
+    }
+    close(p[0]);
+    close(p[1]);
+    wait(0);
+    wait(0);
+    break;
+
+  case BACK:
+    bcmd = (struct backcmd*)cmd;
+    if(fork1() == 0)
+      runcmd(bcmd->cmd);
+    break;
+  }
+  exit(0);
+}
+
+int
+getcmd(char *buf, int nbuf)
+{
+  write(2, "$ ", 2);
+  memset(buf, 0, nbuf);
+  gets(buf, nbuf);
+  if(buf[0] == 0) // EOF
+    return -1;
+  return 0;
+}
+
+int
+main(void)
+{
+  static char buf[100];
+  int fd;
+
+  // Ensure that three file descriptors are open.
+  while((fd = open("console", O_RDWR)) >= 0){
+    if(fd >= 3){
+      close(fd);
+      break;
+    }
+  }
+
+  // Read and run input commands.
+  while(getcmd(buf, sizeof(buf)) >= 0){
+    if(buf[0] == 'c' && buf[1] == 'd' && buf[2] == ' '){
+      // Chdir must be called by the parent, not the child.
+      buf[strlen(buf)-1] = 0;  // chop \n
+      if(chdir(buf+3) < 0)
+        fprintf(2, "cannot cd %s\n", buf+3);
+      continue;
+    }
+    if(fork1() == 0)
+      runcmd(parsecmd(buf));
+    wait(0);
+  }
+  exit(0);
+}
+
+void
+panic(char *s)
+{
+  fprintf(2, "%s\n", s);
+  exit(1);
+}
+
+int
+fork1(void)
+{
+  int pid;
+
+  pid = fork();
+  if(pid == -1)
+    panic("fork");
+  return pid;
+}
+
+//PAGEBREAK!
+// Constructors
+
+struct cmd*
+execcmd(void)
+{
+  struct execcmd *cmd;
+
+  cmd = malloc(sizeof(*cmd));
+  memset(cmd, 0, sizeof(*cmd));
+  cmd->type = EXEC;
+  return (struct cmd*)cmd;
+}
+
+struct cmd*
+redircmd(struct cmd *subcmd, char *file, char *efile, int mode, int fd)
+{
+  struct redircmd *cmd;
+
+  cmd = malloc(sizeof(*cmd));
+  memset(cmd, 0, sizeof(*cmd));
+  cmd->type = REDIR;
+  cmd->cmd = subcmd;
+  cmd->file = file;
+  cmd->efile = efile;
+  cmd->mode = mode;
+  cmd->fd = fd;
+  return (struct cmd*)cmd;
+}
+
+struct cmd*
+pipecmd(struct cmd *left, struct cmd *right)
+{
+  struct pipecmd *cmd;
+
+  cmd = malloc(sizeof(*cmd));
+  memset(cmd, 0, sizeof(*cmd));
+  cmd->type = PIPE;
+  cmd->left = left;
+  cmd->right = right;
+  return (struct cmd*)cmd;
+}
+
+struct cmd*
+listcmd(struct cmd *left, struct cmd *right)
+{
+  struct listcmd *cmd;
+
+  cmd = malloc(sizeof(*cmd));
+  memset(cmd, 0, sizeof(*cmd));
+  cmd->type = LIST;
+  cmd->left = left;
+  cmd->right = right;
+  return (struct cmd*)cmd;
+}
+
+struct cmd*
+backcmd(struct cmd *subcmd)
+{
+  struct backcmd *cmd;
+
+  cmd = malloc(sizeof(*cmd));
+  memset(cmd, 0, sizeof(*cmd));
+  cmd->type = BACK;
+  cmd->cmd = subcmd;
+  return (struct cmd*)cmd;
+}
+//PAGEBREAK!
+// Parsing
+
+char whitespace[] = " \t\r\n\v";
+char symbols[] = "<|>&;()";
+
+int
+gettoken(char **ps, char *es, char **q, char **eq)
+{
+  char *s;
+  int ret;
+
+  s = *ps;
+  while(s < es && strchr(whitespace, *s))
+    s++;
+  if(q)
+    *q = s;
+  ret = *s;
+  switch(*s){
+  case 0:
+    break;
+  case '|':
+  case '(':
+  case ')':
+  case ';':
+  case '&':
+  case '<':
+    s++;
+    break;
+  case '>':
+    s++;
+    if(*s == '>'){
+      ret = '+';
+      s++;
+    }
+    break;
+  default:
+    ret = 'a';
+    while(s < es && !strchr(whitespace, *s) && !strchr(symbols, *s))
+      s++;
+    break;
+  }
+  if(eq)
+    *eq = s;
+
+  while(s < es && strchr(whitespace, *s))
+    s++;
+  *ps = s;
+  return ret;
+}
+
+int
+peek(char **ps, char *es, char *toks)
+{
+  char *s;
+
+  s = *ps;
+  while(s < es && strchr(whitespace, *s))
+    s++;
+  *ps = s;
+  return *s && strchr(toks, *s);
+}
+
+struct cmd *parseline(char**, char*);
+struct cmd *parsepipe(char**, char*);
+struct cmd *parseexec(char**, char*);
+struct cmd *nulterminate(struct cmd*);
+
+struct cmd*
+parsecmd(char *s)
+{
+  char *es;
+  struct cmd *cmd;
+
+  es = s + strlen(s);
+  cmd = parseline(&s, es);
+  peek(&s, es, "");
+  if(s != es){
+    fprintf(2, "leftovers: %s\n", s);
+    panic("syntax");
+  }
+  nulterminate(cmd);
+  return cmd;
+}
+
+struct cmd*
+parseline(char **ps, char *es)
+{
+  struct cmd *cmd;
+
+  cmd = parsepipe(ps, es);
+  while(peek(ps, es, "&")){
+    gettoken(ps, es, 0, 0);
+    cmd = backcmd(cmd);
+  }
+  if(peek(ps, es, ";")){
+    gettoken(ps, es, 0, 0);
+    cmd = listcmd(cmd, parseline(ps, es));
+  }
+  return cmd;
+}
+
+struct cmd*
+parsepipe(char **ps, char *es)
+{
+  struct cmd *cmd;
+
+  cmd = parseexec(ps, es);
+  if(peek(ps, es, "|")){
+    gettoken(ps, es, 0, 0);
+    cmd = pipecmd(cmd, parsepipe(ps, es));
+  }
+  return cmd;
+}
+
+struct cmd*
+parseredirs(struct cmd *cmd, char **ps, char *es)
+{
+  int tok;
+  char *q, *eq;
+
+  while(peek(ps, es, "<>")){
+    tok = gettoken(ps, es, 0, 0);
+    if(gettoken(ps, es, &q, &eq) != 'a')
+      panic("missing file for redirection");
+    switch(tok){
+    case '<':
+      cmd = redircmd(cmd, q, eq, O_RDONLY, 0);
+      break;
+    case '>':
+      cmd = redircmd(cmd, q, eq, O_WRONLY|O_CREATE|O_TRUNC, 1);
+      break;
+    case '+':  // >>
+      cmd = redircmd(cmd, q, eq, O_WRONLY|O_CREATE, 1);
+      break;
+    }
+  }
+  return cmd;
+}
+
+struct cmd*
+parseblock(char **ps, char *es)
+{
+  struct cmd *cmd;
+
+  if(!peek(ps, es, "("))
+    panic("parseblock");
+  gettoken(ps, es, 0, 0);
+  cmd = parseline(ps, es);
+  if(!peek(ps, es, ")"))
+    panic("syntax - missing )");
+  gettoken(ps, es, 0, 0);
+  cmd = parseredirs(cmd, ps, es);
+  return cmd;
+}
+
+struct cmd*
+parseexec(char **ps, char *es)
+{
+  char *q, *eq;
+  int tok, argc;
+  struct execcmd *cmd;
+  struct cmd *ret;
+
+  if(peek(ps, es, "("))
+    return parseblock(ps, es);
+
+  ret = execcmd();
+  cmd = (struct execcmd*)ret;
+
+  argc = 0;
+  ret = parseredirs(ret, ps, es);
+  while(!peek(ps, es, "|)&;")){
+    if((tok=gettoken(ps, es, &q, &eq)) == 0)
+      break;
+    if(tok != 'a')
+      panic("syntax");
+    cmd->argv[argc] = q;
+    cmd->eargv[argc] = eq;
+    argc++;
+    if(argc >= MAXARGS)
+      panic("too many args");
+    ret = parseredirs(ret, ps, es);
+  }
+  cmd->argv[argc] = 0;
+  cmd->eargv[argc] = 0;
+  return ret;
+}
+
+// NUL-terminate all the counted strings.
+struct cmd*
+nulterminate(struct cmd *cmd)
+{
+  int i;
+  struct backcmd *bcmd;
+  struct execcmd *ecmd;
+  struct listcmd *lcmd;
+  struct pipecmd *pcmd;
+  struct redircmd *rcmd;
+
+  if(cmd == 0)
+    return 0;
+
+  switch(cmd->type){
+  case EXEC:
+    ecmd = (struct execcmd*)cmd;
+    for(i=0; ecmd->argv[i]; i++)
+      *ecmd->eargv[i] = 0;
+    break;
+
+  case REDIR:
+    rcmd = (struct redircmd*)cmd;
+    nulterminate(rcmd->cmd);
+    *rcmd->efile = 0;
+    break;
+
+  case PIPE:
+    pcmd = (struct pipecmd*)cmd;
+    nulterminate(pcmd->left);
+    nulterminate(pcmd->right);
+    break;
+
+  case LIST:
+    lcmd = (struct listcmd*)cmd;
+    nulterminate(lcmd->left);
+    nulterminate(lcmd->right);
+    break;
+
+  case BACK:
+    bcmd = (struct backcmd*)cmd;
+    nulterminate(bcmd->cmd);
+    break;
+  }
+  return cmd;
+}
diff --git a/xv6-labs-2024/user/sh.d b/xv6-labs-2024/user/sh.d
new file mode 100644
index 0000000..c3b3894
--- /dev/null
+++ b/xv6-labs-2024/user/sh.d
@@ -0,0 +1,2 @@
+user/sh.o: user/sh.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h user/user.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/sh.o b/xv6-labs-2024/user/sh.o
new file mode 100644
index 0000000..71c3e76
Binary files /dev/null and b/xv6-labs-2024/user/sh.o differ
diff --git a/xv6-labs-2024/user/sh.sym b/xv6-labs-2024/user/sh.sym
new file mode 100644
index 0000000..8c9f87c
--- /dev/null
+++ b/xv6-labs-2024/user/sh.sym
@@ -0,0 +1,84 @@
+0000000000000000 .text
+00000000000011c0 .rodata
+0000000000001320 .eh_frame
+0000000000002000 .data
+0000000000002010 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 sh.c
+0000000000002020 buf.0
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000c9c putc
+0000000000000cba printint
+0000000000001308 digits
+0000000000000000 umalloc.c
+0000000000002010 freep
+0000000000002088 base
+00000000000009a4 strcpy
+0000000000001014 printf
+0000000000000b4e memmove
+0000000000000c44 mknod
+00000000000001d2 execcmd
+0000000000000a5c gets
+0000000000000c7c getpid
+000000000000066c parsepipe
+0000000000000852 parsecmd
+0000000000000be0 memcpy
+00000000000002dc backcmd
+000000000000044c peek
+00000000000004b0 parseredirs
+0000000000000310 gettoken
+00000000000010c8 malloc
+0000000000000c8c sleep
+0000000000002008 whitespace
+0000000000000068 fork1
+00000000000007d2 nulterminate
+0000000000000c0c pipe
+0000000000000000 getcmd
+0000000000000c1c write
+0000000000000c54 fstat
+0000000000000fea fprintf
+0000000000000c2c kill
+0000000000000d62 vprintf
+0000000000000c6c chdir
+00000000000006c6 parseline
+000000000000008e runcmd
+000000000000074e parseblock
+0000000000000c34 exec
+0000000000000c04 wait
+0000000000002000 symbols
+0000000000000c14 read
+0000000000000588 parseexec
+0000000000000c4c unlink
+000000000000004a panic
+0000000000000ba6 memcmp
+0000000000000bf4 fork
+0000000000000c84 sbrk
+0000000000000c94 uptime
+0000000000000a16 memset
+00000000000008c2 main
+00000000000009c0 strcmp
+0000000000000c74 dup
+0000000000000260 pipecmd
+0000000000000200 redircmd
+0000000000000acc stat
+0000000000000c5c link
+0000000000000bfc exit
+0000000000000992 start
+0000000000000b06 atoi
+00000000000009ec strlen
+0000000000000c3c open
+0000000000000a38 strchr
+0000000000000c64 mkdir
+0000000000000c24 close
+000000000000029e listcmd
+0000000000001046 free
diff --git a/xv6-labs-2024/user/stressfs.asm b/xv6-labs-2024/user/stressfs.asm
new file mode 100644
index 0000000..4c66ff5
--- /dev/null
+++ b/xv6-labs-2024/user/stressfs.asm
@@ -0,0 +1,1134 @@
+
+user/_stressfs:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+
+int
+main(int argc, char *argv[])
+{
+   0:	dd010113          	addi	sp,sp,-560
+   4:	22113423          	sd	ra,552(sp)
+   8:	22813023          	sd	s0,544(sp)
+   c:	20913c23          	sd	s1,536(sp)
+  10:	21213823          	sd	s2,528(sp)
+  14:	1c00                	addi	s0,sp,560
+  int fd, i;
+  char path[] = "stressfs0";
+  16:	00001797          	auipc	a5,0x1
+  1a:	92a78793          	addi	a5,a5,-1750 # 940 <malloc+0x132>
+  1e:	6398                	ld	a4,0(a5)
+  20:	fce43823          	sd	a4,-48(s0)
+  24:	0087d783          	lhu	a5,8(a5)
+  28:	fcf41c23          	sh	a5,-40(s0)
+  char data[512];
+
+  printf("stressfs starting\n");
+  2c:	00001517          	auipc	a0,0x1
+  30:	8e450513          	addi	a0,a0,-1820 # 910 <malloc+0x102>
+  34:	726000ef          	jal	75a <printf>
+  memset(data, 'a', sizeof(data));
+  38:	20000613          	li	a2,512
+  3c:	06100593          	li	a1,97
+  40:	dd040513          	addi	a0,s0,-560
+  44:	118000ef          	jal	15c <memset>
+
+  for(i = 0; i < 4; i++)
+  48:	4481                	li	s1,0
+  4a:	4911                	li	s2,4
+    if(fork() > 0)
+  4c:	2ee000ef          	jal	33a <fork>
+  50:	00a04563          	bgtz	a0,5a <main+0x5a>
+  for(i = 0; i < 4; i++)
+  54:	2485                	addiw	s1,s1,1
+  56:	ff249be3          	bne	s1,s2,4c <main+0x4c>
+      break;
+
+  printf("write %d\n", i);
+  5a:	85a6                	mv	a1,s1
+  5c:	00001517          	auipc	a0,0x1
+  60:	8cc50513          	addi	a0,a0,-1844 # 928 <malloc+0x11a>
+  64:	6f6000ef          	jal	75a <printf>
+
+  path[8] += i;
+  68:	fd844783          	lbu	a5,-40(s0)
+  6c:	9fa5                	addw	a5,a5,s1
+  6e:	fcf40c23          	sb	a5,-40(s0)
+  fd = open(path, O_CREATE | O_RDWR);
+  72:	20200593          	li	a1,514
+  76:	fd040513          	addi	a0,s0,-48
+  7a:	308000ef          	jal	382 <open>
+  7e:	892a                	mv	s2,a0
+  80:	44d1                	li	s1,20
+  for(i = 0; i < 20; i++)
+//    printf(fd, "%d\n", i);
+    write(fd, data, sizeof(data));
+  82:	20000613          	li	a2,512
+  86:	dd040593          	addi	a1,s0,-560
+  8a:	854a                	mv	a0,s2
+  8c:	2d6000ef          	jal	362 <write>
+  for(i = 0; i < 20; i++)
+  90:	34fd                	addiw	s1,s1,-1
+  92:	f8e5                	bnez	s1,82 <main+0x82>
+  close(fd);
+  94:	854a                	mv	a0,s2
+  96:	2d4000ef          	jal	36a <close>
+
+  printf("read\n");
+  9a:	00001517          	auipc	a0,0x1
+  9e:	89e50513          	addi	a0,a0,-1890 # 938 <malloc+0x12a>
+  a2:	6b8000ef          	jal	75a <printf>
+
+  fd = open(path, O_RDONLY);
+  a6:	4581                	li	a1,0
+  a8:	fd040513          	addi	a0,s0,-48
+  ac:	2d6000ef          	jal	382 <open>
+  b0:	892a                	mv	s2,a0
+  b2:	44d1                	li	s1,20
+  for (i = 0; i < 20; i++)
+    read(fd, data, sizeof(data));
+  b4:	20000613          	li	a2,512
+  b8:	dd040593          	addi	a1,s0,-560
+  bc:	854a                	mv	a0,s2
+  be:	29c000ef          	jal	35a <read>
+  for (i = 0; i < 20; i++)
+  c2:	34fd                	addiw	s1,s1,-1
+  c4:	f8e5                	bnez	s1,b4 <main+0xb4>
+  close(fd);
+  c6:	854a                	mv	a0,s2
+  c8:	2a2000ef          	jal	36a <close>
+
+  wait(0);
+  cc:	4501                	li	a0,0
+  ce:	27c000ef          	jal	34a <wait>
+
+  exit(0);
+  d2:	4501                	li	a0,0
+  d4:	26e000ef          	jal	342 <exit>
+
+00000000000000d8 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  d8:	1141                	addi	sp,sp,-16
+  da:	e406                	sd	ra,8(sp)
+  dc:	e022                	sd	s0,0(sp)
+  de:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  e0:	f21ff0ef          	jal	0 <main>
+  exit(0);
+  e4:	4501                	li	a0,0
+  e6:	25c000ef          	jal	342 <exit>
+
+00000000000000ea <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  ea:	1141                	addi	sp,sp,-16
+  ec:	e422                	sd	s0,8(sp)
+  ee:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  f0:	87aa                	mv	a5,a0
+  f2:	0585                	addi	a1,a1,1
+  f4:	0785                	addi	a5,a5,1
+  f6:	fff5c703          	lbu	a4,-1(a1)
+  fa:	fee78fa3          	sb	a4,-1(a5)
+  fe:	fb75                	bnez	a4,f2 <strcpy+0x8>
+    ;
+  return os;
+}
+ 100:	6422                	ld	s0,8(sp)
+ 102:	0141                	addi	sp,sp,16
+ 104:	8082                	ret
+
+0000000000000106 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 106:	1141                	addi	sp,sp,-16
+ 108:	e422                	sd	s0,8(sp)
+ 10a:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 10c:	00054783          	lbu	a5,0(a0)
+ 110:	cb91                	beqz	a5,124 <strcmp+0x1e>
+ 112:	0005c703          	lbu	a4,0(a1)
+ 116:	00f71763          	bne	a4,a5,124 <strcmp+0x1e>
+    p++, q++;
+ 11a:	0505                	addi	a0,a0,1
+ 11c:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 11e:	00054783          	lbu	a5,0(a0)
+ 122:	fbe5                	bnez	a5,112 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 124:	0005c503          	lbu	a0,0(a1)
+}
+ 128:	40a7853b          	subw	a0,a5,a0
+ 12c:	6422                	ld	s0,8(sp)
+ 12e:	0141                	addi	sp,sp,16
+ 130:	8082                	ret
+
+0000000000000132 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 132:	1141                	addi	sp,sp,-16
+ 134:	e422                	sd	s0,8(sp)
+ 136:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 138:	00054783          	lbu	a5,0(a0)
+ 13c:	cf91                	beqz	a5,158 <strlen+0x26>
+ 13e:	0505                	addi	a0,a0,1
+ 140:	87aa                	mv	a5,a0
+ 142:	86be                	mv	a3,a5
+ 144:	0785                	addi	a5,a5,1
+ 146:	fff7c703          	lbu	a4,-1(a5)
+ 14a:	ff65                	bnez	a4,142 <strlen+0x10>
+ 14c:	40a6853b          	subw	a0,a3,a0
+ 150:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 152:	6422                	ld	s0,8(sp)
+ 154:	0141                	addi	sp,sp,16
+ 156:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 158:	4501                	li	a0,0
+ 15a:	bfe5                	j	152 <strlen+0x20>
+
+000000000000015c <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 15c:	1141                	addi	sp,sp,-16
+ 15e:	e422                	sd	s0,8(sp)
+ 160:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 162:	ca19                	beqz	a2,178 <memset+0x1c>
+ 164:	87aa                	mv	a5,a0
+ 166:	1602                	slli	a2,a2,0x20
+ 168:	9201                	srli	a2,a2,0x20
+ 16a:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 16e:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 172:	0785                	addi	a5,a5,1
+ 174:	fee79de3          	bne	a5,a4,16e <memset+0x12>
+  }
+  return dst;
+}
+ 178:	6422                	ld	s0,8(sp)
+ 17a:	0141                	addi	sp,sp,16
+ 17c:	8082                	ret
+
+000000000000017e <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 17e:	1141                	addi	sp,sp,-16
+ 180:	e422                	sd	s0,8(sp)
+ 182:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 184:	00054783          	lbu	a5,0(a0)
+ 188:	cb99                	beqz	a5,19e <strchr+0x20>
+    if(*s == c)
+ 18a:	00f58763          	beq	a1,a5,198 <strchr+0x1a>
+  for(; *s; s++)
+ 18e:	0505                	addi	a0,a0,1
+ 190:	00054783          	lbu	a5,0(a0)
+ 194:	fbfd                	bnez	a5,18a <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 196:	4501                	li	a0,0
+}
+ 198:	6422                	ld	s0,8(sp)
+ 19a:	0141                	addi	sp,sp,16
+ 19c:	8082                	ret
+  return 0;
+ 19e:	4501                	li	a0,0
+ 1a0:	bfe5                	j	198 <strchr+0x1a>
+
+00000000000001a2 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 1a2:	711d                	addi	sp,sp,-96
+ 1a4:	ec86                	sd	ra,88(sp)
+ 1a6:	e8a2                	sd	s0,80(sp)
+ 1a8:	e4a6                	sd	s1,72(sp)
+ 1aa:	e0ca                	sd	s2,64(sp)
+ 1ac:	fc4e                	sd	s3,56(sp)
+ 1ae:	f852                	sd	s4,48(sp)
+ 1b0:	f456                	sd	s5,40(sp)
+ 1b2:	f05a                	sd	s6,32(sp)
+ 1b4:	ec5e                	sd	s7,24(sp)
+ 1b6:	1080                	addi	s0,sp,96
+ 1b8:	8baa                	mv	s7,a0
+ 1ba:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 1bc:	892a                	mv	s2,a0
+ 1be:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 1c0:	4aa9                	li	s5,10
+ 1c2:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 1c4:	89a6                	mv	s3,s1
+ 1c6:	2485                	addiw	s1,s1,1
+ 1c8:	0344d663          	bge	s1,s4,1f4 <gets+0x52>
+    cc = read(0, &c, 1);
+ 1cc:	4605                	li	a2,1
+ 1ce:	faf40593          	addi	a1,s0,-81
+ 1d2:	4501                	li	a0,0
+ 1d4:	186000ef          	jal	35a <read>
+    if(cc < 1)
+ 1d8:	00a05e63          	blez	a0,1f4 <gets+0x52>
+    buf[i++] = c;
+ 1dc:	faf44783          	lbu	a5,-81(s0)
+ 1e0:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 1e4:	01578763          	beq	a5,s5,1f2 <gets+0x50>
+ 1e8:	0905                	addi	s2,s2,1
+ 1ea:	fd679de3          	bne	a5,s6,1c4 <gets+0x22>
+    buf[i++] = c;
+ 1ee:	89a6                	mv	s3,s1
+ 1f0:	a011                	j	1f4 <gets+0x52>
+ 1f2:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 1f4:	99de                	add	s3,s3,s7
+ 1f6:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 1fa:	855e                	mv	a0,s7
+ 1fc:	60e6                	ld	ra,88(sp)
+ 1fe:	6446                	ld	s0,80(sp)
+ 200:	64a6                	ld	s1,72(sp)
+ 202:	6906                	ld	s2,64(sp)
+ 204:	79e2                	ld	s3,56(sp)
+ 206:	7a42                	ld	s4,48(sp)
+ 208:	7aa2                	ld	s5,40(sp)
+ 20a:	7b02                	ld	s6,32(sp)
+ 20c:	6be2                	ld	s7,24(sp)
+ 20e:	6125                	addi	sp,sp,96
+ 210:	8082                	ret
+
+0000000000000212 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 212:	1101                	addi	sp,sp,-32
+ 214:	ec06                	sd	ra,24(sp)
+ 216:	e822                	sd	s0,16(sp)
+ 218:	e04a                	sd	s2,0(sp)
+ 21a:	1000                	addi	s0,sp,32
+ 21c:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 21e:	4581                	li	a1,0
+ 220:	162000ef          	jal	382 <open>
+  if(fd < 0)
+ 224:	02054263          	bltz	a0,248 <stat+0x36>
+ 228:	e426                	sd	s1,8(sp)
+ 22a:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 22c:	85ca                	mv	a1,s2
+ 22e:	16c000ef          	jal	39a <fstat>
+ 232:	892a                	mv	s2,a0
+  close(fd);
+ 234:	8526                	mv	a0,s1
+ 236:	134000ef          	jal	36a <close>
+  return r;
+ 23a:	64a2                	ld	s1,8(sp)
+}
+ 23c:	854a                	mv	a0,s2
+ 23e:	60e2                	ld	ra,24(sp)
+ 240:	6442                	ld	s0,16(sp)
+ 242:	6902                	ld	s2,0(sp)
+ 244:	6105                	addi	sp,sp,32
+ 246:	8082                	ret
+    return -1;
+ 248:	597d                	li	s2,-1
+ 24a:	bfcd                	j	23c <stat+0x2a>
+
+000000000000024c <atoi>:
+
+int
+atoi(const char *s)
+{
+ 24c:	1141                	addi	sp,sp,-16
+ 24e:	e422                	sd	s0,8(sp)
+ 250:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 252:	00054683          	lbu	a3,0(a0)
+ 256:	fd06879b          	addiw	a5,a3,-48
+ 25a:	0ff7f793          	zext.b	a5,a5
+ 25e:	4625                	li	a2,9
+ 260:	02f66863          	bltu	a2,a5,290 <atoi+0x44>
+ 264:	872a                	mv	a4,a0
+  n = 0;
+ 266:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 268:	0705                	addi	a4,a4,1
+ 26a:	0025179b          	slliw	a5,a0,0x2
+ 26e:	9fa9                	addw	a5,a5,a0
+ 270:	0017979b          	slliw	a5,a5,0x1
+ 274:	9fb5                	addw	a5,a5,a3
+ 276:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 27a:	00074683          	lbu	a3,0(a4)
+ 27e:	fd06879b          	addiw	a5,a3,-48
+ 282:	0ff7f793          	zext.b	a5,a5
+ 286:	fef671e3          	bgeu	a2,a5,268 <atoi+0x1c>
+  return n;
+}
+ 28a:	6422                	ld	s0,8(sp)
+ 28c:	0141                	addi	sp,sp,16
+ 28e:	8082                	ret
+  n = 0;
+ 290:	4501                	li	a0,0
+ 292:	bfe5                	j	28a <atoi+0x3e>
+
+0000000000000294 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 294:	1141                	addi	sp,sp,-16
+ 296:	e422                	sd	s0,8(sp)
+ 298:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 29a:	02b57463          	bgeu	a0,a1,2c2 <memmove+0x2e>
+    while(n-- > 0)
+ 29e:	00c05f63          	blez	a2,2bc <memmove+0x28>
+ 2a2:	1602                	slli	a2,a2,0x20
+ 2a4:	9201                	srli	a2,a2,0x20
+ 2a6:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 2aa:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 2ac:	0585                	addi	a1,a1,1
+ 2ae:	0705                	addi	a4,a4,1
+ 2b0:	fff5c683          	lbu	a3,-1(a1)
+ 2b4:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 2b8:	fef71ae3          	bne	a4,a5,2ac <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 2bc:	6422                	ld	s0,8(sp)
+ 2be:	0141                	addi	sp,sp,16
+ 2c0:	8082                	ret
+    dst += n;
+ 2c2:	00c50733          	add	a4,a0,a2
+    src += n;
+ 2c6:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 2c8:	fec05ae3          	blez	a2,2bc <memmove+0x28>
+ 2cc:	fff6079b          	addiw	a5,a2,-1
+ 2d0:	1782                	slli	a5,a5,0x20
+ 2d2:	9381                	srli	a5,a5,0x20
+ 2d4:	fff7c793          	not	a5,a5
+ 2d8:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 2da:	15fd                	addi	a1,a1,-1
+ 2dc:	177d                	addi	a4,a4,-1
+ 2de:	0005c683          	lbu	a3,0(a1)
+ 2e2:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 2e6:	fee79ae3          	bne	a5,a4,2da <memmove+0x46>
+ 2ea:	bfc9                	j	2bc <memmove+0x28>
+
+00000000000002ec <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 2ec:	1141                	addi	sp,sp,-16
+ 2ee:	e422                	sd	s0,8(sp)
+ 2f0:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 2f2:	ca05                	beqz	a2,322 <memcmp+0x36>
+ 2f4:	fff6069b          	addiw	a3,a2,-1
+ 2f8:	1682                	slli	a3,a3,0x20
+ 2fa:	9281                	srli	a3,a3,0x20
+ 2fc:	0685                	addi	a3,a3,1
+ 2fe:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 300:	00054783          	lbu	a5,0(a0)
+ 304:	0005c703          	lbu	a4,0(a1)
+ 308:	00e79863          	bne	a5,a4,318 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 30c:	0505                	addi	a0,a0,1
+    p2++;
+ 30e:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 310:	fed518e3          	bne	a0,a3,300 <memcmp+0x14>
+  }
+  return 0;
+ 314:	4501                	li	a0,0
+ 316:	a019                	j	31c <memcmp+0x30>
+      return *p1 - *p2;
+ 318:	40e7853b          	subw	a0,a5,a4
+}
+ 31c:	6422                	ld	s0,8(sp)
+ 31e:	0141                	addi	sp,sp,16
+ 320:	8082                	ret
+  return 0;
+ 322:	4501                	li	a0,0
+ 324:	bfe5                	j	31c <memcmp+0x30>
+
+0000000000000326 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 326:	1141                	addi	sp,sp,-16
+ 328:	e406                	sd	ra,8(sp)
+ 32a:	e022                	sd	s0,0(sp)
+ 32c:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 32e:	f67ff0ef          	jal	294 <memmove>
+}
+ 332:	60a2                	ld	ra,8(sp)
+ 334:	6402                	ld	s0,0(sp)
+ 336:	0141                	addi	sp,sp,16
+ 338:	8082                	ret
+
+000000000000033a <fork>:
+ 33a:	4885                	li	a7,1
+ 33c:	00000073          	ecall
+ 340:	8082                	ret
+
+0000000000000342 <exit>:
+ 342:	4889                	li	a7,2
+ 344:	00000073          	ecall
+ 348:	8082                	ret
+
+000000000000034a <wait>:
+ 34a:	488d                	li	a7,3
+ 34c:	00000073          	ecall
+ 350:	8082                	ret
+
+0000000000000352 <pipe>:
+ 352:	4891                	li	a7,4
+ 354:	00000073          	ecall
+ 358:	8082                	ret
+
+000000000000035a <read>:
+ 35a:	4895                	li	a7,5
+ 35c:	00000073          	ecall
+ 360:	8082                	ret
+
+0000000000000362 <write>:
+ 362:	48c1                	li	a7,16
+ 364:	00000073          	ecall
+ 368:	8082                	ret
+
+000000000000036a <close>:
+ 36a:	48d5                	li	a7,21
+ 36c:	00000073          	ecall
+ 370:	8082                	ret
+
+0000000000000372 <kill>:
+ 372:	4899                	li	a7,6
+ 374:	00000073          	ecall
+ 378:	8082                	ret
+
+000000000000037a <exec>:
+ 37a:	489d                	li	a7,7
+ 37c:	00000073          	ecall
+ 380:	8082                	ret
+
+0000000000000382 <open>:
+ 382:	48bd                	li	a7,15
+ 384:	00000073          	ecall
+ 388:	8082                	ret
+
+000000000000038a <mknod>:
+ 38a:	48c5                	li	a7,17
+ 38c:	00000073          	ecall
+ 390:	8082                	ret
+
+0000000000000392 <unlink>:
+ 392:	48c9                	li	a7,18
+ 394:	00000073          	ecall
+ 398:	8082                	ret
+
+000000000000039a <fstat>:
+ 39a:	48a1                	li	a7,8
+ 39c:	00000073          	ecall
+ 3a0:	8082                	ret
+
+00000000000003a2 <link>:
+ 3a2:	48cd                	li	a7,19
+ 3a4:	00000073          	ecall
+ 3a8:	8082                	ret
+
+00000000000003aa <mkdir>:
+ 3aa:	48d1                	li	a7,20
+ 3ac:	00000073          	ecall
+ 3b0:	8082                	ret
+
+00000000000003b2 <chdir>:
+ 3b2:	48a5                	li	a7,9
+ 3b4:	00000073          	ecall
+ 3b8:	8082                	ret
+
+00000000000003ba <dup>:
+ 3ba:	48a9                	li	a7,10
+ 3bc:	00000073          	ecall
+ 3c0:	8082                	ret
+
+00000000000003c2 <getpid>:
+ 3c2:	48ad                	li	a7,11
+ 3c4:	00000073          	ecall
+ 3c8:	8082                	ret
+
+00000000000003ca <sbrk>:
+ 3ca:	48b1                	li	a7,12
+ 3cc:	00000073          	ecall
+ 3d0:	8082                	ret
+
+00000000000003d2 <sleep>:
+ 3d2:	48b5                	li	a7,13
+ 3d4:	00000073          	ecall
+ 3d8:	8082                	ret
+
+00000000000003da <uptime>:
+ 3da:	48b9                	li	a7,14
+ 3dc:	00000073          	ecall
+ 3e0:	8082                	ret
+
+00000000000003e2 <putc>:
+ 3e2:	1101                	addi	sp,sp,-32
+ 3e4:	ec06                	sd	ra,24(sp)
+ 3e6:	e822                	sd	s0,16(sp)
+ 3e8:	1000                	addi	s0,sp,32
+ 3ea:	feb407a3          	sb	a1,-17(s0)
+ 3ee:	4605                	li	a2,1
+ 3f0:	fef40593          	addi	a1,s0,-17
+ 3f4:	f6fff0ef          	jal	362 <write>
+ 3f8:	60e2                	ld	ra,24(sp)
+ 3fa:	6442                	ld	s0,16(sp)
+ 3fc:	6105                	addi	sp,sp,32
+ 3fe:	8082                	ret
+
+0000000000000400 <printint>:
+ 400:	7139                	addi	sp,sp,-64
+ 402:	fc06                	sd	ra,56(sp)
+ 404:	f822                	sd	s0,48(sp)
+ 406:	f426                	sd	s1,40(sp)
+ 408:	0080                	addi	s0,sp,64
+ 40a:	84aa                	mv	s1,a0
+ 40c:	c299                	beqz	a3,412 <printint+0x12>
+ 40e:	0805c963          	bltz	a1,4a0 <printint+0xa0>
+ 412:	2581                	sext.w	a1,a1
+ 414:	4881                	li	a7,0
+ 416:	fc040693          	addi	a3,s0,-64
+ 41a:	4701                	li	a4,0
+ 41c:	2601                	sext.w	a2,a2
+ 41e:	00000517          	auipc	a0,0x0
+ 422:	53a50513          	addi	a0,a0,1338 # 958 <digits>
+ 426:	883a                	mv	a6,a4
+ 428:	2705                	addiw	a4,a4,1
+ 42a:	02c5f7bb          	remuw	a5,a1,a2
+ 42e:	1782                	slli	a5,a5,0x20
+ 430:	9381                	srli	a5,a5,0x20
+ 432:	97aa                	add	a5,a5,a0
+ 434:	0007c783          	lbu	a5,0(a5)
+ 438:	00f68023          	sb	a5,0(a3)
+ 43c:	0005879b          	sext.w	a5,a1
+ 440:	02c5d5bb          	divuw	a1,a1,a2
+ 444:	0685                	addi	a3,a3,1
+ 446:	fec7f0e3          	bgeu	a5,a2,426 <printint+0x26>
+ 44a:	00088c63          	beqz	a7,462 <printint+0x62>
+ 44e:	fd070793          	addi	a5,a4,-48
+ 452:	00878733          	add	a4,a5,s0
+ 456:	02d00793          	li	a5,45
+ 45a:	fef70823          	sb	a5,-16(a4)
+ 45e:	0028071b          	addiw	a4,a6,2
+ 462:	02e05a63          	blez	a4,496 <printint+0x96>
+ 466:	f04a                	sd	s2,32(sp)
+ 468:	ec4e                	sd	s3,24(sp)
+ 46a:	fc040793          	addi	a5,s0,-64
+ 46e:	00e78933          	add	s2,a5,a4
+ 472:	fff78993          	addi	s3,a5,-1
+ 476:	99ba                	add	s3,s3,a4
+ 478:	377d                	addiw	a4,a4,-1
+ 47a:	1702                	slli	a4,a4,0x20
+ 47c:	9301                	srli	a4,a4,0x20
+ 47e:	40e989b3          	sub	s3,s3,a4
+ 482:	fff94583          	lbu	a1,-1(s2)
+ 486:	8526                	mv	a0,s1
+ 488:	f5bff0ef          	jal	3e2 <putc>
+ 48c:	197d                	addi	s2,s2,-1
+ 48e:	ff391ae3          	bne	s2,s3,482 <printint+0x82>
+ 492:	7902                	ld	s2,32(sp)
+ 494:	69e2                	ld	s3,24(sp)
+ 496:	70e2                	ld	ra,56(sp)
+ 498:	7442                	ld	s0,48(sp)
+ 49a:	74a2                	ld	s1,40(sp)
+ 49c:	6121                	addi	sp,sp,64
+ 49e:	8082                	ret
+ 4a0:	40b005bb          	negw	a1,a1
+ 4a4:	4885                	li	a7,1
+ 4a6:	bf85                	j	416 <printint+0x16>
+
+00000000000004a8 <vprintf>:
+ 4a8:	711d                	addi	sp,sp,-96
+ 4aa:	ec86                	sd	ra,88(sp)
+ 4ac:	e8a2                	sd	s0,80(sp)
+ 4ae:	e0ca                	sd	s2,64(sp)
+ 4b0:	1080                	addi	s0,sp,96
+ 4b2:	0005c903          	lbu	s2,0(a1)
+ 4b6:	26090863          	beqz	s2,726 <vprintf+0x27e>
+ 4ba:	e4a6                	sd	s1,72(sp)
+ 4bc:	fc4e                	sd	s3,56(sp)
+ 4be:	f852                	sd	s4,48(sp)
+ 4c0:	f456                	sd	s5,40(sp)
+ 4c2:	f05a                	sd	s6,32(sp)
+ 4c4:	ec5e                	sd	s7,24(sp)
+ 4c6:	e862                	sd	s8,16(sp)
+ 4c8:	e466                	sd	s9,8(sp)
+ 4ca:	8b2a                	mv	s6,a0
+ 4cc:	8a2e                	mv	s4,a1
+ 4ce:	8bb2                	mv	s7,a2
+ 4d0:	4981                	li	s3,0
+ 4d2:	4481                	li	s1,0
+ 4d4:	4701                	li	a4,0
+ 4d6:	02500a93          	li	s5,37
+ 4da:	06400c13          	li	s8,100
+ 4de:	06c00c93          	li	s9,108
+ 4e2:	a005                	j	502 <vprintf+0x5a>
+ 4e4:	85ca                	mv	a1,s2
+ 4e6:	855a                	mv	a0,s6
+ 4e8:	efbff0ef          	jal	3e2 <putc>
+ 4ec:	a019                	j	4f2 <vprintf+0x4a>
+ 4ee:	03598263          	beq	s3,s5,512 <vprintf+0x6a>
+ 4f2:	2485                	addiw	s1,s1,1
+ 4f4:	8726                	mv	a4,s1
+ 4f6:	009a07b3          	add	a5,s4,s1
+ 4fa:	0007c903          	lbu	s2,0(a5)
+ 4fe:	20090c63          	beqz	s2,716 <vprintf+0x26e>
+ 502:	0009079b          	sext.w	a5,s2
+ 506:	fe0994e3          	bnez	s3,4ee <vprintf+0x46>
+ 50a:	fd579de3          	bne	a5,s5,4e4 <vprintf+0x3c>
+ 50e:	89be                	mv	s3,a5
+ 510:	b7cd                	j	4f2 <vprintf+0x4a>
+ 512:	00ea06b3          	add	a3,s4,a4
+ 516:	0016c683          	lbu	a3,1(a3)
+ 51a:	8636                	mv	a2,a3
+ 51c:	c681                	beqz	a3,524 <vprintf+0x7c>
+ 51e:	9752                	add	a4,a4,s4
+ 520:	00274603          	lbu	a2,2(a4)
+ 524:	03878f63          	beq	a5,s8,562 <vprintf+0xba>
+ 528:	05978963          	beq	a5,s9,57a <vprintf+0xd2>
+ 52c:	07500713          	li	a4,117
+ 530:	0ee78363          	beq	a5,a4,616 <vprintf+0x16e>
+ 534:	07800713          	li	a4,120
+ 538:	12e78563          	beq	a5,a4,662 <vprintf+0x1ba>
+ 53c:	07000713          	li	a4,112
+ 540:	14e78a63          	beq	a5,a4,694 <vprintf+0x1ec>
+ 544:	07300713          	li	a4,115
+ 548:	18e78a63          	beq	a5,a4,6dc <vprintf+0x234>
+ 54c:	02500713          	li	a4,37
+ 550:	04e79563          	bne	a5,a4,59a <vprintf+0xf2>
+ 554:	02500593          	li	a1,37
+ 558:	855a                	mv	a0,s6
+ 55a:	e89ff0ef          	jal	3e2 <putc>
+ 55e:	4981                	li	s3,0
+ 560:	bf49                	j	4f2 <vprintf+0x4a>
+ 562:	008b8913          	addi	s2,s7,8
+ 566:	4685                	li	a3,1
+ 568:	4629                	li	a2,10
+ 56a:	000ba583          	lw	a1,0(s7)
+ 56e:	855a                	mv	a0,s6
+ 570:	e91ff0ef          	jal	400 <printint>
+ 574:	8bca                	mv	s7,s2
+ 576:	4981                	li	s3,0
+ 578:	bfad                	j	4f2 <vprintf+0x4a>
+ 57a:	06400793          	li	a5,100
+ 57e:	02f68963          	beq	a3,a5,5b0 <vprintf+0x108>
+ 582:	06c00793          	li	a5,108
+ 586:	04f68263          	beq	a3,a5,5ca <vprintf+0x122>
+ 58a:	07500793          	li	a5,117
+ 58e:	0af68063          	beq	a3,a5,62e <vprintf+0x186>
+ 592:	07800793          	li	a5,120
+ 596:	0ef68263          	beq	a3,a5,67a <vprintf+0x1d2>
+ 59a:	02500593          	li	a1,37
+ 59e:	855a                	mv	a0,s6
+ 5a0:	e43ff0ef          	jal	3e2 <putc>
+ 5a4:	85ca                	mv	a1,s2
+ 5a6:	855a                	mv	a0,s6
+ 5a8:	e3bff0ef          	jal	3e2 <putc>
+ 5ac:	4981                	li	s3,0
+ 5ae:	b791                	j	4f2 <vprintf+0x4a>
+ 5b0:	008b8913          	addi	s2,s7,8
+ 5b4:	4685                	li	a3,1
+ 5b6:	4629                	li	a2,10
+ 5b8:	000ba583          	lw	a1,0(s7)
+ 5bc:	855a                	mv	a0,s6
+ 5be:	e43ff0ef          	jal	400 <printint>
+ 5c2:	2485                	addiw	s1,s1,1
+ 5c4:	8bca                	mv	s7,s2
+ 5c6:	4981                	li	s3,0
+ 5c8:	b72d                	j	4f2 <vprintf+0x4a>
+ 5ca:	06400793          	li	a5,100
+ 5ce:	02f60763          	beq	a2,a5,5fc <vprintf+0x154>
+ 5d2:	07500793          	li	a5,117
+ 5d6:	06f60963          	beq	a2,a5,648 <vprintf+0x1a0>
+ 5da:	07800793          	li	a5,120
+ 5de:	faf61ee3          	bne	a2,a5,59a <vprintf+0xf2>
+ 5e2:	008b8913          	addi	s2,s7,8
+ 5e6:	4681                	li	a3,0
+ 5e8:	4641                	li	a2,16
+ 5ea:	000ba583          	lw	a1,0(s7)
+ 5ee:	855a                	mv	a0,s6
+ 5f0:	e11ff0ef          	jal	400 <printint>
+ 5f4:	2489                	addiw	s1,s1,2
+ 5f6:	8bca                	mv	s7,s2
+ 5f8:	4981                	li	s3,0
+ 5fa:	bde5                	j	4f2 <vprintf+0x4a>
+ 5fc:	008b8913          	addi	s2,s7,8
+ 600:	4685                	li	a3,1
+ 602:	4629                	li	a2,10
+ 604:	000ba583          	lw	a1,0(s7)
+ 608:	855a                	mv	a0,s6
+ 60a:	df7ff0ef          	jal	400 <printint>
+ 60e:	2489                	addiw	s1,s1,2
+ 610:	8bca                	mv	s7,s2
+ 612:	4981                	li	s3,0
+ 614:	bdf9                	j	4f2 <vprintf+0x4a>
+ 616:	008b8913          	addi	s2,s7,8
+ 61a:	4681                	li	a3,0
+ 61c:	4629                	li	a2,10
+ 61e:	000ba583          	lw	a1,0(s7)
+ 622:	855a                	mv	a0,s6
+ 624:	dddff0ef          	jal	400 <printint>
+ 628:	8bca                	mv	s7,s2
+ 62a:	4981                	li	s3,0
+ 62c:	b5d9                	j	4f2 <vprintf+0x4a>
+ 62e:	008b8913          	addi	s2,s7,8
+ 632:	4681                	li	a3,0
+ 634:	4629                	li	a2,10
+ 636:	000ba583          	lw	a1,0(s7)
+ 63a:	855a                	mv	a0,s6
+ 63c:	dc5ff0ef          	jal	400 <printint>
+ 640:	2485                	addiw	s1,s1,1
+ 642:	8bca                	mv	s7,s2
+ 644:	4981                	li	s3,0
+ 646:	b575                	j	4f2 <vprintf+0x4a>
+ 648:	008b8913          	addi	s2,s7,8
+ 64c:	4681                	li	a3,0
+ 64e:	4629                	li	a2,10
+ 650:	000ba583          	lw	a1,0(s7)
+ 654:	855a                	mv	a0,s6
+ 656:	dabff0ef          	jal	400 <printint>
+ 65a:	2489                	addiw	s1,s1,2
+ 65c:	8bca                	mv	s7,s2
+ 65e:	4981                	li	s3,0
+ 660:	bd49                	j	4f2 <vprintf+0x4a>
+ 662:	008b8913          	addi	s2,s7,8
+ 666:	4681                	li	a3,0
+ 668:	4641                	li	a2,16
+ 66a:	000ba583          	lw	a1,0(s7)
+ 66e:	855a                	mv	a0,s6
+ 670:	d91ff0ef          	jal	400 <printint>
+ 674:	8bca                	mv	s7,s2
+ 676:	4981                	li	s3,0
+ 678:	bdad                	j	4f2 <vprintf+0x4a>
+ 67a:	008b8913          	addi	s2,s7,8
+ 67e:	4681                	li	a3,0
+ 680:	4641                	li	a2,16
+ 682:	000ba583          	lw	a1,0(s7)
+ 686:	855a                	mv	a0,s6
+ 688:	d79ff0ef          	jal	400 <printint>
+ 68c:	2485                	addiw	s1,s1,1
+ 68e:	8bca                	mv	s7,s2
+ 690:	4981                	li	s3,0
+ 692:	b585                	j	4f2 <vprintf+0x4a>
+ 694:	e06a                	sd	s10,0(sp)
+ 696:	008b8d13          	addi	s10,s7,8
+ 69a:	000bb983          	ld	s3,0(s7)
+ 69e:	03000593          	li	a1,48
+ 6a2:	855a                	mv	a0,s6
+ 6a4:	d3fff0ef          	jal	3e2 <putc>
+ 6a8:	07800593          	li	a1,120
+ 6ac:	855a                	mv	a0,s6
+ 6ae:	d35ff0ef          	jal	3e2 <putc>
+ 6b2:	4941                	li	s2,16
+ 6b4:	00000b97          	auipc	s7,0x0
+ 6b8:	2a4b8b93          	addi	s7,s7,676 # 958 <digits>
+ 6bc:	03c9d793          	srli	a5,s3,0x3c
+ 6c0:	97de                	add	a5,a5,s7
+ 6c2:	0007c583          	lbu	a1,0(a5)
+ 6c6:	855a                	mv	a0,s6
+ 6c8:	d1bff0ef          	jal	3e2 <putc>
+ 6cc:	0992                	slli	s3,s3,0x4
+ 6ce:	397d                	addiw	s2,s2,-1
+ 6d0:	fe0916e3          	bnez	s2,6bc <vprintf+0x214>
+ 6d4:	8bea                	mv	s7,s10
+ 6d6:	4981                	li	s3,0
+ 6d8:	6d02                	ld	s10,0(sp)
+ 6da:	bd21                	j	4f2 <vprintf+0x4a>
+ 6dc:	008b8993          	addi	s3,s7,8
+ 6e0:	000bb903          	ld	s2,0(s7)
+ 6e4:	00090f63          	beqz	s2,702 <vprintf+0x25a>
+ 6e8:	00094583          	lbu	a1,0(s2)
+ 6ec:	c195                	beqz	a1,710 <vprintf+0x268>
+ 6ee:	855a                	mv	a0,s6
+ 6f0:	cf3ff0ef          	jal	3e2 <putc>
+ 6f4:	0905                	addi	s2,s2,1
+ 6f6:	00094583          	lbu	a1,0(s2)
+ 6fa:	f9f5                	bnez	a1,6ee <vprintf+0x246>
+ 6fc:	8bce                	mv	s7,s3
+ 6fe:	4981                	li	s3,0
+ 700:	bbcd                	j	4f2 <vprintf+0x4a>
+ 702:	00000917          	auipc	s2,0x0
+ 706:	24e90913          	addi	s2,s2,590 # 950 <malloc+0x142>
+ 70a:	02800593          	li	a1,40
+ 70e:	b7c5                	j	6ee <vprintf+0x246>
+ 710:	8bce                	mv	s7,s3
+ 712:	4981                	li	s3,0
+ 714:	bbf9                	j	4f2 <vprintf+0x4a>
+ 716:	64a6                	ld	s1,72(sp)
+ 718:	79e2                	ld	s3,56(sp)
+ 71a:	7a42                	ld	s4,48(sp)
+ 71c:	7aa2                	ld	s5,40(sp)
+ 71e:	7b02                	ld	s6,32(sp)
+ 720:	6be2                	ld	s7,24(sp)
+ 722:	6c42                	ld	s8,16(sp)
+ 724:	6ca2                	ld	s9,8(sp)
+ 726:	60e6                	ld	ra,88(sp)
+ 728:	6446                	ld	s0,80(sp)
+ 72a:	6906                	ld	s2,64(sp)
+ 72c:	6125                	addi	sp,sp,96
+ 72e:	8082                	ret
+
+0000000000000730 <fprintf>:
+ 730:	715d                	addi	sp,sp,-80
+ 732:	ec06                	sd	ra,24(sp)
+ 734:	e822                	sd	s0,16(sp)
+ 736:	1000                	addi	s0,sp,32
+ 738:	e010                	sd	a2,0(s0)
+ 73a:	e414                	sd	a3,8(s0)
+ 73c:	e818                	sd	a4,16(s0)
+ 73e:	ec1c                	sd	a5,24(s0)
+ 740:	03043023          	sd	a6,32(s0)
+ 744:	03143423          	sd	a7,40(s0)
+ 748:	fe843423          	sd	s0,-24(s0)
+ 74c:	8622                	mv	a2,s0
+ 74e:	d5bff0ef          	jal	4a8 <vprintf>
+ 752:	60e2                	ld	ra,24(sp)
+ 754:	6442                	ld	s0,16(sp)
+ 756:	6161                	addi	sp,sp,80
+ 758:	8082                	ret
+
+000000000000075a <printf>:
+ 75a:	711d                	addi	sp,sp,-96
+ 75c:	ec06                	sd	ra,24(sp)
+ 75e:	e822                	sd	s0,16(sp)
+ 760:	1000                	addi	s0,sp,32
+ 762:	e40c                	sd	a1,8(s0)
+ 764:	e810                	sd	a2,16(s0)
+ 766:	ec14                	sd	a3,24(s0)
+ 768:	f018                	sd	a4,32(s0)
+ 76a:	f41c                	sd	a5,40(s0)
+ 76c:	03043823          	sd	a6,48(s0)
+ 770:	03143c23          	sd	a7,56(s0)
+ 774:	00840613          	addi	a2,s0,8
+ 778:	fec43423          	sd	a2,-24(s0)
+ 77c:	85aa                	mv	a1,a0
+ 77e:	4505                	li	a0,1
+ 780:	d29ff0ef          	jal	4a8 <vprintf>
+ 784:	60e2                	ld	ra,24(sp)
+ 786:	6442                	ld	s0,16(sp)
+ 788:	6125                	addi	sp,sp,96
+ 78a:	8082                	ret
+
+000000000000078c <free>:
+ 78c:	1141                	addi	sp,sp,-16
+ 78e:	e422                	sd	s0,8(sp)
+ 790:	0800                	addi	s0,sp,16
+ 792:	ff050693          	addi	a3,a0,-16
+ 796:	00001797          	auipc	a5,0x1
+ 79a:	86a7b783          	ld	a5,-1942(a5) # 1000 <freep>
+ 79e:	a02d                	j	7c8 <free+0x3c>
+ 7a0:	4618                	lw	a4,8(a2)
+ 7a2:	9f2d                	addw	a4,a4,a1
+ 7a4:	fee52c23          	sw	a4,-8(a0)
+ 7a8:	6398                	ld	a4,0(a5)
+ 7aa:	6310                	ld	a2,0(a4)
+ 7ac:	a83d                	j	7ea <free+0x5e>
+ 7ae:	ff852703          	lw	a4,-8(a0)
+ 7b2:	9f31                	addw	a4,a4,a2
+ 7b4:	c798                	sw	a4,8(a5)
+ 7b6:	ff053683          	ld	a3,-16(a0)
+ 7ba:	a091                	j	7fe <free+0x72>
+ 7bc:	6398                	ld	a4,0(a5)
+ 7be:	00e7e463          	bltu	a5,a4,7c6 <free+0x3a>
+ 7c2:	00e6ea63          	bltu	a3,a4,7d6 <free+0x4a>
+ 7c6:	87ba                	mv	a5,a4
+ 7c8:	fed7fae3          	bgeu	a5,a3,7bc <free+0x30>
+ 7cc:	6398                	ld	a4,0(a5)
+ 7ce:	00e6e463          	bltu	a3,a4,7d6 <free+0x4a>
+ 7d2:	fee7eae3          	bltu	a5,a4,7c6 <free+0x3a>
+ 7d6:	ff852583          	lw	a1,-8(a0)
+ 7da:	6390                	ld	a2,0(a5)
+ 7dc:	02059813          	slli	a6,a1,0x20
+ 7e0:	01c85713          	srli	a4,a6,0x1c
+ 7e4:	9736                	add	a4,a4,a3
+ 7e6:	fae60de3          	beq	a2,a4,7a0 <free+0x14>
+ 7ea:	fec53823          	sd	a2,-16(a0)
+ 7ee:	4790                	lw	a2,8(a5)
+ 7f0:	02061593          	slli	a1,a2,0x20
+ 7f4:	01c5d713          	srli	a4,a1,0x1c
+ 7f8:	973e                	add	a4,a4,a5
+ 7fa:	fae68ae3          	beq	a3,a4,7ae <free+0x22>
+ 7fe:	e394                	sd	a3,0(a5)
+ 800:	00001717          	auipc	a4,0x1
+ 804:	80f73023          	sd	a5,-2048(a4) # 1000 <freep>
+ 808:	6422                	ld	s0,8(sp)
+ 80a:	0141                	addi	sp,sp,16
+ 80c:	8082                	ret
+
+000000000000080e <malloc>:
+ 80e:	7139                	addi	sp,sp,-64
+ 810:	fc06                	sd	ra,56(sp)
+ 812:	f822                	sd	s0,48(sp)
+ 814:	f426                	sd	s1,40(sp)
+ 816:	ec4e                	sd	s3,24(sp)
+ 818:	0080                	addi	s0,sp,64
+ 81a:	02051493          	slli	s1,a0,0x20
+ 81e:	9081                	srli	s1,s1,0x20
+ 820:	04bd                	addi	s1,s1,15
+ 822:	8091                	srli	s1,s1,0x4
+ 824:	0014899b          	addiw	s3,s1,1
+ 828:	0485                	addi	s1,s1,1
+ 82a:	00000517          	auipc	a0,0x0
+ 82e:	7d653503          	ld	a0,2006(a0) # 1000 <freep>
+ 832:	c915                	beqz	a0,866 <malloc+0x58>
+ 834:	611c                	ld	a5,0(a0)
+ 836:	4798                	lw	a4,8(a5)
+ 838:	08977a63          	bgeu	a4,s1,8cc <malloc+0xbe>
+ 83c:	f04a                	sd	s2,32(sp)
+ 83e:	e852                	sd	s4,16(sp)
+ 840:	e456                	sd	s5,8(sp)
+ 842:	e05a                	sd	s6,0(sp)
+ 844:	8a4e                	mv	s4,s3
+ 846:	0009871b          	sext.w	a4,s3
+ 84a:	6685                	lui	a3,0x1
+ 84c:	00d77363          	bgeu	a4,a3,852 <malloc+0x44>
+ 850:	6a05                	lui	s4,0x1
+ 852:	000a0b1b          	sext.w	s6,s4
+ 856:	004a1a1b          	slliw	s4,s4,0x4
+ 85a:	00000917          	auipc	s2,0x0
+ 85e:	7a690913          	addi	s2,s2,1958 # 1000 <freep>
+ 862:	5afd                	li	s5,-1
+ 864:	a081                	j	8a4 <malloc+0x96>
+ 866:	f04a                	sd	s2,32(sp)
+ 868:	e852                	sd	s4,16(sp)
+ 86a:	e456                	sd	s5,8(sp)
+ 86c:	e05a                	sd	s6,0(sp)
+ 86e:	00000797          	auipc	a5,0x0
+ 872:	7a278793          	addi	a5,a5,1954 # 1010 <base>
+ 876:	00000717          	auipc	a4,0x0
+ 87a:	78f73523          	sd	a5,1930(a4) # 1000 <freep>
+ 87e:	e39c                	sd	a5,0(a5)
+ 880:	0007a423          	sw	zero,8(a5)
+ 884:	b7c1                	j	844 <malloc+0x36>
+ 886:	6398                	ld	a4,0(a5)
+ 888:	e118                	sd	a4,0(a0)
+ 88a:	a8a9                	j	8e4 <malloc+0xd6>
+ 88c:	01652423          	sw	s6,8(a0)
+ 890:	0541                	addi	a0,a0,16
+ 892:	efbff0ef          	jal	78c <free>
+ 896:	00093503          	ld	a0,0(s2)
+ 89a:	c12d                	beqz	a0,8fc <malloc+0xee>
+ 89c:	611c                	ld	a5,0(a0)
+ 89e:	4798                	lw	a4,8(a5)
+ 8a0:	02977263          	bgeu	a4,s1,8c4 <malloc+0xb6>
+ 8a4:	00093703          	ld	a4,0(s2)
+ 8a8:	853e                	mv	a0,a5
+ 8aa:	fef719e3          	bne	a4,a5,89c <malloc+0x8e>
+ 8ae:	8552                	mv	a0,s4
+ 8b0:	b1bff0ef          	jal	3ca <sbrk>
+ 8b4:	fd551ce3          	bne	a0,s5,88c <malloc+0x7e>
+ 8b8:	4501                	li	a0,0
+ 8ba:	7902                	ld	s2,32(sp)
+ 8bc:	6a42                	ld	s4,16(sp)
+ 8be:	6aa2                	ld	s5,8(sp)
+ 8c0:	6b02                	ld	s6,0(sp)
+ 8c2:	a03d                	j	8f0 <malloc+0xe2>
+ 8c4:	7902                	ld	s2,32(sp)
+ 8c6:	6a42                	ld	s4,16(sp)
+ 8c8:	6aa2                	ld	s5,8(sp)
+ 8ca:	6b02                	ld	s6,0(sp)
+ 8cc:	fae48de3          	beq	s1,a4,886 <malloc+0x78>
+ 8d0:	4137073b          	subw	a4,a4,s3
+ 8d4:	c798                	sw	a4,8(a5)
+ 8d6:	02071693          	slli	a3,a4,0x20
+ 8da:	01c6d713          	srli	a4,a3,0x1c
+ 8de:	97ba                	add	a5,a5,a4
+ 8e0:	0137a423          	sw	s3,8(a5)
+ 8e4:	00000717          	auipc	a4,0x0
+ 8e8:	70a73e23          	sd	a0,1820(a4) # 1000 <freep>
+ 8ec:	01078513          	addi	a0,a5,16
+ 8f0:	70e2                	ld	ra,56(sp)
+ 8f2:	7442                	ld	s0,48(sp)
+ 8f4:	74a2                	ld	s1,40(sp)
+ 8f6:	69e2                	ld	s3,24(sp)
+ 8f8:	6121                	addi	sp,sp,64
+ 8fa:	8082                	ret
+ 8fc:	7902                	ld	s2,32(sp)
+ 8fe:	6a42                	ld	s4,16(sp)
+ 900:	6aa2                	ld	s5,8(sp)
+ 902:	6b02                	ld	s6,0(sp)
+ 904:	b7f5                	j	8f0 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/stressfs.c b/xv6-labs-2024/user/stressfs.c
new file mode 100644
index 0000000..247a7a5
--- /dev/null
+++ b/xv6-labs-2024/user/stressfs.c
@@ -0,0 +1,49 @@
+// Demonstrate that moving the "acquire" in iderw after the loop that
+// appends to the idequeue results in a race.
+
+// For this to work, you should also add a spin within iderw's
+// idequeue traversal loop.  Adding the following demonstrated a panic
+// after about 5 runs of stressfs in QEMU on a 2.1GHz CPU:
+//    for (i = 0; i < 40000; i++)
+//      asm volatile("");
+
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+
+int
+main(int argc, char *argv[])
+{
+  int fd, i;
+  char path[] = "stressfs0";
+  char data[512];
+
+  printf("stressfs starting\n");
+  memset(data, 'a', sizeof(data));
+
+  for(i = 0; i < 4; i++)
+    if(fork() > 0)
+      break;
+
+  printf("write %d\n", i);
+
+  path[8] += i;
+  fd = open(path, O_CREATE | O_RDWR);
+  for(i = 0; i < 20; i++)
+//    printf(fd, "%d\n", i);
+    write(fd, data, sizeof(data));
+  close(fd);
+
+  printf("read\n");
+
+  fd = open(path, O_RDONLY);
+  for (i = 0; i < 20; i++)
+    read(fd, data, sizeof(data));
+  close(fd);
+
+  wait(0);
+
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/stressfs.d b/xv6-labs-2024/user/stressfs.d
new file mode 100644
index 0000000..96b153a
--- /dev/null
+++ b/xv6-labs-2024/user/stressfs.d
@@ -0,0 +1,3 @@
+user/stressfs.o: user/stressfs.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/stat.h user/user.h kernel/fs.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/stressfs.o b/xv6-labs-2024/user/stressfs.o
new file mode 100644
index 0000000..34c1654
Binary files /dev/null and b/xv6-labs-2024/user/stressfs.o differ
diff --git a/xv6-labs-2024/user/stressfs.sym b/xv6-labs-2024/user/stressfs.sym
new file mode 100644
index 0000000..8b202d6
--- /dev/null
+++ b/xv6-labs-2024/user/stressfs.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000908 .rodata
+0000000000000970 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 stressfs.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+00000000000003e2 putc
+0000000000000400 printint
+0000000000000958 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+00000000000000ea strcpy
+000000000000075a printf
+0000000000000294 memmove
+000000000000038a mknod
+00000000000001a2 gets
+00000000000003c2 getpid
+0000000000000326 memcpy
+000000000000080e malloc
+00000000000003d2 sleep
+0000000000000352 pipe
+0000000000000362 write
+000000000000039a fstat
+0000000000000730 fprintf
+0000000000000372 kill
+00000000000004a8 vprintf
+00000000000003b2 chdir
+000000000000037a exec
+000000000000034a wait
+000000000000035a read
+0000000000000392 unlink
+00000000000002ec memcmp
+000000000000033a fork
+00000000000003ca sbrk
+00000000000003da uptime
+000000000000015c memset
+0000000000000000 main
+0000000000000106 strcmp
+00000000000003ba dup
+0000000000000212 stat
+00000000000003a2 link
+0000000000000342 exit
+00000000000000d8 start
+000000000000024c atoi
+0000000000000132 strlen
+0000000000000382 open
+000000000000017e strchr
+00000000000003aa mkdir
+000000000000036a close
+000000000000078c free
diff --git a/xv6-labs-2024/user/ulib.c b/xv6-labs-2024/user/ulib.c
new file mode 100644
index 0000000..0064846
--- /dev/null
+++ b/xv6-labs-2024/user/ulib.c
@@ -0,0 +1,147 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  extern int main();
+  main();
+  exit(0);
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+    ;
+  return os;
+}
+
+int
+strcmp(const char *p, const char *q)
+{
+  while(*p && *p == *q)
+    p++, q++;
+  return (uchar)*p - (uchar)*q;
+}
+
+uint
+strlen(const char *s)
+{
+  int n;
+
+  for(n = 0; s[n]; n++)
+    ;
+  return n;
+}
+
+void*
+memset(void *dst, int c, uint n)
+{
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+    cdst[i] = c;
+  }
+  return dst;
+}
+
+char*
+strchr(const char *s, char c)
+{
+  for(; *s; s++)
+    if(*s == c)
+      return (char*)s;
+  return 0;
+}
+
+char*
+gets(char *buf, int max)
+{
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+      break;
+  }
+  buf[i] = '\0';
+  return buf;
+}
+
+int
+stat(const char *n, struct stat *st)
+{
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+  if(fd < 0)
+    return -1;
+  r = fstat(fd, st);
+  close(fd);
+  return r;
+}
+
+int
+atoi(const char *s)
+{
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+    n = n*10 + *s++ - '0';
+  return n;
+}
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+    while(n-- > 0)
+      *dst++ = *src++;
+  } else {
+    dst += n;
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+    if (*p1 != *p2) {
+      return *p1 - *p2;
+    }
+    p1++;
+    p2++;
+  }
+  return 0;
+}
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+  return memmove(dst, src, n);
+}
diff --git a/xv6-labs-2024/user/ulib.d b/xv6-labs-2024/user/ulib.d
new file mode 100644
index 0000000..ce80833
--- /dev/null
+++ b/xv6-labs-2024/user/ulib.d
@@ -0,0 +1,2 @@
+user/ulib.o: user/ulib.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h kernel/fcntl.h user/user.h
diff --git a/xv6-labs-2024/user/ulib.o b/xv6-labs-2024/user/ulib.o
new file mode 100644
index 0000000..e8587f5
Binary files /dev/null and b/xv6-labs-2024/user/ulib.o differ
diff --git a/xv6-labs-2024/user/umalloc.c b/xv6-labs-2024/user/umalloc.c
new file mode 100644
index 0000000..2092a32
--- /dev/null
+++ b/xv6-labs-2024/user/umalloc.c
@@ -0,0 +1,90 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/param.h"
+
+// Memory allocator by Kernighan and Ritchie,
+// The C programming Language, 2nd ed.  Section 8.7.
+
+typedef long Align;
+
+union header {
+  struct {
+    union header *ptr;
+    uint size;
+  } s;
+  Align x;
+};
+
+typedef union header Header;
+
+static Header base;
+static Header *freep;
+
+void
+free(void *ap)
+{
+  Header *bp, *p;
+
+  bp = (Header*)ap - 1;
+  for(p = freep; !(bp > p && bp < p->s.ptr); p = p->s.ptr)
+    if(p >= p->s.ptr && (bp > p || bp < p->s.ptr))
+      break;
+  if(bp + bp->s.size == p->s.ptr){
+    bp->s.size += p->s.ptr->s.size;
+    bp->s.ptr = p->s.ptr->s.ptr;
+  } else
+    bp->s.ptr = p->s.ptr;
+  if(p + p->s.size == bp){
+    p->s.size += bp->s.size;
+    p->s.ptr = bp->s.ptr;
+  } else
+    p->s.ptr = bp;
+  freep = p;
+}
+
+static Header*
+morecore(uint nu)
+{
+  char *p;
+  Header *hp;
+
+  if(nu < 4096)
+    nu = 4096;
+  p = sbrk(nu * sizeof(Header));
+  if(p == (char*)-1)
+    return 0;
+  hp = (Header*)p;
+  hp->s.size = nu;
+  free((void*)(hp + 1));
+  return freep;
+}
+
+void*
+malloc(uint nbytes)
+{
+  Header *p, *prevp;
+  uint nunits;
+
+  nunits = (nbytes + sizeof(Header) - 1)/sizeof(Header) + 1;
+  if((prevp = freep) == 0){
+    base.s.ptr = freep = prevp = &base;
+    base.s.size = 0;
+  }
+  for(p = prevp->s.ptr; ; prevp = p, p = p->s.ptr){
+    if(p->s.size >= nunits){
+      if(p->s.size == nunits)
+        prevp->s.ptr = p->s.ptr;
+      else {
+        p->s.size -= nunits;
+        p += p->s.size;
+        p->s.size = nunits;
+      }
+      freep = prevp;
+      return (void*)(p + 1);
+    }
+    if(p == freep)
+      if((p = morecore(nunits)) == 0)
+        return 0;
+  }
+}
diff --git a/xv6-labs-2024/user/umalloc.d b/xv6-labs-2024/user/umalloc.d
new file mode 100644
index 0000000..9c4ac33
--- /dev/null
+++ b/xv6-labs-2024/user/umalloc.d
@@ -0,0 +1,3 @@
+user/umalloc.o: user/umalloc.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/types.h \
+ kernel/stat.h user/user.h kernel/param.h
diff --git a/xv6-labs-2024/user/umalloc.o b/xv6-labs-2024/user/umalloc.o
new file mode 100644
index 0000000..f5a1c64
Binary files /dev/null and b/xv6-labs-2024/user/umalloc.o differ
diff --git a/xv6-labs-2024/user/user.h b/xv6-labs-2024/user/user.h
new file mode 100644
index 0000000..f16fe27
--- /dev/null
+++ b/xv6-labs-2024/user/user.h
@@ -0,0 +1,43 @@
+struct stat;
+
+// system calls
+int fork(void);
+int exit(int) __attribute__((noreturn));
+int wait(int*);
+int pipe(int*);
+int write(int, const void*, int);
+int read(int, void*, int);
+int close(int);
+int kill(int);
+int exec(const char*, char**);
+int open(const char*, int);
+int mknod(const char*, short, short);
+int unlink(const char*);
+int fstat(int fd, struct stat*);
+int link(const char*, const char*);
+int mkdir(const char*);
+int chdir(const char*);
+int dup(int);
+int getpid(void);
+char* sbrk(int);
+int sleep(int);
+int uptime(void);
+
+// ulib.c
+int stat(const char*, struct stat*);
+char* strcpy(char*, const char*);
+void *memmove(void*, const void*, int);
+char* strchr(const char*, char c);
+int strcmp(const char*, const char*);
+void fprintf(int, const char*, ...) __attribute__ ((format (printf, 2, 3)));
+void printf(const char*, ...) __attribute__ ((format (printf, 1, 2)));
+char* gets(char*, int max);
+uint strlen(const char*);
+void* memset(void*, int, uint);
+int atoi(const char*);
+int memcmp(const void *, const void *, uint);
+void *memcpy(void *, const void *, uint);
+
+// umalloc.c
+void* malloc(uint);
+void free(void*);
diff --git a/xv6-labs-2024/user/user.ld b/xv6-labs-2024/user/user.ld
new file mode 100644
index 0000000..3da93e0
--- /dev/null
+++ b/xv6-labs-2024/user/user.ld
@@ -0,0 +1,39 @@
+OUTPUT_ARCH( "riscv" )
+
+SECTIONS
+{
+ . = 0x0;
+ 
+  .text : {
+    *(.text .text.*)
+  }
+
+  .rodata : {
+    . = ALIGN(16);
+    *(.srodata .srodata.*) /* do not need to distinguish this from .rodata */
+    . = ALIGN(16);
+    *(.rodata .rodata.*)
+  }
+
+  .eh_frame : {
+       *(.eh_frame)
+       *(.eh_frame.*)
+   }
+
+  . = ALIGN(0x1000);
+  .data : {
+    . = ALIGN(16);
+    *(.sdata .sdata.*) /* do not need to distinguish this from .data */
+    . = ALIGN(16);
+    *(.data .data.*)
+  }
+
+  .bss : {
+    . = ALIGN(16);
+    *(.sbss .sbss.*) /* do not need to distinguish this from .bss */
+    . = ALIGN(16);
+    *(.bss .bss.*)
+  }
+
+  PROVIDE(end = .);
+}
diff --git a/xv6-labs-2024/user/usertests.asm b/xv6-labs-2024/user/usertests.asm
new file mode 100644
index 0000000..de2a3b0
--- /dev/null
+++ b/xv6-labs-2024/user/usertests.asm
@@ -0,0 +1,7070 @@
+
+user/_usertests:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <copyinstr1>:
+       0:	711d                	addi	sp,sp,-96
+       2:	ec86                	sd	ra,88(sp)
+       4:	e8a2                	sd	s0,80(sp)
+       6:	e4a6                	sd	s1,72(sp)
+       8:	e0ca                	sd	s2,64(sp)
+       a:	fc4e                	sd	s3,56(sp)
+       c:	1080                	addi	s0,sp,96
+       e:	00007797          	auipc	a5,0x7
+      12:	3da78793          	addi	a5,a5,986 # 73e8 <malloc+0x249c>
+      16:	638c                	ld	a1,0(a5)
+      18:	6790                	ld	a2,8(a5)
+      1a:	6b94                	ld	a3,16(a5)
+      1c:	6f98                	ld	a4,24(a5)
+      1e:	739c                	ld	a5,32(a5)
+      20:	fab43423          	sd	a1,-88(s0)
+      24:	fac43823          	sd	a2,-80(s0)
+      28:	fad43c23          	sd	a3,-72(s0)
+      2c:	fce43023          	sd	a4,-64(s0)
+      30:	fcf43423          	sd	a5,-56(s0)
+      34:	fa840493          	addi	s1,s0,-88
+      38:	fd040993          	addi	s3,s0,-48
+      3c:	0004b903          	ld	s2,0(s1)
+      40:	20100593          	li	a1,513
+      44:	854a                	mv	a0,s2
+      46:	27b040ef          	jal	4ac0 <open>
+      4a:	00055c63          	bgez	a0,62 <copyinstr1+0x62>
+      4e:	04a1                	addi	s1,s1,8
+      50:	ff3496e3          	bne	s1,s3,3c <copyinstr1+0x3c>
+      54:	60e6                	ld	ra,88(sp)
+      56:	6446                	ld	s0,80(sp)
+      58:	64a6                	ld	s1,72(sp)
+      5a:	6906                	ld	s2,64(sp)
+      5c:	79e2                	ld	s3,56(sp)
+      5e:	6125                	addi	sp,sp,96
+      60:	8082                	ret
+      62:	862a                	mv	a2,a0
+      64:	85ca                	mv	a1,s2
+      66:	00005517          	auipc	a0,0x5
+      6a:	fea50513          	addi	a0,a0,-22 # 5050 <malloc+0x104>
+      6e:	62b040ef          	jal	4e98 <printf>
+      72:	4505                	li	a0,1
+      74:	20d040ef          	jal	4a80 <exit>
+
+0000000000000078 <bsstest>:
+      78:	0000a797          	auipc	a5,0xa
+      7c:	4f078793          	addi	a5,a5,1264 # a568 <uninit>
+      80:	0000d697          	auipc	a3,0xd
+      84:	bf868693          	addi	a3,a3,-1032 # cc78 <buf>
+      88:	0007c703          	lbu	a4,0(a5)
+      8c:	e709                	bnez	a4,96 <bsstest+0x1e>
+      8e:	0785                	addi	a5,a5,1
+      90:	fed79ce3          	bne	a5,a3,88 <bsstest+0x10>
+      94:	8082                	ret
+      96:	1141                	addi	sp,sp,-16
+      98:	e406                	sd	ra,8(sp)
+      9a:	e022                	sd	s0,0(sp)
+      9c:	0800                	addi	s0,sp,16
+      9e:	85aa                	mv	a1,a0
+      a0:	00005517          	auipc	a0,0x5
+      a4:	fd050513          	addi	a0,a0,-48 # 5070 <malloc+0x124>
+      a8:	5f1040ef          	jal	4e98 <printf>
+      ac:	4505                	li	a0,1
+      ae:	1d3040ef          	jal	4a80 <exit>
+
+00000000000000b2 <opentest>:
+      b2:	1101                	addi	sp,sp,-32
+      b4:	ec06                	sd	ra,24(sp)
+      b6:	e822                	sd	s0,16(sp)
+      b8:	e426                	sd	s1,8(sp)
+      ba:	1000                	addi	s0,sp,32
+      bc:	84aa                	mv	s1,a0
+      be:	4581                	li	a1,0
+      c0:	00005517          	auipc	a0,0x5
+      c4:	fc850513          	addi	a0,a0,-56 # 5088 <malloc+0x13c>
+      c8:	1f9040ef          	jal	4ac0 <open>
+      cc:	02054263          	bltz	a0,f0 <opentest+0x3e>
+      d0:	1d9040ef          	jal	4aa8 <close>
+      d4:	4581                	li	a1,0
+      d6:	00005517          	auipc	a0,0x5
+      da:	fd250513          	addi	a0,a0,-46 # 50a8 <malloc+0x15c>
+      de:	1e3040ef          	jal	4ac0 <open>
+      e2:	02055163          	bgez	a0,104 <opentest+0x52>
+      e6:	60e2                	ld	ra,24(sp)
+      e8:	6442                	ld	s0,16(sp)
+      ea:	64a2                	ld	s1,8(sp)
+      ec:	6105                	addi	sp,sp,32
+      ee:	8082                	ret
+      f0:	85a6                	mv	a1,s1
+      f2:	00005517          	auipc	a0,0x5
+      f6:	f9e50513          	addi	a0,a0,-98 # 5090 <malloc+0x144>
+      fa:	59f040ef          	jal	4e98 <printf>
+      fe:	4505                	li	a0,1
+     100:	181040ef          	jal	4a80 <exit>
+     104:	85a6                	mv	a1,s1
+     106:	00005517          	auipc	a0,0x5
+     10a:	fb250513          	addi	a0,a0,-78 # 50b8 <malloc+0x16c>
+     10e:	58b040ef          	jal	4e98 <printf>
+     112:	4505                	li	a0,1
+     114:	16d040ef          	jal	4a80 <exit>
+
+0000000000000118 <truncate2>:
+     118:	7179                	addi	sp,sp,-48
+     11a:	f406                	sd	ra,40(sp)
+     11c:	f022                	sd	s0,32(sp)
+     11e:	ec26                	sd	s1,24(sp)
+     120:	e84a                	sd	s2,16(sp)
+     122:	e44e                	sd	s3,8(sp)
+     124:	1800                	addi	s0,sp,48
+     126:	89aa                	mv	s3,a0
+     128:	00005517          	auipc	a0,0x5
+     12c:	fb850513          	addi	a0,a0,-72 # 50e0 <malloc+0x194>
+     130:	1a1040ef          	jal	4ad0 <unlink>
+     134:	60100593          	li	a1,1537
+     138:	00005517          	auipc	a0,0x5
+     13c:	fa850513          	addi	a0,a0,-88 # 50e0 <malloc+0x194>
+     140:	181040ef          	jal	4ac0 <open>
+     144:	84aa                	mv	s1,a0
+     146:	4611                	li	a2,4
+     148:	00005597          	auipc	a1,0x5
+     14c:	fa858593          	addi	a1,a1,-88 # 50f0 <malloc+0x1a4>
+     150:	151040ef          	jal	4aa0 <write>
+     154:	40100593          	li	a1,1025
+     158:	00005517          	auipc	a0,0x5
+     15c:	f8850513          	addi	a0,a0,-120 # 50e0 <malloc+0x194>
+     160:	161040ef          	jal	4ac0 <open>
+     164:	892a                	mv	s2,a0
+     166:	4605                	li	a2,1
+     168:	00005597          	auipc	a1,0x5
+     16c:	f9058593          	addi	a1,a1,-112 # 50f8 <malloc+0x1ac>
+     170:	8526                	mv	a0,s1
+     172:	12f040ef          	jal	4aa0 <write>
+     176:	57fd                	li	a5,-1
+     178:	02f51563          	bne	a0,a5,1a2 <truncate2+0x8a>
+     17c:	00005517          	auipc	a0,0x5
+     180:	f6450513          	addi	a0,a0,-156 # 50e0 <malloc+0x194>
+     184:	14d040ef          	jal	4ad0 <unlink>
+     188:	8526                	mv	a0,s1
+     18a:	11f040ef          	jal	4aa8 <close>
+     18e:	854a                	mv	a0,s2
+     190:	119040ef          	jal	4aa8 <close>
+     194:	70a2                	ld	ra,40(sp)
+     196:	7402                	ld	s0,32(sp)
+     198:	64e2                	ld	s1,24(sp)
+     19a:	6942                	ld	s2,16(sp)
+     19c:	69a2                	ld	s3,8(sp)
+     19e:	6145                	addi	sp,sp,48
+     1a0:	8082                	ret
+     1a2:	862a                	mv	a2,a0
+     1a4:	85ce                	mv	a1,s3
+     1a6:	00005517          	auipc	a0,0x5
+     1aa:	f5a50513          	addi	a0,a0,-166 # 5100 <malloc+0x1b4>
+     1ae:	4eb040ef          	jal	4e98 <printf>
+     1b2:	4505                	li	a0,1
+     1b4:	0cd040ef          	jal	4a80 <exit>
+
+00000000000001b8 <createtest>:
+     1b8:	7179                	addi	sp,sp,-48
+     1ba:	f406                	sd	ra,40(sp)
+     1bc:	f022                	sd	s0,32(sp)
+     1be:	ec26                	sd	s1,24(sp)
+     1c0:	e84a                	sd	s2,16(sp)
+     1c2:	1800                	addi	s0,sp,48
+     1c4:	06100793          	li	a5,97
+     1c8:	fcf40c23          	sb	a5,-40(s0)
+     1cc:	fc040d23          	sb	zero,-38(s0)
+     1d0:	03000493          	li	s1,48
+     1d4:	06400913          	li	s2,100
+     1d8:	fc940ca3          	sb	s1,-39(s0)
+     1dc:	20200593          	li	a1,514
+     1e0:	fd840513          	addi	a0,s0,-40
+     1e4:	0dd040ef          	jal	4ac0 <open>
+     1e8:	0c1040ef          	jal	4aa8 <close>
+     1ec:	2485                	addiw	s1,s1,1
+     1ee:	0ff4f493          	zext.b	s1,s1
+     1f2:	ff2493e3          	bne	s1,s2,1d8 <createtest+0x20>
+     1f6:	06100793          	li	a5,97
+     1fa:	fcf40c23          	sb	a5,-40(s0)
+     1fe:	fc040d23          	sb	zero,-38(s0)
+     202:	03000493          	li	s1,48
+     206:	06400913          	li	s2,100
+     20a:	fc940ca3          	sb	s1,-39(s0)
+     20e:	fd840513          	addi	a0,s0,-40
+     212:	0bf040ef          	jal	4ad0 <unlink>
+     216:	2485                	addiw	s1,s1,1
+     218:	0ff4f493          	zext.b	s1,s1
+     21c:	ff2497e3          	bne	s1,s2,20a <createtest+0x52>
+     220:	70a2                	ld	ra,40(sp)
+     222:	7402                	ld	s0,32(sp)
+     224:	64e2                	ld	s1,24(sp)
+     226:	6942                	ld	s2,16(sp)
+     228:	6145                	addi	sp,sp,48
+     22a:	8082                	ret
+
+000000000000022c <bigwrite>:
+     22c:	715d                	addi	sp,sp,-80
+     22e:	e486                	sd	ra,72(sp)
+     230:	e0a2                	sd	s0,64(sp)
+     232:	fc26                	sd	s1,56(sp)
+     234:	f84a                	sd	s2,48(sp)
+     236:	f44e                	sd	s3,40(sp)
+     238:	f052                	sd	s4,32(sp)
+     23a:	ec56                	sd	s5,24(sp)
+     23c:	e85a                	sd	s6,16(sp)
+     23e:	e45e                	sd	s7,8(sp)
+     240:	0880                	addi	s0,sp,80
+     242:	8baa                	mv	s7,a0
+     244:	00005517          	auipc	a0,0x5
+     248:	ee450513          	addi	a0,a0,-284 # 5128 <malloc+0x1dc>
+     24c:	085040ef          	jal	4ad0 <unlink>
+     250:	1f300493          	li	s1,499
+     254:	00005a97          	auipc	s5,0x5
+     258:	ed4a8a93          	addi	s5,s5,-300 # 5128 <malloc+0x1dc>
+     25c:	0000da17          	auipc	s4,0xd
+     260:	a1ca0a13          	addi	s4,s4,-1508 # cc78 <buf>
+     264:	6b0d                	lui	s6,0x3
+     266:	1c9b0b13          	addi	s6,s6,457 # 31c9 <subdir+0x5ed>
+     26a:	20200593          	li	a1,514
+     26e:	8556                	mv	a0,s5
+     270:	051040ef          	jal	4ac0 <open>
+     274:	892a                	mv	s2,a0
+     276:	04054563          	bltz	a0,2c0 <bigwrite+0x94>
+     27a:	8626                	mv	a2,s1
+     27c:	85d2                	mv	a1,s4
+     27e:	023040ef          	jal	4aa0 <write>
+     282:	89aa                	mv	s3,a0
+     284:	04a49863          	bne	s1,a0,2d4 <bigwrite+0xa8>
+     288:	8626                	mv	a2,s1
+     28a:	85d2                	mv	a1,s4
+     28c:	854a                	mv	a0,s2
+     28e:	013040ef          	jal	4aa0 <write>
+     292:	04951263          	bne	a0,s1,2d6 <bigwrite+0xaa>
+     296:	854a                	mv	a0,s2
+     298:	011040ef          	jal	4aa8 <close>
+     29c:	8556                	mv	a0,s5
+     29e:	033040ef          	jal	4ad0 <unlink>
+     2a2:	1d74849b          	addiw	s1,s1,471
+     2a6:	fd6492e3          	bne	s1,s6,26a <bigwrite+0x3e>
+     2aa:	60a6                	ld	ra,72(sp)
+     2ac:	6406                	ld	s0,64(sp)
+     2ae:	74e2                	ld	s1,56(sp)
+     2b0:	7942                	ld	s2,48(sp)
+     2b2:	79a2                	ld	s3,40(sp)
+     2b4:	7a02                	ld	s4,32(sp)
+     2b6:	6ae2                	ld	s5,24(sp)
+     2b8:	6b42                	ld	s6,16(sp)
+     2ba:	6ba2                	ld	s7,8(sp)
+     2bc:	6161                	addi	sp,sp,80
+     2be:	8082                	ret
+     2c0:	85de                	mv	a1,s7
+     2c2:	00005517          	auipc	a0,0x5
+     2c6:	e7650513          	addi	a0,a0,-394 # 5138 <malloc+0x1ec>
+     2ca:	3cf040ef          	jal	4e98 <printf>
+     2ce:	4505                	li	a0,1
+     2d0:	7b0040ef          	jal	4a80 <exit>
+     2d4:	89a6                	mv	s3,s1
+     2d6:	86aa                	mv	a3,a0
+     2d8:	864e                	mv	a2,s3
+     2da:	85de                	mv	a1,s7
+     2dc:	00005517          	auipc	a0,0x5
+     2e0:	e7c50513          	addi	a0,a0,-388 # 5158 <malloc+0x20c>
+     2e4:	3b5040ef          	jal	4e98 <printf>
+     2e8:	4505                	li	a0,1
+     2ea:	796040ef          	jal	4a80 <exit>
+
+00000000000002ee <badwrite>:
+     2ee:	7179                	addi	sp,sp,-48
+     2f0:	f406                	sd	ra,40(sp)
+     2f2:	f022                	sd	s0,32(sp)
+     2f4:	ec26                	sd	s1,24(sp)
+     2f6:	e84a                	sd	s2,16(sp)
+     2f8:	e44e                	sd	s3,8(sp)
+     2fa:	e052                	sd	s4,0(sp)
+     2fc:	1800                	addi	s0,sp,48
+     2fe:	00005517          	auipc	a0,0x5
+     302:	e7250513          	addi	a0,a0,-398 # 5170 <malloc+0x224>
+     306:	7ca040ef          	jal	4ad0 <unlink>
+     30a:	25800913          	li	s2,600
+     30e:	00005997          	auipc	s3,0x5
+     312:	e6298993          	addi	s3,s3,-414 # 5170 <malloc+0x224>
+     316:	5a7d                	li	s4,-1
+     318:	018a5a13          	srli	s4,s4,0x18
+     31c:	20100593          	li	a1,513
+     320:	854e                	mv	a0,s3
+     322:	79e040ef          	jal	4ac0 <open>
+     326:	84aa                	mv	s1,a0
+     328:	04054d63          	bltz	a0,382 <badwrite+0x94>
+     32c:	4605                	li	a2,1
+     32e:	85d2                	mv	a1,s4
+     330:	770040ef          	jal	4aa0 <write>
+     334:	8526                	mv	a0,s1
+     336:	772040ef          	jal	4aa8 <close>
+     33a:	854e                	mv	a0,s3
+     33c:	794040ef          	jal	4ad0 <unlink>
+     340:	397d                	addiw	s2,s2,-1
+     342:	fc091de3          	bnez	s2,31c <badwrite+0x2e>
+     346:	20100593          	li	a1,513
+     34a:	00005517          	auipc	a0,0x5
+     34e:	e2650513          	addi	a0,a0,-474 # 5170 <malloc+0x224>
+     352:	76e040ef          	jal	4ac0 <open>
+     356:	84aa                	mv	s1,a0
+     358:	02054e63          	bltz	a0,394 <badwrite+0xa6>
+     35c:	4605                	li	a2,1
+     35e:	00005597          	auipc	a1,0x5
+     362:	d9a58593          	addi	a1,a1,-614 # 50f8 <malloc+0x1ac>
+     366:	73a040ef          	jal	4aa0 <write>
+     36a:	4785                	li	a5,1
+     36c:	02f50d63          	beq	a0,a5,3a6 <badwrite+0xb8>
+     370:	00005517          	auipc	a0,0x5
+     374:	e2050513          	addi	a0,a0,-480 # 5190 <malloc+0x244>
+     378:	321040ef          	jal	4e98 <printf>
+     37c:	4505                	li	a0,1
+     37e:	702040ef          	jal	4a80 <exit>
+     382:	00005517          	auipc	a0,0x5
+     386:	df650513          	addi	a0,a0,-522 # 5178 <malloc+0x22c>
+     38a:	30f040ef          	jal	4e98 <printf>
+     38e:	4505                	li	a0,1
+     390:	6f0040ef          	jal	4a80 <exit>
+     394:	00005517          	auipc	a0,0x5
+     398:	de450513          	addi	a0,a0,-540 # 5178 <malloc+0x22c>
+     39c:	2fd040ef          	jal	4e98 <printf>
+     3a0:	4505                	li	a0,1
+     3a2:	6de040ef          	jal	4a80 <exit>
+     3a6:	8526                	mv	a0,s1
+     3a8:	700040ef          	jal	4aa8 <close>
+     3ac:	00005517          	auipc	a0,0x5
+     3b0:	dc450513          	addi	a0,a0,-572 # 5170 <malloc+0x224>
+     3b4:	71c040ef          	jal	4ad0 <unlink>
+     3b8:	4501                	li	a0,0
+     3ba:	6c6040ef          	jal	4a80 <exit>
+
+00000000000003be <outofinodes>:
+     3be:	715d                	addi	sp,sp,-80
+     3c0:	e486                	sd	ra,72(sp)
+     3c2:	e0a2                	sd	s0,64(sp)
+     3c4:	fc26                	sd	s1,56(sp)
+     3c6:	f84a                	sd	s2,48(sp)
+     3c8:	f44e                	sd	s3,40(sp)
+     3ca:	0880                	addi	s0,sp,80
+     3cc:	4481                	li	s1,0
+     3ce:	07a00913          	li	s2,122
+     3d2:	40000993          	li	s3,1024
+     3d6:	fb240823          	sb	s2,-80(s0)
+     3da:	fb2408a3          	sb	s2,-79(s0)
+     3de:	41f4d71b          	sraiw	a4,s1,0x1f
+     3e2:	01b7571b          	srliw	a4,a4,0x1b
+     3e6:	009707bb          	addw	a5,a4,s1
+     3ea:	4057d69b          	sraiw	a3,a5,0x5
+     3ee:	0306869b          	addiw	a3,a3,48
+     3f2:	fad40923          	sb	a3,-78(s0)
+     3f6:	8bfd                	andi	a5,a5,31
+     3f8:	9f99                	subw	a5,a5,a4
+     3fa:	0307879b          	addiw	a5,a5,48
+     3fe:	faf409a3          	sb	a5,-77(s0)
+     402:	fa040a23          	sb	zero,-76(s0)
+     406:	fb040513          	addi	a0,s0,-80
+     40a:	6c6040ef          	jal	4ad0 <unlink>
+     40e:	60200593          	li	a1,1538
+     412:	fb040513          	addi	a0,s0,-80
+     416:	6aa040ef          	jal	4ac0 <open>
+     41a:	00054763          	bltz	a0,428 <outofinodes+0x6a>
+     41e:	68a040ef          	jal	4aa8 <close>
+     422:	2485                	addiw	s1,s1,1
+     424:	fb3499e3          	bne	s1,s3,3d6 <outofinodes+0x18>
+     428:	4481                	li	s1,0
+     42a:	07a00913          	li	s2,122
+     42e:	40000993          	li	s3,1024
+     432:	fb240823          	sb	s2,-80(s0)
+     436:	fb2408a3          	sb	s2,-79(s0)
+     43a:	41f4d71b          	sraiw	a4,s1,0x1f
+     43e:	01b7571b          	srliw	a4,a4,0x1b
+     442:	009707bb          	addw	a5,a4,s1
+     446:	4057d69b          	sraiw	a3,a5,0x5
+     44a:	0306869b          	addiw	a3,a3,48
+     44e:	fad40923          	sb	a3,-78(s0)
+     452:	8bfd                	andi	a5,a5,31
+     454:	9f99                	subw	a5,a5,a4
+     456:	0307879b          	addiw	a5,a5,48
+     45a:	faf409a3          	sb	a5,-77(s0)
+     45e:	fa040a23          	sb	zero,-76(s0)
+     462:	fb040513          	addi	a0,s0,-80
+     466:	66a040ef          	jal	4ad0 <unlink>
+     46a:	2485                	addiw	s1,s1,1
+     46c:	fd3493e3          	bne	s1,s3,432 <outofinodes+0x74>
+     470:	60a6                	ld	ra,72(sp)
+     472:	6406                	ld	s0,64(sp)
+     474:	74e2                	ld	s1,56(sp)
+     476:	7942                	ld	s2,48(sp)
+     478:	79a2                	ld	s3,40(sp)
+     47a:	6161                	addi	sp,sp,80
+     47c:	8082                	ret
+
+000000000000047e <copyin>:
+     47e:	7159                	addi	sp,sp,-112
+     480:	f486                	sd	ra,104(sp)
+     482:	f0a2                	sd	s0,96(sp)
+     484:	eca6                	sd	s1,88(sp)
+     486:	e8ca                	sd	s2,80(sp)
+     488:	e4ce                	sd	s3,72(sp)
+     48a:	e0d2                	sd	s4,64(sp)
+     48c:	fc56                	sd	s5,56(sp)
+     48e:	1880                	addi	s0,sp,112
+     490:	00007797          	auipc	a5,0x7
+     494:	f5878793          	addi	a5,a5,-168 # 73e8 <malloc+0x249c>
+     498:	638c                	ld	a1,0(a5)
+     49a:	6790                	ld	a2,8(a5)
+     49c:	6b94                	ld	a3,16(a5)
+     49e:	6f98                	ld	a4,24(a5)
+     4a0:	739c                	ld	a5,32(a5)
+     4a2:	f8b43c23          	sd	a1,-104(s0)
+     4a6:	fac43023          	sd	a2,-96(s0)
+     4aa:	fad43423          	sd	a3,-88(s0)
+     4ae:	fae43823          	sd	a4,-80(s0)
+     4b2:	faf43c23          	sd	a5,-72(s0)
+     4b6:	f9840913          	addi	s2,s0,-104
+     4ba:	fc040a93          	addi	s5,s0,-64
+     4be:	00005a17          	auipc	s4,0x5
+     4c2:	ce2a0a13          	addi	s4,s4,-798 # 51a0 <malloc+0x254>
+     4c6:	00093983          	ld	s3,0(s2)
+     4ca:	20100593          	li	a1,513
+     4ce:	8552                	mv	a0,s4
+     4d0:	5f0040ef          	jal	4ac0 <open>
+     4d4:	84aa                	mv	s1,a0
+     4d6:	06054763          	bltz	a0,544 <copyin+0xc6>
+     4da:	6609                	lui	a2,0x2
+     4dc:	85ce                	mv	a1,s3
+     4de:	5c2040ef          	jal	4aa0 <write>
+     4e2:	06055a63          	bgez	a0,556 <copyin+0xd8>
+     4e6:	8526                	mv	a0,s1
+     4e8:	5c0040ef          	jal	4aa8 <close>
+     4ec:	8552                	mv	a0,s4
+     4ee:	5e2040ef          	jal	4ad0 <unlink>
+     4f2:	6609                	lui	a2,0x2
+     4f4:	85ce                	mv	a1,s3
+     4f6:	4505                	li	a0,1
+     4f8:	5a8040ef          	jal	4aa0 <write>
+     4fc:	06a04863          	bgtz	a0,56c <copyin+0xee>
+     500:	f9040513          	addi	a0,s0,-112
+     504:	58c040ef          	jal	4a90 <pipe>
+     508:	06054d63          	bltz	a0,582 <copyin+0x104>
+     50c:	6609                	lui	a2,0x2
+     50e:	85ce                	mv	a1,s3
+     510:	f9442503          	lw	a0,-108(s0)
+     514:	58c040ef          	jal	4aa0 <write>
+     518:	06a04e63          	bgtz	a0,594 <copyin+0x116>
+     51c:	f9042503          	lw	a0,-112(s0)
+     520:	588040ef          	jal	4aa8 <close>
+     524:	f9442503          	lw	a0,-108(s0)
+     528:	580040ef          	jal	4aa8 <close>
+     52c:	0921                	addi	s2,s2,8
+     52e:	f9591ce3          	bne	s2,s5,4c6 <copyin+0x48>
+     532:	70a6                	ld	ra,104(sp)
+     534:	7406                	ld	s0,96(sp)
+     536:	64e6                	ld	s1,88(sp)
+     538:	6946                	ld	s2,80(sp)
+     53a:	69a6                	ld	s3,72(sp)
+     53c:	6a06                	ld	s4,64(sp)
+     53e:	7ae2                	ld	s5,56(sp)
+     540:	6165                	addi	sp,sp,112
+     542:	8082                	ret
+     544:	00005517          	auipc	a0,0x5
+     548:	c6450513          	addi	a0,a0,-924 # 51a8 <malloc+0x25c>
+     54c:	14d040ef          	jal	4e98 <printf>
+     550:	4505                	li	a0,1
+     552:	52e040ef          	jal	4a80 <exit>
+     556:	862a                	mv	a2,a0
+     558:	85ce                	mv	a1,s3
+     55a:	00005517          	auipc	a0,0x5
+     55e:	c6650513          	addi	a0,a0,-922 # 51c0 <malloc+0x274>
+     562:	137040ef          	jal	4e98 <printf>
+     566:	4505                	li	a0,1
+     568:	518040ef          	jal	4a80 <exit>
+     56c:	862a                	mv	a2,a0
+     56e:	85ce                	mv	a1,s3
+     570:	00005517          	auipc	a0,0x5
+     574:	c8050513          	addi	a0,a0,-896 # 51f0 <malloc+0x2a4>
+     578:	121040ef          	jal	4e98 <printf>
+     57c:	4505                	li	a0,1
+     57e:	502040ef          	jal	4a80 <exit>
+     582:	00005517          	auipc	a0,0x5
+     586:	c9e50513          	addi	a0,a0,-866 # 5220 <malloc+0x2d4>
+     58a:	10f040ef          	jal	4e98 <printf>
+     58e:	4505                	li	a0,1
+     590:	4f0040ef          	jal	4a80 <exit>
+     594:	862a                	mv	a2,a0
+     596:	85ce                	mv	a1,s3
+     598:	00005517          	auipc	a0,0x5
+     59c:	c9850513          	addi	a0,a0,-872 # 5230 <malloc+0x2e4>
+     5a0:	0f9040ef          	jal	4e98 <printf>
+     5a4:	4505                	li	a0,1
+     5a6:	4da040ef          	jal	4a80 <exit>
+
+00000000000005aa <copyout>:
+     5aa:	7119                	addi	sp,sp,-128
+     5ac:	fc86                	sd	ra,120(sp)
+     5ae:	f8a2                	sd	s0,112(sp)
+     5b0:	f4a6                	sd	s1,104(sp)
+     5b2:	f0ca                	sd	s2,96(sp)
+     5b4:	ecce                	sd	s3,88(sp)
+     5b6:	e8d2                	sd	s4,80(sp)
+     5b8:	e4d6                	sd	s5,72(sp)
+     5ba:	e0da                	sd	s6,64(sp)
+     5bc:	0100                	addi	s0,sp,128
+     5be:	00007797          	auipc	a5,0x7
+     5c2:	e2a78793          	addi	a5,a5,-470 # 73e8 <malloc+0x249c>
+     5c6:	7788                	ld	a0,40(a5)
+     5c8:	7b8c                	ld	a1,48(a5)
+     5ca:	7f90                	ld	a2,56(a5)
+     5cc:	63b4                	ld	a3,64(a5)
+     5ce:	67b8                	ld	a4,72(a5)
+     5d0:	6bbc                	ld	a5,80(a5)
+     5d2:	f8a43823          	sd	a0,-112(s0)
+     5d6:	f8b43c23          	sd	a1,-104(s0)
+     5da:	fac43023          	sd	a2,-96(s0)
+     5de:	fad43423          	sd	a3,-88(s0)
+     5e2:	fae43823          	sd	a4,-80(s0)
+     5e6:	faf43c23          	sd	a5,-72(s0)
+     5ea:	f9040913          	addi	s2,s0,-112
+     5ee:	fc040b13          	addi	s6,s0,-64
+     5f2:	00005a17          	auipc	s4,0x5
+     5f6:	c6ea0a13          	addi	s4,s4,-914 # 5260 <malloc+0x314>
+     5fa:	00005a97          	auipc	s5,0x5
+     5fe:	afea8a93          	addi	s5,s5,-1282 # 50f8 <malloc+0x1ac>
+     602:	00093983          	ld	s3,0(s2)
+     606:	4581                	li	a1,0
+     608:	8552                	mv	a0,s4
+     60a:	4b6040ef          	jal	4ac0 <open>
+     60e:	84aa                	mv	s1,a0
+     610:	06054763          	bltz	a0,67e <copyout+0xd4>
+     614:	6609                	lui	a2,0x2
+     616:	85ce                	mv	a1,s3
+     618:	480040ef          	jal	4a98 <read>
+     61c:	06a04a63          	bgtz	a0,690 <copyout+0xe6>
+     620:	8526                	mv	a0,s1
+     622:	486040ef          	jal	4aa8 <close>
+     626:	f8840513          	addi	a0,s0,-120
+     62a:	466040ef          	jal	4a90 <pipe>
+     62e:	06054c63          	bltz	a0,6a6 <copyout+0xfc>
+     632:	4605                	li	a2,1
+     634:	85d6                	mv	a1,s5
+     636:	f8c42503          	lw	a0,-116(s0)
+     63a:	466040ef          	jal	4aa0 <write>
+     63e:	4785                	li	a5,1
+     640:	06f51c63          	bne	a0,a5,6b8 <copyout+0x10e>
+     644:	6609                	lui	a2,0x2
+     646:	85ce                	mv	a1,s3
+     648:	f8842503          	lw	a0,-120(s0)
+     64c:	44c040ef          	jal	4a98 <read>
+     650:	06a04d63          	bgtz	a0,6ca <copyout+0x120>
+     654:	f8842503          	lw	a0,-120(s0)
+     658:	450040ef          	jal	4aa8 <close>
+     65c:	f8c42503          	lw	a0,-116(s0)
+     660:	448040ef          	jal	4aa8 <close>
+     664:	0921                	addi	s2,s2,8
+     666:	f9691ee3          	bne	s2,s6,602 <copyout+0x58>
+     66a:	70e6                	ld	ra,120(sp)
+     66c:	7446                	ld	s0,112(sp)
+     66e:	74a6                	ld	s1,104(sp)
+     670:	7906                	ld	s2,96(sp)
+     672:	69e6                	ld	s3,88(sp)
+     674:	6a46                	ld	s4,80(sp)
+     676:	6aa6                	ld	s5,72(sp)
+     678:	6b06                	ld	s6,64(sp)
+     67a:	6109                	addi	sp,sp,128
+     67c:	8082                	ret
+     67e:	00005517          	auipc	a0,0x5
+     682:	bea50513          	addi	a0,a0,-1046 # 5268 <malloc+0x31c>
+     686:	013040ef          	jal	4e98 <printf>
+     68a:	4505                	li	a0,1
+     68c:	3f4040ef          	jal	4a80 <exit>
+     690:	862a                	mv	a2,a0
+     692:	85ce                	mv	a1,s3
+     694:	00005517          	auipc	a0,0x5
+     698:	bec50513          	addi	a0,a0,-1044 # 5280 <malloc+0x334>
+     69c:	7fc040ef          	jal	4e98 <printf>
+     6a0:	4505                	li	a0,1
+     6a2:	3de040ef          	jal	4a80 <exit>
+     6a6:	00005517          	auipc	a0,0x5
+     6aa:	b7a50513          	addi	a0,a0,-1158 # 5220 <malloc+0x2d4>
+     6ae:	7ea040ef          	jal	4e98 <printf>
+     6b2:	4505                	li	a0,1
+     6b4:	3cc040ef          	jal	4a80 <exit>
+     6b8:	00005517          	auipc	a0,0x5
+     6bc:	bf850513          	addi	a0,a0,-1032 # 52b0 <malloc+0x364>
+     6c0:	7d8040ef          	jal	4e98 <printf>
+     6c4:	4505                	li	a0,1
+     6c6:	3ba040ef          	jal	4a80 <exit>
+     6ca:	862a                	mv	a2,a0
+     6cc:	85ce                	mv	a1,s3
+     6ce:	00005517          	auipc	a0,0x5
+     6d2:	bfa50513          	addi	a0,a0,-1030 # 52c8 <malloc+0x37c>
+     6d6:	7c2040ef          	jal	4e98 <printf>
+     6da:	4505                	li	a0,1
+     6dc:	3a4040ef          	jal	4a80 <exit>
+
+00000000000006e0 <truncate1>:
+     6e0:	711d                	addi	sp,sp,-96
+     6e2:	ec86                	sd	ra,88(sp)
+     6e4:	e8a2                	sd	s0,80(sp)
+     6e6:	e4a6                	sd	s1,72(sp)
+     6e8:	e0ca                	sd	s2,64(sp)
+     6ea:	fc4e                	sd	s3,56(sp)
+     6ec:	f852                	sd	s4,48(sp)
+     6ee:	f456                	sd	s5,40(sp)
+     6f0:	1080                	addi	s0,sp,96
+     6f2:	8aaa                	mv	s5,a0
+     6f4:	00005517          	auipc	a0,0x5
+     6f8:	9ec50513          	addi	a0,a0,-1556 # 50e0 <malloc+0x194>
+     6fc:	3d4040ef          	jal	4ad0 <unlink>
+     700:	60100593          	li	a1,1537
+     704:	00005517          	auipc	a0,0x5
+     708:	9dc50513          	addi	a0,a0,-1572 # 50e0 <malloc+0x194>
+     70c:	3b4040ef          	jal	4ac0 <open>
+     710:	84aa                	mv	s1,a0
+     712:	4611                	li	a2,4
+     714:	00005597          	auipc	a1,0x5
+     718:	9dc58593          	addi	a1,a1,-1572 # 50f0 <malloc+0x1a4>
+     71c:	384040ef          	jal	4aa0 <write>
+     720:	8526                	mv	a0,s1
+     722:	386040ef          	jal	4aa8 <close>
+     726:	4581                	li	a1,0
+     728:	00005517          	auipc	a0,0x5
+     72c:	9b850513          	addi	a0,a0,-1608 # 50e0 <malloc+0x194>
+     730:	390040ef          	jal	4ac0 <open>
+     734:	84aa                	mv	s1,a0
+     736:	02000613          	li	a2,32
+     73a:	fa040593          	addi	a1,s0,-96
+     73e:	35a040ef          	jal	4a98 <read>
+     742:	4791                	li	a5,4
+     744:	0af51863          	bne	a0,a5,7f4 <truncate1+0x114>
+     748:	40100593          	li	a1,1025
+     74c:	00005517          	auipc	a0,0x5
+     750:	99450513          	addi	a0,a0,-1644 # 50e0 <malloc+0x194>
+     754:	36c040ef          	jal	4ac0 <open>
+     758:	89aa                	mv	s3,a0
+     75a:	4581                	li	a1,0
+     75c:	00005517          	auipc	a0,0x5
+     760:	98450513          	addi	a0,a0,-1660 # 50e0 <malloc+0x194>
+     764:	35c040ef          	jal	4ac0 <open>
+     768:	892a                	mv	s2,a0
+     76a:	02000613          	li	a2,32
+     76e:	fa040593          	addi	a1,s0,-96
+     772:	326040ef          	jal	4a98 <read>
+     776:	8a2a                	mv	s4,a0
+     778:	e949                	bnez	a0,80a <truncate1+0x12a>
+     77a:	02000613          	li	a2,32
+     77e:	fa040593          	addi	a1,s0,-96
+     782:	8526                	mv	a0,s1
+     784:	314040ef          	jal	4a98 <read>
+     788:	8a2a                	mv	s4,a0
+     78a:	e155                	bnez	a0,82e <truncate1+0x14e>
+     78c:	4619                	li	a2,6
+     78e:	00005597          	auipc	a1,0x5
+     792:	bca58593          	addi	a1,a1,-1078 # 5358 <malloc+0x40c>
+     796:	854e                	mv	a0,s3
+     798:	308040ef          	jal	4aa0 <write>
+     79c:	02000613          	li	a2,32
+     7a0:	fa040593          	addi	a1,s0,-96
+     7a4:	854a                	mv	a0,s2
+     7a6:	2f2040ef          	jal	4a98 <read>
+     7aa:	4799                	li	a5,6
+     7ac:	0af51363          	bne	a0,a5,852 <truncate1+0x172>
+     7b0:	02000613          	li	a2,32
+     7b4:	fa040593          	addi	a1,s0,-96
+     7b8:	8526                	mv	a0,s1
+     7ba:	2de040ef          	jal	4a98 <read>
+     7be:	4789                	li	a5,2
+     7c0:	0af51463          	bne	a0,a5,868 <truncate1+0x188>
+     7c4:	00005517          	auipc	a0,0x5
+     7c8:	91c50513          	addi	a0,a0,-1764 # 50e0 <malloc+0x194>
+     7cc:	304040ef          	jal	4ad0 <unlink>
+     7d0:	854e                	mv	a0,s3
+     7d2:	2d6040ef          	jal	4aa8 <close>
+     7d6:	8526                	mv	a0,s1
+     7d8:	2d0040ef          	jal	4aa8 <close>
+     7dc:	854a                	mv	a0,s2
+     7de:	2ca040ef          	jal	4aa8 <close>
+     7e2:	60e6                	ld	ra,88(sp)
+     7e4:	6446                	ld	s0,80(sp)
+     7e6:	64a6                	ld	s1,72(sp)
+     7e8:	6906                	ld	s2,64(sp)
+     7ea:	79e2                	ld	s3,56(sp)
+     7ec:	7a42                	ld	s4,48(sp)
+     7ee:	7aa2                	ld	s5,40(sp)
+     7f0:	6125                	addi	sp,sp,96
+     7f2:	8082                	ret
+     7f4:	862a                	mv	a2,a0
+     7f6:	85d6                	mv	a1,s5
+     7f8:	00005517          	auipc	a0,0x5
+     7fc:	b0050513          	addi	a0,a0,-1280 # 52f8 <malloc+0x3ac>
+     800:	698040ef          	jal	4e98 <printf>
+     804:	4505                	li	a0,1
+     806:	27a040ef          	jal	4a80 <exit>
+     80a:	85ca                	mv	a1,s2
+     80c:	00005517          	auipc	a0,0x5
+     810:	b0c50513          	addi	a0,a0,-1268 # 5318 <malloc+0x3cc>
+     814:	684040ef          	jal	4e98 <printf>
+     818:	8652                	mv	a2,s4
+     81a:	85d6                	mv	a1,s5
+     81c:	00005517          	auipc	a0,0x5
+     820:	b0c50513          	addi	a0,a0,-1268 # 5328 <malloc+0x3dc>
+     824:	674040ef          	jal	4e98 <printf>
+     828:	4505                	li	a0,1
+     82a:	256040ef          	jal	4a80 <exit>
+     82e:	85a6                	mv	a1,s1
+     830:	00005517          	auipc	a0,0x5
+     834:	b1850513          	addi	a0,a0,-1256 # 5348 <malloc+0x3fc>
+     838:	660040ef          	jal	4e98 <printf>
+     83c:	8652                	mv	a2,s4
+     83e:	85d6                	mv	a1,s5
+     840:	00005517          	auipc	a0,0x5
+     844:	ae850513          	addi	a0,a0,-1304 # 5328 <malloc+0x3dc>
+     848:	650040ef          	jal	4e98 <printf>
+     84c:	4505                	li	a0,1
+     84e:	232040ef          	jal	4a80 <exit>
+     852:	862a                	mv	a2,a0
+     854:	85d6                	mv	a1,s5
+     856:	00005517          	auipc	a0,0x5
+     85a:	b0a50513          	addi	a0,a0,-1270 # 5360 <malloc+0x414>
+     85e:	63a040ef          	jal	4e98 <printf>
+     862:	4505                	li	a0,1
+     864:	21c040ef          	jal	4a80 <exit>
+     868:	862a                	mv	a2,a0
+     86a:	85d6                	mv	a1,s5
+     86c:	00005517          	auipc	a0,0x5
+     870:	b1450513          	addi	a0,a0,-1260 # 5380 <malloc+0x434>
+     874:	624040ef          	jal	4e98 <printf>
+     878:	4505                	li	a0,1
+     87a:	206040ef          	jal	4a80 <exit>
+
+000000000000087e <writetest>:
+     87e:	7139                	addi	sp,sp,-64
+     880:	fc06                	sd	ra,56(sp)
+     882:	f822                	sd	s0,48(sp)
+     884:	f426                	sd	s1,40(sp)
+     886:	f04a                	sd	s2,32(sp)
+     888:	ec4e                	sd	s3,24(sp)
+     88a:	e852                	sd	s4,16(sp)
+     88c:	e456                	sd	s5,8(sp)
+     88e:	e05a                	sd	s6,0(sp)
+     890:	0080                	addi	s0,sp,64
+     892:	8b2a                	mv	s6,a0
+     894:	20200593          	li	a1,514
+     898:	00005517          	auipc	a0,0x5
+     89c:	b0850513          	addi	a0,a0,-1272 # 53a0 <malloc+0x454>
+     8a0:	220040ef          	jal	4ac0 <open>
+     8a4:	08054f63          	bltz	a0,942 <writetest+0xc4>
+     8a8:	892a                	mv	s2,a0
+     8aa:	4481                	li	s1,0
+     8ac:	00005997          	auipc	s3,0x5
+     8b0:	b1c98993          	addi	s3,s3,-1252 # 53c8 <malloc+0x47c>
+     8b4:	00005a97          	auipc	s5,0x5
+     8b8:	b4ca8a93          	addi	s5,s5,-1204 # 5400 <malloc+0x4b4>
+     8bc:	06400a13          	li	s4,100
+     8c0:	4629                	li	a2,10
+     8c2:	85ce                	mv	a1,s3
+     8c4:	854a                	mv	a0,s2
+     8c6:	1da040ef          	jal	4aa0 <write>
+     8ca:	47a9                	li	a5,10
+     8cc:	08f51563          	bne	a0,a5,956 <writetest+0xd8>
+     8d0:	4629                	li	a2,10
+     8d2:	85d6                	mv	a1,s5
+     8d4:	854a                	mv	a0,s2
+     8d6:	1ca040ef          	jal	4aa0 <write>
+     8da:	47a9                	li	a5,10
+     8dc:	08f51863          	bne	a0,a5,96c <writetest+0xee>
+     8e0:	2485                	addiw	s1,s1,1
+     8e2:	fd449fe3          	bne	s1,s4,8c0 <writetest+0x42>
+     8e6:	854a                	mv	a0,s2
+     8e8:	1c0040ef          	jal	4aa8 <close>
+     8ec:	4581                	li	a1,0
+     8ee:	00005517          	auipc	a0,0x5
+     8f2:	ab250513          	addi	a0,a0,-1358 # 53a0 <malloc+0x454>
+     8f6:	1ca040ef          	jal	4ac0 <open>
+     8fa:	84aa                	mv	s1,a0
+     8fc:	08054363          	bltz	a0,982 <writetest+0x104>
+     900:	7d000613          	li	a2,2000
+     904:	0000c597          	auipc	a1,0xc
+     908:	37458593          	addi	a1,a1,884 # cc78 <buf>
+     90c:	18c040ef          	jal	4a98 <read>
+     910:	7d000793          	li	a5,2000
+     914:	08f51163          	bne	a0,a5,996 <writetest+0x118>
+     918:	8526                	mv	a0,s1
+     91a:	18e040ef          	jal	4aa8 <close>
+     91e:	00005517          	auipc	a0,0x5
+     922:	a8250513          	addi	a0,a0,-1406 # 53a0 <malloc+0x454>
+     926:	1aa040ef          	jal	4ad0 <unlink>
+     92a:	08054063          	bltz	a0,9aa <writetest+0x12c>
+     92e:	70e2                	ld	ra,56(sp)
+     930:	7442                	ld	s0,48(sp)
+     932:	74a2                	ld	s1,40(sp)
+     934:	7902                	ld	s2,32(sp)
+     936:	69e2                	ld	s3,24(sp)
+     938:	6a42                	ld	s4,16(sp)
+     93a:	6aa2                	ld	s5,8(sp)
+     93c:	6b02                	ld	s6,0(sp)
+     93e:	6121                	addi	sp,sp,64
+     940:	8082                	ret
+     942:	85da                	mv	a1,s6
+     944:	00005517          	auipc	a0,0x5
+     948:	a6450513          	addi	a0,a0,-1436 # 53a8 <malloc+0x45c>
+     94c:	54c040ef          	jal	4e98 <printf>
+     950:	4505                	li	a0,1
+     952:	12e040ef          	jal	4a80 <exit>
+     956:	8626                	mv	a2,s1
+     958:	85da                	mv	a1,s6
+     95a:	00005517          	auipc	a0,0x5
+     95e:	a7e50513          	addi	a0,a0,-1410 # 53d8 <malloc+0x48c>
+     962:	536040ef          	jal	4e98 <printf>
+     966:	4505                	li	a0,1
+     968:	118040ef          	jal	4a80 <exit>
+     96c:	8626                	mv	a2,s1
+     96e:	85da                	mv	a1,s6
+     970:	00005517          	auipc	a0,0x5
+     974:	aa050513          	addi	a0,a0,-1376 # 5410 <malloc+0x4c4>
+     978:	520040ef          	jal	4e98 <printf>
+     97c:	4505                	li	a0,1
+     97e:	102040ef          	jal	4a80 <exit>
+     982:	85da                	mv	a1,s6
+     984:	00005517          	auipc	a0,0x5
+     988:	ab450513          	addi	a0,a0,-1356 # 5438 <malloc+0x4ec>
+     98c:	50c040ef          	jal	4e98 <printf>
+     990:	4505                	li	a0,1
+     992:	0ee040ef          	jal	4a80 <exit>
+     996:	85da                	mv	a1,s6
+     998:	00005517          	auipc	a0,0x5
+     99c:	ac050513          	addi	a0,a0,-1344 # 5458 <malloc+0x50c>
+     9a0:	4f8040ef          	jal	4e98 <printf>
+     9a4:	4505                	li	a0,1
+     9a6:	0da040ef          	jal	4a80 <exit>
+     9aa:	85da                	mv	a1,s6
+     9ac:	00005517          	auipc	a0,0x5
+     9b0:	ac450513          	addi	a0,a0,-1340 # 5470 <malloc+0x524>
+     9b4:	4e4040ef          	jal	4e98 <printf>
+     9b8:	4505                	li	a0,1
+     9ba:	0c6040ef          	jal	4a80 <exit>
+
+00000000000009be <writebig>:
+     9be:	7139                	addi	sp,sp,-64
+     9c0:	fc06                	sd	ra,56(sp)
+     9c2:	f822                	sd	s0,48(sp)
+     9c4:	f426                	sd	s1,40(sp)
+     9c6:	f04a                	sd	s2,32(sp)
+     9c8:	ec4e                	sd	s3,24(sp)
+     9ca:	e852                	sd	s4,16(sp)
+     9cc:	e456                	sd	s5,8(sp)
+     9ce:	0080                	addi	s0,sp,64
+     9d0:	8aaa                	mv	s5,a0
+     9d2:	20200593          	li	a1,514
+     9d6:	00005517          	auipc	a0,0x5
+     9da:	aba50513          	addi	a0,a0,-1350 # 5490 <malloc+0x544>
+     9de:	0e2040ef          	jal	4ac0 <open>
+     9e2:	89aa                	mv	s3,a0
+     9e4:	4481                	li	s1,0
+     9e6:	0000c917          	auipc	s2,0xc
+     9ea:	29290913          	addi	s2,s2,658 # cc78 <buf>
+     9ee:	10c00a13          	li	s4,268
+     9f2:	06054463          	bltz	a0,a5a <writebig+0x9c>
+     9f6:	00992023          	sw	s1,0(s2)
+     9fa:	40000613          	li	a2,1024
+     9fe:	85ca                	mv	a1,s2
+     a00:	854e                	mv	a0,s3
+     a02:	09e040ef          	jal	4aa0 <write>
+     a06:	40000793          	li	a5,1024
+     a0a:	06f51263          	bne	a0,a5,a6e <writebig+0xb0>
+     a0e:	2485                	addiw	s1,s1,1
+     a10:	ff4493e3          	bne	s1,s4,9f6 <writebig+0x38>
+     a14:	854e                	mv	a0,s3
+     a16:	092040ef          	jal	4aa8 <close>
+     a1a:	4581                	li	a1,0
+     a1c:	00005517          	auipc	a0,0x5
+     a20:	a7450513          	addi	a0,a0,-1420 # 5490 <malloc+0x544>
+     a24:	09c040ef          	jal	4ac0 <open>
+     a28:	89aa                	mv	s3,a0
+     a2a:	4481                	li	s1,0
+     a2c:	0000c917          	auipc	s2,0xc
+     a30:	24c90913          	addi	s2,s2,588 # cc78 <buf>
+     a34:	04054863          	bltz	a0,a84 <writebig+0xc6>
+     a38:	40000613          	li	a2,1024
+     a3c:	85ca                	mv	a1,s2
+     a3e:	854e                	mv	a0,s3
+     a40:	058040ef          	jal	4a98 <read>
+     a44:	c931                	beqz	a0,a98 <writebig+0xda>
+     a46:	40000793          	li	a5,1024
+     a4a:	08f51a63          	bne	a0,a5,ade <writebig+0x120>
+     a4e:	00092683          	lw	a3,0(s2)
+     a52:	0a969163          	bne	a3,s1,af4 <writebig+0x136>
+     a56:	2485                	addiw	s1,s1,1
+     a58:	b7c5                	j	a38 <writebig+0x7a>
+     a5a:	85d6                	mv	a1,s5
+     a5c:	00005517          	auipc	a0,0x5
+     a60:	a3c50513          	addi	a0,a0,-1476 # 5498 <malloc+0x54c>
+     a64:	434040ef          	jal	4e98 <printf>
+     a68:	4505                	li	a0,1
+     a6a:	016040ef          	jal	4a80 <exit>
+     a6e:	8626                	mv	a2,s1
+     a70:	85d6                	mv	a1,s5
+     a72:	00005517          	auipc	a0,0x5
+     a76:	a4650513          	addi	a0,a0,-1466 # 54b8 <malloc+0x56c>
+     a7a:	41e040ef          	jal	4e98 <printf>
+     a7e:	4505                	li	a0,1
+     a80:	000040ef          	jal	4a80 <exit>
+     a84:	85d6                	mv	a1,s5
+     a86:	00005517          	auipc	a0,0x5
+     a8a:	a5a50513          	addi	a0,a0,-1446 # 54e0 <malloc+0x594>
+     a8e:	40a040ef          	jal	4e98 <printf>
+     a92:	4505                	li	a0,1
+     a94:	7ed030ef          	jal	4a80 <exit>
+     a98:	10c00793          	li	a5,268
+     a9c:	02f49663          	bne	s1,a5,ac8 <writebig+0x10a>
+     aa0:	854e                	mv	a0,s3
+     aa2:	006040ef          	jal	4aa8 <close>
+     aa6:	00005517          	auipc	a0,0x5
+     aaa:	9ea50513          	addi	a0,a0,-1558 # 5490 <malloc+0x544>
+     aae:	022040ef          	jal	4ad0 <unlink>
+     ab2:	04054c63          	bltz	a0,b0a <writebig+0x14c>
+     ab6:	70e2                	ld	ra,56(sp)
+     ab8:	7442                	ld	s0,48(sp)
+     aba:	74a2                	ld	s1,40(sp)
+     abc:	7902                	ld	s2,32(sp)
+     abe:	69e2                	ld	s3,24(sp)
+     ac0:	6a42                	ld	s4,16(sp)
+     ac2:	6aa2                	ld	s5,8(sp)
+     ac4:	6121                	addi	sp,sp,64
+     ac6:	8082                	ret
+     ac8:	8626                	mv	a2,s1
+     aca:	85d6                	mv	a1,s5
+     acc:	00005517          	auipc	a0,0x5
+     ad0:	a3450513          	addi	a0,a0,-1484 # 5500 <malloc+0x5b4>
+     ad4:	3c4040ef          	jal	4e98 <printf>
+     ad8:	4505                	li	a0,1
+     ada:	7a7030ef          	jal	4a80 <exit>
+     ade:	862a                	mv	a2,a0
+     ae0:	85d6                	mv	a1,s5
+     ae2:	00005517          	auipc	a0,0x5
+     ae6:	a4650513          	addi	a0,a0,-1466 # 5528 <malloc+0x5dc>
+     aea:	3ae040ef          	jal	4e98 <printf>
+     aee:	4505                	li	a0,1
+     af0:	791030ef          	jal	4a80 <exit>
+     af4:	8626                	mv	a2,s1
+     af6:	85d6                	mv	a1,s5
+     af8:	00005517          	auipc	a0,0x5
+     afc:	a4850513          	addi	a0,a0,-1464 # 5540 <malloc+0x5f4>
+     b00:	398040ef          	jal	4e98 <printf>
+     b04:	4505                	li	a0,1
+     b06:	77b030ef          	jal	4a80 <exit>
+     b0a:	85d6                	mv	a1,s5
+     b0c:	00005517          	auipc	a0,0x5
+     b10:	a5c50513          	addi	a0,a0,-1444 # 5568 <malloc+0x61c>
+     b14:	384040ef          	jal	4e98 <printf>
+     b18:	4505                	li	a0,1
+     b1a:	767030ef          	jal	4a80 <exit>
+
+0000000000000b1e <unlinkread>:
+     b1e:	7179                	addi	sp,sp,-48
+     b20:	f406                	sd	ra,40(sp)
+     b22:	f022                	sd	s0,32(sp)
+     b24:	ec26                	sd	s1,24(sp)
+     b26:	e84a                	sd	s2,16(sp)
+     b28:	e44e                	sd	s3,8(sp)
+     b2a:	1800                	addi	s0,sp,48
+     b2c:	89aa                	mv	s3,a0
+     b2e:	20200593          	li	a1,514
+     b32:	00005517          	auipc	a0,0x5
+     b36:	a4e50513          	addi	a0,a0,-1458 # 5580 <malloc+0x634>
+     b3a:	787030ef          	jal	4ac0 <open>
+     b3e:	0a054f63          	bltz	a0,bfc <unlinkread+0xde>
+     b42:	84aa                	mv	s1,a0
+     b44:	4615                	li	a2,5
+     b46:	00005597          	auipc	a1,0x5
+     b4a:	a6a58593          	addi	a1,a1,-1430 # 55b0 <malloc+0x664>
+     b4e:	753030ef          	jal	4aa0 <write>
+     b52:	8526                	mv	a0,s1
+     b54:	755030ef          	jal	4aa8 <close>
+     b58:	4589                	li	a1,2
+     b5a:	00005517          	auipc	a0,0x5
+     b5e:	a2650513          	addi	a0,a0,-1498 # 5580 <malloc+0x634>
+     b62:	75f030ef          	jal	4ac0 <open>
+     b66:	84aa                	mv	s1,a0
+     b68:	0a054463          	bltz	a0,c10 <unlinkread+0xf2>
+     b6c:	00005517          	auipc	a0,0x5
+     b70:	a1450513          	addi	a0,a0,-1516 # 5580 <malloc+0x634>
+     b74:	75d030ef          	jal	4ad0 <unlink>
+     b78:	e555                	bnez	a0,c24 <unlinkread+0x106>
+     b7a:	20200593          	li	a1,514
+     b7e:	00005517          	auipc	a0,0x5
+     b82:	a0250513          	addi	a0,a0,-1534 # 5580 <malloc+0x634>
+     b86:	73b030ef          	jal	4ac0 <open>
+     b8a:	892a                	mv	s2,a0
+     b8c:	460d                	li	a2,3
+     b8e:	00005597          	auipc	a1,0x5
+     b92:	a6a58593          	addi	a1,a1,-1430 # 55f8 <malloc+0x6ac>
+     b96:	70b030ef          	jal	4aa0 <write>
+     b9a:	854a                	mv	a0,s2
+     b9c:	70d030ef          	jal	4aa8 <close>
+     ba0:	660d                	lui	a2,0x3
+     ba2:	0000c597          	auipc	a1,0xc
+     ba6:	0d658593          	addi	a1,a1,214 # cc78 <buf>
+     baa:	8526                	mv	a0,s1
+     bac:	6ed030ef          	jal	4a98 <read>
+     bb0:	4795                	li	a5,5
+     bb2:	08f51363          	bne	a0,a5,c38 <unlinkread+0x11a>
+     bb6:	0000c717          	auipc	a4,0xc
+     bba:	0c274703          	lbu	a4,194(a4) # cc78 <buf>
+     bbe:	06800793          	li	a5,104
+     bc2:	08f71563          	bne	a4,a5,c4c <unlinkread+0x12e>
+     bc6:	4629                	li	a2,10
+     bc8:	0000c597          	auipc	a1,0xc
+     bcc:	0b058593          	addi	a1,a1,176 # cc78 <buf>
+     bd0:	8526                	mv	a0,s1
+     bd2:	6cf030ef          	jal	4aa0 <write>
+     bd6:	47a9                	li	a5,10
+     bd8:	08f51463          	bne	a0,a5,c60 <unlinkread+0x142>
+     bdc:	8526                	mv	a0,s1
+     bde:	6cb030ef          	jal	4aa8 <close>
+     be2:	00005517          	auipc	a0,0x5
+     be6:	99e50513          	addi	a0,a0,-1634 # 5580 <malloc+0x634>
+     bea:	6e7030ef          	jal	4ad0 <unlink>
+     bee:	70a2                	ld	ra,40(sp)
+     bf0:	7402                	ld	s0,32(sp)
+     bf2:	64e2                	ld	s1,24(sp)
+     bf4:	6942                	ld	s2,16(sp)
+     bf6:	69a2                	ld	s3,8(sp)
+     bf8:	6145                	addi	sp,sp,48
+     bfa:	8082                	ret
+     bfc:	85ce                	mv	a1,s3
+     bfe:	00005517          	auipc	a0,0x5
+     c02:	99250513          	addi	a0,a0,-1646 # 5590 <malloc+0x644>
+     c06:	292040ef          	jal	4e98 <printf>
+     c0a:	4505                	li	a0,1
+     c0c:	675030ef          	jal	4a80 <exit>
+     c10:	85ce                	mv	a1,s3
+     c12:	00005517          	auipc	a0,0x5
+     c16:	9a650513          	addi	a0,a0,-1626 # 55b8 <malloc+0x66c>
+     c1a:	27e040ef          	jal	4e98 <printf>
+     c1e:	4505                	li	a0,1
+     c20:	661030ef          	jal	4a80 <exit>
+     c24:	85ce                	mv	a1,s3
+     c26:	00005517          	auipc	a0,0x5
+     c2a:	9b250513          	addi	a0,a0,-1614 # 55d8 <malloc+0x68c>
+     c2e:	26a040ef          	jal	4e98 <printf>
+     c32:	4505                	li	a0,1
+     c34:	64d030ef          	jal	4a80 <exit>
+     c38:	85ce                	mv	a1,s3
+     c3a:	00005517          	auipc	a0,0x5
+     c3e:	9c650513          	addi	a0,a0,-1594 # 5600 <malloc+0x6b4>
+     c42:	256040ef          	jal	4e98 <printf>
+     c46:	4505                	li	a0,1
+     c48:	639030ef          	jal	4a80 <exit>
+     c4c:	85ce                	mv	a1,s3
+     c4e:	00005517          	auipc	a0,0x5
+     c52:	9d250513          	addi	a0,a0,-1582 # 5620 <malloc+0x6d4>
+     c56:	242040ef          	jal	4e98 <printf>
+     c5a:	4505                	li	a0,1
+     c5c:	625030ef          	jal	4a80 <exit>
+     c60:	85ce                	mv	a1,s3
+     c62:	00005517          	auipc	a0,0x5
+     c66:	9de50513          	addi	a0,a0,-1570 # 5640 <malloc+0x6f4>
+     c6a:	22e040ef          	jal	4e98 <printf>
+     c6e:	4505                	li	a0,1
+     c70:	611030ef          	jal	4a80 <exit>
+
+0000000000000c74 <linktest>:
+     c74:	1101                	addi	sp,sp,-32
+     c76:	ec06                	sd	ra,24(sp)
+     c78:	e822                	sd	s0,16(sp)
+     c7a:	e426                	sd	s1,8(sp)
+     c7c:	e04a                	sd	s2,0(sp)
+     c7e:	1000                	addi	s0,sp,32
+     c80:	892a                	mv	s2,a0
+     c82:	00005517          	auipc	a0,0x5
+     c86:	9de50513          	addi	a0,a0,-1570 # 5660 <malloc+0x714>
+     c8a:	647030ef          	jal	4ad0 <unlink>
+     c8e:	00005517          	auipc	a0,0x5
+     c92:	9da50513          	addi	a0,a0,-1574 # 5668 <malloc+0x71c>
+     c96:	63b030ef          	jal	4ad0 <unlink>
+     c9a:	20200593          	li	a1,514
+     c9e:	00005517          	auipc	a0,0x5
+     ca2:	9c250513          	addi	a0,a0,-1598 # 5660 <malloc+0x714>
+     ca6:	61b030ef          	jal	4ac0 <open>
+     caa:	0c054f63          	bltz	a0,d88 <linktest+0x114>
+     cae:	84aa                	mv	s1,a0
+     cb0:	4615                	li	a2,5
+     cb2:	00005597          	auipc	a1,0x5
+     cb6:	8fe58593          	addi	a1,a1,-1794 # 55b0 <malloc+0x664>
+     cba:	5e7030ef          	jal	4aa0 <write>
+     cbe:	4795                	li	a5,5
+     cc0:	0cf51e63          	bne	a0,a5,d9c <linktest+0x128>
+     cc4:	8526                	mv	a0,s1
+     cc6:	5e3030ef          	jal	4aa8 <close>
+     cca:	00005597          	auipc	a1,0x5
+     cce:	99e58593          	addi	a1,a1,-1634 # 5668 <malloc+0x71c>
+     cd2:	00005517          	auipc	a0,0x5
+     cd6:	98e50513          	addi	a0,a0,-1650 # 5660 <malloc+0x714>
+     cda:	607030ef          	jal	4ae0 <link>
+     cde:	0c054963          	bltz	a0,db0 <linktest+0x13c>
+     ce2:	00005517          	auipc	a0,0x5
+     ce6:	97e50513          	addi	a0,a0,-1666 # 5660 <malloc+0x714>
+     cea:	5e7030ef          	jal	4ad0 <unlink>
+     cee:	4581                	li	a1,0
+     cf0:	00005517          	auipc	a0,0x5
+     cf4:	97050513          	addi	a0,a0,-1680 # 5660 <malloc+0x714>
+     cf8:	5c9030ef          	jal	4ac0 <open>
+     cfc:	0c055463          	bgez	a0,dc4 <linktest+0x150>
+     d00:	4581                	li	a1,0
+     d02:	00005517          	auipc	a0,0x5
+     d06:	96650513          	addi	a0,a0,-1690 # 5668 <malloc+0x71c>
+     d0a:	5b7030ef          	jal	4ac0 <open>
+     d0e:	84aa                	mv	s1,a0
+     d10:	0c054463          	bltz	a0,dd8 <linktest+0x164>
+     d14:	660d                	lui	a2,0x3
+     d16:	0000c597          	auipc	a1,0xc
+     d1a:	f6258593          	addi	a1,a1,-158 # cc78 <buf>
+     d1e:	57b030ef          	jal	4a98 <read>
+     d22:	4795                	li	a5,5
+     d24:	0cf51463          	bne	a0,a5,dec <linktest+0x178>
+     d28:	8526                	mv	a0,s1
+     d2a:	57f030ef          	jal	4aa8 <close>
+     d2e:	00005597          	auipc	a1,0x5
+     d32:	93a58593          	addi	a1,a1,-1734 # 5668 <malloc+0x71c>
+     d36:	852e                	mv	a0,a1
+     d38:	5a9030ef          	jal	4ae0 <link>
+     d3c:	0c055263          	bgez	a0,e00 <linktest+0x18c>
+     d40:	00005517          	auipc	a0,0x5
+     d44:	92850513          	addi	a0,a0,-1752 # 5668 <malloc+0x71c>
+     d48:	589030ef          	jal	4ad0 <unlink>
+     d4c:	00005597          	auipc	a1,0x5
+     d50:	91458593          	addi	a1,a1,-1772 # 5660 <malloc+0x714>
+     d54:	00005517          	auipc	a0,0x5
+     d58:	91450513          	addi	a0,a0,-1772 # 5668 <malloc+0x71c>
+     d5c:	585030ef          	jal	4ae0 <link>
+     d60:	0a055a63          	bgez	a0,e14 <linktest+0x1a0>
+     d64:	00005597          	auipc	a1,0x5
+     d68:	8fc58593          	addi	a1,a1,-1796 # 5660 <malloc+0x714>
+     d6c:	00005517          	auipc	a0,0x5
+     d70:	a0450513          	addi	a0,a0,-1532 # 5770 <malloc+0x824>
+     d74:	56d030ef          	jal	4ae0 <link>
+     d78:	0a055863          	bgez	a0,e28 <linktest+0x1b4>
+     d7c:	60e2                	ld	ra,24(sp)
+     d7e:	6442                	ld	s0,16(sp)
+     d80:	64a2                	ld	s1,8(sp)
+     d82:	6902                	ld	s2,0(sp)
+     d84:	6105                	addi	sp,sp,32
+     d86:	8082                	ret
+     d88:	85ca                	mv	a1,s2
+     d8a:	00005517          	auipc	a0,0x5
+     d8e:	8e650513          	addi	a0,a0,-1818 # 5670 <malloc+0x724>
+     d92:	106040ef          	jal	4e98 <printf>
+     d96:	4505                	li	a0,1
+     d98:	4e9030ef          	jal	4a80 <exit>
+     d9c:	85ca                	mv	a1,s2
+     d9e:	00005517          	auipc	a0,0x5
+     da2:	8ea50513          	addi	a0,a0,-1814 # 5688 <malloc+0x73c>
+     da6:	0f2040ef          	jal	4e98 <printf>
+     daa:	4505                	li	a0,1
+     dac:	4d5030ef          	jal	4a80 <exit>
+     db0:	85ca                	mv	a1,s2
+     db2:	00005517          	auipc	a0,0x5
+     db6:	8ee50513          	addi	a0,a0,-1810 # 56a0 <malloc+0x754>
+     dba:	0de040ef          	jal	4e98 <printf>
+     dbe:	4505                	li	a0,1
+     dc0:	4c1030ef          	jal	4a80 <exit>
+     dc4:	85ca                	mv	a1,s2
+     dc6:	00005517          	auipc	a0,0x5
+     dca:	8fa50513          	addi	a0,a0,-1798 # 56c0 <malloc+0x774>
+     dce:	0ca040ef          	jal	4e98 <printf>
+     dd2:	4505                	li	a0,1
+     dd4:	4ad030ef          	jal	4a80 <exit>
+     dd8:	85ca                	mv	a1,s2
+     dda:	00005517          	auipc	a0,0x5
+     dde:	91650513          	addi	a0,a0,-1770 # 56f0 <malloc+0x7a4>
+     de2:	0b6040ef          	jal	4e98 <printf>
+     de6:	4505                	li	a0,1
+     de8:	499030ef          	jal	4a80 <exit>
+     dec:	85ca                	mv	a1,s2
+     dee:	00005517          	auipc	a0,0x5
+     df2:	91a50513          	addi	a0,a0,-1766 # 5708 <malloc+0x7bc>
+     df6:	0a2040ef          	jal	4e98 <printf>
+     dfa:	4505                	li	a0,1
+     dfc:	485030ef          	jal	4a80 <exit>
+     e00:	85ca                	mv	a1,s2
+     e02:	00005517          	auipc	a0,0x5
+     e06:	91e50513          	addi	a0,a0,-1762 # 5720 <malloc+0x7d4>
+     e0a:	08e040ef          	jal	4e98 <printf>
+     e0e:	4505                	li	a0,1
+     e10:	471030ef          	jal	4a80 <exit>
+     e14:	85ca                	mv	a1,s2
+     e16:	00005517          	auipc	a0,0x5
+     e1a:	93250513          	addi	a0,a0,-1742 # 5748 <malloc+0x7fc>
+     e1e:	07a040ef          	jal	4e98 <printf>
+     e22:	4505                	li	a0,1
+     e24:	45d030ef          	jal	4a80 <exit>
+     e28:	85ca                	mv	a1,s2
+     e2a:	00005517          	auipc	a0,0x5
+     e2e:	94e50513          	addi	a0,a0,-1714 # 5778 <malloc+0x82c>
+     e32:	066040ef          	jal	4e98 <printf>
+     e36:	4505                	li	a0,1
+     e38:	449030ef          	jal	4a80 <exit>
+
+0000000000000e3c <validatetest>:
+     e3c:	7139                	addi	sp,sp,-64
+     e3e:	fc06                	sd	ra,56(sp)
+     e40:	f822                	sd	s0,48(sp)
+     e42:	f426                	sd	s1,40(sp)
+     e44:	f04a                	sd	s2,32(sp)
+     e46:	ec4e                	sd	s3,24(sp)
+     e48:	e852                	sd	s4,16(sp)
+     e4a:	e456                	sd	s5,8(sp)
+     e4c:	e05a                	sd	s6,0(sp)
+     e4e:	0080                	addi	s0,sp,64
+     e50:	8b2a                	mv	s6,a0
+     e52:	4481                	li	s1,0
+     e54:	00005997          	auipc	s3,0x5
+     e58:	94498993          	addi	s3,s3,-1724 # 5798 <malloc+0x84c>
+     e5c:	597d                	li	s2,-1
+     e5e:	6a85                	lui	s5,0x1
+     e60:	00114a37          	lui	s4,0x114
+     e64:	85a6                	mv	a1,s1
+     e66:	854e                	mv	a0,s3
+     e68:	479030ef          	jal	4ae0 <link>
+     e6c:	01251f63          	bne	a0,s2,e8a <validatetest+0x4e>
+     e70:	94d6                	add	s1,s1,s5
+     e72:	ff4499e3          	bne	s1,s4,e64 <validatetest+0x28>
+     e76:	70e2                	ld	ra,56(sp)
+     e78:	7442                	ld	s0,48(sp)
+     e7a:	74a2                	ld	s1,40(sp)
+     e7c:	7902                	ld	s2,32(sp)
+     e7e:	69e2                	ld	s3,24(sp)
+     e80:	6a42                	ld	s4,16(sp)
+     e82:	6aa2                	ld	s5,8(sp)
+     e84:	6b02                	ld	s6,0(sp)
+     e86:	6121                	addi	sp,sp,64
+     e88:	8082                	ret
+     e8a:	85da                	mv	a1,s6
+     e8c:	00005517          	auipc	a0,0x5
+     e90:	91c50513          	addi	a0,a0,-1764 # 57a8 <malloc+0x85c>
+     e94:	004040ef          	jal	4e98 <printf>
+     e98:	4505                	li	a0,1
+     e9a:	3e7030ef          	jal	4a80 <exit>
+
+0000000000000e9e <bigdir>:
+     e9e:	715d                	addi	sp,sp,-80
+     ea0:	e486                	sd	ra,72(sp)
+     ea2:	e0a2                	sd	s0,64(sp)
+     ea4:	fc26                	sd	s1,56(sp)
+     ea6:	f84a                	sd	s2,48(sp)
+     ea8:	f44e                	sd	s3,40(sp)
+     eaa:	f052                	sd	s4,32(sp)
+     eac:	ec56                	sd	s5,24(sp)
+     eae:	e85a                	sd	s6,16(sp)
+     eb0:	0880                	addi	s0,sp,80
+     eb2:	89aa                	mv	s3,a0
+     eb4:	00005517          	auipc	a0,0x5
+     eb8:	91450513          	addi	a0,a0,-1772 # 57c8 <malloc+0x87c>
+     ebc:	415030ef          	jal	4ad0 <unlink>
+     ec0:	20000593          	li	a1,512
+     ec4:	00005517          	auipc	a0,0x5
+     ec8:	90450513          	addi	a0,a0,-1788 # 57c8 <malloc+0x87c>
+     ecc:	3f5030ef          	jal	4ac0 <open>
+     ed0:	0c054163          	bltz	a0,f92 <bigdir+0xf4>
+     ed4:	3d5030ef          	jal	4aa8 <close>
+     ed8:	4901                	li	s2,0
+     eda:	07800a93          	li	s5,120
+     ede:	00005a17          	auipc	s4,0x5
+     ee2:	8eaa0a13          	addi	s4,s4,-1814 # 57c8 <malloc+0x87c>
+     ee6:	1f400b13          	li	s6,500
+     eea:	fb540823          	sb	s5,-80(s0)
+     eee:	41f9571b          	sraiw	a4,s2,0x1f
+     ef2:	01a7571b          	srliw	a4,a4,0x1a
+     ef6:	012707bb          	addw	a5,a4,s2
+     efa:	4067d69b          	sraiw	a3,a5,0x6
+     efe:	0306869b          	addiw	a3,a3,48
+     f02:	fad408a3          	sb	a3,-79(s0)
+     f06:	03f7f793          	andi	a5,a5,63
+     f0a:	9f99                	subw	a5,a5,a4
+     f0c:	0307879b          	addiw	a5,a5,48
+     f10:	faf40923          	sb	a5,-78(s0)
+     f14:	fa0409a3          	sb	zero,-77(s0)
+     f18:	fb040593          	addi	a1,s0,-80
+     f1c:	8552                	mv	a0,s4
+     f1e:	3c3030ef          	jal	4ae0 <link>
+     f22:	84aa                	mv	s1,a0
+     f24:	e149                	bnez	a0,fa6 <bigdir+0x108>
+     f26:	2905                	addiw	s2,s2,1
+     f28:	fd6911e3          	bne	s2,s6,eea <bigdir+0x4c>
+     f2c:	00005517          	auipc	a0,0x5
+     f30:	89c50513          	addi	a0,a0,-1892 # 57c8 <malloc+0x87c>
+     f34:	39d030ef          	jal	4ad0 <unlink>
+     f38:	07800913          	li	s2,120
+     f3c:	1f400a13          	li	s4,500
+     f40:	fb240823          	sb	s2,-80(s0)
+     f44:	41f4d71b          	sraiw	a4,s1,0x1f
+     f48:	01a7571b          	srliw	a4,a4,0x1a
+     f4c:	009707bb          	addw	a5,a4,s1
+     f50:	4067d69b          	sraiw	a3,a5,0x6
+     f54:	0306869b          	addiw	a3,a3,48
+     f58:	fad408a3          	sb	a3,-79(s0)
+     f5c:	03f7f793          	andi	a5,a5,63
+     f60:	9f99                	subw	a5,a5,a4
+     f62:	0307879b          	addiw	a5,a5,48
+     f66:	faf40923          	sb	a5,-78(s0)
+     f6a:	fa0409a3          	sb	zero,-77(s0)
+     f6e:	fb040513          	addi	a0,s0,-80
+     f72:	35f030ef          	jal	4ad0 <unlink>
+     f76:	e529                	bnez	a0,fc0 <bigdir+0x122>
+     f78:	2485                	addiw	s1,s1,1
+     f7a:	fd4493e3          	bne	s1,s4,f40 <bigdir+0xa2>
+     f7e:	60a6                	ld	ra,72(sp)
+     f80:	6406                	ld	s0,64(sp)
+     f82:	74e2                	ld	s1,56(sp)
+     f84:	7942                	ld	s2,48(sp)
+     f86:	79a2                	ld	s3,40(sp)
+     f88:	7a02                	ld	s4,32(sp)
+     f8a:	6ae2                	ld	s5,24(sp)
+     f8c:	6b42                	ld	s6,16(sp)
+     f8e:	6161                	addi	sp,sp,80
+     f90:	8082                	ret
+     f92:	85ce                	mv	a1,s3
+     f94:	00005517          	auipc	a0,0x5
+     f98:	83c50513          	addi	a0,a0,-1988 # 57d0 <malloc+0x884>
+     f9c:	6fd030ef          	jal	4e98 <printf>
+     fa0:	4505                	li	a0,1
+     fa2:	2df030ef          	jal	4a80 <exit>
+     fa6:	fb040693          	addi	a3,s0,-80
+     faa:	864a                	mv	a2,s2
+     fac:	85ce                	mv	a1,s3
+     fae:	00005517          	auipc	a0,0x5
+     fb2:	84250513          	addi	a0,a0,-1982 # 57f0 <malloc+0x8a4>
+     fb6:	6e3030ef          	jal	4e98 <printf>
+     fba:	4505                	li	a0,1
+     fbc:	2c5030ef          	jal	4a80 <exit>
+     fc0:	85ce                	mv	a1,s3
+     fc2:	00005517          	auipc	a0,0x5
+     fc6:	85650513          	addi	a0,a0,-1962 # 5818 <malloc+0x8cc>
+     fca:	6cf030ef          	jal	4e98 <printf>
+     fce:	4505                	li	a0,1
+     fd0:	2b1030ef          	jal	4a80 <exit>
+
+0000000000000fd4 <pgbug>:
+     fd4:	7179                	addi	sp,sp,-48
+     fd6:	f406                	sd	ra,40(sp)
+     fd8:	f022                	sd	s0,32(sp)
+     fda:	ec26                	sd	s1,24(sp)
+     fdc:	1800                	addi	s0,sp,48
+     fde:	fc043c23          	sd	zero,-40(s0)
+     fe2:	00008497          	auipc	s1,0x8
+     fe6:	01e48493          	addi	s1,s1,30 # 9000 <big>
+     fea:	fd840593          	addi	a1,s0,-40
+     fee:	6088                	ld	a0,0(s1)
+     ff0:	2c9030ef          	jal	4ab8 <exec>
+     ff4:	6088                	ld	a0,0(s1)
+     ff6:	29b030ef          	jal	4a90 <pipe>
+     ffa:	4501                	li	a0,0
+     ffc:	285030ef          	jal	4a80 <exit>
+
+0000000000001000 <badarg>:
+    1000:	7139                	addi	sp,sp,-64
+    1002:	fc06                	sd	ra,56(sp)
+    1004:	f822                	sd	s0,48(sp)
+    1006:	f426                	sd	s1,40(sp)
+    1008:	f04a                	sd	s2,32(sp)
+    100a:	ec4e                	sd	s3,24(sp)
+    100c:	0080                	addi	s0,sp,64
+    100e:	64b1                	lui	s1,0xc
+    1010:	35048493          	addi	s1,s1,848 # c350 <uninit+0x1de8>
+    1014:	597d                	li	s2,-1
+    1016:	02095913          	srli	s2,s2,0x20
+    101a:	00004997          	auipc	s3,0x4
+    101e:	06e98993          	addi	s3,s3,110 # 5088 <malloc+0x13c>
+    1022:	fd243023          	sd	s2,-64(s0)
+    1026:	fc043423          	sd	zero,-56(s0)
+    102a:	fc040593          	addi	a1,s0,-64
+    102e:	854e                	mv	a0,s3
+    1030:	289030ef          	jal	4ab8 <exec>
+    1034:	34fd                	addiw	s1,s1,-1
+    1036:	f4f5                	bnez	s1,1022 <badarg+0x22>
+    1038:	4501                	li	a0,0
+    103a:	247030ef          	jal	4a80 <exit>
+
+000000000000103e <copyinstr2>:
+    103e:	7155                	addi	sp,sp,-208
+    1040:	e586                	sd	ra,200(sp)
+    1042:	e1a2                	sd	s0,192(sp)
+    1044:	0980                	addi	s0,sp,208
+    1046:	f6840793          	addi	a5,s0,-152
+    104a:	fe840693          	addi	a3,s0,-24
+    104e:	07800713          	li	a4,120
+    1052:	00e78023          	sb	a4,0(a5)
+    1056:	0785                	addi	a5,a5,1
+    1058:	fed79de3          	bne	a5,a3,1052 <copyinstr2+0x14>
+    105c:	fe040423          	sb	zero,-24(s0)
+    1060:	f6840513          	addi	a0,s0,-152
+    1064:	26d030ef          	jal	4ad0 <unlink>
+    1068:	57fd                	li	a5,-1
+    106a:	0cf51263          	bne	a0,a5,112e <copyinstr2+0xf0>
+    106e:	20100593          	li	a1,513
+    1072:	f6840513          	addi	a0,s0,-152
+    1076:	24b030ef          	jal	4ac0 <open>
+    107a:	57fd                	li	a5,-1
+    107c:	0cf51563          	bne	a0,a5,1146 <copyinstr2+0x108>
+    1080:	f6840593          	addi	a1,s0,-152
+    1084:	852e                	mv	a0,a1
+    1086:	25b030ef          	jal	4ae0 <link>
+    108a:	57fd                	li	a5,-1
+    108c:	0cf51963          	bne	a0,a5,115e <copyinstr2+0x120>
+    1090:	00006797          	auipc	a5,0x6
+    1094:	8d878793          	addi	a5,a5,-1832 # 6968 <malloc+0x1a1c>
+    1098:	f4f43c23          	sd	a5,-168(s0)
+    109c:	f6043023          	sd	zero,-160(s0)
+    10a0:	f5840593          	addi	a1,s0,-168
+    10a4:	f6840513          	addi	a0,s0,-152
+    10a8:	211030ef          	jal	4ab8 <exec>
+    10ac:	57fd                	li	a5,-1
+    10ae:	0cf51563          	bne	a0,a5,1178 <copyinstr2+0x13a>
+    10b2:	1c7030ef          	jal	4a78 <fork>
+    10b6:	0c054d63          	bltz	a0,1190 <copyinstr2+0x152>
+    10ba:	0e051863          	bnez	a0,11aa <copyinstr2+0x16c>
+    10be:	00008797          	auipc	a5,0x8
+    10c2:	4a278793          	addi	a5,a5,1186 # 9560 <big.0>
+    10c6:	00009697          	auipc	a3,0x9
+    10ca:	49a68693          	addi	a3,a3,1178 # a560 <big.0+0x1000>
+    10ce:	07800713          	li	a4,120
+    10d2:	00e78023          	sb	a4,0(a5)
+    10d6:	0785                	addi	a5,a5,1
+    10d8:	fed79de3          	bne	a5,a3,10d2 <copyinstr2+0x94>
+    10dc:	00009797          	auipc	a5,0x9
+    10e0:	48078223          	sb	zero,1156(a5) # a560 <big.0+0x1000>
+    10e4:	00006797          	auipc	a5,0x6
+    10e8:	30478793          	addi	a5,a5,772 # 73e8 <malloc+0x249c>
+    10ec:	6fb0                	ld	a2,88(a5)
+    10ee:	73b4                	ld	a3,96(a5)
+    10f0:	77b8                	ld	a4,104(a5)
+    10f2:	7bbc                	ld	a5,112(a5)
+    10f4:	f2c43823          	sd	a2,-208(s0)
+    10f8:	f2d43c23          	sd	a3,-200(s0)
+    10fc:	f4e43023          	sd	a4,-192(s0)
+    1100:	f4f43423          	sd	a5,-184(s0)
+    1104:	f3040593          	addi	a1,s0,-208
+    1108:	00004517          	auipc	a0,0x4
+    110c:	f8050513          	addi	a0,a0,-128 # 5088 <malloc+0x13c>
+    1110:	1a9030ef          	jal	4ab8 <exec>
+    1114:	57fd                	li	a5,-1
+    1116:	08f50663          	beq	a0,a5,11a2 <copyinstr2+0x164>
+    111a:	55fd                	li	a1,-1
+    111c:	00004517          	auipc	a0,0x4
+    1120:	7a450513          	addi	a0,a0,1956 # 58c0 <malloc+0x974>
+    1124:	575030ef          	jal	4e98 <printf>
+    1128:	4505                	li	a0,1
+    112a:	157030ef          	jal	4a80 <exit>
+    112e:	862a                	mv	a2,a0
+    1130:	f6840593          	addi	a1,s0,-152
+    1134:	00004517          	auipc	a0,0x4
+    1138:	70450513          	addi	a0,a0,1796 # 5838 <malloc+0x8ec>
+    113c:	55d030ef          	jal	4e98 <printf>
+    1140:	4505                	li	a0,1
+    1142:	13f030ef          	jal	4a80 <exit>
+    1146:	862a                	mv	a2,a0
+    1148:	f6840593          	addi	a1,s0,-152
+    114c:	00004517          	auipc	a0,0x4
+    1150:	70c50513          	addi	a0,a0,1804 # 5858 <malloc+0x90c>
+    1154:	545030ef          	jal	4e98 <printf>
+    1158:	4505                	li	a0,1
+    115a:	127030ef          	jal	4a80 <exit>
+    115e:	86aa                	mv	a3,a0
+    1160:	f6840613          	addi	a2,s0,-152
+    1164:	85b2                	mv	a1,a2
+    1166:	00004517          	auipc	a0,0x4
+    116a:	71250513          	addi	a0,a0,1810 # 5878 <malloc+0x92c>
+    116e:	52b030ef          	jal	4e98 <printf>
+    1172:	4505                	li	a0,1
+    1174:	10d030ef          	jal	4a80 <exit>
+    1178:	567d                	li	a2,-1
+    117a:	f6840593          	addi	a1,s0,-152
+    117e:	00004517          	auipc	a0,0x4
+    1182:	72250513          	addi	a0,a0,1826 # 58a0 <malloc+0x954>
+    1186:	513030ef          	jal	4e98 <printf>
+    118a:	4505                	li	a0,1
+    118c:	0f5030ef          	jal	4a80 <exit>
+    1190:	00006517          	auipc	a0,0x6
+    1194:	cf850513          	addi	a0,a0,-776 # 6e88 <malloc+0x1f3c>
+    1198:	501030ef          	jal	4e98 <printf>
+    119c:	4505                	li	a0,1
+    119e:	0e3030ef          	jal	4a80 <exit>
+    11a2:	2eb00513          	li	a0,747
+    11a6:	0db030ef          	jal	4a80 <exit>
+    11aa:	f4042a23          	sw	zero,-172(s0)
+    11ae:	f5440513          	addi	a0,s0,-172
+    11b2:	0d7030ef          	jal	4a88 <wait>
+    11b6:	f5442703          	lw	a4,-172(s0)
+    11ba:	2eb00793          	li	a5,747
+    11be:	00f71663          	bne	a4,a5,11ca <copyinstr2+0x18c>
+    11c2:	60ae                	ld	ra,200(sp)
+    11c4:	640e                	ld	s0,192(sp)
+    11c6:	6169                	addi	sp,sp,208
+    11c8:	8082                	ret
+    11ca:	00004517          	auipc	a0,0x4
+    11ce:	71e50513          	addi	a0,a0,1822 # 58e8 <malloc+0x99c>
+    11d2:	4c7030ef          	jal	4e98 <printf>
+    11d6:	4505                	li	a0,1
+    11d8:	0a9030ef          	jal	4a80 <exit>
+
+00000000000011dc <truncate3>:
+    11dc:	7159                	addi	sp,sp,-112
+    11de:	f486                	sd	ra,104(sp)
+    11e0:	f0a2                	sd	s0,96(sp)
+    11e2:	e8ca                	sd	s2,80(sp)
+    11e4:	1880                	addi	s0,sp,112
+    11e6:	892a                	mv	s2,a0
+    11e8:	60100593          	li	a1,1537
+    11ec:	00004517          	auipc	a0,0x4
+    11f0:	ef450513          	addi	a0,a0,-268 # 50e0 <malloc+0x194>
+    11f4:	0cd030ef          	jal	4ac0 <open>
+    11f8:	0b1030ef          	jal	4aa8 <close>
+    11fc:	07d030ef          	jal	4a78 <fork>
+    1200:	06054663          	bltz	a0,126c <truncate3+0x90>
+    1204:	e55d                	bnez	a0,12b2 <truncate3+0xd6>
+    1206:	eca6                	sd	s1,88(sp)
+    1208:	e4ce                	sd	s3,72(sp)
+    120a:	e0d2                	sd	s4,64(sp)
+    120c:	fc56                	sd	s5,56(sp)
+    120e:	06400993          	li	s3,100
+    1212:	00004a17          	auipc	s4,0x4
+    1216:	ecea0a13          	addi	s4,s4,-306 # 50e0 <malloc+0x194>
+    121a:	00004a97          	auipc	s5,0x4
+    121e:	72ea8a93          	addi	s5,s5,1838 # 5948 <malloc+0x9fc>
+    1222:	4585                	li	a1,1
+    1224:	8552                	mv	a0,s4
+    1226:	09b030ef          	jal	4ac0 <open>
+    122a:	84aa                	mv	s1,a0
+    122c:	04054e63          	bltz	a0,1288 <truncate3+0xac>
+    1230:	4629                	li	a2,10
+    1232:	85d6                	mv	a1,s5
+    1234:	06d030ef          	jal	4aa0 <write>
+    1238:	47a9                	li	a5,10
+    123a:	06f51163          	bne	a0,a5,129c <truncate3+0xc0>
+    123e:	8526                	mv	a0,s1
+    1240:	069030ef          	jal	4aa8 <close>
+    1244:	4581                	li	a1,0
+    1246:	8552                	mv	a0,s4
+    1248:	079030ef          	jal	4ac0 <open>
+    124c:	84aa                	mv	s1,a0
+    124e:	02000613          	li	a2,32
+    1252:	f9840593          	addi	a1,s0,-104
+    1256:	043030ef          	jal	4a98 <read>
+    125a:	8526                	mv	a0,s1
+    125c:	04d030ef          	jal	4aa8 <close>
+    1260:	39fd                	addiw	s3,s3,-1
+    1262:	fc0990e3          	bnez	s3,1222 <truncate3+0x46>
+    1266:	4501                	li	a0,0
+    1268:	019030ef          	jal	4a80 <exit>
+    126c:	eca6                	sd	s1,88(sp)
+    126e:	e4ce                	sd	s3,72(sp)
+    1270:	e0d2                	sd	s4,64(sp)
+    1272:	fc56                	sd	s5,56(sp)
+    1274:	85ca                	mv	a1,s2
+    1276:	00004517          	auipc	a0,0x4
+    127a:	6a250513          	addi	a0,a0,1698 # 5918 <malloc+0x9cc>
+    127e:	41b030ef          	jal	4e98 <printf>
+    1282:	4505                	li	a0,1
+    1284:	7fc030ef          	jal	4a80 <exit>
+    1288:	85ca                	mv	a1,s2
+    128a:	00004517          	auipc	a0,0x4
+    128e:	6a650513          	addi	a0,a0,1702 # 5930 <malloc+0x9e4>
+    1292:	407030ef          	jal	4e98 <printf>
+    1296:	4505                	li	a0,1
+    1298:	7e8030ef          	jal	4a80 <exit>
+    129c:	862a                	mv	a2,a0
+    129e:	85ca                	mv	a1,s2
+    12a0:	00004517          	auipc	a0,0x4
+    12a4:	6b850513          	addi	a0,a0,1720 # 5958 <malloc+0xa0c>
+    12a8:	3f1030ef          	jal	4e98 <printf>
+    12ac:	4505                	li	a0,1
+    12ae:	7d2030ef          	jal	4a80 <exit>
+    12b2:	eca6                	sd	s1,88(sp)
+    12b4:	e4ce                	sd	s3,72(sp)
+    12b6:	e0d2                	sd	s4,64(sp)
+    12b8:	fc56                	sd	s5,56(sp)
+    12ba:	09600993          	li	s3,150
+    12be:	00004a17          	auipc	s4,0x4
+    12c2:	e22a0a13          	addi	s4,s4,-478 # 50e0 <malloc+0x194>
+    12c6:	00004a97          	auipc	s5,0x4
+    12ca:	6b2a8a93          	addi	s5,s5,1714 # 5978 <malloc+0xa2c>
+    12ce:	60100593          	li	a1,1537
+    12d2:	8552                	mv	a0,s4
+    12d4:	7ec030ef          	jal	4ac0 <open>
+    12d8:	84aa                	mv	s1,a0
+    12da:	02054d63          	bltz	a0,1314 <truncate3+0x138>
+    12de:	460d                	li	a2,3
+    12e0:	85d6                	mv	a1,s5
+    12e2:	7be030ef          	jal	4aa0 <write>
+    12e6:	478d                	li	a5,3
+    12e8:	04f51063          	bne	a0,a5,1328 <truncate3+0x14c>
+    12ec:	8526                	mv	a0,s1
+    12ee:	7ba030ef          	jal	4aa8 <close>
+    12f2:	39fd                	addiw	s3,s3,-1
+    12f4:	fc099de3          	bnez	s3,12ce <truncate3+0xf2>
+    12f8:	fbc40513          	addi	a0,s0,-68
+    12fc:	78c030ef          	jal	4a88 <wait>
+    1300:	00004517          	auipc	a0,0x4
+    1304:	de050513          	addi	a0,a0,-544 # 50e0 <malloc+0x194>
+    1308:	7c8030ef          	jal	4ad0 <unlink>
+    130c:	fbc42503          	lw	a0,-68(s0)
+    1310:	770030ef          	jal	4a80 <exit>
+    1314:	85ca                	mv	a1,s2
+    1316:	00004517          	auipc	a0,0x4
+    131a:	61a50513          	addi	a0,a0,1562 # 5930 <malloc+0x9e4>
+    131e:	37b030ef          	jal	4e98 <printf>
+    1322:	4505                	li	a0,1
+    1324:	75c030ef          	jal	4a80 <exit>
+    1328:	862a                	mv	a2,a0
+    132a:	85ca                	mv	a1,s2
+    132c:	00004517          	auipc	a0,0x4
+    1330:	65450513          	addi	a0,a0,1620 # 5980 <malloc+0xa34>
+    1334:	365030ef          	jal	4e98 <printf>
+    1338:	4505                	li	a0,1
+    133a:	746030ef          	jal	4a80 <exit>
+
+000000000000133e <exectest>:
+    133e:	715d                	addi	sp,sp,-80
+    1340:	e486                	sd	ra,72(sp)
+    1342:	e0a2                	sd	s0,64(sp)
+    1344:	f84a                	sd	s2,48(sp)
+    1346:	0880                	addi	s0,sp,80
+    1348:	892a                	mv	s2,a0
+    134a:	00004797          	auipc	a5,0x4
+    134e:	d3e78793          	addi	a5,a5,-706 # 5088 <malloc+0x13c>
+    1352:	fcf43023          	sd	a5,-64(s0)
+    1356:	00004797          	auipc	a5,0x4
+    135a:	64a78793          	addi	a5,a5,1610 # 59a0 <malloc+0xa54>
+    135e:	fcf43423          	sd	a5,-56(s0)
+    1362:	fc043823          	sd	zero,-48(s0)
+    1366:	00004517          	auipc	a0,0x4
+    136a:	64250513          	addi	a0,a0,1602 # 59a8 <malloc+0xa5c>
+    136e:	762030ef          	jal	4ad0 <unlink>
+    1372:	706030ef          	jal	4a78 <fork>
+    1376:	02054f63          	bltz	a0,13b4 <exectest+0x76>
+    137a:	fc26                	sd	s1,56(sp)
+    137c:	84aa                	mv	s1,a0
+    137e:	e935                	bnez	a0,13f2 <exectest+0xb4>
+    1380:	4505                	li	a0,1
+    1382:	726030ef          	jal	4aa8 <close>
+    1386:	20100593          	li	a1,513
+    138a:	00004517          	auipc	a0,0x4
+    138e:	61e50513          	addi	a0,a0,1566 # 59a8 <malloc+0xa5c>
+    1392:	72e030ef          	jal	4ac0 <open>
+    1396:	02054a63          	bltz	a0,13ca <exectest+0x8c>
+    139a:	4785                	li	a5,1
+    139c:	04f50163          	beq	a0,a5,13de <exectest+0xa0>
+    13a0:	85ca                	mv	a1,s2
+    13a2:	00004517          	auipc	a0,0x4
+    13a6:	62650513          	addi	a0,a0,1574 # 59c8 <malloc+0xa7c>
+    13aa:	2ef030ef          	jal	4e98 <printf>
+    13ae:	4505                	li	a0,1
+    13b0:	6d0030ef          	jal	4a80 <exit>
+    13b4:	fc26                	sd	s1,56(sp)
+    13b6:	85ca                	mv	a1,s2
+    13b8:	00004517          	auipc	a0,0x4
+    13bc:	56050513          	addi	a0,a0,1376 # 5918 <malloc+0x9cc>
+    13c0:	2d9030ef          	jal	4e98 <printf>
+    13c4:	4505                	li	a0,1
+    13c6:	6ba030ef          	jal	4a80 <exit>
+    13ca:	85ca                	mv	a1,s2
+    13cc:	00004517          	auipc	a0,0x4
+    13d0:	5e450513          	addi	a0,a0,1508 # 59b0 <malloc+0xa64>
+    13d4:	2c5030ef          	jal	4e98 <printf>
+    13d8:	4505                	li	a0,1
+    13da:	6a6030ef          	jal	4a80 <exit>
+    13de:	fc040593          	addi	a1,s0,-64
+    13e2:	00004517          	auipc	a0,0x4
+    13e6:	ca650513          	addi	a0,a0,-858 # 5088 <malloc+0x13c>
+    13ea:	6ce030ef          	jal	4ab8 <exec>
+    13ee:	00054d63          	bltz	a0,1408 <exectest+0xca>
+    13f2:	fdc40513          	addi	a0,s0,-36
+    13f6:	692030ef          	jal	4a88 <wait>
+    13fa:	02951163          	bne	a0,s1,141c <exectest+0xde>
+    13fe:	fdc42503          	lw	a0,-36(s0)
+    1402:	c50d                	beqz	a0,142c <exectest+0xee>
+    1404:	67c030ef          	jal	4a80 <exit>
+    1408:	85ca                	mv	a1,s2
+    140a:	00004517          	auipc	a0,0x4
+    140e:	5ce50513          	addi	a0,a0,1486 # 59d8 <malloc+0xa8c>
+    1412:	287030ef          	jal	4e98 <printf>
+    1416:	4505                	li	a0,1
+    1418:	668030ef          	jal	4a80 <exit>
+    141c:	85ca                	mv	a1,s2
+    141e:	00004517          	auipc	a0,0x4
+    1422:	5d250513          	addi	a0,a0,1490 # 59f0 <malloc+0xaa4>
+    1426:	273030ef          	jal	4e98 <printf>
+    142a:	bfd1                	j	13fe <exectest+0xc0>
+    142c:	4581                	li	a1,0
+    142e:	00004517          	auipc	a0,0x4
+    1432:	57a50513          	addi	a0,a0,1402 # 59a8 <malloc+0xa5c>
+    1436:	68a030ef          	jal	4ac0 <open>
+    143a:	02054463          	bltz	a0,1462 <exectest+0x124>
+    143e:	4609                	li	a2,2
+    1440:	fb840593          	addi	a1,s0,-72
+    1444:	654030ef          	jal	4a98 <read>
+    1448:	4789                	li	a5,2
+    144a:	02f50663          	beq	a0,a5,1476 <exectest+0x138>
+    144e:	85ca                	mv	a1,s2
+    1450:	00004517          	auipc	a0,0x4
+    1454:	00850513          	addi	a0,a0,8 # 5458 <malloc+0x50c>
+    1458:	241030ef          	jal	4e98 <printf>
+    145c:	4505                	li	a0,1
+    145e:	622030ef          	jal	4a80 <exit>
+    1462:	85ca                	mv	a1,s2
+    1464:	00004517          	auipc	a0,0x4
+    1468:	4cc50513          	addi	a0,a0,1228 # 5930 <malloc+0x9e4>
+    146c:	22d030ef          	jal	4e98 <printf>
+    1470:	4505                	li	a0,1
+    1472:	60e030ef          	jal	4a80 <exit>
+    1476:	00004517          	auipc	a0,0x4
+    147a:	53250513          	addi	a0,a0,1330 # 59a8 <malloc+0xa5c>
+    147e:	652030ef          	jal	4ad0 <unlink>
+    1482:	fb844703          	lbu	a4,-72(s0)
+    1486:	04f00793          	li	a5,79
+    148a:	00f71863          	bne	a4,a5,149a <exectest+0x15c>
+    148e:	fb944703          	lbu	a4,-71(s0)
+    1492:	04b00793          	li	a5,75
+    1496:	00f70c63          	beq	a4,a5,14ae <exectest+0x170>
+    149a:	85ca                	mv	a1,s2
+    149c:	00004517          	auipc	a0,0x4
+    14a0:	56c50513          	addi	a0,a0,1388 # 5a08 <malloc+0xabc>
+    14a4:	1f5030ef          	jal	4e98 <printf>
+    14a8:	4505                	li	a0,1
+    14aa:	5d6030ef          	jal	4a80 <exit>
+    14ae:	4501                	li	a0,0
+    14b0:	5d0030ef          	jal	4a80 <exit>
+
+00000000000014b4 <pipe1>:
+    14b4:	711d                	addi	sp,sp,-96
+    14b6:	ec86                	sd	ra,88(sp)
+    14b8:	e8a2                	sd	s0,80(sp)
+    14ba:	fc4e                	sd	s3,56(sp)
+    14bc:	1080                	addi	s0,sp,96
+    14be:	89aa                	mv	s3,a0
+    14c0:	fa840513          	addi	a0,s0,-88
+    14c4:	5cc030ef          	jal	4a90 <pipe>
+    14c8:	e92d                	bnez	a0,153a <pipe1+0x86>
+    14ca:	e4a6                	sd	s1,72(sp)
+    14cc:	f852                	sd	s4,48(sp)
+    14ce:	84aa                	mv	s1,a0
+    14d0:	5a8030ef          	jal	4a78 <fork>
+    14d4:	8a2a                	mv	s4,a0
+    14d6:	c151                	beqz	a0,155a <pipe1+0xa6>
+    14d8:	14a05e63          	blez	a0,1634 <pipe1+0x180>
+    14dc:	e0ca                	sd	s2,64(sp)
+    14de:	f456                	sd	s5,40(sp)
+    14e0:	fac42503          	lw	a0,-84(s0)
+    14e4:	5c4030ef          	jal	4aa8 <close>
+    14e8:	8a26                	mv	s4,s1
+    14ea:	4905                	li	s2,1
+    14ec:	0000ba97          	auipc	s5,0xb
+    14f0:	78ca8a93          	addi	s5,s5,1932 # cc78 <buf>
+    14f4:	864a                	mv	a2,s2
+    14f6:	85d6                	mv	a1,s5
+    14f8:	fa842503          	lw	a0,-88(s0)
+    14fc:	59c030ef          	jal	4a98 <read>
+    1500:	0ea05a63          	blez	a0,15f4 <pipe1+0x140>
+    1504:	0000b717          	auipc	a4,0xb
+    1508:	77470713          	addi	a4,a4,1908 # cc78 <buf>
+    150c:	00a4863b          	addw	a2,s1,a0
+    1510:	00074683          	lbu	a3,0(a4)
+    1514:	0ff4f793          	zext.b	a5,s1
+    1518:	2485                	addiw	s1,s1,1
+    151a:	0af69d63          	bne	a3,a5,15d4 <pipe1+0x120>
+    151e:	0705                	addi	a4,a4,1
+    1520:	fec498e3          	bne	s1,a2,1510 <pipe1+0x5c>
+    1524:	00aa0a3b          	addw	s4,s4,a0
+    1528:	0019179b          	slliw	a5,s2,0x1
+    152c:	0007891b          	sext.w	s2,a5
+    1530:	670d                	lui	a4,0x3
+    1532:	fd2771e3          	bgeu	a4,s2,14f4 <pipe1+0x40>
+    1536:	690d                	lui	s2,0x3
+    1538:	bf75                	j	14f4 <pipe1+0x40>
+    153a:	e4a6                	sd	s1,72(sp)
+    153c:	e0ca                	sd	s2,64(sp)
+    153e:	f852                	sd	s4,48(sp)
+    1540:	f456                	sd	s5,40(sp)
+    1542:	f05a                	sd	s6,32(sp)
+    1544:	ec5e                	sd	s7,24(sp)
+    1546:	85ce                	mv	a1,s3
+    1548:	00004517          	auipc	a0,0x4
+    154c:	4d850513          	addi	a0,a0,1240 # 5a20 <malloc+0xad4>
+    1550:	149030ef          	jal	4e98 <printf>
+    1554:	4505                	li	a0,1
+    1556:	52a030ef          	jal	4a80 <exit>
+    155a:	e0ca                	sd	s2,64(sp)
+    155c:	f456                	sd	s5,40(sp)
+    155e:	f05a                	sd	s6,32(sp)
+    1560:	ec5e                	sd	s7,24(sp)
+    1562:	fa842503          	lw	a0,-88(s0)
+    1566:	542030ef          	jal	4aa8 <close>
+    156a:	0000bb17          	auipc	s6,0xb
+    156e:	70eb0b13          	addi	s6,s6,1806 # cc78 <buf>
+    1572:	416004bb          	negw	s1,s6
+    1576:	0ff4f493          	zext.b	s1,s1
+    157a:	409b0913          	addi	s2,s6,1033
+    157e:	8bda                	mv	s7,s6
+    1580:	6a85                	lui	s5,0x1
+    1582:	42da8a93          	addi	s5,s5,1069 # 142d <exectest+0xef>
+    1586:	87da                	mv	a5,s6
+    1588:	0097873b          	addw	a4,a5,s1
+    158c:	00e78023          	sb	a4,0(a5)
+    1590:	0785                	addi	a5,a5,1
+    1592:	ff279be3          	bne	a5,s2,1588 <pipe1+0xd4>
+    1596:	409a0a1b          	addiw	s4,s4,1033
+    159a:	40900613          	li	a2,1033
+    159e:	85de                	mv	a1,s7
+    15a0:	fac42503          	lw	a0,-84(s0)
+    15a4:	4fc030ef          	jal	4aa0 <write>
+    15a8:	40900793          	li	a5,1033
+    15ac:	00f51a63          	bne	a0,a5,15c0 <pipe1+0x10c>
+    15b0:	24a5                	addiw	s1,s1,9
+    15b2:	0ff4f493          	zext.b	s1,s1
+    15b6:	fd5a18e3          	bne	s4,s5,1586 <pipe1+0xd2>
+    15ba:	4501                	li	a0,0
+    15bc:	4c4030ef          	jal	4a80 <exit>
+    15c0:	85ce                	mv	a1,s3
+    15c2:	00004517          	auipc	a0,0x4
+    15c6:	47650513          	addi	a0,a0,1142 # 5a38 <malloc+0xaec>
+    15ca:	0cf030ef          	jal	4e98 <printf>
+    15ce:	4505                	li	a0,1
+    15d0:	4b0030ef          	jal	4a80 <exit>
+    15d4:	85ce                	mv	a1,s3
+    15d6:	00004517          	auipc	a0,0x4
+    15da:	47a50513          	addi	a0,a0,1146 # 5a50 <malloc+0xb04>
+    15de:	0bb030ef          	jal	4e98 <printf>
+    15e2:	64a6                	ld	s1,72(sp)
+    15e4:	6906                	ld	s2,64(sp)
+    15e6:	7a42                	ld	s4,48(sp)
+    15e8:	7aa2                	ld	s5,40(sp)
+    15ea:	60e6                	ld	ra,88(sp)
+    15ec:	6446                	ld	s0,80(sp)
+    15ee:	79e2                	ld	s3,56(sp)
+    15f0:	6125                	addi	sp,sp,96
+    15f2:	8082                	ret
+    15f4:	6785                	lui	a5,0x1
+    15f6:	42d78793          	addi	a5,a5,1069 # 142d <exectest+0xef>
+    15fa:	00fa0f63          	beq	s4,a5,1618 <pipe1+0x164>
+    15fe:	f05a                	sd	s6,32(sp)
+    1600:	ec5e                	sd	s7,24(sp)
+    1602:	8652                	mv	a2,s4
+    1604:	85ce                	mv	a1,s3
+    1606:	00004517          	auipc	a0,0x4
+    160a:	46250513          	addi	a0,a0,1122 # 5a68 <malloc+0xb1c>
+    160e:	08b030ef          	jal	4e98 <printf>
+    1612:	4505                	li	a0,1
+    1614:	46c030ef          	jal	4a80 <exit>
+    1618:	f05a                	sd	s6,32(sp)
+    161a:	ec5e                	sd	s7,24(sp)
+    161c:	fa842503          	lw	a0,-88(s0)
+    1620:	488030ef          	jal	4aa8 <close>
+    1624:	fa440513          	addi	a0,s0,-92
+    1628:	460030ef          	jal	4a88 <wait>
+    162c:	fa442503          	lw	a0,-92(s0)
+    1630:	450030ef          	jal	4a80 <exit>
+    1634:	e0ca                	sd	s2,64(sp)
+    1636:	f456                	sd	s5,40(sp)
+    1638:	f05a                	sd	s6,32(sp)
+    163a:	ec5e                	sd	s7,24(sp)
+    163c:	85ce                	mv	a1,s3
+    163e:	00004517          	auipc	a0,0x4
+    1642:	44a50513          	addi	a0,a0,1098 # 5a88 <malloc+0xb3c>
+    1646:	053030ef          	jal	4e98 <printf>
+    164a:	4505                	li	a0,1
+    164c:	434030ef          	jal	4a80 <exit>
+
+0000000000001650 <exitwait>:
+    1650:	7139                	addi	sp,sp,-64
+    1652:	fc06                	sd	ra,56(sp)
+    1654:	f822                	sd	s0,48(sp)
+    1656:	f426                	sd	s1,40(sp)
+    1658:	f04a                	sd	s2,32(sp)
+    165a:	ec4e                	sd	s3,24(sp)
+    165c:	e852                	sd	s4,16(sp)
+    165e:	0080                	addi	s0,sp,64
+    1660:	8a2a                	mv	s4,a0
+    1662:	4901                	li	s2,0
+    1664:	06400993          	li	s3,100
+    1668:	410030ef          	jal	4a78 <fork>
+    166c:	84aa                	mv	s1,a0
+    166e:	02054863          	bltz	a0,169e <exitwait+0x4e>
+    1672:	c525                	beqz	a0,16da <exitwait+0x8a>
+    1674:	fcc40513          	addi	a0,s0,-52
+    1678:	410030ef          	jal	4a88 <wait>
+    167c:	02951b63          	bne	a0,s1,16b2 <exitwait+0x62>
+    1680:	fcc42783          	lw	a5,-52(s0)
+    1684:	05279163          	bne	a5,s2,16c6 <exitwait+0x76>
+    1688:	2905                	addiw	s2,s2,1 # 3001 <subdir+0x425>
+    168a:	fd391fe3          	bne	s2,s3,1668 <exitwait+0x18>
+    168e:	70e2                	ld	ra,56(sp)
+    1690:	7442                	ld	s0,48(sp)
+    1692:	74a2                	ld	s1,40(sp)
+    1694:	7902                	ld	s2,32(sp)
+    1696:	69e2                	ld	s3,24(sp)
+    1698:	6a42                	ld	s4,16(sp)
+    169a:	6121                	addi	sp,sp,64
+    169c:	8082                	ret
+    169e:	85d2                	mv	a1,s4
+    16a0:	00004517          	auipc	a0,0x4
+    16a4:	27850513          	addi	a0,a0,632 # 5918 <malloc+0x9cc>
+    16a8:	7f0030ef          	jal	4e98 <printf>
+    16ac:	4505                	li	a0,1
+    16ae:	3d2030ef          	jal	4a80 <exit>
+    16b2:	85d2                	mv	a1,s4
+    16b4:	00004517          	auipc	a0,0x4
+    16b8:	3ec50513          	addi	a0,a0,1004 # 5aa0 <malloc+0xb54>
+    16bc:	7dc030ef          	jal	4e98 <printf>
+    16c0:	4505                	li	a0,1
+    16c2:	3be030ef          	jal	4a80 <exit>
+    16c6:	85d2                	mv	a1,s4
+    16c8:	00004517          	auipc	a0,0x4
+    16cc:	3f050513          	addi	a0,a0,1008 # 5ab8 <malloc+0xb6c>
+    16d0:	7c8030ef          	jal	4e98 <printf>
+    16d4:	4505                	li	a0,1
+    16d6:	3aa030ef          	jal	4a80 <exit>
+    16da:	854a                	mv	a0,s2
+    16dc:	3a4030ef          	jal	4a80 <exit>
+
+00000000000016e0 <twochildren>:
+    16e0:	1101                	addi	sp,sp,-32
+    16e2:	ec06                	sd	ra,24(sp)
+    16e4:	e822                	sd	s0,16(sp)
+    16e6:	e426                	sd	s1,8(sp)
+    16e8:	e04a                	sd	s2,0(sp)
+    16ea:	1000                	addi	s0,sp,32
+    16ec:	892a                	mv	s2,a0
+    16ee:	3e800493          	li	s1,1000
+    16f2:	386030ef          	jal	4a78 <fork>
+    16f6:	02054663          	bltz	a0,1722 <twochildren+0x42>
+    16fa:	cd15                	beqz	a0,1736 <twochildren+0x56>
+    16fc:	37c030ef          	jal	4a78 <fork>
+    1700:	02054d63          	bltz	a0,173a <twochildren+0x5a>
+    1704:	c529                	beqz	a0,174e <twochildren+0x6e>
+    1706:	4501                	li	a0,0
+    1708:	380030ef          	jal	4a88 <wait>
+    170c:	4501                	li	a0,0
+    170e:	37a030ef          	jal	4a88 <wait>
+    1712:	34fd                	addiw	s1,s1,-1
+    1714:	fcf9                	bnez	s1,16f2 <twochildren+0x12>
+    1716:	60e2                	ld	ra,24(sp)
+    1718:	6442                	ld	s0,16(sp)
+    171a:	64a2                	ld	s1,8(sp)
+    171c:	6902                	ld	s2,0(sp)
+    171e:	6105                	addi	sp,sp,32
+    1720:	8082                	ret
+    1722:	85ca                	mv	a1,s2
+    1724:	00004517          	auipc	a0,0x4
+    1728:	1f450513          	addi	a0,a0,500 # 5918 <malloc+0x9cc>
+    172c:	76c030ef          	jal	4e98 <printf>
+    1730:	4505                	li	a0,1
+    1732:	34e030ef          	jal	4a80 <exit>
+    1736:	34a030ef          	jal	4a80 <exit>
+    173a:	85ca                	mv	a1,s2
+    173c:	00004517          	auipc	a0,0x4
+    1740:	1dc50513          	addi	a0,a0,476 # 5918 <malloc+0x9cc>
+    1744:	754030ef          	jal	4e98 <printf>
+    1748:	4505                	li	a0,1
+    174a:	336030ef          	jal	4a80 <exit>
+    174e:	332030ef          	jal	4a80 <exit>
+
+0000000000001752 <forkfork>:
+    1752:	7179                	addi	sp,sp,-48
+    1754:	f406                	sd	ra,40(sp)
+    1756:	f022                	sd	s0,32(sp)
+    1758:	ec26                	sd	s1,24(sp)
+    175a:	1800                	addi	s0,sp,48
+    175c:	84aa                	mv	s1,a0
+    175e:	31a030ef          	jal	4a78 <fork>
+    1762:	02054b63          	bltz	a0,1798 <forkfork+0x46>
+    1766:	c139                	beqz	a0,17ac <forkfork+0x5a>
+    1768:	310030ef          	jal	4a78 <fork>
+    176c:	02054663          	bltz	a0,1798 <forkfork+0x46>
+    1770:	cd15                	beqz	a0,17ac <forkfork+0x5a>
+    1772:	fdc40513          	addi	a0,s0,-36
+    1776:	312030ef          	jal	4a88 <wait>
+    177a:	fdc42783          	lw	a5,-36(s0)
+    177e:	ebb9                	bnez	a5,17d4 <forkfork+0x82>
+    1780:	fdc40513          	addi	a0,s0,-36
+    1784:	304030ef          	jal	4a88 <wait>
+    1788:	fdc42783          	lw	a5,-36(s0)
+    178c:	e7a1                	bnez	a5,17d4 <forkfork+0x82>
+    178e:	70a2                	ld	ra,40(sp)
+    1790:	7402                	ld	s0,32(sp)
+    1792:	64e2                	ld	s1,24(sp)
+    1794:	6145                	addi	sp,sp,48
+    1796:	8082                	ret
+    1798:	85a6                	mv	a1,s1
+    179a:	00004517          	auipc	a0,0x4
+    179e:	33e50513          	addi	a0,a0,830 # 5ad8 <malloc+0xb8c>
+    17a2:	6f6030ef          	jal	4e98 <printf>
+    17a6:	4505                	li	a0,1
+    17a8:	2d8030ef          	jal	4a80 <exit>
+    17ac:	0c800493          	li	s1,200
+    17b0:	2c8030ef          	jal	4a78 <fork>
+    17b4:	00054b63          	bltz	a0,17ca <forkfork+0x78>
+    17b8:	cd01                	beqz	a0,17d0 <forkfork+0x7e>
+    17ba:	4501                	li	a0,0
+    17bc:	2cc030ef          	jal	4a88 <wait>
+    17c0:	34fd                	addiw	s1,s1,-1
+    17c2:	f4fd                	bnez	s1,17b0 <forkfork+0x5e>
+    17c4:	4501                	li	a0,0
+    17c6:	2ba030ef          	jal	4a80 <exit>
+    17ca:	4505                	li	a0,1
+    17cc:	2b4030ef          	jal	4a80 <exit>
+    17d0:	2b0030ef          	jal	4a80 <exit>
+    17d4:	85a6                	mv	a1,s1
+    17d6:	00004517          	auipc	a0,0x4
+    17da:	31250513          	addi	a0,a0,786 # 5ae8 <malloc+0xb9c>
+    17de:	6ba030ef          	jal	4e98 <printf>
+    17e2:	4505                	li	a0,1
+    17e4:	29c030ef          	jal	4a80 <exit>
+
+00000000000017e8 <reparent2>:
+    17e8:	1101                	addi	sp,sp,-32
+    17ea:	ec06                	sd	ra,24(sp)
+    17ec:	e822                	sd	s0,16(sp)
+    17ee:	e426                	sd	s1,8(sp)
+    17f0:	1000                	addi	s0,sp,32
+    17f2:	32000493          	li	s1,800
+    17f6:	282030ef          	jal	4a78 <fork>
+    17fa:	00054b63          	bltz	a0,1810 <reparent2+0x28>
+    17fe:	c115                	beqz	a0,1822 <reparent2+0x3a>
+    1800:	4501                	li	a0,0
+    1802:	286030ef          	jal	4a88 <wait>
+    1806:	34fd                	addiw	s1,s1,-1
+    1808:	f4fd                	bnez	s1,17f6 <reparent2+0xe>
+    180a:	4501                	li	a0,0
+    180c:	274030ef          	jal	4a80 <exit>
+    1810:	00005517          	auipc	a0,0x5
+    1814:	67850513          	addi	a0,a0,1656 # 6e88 <malloc+0x1f3c>
+    1818:	680030ef          	jal	4e98 <printf>
+    181c:	4505                	li	a0,1
+    181e:	262030ef          	jal	4a80 <exit>
+    1822:	256030ef          	jal	4a78 <fork>
+    1826:	252030ef          	jal	4a78 <fork>
+    182a:	4501                	li	a0,0
+    182c:	254030ef          	jal	4a80 <exit>
+
+0000000000001830 <createdelete>:
+    1830:	7175                	addi	sp,sp,-144
+    1832:	e506                	sd	ra,136(sp)
+    1834:	e122                	sd	s0,128(sp)
+    1836:	fca6                	sd	s1,120(sp)
+    1838:	f8ca                	sd	s2,112(sp)
+    183a:	f4ce                	sd	s3,104(sp)
+    183c:	f0d2                	sd	s4,96(sp)
+    183e:	ecd6                	sd	s5,88(sp)
+    1840:	e8da                	sd	s6,80(sp)
+    1842:	e4de                	sd	s7,72(sp)
+    1844:	e0e2                	sd	s8,64(sp)
+    1846:	fc66                	sd	s9,56(sp)
+    1848:	0900                	addi	s0,sp,144
+    184a:	8caa                	mv	s9,a0
+    184c:	4901                	li	s2,0
+    184e:	4991                	li	s3,4
+    1850:	228030ef          	jal	4a78 <fork>
+    1854:	84aa                	mv	s1,a0
+    1856:	02054d63          	bltz	a0,1890 <createdelete+0x60>
+    185a:	c529                	beqz	a0,18a4 <createdelete+0x74>
+    185c:	2905                	addiw	s2,s2,1
+    185e:	ff3919e3          	bne	s2,s3,1850 <createdelete+0x20>
+    1862:	4491                	li	s1,4
+    1864:	f7c40513          	addi	a0,s0,-132
+    1868:	220030ef          	jal	4a88 <wait>
+    186c:	f7c42903          	lw	s2,-132(s0)
+    1870:	0a091e63          	bnez	s2,192c <createdelete+0xfc>
+    1874:	34fd                	addiw	s1,s1,-1
+    1876:	f4fd                	bnez	s1,1864 <createdelete+0x34>
+    1878:	f8040123          	sb	zero,-126(s0)
+    187c:	03000993          	li	s3,48
+    1880:	5a7d                	li	s4,-1
+    1882:	07000c13          	li	s8,112
+    1886:	4b25                	li	s6,9
+    1888:	4ba1                	li	s7,8
+    188a:	07400a93          	li	s5,116
+    188e:	aa39                	j	19ac <createdelete+0x17c>
+    1890:	85e6                	mv	a1,s9
+    1892:	00004517          	auipc	a0,0x4
+    1896:	08650513          	addi	a0,a0,134 # 5918 <malloc+0x9cc>
+    189a:	5fe030ef          	jal	4e98 <printf>
+    189e:	4505                	li	a0,1
+    18a0:	1e0030ef          	jal	4a80 <exit>
+    18a4:	0709091b          	addiw	s2,s2,112
+    18a8:	f9240023          	sb	s2,-128(s0)
+    18ac:	f8040123          	sb	zero,-126(s0)
+    18b0:	4951                	li	s2,20
+    18b2:	a831                	j	18ce <createdelete+0x9e>
+    18b4:	85e6                	mv	a1,s9
+    18b6:	00004517          	auipc	a0,0x4
+    18ba:	0fa50513          	addi	a0,a0,250 # 59b0 <malloc+0xa64>
+    18be:	5da030ef          	jal	4e98 <printf>
+    18c2:	4505                	li	a0,1
+    18c4:	1bc030ef          	jal	4a80 <exit>
+    18c8:	2485                	addiw	s1,s1,1
+    18ca:	05248e63          	beq	s1,s2,1926 <createdelete+0xf6>
+    18ce:	0304879b          	addiw	a5,s1,48
+    18d2:	f8f400a3          	sb	a5,-127(s0)
+    18d6:	20200593          	li	a1,514
+    18da:	f8040513          	addi	a0,s0,-128
+    18de:	1e2030ef          	jal	4ac0 <open>
+    18e2:	fc0549e3          	bltz	a0,18b4 <createdelete+0x84>
+    18e6:	1c2030ef          	jal	4aa8 <close>
+    18ea:	10905063          	blez	s1,19ea <createdelete+0x1ba>
+    18ee:	0014f793          	andi	a5,s1,1
+    18f2:	fbf9                	bnez	a5,18c8 <createdelete+0x98>
+    18f4:	01f4d79b          	srliw	a5,s1,0x1f
+    18f8:	9fa5                	addw	a5,a5,s1
+    18fa:	4017d79b          	sraiw	a5,a5,0x1
+    18fe:	0307879b          	addiw	a5,a5,48
+    1902:	f8f400a3          	sb	a5,-127(s0)
+    1906:	f8040513          	addi	a0,s0,-128
+    190a:	1c6030ef          	jal	4ad0 <unlink>
+    190e:	fa055de3          	bgez	a0,18c8 <createdelete+0x98>
+    1912:	85e6                	mv	a1,s9
+    1914:	00004517          	auipc	a0,0x4
+    1918:	1f450513          	addi	a0,a0,500 # 5b08 <malloc+0xbbc>
+    191c:	57c030ef          	jal	4e98 <printf>
+    1920:	4505                	li	a0,1
+    1922:	15e030ef          	jal	4a80 <exit>
+    1926:	4501                	li	a0,0
+    1928:	158030ef          	jal	4a80 <exit>
+    192c:	4505                	li	a0,1
+    192e:	152030ef          	jal	4a80 <exit>
+    1932:	f8040613          	addi	a2,s0,-128
+    1936:	85e6                	mv	a1,s9
+    1938:	00004517          	auipc	a0,0x4
+    193c:	1e850513          	addi	a0,a0,488 # 5b20 <malloc+0xbd4>
+    1940:	558030ef          	jal	4e98 <printf>
+    1944:	4505                	li	a0,1
+    1946:	13a030ef          	jal	4a80 <exit>
+    194a:	034bfb63          	bgeu	s7,s4,1980 <createdelete+0x150>
+    194e:	02055663          	bgez	a0,197a <createdelete+0x14a>
+    1952:	2485                	addiw	s1,s1,1
+    1954:	0ff4f493          	zext.b	s1,s1
+    1958:	05548263          	beq	s1,s5,199c <createdelete+0x16c>
+    195c:	f8940023          	sb	s1,-128(s0)
+    1960:	f93400a3          	sb	s3,-127(s0)
+    1964:	4581                	li	a1,0
+    1966:	f8040513          	addi	a0,s0,-128
+    196a:	156030ef          	jal	4ac0 <open>
+    196e:	00090463          	beqz	s2,1976 <createdelete+0x146>
+    1972:	fd2b5ce3          	bge	s6,s2,194a <createdelete+0x11a>
+    1976:	fa054ee3          	bltz	a0,1932 <createdelete+0x102>
+    197a:	12e030ef          	jal	4aa8 <close>
+    197e:	bfd1                	j	1952 <createdelete+0x122>
+    1980:	fc0549e3          	bltz	a0,1952 <createdelete+0x122>
+    1984:	f8040613          	addi	a2,s0,-128
+    1988:	85e6                	mv	a1,s9
+    198a:	00004517          	auipc	a0,0x4
+    198e:	1be50513          	addi	a0,a0,446 # 5b48 <malloc+0xbfc>
+    1992:	506030ef          	jal	4e98 <printf>
+    1996:	4505                	li	a0,1
+    1998:	0e8030ef          	jal	4a80 <exit>
+    199c:	2905                	addiw	s2,s2,1
+    199e:	2a05                	addiw	s4,s4,1
+    19a0:	2985                	addiw	s3,s3,1
+    19a2:	0ff9f993          	zext.b	s3,s3
+    19a6:	47d1                	li	a5,20
+    19a8:	02f90863          	beq	s2,a5,19d8 <createdelete+0x1a8>
+    19ac:	84e2                	mv	s1,s8
+    19ae:	b77d                	j	195c <createdelete+0x12c>
+    19b0:	2905                	addiw	s2,s2,1
+    19b2:	0ff97913          	zext.b	s2,s2
+    19b6:	03490c63          	beq	s2,s4,19ee <createdelete+0x1be>
+    19ba:	84d6                	mv	s1,s5
+    19bc:	f8940023          	sb	s1,-128(s0)
+    19c0:	f92400a3          	sb	s2,-127(s0)
+    19c4:	f8040513          	addi	a0,s0,-128
+    19c8:	108030ef          	jal	4ad0 <unlink>
+    19cc:	2485                	addiw	s1,s1,1
+    19ce:	0ff4f493          	zext.b	s1,s1
+    19d2:	ff3495e3          	bne	s1,s3,19bc <createdelete+0x18c>
+    19d6:	bfe9                	j	19b0 <createdelete+0x180>
+    19d8:	03000913          	li	s2,48
+    19dc:	07000a93          	li	s5,112
+    19e0:	07400993          	li	s3,116
+    19e4:	04400a13          	li	s4,68
+    19e8:	bfc9                	j	19ba <createdelete+0x18a>
+    19ea:	2485                	addiw	s1,s1,1
+    19ec:	b5cd                	j	18ce <createdelete+0x9e>
+    19ee:	60aa                	ld	ra,136(sp)
+    19f0:	640a                	ld	s0,128(sp)
+    19f2:	74e6                	ld	s1,120(sp)
+    19f4:	7946                	ld	s2,112(sp)
+    19f6:	79a6                	ld	s3,104(sp)
+    19f8:	7a06                	ld	s4,96(sp)
+    19fa:	6ae6                	ld	s5,88(sp)
+    19fc:	6b46                	ld	s6,80(sp)
+    19fe:	6ba6                	ld	s7,72(sp)
+    1a00:	6c06                	ld	s8,64(sp)
+    1a02:	7ce2                	ld	s9,56(sp)
+    1a04:	6149                	addi	sp,sp,144
+    1a06:	8082                	ret
+
+0000000000001a08 <linkunlink>:
+    1a08:	711d                	addi	sp,sp,-96
+    1a0a:	ec86                	sd	ra,88(sp)
+    1a0c:	e8a2                	sd	s0,80(sp)
+    1a0e:	e4a6                	sd	s1,72(sp)
+    1a10:	e0ca                	sd	s2,64(sp)
+    1a12:	fc4e                	sd	s3,56(sp)
+    1a14:	f852                	sd	s4,48(sp)
+    1a16:	f456                	sd	s5,40(sp)
+    1a18:	f05a                	sd	s6,32(sp)
+    1a1a:	ec5e                	sd	s7,24(sp)
+    1a1c:	e862                	sd	s8,16(sp)
+    1a1e:	e466                	sd	s9,8(sp)
+    1a20:	1080                	addi	s0,sp,96
+    1a22:	84aa                	mv	s1,a0
+    1a24:	00003517          	auipc	a0,0x3
+    1a28:	6d450513          	addi	a0,a0,1748 # 50f8 <malloc+0x1ac>
+    1a2c:	0a4030ef          	jal	4ad0 <unlink>
+    1a30:	048030ef          	jal	4a78 <fork>
+    1a34:	02054b63          	bltz	a0,1a6a <linkunlink+0x62>
+    1a38:	8caa                	mv	s9,a0
+    1a3a:	06100913          	li	s2,97
+    1a3e:	c111                	beqz	a0,1a42 <linkunlink+0x3a>
+    1a40:	4905                	li	s2,1
+    1a42:	06400493          	li	s1,100
+    1a46:	41c65a37          	lui	s4,0x41c65
+    1a4a:	e6da0a1b          	addiw	s4,s4,-403 # 41c64e6d <base+0x41c551f5>
+    1a4e:	698d                	lui	s3,0x3
+    1a50:	0399899b          	addiw	s3,s3,57 # 3039 <subdir+0x45d>
+    1a54:	4a8d                	li	s5,3
+    1a56:	4b85                	li	s7,1
+    1a58:	00003b17          	auipc	s6,0x3
+    1a5c:	6a0b0b13          	addi	s6,s6,1696 # 50f8 <malloc+0x1ac>
+    1a60:	00004c17          	auipc	s8,0x4
+    1a64:	110c0c13          	addi	s8,s8,272 # 5b70 <malloc+0xc24>
+    1a68:	a025                	j	1a90 <linkunlink+0x88>
+    1a6a:	85a6                	mv	a1,s1
+    1a6c:	00004517          	auipc	a0,0x4
+    1a70:	eac50513          	addi	a0,a0,-340 # 5918 <malloc+0x9cc>
+    1a74:	424030ef          	jal	4e98 <printf>
+    1a78:	4505                	li	a0,1
+    1a7a:	006030ef          	jal	4a80 <exit>
+    1a7e:	20200593          	li	a1,514
+    1a82:	855a                	mv	a0,s6
+    1a84:	03c030ef          	jal	4ac0 <open>
+    1a88:	020030ef          	jal	4aa8 <close>
+    1a8c:	34fd                	addiw	s1,s1,-1
+    1a8e:	c495                	beqz	s1,1aba <linkunlink+0xb2>
+    1a90:	034907bb          	mulw	a5,s2,s4
+    1a94:	013787bb          	addw	a5,a5,s3
+    1a98:	0007891b          	sext.w	s2,a5
+    1a9c:	0357f7bb          	remuw	a5,a5,s5
+    1aa0:	2781                	sext.w	a5,a5
+    1aa2:	dff1                	beqz	a5,1a7e <linkunlink+0x76>
+    1aa4:	01778663          	beq	a5,s7,1ab0 <linkunlink+0xa8>
+    1aa8:	855a                	mv	a0,s6
+    1aaa:	026030ef          	jal	4ad0 <unlink>
+    1aae:	bff9                	j	1a8c <linkunlink+0x84>
+    1ab0:	85da                	mv	a1,s6
+    1ab2:	8562                	mv	a0,s8
+    1ab4:	02c030ef          	jal	4ae0 <link>
+    1ab8:	bfd1                	j	1a8c <linkunlink+0x84>
+    1aba:	020c8263          	beqz	s9,1ade <linkunlink+0xd6>
+    1abe:	4501                	li	a0,0
+    1ac0:	7c9020ef          	jal	4a88 <wait>
+    1ac4:	60e6                	ld	ra,88(sp)
+    1ac6:	6446                	ld	s0,80(sp)
+    1ac8:	64a6                	ld	s1,72(sp)
+    1aca:	6906                	ld	s2,64(sp)
+    1acc:	79e2                	ld	s3,56(sp)
+    1ace:	7a42                	ld	s4,48(sp)
+    1ad0:	7aa2                	ld	s5,40(sp)
+    1ad2:	7b02                	ld	s6,32(sp)
+    1ad4:	6be2                	ld	s7,24(sp)
+    1ad6:	6c42                	ld	s8,16(sp)
+    1ad8:	6ca2                	ld	s9,8(sp)
+    1ada:	6125                	addi	sp,sp,96
+    1adc:	8082                	ret
+    1ade:	4501                	li	a0,0
+    1ae0:	7a1020ef          	jal	4a80 <exit>
+
+0000000000001ae4 <forktest>:
+    1ae4:	7179                	addi	sp,sp,-48
+    1ae6:	f406                	sd	ra,40(sp)
+    1ae8:	f022                	sd	s0,32(sp)
+    1aea:	ec26                	sd	s1,24(sp)
+    1aec:	e84a                	sd	s2,16(sp)
+    1aee:	e44e                	sd	s3,8(sp)
+    1af0:	1800                	addi	s0,sp,48
+    1af2:	89aa                	mv	s3,a0
+    1af4:	4481                	li	s1,0
+    1af6:	3e800913          	li	s2,1000
+    1afa:	77f020ef          	jal	4a78 <fork>
+    1afe:	06054063          	bltz	a0,1b5e <forktest+0x7a>
+    1b02:	cd11                	beqz	a0,1b1e <forktest+0x3a>
+    1b04:	2485                	addiw	s1,s1,1
+    1b06:	ff249ae3          	bne	s1,s2,1afa <forktest+0x16>
+    1b0a:	85ce                	mv	a1,s3
+    1b0c:	00004517          	auipc	a0,0x4
+    1b10:	0b450513          	addi	a0,a0,180 # 5bc0 <malloc+0xc74>
+    1b14:	384030ef          	jal	4e98 <printf>
+    1b18:	4505                	li	a0,1
+    1b1a:	767020ef          	jal	4a80 <exit>
+    1b1e:	763020ef          	jal	4a80 <exit>
+    1b22:	85ce                	mv	a1,s3
+    1b24:	00004517          	auipc	a0,0x4
+    1b28:	05450513          	addi	a0,a0,84 # 5b78 <malloc+0xc2c>
+    1b2c:	36c030ef          	jal	4e98 <printf>
+    1b30:	4505                	li	a0,1
+    1b32:	74f020ef          	jal	4a80 <exit>
+    1b36:	85ce                	mv	a1,s3
+    1b38:	00004517          	auipc	a0,0x4
+    1b3c:	05850513          	addi	a0,a0,88 # 5b90 <malloc+0xc44>
+    1b40:	358030ef          	jal	4e98 <printf>
+    1b44:	4505                	li	a0,1
+    1b46:	73b020ef          	jal	4a80 <exit>
+    1b4a:	85ce                	mv	a1,s3
+    1b4c:	00004517          	auipc	a0,0x4
+    1b50:	05c50513          	addi	a0,a0,92 # 5ba8 <malloc+0xc5c>
+    1b54:	344030ef          	jal	4e98 <printf>
+    1b58:	4505                	li	a0,1
+    1b5a:	727020ef          	jal	4a80 <exit>
+    1b5e:	d0f1                	beqz	s1,1b22 <forktest+0x3e>
+    1b60:	00905963          	blez	s1,1b72 <forktest+0x8e>
+    1b64:	4501                	li	a0,0
+    1b66:	723020ef          	jal	4a88 <wait>
+    1b6a:	fc0546e3          	bltz	a0,1b36 <forktest+0x52>
+    1b6e:	34fd                	addiw	s1,s1,-1
+    1b70:	f8f5                	bnez	s1,1b64 <forktest+0x80>
+    1b72:	4501                	li	a0,0
+    1b74:	715020ef          	jal	4a88 <wait>
+    1b78:	57fd                	li	a5,-1
+    1b7a:	fcf518e3          	bne	a0,a5,1b4a <forktest+0x66>
+    1b7e:	70a2                	ld	ra,40(sp)
+    1b80:	7402                	ld	s0,32(sp)
+    1b82:	64e2                	ld	s1,24(sp)
+    1b84:	6942                	ld	s2,16(sp)
+    1b86:	69a2                	ld	s3,8(sp)
+    1b88:	6145                	addi	sp,sp,48
+    1b8a:	8082                	ret
+
+0000000000001b8c <kernmem>:
+    1b8c:	715d                	addi	sp,sp,-80
+    1b8e:	e486                	sd	ra,72(sp)
+    1b90:	e0a2                	sd	s0,64(sp)
+    1b92:	fc26                	sd	s1,56(sp)
+    1b94:	f84a                	sd	s2,48(sp)
+    1b96:	f44e                	sd	s3,40(sp)
+    1b98:	f052                	sd	s4,32(sp)
+    1b9a:	ec56                	sd	s5,24(sp)
+    1b9c:	0880                	addi	s0,sp,80
+    1b9e:	8aaa                	mv	s5,a0
+    1ba0:	4485                	li	s1,1
+    1ba2:	04fe                	slli	s1,s1,0x1f
+    1ba4:	5a7d                	li	s4,-1
+    1ba6:	69b1                	lui	s3,0xc
+    1ba8:	35098993          	addi	s3,s3,848 # c350 <uninit+0x1de8>
+    1bac:	1003d937          	lui	s2,0x1003d
+    1bb0:	090e                	slli	s2,s2,0x3
+    1bb2:	48090913          	addi	s2,s2,1152 # 1003d480 <base+0x1002d808>
+    1bb6:	6c3020ef          	jal	4a78 <fork>
+    1bba:	02054763          	bltz	a0,1be8 <kernmem+0x5c>
+    1bbe:	cd1d                	beqz	a0,1bfc <kernmem+0x70>
+    1bc0:	fbc40513          	addi	a0,s0,-68
+    1bc4:	6c5020ef          	jal	4a88 <wait>
+    1bc8:	fbc42783          	lw	a5,-68(s0)
+    1bcc:	05479563          	bne	a5,s4,1c16 <kernmem+0x8a>
+    1bd0:	94ce                	add	s1,s1,s3
+    1bd2:	ff2492e3          	bne	s1,s2,1bb6 <kernmem+0x2a>
+    1bd6:	60a6                	ld	ra,72(sp)
+    1bd8:	6406                	ld	s0,64(sp)
+    1bda:	74e2                	ld	s1,56(sp)
+    1bdc:	7942                	ld	s2,48(sp)
+    1bde:	79a2                	ld	s3,40(sp)
+    1be0:	7a02                	ld	s4,32(sp)
+    1be2:	6ae2                	ld	s5,24(sp)
+    1be4:	6161                	addi	sp,sp,80
+    1be6:	8082                	ret
+    1be8:	85d6                	mv	a1,s5
+    1bea:	00004517          	auipc	a0,0x4
+    1bee:	d2e50513          	addi	a0,a0,-722 # 5918 <malloc+0x9cc>
+    1bf2:	2a6030ef          	jal	4e98 <printf>
+    1bf6:	4505                	li	a0,1
+    1bf8:	689020ef          	jal	4a80 <exit>
+    1bfc:	0004c683          	lbu	a3,0(s1)
+    1c00:	8626                	mv	a2,s1
+    1c02:	85d6                	mv	a1,s5
+    1c04:	00004517          	auipc	a0,0x4
+    1c08:	fe450513          	addi	a0,a0,-28 # 5be8 <malloc+0xc9c>
+    1c0c:	28c030ef          	jal	4e98 <printf>
+    1c10:	4505                	li	a0,1
+    1c12:	66f020ef          	jal	4a80 <exit>
+    1c16:	4505                	li	a0,1
+    1c18:	669020ef          	jal	4a80 <exit>
+
+0000000000001c1c <MAXVAplus>:
+    1c1c:	7179                	addi	sp,sp,-48
+    1c1e:	f406                	sd	ra,40(sp)
+    1c20:	f022                	sd	s0,32(sp)
+    1c22:	1800                	addi	s0,sp,48
+    1c24:	4785                	li	a5,1
+    1c26:	179a                	slli	a5,a5,0x26
+    1c28:	fcf43c23          	sd	a5,-40(s0)
+    1c2c:	fd843783          	ld	a5,-40(s0)
+    1c30:	cf85                	beqz	a5,1c68 <MAXVAplus+0x4c>
+    1c32:	ec26                	sd	s1,24(sp)
+    1c34:	e84a                	sd	s2,16(sp)
+    1c36:	892a                	mv	s2,a0
+    1c38:	54fd                	li	s1,-1
+    1c3a:	63f020ef          	jal	4a78 <fork>
+    1c3e:	02054963          	bltz	a0,1c70 <MAXVAplus+0x54>
+    1c42:	c129                	beqz	a0,1c84 <MAXVAplus+0x68>
+    1c44:	fd440513          	addi	a0,s0,-44
+    1c48:	641020ef          	jal	4a88 <wait>
+    1c4c:	fd442783          	lw	a5,-44(s0)
+    1c50:	04979c63          	bne	a5,s1,1ca8 <MAXVAplus+0x8c>
+    1c54:	fd843783          	ld	a5,-40(s0)
+    1c58:	0786                	slli	a5,a5,0x1
+    1c5a:	fcf43c23          	sd	a5,-40(s0)
+    1c5e:	fd843783          	ld	a5,-40(s0)
+    1c62:	ffe1                	bnez	a5,1c3a <MAXVAplus+0x1e>
+    1c64:	64e2                	ld	s1,24(sp)
+    1c66:	6942                	ld	s2,16(sp)
+    1c68:	70a2                	ld	ra,40(sp)
+    1c6a:	7402                	ld	s0,32(sp)
+    1c6c:	6145                	addi	sp,sp,48
+    1c6e:	8082                	ret
+    1c70:	85ca                	mv	a1,s2
+    1c72:	00004517          	auipc	a0,0x4
+    1c76:	ca650513          	addi	a0,a0,-858 # 5918 <malloc+0x9cc>
+    1c7a:	21e030ef          	jal	4e98 <printf>
+    1c7e:	4505                	li	a0,1
+    1c80:	601020ef          	jal	4a80 <exit>
+    1c84:	fd843783          	ld	a5,-40(s0)
+    1c88:	06300713          	li	a4,99
+    1c8c:	00e78023          	sb	a4,0(a5)
+    1c90:	fd843603          	ld	a2,-40(s0)
+    1c94:	85ca                	mv	a1,s2
+    1c96:	00004517          	auipc	a0,0x4
+    1c9a:	f7250513          	addi	a0,a0,-142 # 5c08 <malloc+0xcbc>
+    1c9e:	1fa030ef          	jal	4e98 <printf>
+    1ca2:	4505                	li	a0,1
+    1ca4:	5dd020ef          	jal	4a80 <exit>
+    1ca8:	4505                	li	a0,1
+    1caa:	5d7020ef          	jal	4a80 <exit>
+
+0000000000001cae <stacktest>:
+    1cae:	7179                	addi	sp,sp,-48
+    1cb0:	f406                	sd	ra,40(sp)
+    1cb2:	f022                	sd	s0,32(sp)
+    1cb4:	ec26                	sd	s1,24(sp)
+    1cb6:	1800                	addi	s0,sp,48
+    1cb8:	84aa                	mv	s1,a0
+    1cba:	5bf020ef          	jal	4a78 <fork>
+    1cbe:	cd11                	beqz	a0,1cda <stacktest+0x2c>
+    1cc0:	02054c63          	bltz	a0,1cf8 <stacktest+0x4a>
+    1cc4:	fdc40513          	addi	a0,s0,-36
+    1cc8:	5c1020ef          	jal	4a88 <wait>
+    1ccc:	fdc42503          	lw	a0,-36(s0)
+    1cd0:	57fd                	li	a5,-1
+    1cd2:	02f50d63          	beq	a0,a5,1d0c <stacktest+0x5e>
+    1cd6:	5ab020ef          	jal	4a80 <exit>
+    1cda:	870a                	mv	a4,sp
+    1cdc:	77f9                	lui	a5,0xffffe
+    1cde:	97ba                	add	a5,a5,a4
+    1ce0:	0007c603          	lbu	a2,0(a5) # ffffffffffffe000 <base+0xfffffffffffee388>
+    1ce4:	85a6                	mv	a1,s1
+    1ce6:	00004517          	auipc	a0,0x4
+    1cea:	f3a50513          	addi	a0,a0,-198 # 5c20 <malloc+0xcd4>
+    1cee:	1aa030ef          	jal	4e98 <printf>
+    1cf2:	4505                	li	a0,1
+    1cf4:	58d020ef          	jal	4a80 <exit>
+    1cf8:	85a6                	mv	a1,s1
+    1cfa:	00004517          	auipc	a0,0x4
+    1cfe:	c1e50513          	addi	a0,a0,-994 # 5918 <malloc+0x9cc>
+    1d02:	196030ef          	jal	4e98 <printf>
+    1d06:	4505                	li	a0,1
+    1d08:	579020ef          	jal	4a80 <exit>
+    1d0c:	4501                	li	a0,0
+    1d0e:	573020ef          	jal	4a80 <exit>
+
+0000000000001d12 <nowrite>:
+    1d12:	7159                	addi	sp,sp,-112
+    1d14:	f486                	sd	ra,104(sp)
+    1d16:	f0a2                	sd	s0,96(sp)
+    1d18:	eca6                	sd	s1,88(sp)
+    1d1a:	e8ca                	sd	s2,80(sp)
+    1d1c:	e4ce                	sd	s3,72(sp)
+    1d1e:	1880                	addi	s0,sp,112
+    1d20:	89aa                	mv	s3,a0
+    1d22:	00005797          	auipc	a5,0x5
+    1d26:	6c678793          	addi	a5,a5,1734 # 73e8 <malloc+0x249c>
+    1d2a:	7788                	ld	a0,40(a5)
+    1d2c:	7b8c                	ld	a1,48(a5)
+    1d2e:	7f90                	ld	a2,56(a5)
+    1d30:	63b4                	ld	a3,64(a5)
+    1d32:	67b8                	ld	a4,72(a5)
+    1d34:	6bbc                	ld	a5,80(a5)
+    1d36:	f8a43c23          	sd	a0,-104(s0)
+    1d3a:	fab43023          	sd	a1,-96(s0)
+    1d3e:	fac43423          	sd	a2,-88(s0)
+    1d42:	fad43823          	sd	a3,-80(s0)
+    1d46:	fae43c23          	sd	a4,-72(s0)
+    1d4a:	fcf43023          	sd	a5,-64(s0)
+    1d4e:	4481                	li	s1,0
+    1d50:	4919                	li	s2,6
+    1d52:	527020ef          	jal	4a78 <fork>
+    1d56:	c105                	beqz	a0,1d76 <nowrite+0x64>
+    1d58:	04054263          	bltz	a0,1d9c <nowrite+0x8a>
+    1d5c:	fcc40513          	addi	a0,s0,-52
+    1d60:	529020ef          	jal	4a88 <wait>
+    1d64:	fcc42783          	lw	a5,-52(s0)
+    1d68:	c7a1                	beqz	a5,1db0 <nowrite+0x9e>
+    1d6a:	2485                	addiw	s1,s1,1
+    1d6c:	ff2493e3          	bne	s1,s2,1d52 <nowrite+0x40>
+    1d70:	4501                	li	a0,0
+    1d72:	50f020ef          	jal	4a80 <exit>
+    1d76:	048e                	slli	s1,s1,0x3
+    1d78:	fd048793          	addi	a5,s1,-48
+    1d7c:	008784b3          	add	s1,a5,s0
+    1d80:	fc84b603          	ld	a2,-56(s1)
+    1d84:	47a9                	li	a5,10
+    1d86:	c21c                	sw	a5,0(a2)
+    1d88:	85ce                	mv	a1,s3
+    1d8a:	00004517          	auipc	a0,0x4
+    1d8e:	ebe50513          	addi	a0,a0,-322 # 5c48 <malloc+0xcfc>
+    1d92:	106030ef          	jal	4e98 <printf>
+    1d96:	4501                	li	a0,0
+    1d98:	4e9020ef          	jal	4a80 <exit>
+    1d9c:	85ce                	mv	a1,s3
+    1d9e:	00004517          	auipc	a0,0x4
+    1da2:	b7a50513          	addi	a0,a0,-1158 # 5918 <malloc+0x9cc>
+    1da6:	0f2030ef          	jal	4e98 <printf>
+    1daa:	4505                	li	a0,1
+    1dac:	4d5020ef          	jal	4a80 <exit>
+    1db0:	4505                	li	a0,1
+    1db2:	4cf020ef          	jal	4a80 <exit>
+
+0000000000001db6 <manywrites>:
+    1db6:	711d                	addi	sp,sp,-96
+    1db8:	ec86                	sd	ra,88(sp)
+    1dba:	e8a2                	sd	s0,80(sp)
+    1dbc:	e4a6                	sd	s1,72(sp)
+    1dbe:	e0ca                	sd	s2,64(sp)
+    1dc0:	fc4e                	sd	s3,56(sp)
+    1dc2:	f456                	sd	s5,40(sp)
+    1dc4:	1080                	addi	s0,sp,96
+    1dc6:	8aaa                	mv	s5,a0
+    1dc8:	4981                	li	s3,0
+    1dca:	4911                	li	s2,4
+    1dcc:	4ad020ef          	jal	4a78 <fork>
+    1dd0:	84aa                	mv	s1,a0
+    1dd2:	02054963          	bltz	a0,1e04 <manywrites+0x4e>
+    1dd6:	c139                	beqz	a0,1e1c <manywrites+0x66>
+    1dd8:	2985                	addiw	s3,s3,1
+    1dda:	ff2999e3          	bne	s3,s2,1dcc <manywrites+0x16>
+    1dde:	f852                	sd	s4,48(sp)
+    1de0:	f05a                	sd	s6,32(sp)
+    1de2:	ec5e                	sd	s7,24(sp)
+    1de4:	4491                	li	s1,4
+    1de6:	fa042423          	sw	zero,-88(s0)
+    1dea:	fa840513          	addi	a0,s0,-88
+    1dee:	49b020ef          	jal	4a88 <wait>
+    1df2:	fa842503          	lw	a0,-88(s0)
+    1df6:	0c051863          	bnez	a0,1ec6 <manywrites+0x110>
+    1dfa:	34fd                	addiw	s1,s1,-1
+    1dfc:	f4ed                	bnez	s1,1de6 <manywrites+0x30>
+    1dfe:	4501                	li	a0,0
+    1e00:	481020ef          	jal	4a80 <exit>
+    1e04:	f852                	sd	s4,48(sp)
+    1e06:	f05a                	sd	s6,32(sp)
+    1e08:	ec5e                	sd	s7,24(sp)
+    1e0a:	00005517          	auipc	a0,0x5
+    1e0e:	07e50513          	addi	a0,a0,126 # 6e88 <malloc+0x1f3c>
+    1e12:	086030ef          	jal	4e98 <printf>
+    1e16:	4505                	li	a0,1
+    1e18:	469020ef          	jal	4a80 <exit>
+    1e1c:	f852                	sd	s4,48(sp)
+    1e1e:	f05a                	sd	s6,32(sp)
+    1e20:	ec5e                	sd	s7,24(sp)
+    1e22:	06200793          	li	a5,98
+    1e26:	faf40423          	sb	a5,-88(s0)
+    1e2a:	0619879b          	addiw	a5,s3,97
+    1e2e:	faf404a3          	sb	a5,-87(s0)
+    1e32:	fa040523          	sb	zero,-86(s0)
+    1e36:	fa840513          	addi	a0,s0,-88
+    1e3a:	497020ef          	jal	4ad0 <unlink>
+    1e3e:	4bf9                	li	s7,30
+    1e40:	0000bb17          	auipc	s6,0xb
+    1e44:	e38b0b13          	addi	s6,s6,-456 # cc78 <buf>
+    1e48:	8a26                	mv	s4,s1
+    1e4a:	0209c863          	bltz	s3,1e7a <manywrites+0xc4>
+    1e4e:	20200593          	li	a1,514
+    1e52:	fa840513          	addi	a0,s0,-88
+    1e56:	46b020ef          	jal	4ac0 <open>
+    1e5a:	892a                	mv	s2,a0
+    1e5c:	02054d63          	bltz	a0,1e96 <manywrites+0xe0>
+    1e60:	660d                	lui	a2,0x3
+    1e62:	85da                	mv	a1,s6
+    1e64:	43d020ef          	jal	4aa0 <write>
+    1e68:	678d                	lui	a5,0x3
+    1e6a:	04f51263          	bne	a0,a5,1eae <manywrites+0xf8>
+    1e6e:	854a                	mv	a0,s2
+    1e70:	439020ef          	jal	4aa8 <close>
+    1e74:	2a05                	addiw	s4,s4,1
+    1e76:	fd49dce3          	bge	s3,s4,1e4e <manywrites+0x98>
+    1e7a:	fa840513          	addi	a0,s0,-88
+    1e7e:	453020ef          	jal	4ad0 <unlink>
+    1e82:	3bfd                	addiw	s7,s7,-1
+    1e84:	fc0b92e3          	bnez	s7,1e48 <manywrites+0x92>
+    1e88:	fa840513          	addi	a0,s0,-88
+    1e8c:	445020ef          	jal	4ad0 <unlink>
+    1e90:	4501                	li	a0,0
+    1e92:	3ef020ef          	jal	4a80 <exit>
+    1e96:	fa840613          	addi	a2,s0,-88
+    1e9a:	85d6                	mv	a1,s5
+    1e9c:	00004517          	auipc	a0,0x4
+    1ea0:	dcc50513          	addi	a0,a0,-564 # 5c68 <malloc+0xd1c>
+    1ea4:	7f5020ef          	jal	4e98 <printf>
+    1ea8:	4505                	li	a0,1
+    1eaa:	3d7020ef          	jal	4a80 <exit>
+    1eae:	86aa                	mv	a3,a0
+    1eb0:	660d                	lui	a2,0x3
+    1eb2:	85d6                	mv	a1,s5
+    1eb4:	00003517          	auipc	a0,0x3
+    1eb8:	2a450513          	addi	a0,a0,676 # 5158 <malloc+0x20c>
+    1ebc:	7dd020ef          	jal	4e98 <printf>
+    1ec0:	4505                	li	a0,1
+    1ec2:	3bf020ef          	jal	4a80 <exit>
+    1ec6:	3bb020ef          	jal	4a80 <exit>
+
+0000000000001eca <copyinstr3>:
+    1eca:	7179                	addi	sp,sp,-48
+    1ecc:	f406                	sd	ra,40(sp)
+    1ece:	f022                	sd	s0,32(sp)
+    1ed0:	ec26                	sd	s1,24(sp)
+    1ed2:	1800                	addi	s0,sp,48
+    1ed4:	6509                	lui	a0,0x2
+    1ed6:	433020ef          	jal	4b08 <sbrk>
+    1eda:	4501                	li	a0,0
+    1edc:	42d020ef          	jal	4b08 <sbrk>
+    1ee0:	03451793          	slli	a5,a0,0x34
+    1ee4:	e7bd                	bnez	a5,1f52 <copyinstr3+0x88>
+    1ee6:	4501                	li	a0,0
+    1ee8:	421020ef          	jal	4b08 <sbrk>
+    1eec:	03451793          	slli	a5,a0,0x34
+    1ef0:	ebad                	bnez	a5,1f62 <copyinstr3+0x98>
+    1ef2:	fff50493          	addi	s1,a0,-1 # 1fff <rwsbrk+0x31>
+    1ef6:	07800793          	li	a5,120
+    1efa:	fef50fa3          	sb	a5,-1(a0)
+    1efe:	8526                	mv	a0,s1
+    1f00:	3d1020ef          	jal	4ad0 <unlink>
+    1f04:	57fd                	li	a5,-1
+    1f06:	06f51763          	bne	a0,a5,1f74 <copyinstr3+0xaa>
+    1f0a:	20100593          	li	a1,513
+    1f0e:	8526                	mv	a0,s1
+    1f10:	3b1020ef          	jal	4ac0 <open>
+    1f14:	57fd                	li	a5,-1
+    1f16:	06f51a63          	bne	a0,a5,1f8a <copyinstr3+0xc0>
+    1f1a:	85a6                	mv	a1,s1
+    1f1c:	8526                	mv	a0,s1
+    1f1e:	3c3020ef          	jal	4ae0 <link>
+    1f22:	57fd                	li	a5,-1
+    1f24:	06f51e63          	bne	a0,a5,1fa0 <copyinstr3+0xd6>
+    1f28:	00005797          	auipc	a5,0x5
+    1f2c:	a4078793          	addi	a5,a5,-1472 # 6968 <malloc+0x1a1c>
+    1f30:	fcf43823          	sd	a5,-48(s0)
+    1f34:	fc043c23          	sd	zero,-40(s0)
+    1f38:	fd040593          	addi	a1,s0,-48
+    1f3c:	8526                	mv	a0,s1
+    1f3e:	37b020ef          	jal	4ab8 <exec>
+    1f42:	57fd                	li	a5,-1
+    1f44:	06f51a63          	bne	a0,a5,1fb8 <copyinstr3+0xee>
+    1f48:	70a2                	ld	ra,40(sp)
+    1f4a:	7402                	ld	s0,32(sp)
+    1f4c:	64e2                	ld	s1,24(sp)
+    1f4e:	6145                	addi	sp,sp,48
+    1f50:	8082                	ret
+    1f52:	0347d513          	srli	a0,a5,0x34
+    1f56:	6785                	lui	a5,0x1
+    1f58:	40a7853b          	subw	a0,a5,a0
+    1f5c:	3ad020ef          	jal	4b08 <sbrk>
+    1f60:	b759                	j	1ee6 <copyinstr3+0x1c>
+    1f62:	00004517          	auipc	a0,0x4
+    1f66:	d1e50513          	addi	a0,a0,-738 # 5c80 <malloc+0xd34>
+    1f6a:	72f020ef          	jal	4e98 <printf>
+    1f6e:	4505                	li	a0,1
+    1f70:	311020ef          	jal	4a80 <exit>
+    1f74:	862a                	mv	a2,a0
+    1f76:	85a6                	mv	a1,s1
+    1f78:	00004517          	auipc	a0,0x4
+    1f7c:	8c050513          	addi	a0,a0,-1856 # 5838 <malloc+0x8ec>
+    1f80:	719020ef          	jal	4e98 <printf>
+    1f84:	4505                	li	a0,1
+    1f86:	2fb020ef          	jal	4a80 <exit>
+    1f8a:	862a                	mv	a2,a0
+    1f8c:	85a6                	mv	a1,s1
+    1f8e:	00004517          	auipc	a0,0x4
+    1f92:	8ca50513          	addi	a0,a0,-1846 # 5858 <malloc+0x90c>
+    1f96:	703020ef          	jal	4e98 <printf>
+    1f9a:	4505                	li	a0,1
+    1f9c:	2e5020ef          	jal	4a80 <exit>
+    1fa0:	86aa                	mv	a3,a0
+    1fa2:	8626                	mv	a2,s1
+    1fa4:	85a6                	mv	a1,s1
+    1fa6:	00004517          	auipc	a0,0x4
+    1faa:	8d250513          	addi	a0,a0,-1838 # 5878 <malloc+0x92c>
+    1fae:	6eb020ef          	jal	4e98 <printf>
+    1fb2:	4505                	li	a0,1
+    1fb4:	2cd020ef          	jal	4a80 <exit>
+    1fb8:	567d                	li	a2,-1
+    1fba:	85a6                	mv	a1,s1
+    1fbc:	00004517          	auipc	a0,0x4
+    1fc0:	8e450513          	addi	a0,a0,-1820 # 58a0 <malloc+0x954>
+    1fc4:	6d5020ef          	jal	4e98 <printf>
+    1fc8:	4505                	li	a0,1
+    1fca:	2b7020ef          	jal	4a80 <exit>
+
+0000000000001fce <rwsbrk>:
+    1fce:	1101                	addi	sp,sp,-32
+    1fd0:	ec06                	sd	ra,24(sp)
+    1fd2:	e822                	sd	s0,16(sp)
+    1fd4:	1000                	addi	s0,sp,32
+    1fd6:	6509                	lui	a0,0x2
+    1fd8:	331020ef          	jal	4b08 <sbrk>
+    1fdc:	57fd                	li	a5,-1
+    1fde:	04f50a63          	beq	a0,a5,2032 <rwsbrk+0x64>
+    1fe2:	e426                	sd	s1,8(sp)
+    1fe4:	84aa                	mv	s1,a0
+    1fe6:	7579                	lui	a0,0xffffe
+    1fe8:	321020ef          	jal	4b08 <sbrk>
+    1fec:	57fd                	li	a5,-1
+    1fee:	04f50d63          	beq	a0,a5,2048 <rwsbrk+0x7a>
+    1ff2:	e04a                	sd	s2,0(sp)
+    1ff4:	20100593          	li	a1,513
+    1ff8:	00004517          	auipc	a0,0x4
+    1ffc:	cc850513          	addi	a0,a0,-824 # 5cc0 <malloc+0xd74>
+    2000:	2c1020ef          	jal	4ac0 <open>
+    2004:	892a                	mv	s2,a0
+    2006:	04054b63          	bltz	a0,205c <rwsbrk+0x8e>
+    200a:	6785                	lui	a5,0x1
+    200c:	94be                	add	s1,s1,a5
+    200e:	40000613          	li	a2,1024
+    2012:	85a6                	mv	a1,s1
+    2014:	28d020ef          	jal	4aa0 <write>
+    2018:	862a                	mv	a2,a0
+    201a:	04054a63          	bltz	a0,206e <rwsbrk+0xa0>
+    201e:	85a6                	mv	a1,s1
+    2020:	00004517          	auipc	a0,0x4
+    2024:	cc050513          	addi	a0,a0,-832 # 5ce0 <malloc+0xd94>
+    2028:	671020ef          	jal	4e98 <printf>
+    202c:	4505                	li	a0,1
+    202e:	253020ef          	jal	4a80 <exit>
+    2032:	e426                	sd	s1,8(sp)
+    2034:	e04a                	sd	s2,0(sp)
+    2036:	00004517          	auipc	a0,0x4
+    203a:	c5250513          	addi	a0,a0,-942 # 5c88 <malloc+0xd3c>
+    203e:	65b020ef          	jal	4e98 <printf>
+    2042:	4505                	li	a0,1
+    2044:	23d020ef          	jal	4a80 <exit>
+    2048:	e04a                	sd	s2,0(sp)
+    204a:	00004517          	auipc	a0,0x4
+    204e:	c5650513          	addi	a0,a0,-938 # 5ca0 <malloc+0xd54>
+    2052:	647020ef          	jal	4e98 <printf>
+    2056:	4505                	li	a0,1
+    2058:	229020ef          	jal	4a80 <exit>
+    205c:	00004517          	auipc	a0,0x4
+    2060:	c6c50513          	addi	a0,a0,-916 # 5cc8 <malloc+0xd7c>
+    2064:	635020ef          	jal	4e98 <printf>
+    2068:	4505                	li	a0,1
+    206a:	217020ef          	jal	4a80 <exit>
+    206e:	854a                	mv	a0,s2
+    2070:	239020ef          	jal	4aa8 <close>
+    2074:	00004517          	auipc	a0,0x4
+    2078:	c4c50513          	addi	a0,a0,-948 # 5cc0 <malloc+0xd74>
+    207c:	255020ef          	jal	4ad0 <unlink>
+    2080:	4581                	li	a1,0
+    2082:	00003517          	auipc	a0,0x3
+    2086:	1de50513          	addi	a0,a0,478 # 5260 <malloc+0x314>
+    208a:	237020ef          	jal	4ac0 <open>
+    208e:	892a                	mv	s2,a0
+    2090:	02054363          	bltz	a0,20b6 <rwsbrk+0xe8>
+    2094:	4629                	li	a2,10
+    2096:	85a6                	mv	a1,s1
+    2098:	201020ef          	jal	4a98 <read>
+    209c:	862a                	mv	a2,a0
+    209e:	02054563          	bltz	a0,20c8 <rwsbrk+0xfa>
+    20a2:	85a6                	mv	a1,s1
+    20a4:	00004517          	auipc	a0,0x4
+    20a8:	c6c50513          	addi	a0,a0,-916 # 5d10 <malloc+0xdc4>
+    20ac:	5ed020ef          	jal	4e98 <printf>
+    20b0:	4505                	li	a0,1
+    20b2:	1cf020ef          	jal	4a80 <exit>
+    20b6:	00004517          	auipc	a0,0x4
+    20ba:	c1250513          	addi	a0,a0,-1006 # 5cc8 <malloc+0xd7c>
+    20be:	5db020ef          	jal	4e98 <printf>
+    20c2:	4505                	li	a0,1
+    20c4:	1bd020ef          	jal	4a80 <exit>
+    20c8:	854a                	mv	a0,s2
+    20ca:	1df020ef          	jal	4aa8 <close>
+    20ce:	4501                	li	a0,0
+    20d0:	1b1020ef          	jal	4a80 <exit>
+
+00000000000020d4 <sbrkbasic>:
+    20d4:	7139                	addi	sp,sp,-64
+    20d6:	fc06                	sd	ra,56(sp)
+    20d8:	f822                	sd	s0,48(sp)
+    20da:	ec4e                	sd	s3,24(sp)
+    20dc:	0080                	addi	s0,sp,64
+    20de:	89aa                	mv	s3,a0
+    20e0:	199020ef          	jal	4a78 <fork>
+    20e4:	02054b63          	bltz	a0,211a <sbrkbasic+0x46>
+    20e8:	e939                	bnez	a0,213e <sbrkbasic+0x6a>
+    20ea:	40000537          	lui	a0,0x40000
+    20ee:	21b020ef          	jal	4b08 <sbrk>
+    20f2:	57fd                	li	a5,-1
+    20f4:	02f50f63          	beq	a0,a5,2132 <sbrkbasic+0x5e>
+    20f8:	f426                	sd	s1,40(sp)
+    20fa:	f04a                	sd	s2,32(sp)
+    20fc:	e852                	sd	s4,16(sp)
+    20fe:	400007b7          	lui	a5,0x40000
+    2102:	97aa                	add	a5,a5,a0
+    2104:	06300693          	li	a3,99
+    2108:	6705                	lui	a4,0x1
+    210a:	00d50023          	sb	a3,0(a0) # 40000000 <base+0x3fff0388>
+    210e:	953a                	add	a0,a0,a4
+    2110:	fef51de3          	bne	a0,a5,210a <sbrkbasic+0x36>
+    2114:	4505                	li	a0,1
+    2116:	16b020ef          	jal	4a80 <exit>
+    211a:	f426                	sd	s1,40(sp)
+    211c:	f04a                	sd	s2,32(sp)
+    211e:	e852                	sd	s4,16(sp)
+    2120:	00004517          	auipc	a0,0x4
+    2124:	c1850513          	addi	a0,a0,-1000 # 5d38 <malloc+0xdec>
+    2128:	571020ef          	jal	4e98 <printf>
+    212c:	4505                	li	a0,1
+    212e:	153020ef          	jal	4a80 <exit>
+    2132:	f426                	sd	s1,40(sp)
+    2134:	f04a                	sd	s2,32(sp)
+    2136:	e852                	sd	s4,16(sp)
+    2138:	4501                	li	a0,0
+    213a:	147020ef          	jal	4a80 <exit>
+    213e:	fcc40513          	addi	a0,s0,-52
+    2142:	147020ef          	jal	4a88 <wait>
+    2146:	fcc42703          	lw	a4,-52(s0)
+    214a:	4785                	li	a5,1
+    214c:	00f70e63          	beq	a4,a5,2168 <sbrkbasic+0x94>
+    2150:	f426                	sd	s1,40(sp)
+    2152:	f04a                	sd	s2,32(sp)
+    2154:	e852                	sd	s4,16(sp)
+    2156:	4501                	li	a0,0
+    2158:	1b1020ef          	jal	4b08 <sbrk>
+    215c:	84aa                	mv	s1,a0
+    215e:	4901                	li	s2,0
+    2160:	6a05                	lui	s4,0x1
+    2162:	388a0a13          	addi	s4,s4,904 # 1388 <exectest+0x4a>
+    2166:	a839                	j	2184 <sbrkbasic+0xb0>
+    2168:	f426                	sd	s1,40(sp)
+    216a:	f04a                	sd	s2,32(sp)
+    216c:	e852                	sd	s4,16(sp)
+    216e:	85ce                	mv	a1,s3
+    2170:	00004517          	auipc	a0,0x4
+    2174:	be850513          	addi	a0,a0,-1048 # 5d58 <malloc+0xe0c>
+    2178:	521020ef          	jal	4e98 <printf>
+    217c:	4505                	li	a0,1
+    217e:	103020ef          	jal	4a80 <exit>
+    2182:	84be                	mv	s1,a5
+    2184:	4505                	li	a0,1
+    2186:	183020ef          	jal	4b08 <sbrk>
+    218a:	04951263          	bne	a0,s1,21ce <sbrkbasic+0xfa>
+    218e:	4785                	li	a5,1
+    2190:	00f48023          	sb	a5,0(s1)
+    2194:	00148793          	addi	a5,s1,1
+    2198:	2905                	addiw	s2,s2,1
+    219a:	ff4914e3          	bne	s2,s4,2182 <sbrkbasic+0xae>
+    219e:	0db020ef          	jal	4a78 <fork>
+    21a2:	892a                	mv	s2,a0
+    21a4:	04054263          	bltz	a0,21e8 <sbrkbasic+0x114>
+    21a8:	4505                	li	a0,1
+    21aa:	15f020ef          	jal	4b08 <sbrk>
+    21ae:	4505                	li	a0,1
+    21b0:	159020ef          	jal	4b08 <sbrk>
+    21b4:	0489                	addi	s1,s1,2
+    21b6:	04a48363          	beq	s1,a0,21fc <sbrkbasic+0x128>
+    21ba:	85ce                	mv	a1,s3
+    21bc:	00004517          	auipc	a0,0x4
+    21c0:	bfc50513          	addi	a0,a0,-1028 # 5db8 <malloc+0xe6c>
+    21c4:	4d5020ef          	jal	4e98 <printf>
+    21c8:	4505                	li	a0,1
+    21ca:	0b7020ef          	jal	4a80 <exit>
+    21ce:	872a                	mv	a4,a0
+    21d0:	86a6                	mv	a3,s1
+    21d2:	864a                	mv	a2,s2
+    21d4:	85ce                	mv	a1,s3
+    21d6:	00004517          	auipc	a0,0x4
+    21da:	ba250513          	addi	a0,a0,-1118 # 5d78 <malloc+0xe2c>
+    21de:	4bb020ef          	jal	4e98 <printf>
+    21e2:	4505                	li	a0,1
+    21e4:	09d020ef          	jal	4a80 <exit>
+    21e8:	85ce                	mv	a1,s3
+    21ea:	00004517          	auipc	a0,0x4
+    21ee:	bae50513          	addi	a0,a0,-1106 # 5d98 <malloc+0xe4c>
+    21f2:	4a7020ef          	jal	4e98 <printf>
+    21f6:	4505                	li	a0,1
+    21f8:	089020ef          	jal	4a80 <exit>
+    21fc:	00091563          	bnez	s2,2206 <sbrkbasic+0x132>
+    2200:	4501                	li	a0,0
+    2202:	07f020ef          	jal	4a80 <exit>
+    2206:	fcc40513          	addi	a0,s0,-52
+    220a:	07f020ef          	jal	4a88 <wait>
+    220e:	fcc42503          	lw	a0,-52(s0)
+    2212:	06f020ef          	jal	4a80 <exit>
+
+0000000000002216 <sbrkmuch>:
+    2216:	7179                	addi	sp,sp,-48
+    2218:	f406                	sd	ra,40(sp)
+    221a:	f022                	sd	s0,32(sp)
+    221c:	ec26                	sd	s1,24(sp)
+    221e:	e84a                	sd	s2,16(sp)
+    2220:	e44e                	sd	s3,8(sp)
+    2222:	e052                	sd	s4,0(sp)
+    2224:	1800                	addi	s0,sp,48
+    2226:	89aa                	mv	s3,a0
+    2228:	4501                	li	a0,0
+    222a:	0df020ef          	jal	4b08 <sbrk>
+    222e:	892a                	mv	s2,a0
+    2230:	4501                	li	a0,0
+    2232:	0d7020ef          	jal	4b08 <sbrk>
+    2236:	84aa                	mv	s1,a0
+    2238:	06400537          	lui	a0,0x6400
+    223c:	9d05                	subw	a0,a0,s1
+    223e:	0cb020ef          	jal	4b08 <sbrk>
+    2242:	0aa49463          	bne	s1,a0,22ea <sbrkmuch+0xd4>
+    2246:	4501                	li	a0,0
+    2248:	0c1020ef          	jal	4b08 <sbrk>
+    224c:	87aa                	mv	a5,a0
+    224e:	00a4f963          	bgeu	s1,a0,2260 <sbrkmuch+0x4a>
+    2252:	4685                	li	a3,1
+    2254:	6705                	lui	a4,0x1
+    2256:	00d48023          	sb	a3,0(s1)
+    225a:	94ba                	add	s1,s1,a4
+    225c:	fef4ede3          	bltu	s1,a5,2256 <sbrkmuch+0x40>
+    2260:	064007b7          	lui	a5,0x6400
+    2264:	06300713          	li	a4,99
+    2268:	fee78fa3          	sb	a4,-1(a5) # 63fffff <base+0x63f0387>
+    226c:	4501                	li	a0,0
+    226e:	09b020ef          	jal	4b08 <sbrk>
+    2272:	84aa                	mv	s1,a0
+    2274:	757d                	lui	a0,0xfffff
+    2276:	093020ef          	jal	4b08 <sbrk>
+    227a:	57fd                	li	a5,-1
+    227c:	08f50163          	beq	a0,a5,22fe <sbrkmuch+0xe8>
+    2280:	4501                	li	a0,0
+    2282:	087020ef          	jal	4b08 <sbrk>
+    2286:	77fd                	lui	a5,0xfffff
+    2288:	97a6                	add	a5,a5,s1
+    228a:	08f51463          	bne	a0,a5,2312 <sbrkmuch+0xfc>
+    228e:	4501                	li	a0,0
+    2290:	079020ef          	jal	4b08 <sbrk>
+    2294:	84aa                	mv	s1,a0
+    2296:	6505                	lui	a0,0x1
+    2298:	071020ef          	jal	4b08 <sbrk>
+    229c:	8a2a                	mv	s4,a0
+    229e:	08a49663          	bne	s1,a0,232a <sbrkmuch+0x114>
+    22a2:	4501                	li	a0,0
+    22a4:	065020ef          	jal	4b08 <sbrk>
+    22a8:	6785                	lui	a5,0x1
+    22aa:	97a6                	add	a5,a5,s1
+    22ac:	06f51f63          	bne	a0,a5,232a <sbrkmuch+0x114>
+    22b0:	064007b7          	lui	a5,0x6400
+    22b4:	fff7c703          	lbu	a4,-1(a5) # 63fffff <base+0x63f0387>
+    22b8:	06300793          	li	a5,99
+    22bc:	08f70363          	beq	a4,a5,2342 <sbrkmuch+0x12c>
+    22c0:	4501                	li	a0,0
+    22c2:	047020ef          	jal	4b08 <sbrk>
+    22c6:	84aa                	mv	s1,a0
+    22c8:	4501                	li	a0,0
+    22ca:	03f020ef          	jal	4b08 <sbrk>
+    22ce:	40a9053b          	subw	a0,s2,a0
+    22d2:	037020ef          	jal	4b08 <sbrk>
+    22d6:	08a49063          	bne	s1,a0,2356 <sbrkmuch+0x140>
+    22da:	70a2                	ld	ra,40(sp)
+    22dc:	7402                	ld	s0,32(sp)
+    22de:	64e2                	ld	s1,24(sp)
+    22e0:	6942                	ld	s2,16(sp)
+    22e2:	69a2                	ld	s3,8(sp)
+    22e4:	6a02                	ld	s4,0(sp)
+    22e6:	6145                	addi	sp,sp,48
+    22e8:	8082                	ret
+    22ea:	85ce                	mv	a1,s3
+    22ec:	00004517          	auipc	a0,0x4
+    22f0:	aec50513          	addi	a0,a0,-1300 # 5dd8 <malloc+0xe8c>
+    22f4:	3a5020ef          	jal	4e98 <printf>
+    22f8:	4505                	li	a0,1
+    22fa:	786020ef          	jal	4a80 <exit>
+    22fe:	85ce                	mv	a1,s3
+    2300:	00004517          	auipc	a0,0x4
+    2304:	b2050513          	addi	a0,a0,-1248 # 5e20 <malloc+0xed4>
+    2308:	391020ef          	jal	4e98 <printf>
+    230c:	4505                	li	a0,1
+    230e:	772020ef          	jal	4a80 <exit>
+    2312:	86aa                	mv	a3,a0
+    2314:	8626                	mv	a2,s1
+    2316:	85ce                	mv	a1,s3
+    2318:	00004517          	auipc	a0,0x4
+    231c:	b2850513          	addi	a0,a0,-1240 # 5e40 <malloc+0xef4>
+    2320:	379020ef          	jal	4e98 <printf>
+    2324:	4505                	li	a0,1
+    2326:	75a020ef          	jal	4a80 <exit>
+    232a:	86d2                	mv	a3,s4
+    232c:	8626                	mv	a2,s1
+    232e:	85ce                	mv	a1,s3
+    2330:	00004517          	auipc	a0,0x4
+    2334:	b5050513          	addi	a0,a0,-1200 # 5e80 <malloc+0xf34>
+    2338:	361020ef          	jal	4e98 <printf>
+    233c:	4505                	li	a0,1
+    233e:	742020ef          	jal	4a80 <exit>
+    2342:	85ce                	mv	a1,s3
+    2344:	00004517          	auipc	a0,0x4
+    2348:	b6c50513          	addi	a0,a0,-1172 # 5eb0 <malloc+0xf64>
+    234c:	34d020ef          	jal	4e98 <printf>
+    2350:	4505                	li	a0,1
+    2352:	72e020ef          	jal	4a80 <exit>
+    2356:	86aa                	mv	a3,a0
+    2358:	8626                	mv	a2,s1
+    235a:	85ce                	mv	a1,s3
+    235c:	00004517          	auipc	a0,0x4
+    2360:	b8c50513          	addi	a0,a0,-1140 # 5ee8 <malloc+0xf9c>
+    2364:	335020ef          	jal	4e98 <printf>
+    2368:	4505                	li	a0,1
+    236a:	716020ef          	jal	4a80 <exit>
+
+000000000000236e <sbrkarg>:
+    236e:	7179                	addi	sp,sp,-48
+    2370:	f406                	sd	ra,40(sp)
+    2372:	f022                	sd	s0,32(sp)
+    2374:	ec26                	sd	s1,24(sp)
+    2376:	e84a                	sd	s2,16(sp)
+    2378:	e44e                	sd	s3,8(sp)
+    237a:	1800                	addi	s0,sp,48
+    237c:	89aa                	mv	s3,a0
+    237e:	6505                	lui	a0,0x1
+    2380:	788020ef          	jal	4b08 <sbrk>
+    2384:	892a                	mv	s2,a0
+    2386:	20100593          	li	a1,513
+    238a:	00004517          	auipc	a0,0x4
+    238e:	b8650513          	addi	a0,a0,-1146 # 5f10 <malloc+0xfc4>
+    2392:	72e020ef          	jal	4ac0 <open>
+    2396:	84aa                	mv	s1,a0
+    2398:	00004517          	auipc	a0,0x4
+    239c:	b7850513          	addi	a0,a0,-1160 # 5f10 <malloc+0xfc4>
+    23a0:	730020ef          	jal	4ad0 <unlink>
+    23a4:	0204c963          	bltz	s1,23d6 <sbrkarg+0x68>
+    23a8:	6605                	lui	a2,0x1
+    23aa:	85ca                	mv	a1,s2
+    23ac:	8526                	mv	a0,s1
+    23ae:	6f2020ef          	jal	4aa0 <write>
+    23b2:	02054c63          	bltz	a0,23ea <sbrkarg+0x7c>
+    23b6:	8526                	mv	a0,s1
+    23b8:	6f0020ef          	jal	4aa8 <close>
+    23bc:	6505                	lui	a0,0x1
+    23be:	74a020ef          	jal	4b08 <sbrk>
+    23c2:	6ce020ef          	jal	4a90 <pipe>
+    23c6:	ed05                	bnez	a0,23fe <sbrkarg+0x90>
+    23c8:	70a2                	ld	ra,40(sp)
+    23ca:	7402                	ld	s0,32(sp)
+    23cc:	64e2                	ld	s1,24(sp)
+    23ce:	6942                	ld	s2,16(sp)
+    23d0:	69a2                	ld	s3,8(sp)
+    23d2:	6145                	addi	sp,sp,48
+    23d4:	8082                	ret
+    23d6:	85ce                	mv	a1,s3
+    23d8:	00004517          	auipc	a0,0x4
+    23dc:	b4050513          	addi	a0,a0,-1216 # 5f18 <malloc+0xfcc>
+    23e0:	2b9020ef          	jal	4e98 <printf>
+    23e4:	4505                	li	a0,1
+    23e6:	69a020ef          	jal	4a80 <exit>
+    23ea:	85ce                	mv	a1,s3
+    23ec:	00004517          	auipc	a0,0x4
+    23f0:	b4450513          	addi	a0,a0,-1212 # 5f30 <malloc+0xfe4>
+    23f4:	2a5020ef          	jal	4e98 <printf>
+    23f8:	4505                	li	a0,1
+    23fa:	686020ef          	jal	4a80 <exit>
+    23fe:	85ce                	mv	a1,s3
+    2400:	00003517          	auipc	a0,0x3
+    2404:	62050513          	addi	a0,a0,1568 # 5a20 <malloc+0xad4>
+    2408:	291020ef          	jal	4e98 <printf>
+    240c:	4505                	li	a0,1
+    240e:	672020ef          	jal	4a80 <exit>
+
+0000000000002412 <argptest>:
+    2412:	1101                	addi	sp,sp,-32
+    2414:	ec06                	sd	ra,24(sp)
+    2416:	e822                	sd	s0,16(sp)
+    2418:	e426                	sd	s1,8(sp)
+    241a:	e04a                	sd	s2,0(sp)
+    241c:	1000                	addi	s0,sp,32
+    241e:	892a                	mv	s2,a0
+    2420:	4581                	li	a1,0
+    2422:	00004517          	auipc	a0,0x4
+    2426:	b2650513          	addi	a0,a0,-1242 # 5f48 <malloc+0xffc>
+    242a:	696020ef          	jal	4ac0 <open>
+    242e:	02054563          	bltz	a0,2458 <argptest+0x46>
+    2432:	84aa                	mv	s1,a0
+    2434:	4501                	li	a0,0
+    2436:	6d2020ef          	jal	4b08 <sbrk>
+    243a:	567d                	li	a2,-1
+    243c:	fff50593          	addi	a1,a0,-1
+    2440:	8526                	mv	a0,s1
+    2442:	656020ef          	jal	4a98 <read>
+    2446:	8526                	mv	a0,s1
+    2448:	660020ef          	jal	4aa8 <close>
+    244c:	60e2                	ld	ra,24(sp)
+    244e:	6442                	ld	s0,16(sp)
+    2450:	64a2                	ld	s1,8(sp)
+    2452:	6902                	ld	s2,0(sp)
+    2454:	6105                	addi	sp,sp,32
+    2456:	8082                	ret
+    2458:	85ca                	mv	a1,s2
+    245a:	00003517          	auipc	a0,0x3
+    245e:	4d650513          	addi	a0,a0,1238 # 5930 <malloc+0x9e4>
+    2462:	237020ef          	jal	4e98 <printf>
+    2466:	4505                	li	a0,1
+    2468:	618020ef          	jal	4a80 <exit>
+
+000000000000246c <sbrkbugs>:
+    246c:	1141                	addi	sp,sp,-16
+    246e:	e406                	sd	ra,8(sp)
+    2470:	e022                	sd	s0,0(sp)
+    2472:	0800                	addi	s0,sp,16
+    2474:	604020ef          	jal	4a78 <fork>
+    2478:	00054c63          	bltz	a0,2490 <sbrkbugs+0x24>
+    247c:	e11d                	bnez	a0,24a2 <sbrkbugs+0x36>
+    247e:	68a020ef          	jal	4b08 <sbrk>
+    2482:	40a0053b          	negw	a0,a0
+    2486:	682020ef          	jal	4b08 <sbrk>
+    248a:	4501                	li	a0,0
+    248c:	5f4020ef          	jal	4a80 <exit>
+    2490:	00005517          	auipc	a0,0x5
+    2494:	9f850513          	addi	a0,a0,-1544 # 6e88 <malloc+0x1f3c>
+    2498:	201020ef          	jal	4e98 <printf>
+    249c:	4505                	li	a0,1
+    249e:	5e2020ef          	jal	4a80 <exit>
+    24a2:	4501                	li	a0,0
+    24a4:	5e4020ef          	jal	4a88 <wait>
+    24a8:	5d0020ef          	jal	4a78 <fork>
+    24ac:	00054f63          	bltz	a0,24ca <sbrkbugs+0x5e>
+    24b0:	e515                	bnez	a0,24dc <sbrkbugs+0x70>
+    24b2:	656020ef          	jal	4b08 <sbrk>
+    24b6:	6785                	lui	a5,0x1
+    24b8:	dac7879b          	addiw	a5,a5,-596 # dac <linktest+0x138>
+    24bc:	40a7853b          	subw	a0,a5,a0
+    24c0:	648020ef          	jal	4b08 <sbrk>
+    24c4:	4501                	li	a0,0
+    24c6:	5ba020ef          	jal	4a80 <exit>
+    24ca:	00005517          	auipc	a0,0x5
+    24ce:	9be50513          	addi	a0,a0,-1602 # 6e88 <malloc+0x1f3c>
+    24d2:	1c7020ef          	jal	4e98 <printf>
+    24d6:	4505                	li	a0,1
+    24d8:	5a8020ef          	jal	4a80 <exit>
+    24dc:	4501                	li	a0,0
+    24de:	5aa020ef          	jal	4a88 <wait>
+    24e2:	596020ef          	jal	4a78 <fork>
+    24e6:	02054263          	bltz	a0,250a <sbrkbugs+0x9e>
+    24ea:	e90d                	bnez	a0,251c <sbrkbugs+0xb0>
+    24ec:	61c020ef          	jal	4b08 <sbrk>
+    24f0:	67ad                	lui	a5,0xb
+    24f2:	8007879b          	addiw	a5,a5,-2048 # a800 <uninit+0x298>
+    24f6:	40a7853b          	subw	a0,a5,a0
+    24fa:	60e020ef          	jal	4b08 <sbrk>
+    24fe:	5559                	li	a0,-10
+    2500:	608020ef          	jal	4b08 <sbrk>
+    2504:	4501                	li	a0,0
+    2506:	57a020ef          	jal	4a80 <exit>
+    250a:	00005517          	auipc	a0,0x5
+    250e:	97e50513          	addi	a0,a0,-1666 # 6e88 <malloc+0x1f3c>
+    2512:	187020ef          	jal	4e98 <printf>
+    2516:	4505                	li	a0,1
+    2518:	568020ef          	jal	4a80 <exit>
+    251c:	4501                	li	a0,0
+    251e:	56a020ef          	jal	4a88 <wait>
+    2522:	4501                	li	a0,0
+    2524:	55c020ef          	jal	4a80 <exit>
+
+0000000000002528 <sbrklast>:
+    2528:	7179                	addi	sp,sp,-48
+    252a:	f406                	sd	ra,40(sp)
+    252c:	f022                	sd	s0,32(sp)
+    252e:	ec26                	sd	s1,24(sp)
+    2530:	e84a                	sd	s2,16(sp)
+    2532:	e44e                	sd	s3,8(sp)
+    2534:	e052                	sd	s4,0(sp)
+    2536:	1800                	addi	s0,sp,48
+    2538:	4501                	li	a0,0
+    253a:	5ce020ef          	jal	4b08 <sbrk>
+    253e:	03451793          	slli	a5,a0,0x34
+    2542:	ebad                	bnez	a5,25b4 <sbrklast+0x8c>
+    2544:	6505                	lui	a0,0x1
+    2546:	5c2020ef          	jal	4b08 <sbrk>
+    254a:	4529                	li	a0,10
+    254c:	5bc020ef          	jal	4b08 <sbrk>
+    2550:	5531                	li	a0,-20
+    2552:	5b6020ef          	jal	4b08 <sbrk>
+    2556:	4501                	li	a0,0
+    2558:	5b0020ef          	jal	4b08 <sbrk>
+    255c:	84aa                	mv	s1,a0
+    255e:	fc050913          	addi	s2,a0,-64 # fc0 <bigdir+0x122>
+    2562:	07800a13          	li	s4,120
+    2566:	fd450023          	sb	s4,-64(a0)
+    256a:	fc0500a3          	sb	zero,-63(a0)
+    256e:	20200593          	li	a1,514
+    2572:	854a                	mv	a0,s2
+    2574:	54c020ef          	jal	4ac0 <open>
+    2578:	89aa                	mv	s3,a0
+    257a:	4605                	li	a2,1
+    257c:	85ca                	mv	a1,s2
+    257e:	522020ef          	jal	4aa0 <write>
+    2582:	854e                	mv	a0,s3
+    2584:	524020ef          	jal	4aa8 <close>
+    2588:	4589                	li	a1,2
+    258a:	854a                	mv	a0,s2
+    258c:	534020ef          	jal	4ac0 <open>
+    2590:	fc048023          	sb	zero,-64(s1)
+    2594:	4605                	li	a2,1
+    2596:	85ca                	mv	a1,s2
+    2598:	500020ef          	jal	4a98 <read>
+    259c:	fc04c783          	lbu	a5,-64(s1)
+    25a0:	03479263          	bne	a5,s4,25c4 <sbrklast+0x9c>
+    25a4:	70a2                	ld	ra,40(sp)
+    25a6:	7402                	ld	s0,32(sp)
+    25a8:	64e2                	ld	s1,24(sp)
+    25aa:	6942                	ld	s2,16(sp)
+    25ac:	69a2                	ld	s3,8(sp)
+    25ae:	6a02                	ld	s4,0(sp)
+    25b0:	6145                	addi	sp,sp,48
+    25b2:	8082                	ret
+    25b4:	0347d513          	srli	a0,a5,0x34
+    25b8:	6785                	lui	a5,0x1
+    25ba:	40a7853b          	subw	a0,a5,a0
+    25be:	54a020ef          	jal	4b08 <sbrk>
+    25c2:	b749                	j	2544 <sbrklast+0x1c>
+    25c4:	4505                	li	a0,1
+    25c6:	4ba020ef          	jal	4a80 <exit>
+
+00000000000025ca <sbrk8000>:
+    25ca:	1141                	addi	sp,sp,-16
+    25cc:	e406                	sd	ra,8(sp)
+    25ce:	e022                	sd	s0,0(sp)
+    25d0:	0800                	addi	s0,sp,16
+    25d2:	80000537          	lui	a0,0x80000
+    25d6:	0511                	addi	a0,a0,4 # ffffffff80000004 <base+0xffffffff7fff038c>
+    25d8:	530020ef          	jal	4b08 <sbrk>
+    25dc:	4501                	li	a0,0
+    25de:	52a020ef          	jal	4b08 <sbrk>
+    25e2:	fff54783          	lbu	a5,-1(a0)
+    25e6:	2785                	addiw	a5,a5,1 # 1001 <badarg+0x1>
+    25e8:	0ff7f793          	zext.b	a5,a5
+    25ec:	fef50fa3          	sb	a5,-1(a0)
+    25f0:	60a2                	ld	ra,8(sp)
+    25f2:	6402                	ld	s0,0(sp)
+    25f4:	0141                	addi	sp,sp,16
+    25f6:	8082                	ret
+
+00000000000025f8 <execout>:
+    25f8:	715d                	addi	sp,sp,-80
+    25fa:	e486                	sd	ra,72(sp)
+    25fc:	e0a2                	sd	s0,64(sp)
+    25fe:	fc26                	sd	s1,56(sp)
+    2600:	f84a                	sd	s2,48(sp)
+    2602:	f44e                	sd	s3,40(sp)
+    2604:	f052                	sd	s4,32(sp)
+    2606:	0880                	addi	s0,sp,80
+    2608:	4901                	li	s2,0
+    260a:	49bd                	li	s3,15
+    260c:	46c020ef          	jal	4a78 <fork>
+    2610:	84aa                	mv	s1,a0
+    2612:	00054c63          	bltz	a0,262a <execout+0x32>
+    2616:	c11d                	beqz	a0,263c <execout+0x44>
+    2618:	4501                	li	a0,0
+    261a:	46e020ef          	jal	4a88 <wait>
+    261e:	2905                	addiw	s2,s2,1
+    2620:	ff3916e3          	bne	s2,s3,260c <execout+0x14>
+    2624:	4501                	li	a0,0
+    2626:	45a020ef          	jal	4a80 <exit>
+    262a:	00005517          	auipc	a0,0x5
+    262e:	85e50513          	addi	a0,a0,-1954 # 6e88 <malloc+0x1f3c>
+    2632:	067020ef          	jal	4e98 <printf>
+    2636:	4505                	li	a0,1
+    2638:	448020ef          	jal	4a80 <exit>
+    263c:	59fd                	li	s3,-1
+    263e:	4a05                	li	s4,1
+    2640:	6505                	lui	a0,0x1
+    2642:	4c6020ef          	jal	4b08 <sbrk>
+    2646:	01350763          	beq	a0,s3,2654 <execout+0x5c>
+    264a:	6785                	lui	a5,0x1
+    264c:	97aa                	add	a5,a5,a0
+    264e:	ff478fa3          	sb	s4,-1(a5) # fff <pgbug+0x2b>
+    2652:	b7fd                	j	2640 <execout+0x48>
+    2654:	01205863          	blez	s2,2664 <execout+0x6c>
+    2658:	757d                	lui	a0,0xfffff
+    265a:	4ae020ef          	jal	4b08 <sbrk>
+    265e:	2485                	addiw	s1,s1,1
+    2660:	ff249ce3          	bne	s1,s2,2658 <execout+0x60>
+    2664:	4505                	li	a0,1
+    2666:	442020ef          	jal	4aa8 <close>
+    266a:	00003517          	auipc	a0,0x3
+    266e:	a1e50513          	addi	a0,a0,-1506 # 5088 <malloc+0x13c>
+    2672:	faa43c23          	sd	a0,-72(s0)
+    2676:	00003797          	auipc	a5,0x3
+    267a:	a8278793          	addi	a5,a5,-1406 # 50f8 <malloc+0x1ac>
+    267e:	fcf43023          	sd	a5,-64(s0)
+    2682:	fc043423          	sd	zero,-56(s0)
+    2686:	fb840593          	addi	a1,s0,-72
+    268a:	42e020ef          	jal	4ab8 <exec>
+    268e:	4501                	li	a0,0
+    2690:	3f0020ef          	jal	4a80 <exit>
+
+0000000000002694 <fourteen>:
+    2694:	1101                	addi	sp,sp,-32
+    2696:	ec06                	sd	ra,24(sp)
+    2698:	e822                	sd	s0,16(sp)
+    269a:	e426                	sd	s1,8(sp)
+    269c:	1000                	addi	s0,sp,32
+    269e:	84aa                	mv	s1,a0
+    26a0:	00004517          	auipc	a0,0x4
+    26a4:	a8050513          	addi	a0,a0,-1408 # 6120 <malloc+0x11d4>
+    26a8:	440020ef          	jal	4ae8 <mkdir>
+    26ac:	e555                	bnez	a0,2758 <fourteen+0xc4>
+    26ae:	00004517          	auipc	a0,0x4
+    26b2:	8ca50513          	addi	a0,a0,-1846 # 5f78 <malloc+0x102c>
+    26b6:	432020ef          	jal	4ae8 <mkdir>
+    26ba:	e94d                	bnez	a0,276c <fourteen+0xd8>
+    26bc:	20000593          	li	a1,512
+    26c0:	00004517          	auipc	a0,0x4
+    26c4:	91050513          	addi	a0,a0,-1776 # 5fd0 <malloc+0x1084>
+    26c8:	3f8020ef          	jal	4ac0 <open>
+    26cc:	0a054a63          	bltz	a0,2780 <fourteen+0xec>
+    26d0:	3d8020ef          	jal	4aa8 <close>
+    26d4:	4581                	li	a1,0
+    26d6:	00004517          	auipc	a0,0x4
+    26da:	97250513          	addi	a0,a0,-1678 # 6048 <malloc+0x10fc>
+    26de:	3e2020ef          	jal	4ac0 <open>
+    26e2:	0a054963          	bltz	a0,2794 <fourteen+0x100>
+    26e6:	3c2020ef          	jal	4aa8 <close>
+    26ea:	00004517          	auipc	a0,0x4
+    26ee:	9ce50513          	addi	a0,a0,-1586 # 60b8 <malloc+0x116c>
+    26f2:	3f6020ef          	jal	4ae8 <mkdir>
+    26f6:	c94d                	beqz	a0,27a8 <fourteen+0x114>
+    26f8:	00004517          	auipc	a0,0x4
+    26fc:	a1850513          	addi	a0,a0,-1512 # 6110 <malloc+0x11c4>
+    2700:	3e8020ef          	jal	4ae8 <mkdir>
+    2704:	cd45                	beqz	a0,27bc <fourteen+0x128>
+    2706:	00004517          	auipc	a0,0x4
+    270a:	a0a50513          	addi	a0,a0,-1526 # 6110 <malloc+0x11c4>
+    270e:	3c2020ef          	jal	4ad0 <unlink>
+    2712:	00004517          	auipc	a0,0x4
+    2716:	9a650513          	addi	a0,a0,-1626 # 60b8 <malloc+0x116c>
+    271a:	3b6020ef          	jal	4ad0 <unlink>
+    271e:	00004517          	auipc	a0,0x4
+    2722:	92a50513          	addi	a0,a0,-1750 # 6048 <malloc+0x10fc>
+    2726:	3aa020ef          	jal	4ad0 <unlink>
+    272a:	00004517          	auipc	a0,0x4
+    272e:	8a650513          	addi	a0,a0,-1882 # 5fd0 <malloc+0x1084>
+    2732:	39e020ef          	jal	4ad0 <unlink>
+    2736:	00004517          	auipc	a0,0x4
+    273a:	84250513          	addi	a0,a0,-1982 # 5f78 <malloc+0x102c>
+    273e:	392020ef          	jal	4ad0 <unlink>
+    2742:	00004517          	auipc	a0,0x4
+    2746:	9de50513          	addi	a0,a0,-1570 # 6120 <malloc+0x11d4>
+    274a:	386020ef          	jal	4ad0 <unlink>
+    274e:	60e2                	ld	ra,24(sp)
+    2750:	6442                	ld	s0,16(sp)
+    2752:	64a2                	ld	s1,8(sp)
+    2754:	6105                	addi	sp,sp,32
+    2756:	8082                	ret
+    2758:	85a6                	mv	a1,s1
+    275a:	00003517          	auipc	a0,0x3
+    275e:	7f650513          	addi	a0,a0,2038 # 5f50 <malloc+0x1004>
+    2762:	736020ef          	jal	4e98 <printf>
+    2766:	4505                	li	a0,1
+    2768:	318020ef          	jal	4a80 <exit>
+    276c:	85a6                	mv	a1,s1
+    276e:	00004517          	auipc	a0,0x4
+    2772:	82a50513          	addi	a0,a0,-2006 # 5f98 <malloc+0x104c>
+    2776:	722020ef          	jal	4e98 <printf>
+    277a:	4505                	li	a0,1
+    277c:	304020ef          	jal	4a80 <exit>
+    2780:	85a6                	mv	a1,s1
+    2782:	00004517          	auipc	a0,0x4
+    2786:	87e50513          	addi	a0,a0,-1922 # 6000 <malloc+0x10b4>
+    278a:	70e020ef          	jal	4e98 <printf>
+    278e:	4505                	li	a0,1
+    2790:	2f0020ef          	jal	4a80 <exit>
+    2794:	85a6                	mv	a1,s1
+    2796:	00004517          	auipc	a0,0x4
+    279a:	8e250513          	addi	a0,a0,-1822 # 6078 <malloc+0x112c>
+    279e:	6fa020ef          	jal	4e98 <printf>
+    27a2:	4505                	li	a0,1
+    27a4:	2dc020ef          	jal	4a80 <exit>
+    27a8:	85a6                	mv	a1,s1
+    27aa:	00004517          	auipc	a0,0x4
+    27ae:	92e50513          	addi	a0,a0,-1746 # 60d8 <malloc+0x118c>
+    27b2:	6e6020ef          	jal	4e98 <printf>
+    27b6:	4505                	li	a0,1
+    27b8:	2c8020ef          	jal	4a80 <exit>
+    27bc:	85a6                	mv	a1,s1
+    27be:	00004517          	auipc	a0,0x4
+    27c2:	97250513          	addi	a0,a0,-1678 # 6130 <malloc+0x11e4>
+    27c6:	6d2020ef          	jal	4e98 <printf>
+    27ca:	4505                	li	a0,1
+    27cc:	2b4020ef          	jal	4a80 <exit>
+
+00000000000027d0 <diskfull>:
+    27d0:	b8010113          	addi	sp,sp,-1152
+    27d4:	46113c23          	sd	ra,1144(sp)
+    27d8:	46813823          	sd	s0,1136(sp)
+    27dc:	46913423          	sd	s1,1128(sp)
+    27e0:	47213023          	sd	s2,1120(sp)
+    27e4:	45313c23          	sd	s3,1112(sp)
+    27e8:	45413823          	sd	s4,1104(sp)
+    27ec:	45513423          	sd	s5,1096(sp)
+    27f0:	45613023          	sd	s6,1088(sp)
+    27f4:	43713c23          	sd	s7,1080(sp)
+    27f8:	43813823          	sd	s8,1072(sp)
+    27fc:	43913423          	sd	s9,1064(sp)
+    2800:	48010413          	addi	s0,sp,1152
+    2804:	8caa                	mv	s9,a0
+    2806:	00004517          	auipc	a0,0x4
+    280a:	96250513          	addi	a0,a0,-1694 # 6168 <malloc+0x121c>
+    280e:	2c2020ef          	jal	4ad0 <unlink>
+    2812:	03000993          	li	s3,48
+    2816:	06200b13          	li	s6,98
+    281a:	06900a93          	li	s5,105
+    281e:	06700a13          	li	s4,103
+    2822:	10c00b93          	li	s7,268
+    2826:	07f00c13          	li	s8,127
+    282a:	aab9                	j	2988 <diskfull+0x1b8>
+    282c:	b8040613          	addi	a2,s0,-1152
+    2830:	85e6                	mv	a1,s9
+    2832:	00004517          	auipc	a0,0x4
+    2836:	94650513          	addi	a0,a0,-1722 # 6178 <malloc+0x122c>
+    283a:	65e020ef          	jal	4e98 <printf>
+    283e:	a039                	j	284c <diskfull+0x7c>
+    2840:	854a                	mv	a0,s2
+    2842:	266020ef          	jal	4aa8 <close>
+    2846:	854a                	mv	a0,s2
+    2848:	260020ef          	jal	4aa8 <close>
+    284c:	4481                	li	s1,0
+    284e:	07a00913          	li	s2,122
+    2852:	08000993          	li	s3,128
+    2856:	bb240023          	sb	s2,-1120(s0)
+    285a:	bb2400a3          	sb	s2,-1119(s0)
+    285e:	41f4d71b          	sraiw	a4,s1,0x1f
+    2862:	01b7571b          	srliw	a4,a4,0x1b
+    2866:	009707bb          	addw	a5,a4,s1
+    286a:	4057d69b          	sraiw	a3,a5,0x5
+    286e:	0306869b          	addiw	a3,a3,48
+    2872:	bad40123          	sb	a3,-1118(s0)
+    2876:	8bfd                	andi	a5,a5,31
+    2878:	9f99                	subw	a5,a5,a4
+    287a:	0307879b          	addiw	a5,a5,48
+    287e:	baf401a3          	sb	a5,-1117(s0)
+    2882:	ba040223          	sb	zero,-1116(s0)
+    2886:	ba040513          	addi	a0,s0,-1120
+    288a:	246020ef          	jal	4ad0 <unlink>
+    288e:	60200593          	li	a1,1538
+    2892:	ba040513          	addi	a0,s0,-1120
+    2896:	22a020ef          	jal	4ac0 <open>
+    289a:	00054763          	bltz	a0,28a8 <diskfull+0xd8>
+    289e:	20a020ef          	jal	4aa8 <close>
+    28a2:	2485                	addiw	s1,s1,1
+    28a4:	fb3499e3          	bne	s1,s3,2856 <diskfull+0x86>
+    28a8:	00004517          	auipc	a0,0x4
+    28ac:	8c050513          	addi	a0,a0,-1856 # 6168 <malloc+0x121c>
+    28b0:	238020ef          	jal	4ae8 <mkdir>
+    28b4:	12050063          	beqz	a0,29d4 <diskfull+0x204>
+    28b8:	00004517          	auipc	a0,0x4
+    28bc:	8b050513          	addi	a0,a0,-1872 # 6168 <malloc+0x121c>
+    28c0:	210020ef          	jal	4ad0 <unlink>
+    28c4:	4481                	li	s1,0
+    28c6:	07a00913          	li	s2,122
+    28ca:	08000993          	li	s3,128
+    28ce:	bb240023          	sb	s2,-1120(s0)
+    28d2:	bb2400a3          	sb	s2,-1119(s0)
+    28d6:	41f4d71b          	sraiw	a4,s1,0x1f
+    28da:	01b7571b          	srliw	a4,a4,0x1b
+    28de:	009707bb          	addw	a5,a4,s1
+    28e2:	4057d69b          	sraiw	a3,a5,0x5
+    28e6:	0306869b          	addiw	a3,a3,48
+    28ea:	bad40123          	sb	a3,-1118(s0)
+    28ee:	8bfd                	andi	a5,a5,31
+    28f0:	9f99                	subw	a5,a5,a4
+    28f2:	0307879b          	addiw	a5,a5,48
+    28f6:	baf401a3          	sb	a5,-1117(s0)
+    28fa:	ba040223          	sb	zero,-1116(s0)
+    28fe:	ba040513          	addi	a0,s0,-1120
+    2902:	1ce020ef          	jal	4ad0 <unlink>
+    2906:	2485                	addiw	s1,s1,1
+    2908:	fd3493e3          	bne	s1,s3,28ce <diskfull+0xfe>
+    290c:	03000493          	li	s1,48
+    2910:	06200a93          	li	s5,98
+    2914:	06900a13          	li	s4,105
+    2918:	06700993          	li	s3,103
+    291c:	07f00913          	li	s2,127
+    2920:	bb540023          	sb	s5,-1120(s0)
+    2924:	bb4400a3          	sb	s4,-1119(s0)
+    2928:	bb340123          	sb	s3,-1118(s0)
+    292c:	ba9401a3          	sb	s1,-1117(s0)
+    2930:	ba040223          	sb	zero,-1116(s0)
+    2934:	ba040513          	addi	a0,s0,-1120
+    2938:	198020ef          	jal	4ad0 <unlink>
+    293c:	2485                	addiw	s1,s1,1
+    293e:	0ff4f493          	zext.b	s1,s1
+    2942:	fd249fe3          	bne	s1,s2,2920 <diskfull+0x150>
+    2946:	47813083          	ld	ra,1144(sp)
+    294a:	47013403          	ld	s0,1136(sp)
+    294e:	46813483          	ld	s1,1128(sp)
+    2952:	46013903          	ld	s2,1120(sp)
+    2956:	45813983          	ld	s3,1112(sp)
+    295a:	45013a03          	ld	s4,1104(sp)
+    295e:	44813a83          	ld	s5,1096(sp)
+    2962:	44013b03          	ld	s6,1088(sp)
+    2966:	43813b83          	ld	s7,1080(sp)
+    296a:	43013c03          	ld	s8,1072(sp)
+    296e:	42813c83          	ld	s9,1064(sp)
+    2972:	48010113          	addi	sp,sp,1152
+    2976:	8082                	ret
+    2978:	854a                	mv	a0,s2
+    297a:	12e020ef          	jal	4aa8 <close>
+    297e:	2985                	addiw	s3,s3,1
+    2980:	0ff9f993          	zext.b	s3,s3
+    2984:	ed8984e3          	beq	s3,s8,284c <diskfull+0x7c>
+    2988:	b9640023          	sb	s6,-1152(s0)
+    298c:	b95400a3          	sb	s5,-1151(s0)
+    2990:	b9440123          	sb	s4,-1150(s0)
+    2994:	b93401a3          	sb	s3,-1149(s0)
+    2998:	b8040223          	sb	zero,-1148(s0)
+    299c:	b8040513          	addi	a0,s0,-1152
+    29a0:	130020ef          	jal	4ad0 <unlink>
+    29a4:	60200593          	li	a1,1538
+    29a8:	b8040513          	addi	a0,s0,-1152
+    29ac:	114020ef          	jal	4ac0 <open>
+    29b0:	892a                	mv	s2,a0
+    29b2:	e6054de3          	bltz	a0,282c <diskfull+0x5c>
+    29b6:	84de                	mv	s1,s7
+    29b8:	40000613          	li	a2,1024
+    29bc:	ba040593          	addi	a1,s0,-1120
+    29c0:	854a                	mv	a0,s2
+    29c2:	0de020ef          	jal	4aa0 <write>
+    29c6:	40000793          	li	a5,1024
+    29ca:	e6f51be3          	bne	a0,a5,2840 <diskfull+0x70>
+    29ce:	34fd                	addiw	s1,s1,-1
+    29d0:	f4e5                	bnez	s1,29b8 <diskfull+0x1e8>
+    29d2:	b75d                	j	2978 <diskfull+0x1a8>
+    29d4:	85e6                	mv	a1,s9
+    29d6:	00003517          	auipc	a0,0x3
+    29da:	7c250513          	addi	a0,a0,1986 # 6198 <malloc+0x124c>
+    29de:	4ba020ef          	jal	4e98 <printf>
+    29e2:	bdd9                	j	28b8 <diskfull+0xe8>
+
+00000000000029e4 <iputtest>:
+    29e4:	1101                	addi	sp,sp,-32
+    29e6:	ec06                	sd	ra,24(sp)
+    29e8:	e822                	sd	s0,16(sp)
+    29ea:	e426                	sd	s1,8(sp)
+    29ec:	1000                	addi	s0,sp,32
+    29ee:	84aa                	mv	s1,a0
+    29f0:	00003517          	auipc	a0,0x3
+    29f4:	7d850513          	addi	a0,a0,2008 # 61c8 <malloc+0x127c>
+    29f8:	0f0020ef          	jal	4ae8 <mkdir>
+    29fc:	02054f63          	bltz	a0,2a3a <iputtest+0x56>
+    2a00:	00003517          	auipc	a0,0x3
+    2a04:	7c850513          	addi	a0,a0,1992 # 61c8 <malloc+0x127c>
+    2a08:	0e8020ef          	jal	4af0 <chdir>
+    2a0c:	04054163          	bltz	a0,2a4e <iputtest+0x6a>
+    2a10:	00003517          	auipc	a0,0x3
+    2a14:	7f850513          	addi	a0,a0,2040 # 6208 <malloc+0x12bc>
+    2a18:	0b8020ef          	jal	4ad0 <unlink>
+    2a1c:	04054363          	bltz	a0,2a62 <iputtest+0x7e>
+    2a20:	00004517          	auipc	a0,0x4
+    2a24:	81850513          	addi	a0,a0,-2024 # 6238 <malloc+0x12ec>
+    2a28:	0c8020ef          	jal	4af0 <chdir>
+    2a2c:	04054563          	bltz	a0,2a76 <iputtest+0x92>
+    2a30:	60e2                	ld	ra,24(sp)
+    2a32:	6442                	ld	s0,16(sp)
+    2a34:	64a2                	ld	s1,8(sp)
+    2a36:	6105                	addi	sp,sp,32
+    2a38:	8082                	ret
+    2a3a:	85a6                	mv	a1,s1
+    2a3c:	00003517          	auipc	a0,0x3
+    2a40:	79450513          	addi	a0,a0,1940 # 61d0 <malloc+0x1284>
+    2a44:	454020ef          	jal	4e98 <printf>
+    2a48:	4505                	li	a0,1
+    2a4a:	036020ef          	jal	4a80 <exit>
+    2a4e:	85a6                	mv	a1,s1
+    2a50:	00003517          	auipc	a0,0x3
+    2a54:	79850513          	addi	a0,a0,1944 # 61e8 <malloc+0x129c>
+    2a58:	440020ef          	jal	4e98 <printf>
+    2a5c:	4505                	li	a0,1
+    2a5e:	022020ef          	jal	4a80 <exit>
+    2a62:	85a6                	mv	a1,s1
+    2a64:	00003517          	auipc	a0,0x3
+    2a68:	7b450513          	addi	a0,a0,1972 # 6218 <malloc+0x12cc>
+    2a6c:	42c020ef          	jal	4e98 <printf>
+    2a70:	4505                	li	a0,1
+    2a72:	00e020ef          	jal	4a80 <exit>
+    2a76:	85a6                	mv	a1,s1
+    2a78:	00003517          	auipc	a0,0x3
+    2a7c:	7c850513          	addi	a0,a0,1992 # 6240 <malloc+0x12f4>
+    2a80:	418020ef          	jal	4e98 <printf>
+    2a84:	4505                	li	a0,1
+    2a86:	7fb010ef          	jal	4a80 <exit>
+
+0000000000002a8a <exitiputtest>:
+    2a8a:	7179                	addi	sp,sp,-48
+    2a8c:	f406                	sd	ra,40(sp)
+    2a8e:	f022                	sd	s0,32(sp)
+    2a90:	ec26                	sd	s1,24(sp)
+    2a92:	1800                	addi	s0,sp,48
+    2a94:	84aa                	mv	s1,a0
+    2a96:	7e3010ef          	jal	4a78 <fork>
+    2a9a:	02054e63          	bltz	a0,2ad6 <exitiputtest+0x4c>
+    2a9e:	e541                	bnez	a0,2b26 <exitiputtest+0x9c>
+    2aa0:	00003517          	auipc	a0,0x3
+    2aa4:	72850513          	addi	a0,a0,1832 # 61c8 <malloc+0x127c>
+    2aa8:	040020ef          	jal	4ae8 <mkdir>
+    2aac:	02054f63          	bltz	a0,2aea <exitiputtest+0x60>
+    2ab0:	00003517          	auipc	a0,0x3
+    2ab4:	71850513          	addi	a0,a0,1816 # 61c8 <malloc+0x127c>
+    2ab8:	038020ef          	jal	4af0 <chdir>
+    2abc:	04054163          	bltz	a0,2afe <exitiputtest+0x74>
+    2ac0:	00003517          	auipc	a0,0x3
+    2ac4:	74850513          	addi	a0,a0,1864 # 6208 <malloc+0x12bc>
+    2ac8:	008020ef          	jal	4ad0 <unlink>
+    2acc:	04054363          	bltz	a0,2b12 <exitiputtest+0x88>
+    2ad0:	4501                	li	a0,0
+    2ad2:	7af010ef          	jal	4a80 <exit>
+    2ad6:	85a6                	mv	a1,s1
+    2ad8:	00003517          	auipc	a0,0x3
+    2adc:	e4050513          	addi	a0,a0,-448 # 5918 <malloc+0x9cc>
+    2ae0:	3b8020ef          	jal	4e98 <printf>
+    2ae4:	4505                	li	a0,1
+    2ae6:	79b010ef          	jal	4a80 <exit>
+    2aea:	85a6                	mv	a1,s1
+    2aec:	00003517          	auipc	a0,0x3
+    2af0:	6e450513          	addi	a0,a0,1764 # 61d0 <malloc+0x1284>
+    2af4:	3a4020ef          	jal	4e98 <printf>
+    2af8:	4505                	li	a0,1
+    2afa:	787010ef          	jal	4a80 <exit>
+    2afe:	85a6                	mv	a1,s1
+    2b00:	00003517          	auipc	a0,0x3
+    2b04:	75850513          	addi	a0,a0,1880 # 6258 <malloc+0x130c>
+    2b08:	390020ef          	jal	4e98 <printf>
+    2b0c:	4505                	li	a0,1
+    2b0e:	773010ef          	jal	4a80 <exit>
+    2b12:	85a6                	mv	a1,s1
+    2b14:	00003517          	auipc	a0,0x3
+    2b18:	70450513          	addi	a0,a0,1796 # 6218 <malloc+0x12cc>
+    2b1c:	37c020ef          	jal	4e98 <printf>
+    2b20:	4505                	li	a0,1
+    2b22:	75f010ef          	jal	4a80 <exit>
+    2b26:	fdc40513          	addi	a0,s0,-36
+    2b2a:	75f010ef          	jal	4a88 <wait>
+    2b2e:	fdc42503          	lw	a0,-36(s0)
+    2b32:	74f010ef          	jal	4a80 <exit>
+
+0000000000002b36 <dirtest>:
+    2b36:	1101                	addi	sp,sp,-32
+    2b38:	ec06                	sd	ra,24(sp)
+    2b3a:	e822                	sd	s0,16(sp)
+    2b3c:	e426                	sd	s1,8(sp)
+    2b3e:	1000                	addi	s0,sp,32
+    2b40:	84aa                	mv	s1,a0
+    2b42:	00003517          	auipc	a0,0x3
+    2b46:	72e50513          	addi	a0,a0,1838 # 6270 <malloc+0x1324>
+    2b4a:	79f010ef          	jal	4ae8 <mkdir>
+    2b4e:	02054f63          	bltz	a0,2b8c <dirtest+0x56>
+    2b52:	00003517          	auipc	a0,0x3
+    2b56:	71e50513          	addi	a0,a0,1822 # 6270 <malloc+0x1324>
+    2b5a:	797010ef          	jal	4af0 <chdir>
+    2b5e:	04054163          	bltz	a0,2ba0 <dirtest+0x6a>
+    2b62:	00003517          	auipc	a0,0x3
+    2b66:	72e50513          	addi	a0,a0,1838 # 6290 <malloc+0x1344>
+    2b6a:	787010ef          	jal	4af0 <chdir>
+    2b6e:	04054363          	bltz	a0,2bb4 <dirtest+0x7e>
+    2b72:	00003517          	auipc	a0,0x3
+    2b76:	6fe50513          	addi	a0,a0,1790 # 6270 <malloc+0x1324>
+    2b7a:	757010ef          	jal	4ad0 <unlink>
+    2b7e:	04054563          	bltz	a0,2bc8 <dirtest+0x92>
+    2b82:	60e2                	ld	ra,24(sp)
+    2b84:	6442                	ld	s0,16(sp)
+    2b86:	64a2                	ld	s1,8(sp)
+    2b88:	6105                	addi	sp,sp,32
+    2b8a:	8082                	ret
+    2b8c:	85a6                	mv	a1,s1
+    2b8e:	00003517          	auipc	a0,0x3
+    2b92:	64250513          	addi	a0,a0,1602 # 61d0 <malloc+0x1284>
+    2b96:	302020ef          	jal	4e98 <printf>
+    2b9a:	4505                	li	a0,1
+    2b9c:	6e5010ef          	jal	4a80 <exit>
+    2ba0:	85a6                	mv	a1,s1
+    2ba2:	00003517          	auipc	a0,0x3
+    2ba6:	6d650513          	addi	a0,a0,1750 # 6278 <malloc+0x132c>
+    2baa:	2ee020ef          	jal	4e98 <printf>
+    2bae:	4505                	li	a0,1
+    2bb0:	6d1010ef          	jal	4a80 <exit>
+    2bb4:	85a6                	mv	a1,s1
+    2bb6:	00003517          	auipc	a0,0x3
+    2bba:	6e250513          	addi	a0,a0,1762 # 6298 <malloc+0x134c>
+    2bbe:	2da020ef          	jal	4e98 <printf>
+    2bc2:	4505                	li	a0,1
+    2bc4:	6bd010ef          	jal	4a80 <exit>
+    2bc8:	85a6                	mv	a1,s1
+    2bca:	00003517          	auipc	a0,0x3
+    2bce:	6e650513          	addi	a0,a0,1766 # 62b0 <malloc+0x1364>
+    2bd2:	2c6020ef          	jal	4e98 <printf>
+    2bd6:	4505                	li	a0,1
+    2bd8:	6a9010ef          	jal	4a80 <exit>
+
+0000000000002bdc <subdir>:
+    2bdc:	1101                	addi	sp,sp,-32
+    2bde:	ec06                	sd	ra,24(sp)
+    2be0:	e822                	sd	s0,16(sp)
+    2be2:	e426                	sd	s1,8(sp)
+    2be4:	e04a                	sd	s2,0(sp)
+    2be6:	1000                	addi	s0,sp,32
+    2be8:	892a                	mv	s2,a0
+    2bea:	00004517          	auipc	a0,0x4
+    2bee:	80e50513          	addi	a0,a0,-2034 # 63f8 <malloc+0x14ac>
+    2bf2:	6df010ef          	jal	4ad0 <unlink>
+    2bf6:	00003517          	auipc	a0,0x3
+    2bfa:	6d250513          	addi	a0,a0,1746 # 62c8 <malloc+0x137c>
+    2bfe:	6eb010ef          	jal	4ae8 <mkdir>
+    2c02:	2e051263          	bnez	a0,2ee6 <subdir+0x30a>
+    2c06:	20200593          	li	a1,514
+    2c0a:	00003517          	auipc	a0,0x3
+    2c0e:	6de50513          	addi	a0,a0,1758 # 62e8 <malloc+0x139c>
+    2c12:	6af010ef          	jal	4ac0 <open>
+    2c16:	84aa                	mv	s1,a0
+    2c18:	2e054163          	bltz	a0,2efa <subdir+0x31e>
+    2c1c:	4609                	li	a2,2
+    2c1e:	00003597          	auipc	a1,0x3
+    2c22:	7da58593          	addi	a1,a1,2010 # 63f8 <malloc+0x14ac>
+    2c26:	67b010ef          	jal	4aa0 <write>
+    2c2a:	8526                	mv	a0,s1
+    2c2c:	67d010ef          	jal	4aa8 <close>
+    2c30:	00003517          	auipc	a0,0x3
+    2c34:	69850513          	addi	a0,a0,1688 # 62c8 <malloc+0x137c>
+    2c38:	699010ef          	jal	4ad0 <unlink>
+    2c3c:	2c055963          	bgez	a0,2f0e <subdir+0x332>
+    2c40:	00003517          	auipc	a0,0x3
+    2c44:	70050513          	addi	a0,a0,1792 # 6340 <malloc+0x13f4>
+    2c48:	6a1010ef          	jal	4ae8 <mkdir>
+    2c4c:	2c051b63          	bnez	a0,2f22 <subdir+0x346>
+    2c50:	20200593          	li	a1,514
+    2c54:	00003517          	auipc	a0,0x3
+    2c58:	71450513          	addi	a0,a0,1812 # 6368 <malloc+0x141c>
+    2c5c:	665010ef          	jal	4ac0 <open>
+    2c60:	84aa                	mv	s1,a0
+    2c62:	2c054a63          	bltz	a0,2f36 <subdir+0x35a>
+    2c66:	4609                	li	a2,2
+    2c68:	00003597          	auipc	a1,0x3
+    2c6c:	73058593          	addi	a1,a1,1840 # 6398 <malloc+0x144c>
+    2c70:	631010ef          	jal	4aa0 <write>
+    2c74:	8526                	mv	a0,s1
+    2c76:	633010ef          	jal	4aa8 <close>
+    2c7a:	4581                	li	a1,0
+    2c7c:	00003517          	auipc	a0,0x3
+    2c80:	72450513          	addi	a0,a0,1828 # 63a0 <malloc+0x1454>
+    2c84:	63d010ef          	jal	4ac0 <open>
+    2c88:	84aa                	mv	s1,a0
+    2c8a:	2c054063          	bltz	a0,2f4a <subdir+0x36e>
+    2c8e:	660d                	lui	a2,0x3
+    2c90:	0000a597          	auipc	a1,0xa
+    2c94:	fe858593          	addi	a1,a1,-24 # cc78 <buf>
+    2c98:	601010ef          	jal	4a98 <read>
+    2c9c:	4789                	li	a5,2
+    2c9e:	2cf51063          	bne	a0,a5,2f5e <subdir+0x382>
+    2ca2:	0000a717          	auipc	a4,0xa
+    2ca6:	fd674703          	lbu	a4,-42(a4) # cc78 <buf>
+    2caa:	06600793          	li	a5,102
+    2cae:	2af71863          	bne	a4,a5,2f5e <subdir+0x382>
+    2cb2:	8526                	mv	a0,s1
+    2cb4:	5f5010ef          	jal	4aa8 <close>
+    2cb8:	00003597          	auipc	a1,0x3
+    2cbc:	73858593          	addi	a1,a1,1848 # 63f0 <malloc+0x14a4>
+    2cc0:	00003517          	auipc	a0,0x3
+    2cc4:	6a850513          	addi	a0,a0,1704 # 6368 <malloc+0x141c>
+    2cc8:	619010ef          	jal	4ae0 <link>
+    2ccc:	2a051363          	bnez	a0,2f72 <subdir+0x396>
+    2cd0:	00003517          	auipc	a0,0x3
+    2cd4:	69850513          	addi	a0,a0,1688 # 6368 <malloc+0x141c>
+    2cd8:	5f9010ef          	jal	4ad0 <unlink>
+    2cdc:	2a051563          	bnez	a0,2f86 <subdir+0x3aa>
+    2ce0:	4581                	li	a1,0
+    2ce2:	00003517          	auipc	a0,0x3
+    2ce6:	68650513          	addi	a0,a0,1670 # 6368 <malloc+0x141c>
+    2cea:	5d7010ef          	jal	4ac0 <open>
+    2cee:	2a055663          	bgez	a0,2f9a <subdir+0x3be>
+    2cf2:	00003517          	auipc	a0,0x3
+    2cf6:	5d650513          	addi	a0,a0,1494 # 62c8 <malloc+0x137c>
+    2cfa:	5f7010ef          	jal	4af0 <chdir>
+    2cfe:	2a051863          	bnez	a0,2fae <subdir+0x3d2>
+    2d02:	00003517          	auipc	a0,0x3
+    2d06:	78650513          	addi	a0,a0,1926 # 6488 <malloc+0x153c>
+    2d0a:	5e7010ef          	jal	4af0 <chdir>
+    2d0e:	2a051a63          	bnez	a0,2fc2 <subdir+0x3e6>
+    2d12:	00003517          	auipc	a0,0x3
+    2d16:	7a650513          	addi	a0,a0,1958 # 64b8 <malloc+0x156c>
+    2d1a:	5d7010ef          	jal	4af0 <chdir>
+    2d1e:	2a051c63          	bnez	a0,2fd6 <subdir+0x3fa>
+    2d22:	00003517          	auipc	a0,0x3
+    2d26:	7ce50513          	addi	a0,a0,1998 # 64f0 <malloc+0x15a4>
+    2d2a:	5c7010ef          	jal	4af0 <chdir>
+    2d2e:	2a051e63          	bnez	a0,2fea <subdir+0x40e>
+    2d32:	4581                	li	a1,0
+    2d34:	00003517          	auipc	a0,0x3
+    2d38:	6bc50513          	addi	a0,a0,1724 # 63f0 <malloc+0x14a4>
+    2d3c:	585010ef          	jal	4ac0 <open>
+    2d40:	84aa                	mv	s1,a0
+    2d42:	2a054e63          	bltz	a0,2ffe <subdir+0x422>
+    2d46:	660d                	lui	a2,0x3
+    2d48:	0000a597          	auipc	a1,0xa
+    2d4c:	f3058593          	addi	a1,a1,-208 # cc78 <buf>
+    2d50:	549010ef          	jal	4a98 <read>
+    2d54:	4789                	li	a5,2
+    2d56:	2af51e63          	bne	a0,a5,3012 <subdir+0x436>
+    2d5a:	8526                	mv	a0,s1
+    2d5c:	54d010ef          	jal	4aa8 <close>
+    2d60:	4581                	li	a1,0
+    2d62:	00003517          	auipc	a0,0x3
+    2d66:	60650513          	addi	a0,a0,1542 # 6368 <malloc+0x141c>
+    2d6a:	557010ef          	jal	4ac0 <open>
+    2d6e:	2a055c63          	bgez	a0,3026 <subdir+0x44a>
+    2d72:	20200593          	li	a1,514
+    2d76:	00004517          	auipc	a0,0x4
+    2d7a:	80a50513          	addi	a0,a0,-2038 # 6580 <malloc+0x1634>
+    2d7e:	543010ef          	jal	4ac0 <open>
+    2d82:	2a055c63          	bgez	a0,303a <subdir+0x45e>
+    2d86:	20200593          	li	a1,514
+    2d8a:	00004517          	auipc	a0,0x4
+    2d8e:	82650513          	addi	a0,a0,-2010 # 65b0 <malloc+0x1664>
+    2d92:	52f010ef          	jal	4ac0 <open>
+    2d96:	2a055c63          	bgez	a0,304e <subdir+0x472>
+    2d9a:	20000593          	li	a1,512
+    2d9e:	00003517          	auipc	a0,0x3
+    2da2:	52a50513          	addi	a0,a0,1322 # 62c8 <malloc+0x137c>
+    2da6:	51b010ef          	jal	4ac0 <open>
+    2daa:	2a055c63          	bgez	a0,3062 <subdir+0x486>
+    2dae:	4589                	li	a1,2
+    2db0:	00003517          	auipc	a0,0x3
+    2db4:	51850513          	addi	a0,a0,1304 # 62c8 <malloc+0x137c>
+    2db8:	509010ef          	jal	4ac0 <open>
+    2dbc:	2a055d63          	bgez	a0,3076 <subdir+0x49a>
+    2dc0:	4585                	li	a1,1
+    2dc2:	00003517          	auipc	a0,0x3
+    2dc6:	50650513          	addi	a0,a0,1286 # 62c8 <malloc+0x137c>
+    2dca:	4f7010ef          	jal	4ac0 <open>
+    2dce:	2a055e63          	bgez	a0,308a <subdir+0x4ae>
+    2dd2:	00004597          	auipc	a1,0x4
+    2dd6:	86e58593          	addi	a1,a1,-1938 # 6640 <malloc+0x16f4>
+    2dda:	00003517          	auipc	a0,0x3
+    2dde:	7a650513          	addi	a0,a0,1958 # 6580 <malloc+0x1634>
+    2de2:	4ff010ef          	jal	4ae0 <link>
+    2de6:	2a050c63          	beqz	a0,309e <subdir+0x4c2>
+    2dea:	00004597          	auipc	a1,0x4
+    2dee:	85658593          	addi	a1,a1,-1962 # 6640 <malloc+0x16f4>
+    2df2:	00003517          	auipc	a0,0x3
+    2df6:	7be50513          	addi	a0,a0,1982 # 65b0 <malloc+0x1664>
+    2dfa:	4e7010ef          	jal	4ae0 <link>
+    2dfe:	2a050a63          	beqz	a0,30b2 <subdir+0x4d6>
+    2e02:	00003597          	auipc	a1,0x3
+    2e06:	5ee58593          	addi	a1,a1,1518 # 63f0 <malloc+0x14a4>
+    2e0a:	00003517          	auipc	a0,0x3
+    2e0e:	4de50513          	addi	a0,a0,1246 # 62e8 <malloc+0x139c>
+    2e12:	4cf010ef          	jal	4ae0 <link>
+    2e16:	2a050863          	beqz	a0,30c6 <subdir+0x4ea>
+    2e1a:	00003517          	auipc	a0,0x3
+    2e1e:	76650513          	addi	a0,a0,1894 # 6580 <malloc+0x1634>
+    2e22:	4c7010ef          	jal	4ae8 <mkdir>
+    2e26:	2a050a63          	beqz	a0,30da <subdir+0x4fe>
+    2e2a:	00003517          	auipc	a0,0x3
+    2e2e:	78650513          	addi	a0,a0,1926 # 65b0 <malloc+0x1664>
+    2e32:	4b7010ef          	jal	4ae8 <mkdir>
+    2e36:	2a050c63          	beqz	a0,30ee <subdir+0x512>
+    2e3a:	00003517          	auipc	a0,0x3
+    2e3e:	5b650513          	addi	a0,a0,1462 # 63f0 <malloc+0x14a4>
+    2e42:	4a7010ef          	jal	4ae8 <mkdir>
+    2e46:	2a050e63          	beqz	a0,3102 <subdir+0x526>
+    2e4a:	00003517          	auipc	a0,0x3
+    2e4e:	76650513          	addi	a0,a0,1894 # 65b0 <malloc+0x1664>
+    2e52:	47f010ef          	jal	4ad0 <unlink>
+    2e56:	2c050063          	beqz	a0,3116 <subdir+0x53a>
+    2e5a:	00003517          	auipc	a0,0x3
+    2e5e:	72650513          	addi	a0,a0,1830 # 6580 <malloc+0x1634>
+    2e62:	46f010ef          	jal	4ad0 <unlink>
+    2e66:	2c050263          	beqz	a0,312a <subdir+0x54e>
+    2e6a:	00003517          	auipc	a0,0x3
+    2e6e:	47e50513          	addi	a0,a0,1150 # 62e8 <malloc+0x139c>
+    2e72:	47f010ef          	jal	4af0 <chdir>
+    2e76:	2c050463          	beqz	a0,313e <subdir+0x562>
+    2e7a:	00004517          	auipc	a0,0x4
+    2e7e:	91650513          	addi	a0,a0,-1770 # 6790 <malloc+0x1844>
+    2e82:	46f010ef          	jal	4af0 <chdir>
+    2e86:	2c050663          	beqz	a0,3152 <subdir+0x576>
+    2e8a:	00003517          	auipc	a0,0x3
+    2e8e:	56650513          	addi	a0,a0,1382 # 63f0 <malloc+0x14a4>
+    2e92:	43f010ef          	jal	4ad0 <unlink>
+    2e96:	2c051863          	bnez	a0,3166 <subdir+0x58a>
+    2e9a:	00003517          	auipc	a0,0x3
+    2e9e:	44e50513          	addi	a0,a0,1102 # 62e8 <malloc+0x139c>
+    2ea2:	42f010ef          	jal	4ad0 <unlink>
+    2ea6:	2c051a63          	bnez	a0,317a <subdir+0x59e>
+    2eaa:	00003517          	auipc	a0,0x3
+    2eae:	41e50513          	addi	a0,a0,1054 # 62c8 <malloc+0x137c>
+    2eb2:	41f010ef          	jal	4ad0 <unlink>
+    2eb6:	2c050c63          	beqz	a0,318e <subdir+0x5b2>
+    2eba:	00004517          	auipc	a0,0x4
+    2ebe:	94650513          	addi	a0,a0,-1722 # 6800 <malloc+0x18b4>
+    2ec2:	40f010ef          	jal	4ad0 <unlink>
+    2ec6:	2c054e63          	bltz	a0,31a2 <subdir+0x5c6>
+    2eca:	00003517          	auipc	a0,0x3
+    2ece:	3fe50513          	addi	a0,a0,1022 # 62c8 <malloc+0x137c>
+    2ed2:	3ff010ef          	jal	4ad0 <unlink>
+    2ed6:	2e054063          	bltz	a0,31b6 <subdir+0x5da>
+    2eda:	60e2                	ld	ra,24(sp)
+    2edc:	6442                	ld	s0,16(sp)
+    2ede:	64a2                	ld	s1,8(sp)
+    2ee0:	6902                	ld	s2,0(sp)
+    2ee2:	6105                	addi	sp,sp,32
+    2ee4:	8082                	ret
+    2ee6:	85ca                	mv	a1,s2
+    2ee8:	00003517          	auipc	a0,0x3
+    2eec:	3e850513          	addi	a0,a0,1000 # 62d0 <malloc+0x1384>
+    2ef0:	7a9010ef          	jal	4e98 <printf>
+    2ef4:	4505                	li	a0,1
+    2ef6:	38b010ef          	jal	4a80 <exit>
+    2efa:	85ca                	mv	a1,s2
+    2efc:	00003517          	auipc	a0,0x3
+    2f00:	3f450513          	addi	a0,a0,1012 # 62f0 <malloc+0x13a4>
+    2f04:	795010ef          	jal	4e98 <printf>
+    2f08:	4505                	li	a0,1
+    2f0a:	377010ef          	jal	4a80 <exit>
+    2f0e:	85ca                	mv	a1,s2
+    2f10:	00003517          	auipc	a0,0x3
+    2f14:	40050513          	addi	a0,a0,1024 # 6310 <malloc+0x13c4>
+    2f18:	781010ef          	jal	4e98 <printf>
+    2f1c:	4505                	li	a0,1
+    2f1e:	363010ef          	jal	4a80 <exit>
+    2f22:	85ca                	mv	a1,s2
+    2f24:	00003517          	auipc	a0,0x3
+    2f28:	42450513          	addi	a0,a0,1060 # 6348 <malloc+0x13fc>
+    2f2c:	76d010ef          	jal	4e98 <printf>
+    2f30:	4505                	li	a0,1
+    2f32:	34f010ef          	jal	4a80 <exit>
+    2f36:	85ca                	mv	a1,s2
+    2f38:	00003517          	auipc	a0,0x3
+    2f3c:	44050513          	addi	a0,a0,1088 # 6378 <malloc+0x142c>
+    2f40:	759010ef          	jal	4e98 <printf>
+    2f44:	4505                	li	a0,1
+    2f46:	33b010ef          	jal	4a80 <exit>
+    2f4a:	85ca                	mv	a1,s2
+    2f4c:	00003517          	auipc	a0,0x3
+    2f50:	46450513          	addi	a0,a0,1124 # 63b0 <malloc+0x1464>
+    2f54:	745010ef          	jal	4e98 <printf>
+    2f58:	4505                	li	a0,1
+    2f5a:	327010ef          	jal	4a80 <exit>
+    2f5e:	85ca                	mv	a1,s2
+    2f60:	00003517          	auipc	a0,0x3
+    2f64:	47050513          	addi	a0,a0,1136 # 63d0 <malloc+0x1484>
+    2f68:	731010ef          	jal	4e98 <printf>
+    2f6c:	4505                	li	a0,1
+    2f6e:	313010ef          	jal	4a80 <exit>
+    2f72:	85ca                	mv	a1,s2
+    2f74:	00003517          	auipc	a0,0x3
+    2f78:	48c50513          	addi	a0,a0,1164 # 6400 <malloc+0x14b4>
+    2f7c:	71d010ef          	jal	4e98 <printf>
+    2f80:	4505                	li	a0,1
+    2f82:	2ff010ef          	jal	4a80 <exit>
+    2f86:	85ca                	mv	a1,s2
+    2f88:	00003517          	auipc	a0,0x3
+    2f8c:	4a050513          	addi	a0,a0,1184 # 6428 <malloc+0x14dc>
+    2f90:	709010ef          	jal	4e98 <printf>
+    2f94:	4505                	li	a0,1
+    2f96:	2eb010ef          	jal	4a80 <exit>
+    2f9a:	85ca                	mv	a1,s2
+    2f9c:	00003517          	auipc	a0,0x3
+    2fa0:	4ac50513          	addi	a0,a0,1196 # 6448 <malloc+0x14fc>
+    2fa4:	6f5010ef          	jal	4e98 <printf>
+    2fa8:	4505                	li	a0,1
+    2faa:	2d7010ef          	jal	4a80 <exit>
+    2fae:	85ca                	mv	a1,s2
+    2fb0:	00003517          	auipc	a0,0x3
+    2fb4:	4c050513          	addi	a0,a0,1216 # 6470 <malloc+0x1524>
+    2fb8:	6e1010ef          	jal	4e98 <printf>
+    2fbc:	4505                	li	a0,1
+    2fbe:	2c3010ef          	jal	4a80 <exit>
+    2fc2:	85ca                	mv	a1,s2
+    2fc4:	00003517          	auipc	a0,0x3
+    2fc8:	4d450513          	addi	a0,a0,1236 # 6498 <malloc+0x154c>
+    2fcc:	6cd010ef          	jal	4e98 <printf>
+    2fd0:	4505                	li	a0,1
+    2fd2:	2af010ef          	jal	4a80 <exit>
+    2fd6:	85ca                	mv	a1,s2
+    2fd8:	00003517          	auipc	a0,0x3
+    2fdc:	4f050513          	addi	a0,a0,1264 # 64c8 <malloc+0x157c>
+    2fe0:	6b9010ef          	jal	4e98 <printf>
+    2fe4:	4505                	li	a0,1
+    2fe6:	29b010ef          	jal	4a80 <exit>
+    2fea:	85ca                	mv	a1,s2
+    2fec:	00003517          	auipc	a0,0x3
+    2ff0:	50c50513          	addi	a0,a0,1292 # 64f8 <malloc+0x15ac>
+    2ff4:	6a5010ef          	jal	4e98 <printf>
+    2ff8:	4505                	li	a0,1
+    2ffa:	287010ef          	jal	4a80 <exit>
+    2ffe:	85ca                	mv	a1,s2
+    3000:	00003517          	auipc	a0,0x3
+    3004:	51050513          	addi	a0,a0,1296 # 6510 <malloc+0x15c4>
+    3008:	691010ef          	jal	4e98 <printf>
+    300c:	4505                	li	a0,1
+    300e:	273010ef          	jal	4a80 <exit>
+    3012:	85ca                	mv	a1,s2
+    3014:	00003517          	auipc	a0,0x3
+    3018:	51c50513          	addi	a0,a0,1308 # 6530 <malloc+0x15e4>
+    301c:	67d010ef          	jal	4e98 <printf>
+    3020:	4505                	li	a0,1
+    3022:	25f010ef          	jal	4a80 <exit>
+    3026:	85ca                	mv	a1,s2
+    3028:	00003517          	auipc	a0,0x3
+    302c:	52850513          	addi	a0,a0,1320 # 6550 <malloc+0x1604>
+    3030:	669010ef          	jal	4e98 <printf>
+    3034:	4505                	li	a0,1
+    3036:	24b010ef          	jal	4a80 <exit>
+    303a:	85ca                	mv	a1,s2
+    303c:	00003517          	auipc	a0,0x3
+    3040:	55450513          	addi	a0,a0,1364 # 6590 <malloc+0x1644>
+    3044:	655010ef          	jal	4e98 <printf>
+    3048:	4505                	li	a0,1
+    304a:	237010ef          	jal	4a80 <exit>
+    304e:	85ca                	mv	a1,s2
+    3050:	00003517          	auipc	a0,0x3
+    3054:	57050513          	addi	a0,a0,1392 # 65c0 <malloc+0x1674>
+    3058:	641010ef          	jal	4e98 <printf>
+    305c:	4505                	li	a0,1
+    305e:	223010ef          	jal	4a80 <exit>
+    3062:	85ca                	mv	a1,s2
+    3064:	00003517          	auipc	a0,0x3
+    3068:	57c50513          	addi	a0,a0,1404 # 65e0 <malloc+0x1694>
+    306c:	62d010ef          	jal	4e98 <printf>
+    3070:	4505                	li	a0,1
+    3072:	20f010ef          	jal	4a80 <exit>
+    3076:	85ca                	mv	a1,s2
+    3078:	00003517          	auipc	a0,0x3
+    307c:	58850513          	addi	a0,a0,1416 # 6600 <malloc+0x16b4>
+    3080:	619010ef          	jal	4e98 <printf>
+    3084:	4505                	li	a0,1
+    3086:	1fb010ef          	jal	4a80 <exit>
+    308a:	85ca                	mv	a1,s2
+    308c:	00003517          	auipc	a0,0x3
+    3090:	59450513          	addi	a0,a0,1428 # 6620 <malloc+0x16d4>
+    3094:	605010ef          	jal	4e98 <printf>
+    3098:	4505                	li	a0,1
+    309a:	1e7010ef          	jal	4a80 <exit>
+    309e:	85ca                	mv	a1,s2
+    30a0:	00003517          	auipc	a0,0x3
+    30a4:	5b050513          	addi	a0,a0,1456 # 6650 <malloc+0x1704>
+    30a8:	5f1010ef          	jal	4e98 <printf>
+    30ac:	4505                	li	a0,1
+    30ae:	1d3010ef          	jal	4a80 <exit>
+    30b2:	85ca                	mv	a1,s2
+    30b4:	00003517          	auipc	a0,0x3
+    30b8:	5c450513          	addi	a0,a0,1476 # 6678 <malloc+0x172c>
+    30bc:	5dd010ef          	jal	4e98 <printf>
+    30c0:	4505                	li	a0,1
+    30c2:	1bf010ef          	jal	4a80 <exit>
+    30c6:	85ca                	mv	a1,s2
+    30c8:	00003517          	auipc	a0,0x3
+    30cc:	5d850513          	addi	a0,a0,1496 # 66a0 <malloc+0x1754>
+    30d0:	5c9010ef          	jal	4e98 <printf>
+    30d4:	4505                	li	a0,1
+    30d6:	1ab010ef          	jal	4a80 <exit>
+    30da:	85ca                	mv	a1,s2
+    30dc:	00003517          	auipc	a0,0x3
+    30e0:	5ec50513          	addi	a0,a0,1516 # 66c8 <malloc+0x177c>
+    30e4:	5b5010ef          	jal	4e98 <printf>
+    30e8:	4505                	li	a0,1
+    30ea:	197010ef          	jal	4a80 <exit>
+    30ee:	85ca                	mv	a1,s2
+    30f0:	00003517          	auipc	a0,0x3
+    30f4:	5f850513          	addi	a0,a0,1528 # 66e8 <malloc+0x179c>
+    30f8:	5a1010ef          	jal	4e98 <printf>
+    30fc:	4505                	li	a0,1
+    30fe:	183010ef          	jal	4a80 <exit>
+    3102:	85ca                	mv	a1,s2
+    3104:	00003517          	auipc	a0,0x3
+    3108:	60450513          	addi	a0,a0,1540 # 6708 <malloc+0x17bc>
+    310c:	58d010ef          	jal	4e98 <printf>
+    3110:	4505                	li	a0,1
+    3112:	16f010ef          	jal	4a80 <exit>
+    3116:	85ca                	mv	a1,s2
+    3118:	00003517          	auipc	a0,0x3
+    311c:	61850513          	addi	a0,a0,1560 # 6730 <malloc+0x17e4>
+    3120:	579010ef          	jal	4e98 <printf>
+    3124:	4505                	li	a0,1
+    3126:	15b010ef          	jal	4a80 <exit>
+    312a:	85ca                	mv	a1,s2
+    312c:	00003517          	auipc	a0,0x3
+    3130:	62450513          	addi	a0,a0,1572 # 6750 <malloc+0x1804>
+    3134:	565010ef          	jal	4e98 <printf>
+    3138:	4505                	li	a0,1
+    313a:	147010ef          	jal	4a80 <exit>
+    313e:	85ca                	mv	a1,s2
+    3140:	00003517          	auipc	a0,0x3
+    3144:	63050513          	addi	a0,a0,1584 # 6770 <malloc+0x1824>
+    3148:	551010ef          	jal	4e98 <printf>
+    314c:	4505                	li	a0,1
+    314e:	133010ef          	jal	4a80 <exit>
+    3152:	85ca                	mv	a1,s2
+    3154:	00003517          	auipc	a0,0x3
+    3158:	64450513          	addi	a0,a0,1604 # 6798 <malloc+0x184c>
+    315c:	53d010ef          	jal	4e98 <printf>
+    3160:	4505                	li	a0,1
+    3162:	11f010ef          	jal	4a80 <exit>
+    3166:	85ca                	mv	a1,s2
+    3168:	00003517          	auipc	a0,0x3
+    316c:	2c050513          	addi	a0,a0,704 # 6428 <malloc+0x14dc>
+    3170:	529010ef          	jal	4e98 <printf>
+    3174:	4505                	li	a0,1
+    3176:	10b010ef          	jal	4a80 <exit>
+    317a:	85ca                	mv	a1,s2
+    317c:	00003517          	auipc	a0,0x3
+    3180:	63c50513          	addi	a0,a0,1596 # 67b8 <malloc+0x186c>
+    3184:	515010ef          	jal	4e98 <printf>
+    3188:	4505                	li	a0,1
+    318a:	0f7010ef          	jal	4a80 <exit>
+    318e:	85ca                	mv	a1,s2
+    3190:	00003517          	auipc	a0,0x3
+    3194:	64850513          	addi	a0,a0,1608 # 67d8 <malloc+0x188c>
+    3198:	501010ef          	jal	4e98 <printf>
+    319c:	4505                	li	a0,1
+    319e:	0e3010ef          	jal	4a80 <exit>
+    31a2:	85ca                	mv	a1,s2
+    31a4:	00003517          	auipc	a0,0x3
+    31a8:	66450513          	addi	a0,a0,1636 # 6808 <malloc+0x18bc>
+    31ac:	4ed010ef          	jal	4e98 <printf>
+    31b0:	4505                	li	a0,1
+    31b2:	0cf010ef          	jal	4a80 <exit>
+    31b6:	85ca                	mv	a1,s2
+    31b8:	00003517          	auipc	a0,0x3
+    31bc:	67050513          	addi	a0,a0,1648 # 6828 <malloc+0x18dc>
+    31c0:	4d9010ef          	jal	4e98 <printf>
+    31c4:	4505                	li	a0,1
+    31c6:	0bb010ef          	jal	4a80 <exit>
+
+00000000000031ca <rmdot>:
+    31ca:	1101                	addi	sp,sp,-32
+    31cc:	ec06                	sd	ra,24(sp)
+    31ce:	e822                	sd	s0,16(sp)
+    31d0:	e426                	sd	s1,8(sp)
+    31d2:	1000                	addi	s0,sp,32
+    31d4:	84aa                	mv	s1,a0
+    31d6:	00003517          	auipc	a0,0x3
+    31da:	66a50513          	addi	a0,a0,1642 # 6840 <malloc+0x18f4>
+    31de:	10b010ef          	jal	4ae8 <mkdir>
+    31e2:	e53d                	bnez	a0,3250 <rmdot+0x86>
+    31e4:	00003517          	auipc	a0,0x3
+    31e8:	65c50513          	addi	a0,a0,1628 # 6840 <malloc+0x18f4>
+    31ec:	105010ef          	jal	4af0 <chdir>
+    31f0:	e935                	bnez	a0,3264 <rmdot+0x9a>
+    31f2:	00002517          	auipc	a0,0x2
+    31f6:	57e50513          	addi	a0,a0,1406 # 5770 <malloc+0x824>
+    31fa:	0d7010ef          	jal	4ad0 <unlink>
+    31fe:	cd2d                	beqz	a0,3278 <rmdot+0xae>
+    3200:	00003517          	auipc	a0,0x3
+    3204:	09050513          	addi	a0,a0,144 # 6290 <malloc+0x1344>
+    3208:	0c9010ef          	jal	4ad0 <unlink>
+    320c:	c141                	beqz	a0,328c <rmdot+0xc2>
+    320e:	00003517          	auipc	a0,0x3
+    3212:	02a50513          	addi	a0,a0,42 # 6238 <malloc+0x12ec>
+    3216:	0db010ef          	jal	4af0 <chdir>
+    321a:	e159                	bnez	a0,32a0 <rmdot+0xd6>
+    321c:	00003517          	auipc	a0,0x3
+    3220:	68c50513          	addi	a0,a0,1676 # 68a8 <malloc+0x195c>
+    3224:	0ad010ef          	jal	4ad0 <unlink>
+    3228:	c551                	beqz	a0,32b4 <rmdot+0xea>
+    322a:	00003517          	auipc	a0,0x3
+    322e:	6a650513          	addi	a0,a0,1702 # 68d0 <malloc+0x1984>
+    3232:	09f010ef          	jal	4ad0 <unlink>
+    3236:	c949                	beqz	a0,32c8 <rmdot+0xfe>
+    3238:	00003517          	auipc	a0,0x3
+    323c:	60850513          	addi	a0,a0,1544 # 6840 <malloc+0x18f4>
+    3240:	091010ef          	jal	4ad0 <unlink>
+    3244:	ed41                	bnez	a0,32dc <rmdot+0x112>
+    3246:	60e2                	ld	ra,24(sp)
+    3248:	6442                	ld	s0,16(sp)
+    324a:	64a2                	ld	s1,8(sp)
+    324c:	6105                	addi	sp,sp,32
+    324e:	8082                	ret
+    3250:	85a6                	mv	a1,s1
+    3252:	00003517          	auipc	a0,0x3
+    3256:	5f650513          	addi	a0,a0,1526 # 6848 <malloc+0x18fc>
+    325a:	43f010ef          	jal	4e98 <printf>
+    325e:	4505                	li	a0,1
+    3260:	021010ef          	jal	4a80 <exit>
+    3264:	85a6                	mv	a1,s1
+    3266:	00003517          	auipc	a0,0x3
+    326a:	5fa50513          	addi	a0,a0,1530 # 6860 <malloc+0x1914>
+    326e:	42b010ef          	jal	4e98 <printf>
+    3272:	4505                	li	a0,1
+    3274:	00d010ef          	jal	4a80 <exit>
+    3278:	85a6                	mv	a1,s1
+    327a:	00003517          	auipc	a0,0x3
+    327e:	5fe50513          	addi	a0,a0,1534 # 6878 <malloc+0x192c>
+    3282:	417010ef          	jal	4e98 <printf>
+    3286:	4505                	li	a0,1
+    3288:	7f8010ef          	jal	4a80 <exit>
+    328c:	85a6                	mv	a1,s1
+    328e:	00003517          	auipc	a0,0x3
+    3292:	60250513          	addi	a0,a0,1538 # 6890 <malloc+0x1944>
+    3296:	403010ef          	jal	4e98 <printf>
+    329a:	4505                	li	a0,1
+    329c:	7e4010ef          	jal	4a80 <exit>
+    32a0:	85a6                	mv	a1,s1
+    32a2:	00003517          	auipc	a0,0x3
+    32a6:	f9e50513          	addi	a0,a0,-98 # 6240 <malloc+0x12f4>
+    32aa:	3ef010ef          	jal	4e98 <printf>
+    32ae:	4505                	li	a0,1
+    32b0:	7d0010ef          	jal	4a80 <exit>
+    32b4:	85a6                	mv	a1,s1
+    32b6:	00003517          	auipc	a0,0x3
+    32ba:	5fa50513          	addi	a0,a0,1530 # 68b0 <malloc+0x1964>
+    32be:	3db010ef          	jal	4e98 <printf>
+    32c2:	4505                	li	a0,1
+    32c4:	7bc010ef          	jal	4a80 <exit>
+    32c8:	85a6                	mv	a1,s1
+    32ca:	00003517          	auipc	a0,0x3
+    32ce:	60e50513          	addi	a0,a0,1550 # 68d8 <malloc+0x198c>
+    32d2:	3c7010ef          	jal	4e98 <printf>
+    32d6:	4505                	li	a0,1
+    32d8:	7a8010ef          	jal	4a80 <exit>
+    32dc:	85a6                	mv	a1,s1
+    32de:	00003517          	auipc	a0,0x3
+    32e2:	61a50513          	addi	a0,a0,1562 # 68f8 <malloc+0x19ac>
+    32e6:	3b3010ef          	jal	4e98 <printf>
+    32ea:	4505                	li	a0,1
+    32ec:	794010ef          	jal	4a80 <exit>
+
+00000000000032f0 <dirfile>:
+    32f0:	1101                	addi	sp,sp,-32
+    32f2:	ec06                	sd	ra,24(sp)
+    32f4:	e822                	sd	s0,16(sp)
+    32f6:	e426                	sd	s1,8(sp)
+    32f8:	e04a                	sd	s2,0(sp)
+    32fa:	1000                	addi	s0,sp,32
+    32fc:	892a                	mv	s2,a0
+    32fe:	20000593          	li	a1,512
+    3302:	00003517          	auipc	a0,0x3
+    3306:	61650513          	addi	a0,a0,1558 # 6918 <malloc+0x19cc>
+    330a:	7b6010ef          	jal	4ac0 <open>
+    330e:	0c054563          	bltz	a0,33d8 <dirfile+0xe8>
+    3312:	796010ef          	jal	4aa8 <close>
+    3316:	00003517          	auipc	a0,0x3
+    331a:	60250513          	addi	a0,a0,1538 # 6918 <malloc+0x19cc>
+    331e:	7d2010ef          	jal	4af0 <chdir>
+    3322:	c569                	beqz	a0,33ec <dirfile+0xfc>
+    3324:	4581                	li	a1,0
+    3326:	00003517          	auipc	a0,0x3
+    332a:	63a50513          	addi	a0,a0,1594 # 6960 <malloc+0x1a14>
+    332e:	792010ef          	jal	4ac0 <open>
+    3332:	0c055763          	bgez	a0,3400 <dirfile+0x110>
+    3336:	20000593          	li	a1,512
+    333a:	00003517          	auipc	a0,0x3
+    333e:	62650513          	addi	a0,a0,1574 # 6960 <malloc+0x1a14>
+    3342:	77e010ef          	jal	4ac0 <open>
+    3346:	0c055763          	bgez	a0,3414 <dirfile+0x124>
+    334a:	00003517          	auipc	a0,0x3
+    334e:	61650513          	addi	a0,a0,1558 # 6960 <malloc+0x1a14>
+    3352:	796010ef          	jal	4ae8 <mkdir>
+    3356:	0c050963          	beqz	a0,3428 <dirfile+0x138>
+    335a:	00003517          	auipc	a0,0x3
+    335e:	60650513          	addi	a0,a0,1542 # 6960 <malloc+0x1a14>
+    3362:	76e010ef          	jal	4ad0 <unlink>
+    3366:	0c050b63          	beqz	a0,343c <dirfile+0x14c>
+    336a:	00003597          	auipc	a1,0x3
+    336e:	5f658593          	addi	a1,a1,1526 # 6960 <malloc+0x1a14>
+    3372:	00002517          	auipc	a0,0x2
+    3376:	eee50513          	addi	a0,a0,-274 # 5260 <malloc+0x314>
+    337a:	766010ef          	jal	4ae0 <link>
+    337e:	0c050963          	beqz	a0,3450 <dirfile+0x160>
+    3382:	00003517          	auipc	a0,0x3
+    3386:	59650513          	addi	a0,a0,1430 # 6918 <malloc+0x19cc>
+    338a:	746010ef          	jal	4ad0 <unlink>
+    338e:	0c051b63          	bnez	a0,3464 <dirfile+0x174>
+    3392:	4589                	li	a1,2
+    3394:	00002517          	auipc	a0,0x2
+    3398:	3dc50513          	addi	a0,a0,988 # 5770 <malloc+0x824>
+    339c:	724010ef          	jal	4ac0 <open>
+    33a0:	0c055c63          	bgez	a0,3478 <dirfile+0x188>
+    33a4:	4581                	li	a1,0
+    33a6:	00002517          	auipc	a0,0x2
+    33aa:	3ca50513          	addi	a0,a0,970 # 5770 <malloc+0x824>
+    33ae:	712010ef          	jal	4ac0 <open>
+    33b2:	84aa                	mv	s1,a0
+    33b4:	4605                	li	a2,1
+    33b6:	00002597          	auipc	a1,0x2
+    33ba:	d4258593          	addi	a1,a1,-702 # 50f8 <malloc+0x1ac>
+    33be:	6e2010ef          	jal	4aa0 <write>
+    33c2:	0ca04563          	bgtz	a0,348c <dirfile+0x19c>
+    33c6:	8526                	mv	a0,s1
+    33c8:	6e0010ef          	jal	4aa8 <close>
+    33cc:	60e2                	ld	ra,24(sp)
+    33ce:	6442                	ld	s0,16(sp)
+    33d0:	64a2                	ld	s1,8(sp)
+    33d2:	6902                	ld	s2,0(sp)
+    33d4:	6105                	addi	sp,sp,32
+    33d6:	8082                	ret
+    33d8:	85ca                	mv	a1,s2
+    33da:	00003517          	auipc	a0,0x3
+    33de:	54650513          	addi	a0,a0,1350 # 6920 <malloc+0x19d4>
+    33e2:	2b7010ef          	jal	4e98 <printf>
+    33e6:	4505                	li	a0,1
+    33e8:	698010ef          	jal	4a80 <exit>
+    33ec:	85ca                	mv	a1,s2
+    33ee:	00003517          	auipc	a0,0x3
+    33f2:	55250513          	addi	a0,a0,1362 # 6940 <malloc+0x19f4>
+    33f6:	2a3010ef          	jal	4e98 <printf>
+    33fa:	4505                	li	a0,1
+    33fc:	684010ef          	jal	4a80 <exit>
+    3400:	85ca                	mv	a1,s2
+    3402:	00003517          	auipc	a0,0x3
+    3406:	56e50513          	addi	a0,a0,1390 # 6970 <malloc+0x1a24>
+    340a:	28f010ef          	jal	4e98 <printf>
+    340e:	4505                	li	a0,1
+    3410:	670010ef          	jal	4a80 <exit>
+    3414:	85ca                	mv	a1,s2
+    3416:	00003517          	auipc	a0,0x3
+    341a:	55a50513          	addi	a0,a0,1370 # 6970 <malloc+0x1a24>
+    341e:	27b010ef          	jal	4e98 <printf>
+    3422:	4505                	li	a0,1
+    3424:	65c010ef          	jal	4a80 <exit>
+    3428:	85ca                	mv	a1,s2
+    342a:	00003517          	auipc	a0,0x3
+    342e:	56e50513          	addi	a0,a0,1390 # 6998 <malloc+0x1a4c>
+    3432:	267010ef          	jal	4e98 <printf>
+    3436:	4505                	li	a0,1
+    3438:	648010ef          	jal	4a80 <exit>
+    343c:	85ca                	mv	a1,s2
+    343e:	00003517          	auipc	a0,0x3
+    3442:	58250513          	addi	a0,a0,1410 # 69c0 <malloc+0x1a74>
+    3446:	253010ef          	jal	4e98 <printf>
+    344a:	4505                	li	a0,1
+    344c:	634010ef          	jal	4a80 <exit>
+    3450:	85ca                	mv	a1,s2
+    3452:	00003517          	auipc	a0,0x3
+    3456:	59650513          	addi	a0,a0,1430 # 69e8 <malloc+0x1a9c>
+    345a:	23f010ef          	jal	4e98 <printf>
+    345e:	4505                	li	a0,1
+    3460:	620010ef          	jal	4a80 <exit>
+    3464:	85ca                	mv	a1,s2
+    3466:	00003517          	auipc	a0,0x3
+    346a:	5aa50513          	addi	a0,a0,1450 # 6a10 <malloc+0x1ac4>
+    346e:	22b010ef          	jal	4e98 <printf>
+    3472:	4505                	li	a0,1
+    3474:	60c010ef          	jal	4a80 <exit>
+    3478:	85ca                	mv	a1,s2
+    347a:	00003517          	auipc	a0,0x3
+    347e:	5b650513          	addi	a0,a0,1462 # 6a30 <malloc+0x1ae4>
+    3482:	217010ef          	jal	4e98 <printf>
+    3486:	4505                	li	a0,1
+    3488:	5f8010ef          	jal	4a80 <exit>
+    348c:	85ca                	mv	a1,s2
+    348e:	00003517          	auipc	a0,0x3
+    3492:	5ca50513          	addi	a0,a0,1482 # 6a58 <malloc+0x1b0c>
+    3496:	203010ef          	jal	4e98 <printf>
+    349a:	4505                	li	a0,1
+    349c:	5e4010ef          	jal	4a80 <exit>
+
+00000000000034a0 <iref>:
+    34a0:	7139                	addi	sp,sp,-64
+    34a2:	fc06                	sd	ra,56(sp)
+    34a4:	f822                	sd	s0,48(sp)
+    34a6:	f426                	sd	s1,40(sp)
+    34a8:	f04a                	sd	s2,32(sp)
+    34aa:	ec4e                	sd	s3,24(sp)
+    34ac:	e852                	sd	s4,16(sp)
+    34ae:	e456                	sd	s5,8(sp)
+    34b0:	e05a                	sd	s6,0(sp)
+    34b2:	0080                	addi	s0,sp,64
+    34b4:	8b2a                	mv	s6,a0
+    34b6:	03300913          	li	s2,51
+    34ba:	00003a17          	auipc	s4,0x3
+    34be:	5b6a0a13          	addi	s4,s4,1462 # 6a70 <malloc+0x1b24>
+    34c2:	00003497          	auipc	s1,0x3
+    34c6:	0b648493          	addi	s1,s1,182 # 6578 <malloc+0x162c>
+    34ca:	00002a97          	auipc	s5,0x2
+    34ce:	d96a8a93          	addi	s5,s5,-618 # 5260 <malloc+0x314>
+    34d2:	00003997          	auipc	s3,0x3
+    34d6:	49698993          	addi	s3,s3,1174 # 6968 <malloc+0x1a1c>
+    34da:	a835                	j	3516 <iref+0x76>
+    34dc:	85da                	mv	a1,s6
+    34de:	00003517          	auipc	a0,0x3
+    34e2:	59a50513          	addi	a0,a0,1434 # 6a78 <malloc+0x1b2c>
+    34e6:	1b3010ef          	jal	4e98 <printf>
+    34ea:	4505                	li	a0,1
+    34ec:	594010ef          	jal	4a80 <exit>
+    34f0:	85da                	mv	a1,s6
+    34f2:	00003517          	auipc	a0,0x3
+    34f6:	59e50513          	addi	a0,a0,1438 # 6a90 <malloc+0x1b44>
+    34fa:	19f010ef          	jal	4e98 <printf>
+    34fe:	4505                	li	a0,1
+    3500:	580010ef          	jal	4a80 <exit>
+    3504:	5a4010ef          	jal	4aa8 <close>
+    3508:	a82d                	j	3542 <iref+0xa2>
+    350a:	854e                	mv	a0,s3
+    350c:	5c4010ef          	jal	4ad0 <unlink>
+    3510:	397d                	addiw	s2,s2,-1
+    3512:	04090263          	beqz	s2,3556 <iref+0xb6>
+    3516:	8552                	mv	a0,s4
+    3518:	5d0010ef          	jal	4ae8 <mkdir>
+    351c:	f161                	bnez	a0,34dc <iref+0x3c>
+    351e:	8552                	mv	a0,s4
+    3520:	5d0010ef          	jal	4af0 <chdir>
+    3524:	f571                	bnez	a0,34f0 <iref+0x50>
+    3526:	8526                	mv	a0,s1
+    3528:	5c0010ef          	jal	4ae8 <mkdir>
+    352c:	85a6                	mv	a1,s1
+    352e:	8556                	mv	a0,s5
+    3530:	5b0010ef          	jal	4ae0 <link>
+    3534:	20000593          	li	a1,512
+    3538:	8526                	mv	a0,s1
+    353a:	586010ef          	jal	4ac0 <open>
+    353e:	fc0553e3          	bgez	a0,3504 <iref+0x64>
+    3542:	20000593          	li	a1,512
+    3546:	854e                	mv	a0,s3
+    3548:	578010ef          	jal	4ac0 <open>
+    354c:	fa054fe3          	bltz	a0,350a <iref+0x6a>
+    3550:	558010ef          	jal	4aa8 <close>
+    3554:	bf5d                	j	350a <iref+0x6a>
+    3556:	03300493          	li	s1,51
+    355a:	00003997          	auipc	s3,0x3
+    355e:	d3698993          	addi	s3,s3,-714 # 6290 <malloc+0x1344>
+    3562:	00003917          	auipc	s2,0x3
+    3566:	50e90913          	addi	s2,s2,1294 # 6a70 <malloc+0x1b24>
+    356a:	854e                	mv	a0,s3
+    356c:	584010ef          	jal	4af0 <chdir>
+    3570:	854a                	mv	a0,s2
+    3572:	55e010ef          	jal	4ad0 <unlink>
+    3576:	34fd                	addiw	s1,s1,-1
+    3578:	f8ed                	bnez	s1,356a <iref+0xca>
+    357a:	00003517          	auipc	a0,0x3
+    357e:	cbe50513          	addi	a0,a0,-834 # 6238 <malloc+0x12ec>
+    3582:	56e010ef          	jal	4af0 <chdir>
+    3586:	70e2                	ld	ra,56(sp)
+    3588:	7442                	ld	s0,48(sp)
+    358a:	74a2                	ld	s1,40(sp)
+    358c:	7902                	ld	s2,32(sp)
+    358e:	69e2                	ld	s3,24(sp)
+    3590:	6a42                	ld	s4,16(sp)
+    3592:	6aa2                	ld	s5,8(sp)
+    3594:	6b02                	ld	s6,0(sp)
+    3596:	6121                	addi	sp,sp,64
+    3598:	8082                	ret
+
+000000000000359a <openiputtest>:
+    359a:	7179                	addi	sp,sp,-48
+    359c:	f406                	sd	ra,40(sp)
+    359e:	f022                	sd	s0,32(sp)
+    35a0:	ec26                	sd	s1,24(sp)
+    35a2:	1800                	addi	s0,sp,48
+    35a4:	84aa                	mv	s1,a0
+    35a6:	00003517          	auipc	a0,0x3
+    35aa:	50250513          	addi	a0,a0,1282 # 6aa8 <malloc+0x1b5c>
+    35ae:	53a010ef          	jal	4ae8 <mkdir>
+    35b2:	02054a63          	bltz	a0,35e6 <openiputtest+0x4c>
+    35b6:	4c2010ef          	jal	4a78 <fork>
+    35ba:	04054063          	bltz	a0,35fa <openiputtest+0x60>
+    35be:	e939                	bnez	a0,3614 <openiputtest+0x7a>
+    35c0:	4589                	li	a1,2
+    35c2:	00003517          	auipc	a0,0x3
+    35c6:	4e650513          	addi	a0,a0,1254 # 6aa8 <malloc+0x1b5c>
+    35ca:	4f6010ef          	jal	4ac0 <open>
+    35ce:	04054063          	bltz	a0,360e <openiputtest+0x74>
+    35d2:	85a6                	mv	a1,s1
+    35d4:	00003517          	auipc	a0,0x3
+    35d8:	4f450513          	addi	a0,a0,1268 # 6ac8 <malloc+0x1b7c>
+    35dc:	0bd010ef          	jal	4e98 <printf>
+    35e0:	4505                	li	a0,1
+    35e2:	49e010ef          	jal	4a80 <exit>
+    35e6:	85a6                	mv	a1,s1
+    35e8:	00003517          	auipc	a0,0x3
+    35ec:	4c850513          	addi	a0,a0,1224 # 6ab0 <malloc+0x1b64>
+    35f0:	0a9010ef          	jal	4e98 <printf>
+    35f4:	4505                	li	a0,1
+    35f6:	48a010ef          	jal	4a80 <exit>
+    35fa:	85a6                	mv	a1,s1
+    35fc:	00002517          	auipc	a0,0x2
+    3600:	31c50513          	addi	a0,a0,796 # 5918 <malloc+0x9cc>
+    3604:	095010ef          	jal	4e98 <printf>
+    3608:	4505                	li	a0,1
+    360a:	476010ef          	jal	4a80 <exit>
+    360e:	4501                	li	a0,0
+    3610:	470010ef          	jal	4a80 <exit>
+    3614:	4505                	li	a0,1
+    3616:	4fa010ef          	jal	4b10 <sleep>
+    361a:	00003517          	auipc	a0,0x3
+    361e:	48e50513          	addi	a0,a0,1166 # 6aa8 <malloc+0x1b5c>
+    3622:	4ae010ef          	jal	4ad0 <unlink>
+    3626:	c919                	beqz	a0,363c <openiputtest+0xa2>
+    3628:	85a6                	mv	a1,s1
+    362a:	00002517          	auipc	a0,0x2
+    362e:	4de50513          	addi	a0,a0,1246 # 5b08 <malloc+0xbbc>
+    3632:	067010ef          	jal	4e98 <printf>
+    3636:	4505                	li	a0,1
+    3638:	448010ef          	jal	4a80 <exit>
+    363c:	fdc40513          	addi	a0,s0,-36
+    3640:	448010ef          	jal	4a88 <wait>
+    3644:	fdc42503          	lw	a0,-36(s0)
+    3648:	438010ef          	jal	4a80 <exit>
+
+000000000000364c <forkforkfork>:
+    364c:	1101                	addi	sp,sp,-32
+    364e:	ec06                	sd	ra,24(sp)
+    3650:	e822                	sd	s0,16(sp)
+    3652:	e426                	sd	s1,8(sp)
+    3654:	1000                	addi	s0,sp,32
+    3656:	84aa                	mv	s1,a0
+    3658:	00003517          	auipc	a0,0x3
+    365c:	49850513          	addi	a0,a0,1176 # 6af0 <malloc+0x1ba4>
+    3660:	470010ef          	jal	4ad0 <unlink>
+    3664:	414010ef          	jal	4a78 <fork>
+    3668:	02054b63          	bltz	a0,369e <forkforkfork+0x52>
+    366c:	c139                	beqz	a0,36b2 <forkforkfork+0x66>
+    366e:	4551                	li	a0,20
+    3670:	4a0010ef          	jal	4b10 <sleep>
+    3674:	20200593          	li	a1,514
+    3678:	00003517          	auipc	a0,0x3
+    367c:	47850513          	addi	a0,a0,1144 # 6af0 <malloc+0x1ba4>
+    3680:	440010ef          	jal	4ac0 <open>
+    3684:	424010ef          	jal	4aa8 <close>
+    3688:	4501                	li	a0,0
+    368a:	3fe010ef          	jal	4a88 <wait>
+    368e:	4529                	li	a0,10
+    3690:	480010ef          	jal	4b10 <sleep>
+    3694:	60e2                	ld	ra,24(sp)
+    3696:	6442                	ld	s0,16(sp)
+    3698:	64a2                	ld	s1,8(sp)
+    369a:	6105                	addi	sp,sp,32
+    369c:	8082                	ret
+    369e:	85a6                	mv	a1,s1
+    36a0:	00002517          	auipc	a0,0x2
+    36a4:	43850513          	addi	a0,a0,1080 # 5ad8 <malloc+0xb8c>
+    36a8:	7f0010ef          	jal	4e98 <printf>
+    36ac:	4505                	li	a0,1
+    36ae:	3d2010ef          	jal	4a80 <exit>
+    36b2:	00003497          	auipc	s1,0x3
+    36b6:	43e48493          	addi	s1,s1,1086 # 6af0 <malloc+0x1ba4>
+    36ba:	4581                	li	a1,0
+    36bc:	8526                	mv	a0,s1
+    36be:	402010ef          	jal	4ac0 <open>
+    36c2:	02055163          	bgez	a0,36e4 <forkforkfork+0x98>
+    36c6:	3b2010ef          	jal	4a78 <fork>
+    36ca:	fe0558e3          	bgez	a0,36ba <forkforkfork+0x6e>
+    36ce:	20200593          	li	a1,514
+    36d2:	00003517          	auipc	a0,0x3
+    36d6:	41e50513          	addi	a0,a0,1054 # 6af0 <malloc+0x1ba4>
+    36da:	3e6010ef          	jal	4ac0 <open>
+    36de:	3ca010ef          	jal	4aa8 <close>
+    36e2:	bfe1                	j	36ba <forkforkfork+0x6e>
+    36e4:	4501                	li	a0,0
+    36e6:	39a010ef          	jal	4a80 <exit>
+
+00000000000036ea <killstatus>:
+    36ea:	7139                	addi	sp,sp,-64
+    36ec:	fc06                	sd	ra,56(sp)
+    36ee:	f822                	sd	s0,48(sp)
+    36f0:	f426                	sd	s1,40(sp)
+    36f2:	f04a                	sd	s2,32(sp)
+    36f4:	ec4e                	sd	s3,24(sp)
+    36f6:	e852                	sd	s4,16(sp)
+    36f8:	0080                	addi	s0,sp,64
+    36fa:	8a2a                	mv	s4,a0
+    36fc:	06400913          	li	s2,100
+    3700:	59fd                	li	s3,-1
+    3702:	376010ef          	jal	4a78 <fork>
+    3706:	84aa                	mv	s1,a0
+    3708:	02054763          	bltz	a0,3736 <killstatus+0x4c>
+    370c:	cd1d                	beqz	a0,374a <killstatus+0x60>
+    370e:	4505                	li	a0,1
+    3710:	400010ef          	jal	4b10 <sleep>
+    3714:	8526                	mv	a0,s1
+    3716:	39a010ef          	jal	4ab0 <kill>
+    371a:	fcc40513          	addi	a0,s0,-52
+    371e:	36a010ef          	jal	4a88 <wait>
+    3722:	fcc42783          	lw	a5,-52(s0)
+    3726:	03379563          	bne	a5,s3,3750 <killstatus+0x66>
+    372a:	397d                	addiw	s2,s2,-1
+    372c:	fc091be3          	bnez	s2,3702 <killstatus+0x18>
+    3730:	4501                	li	a0,0
+    3732:	34e010ef          	jal	4a80 <exit>
+    3736:	85d2                	mv	a1,s4
+    3738:	00002517          	auipc	a0,0x2
+    373c:	1e050513          	addi	a0,a0,480 # 5918 <malloc+0x9cc>
+    3740:	758010ef          	jal	4e98 <printf>
+    3744:	4505                	li	a0,1
+    3746:	33a010ef          	jal	4a80 <exit>
+    374a:	3b6010ef          	jal	4b00 <getpid>
+    374e:	bff5                	j	374a <killstatus+0x60>
+    3750:	85d2                	mv	a1,s4
+    3752:	00003517          	auipc	a0,0x3
+    3756:	3ae50513          	addi	a0,a0,942 # 6b00 <malloc+0x1bb4>
+    375a:	73e010ef          	jal	4e98 <printf>
+    375e:	4505                	li	a0,1
+    3760:	320010ef          	jal	4a80 <exit>
+
+0000000000003764 <preempt>:
+    3764:	7139                	addi	sp,sp,-64
+    3766:	fc06                	sd	ra,56(sp)
+    3768:	f822                	sd	s0,48(sp)
+    376a:	f426                	sd	s1,40(sp)
+    376c:	f04a                	sd	s2,32(sp)
+    376e:	ec4e                	sd	s3,24(sp)
+    3770:	e852                	sd	s4,16(sp)
+    3772:	0080                	addi	s0,sp,64
+    3774:	892a                	mv	s2,a0
+    3776:	302010ef          	jal	4a78 <fork>
+    377a:	00054563          	bltz	a0,3784 <preempt+0x20>
+    377e:	84aa                	mv	s1,a0
+    3780:	ed01                	bnez	a0,3798 <preempt+0x34>
+    3782:	a001                	j	3782 <preempt+0x1e>
+    3784:	85ca                	mv	a1,s2
+    3786:	00002517          	auipc	a0,0x2
+    378a:	35250513          	addi	a0,a0,850 # 5ad8 <malloc+0xb8c>
+    378e:	70a010ef          	jal	4e98 <printf>
+    3792:	4505                	li	a0,1
+    3794:	2ec010ef          	jal	4a80 <exit>
+    3798:	2e0010ef          	jal	4a78 <fork>
+    379c:	89aa                	mv	s3,a0
+    379e:	00054463          	bltz	a0,37a6 <preempt+0x42>
+    37a2:	ed01                	bnez	a0,37ba <preempt+0x56>
+    37a4:	a001                	j	37a4 <preempt+0x40>
+    37a6:	85ca                	mv	a1,s2
+    37a8:	00002517          	auipc	a0,0x2
+    37ac:	17050513          	addi	a0,a0,368 # 5918 <malloc+0x9cc>
+    37b0:	6e8010ef          	jal	4e98 <printf>
+    37b4:	4505                	li	a0,1
+    37b6:	2ca010ef          	jal	4a80 <exit>
+    37ba:	fc840513          	addi	a0,s0,-56
+    37be:	2d2010ef          	jal	4a90 <pipe>
+    37c2:	2b6010ef          	jal	4a78 <fork>
+    37c6:	8a2a                	mv	s4,a0
+    37c8:	02054863          	bltz	a0,37f8 <preempt+0x94>
+    37cc:	e921                	bnez	a0,381c <preempt+0xb8>
+    37ce:	fc842503          	lw	a0,-56(s0)
+    37d2:	2d6010ef          	jal	4aa8 <close>
+    37d6:	4605                	li	a2,1
+    37d8:	00002597          	auipc	a1,0x2
+    37dc:	92058593          	addi	a1,a1,-1760 # 50f8 <malloc+0x1ac>
+    37e0:	fcc42503          	lw	a0,-52(s0)
+    37e4:	2bc010ef          	jal	4aa0 <write>
+    37e8:	4785                	li	a5,1
+    37ea:	02f51163          	bne	a0,a5,380c <preempt+0xa8>
+    37ee:	fcc42503          	lw	a0,-52(s0)
+    37f2:	2b6010ef          	jal	4aa8 <close>
+    37f6:	a001                	j	37f6 <preempt+0x92>
+    37f8:	85ca                	mv	a1,s2
+    37fa:	00002517          	auipc	a0,0x2
+    37fe:	11e50513          	addi	a0,a0,286 # 5918 <malloc+0x9cc>
+    3802:	696010ef          	jal	4e98 <printf>
+    3806:	4505                	li	a0,1
+    3808:	278010ef          	jal	4a80 <exit>
+    380c:	85ca                	mv	a1,s2
+    380e:	00003517          	auipc	a0,0x3
+    3812:	31250513          	addi	a0,a0,786 # 6b20 <malloc+0x1bd4>
+    3816:	682010ef          	jal	4e98 <printf>
+    381a:	bfd1                	j	37ee <preempt+0x8a>
+    381c:	fcc42503          	lw	a0,-52(s0)
+    3820:	288010ef          	jal	4aa8 <close>
+    3824:	660d                	lui	a2,0x3
+    3826:	00009597          	auipc	a1,0x9
+    382a:	45258593          	addi	a1,a1,1106 # cc78 <buf>
+    382e:	fc842503          	lw	a0,-56(s0)
+    3832:	266010ef          	jal	4a98 <read>
+    3836:	4785                	li	a5,1
+    3838:	02f50163          	beq	a0,a5,385a <preempt+0xf6>
+    383c:	85ca                	mv	a1,s2
+    383e:	00003517          	auipc	a0,0x3
+    3842:	2fa50513          	addi	a0,a0,762 # 6b38 <malloc+0x1bec>
+    3846:	652010ef          	jal	4e98 <printf>
+    384a:	70e2                	ld	ra,56(sp)
+    384c:	7442                	ld	s0,48(sp)
+    384e:	74a2                	ld	s1,40(sp)
+    3850:	7902                	ld	s2,32(sp)
+    3852:	69e2                	ld	s3,24(sp)
+    3854:	6a42                	ld	s4,16(sp)
+    3856:	6121                	addi	sp,sp,64
+    3858:	8082                	ret
+    385a:	fc842503          	lw	a0,-56(s0)
+    385e:	24a010ef          	jal	4aa8 <close>
+    3862:	00003517          	auipc	a0,0x3
+    3866:	2ee50513          	addi	a0,a0,750 # 6b50 <malloc+0x1c04>
+    386a:	62e010ef          	jal	4e98 <printf>
+    386e:	8526                	mv	a0,s1
+    3870:	240010ef          	jal	4ab0 <kill>
+    3874:	854e                	mv	a0,s3
+    3876:	23a010ef          	jal	4ab0 <kill>
+    387a:	8552                	mv	a0,s4
+    387c:	234010ef          	jal	4ab0 <kill>
+    3880:	00003517          	auipc	a0,0x3
+    3884:	2e050513          	addi	a0,a0,736 # 6b60 <malloc+0x1c14>
+    3888:	610010ef          	jal	4e98 <printf>
+    388c:	4501                	li	a0,0
+    388e:	1fa010ef          	jal	4a88 <wait>
+    3892:	4501                	li	a0,0
+    3894:	1f4010ef          	jal	4a88 <wait>
+    3898:	4501                	li	a0,0
+    389a:	1ee010ef          	jal	4a88 <wait>
+    389e:	b775                	j	384a <preempt+0xe6>
+
+00000000000038a0 <reparent>:
+    38a0:	7179                	addi	sp,sp,-48
+    38a2:	f406                	sd	ra,40(sp)
+    38a4:	f022                	sd	s0,32(sp)
+    38a6:	ec26                	sd	s1,24(sp)
+    38a8:	e84a                	sd	s2,16(sp)
+    38aa:	e44e                	sd	s3,8(sp)
+    38ac:	e052                	sd	s4,0(sp)
+    38ae:	1800                	addi	s0,sp,48
+    38b0:	89aa                	mv	s3,a0
+    38b2:	24e010ef          	jal	4b00 <getpid>
+    38b6:	8a2a                	mv	s4,a0
+    38b8:	0c800913          	li	s2,200
+    38bc:	1bc010ef          	jal	4a78 <fork>
+    38c0:	84aa                	mv	s1,a0
+    38c2:	00054e63          	bltz	a0,38de <reparent+0x3e>
+    38c6:	c121                	beqz	a0,3906 <reparent+0x66>
+    38c8:	4501                	li	a0,0
+    38ca:	1be010ef          	jal	4a88 <wait>
+    38ce:	02951263          	bne	a0,s1,38f2 <reparent+0x52>
+    38d2:	397d                	addiw	s2,s2,-1
+    38d4:	fe0914e3          	bnez	s2,38bc <reparent+0x1c>
+    38d8:	4501                	li	a0,0
+    38da:	1a6010ef          	jal	4a80 <exit>
+    38de:	85ce                	mv	a1,s3
+    38e0:	00002517          	auipc	a0,0x2
+    38e4:	03850513          	addi	a0,a0,56 # 5918 <malloc+0x9cc>
+    38e8:	5b0010ef          	jal	4e98 <printf>
+    38ec:	4505                	li	a0,1
+    38ee:	192010ef          	jal	4a80 <exit>
+    38f2:	85ce                	mv	a1,s3
+    38f4:	00002517          	auipc	a0,0x2
+    38f8:	1ac50513          	addi	a0,a0,428 # 5aa0 <malloc+0xb54>
+    38fc:	59c010ef          	jal	4e98 <printf>
+    3900:	4505                	li	a0,1
+    3902:	17e010ef          	jal	4a80 <exit>
+    3906:	172010ef          	jal	4a78 <fork>
+    390a:	00054563          	bltz	a0,3914 <reparent+0x74>
+    390e:	4501                	li	a0,0
+    3910:	170010ef          	jal	4a80 <exit>
+    3914:	8552                	mv	a0,s4
+    3916:	19a010ef          	jal	4ab0 <kill>
+    391a:	4505                	li	a0,1
+    391c:	164010ef          	jal	4a80 <exit>
+
+0000000000003920 <sbrkfail>:
+    3920:	7119                	addi	sp,sp,-128
+    3922:	fc86                	sd	ra,120(sp)
+    3924:	f8a2                	sd	s0,112(sp)
+    3926:	f4a6                	sd	s1,104(sp)
+    3928:	f0ca                	sd	s2,96(sp)
+    392a:	ecce                	sd	s3,88(sp)
+    392c:	e8d2                	sd	s4,80(sp)
+    392e:	e4d6                	sd	s5,72(sp)
+    3930:	0100                	addi	s0,sp,128
+    3932:	8aaa                	mv	s5,a0
+    3934:	fb040513          	addi	a0,s0,-80
+    3938:	158010ef          	jal	4a90 <pipe>
+    393c:	e901                	bnez	a0,394c <sbrkfail+0x2c>
+    393e:	f8040493          	addi	s1,s0,-128
+    3942:	fa840993          	addi	s3,s0,-88
+    3946:	8926                	mv	s2,s1
+    3948:	5a7d                	li	s4,-1
+    394a:	a0a1                	j	3992 <sbrkfail+0x72>
+    394c:	85d6                	mv	a1,s5
+    394e:	00002517          	auipc	a0,0x2
+    3952:	0d250513          	addi	a0,a0,210 # 5a20 <malloc+0xad4>
+    3956:	542010ef          	jal	4e98 <printf>
+    395a:	4505                	li	a0,1
+    395c:	124010ef          	jal	4a80 <exit>
+    3960:	1a8010ef          	jal	4b08 <sbrk>
+    3964:	064007b7          	lui	a5,0x6400
+    3968:	40a7853b          	subw	a0,a5,a0
+    396c:	19c010ef          	jal	4b08 <sbrk>
+    3970:	4605                	li	a2,1
+    3972:	00001597          	auipc	a1,0x1
+    3976:	78658593          	addi	a1,a1,1926 # 50f8 <malloc+0x1ac>
+    397a:	fb442503          	lw	a0,-76(s0)
+    397e:	122010ef          	jal	4aa0 <write>
+    3982:	3e800513          	li	a0,1000
+    3986:	18a010ef          	jal	4b10 <sleep>
+    398a:	bfe5                	j	3982 <sbrkfail+0x62>
+    398c:	0911                	addi	s2,s2,4
+    398e:	03390163          	beq	s2,s3,39b0 <sbrkfail+0x90>
+    3992:	0e6010ef          	jal	4a78 <fork>
+    3996:	00a92023          	sw	a0,0(s2)
+    399a:	d179                	beqz	a0,3960 <sbrkfail+0x40>
+    399c:	ff4508e3          	beq	a0,s4,398c <sbrkfail+0x6c>
+    39a0:	4605                	li	a2,1
+    39a2:	faf40593          	addi	a1,s0,-81
+    39a6:	fb042503          	lw	a0,-80(s0)
+    39aa:	0ee010ef          	jal	4a98 <read>
+    39ae:	bff9                	j	398c <sbrkfail+0x6c>
+    39b0:	6505                	lui	a0,0x1
+    39b2:	156010ef          	jal	4b08 <sbrk>
+    39b6:	8a2a                	mv	s4,a0
+    39b8:	597d                	li	s2,-1
+    39ba:	a021                	j	39c2 <sbrkfail+0xa2>
+    39bc:	0491                	addi	s1,s1,4
+    39be:	01348b63          	beq	s1,s3,39d4 <sbrkfail+0xb4>
+    39c2:	4088                	lw	a0,0(s1)
+    39c4:	ff250ce3          	beq	a0,s2,39bc <sbrkfail+0x9c>
+    39c8:	0e8010ef          	jal	4ab0 <kill>
+    39cc:	4501                	li	a0,0
+    39ce:	0ba010ef          	jal	4a88 <wait>
+    39d2:	b7ed                	j	39bc <sbrkfail+0x9c>
+    39d4:	57fd                	li	a5,-1
+    39d6:	02fa0d63          	beq	s4,a5,3a10 <sbrkfail+0xf0>
+    39da:	09e010ef          	jal	4a78 <fork>
+    39de:	84aa                	mv	s1,a0
+    39e0:	04054263          	bltz	a0,3a24 <sbrkfail+0x104>
+    39e4:	c931                	beqz	a0,3a38 <sbrkfail+0x118>
+    39e6:	fbc40513          	addi	a0,s0,-68
+    39ea:	09e010ef          	jal	4a88 <wait>
+    39ee:	fbc42783          	lw	a5,-68(s0)
+    39f2:	577d                	li	a4,-1
+    39f4:	00e78563          	beq	a5,a4,39fe <sbrkfail+0xde>
+    39f8:	4709                	li	a4,2
+    39fa:	06e79d63          	bne	a5,a4,3a74 <sbrkfail+0x154>
+    39fe:	70e6                	ld	ra,120(sp)
+    3a00:	7446                	ld	s0,112(sp)
+    3a02:	74a6                	ld	s1,104(sp)
+    3a04:	7906                	ld	s2,96(sp)
+    3a06:	69e6                	ld	s3,88(sp)
+    3a08:	6a46                	ld	s4,80(sp)
+    3a0a:	6aa6                	ld	s5,72(sp)
+    3a0c:	6109                	addi	sp,sp,128
+    3a0e:	8082                	ret
+    3a10:	85d6                	mv	a1,s5
+    3a12:	00003517          	auipc	a0,0x3
+    3a16:	15e50513          	addi	a0,a0,350 # 6b70 <malloc+0x1c24>
+    3a1a:	47e010ef          	jal	4e98 <printf>
+    3a1e:	4505                	li	a0,1
+    3a20:	060010ef          	jal	4a80 <exit>
+    3a24:	85d6                	mv	a1,s5
+    3a26:	00002517          	auipc	a0,0x2
+    3a2a:	ef250513          	addi	a0,a0,-270 # 5918 <malloc+0x9cc>
+    3a2e:	46a010ef          	jal	4e98 <printf>
+    3a32:	4505                	li	a0,1
+    3a34:	04c010ef          	jal	4a80 <exit>
+    3a38:	4501                	li	a0,0
+    3a3a:	0ce010ef          	jal	4b08 <sbrk>
+    3a3e:	892a                	mv	s2,a0
+    3a40:	3e800537          	lui	a0,0x3e800
+    3a44:	0c4010ef          	jal	4b08 <sbrk>
+    3a48:	87ca                	mv	a5,s2
+    3a4a:	3e800737          	lui	a4,0x3e800
+    3a4e:	993a                	add	s2,s2,a4
+    3a50:	6705                	lui	a4,0x1
+    3a52:	0007c683          	lbu	a3,0(a5) # 6400000 <base+0x63f0388>
+    3a56:	9cb5                	addw	s1,s1,a3
+    3a58:	97ba                	add	a5,a5,a4
+    3a5a:	fef91ce3          	bne	s2,a5,3a52 <sbrkfail+0x132>
+    3a5e:	8626                	mv	a2,s1
+    3a60:	85d6                	mv	a1,s5
+    3a62:	00003517          	auipc	a0,0x3
+    3a66:	12e50513          	addi	a0,a0,302 # 6b90 <malloc+0x1c44>
+    3a6a:	42e010ef          	jal	4e98 <printf>
+    3a6e:	4505                	li	a0,1
+    3a70:	010010ef          	jal	4a80 <exit>
+    3a74:	4505                	li	a0,1
+    3a76:	00a010ef          	jal	4a80 <exit>
+
+0000000000003a7a <mem>:
+    3a7a:	7139                	addi	sp,sp,-64
+    3a7c:	fc06                	sd	ra,56(sp)
+    3a7e:	f822                	sd	s0,48(sp)
+    3a80:	f426                	sd	s1,40(sp)
+    3a82:	f04a                	sd	s2,32(sp)
+    3a84:	ec4e                	sd	s3,24(sp)
+    3a86:	0080                	addi	s0,sp,64
+    3a88:	89aa                	mv	s3,a0
+    3a8a:	7ef000ef          	jal	4a78 <fork>
+    3a8e:	4481                	li	s1,0
+    3a90:	6909                	lui	s2,0x2
+    3a92:	71190913          	addi	s2,s2,1809 # 2711 <fourteen+0x7d>
+    3a96:	cd11                	beqz	a0,3ab2 <mem+0x38>
+    3a98:	fcc40513          	addi	a0,s0,-52
+    3a9c:	7ed000ef          	jal	4a88 <wait>
+    3aa0:	fcc42503          	lw	a0,-52(s0)
+    3aa4:	57fd                	li	a5,-1
+    3aa6:	04f50363          	beq	a0,a5,3aec <mem+0x72>
+    3aaa:	7d7000ef          	jal	4a80 <exit>
+    3aae:	e104                	sd	s1,0(a0)
+    3ab0:	84aa                	mv	s1,a0
+    3ab2:	854a                	mv	a0,s2
+    3ab4:	498010ef          	jal	4f4c <malloc>
+    3ab8:	f97d                	bnez	a0,3aae <mem+0x34>
+    3aba:	c491                	beqz	s1,3ac6 <mem+0x4c>
+    3abc:	8526                	mv	a0,s1
+    3abe:	6084                	ld	s1,0(s1)
+    3ac0:	40a010ef          	jal	4eca <free>
+    3ac4:	fce5                	bnez	s1,3abc <mem+0x42>
+    3ac6:	6515                	lui	a0,0x5
+    3ac8:	484010ef          	jal	4f4c <malloc>
+    3acc:	c511                	beqz	a0,3ad8 <mem+0x5e>
+    3ace:	3fc010ef          	jal	4eca <free>
+    3ad2:	4501                	li	a0,0
+    3ad4:	7ad000ef          	jal	4a80 <exit>
+    3ad8:	85ce                	mv	a1,s3
+    3ada:	00003517          	auipc	a0,0x3
+    3ade:	0e650513          	addi	a0,a0,230 # 6bc0 <malloc+0x1c74>
+    3ae2:	3b6010ef          	jal	4e98 <printf>
+    3ae6:	4505                	li	a0,1
+    3ae8:	799000ef          	jal	4a80 <exit>
+    3aec:	4501                	li	a0,0
+    3aee:	793000ef          	jal	4a80 <exit>
+
+0000000000003af2 <sharedfd>:
+    3af2:	7159                	addi	sp,sp,-112
+    3af4:	f486                	sd	ra,104(sp)
+    3af6:	f0a2                	sd	s0,96(sp)
+    3af8:	e0d2                	sd	s4,64(sp)
+    3afa:	1880                	addi	s0,sp,112
+    3afc:	8a2a                	mv	s4,a0
+    3afe:	00003517          	auipc	a0,0x3
+    3b02:	0e250513          	addi	a0,a0,226 # 6be0 <malloc+0x1c94>
+    3b06:	7cb000ef          	jal	4ad0 <unlink>
+    3b0a:	20200593          	li	a1,514
+    3b0e:	00003517          	auipc	a0,0x3
+    3b12:	0d250513          	addi	a0,a0,210 # 6be0 <malloc+0x1c94>
+    3b16:	7ab000ef          	jal	4ac0 <open>
+    3b1a:	04054863          	bltz	a0,3b6a <sharedfd+0x78>
+    3b1e:	eca6                	sd	s1,88(sp)
+    3b20:	e8ca                	sd	s2,80(sp)
+    3b22:	e4ce                	sd	s3,72(sp)
+    3b24:	fc56                	sd	s5,56(sp)
+    3b26:	f85a                	sd	s6,48(sp)
+    3b28:	f45e                	sd	s7,40(sp)
+    3b2a:	892a                	mv	s2,a0
+    3b2c:	74d000ef          	jal	4a78 <fork>
+    3b30:	89aa                	mv	s3,a0
+    3b32:	07000593          	li	a1,112
+    3b36:	e119                	bnez	a0,3b3c <sharedfd+0x4a>
+    3b38:	06300593          	li	a1,99
+    3b3c:	4629                	li	a2,10
+    3b3e:	fa040513          	addi	a0,s0,-96
+    3b42:	559000ef          	jal	489a <memset>
+    3b46:	3e800493          	li	s1,1000
+    3b4a:	4629                	li	a2,10
+    3b4c:	fa040593          	addi	a1,s0,-96
+    3b50:	854a                	mv	a0,s2
+    3b52:	74f000ef          	jal	4aa0 <write>
+    3b56:	47a9                	li	a5,10
+    3b58:	02f51963          	bne	a0,a5,3b8a <sharedfd+0x98>
+    3b5c:	34fd                	addiw	s1,s1,-1
+    3b5e:	f4f5                	bnez	s1,3b4a <sharedfd+0x58>
+    3b60:	02099f63          	bnez	s3,3b9e <sharedfd+0xac>
+    3b64:	4501                	li	a0,0
+    3b66:	71b000ef          	jal	4a80 <exit>
+    3b6a:	eca6                	sd	s1,88(sp)
+    3b6c:	e8ca                	sd	s2,80(sp)
+    3b6e:	e4ce                	sd	s3,72(sp)
+    3b70:	fc56                	sd	s5,56(sp)
+    3b72:	f85a                	sd	s6,48(sp)
+    3b74:	f45e                	sd	s7,40(sp)
+    3b76:	85d2                	mv	a1,s4
+    3b78:	00003517          	auipc	a0,0x3
+    3b7c:	07850513          	addi	a0,a0,120 # 6bf0 <malloc+0x1ca4>
+    3b80:	318010ef          	jal	4e98 <printf>
+    3b84:	4505                	li	a0,1
+    3b86:	6fb000ef          	jal	4a80 <exit>
+    3b8a:	85d2                	mv	a1,s4
+    3b8c:	00003517          	auipc	a0,0x3
+    3b90:	08c50513          	addi	a0,a0,140 # 6c18 <malloc+0x1ccc>
+    3b94:	304010ef          	jal	4e98 <printf>
+    3b98:	4505                	li	a0,1
+    3b9a:	6e7000ef          	jal	4a80 <exit>
+    3b9e:	f9c40513          	addi	a0,s0,-100
+    3ba2:	6e7000ef          	jal	4a88 <wait>
+    3ba6:	f9c42983          	lw	s3,-100(s0)
+    3baa:	00098563          	beqz	s3,3bb4 <sharedfd+0xc2>
+    3bae:	854e                	mv	a0,s3
+    3bb0:	6d1000ef          	jal	4a80 <exit>
+    3bb4:	854a                	mv	a0,s2
+    3bb6:	6f3000ef          	jal	4aa8 <close>
+    3bba:	4581                	li	a1,0
+    3bbc:	00003517          	auipc	a0,0x3
+    3bc0:	02450513          	addi	a0,a0,36 # 6be0 <malloc+0x1c94>
+    3bc4:	6fd000ef          	jal	4ac0 <open>
+    3bc8:	8baa                	mv	s7,a0
+    3bca:	8ace                	mv	s5,s3
+    3bcc:	02054363          	bltz	a0,3bf2 <sharedfd+0x100>
+    3bd0:	faa40913          	addi	s2,s0,-86
+    3bd4:	06300493          	li	s1,99
+    3bd8:	07000b13          	li	s6,112
+    3bdc:	4629                	li	a2,10
+    3bde:	fa040593          	addi	a1,s0,-96
+    3be2:	855e                	mv	a0,s7
+    3be4:	6b5000ef          	jal	4a98 <read>
+    3be8:	02a05b63          	blez	a0,3c1e <sharedfd+0x12c>
+    3bec:	fa040793          	addi	a5,s0,-96
+    3bf0:	a839                	j	3c0e <sharedfd+0x11c>
+    3bf2:	85d2                	mv	a1,s4
+    3bf4:	00003517          	auipc	a0,0x3
+    3bf8:	04450513          	addi	a0,a0,68 # 6c38 <malloc+0x1cec>
+    3bfc:	29c010ef          	jal	4e98 <printf>
+    3c00:	4505                	li	a0,1
+    3c02:	67f000ef          	jal	4a80 <exit>
+    3c06:	2985                	addiw	s3,s3,1
+    3c08:	0785                	addi	a5,a5,1
+    3c0a:	fd2789e3          	beq	a5,s2,3bdc <sharedfd+0xea>
+    3c0e:	0007c703          	lbu	a4,0(a5)
+    3c12:	fe970ae3          	beq	a4,s1,3c06 <sharedfd+0x114>
+    3c16:	ff6719e3          	bne	a4,s6,3c08 <sharedfd+0x116>
+    3c1a:	2a85                	addiw	s5,s5,1
+    3c1c:	b7f5                	j	3c08 <sharedfd+0x116>
+    3c1e:	855e                	mv	a0,s7
+    3c20:	689000ef          	jal	4aa8 <close>
+    3c24:	00003517          	auipc	a0,0x3
+    3c28:	fbc50513          	addi	a0,a0,-68 # 6be0 <malloc+0x1c94>
+    3c2c:	6a5000ef          	jal	4ad0 <unlink>
+    3c30:	6789                	lui	a5,0x2
+    3c32:	71078793          	addi	a5,a5,1808 # 2710 <fourteen+0x7c>
+    3c36:	00f99763          	bne	s3,a5,3c44 <sharedfd+0x152>
+    3c3a:	6789                	lui	a5,0x2
+    3c3c:	71078793          	addi	a5,a5,1808 # 2710 <fourteen+0x7c>
+    3c40:	00fa8c63          	beq	s5,a5,3c58 <sharedfd+0x166>
+    3c44:	85d2                	mv	a1,s4
+    3c46:	00003517          	auipc	a0,0x3
+    3c4a:	01a50513          	addi	a0,a0,26 # 6c60 <malloc+0x1d14>
+    3c4e:	24a010ef          	jal	4e98 <printf>
+    3c52:	4505                	li	a0,1
+    3c54:	62d000ef          	jal	4a80 <exit>
+    3c58:	4501                	li	a0,0
+    3c5a:	627000ef          	jal	4a80 <exit>
+
+0000000000003c5e <fourfiles>:
+    3c5e:	7135                	addi	sp,sp,-160
+    3c60:	ed06                	sd	ra,152(sp)
+    3c62:	e922                	sd	s0,144(sp)
+    3c64:	e526                	sd	s1,136(sp)
+    3c66:	e14a                	sd	s2,128(sp)
+    3c68:	fcce                	sd	s3,120(sp)
+    3c6a:	f8d2                	sd	s4,112(sp)
+    3c6c:	f4d6                	sd	s5,104(sp)
+    3c6e:	f0da                	sd	s6,96(sp)
+    3c70:	ecde                	sd	s7,88(sp)
+    3c72:	e8e2                	sd	s8,80(sp)
+    3c74:	e4e6                	sd	s9,72(sp)
+    3c76:	e0ea                	sd	s10,64(sp)
+    3c78:	fc6e                	sd	s11,56(sp)
+    3c7a:	1100                	addi	s0,sp,160
+    3c7c:	8caa                	mv	s9,a0
+    3c7e:	00003797          	auipc	a5,0x3
+    3c82:	ffa78793          	addi	a5,a5,-6 # 6c78 <malloc+0x1d2c>
+    3c86:	f6f43823          	sd	a5,-144(s0)
+    3c8a:	00003797          	auipc	a5,0x3
+    3c8e:	ff678793          	addi	a5,a5,-10 # 6c80 <malloc+0x1d34>
+    3c92:	f6f43c23          	sd	a5,-136(s0)
+    3c96:	00003797          	auipc	a5,0x3
+    3c9a:	ff278793          	addi	a5,a5,-14 # 6c88 <malloc+0x1d3c>
+    3c9e:	f8f43023          	sd	a5,-128(s0)
+    3ca2:	00003797          	auipc	a5,0x3
+    3ca6:	fee78793          	addi	a5,a5,-18 # 6c90 <malloc+0x1d44>
+    3caa:	f8f43423          	sd	a5,-120(s0)
+    3cae:	f7040b93          	addi	s7,s0,-144
+    3cb2:	895e                	mv	s2,s7
+    3cb4:	4481                	li	s1,0
+    3cb6:	4a11                	li	s4,4
+    3cb8:	00093983          	ld	s3,0(s2)
+    3cbc:	854e                	mv	a0,s3
+    3cbe:	613000ef          	jal	4ad0 <unlink>
+    3cc2:	5b7000ef          	jal	4a78 <fork>
+    3cc6:	02054e63          	bltz	a0,3d02 <fourfiles+0xa4>
+    3cca:	c531                	beqz	a0,3d16 <fourfiles+0xb8>
+    3ccc:	2485                	addiw	s1,s1,1
+    3cce:	0921                	addi	s2,s2,8
+    3cd0:	ff4494e3          	bne	s1,s4,3cb8 <fourfiles+0x5a>
+    3cd4:	4491                	li	s1,4
+    3cd6:	f6c40513          	addi	a0,s0,-148
+    3cda:	5af000ef          	jal	4a88 <wait>
+    3cde:	f6c42a83          	lw	s5,-148(s0)
+    3ce2:	0a0a9463          	bnez	s5,3d8a <fourfiles+0x12c>
+    3ce6:	34fd                	addiw	s1,s1,-1
+    3ce8:	f4fd                	bnez	s1,3cd6 <fourfiles+0x78>
+    3cea:	03000b13          	li	s6,48
+    3cee:	00009a17          	auipc	s4,0x9
+    3cf2:	f8aa0a13          	addi	s4,s4,-118 # cc78 <buf>
+    3cf6:	6d05                	lui	s10,0x1
+    3cf8:	770d0d13          	addi	s10,s10,1904 # 1770 <forkfork+0x1e>
+    3cfc:	03400d93          	li	s11,52
+    3d00:	a0ed                	j	3dea <fourfiles+0x18c>
+    3d02:	85e6                	mv	a1,s9
+    3d04:	00002517          	auipc	a0,0x2
+    3d08:	c1450513          	addi	a0,a0,-1004 # 5918 <malloc+0x9cc>
+    3d0c:	18c010ef          	jal	4e98 <printf>
+    3d10:	4505                	li	a0,1
+    3d12:	56f000ef          	jal	4a80 <exit>
+    3d16:	20200593          	li	a1,514
+    3d1a:	854e                	mv	a0,s3
+    3d1c:	5a5000ef          	jal	4ac0 <open>
+    3d20:	892a                	mv	s2,a0
+    3d22:	04054163          	bltz	a0,3d64 <fourfiles+0x106>
+    3d26:	1f400613          	li	a2,500
+    3d2a:	0304859b          	addiw	a1,s1,48
+    3d2e:	00009517          	auipc	a0,0x9
+    3d32:	f4a50513          	addi	a0,a0,-182 # cc78 <buf>
+    3d36:	365000ef          	jal	489a <memset>
+    3d3a:	44b1                	li	s1,12
+    3d3c:	00009997          	auipc	s3,0x9
+    3d40:	f3c98993          	addi	s3,s3,-196 # cc78 <buf>
+    3d44:	1f400613          	li	a2,500
+    3d48:	85ce                	mv	a1,s3
+    3d4a:	854a                	mv	a0,s2
+    3d4c:	555000ef          	jal	4aa0 <write>
+    3d50:	85aa                	mv	a1,a0
+    3d52:	1f400793          	li	a5,500
+    3d56:	02f51163          	bne	a0,a5,3d78 <fourfiles+0x11a>
+    3d5a:	34fd                	addiw	s1,s1,-1
+    3d5c:	f4e5                	bnez	s1,3d44 <fourfiles+0xe6>
+    3d5e:	4501                	li	a0,0
+    3d60:	521000ef          	jal	4a80 <exit>
+    3d64:	85e6                	mv	a1,s9
+    3d66:	00002517          	auipc	a0,0x2
+    3d6a:	c4a50513          	addi	a0,a0,-950 # 59b0 <malloc+0xa64>
+    3d6e:	12a010ef          	jal	4e98 <printf>
+    3d72:	4505                	li	a0,1
+    3d74:	50d000ef          	jal	4a80 <exit>
+    3d78:	00003517          	auipc	a0,0x3
+    3d7c:	f2050513          	addi	a0,a0,-224 # 6c98 <malloc+0x1d4c>
+    3d80:	118010ef          	jal	4e98 <printf>
+    3d84:	4505                	li	a0,1
+    3d86:	4fb000ef          	jal	4a80 <exit>
+    3d8a:	8556                	mv	a0,s5
+    3d8c:	4f5000ef          	jal	4a80 <exit>
+    3d90:	85e6                	mv	a1,s9
+    3d92:	00003517          	auipc	a0,0x3
+    3d96:	f1e50513          	addi	a0,a0,-226 # 6cb0 <malloc+0x1d64>
+    3d9a:	0fe010ef          	jal	4e98 <printf>
+    3d9e:	4505                	li	a0,1
+    3da0:	4e1000ef          	jal	4a80 <exit>
+    3da4:	00a9093b          	addw	s2,s2,a0
+    3da8:	660d                	lui	a2,0x3
+    3daa:	85d2                	mv	a1,s4
+    3dac:	854e                	mv	a0,s3
+    3dae:	4eb000ef          	jal	4a98 <read>
+    3db2:	02a05063          	blez	a0,3dd2 <fourfiles+0x174>
+    3db6:	00009797          	auipc	a5,0x9
+    3dba:	ec278793          	addi	a5,a5,-318 # cc78 <buf>
+    3dbe:	00f506b3          	add	a3,a0,a5
+    3dc2:	0007c703          	lbu	a4,0(a5)
+    3dc6:	fc9715e3          	bne	a4,s1,3d90 <fourfiles+0x132>
+    3dca:	0785                	addi	a5,a5,1
+    3dcc:	fed79be3          	bne	a5,a3,3dc2 <fourfiles+0x164>
+    3dd0:	bfd1                	j	3da4 <fourfiles+0x146>
+    3dd2:	854e                	mv	a0,s3
+    3dd4:	4d5000ef          	jal	4aa8 <close>
+    3dd8:	03a91463          	bne	s2,s10,3e00 <fourfiles+0x1a2>
+    3ddc:	8562                	mv	a0,s8
+    3dde:	4f3000ef          	jal	4ad0 <unlink>
+    3de2:	0ba1                	addi	s7,s7,8
+    3de4:	2b05                	addiw	s6,s6,1
+    3de6:	03bb0763          	beq	s6,s11,3e14 <fourfiles+0x1b6>
+    3dea:	000bbc03          	ld	s8,0(s7)
+    3dee:	4581                	li	a1,0
+    3df0:	8562                	mv	a0,s8
+    3df2:	4cf000ef          	jal	4ac0 <open>
+    3df6:	89aa                	mv	s3,a0
+    3df8:	8956                	mv	s2,s5
+    3dfa:	000b049b          	sext.w	s1,s6
+    3dfe:	b76d                	j	3da8 <fourfiles+0x14a>
+    3e00:	85ca                	mv	a1,s2
+    3e02:	00003517          	auipc	a0,0x3
+    3e06:	ebe50513          	addi	a0,a0,-322 # 6cc0 <malloc+0x1d74>
+    3e0a:	08e010ef          	jal	4e98 <printf>
+    3e0e:	4505                	li	a0,1
+    3e10:	471000ef          	jal	4a80 <exit>
+    3e14:	60ea                	ld	ra,152(sp)
+    3e16:	644a                	ld	s0,144(sp)
+    3e18:	64aa                	ld	s1,136(sp)
+    3e1a:	690a                	ld	s2,128(sp)
+    3e1c:	79e6                	ld	s3,120(sp)
+    3e1e:	7a46                	ld	s4,112(sp)
+    3e20:	7aa6                	ld	s5,104(sp)
+    3e22:	7b06                	ld	s6,96(sp)
+    3e24:	6be6                	ld	s7,88(sp)
+    3e26:	6c46                	ld	s8,80(sp)
+    3e28:	6ca6                	ld	s9,72(sp)
+    3e2a:	6d06                	ld	s10,64(sp)
+    3e2c:	7de2                	ld	s11,56(sp)
+    3e2e:	610d                	addi	sp,sp,160
+    3e30:	8082                	ret
+
+0000000000003e32 <concreate>:
+    3e32:	7135                	addi	sp,sp,-160
+    3e34:	ed06                	sd	ra,152(sp)
+    3e36:	e922                	sd	s0,144(sp)
+    3e38:	e526                	sd	s1,136(sp)
+    3e3a:	e14a                	sd	s2,128(sp)
+    3e3c:	fcce                	sd	s3,120(sp)
+    3e3e:	f8d2                	sd	s4,112(sp)
+    3e40:	f4d6                	sd	s5,104(sp)
+    3e42:	f0da                	sd	s6,96(sp)
+    3e44:	ecde                	sd	s7,88(sp)
+    3e46:	1100                	addi	s0,sp,160
+    3e48:	89aa                	mv	s3,a0
+    3e4a:	04300793          	li	a5,67
+    3e4e:	faf40423          	sb	a5,-88(s0)
+    3e52:	fa040523          	sb	zero,-86(s0)
+    3e56:	4901                	li	s2,0
+    3e58:	4b0d                	li	s6,3
+    3e5a:	4a85                	li	s5,1
+    3e5c:	00003b97          	auipc	s7,0x3
+    3e60:	e7cb8b93          	addi	s7,s7,-388 # 6cd8 <malloc+0x1d8c>
+    3e64:	02800a13          	li	s4,40
+    3e68:	a41d                	j	408e <concreate+0x25c>
+    3e6a:	fa840593          	addi	a1,s0,-88
+    3e6e:	855e                	mv	a0,s7
+    3e70:	471000ef          	jal	4ae0 <link>
+    3e74:	a411                	j	4078 <concreate+0x246>
+    3e76:	4795                	li	a5,5
+    3e78:	02f9693b          	remw	s2,s2,a5
+    3e7c:	4785                	li	a5,1
+    3e7e:	02f90563          	beq	s2,a5,3ea8 <concreate+0x76>
+    3e82:	20200593          	li	a1,514
+    3e86:	fa840513          	addi	a0,s0,-88
+    3e8a:	437000ef          	jal	4ac0 <open>
+    3e8e:	1e055063          	bgez	a0,406e <concreate+0x23c>
+    3e92:	fa840593          	addi	a1,s0,-88
+    3e96:	00003517          	auipc	a0,0x3
+    3e9a:	e4a50513          	addi	a0,a0,-438 # 6ce0 <malloc+0x1d94>
+    3e9e:	7fb000ef          	jal	4e98 <printf>
+    3ea2:	4505                	li	a0,1
+    3ea4:	3dd000ef          	jal	4a80 <exit>
+    3ea8:	fa840593          	addi	a1,s0,-88
+    3eac:	00003517          	auipc	a0,0x3
+    3eb0:	e2c50513          	addi	a0,a0,-468 # 6cd8 <malloc+0x1d8c>
+    3eb4:	42d000ef          	jal	4ae0 <link>
+    3eb8:	4501                	li	a0,0
+    3eba:	3c7000ef          	jal	4a80 <exit>
+    3ebe:	4505                	li	a0,1
+    3ec0:	3c1000ef          	jal	4a80 <exit>
+    3ec4:	02800613          	li	a2,40
+    3ec8:	4581                	li	a1,0
+    3eca:	f8040513          	addi	a0,s0,-128
+    3ece:	1cd000ef          	jal	489a <memset>
+    3ed2:	4581                	li	a1,0
+    3ed4:	00002517          	auipc	a0,0x2
+    3ed8:	89c50513          	addi	a0,a0,-1892 # 5770 <malloc+0x824>
+    3edc:	3e5000ef          	jal	4ac0 <open>
+    3ee0:	892a                	mv	s2,a0
+    3ee2:	8aa6                	mv	s5,s1
+    3ee4:	04300a13          	li	s4,67
+    3ee8:	02700b13          	li	s6,39
+    3eec:	4b85                	li	s7,1
+    3eee:	4641                	li	a2,16
+    3ef0:	f7040593          	addi	a1,s0,-144
+    3ef4:	854a                	mv	a0,s2
+    3ef6:	3a3000ef          	jal	4a98 <read>
+    3efa:	06a05a63          	blez	a0,3f6e <concreate+0x13c>
+    3efe:	f7045783          	lhu	a5,-144(s0)
+    3f02:	d7f5                	beqz	a5,3eee <concreate+0xbc>
+    3f04:	f7244783          	lbu	a5,-142(s0)
+    3f08:	ff4793e3          	bne	a5,s4,3eee <concreate+0xbc>
+    3f0c:	f7444783          	lbu	a5,-140(s0)
+    3f10:	fff9                	bnez	a5,3eee <concreate+0xbc>
+    3f12:	f7344783          	lbu	a5,-141(s0)
+    3f16:	fd07879b          	addiw	a5,a5,-48
+    3f1a:	0007871b          	sext.w	a4,a5
+    3f1e:	02eb6063          	bltu	s6,a4,3f3e <concreate+0x10c>
+    3f22:	fb070793          	addi	a5,a4,-80 # fb0 <bigdir+0x112>
+    3f26:	97a2                	add	a5,a5,s0
+    3f28:	fd07c783          	lbu	a5,-48(a5)
+    3f2c:	e78d                	bnez	a5,3f56 <concreate+0x124>
+    3f2e:	fb070793          	addi	a5,a4,-80
+    3f32:	00878733          	add	a4,a5,s0
+    3f36:	fd770823          	sb	s7,-48(a4)
+    3f3a:	2a85                	addiw	s5,s5,1
+    3f3c:	bf4d                	j	3eee <concreate+0xbc>
+    3f3e:	f7240613          	addi	a2,s0,-142
+    3f42:	85ce                	mv	a1,s3
+    3f44:	00003517          	auipc	a0,0x3
+    3f48:	dbc50513          	addi	a0,a0,-580 # 6d00 <malloc+0x1db4>
+    3f4c:	74d000ef          	jal	4e98 <printf>
+    3f50:	4505                	li	a0,1
+    3f52:	32f000ef          	jal	4a80 <exit>
+    3f56:	f7240613          	addi	a2,s0,-142
+    3f5a:	85ce                	mv	a1,s3
+    3f5c:	00003517          	auipc	a0,0x3
+    3f60:	dc450513          	addi	a0,a0,-572 # 6d20 <malloc+0x1dd4>
+    3f64:	735000ef          	jal	4e98 <printf>
+    3f68:	4505                	li	a0,1
+    3f6a:	317000ef          	jal	4a80 <exit>
+    3f6e:	854a                	mv	a0,s2
+    3f70:	339000ef          	jal	4aa8 <close>
+    3f74:	02800793          	li	a5,40
+    3f78:	00fa9763          	bne	s5,a5,3f86 <concreate+0x154>
+    3f7c:	4a8d                	li	s5,3
+    3f7e:	4b05                	li	s6,1
+    3f80:	02800a13          	li	s4,40
+    3f84:	a079                	j	4012 <concreate+0x1e0>
+    3f86:	85ce                	mv	a1,s3
+    3f88:	00003517          	auipc	a0,0x3
+    3f8c:	dc050513          	addi	a0,a0,-576 # 6d48 <malloc+0x1dfc>
+    3f90:	709000ef          	jal	4e98 <printf>
+    3f94:	4505                	li	a0,1
+    3f96:	2eb000ef          	jal	4a80 <exit>
+    3f9a:	85ce                	mv	a1,s3
+    3f9c:	00002517          	auipc	a0,0x2
+    3fa0:	97c50513          	addi	a0,a0,-1668 # 5918 <malloc+0x9cc>
+    3fa4:	6f5000ef          	jal	4e98 <printf>
+    3fa8:	4505                	li	a0,1
+    3faa:	2d7000ef          	jal	4a80 <exit>
+    3fae:	4581                	li	a1,0
+    3fb0:	fa840513          	addi	a0,s0,-88
+    3fb4:	30d000ef          	jal	4ac0 <open>
+    3fb8:	2f1000ef          	jal	4aa8 <close>
+    3fbc:	4581                	li	a1,0
+    3fbe:	fa840513          	addi	a0,s0,-88
+    3fc2:	2ff000ef          	jal	4ac0 <open>
+    3fc6:	2e3000ef          	jal	4aa8 <close>
+    3fca:	4581                	li	a1,0
+    3fcc:	fa840513          	addi	a0,s0,-88
+    3fd0:	2f1000ef          	jal	4ac0 <open>
+    3fd4:	2d5000ef          	jal	4aa8 <close>
+    3fd8:	4581                	li	a1,0
+    3fda:	fa840513          	addi	a0,s0,-88
+    3fde:	2e3000ef          	jal	4ac0 <open>
+    3fe2:	2c7000ef          	jal	4aa8 <close>
+    3fe6:	4581                	li	a1,0
+    3fe8:	fa840513          	addi	a0,s0,-88
+    3fec:	2d5000ef          	jal	4ac0 <open>
+    3ff0:	2b9000ef          	jal	4aa8 <close>
+    3ff4:	4581                	li	a1,0
+    3ff6:	fa840513          	addi	a0,s0,-88
+    3ffa:	2c7000ef          	jal	4ac0 <open>
+    3ffe:	2ab000ef          	jal	4aa8 <close>
+    4002:	06090363          	beqz	s2,4068 <concreate+0x236>
+    4006:	4501                	li	a0,0
+    4008:	281000ef          	jal	4a88 <wait>
+    400c:	2485                	addiw	s1,s1,1
+    400e:	0b448963          	beq	s1,s4,40c0 <concreate+0x28e>
+    4012:	0304879b          	addiw	a5,s1,48
+    4016:	faf404a3          	sb	a5,-87(s0)
+    401a:	25f000ef          	jal	4a78 <fork>
+    401e:	892a                	mv	s2,a0
+    4020:	f6054de3          	bltz	a0,3f9a <concreate+0x168>
+    4024:	0354e73b          	remw	a4,s1,s5
+    4028:	00a767b3          	or	a5,a4,a0
+    402c:	2781                	sext.w	a5,a5
+    402e:	d3c1                	beqz	a5,3fae <concreate+0x17c>
+    4030:	01671363          	bne	a4,s6,4036 <concreate+0x204>
+    4034:	fd2d                	bnez	a0,3fae <concreate+0x17c>
+    4036:	fa840513          	addi	a0,s0,-88
+    403a:	297000ef          	jal	4ad0 <unlink>
+    403e:	fa840513          	addi	a0,s0,-88
+    4042:	28f000ef          	jal	4ad0 <unlink>
+    4046:	fa840513          	addi	a0,s0,-88
+    404a:	287000ef          	jal	4ad0 <unlink>
+    404e:	fa840513          	addi	a0,s0,-88
+    4052:	27f000ef          	jal	4ad0 <unlink>
+    4056:	fa840513          	addi	a0,s0,-88
+    405a:	277000ef          	jal	4ad0 <unlink>
+    405e:	fa840513          	addi	a0,s0,-88
+    4062:	26f000ef          	jal	4ad0 <unlink>
+    4066:	bf71                	j	4002 <concreate+0x1d0>
+    4068:	4501                	li	a0,0
+    406a:	217000ef          	jal	4a80 <exit>
+    406e:	23b000ef          	jal	4aa8 <close>
+    4072:	b599                	j	3eb8 <concreate+0x86>
+    4074:	235000ef          	jal	4aa8 <close>
+    4078:	f6c40513          	addi	a0,s0,-148
+    407c:	20d000ef          	jal	4a88 <wait>
+    4080:	f6c42483          	lw	s1,-148(s0)
+    4084:	e2049de3          	bnez	s1,3ebe <concreate+0x8c>
+    4088:	2905                	addiw	s2,s2,1
+    408a:	e3490de3          	beq	s2,s4,3ec4 <concreate+0x92>
+    408e:	0309079b          	addiw	a5,s2,48
+    4092:	faf404a3          	sb	a5,-87(s0)
+    4096:	fa840513          	addi	a0,s0,-88
+    409a:	237000ef          	jal	4ad0 <unlink>
+    409e:	1db000ef          	jal	4a78 <fork>
+    40a2:	dc050ae3          	beqz	a0,3e76 <concreate+0x44>
+    40a6:	036967bb          	remw	a5,s2,s6
+    40aa:	dd5780e3          	beq	a5,s5,3e6a <concreate+0x38>
+    40ae:	20200593          	li	a1,514
+    40b2:	fa840513          	addi	a0,s0,-88
+    40b6:	20b000ef          	jal	4ac0 <open>
+    40ba:	fa055de3          	bgez	a0,4074 <concreate+0x242>
+    40be:	bbd1                	j	3e92 <concreate+0x60>
+    40c0:	60ea                	ld	ra,152(sp)
+    40c2:	644a                	ld	s0,144(sp)
+    40c4:	64aa                	ld	s1,136(sp)
+    40c6:	690a                	ld	s2,128(sp)
+    40c8:	79e6                	ld	s3,120(sp)
+    40ca:	7a46                	ld	s4,112(sp)
+    40cc:	7aa6                	ld	s5,104(sp)
+    40ce:	7b06                	ld	s6,96(sp)
+    40d0:	6be6                	ld	s7,88(sp)
+    40d2:	610d                	addi	sp,sp,160
+    40d4:	8082                	ret
+
+00000000000040d6 <bigfile>:
+    40d6:	7139                	addi	sp,sp,-64
+    40d8:	fc06                	sd	ra,56(sp)
+    40da:	f822                	sd	s0,48(sp)
+    40dc:	f426                	sd	s1,40(sp)
+    40de:	f04a                	sd	s2,32(sp)
+    40e0:	ec4e                	sd	s3,24(sp)
+    40e2:	e852                	sd	s4,16(sp)
+    40e4:	e456                	sd	s5,8(sp)
+    40e6:	0080                	addi	s0,sp,64
+    40e8:	8aaa                	mv	s5,a0
+    40ea:	00003517          	auipc	a0,0x3
+    40ee:	c9650513          	addi	a0,a0,-874 # 6d80 <malloc+0x1e34>
+    40f2:	1df000ef          	jal	4ad0 <unlink>
+    40f6:	20200593          	li	a1,514
+    40fa:	00003517          	auipc	a0,0x3
+    40fe:	c8650513          	addi	a0,a0,-890 # 6d80 <malloc+0x1e34>
+    4102:	1bf000ef          	jal	4ac0 <open>
+    4106:	89aa                	mv	s3,a0
+    4108:	4481                	li	s1,0
+    410a:	00009917          	auipc	s2,0x9
+    410e:	b6e90913          	addi	s2,s2,-1170 # cc78 <buf>
+    4112:	4a51                	li	s4,20
+    4114:	08054663          	bltz	a0,41a0 <bigfile+0xca>
+    4118:	25800613          	li	a2,600
+    411c:	85a6                	mv	a1,s1
+    411e:	854a                	mv	a0,s2
+    4120:	77a000ef          	jal	489a <memset>
+    4124:	25800613          	li	a2,600
+    4128:	85ca                	mv	a1,s2
+    412a:	854e                	mv	a0,s3
+    412c:	175000ef          	jal	4aa0 <write>
+    4130:	25800793          	li	a5,600
+    4134:	08f51063          	bne	a0,a5,41b4 <bigfile+0xde>
+    4138:	2485                	addiw	s1,s1,1
+    413a:	fd449fe3          	bne	s1,s4,4118 <bigfile+0x42>
+    413e:	854e                	mv	a0,s3
+    4140:	169000ef          	jal	4aa8 <close>
+    4144:	4581                	li	a1,0
+    4146:	00003517          	auipc	a0,0x3
+    414a:	c3a50513          	addi	a0,a0,-966 # 6d80 <malloc+0x1e34>
+    414e:	173000ef          	jal	4ac0 <open>
+    4152:	8a2a                	mv	s4,a0
+    4154:	4981                	li	s3,0
+    4156:	4481                	li	s1,0
+    4158:	00009917          	auipc	s2,0x9
+    415c:	b2090913          	addi	s2,s2,-1248 # cc78 <buf>
+    4160:	06054463          	bltz	a0,41c8 <bigfile+0xf2>
+    4164:	12c00613          	li	a2,300
+    4168:	85ca                	mv	a1,s2
+    416a:	8552                	mv	a0,s4
+    416c:	12d000ef          	jal	4a98 <read>
+    4170:	06054663          	bltz	a0,41dc <bigfile+0x106>
+    4174:	c155                	beqz	a0,4218 <bigfile+0x142>
+    4176:	12c00793          	li	a5,300
+    417a:	06f51b63          	bne	a0,a5,41f0 <bigfile+0x11a>
+    417e:	01f4d79b          	srliw	a5,s1,0x1f
+    4182:	9fa5                	addw	a5,a5,s1
+    4184:	4017d79b          	sraiw	a5,a5,0x1
+    4188:	00094703          	lbu	a4,0(s2)
+    418c:	06f71c63          	bne	a4,a5,4204 <bigfile+0x12e>
+    4190:	12b94703          	lbu	a4,299(s2)
+    4194:	06f71863          	bne	a4,a5,4204 <bigfile+0x12e>
+    4198:	12c9899b          	addiw	s3,s3,300
+    419c:	2485                	addiw	s1,s1,1
+    419e:	b7d9                	j	4164 <bigfile+0x8e>
+    41a0:	85d6                	mv	a1,s5
+    41a2:	00003517          	auipc	a0,0x3
+    41a6:	bee50513          	addi	a0,a0,-1042 # 6d90 <malloc+0x1e44>
+    41aa:	4ef000ef          	jal	4e98 <printf>
+    41ae:	4505                	li	a0,1
+    41b0:	0d1000ef          	jal	4a80 <exit>
+    41b4:	85d6                	mv	a1,s5
+    41b6:	00003517          	auipc	a0,0x3
+    41ba:	bfa50513          	addi	a0,a0,-1030 # 6db0 <malloc+0x1e64>
+    41be:	4db000ef          	jal	4e98 <printf>
+    41c2:	4505                	li	a0,1
+    41c4:	0bd000ef          	jal	4a80 <exit>
+    41c8:	85d6                	mv	a1,s5
+    41ca:	00003517          	auipc	a0,0x3
+    41ce:	c0650513          	addi	a0,a0,-1018 # 6dd0 <malloc+0x1e84>
+    41d2:	4c7000ef          	jal	4e98 <printf>
+    41d6:	4505                	li	a0,1
+    41d8:	0a9000ef          	jal	4a80 <exit>
+    41dc:	85d6                	mv	a1,s5
+    41de:	00003517          	auipc	a0,0x3
+    41e2:	c1250513          	addi	a0,a0,-1006 # 6df0 <malloc+0x1ea4>
+    41e6:	4b3000ef          	jal	4e98 <printf>
+    41ea:	4505                	li	a0,1
+    41ec:	095000ef          	jal	4a80 <exit>
+    41f0:	85d6                	mv	a1,s5
+    41f2:	00003517          	auipc	a0,0x3
+    41f6:	c1e50513          	addi	a0,a0,-994 # 6e10 <malloc+0x1ec4>
+    41fa:	49f000ef          	jal	4e98 <printf>
+    41fe:	4505                	li	a0,1
+    4200:	081000ef          	jal	4a80 <exit>
+    4204:	85d6                	mv	a1,s5
+    4206:	00003517          	auipc	a0,0x3
+    420a:	c2250513          	addi	a0,a0,-990 # 6e28 <malloc+0x1edc>
+    420e:	48b000ef          	jal	4e98 <printf>
+    4212:	4505                	li	a0,1
+    4214:	06d000ef          	jal	4a80 <exit>
+    4218:	8552                	mv	a0,s4
+    421a:	08f000ef          	jal	4aa8 <close>
+    421e:	678d                	lui	a5,0x3
+    4220:	ee078793          	addi	a5,a5,-288 # 2ee0 <subdir+0x304>
+    4224:	02f99163          	bne	s3,a5,4246 <bigfile+0x170>
+    4228:	00003517          	auipc	a0,0x3
+    422c:	b5850513          	addi	a0,a0,-1192 # 6d80 <malloc+0x1e34>
+    4230:	0a1000ef          	jal	4ad0 <unlink>
+    4234:	70e2                	ld	ra,56(sp)
+    4236:	7442                	ld	s0,48(sp)
+    4238:	74a2                	ld	s1,40(sp)
+    423a:	7902                	ld	s2,32(sp)
+    423c:	69e2                	ld	s3,24(sp)
+    423e:	6a42                	ld	s4,16(sp)
+    4240:	6aa2                	ld	s5,8(sp)
+    4242:	6121                	addi	sp,sp,64
+    4244:	8082                	ret
+    4246:	85d6                	mv	a1,s5
+    4248:	00003517          	auipc	a0,0x3
+    424c:	c0050513          	addi	a0,a0,-1024 # 6e48 <malloc+0x1efc>
+    4250:	449000ef          	jal	4e98 <printf>
+    4254:	4505                	li	a0,1
+    4256:	02b000ef          	jal	4a80 <exit>
+
+000000000000425a <bigargtest>:
+    425a:	7121                	addi	sp,sp,-448
+    425c:	ff06                	sd	ra,440(sp)
+    425e:	fb22                	sd	s0,432(sp)
+    4260:	f726                	sd	s1,424(sp)
+    4262:	0380                	addi	s0,sp,448
+    4264:	84aa                	mv	s1,a0
+    4266:	00003517          	auipc	a0,0x3
+    426a:	c0250513          	addi	a0,a0,-1022 # 6e68 <malloc+0x1f1c>
+    426e:	063000ef          	jal	4ad0 <unlink>
+    4272:	007000ef          	jal	4a78 <fork>
+    4276:	c915                	beqz	a0,42aa <bigargtest+0x50>
+    4278:	08054a63          	bltz	a0,430c <bigargtest+0xb2>
+    427c:	fdc40513          	addi	a0,s0,-36
+    4280:	009000ef          	jal	4a88 <wait>
+    4284:	fdc42503          	lw	a0,-36(s0)
+    4288:	ed41                	bnez	a0,4320 <bigargtest+0xc6>
+    428a:	4581                	li	a1,0
+    428c:	00003517          	auipc	a0,0x3
+    4290:	bdc50513          	addi	a0,a0,-1060 # 6e68 <malloc+0x1f1c>
+    4294:	02d000ef          	jal	4ac0 <open>
+    4298:	08054663          	bltz	a0,4324 <bigargtest+0xca>
+    429c:	00d000ef          	jal	4aa8 <close>
+    42a0:	70fa                	ld	ra,440(sp)
+    42a2:	745a                	ld	s0,432(sp)
+    42a4:	74ba                	ld	s1,424(sp)
+    42a6:	6139                	addi	sp,sp,448
+    42a8:	8082                	ret
+    42aa:	19000613          	li	a2,400
+    42ae:	02000593          	li	a1,32
+    42b2:	e4840513          	addi	a0,s0,-440
+    42b6:	5e4000ef          	jal	489a <memset>
+    42ba:	fc040ba3          	sb	zero,-41(s0)
+    42be:	00005797          	auipc	a5,0x5
+    42c2:	1a278793          	addi	a5,a5,418 # 9460 <args.1>
+    42c6:	00005697          	auipc	a3,0x5
+    42ca:	29268693          	addi	a3,a3,658 # 9558 <args.1+0xf8>
+    42ce:	e4840713          	addi	a4,s0,-440
+    42d2:	e398                	sd	a4,0(a5)
+    42d4:	07a1                	addi	a5,a5,8
+    42d6:	fed79ee3          	bne	a5,a3,42d2 <bigargtest+0x78>
+    42da:	00005597          	auipc	a1,0x5
+    42de:	18658593          	addi	a1,a1,390 # 9460 <args.1>
+    42e2:	0e05bc23          	sd	zero,248(a1)
+    42e6:	00001517          	auipc	a0,0x1
+    42ea:	da250513          	addi	a0,a0,-606 # 5088 <malloc+0x13c>
+    42ee:	7ca000ef          	jal	4ab8 <exec>
+    42f2:	20000593          	li	a1,512
+    42f6:	00003517          	auipc	a0,0x3
+    42fa:	b7250513          	addi	a0,a0,-1166 # 6e68 <malloc+0x1f1c>
+    42fe:	7c2000ef          	jal	4ac0 <open>
+    4302:	7a6000ef          	jal	4aa8 <close>
+    4306:	4501                	li	a0,0
+    4308:	778000ef          	jal	4a80 <exit>
+    430c:	85a6                	mv	a1,s1
+    430e:	00003517          	auipc	a0,0x3
+    4312:	b6a50513          	addi	a0,a0,-1174 # 6e78 <malloc+0x1f2c>
+    4316:	383000ef          	jal	4e98 <printf>
+    431a:	4505                	li	a0,1
+    431c:	764000ef          	jal	4a80 <exit>
+    4320:	760000ef          	jal	4a80 <exit>
+    4324:	85a6                	mv	a1,s1
+    4326:	00003517          	auipc	a0,0x3
+    432a:	b7250513          	addi	a0,a0,-1166 # 6e98 <malloc+0x1f4c>
+    432e:	36b000ef          	jal	4e98 <printf>
+    4332:	4505                	li	a0,1
+    4334:	74c000ef          	jal	4a80 <exit>
+
+0000000000004338 <fsfull>:
+    4338:	7135                	addi	sp,sp,-160
+    433a:	ed06                	sd	ra,152(sp)
+    433c:	e922                	sd	s0,144(sp)
+    433e:	e526                	sd	s1,136(sp)
+    4340:	e14a                	sd	s2,128(sp)
+    4342:	fcce                	sd	s3,120(sp)
+    4344:	f8d2                	sd	s4,112(sp)
+    4346:	f4d6                	sd	s5,104(sp)
+    4348:	f0da                	sd	s6,96(sp)
+    434a:	ecde                	sd	s7,88(sp)
+    434c:	e8e2                	sd	s8,80(sp)
+    434e:	e4e6                	sd	s9,72(sp)
+    4350:	e0ea                	sd	s10,64(sp)
+    4352:	1100                	addi	s0,sp,160
+    4354:	00003517          	auipc	a0,0x3
+    4358:	b6450513          	addi	a0,a0,-1180 # 6eb8 <malloc+0x1f6c>
+    435c:	33d000ef          	jal	4e98 <printf>
+    4360:	4481                	li	s1,0
+    4362:	06600d13          	li	s10,102
+    4366:	3e800c13          	li	s8,1000
+    436a:	06400b93          	li	s7,100
+    436e:	4b29                	li	s6,10
+    4370:	00003c97          	auipc	s9,0x3
+    4374:	b58c8c93          	addi	s9,s9,-1192 # 6ec8 <malloc+0x1f7c>
+    4378:	f7a40023          	sb	s10,-160(s0)
+    437c:	0384c7bb          	divw	a5,s1,s8
+    4380:	0307879b          	addiw	a5,a5,48
+    4384:	f6f400a3          	sb	a5,-159(s0)
+    4388:	0384e7bb          	remw	a5,s1,s8
+    438c:	0377c7bb          	divw	a5,a5,s7
+    4390:	0307879b          	addiw	a5,a5,48
+    4394:	f6f40123          	sb	a5,-158(s0)
+    4398:	0374e7bb          	remw	a5,s1,s7
+    439c:	0367c7bb          	divw	a5,a5,s6
+    43a0:	0307879b          	addiw	a5,a5,48
+    43a4:	f6f401a3          	sb	a5,-157(s0)
+    43a8:	0364e7bb          	remw	a5,s1,s6
+    43ac:	0307879b          	addiw	a5,a5,48
+    43b0:	f6f40223          	sb	a5,-156(s0)
+    43b4:	f60402a3          	sb	zero,-155(s0)
+    43b8:	f6040593          	addi	a1,s0,-160
+    43bc:	8566                	mv	a0,s9
+    43be:	2db000ef          	jal	4e98 <printf>
+    43c2:	20200593          	li	a1,514
+    43c6:	f6040513          	addi	a0,s0,-160
+    43ca:	6f6000ef          	jal	4ac0 <open>
+    43ce:	892a                	mv	s2,a0
+    43d0:	08055f63          	bgez	a0,446e <fsfull+0x136>
+    43d4:	f6040593          	addi	a1,s0,-160
+    43d8:	00003517          	auipc	a0,0x3
+    43dc:	b0050513          	addi	a0,a0,-1280 # 6ed8 <malloc+0x1f8c>
+    43e0:	2b9000ef          	jal	4e98 <printf>
+    43e4:	0604c163          	bltz	s1,4446 <fsfull+0x10e>
+    43e8:	06600b13          	li	s6,102
+    43ec:	3e800a13          	li	s4,1000
+    43f0:	06400993          	li	s3,100
+    43f4:	4929                	li	s2,10
+    43f6:	5afd                	li	s5,-1
+    43f8:	f7640023          	sb	s6,-160(s0)
+    43fc:	0344c7bb          	divw	a5,s1,s4
+    4400:	0307879b          	addiw	a5,a5,48
+    4404:	f6f400a3          	sb	a5,-159(s0)
+    4408:	0344e7bb          	remw	a5,s1,s4
+    440c:	0337c7bb          	divw	a5,a5,s3
+    4410:	0307879b          	addiw	a5,a5,48
+    4414:	f6f40123          	sb	a5,-158(s0)
+    4418:	0334e7bb          	remw	a5,s1,s3
+    441c:	0327c7bb          	divw	a5,a5,s2
+    4420:	0307879b          	addiw	a5,a5,48
+    4424:	f6f401a3          	sb	a5,-157(s0)
+    4428:	0324e7bb          	remw	a5,s1,s2
+    442c:	0307879b          	addiw	a5,a5,48
+    4430:	f6f40223          	sb	a5,-156(s0)
+    4434:	f60402a3          	sb	zero,-155(s0)
+    4438:	f6040513          	addi	a0,s0,-160
+    443c:	694000ef          	jal	4ad0 <unlink>
+    4440:	34fd                	addiw	s1,s1,-1
+    4442:	fb549be3          	bne	s1,s5,43f8 <fsfull+0xc0>
+    4446:	00003517          	auipc	a0,0x3
+    444a:	ab250513          	addi	a0,a0,-1358 # 6ef8 <malloc+0x1fac>
+    444e:	24b000ef          	jal	4e98 <printf>
+    4452:	60ea                	ld	ra,152(sp)
+    4454:	644a                	ld	s0,144(sp)
+    4456:	64aa                	ld	s1,136(sp)
+    4458:	690a                	ld	s2,128(sp)
+    445a:	79e6                	ld	s3,120(sp)
+    445c:	7a46                	ld	s4,112(sp)
+    445e:	7aa6                	ld	s5,104(sp)
+    4460:	7b06                	ld	s6,96(sp)
+    4462:	6be6                	ld	s7,88(sp)
+    4464:	6c46                	ld	s8,80(sp)
+    4466:	6ca6                	ld	s9,72(sp)
+    4468:	6d06                	ld	s10,64(sp)
+    446a:	610d                	addi	sp,sp,160
+    446c:	8082                	ret
+    446e:	4981                	li	s3,0
+    4470:	00009a97          	auipc	s5,0x9
+    4474:	808a8a93          	addi	s5,s5,-2040 # cc78 <buf>
+    4478:	3ff00a13          	li	s4,1023
+    447c:	40000613          	li	a2,1024
+    4480:	85d6                	mv	a1,s5
+    4482:	854a                	mv	a0,s2
+    4484:	61c000ef          	jal	4aa0 <write>
+    4488:	00aa5563          	bge	s4,a0,4492 <fsfull+0x15a>
+    448c:	00a989bb          	addw	s3,s3,a0
+    4490:	b7f5                	j	447c <fsfull+0x144>
+    4492:	85ce                	mv	a1,s3
+    4494:	00003517          	auipc	a0,0x3
+    4498:	a5450513          	addi	a0,a0,-1452 # 6ee8 <malloc+0x1f9c>
+    449c:	1fd000ef          	jal	4e98 <printf>
+    44a0:	854a                	mv	a0,s2
+    44a2:	606000ef          	jal	4aa8 <close>
+    44a6:	f2098fe3          	beqz	s3,43e4 <fsfull+0xac>
+    44aa:	2485                	addiw	s1,s1,1
+    44ac:	b5f1                	j	4378 <fsfull+0x40>
+
+00000000000044ae <run>:
+    44ae:	7179                	addi	sp,sp,-48
+    44b0:	f406                	sd	ra,40(sp)
+    44b2:	f022                	sd	s0,32(sp)
+    44b4:	ec26                	sd	s1,24(sp)
+    44b6:	e84a                	sd	s2,16(sp)
+    44b8:	1800                	addi	s0,sp,48
+    44ba:	84aa                	mv	s1,a0
+    44bc:	892e                	mv	s2,a1
+    44be:	00003517          	auipc	a0,0x3
+    44c2:	a5250513          	addi	a0,a0,-1454 # 6f10 <malloc+0x1fc4>
+    44c6:	1d3000ef          	jal	4e98 <printf>
+    44ca:	5ae000ef          	jal	4a78 <fork>
+    44ce:	02054a63          	bltz	a0,4502 <run+0x54>
+    44d2:	c129                	beqz	a0,4514 <run+0x66>
+    44d4:	fdc40513          	addi	a0,s0,-36
+    44d8:	5b0000ef          	jal	4a88 <wait>
+    44dc:	fdc42783          	lw	a5,-36(s0)
+    44e0:	cf9d                	beqz	a5,451e <run+0x70>
+    44e2:	00003517          	auipc	a0,0x3
+    44e6:	a5650513          	addi	a0,a0,-1450 # 6f38 <malloc+0x1fec>
+    44ea:	1af000ef          	jal	4e98 <printf>
+    44ee:	fdc42503          	lw	a0,-36(s0)
+    44f2:	00153513          	seqz	a0,a0
+    44f6:	70a2                	ld	ra,40(sp)
+    44f8:	7402                	ld	s0,32(sp)
+    44fa:	64e2                	ld	s1,24(sp)
+    44fc:	6942                	ld	s2,16(sp)
+    44fe:	6145                	addi	sp,sp,48
+    4500:	8082                	ret
+    4502:	00003517          	auipc	a0,0x3
+    4506:	a1e50513          	addi	a0,a0,-1506 # 6f20 <malloc+0x1fd4>
+    450a:	18f000ef          	jal	4e98 <printf>
+    450e:	4505                	li	a0,1
+    4510:	570000ef          	jal	4a80 <exit>
+    4514:	854a                	mv	a0,s2
+    4516:	9482                	jalr	s1
+    4518:	4501                	li	a0,0
+    451a:	566000ef          	jal	4a80 <exit>
+    451e:	00003517          	auipc	a0,0x3
+    4522:	a2250513          	addi	a0,a0,-1502 # 6f40 <malloc+0x1ff4>
+    4526:	173000ef          	jal	4e98 <printf>
+    452a:	b7d1                	j	44ee <run+0x40>
+
+000000000000452c <runtests>:
+    452c:	7139                	addi	sp,sp,-64
+    452e:	fc06                	sd	ra,56(sp)
+    4530:	f822                	sd	s0,48(sp)
+    4532:	f04a                	sd	s2,32(sp)
+    4534:	0080                	addi	s0,sp,64
+    4536:	00853903          	ld	s2,8(a0)
+    453a:	06090463          	beqz	s2,45a2 <runtests+0x76>
+    453e:	f426                	sd	s1,40(sp)
+    4540:	ec4e                	sd	s3,24(sp)
+    4542:	e852                	sd	s4,16(sp)
+    4544:	e456                	sd	s5,8(sp)
+    4546:	84aa                	mv	s1,a0
+    4548:	89ae                	mv	s3,a1
+    454a:	8a32                	mv	s4,a2
+    454c:	4a89                	li	s5,2
+    454e:	a031                	j	455a <runtests+0x2e>
+    4550:	04c1                	addi	s1,s1,16
+    4552:	0084b903          	ld	s2,8(s1)
+    4556:	02090c63          	beqz	s2,458e <runtests+0x62>
+    455a:	00098763          	beqz	s3,4568 <runtests+0x3c>
+    455e:	85ce                	mv	a1,s3
+    4560:	854a                	mv	a0,s2
+    4562:	2e2000ef          	jal	4844 <strcmp>
+    4566:	f56d                	bnez	a0,4550 <runtests+0x24>
+    4568:	85ca                	mv	a1,s2
+    456a:	6088                	ld	a0,0(s1)
+    456c:	f43ff0ef          	jal	44ae <run>
+    4570:	f165                	bnez	a0,4550 <runtests+0x24>
+    4572:	fd5a0fe3          	beq	s4,s5,4550 <runtests+0x24>
+    4576:	00003517          	auipc	a0,0x3
+    457a:	9d250513          	addi	a0,a0,-1582 # 6f48 <malloc+0x1ffc>
+    457e:	11b000ef          	jal	4e98 <printf>
+    4582:	4505                	li	a0,1
+    4584:	74a2                	ld	s1,40(sp)
+    4586:	69e2                	ld	s3,24(sp)
+    4588:	6a42                	ld	s4,16(sp)
+    458a:	6aa2                	ld	s5,8(sp)
+    458c:	a031                	j	4598 <runtests+0x6c>
+    458e:	4501                	li	a0,0
+    4590:	74a2                	ld	s1,40(sp)
+    4592:	69e2                	ld	s3,24(sp)
+    4594:	6a42                	ld	s4,16(sp)
+    4596:	6aa2                	ld	s5,8(sp)
+    4598:	70e2                	ld	ra,56(sp)
+    459a:	7442                	ld	s0,48(sp)
+    459c:	7902                	ld	s2,32(sp)
+    459e:	6121                	addi	sp,sp,64
+    45a0:	8082                	ret
+    45a2:	4501                	li	a0,0
+    45a4:	bfd5                	j	4598 <runtests+0x6c>
+
+00000000000045a6 <countfree>:
+    45a6:	7139                	addi	sp,sp,-64
+    45a8:	fc06                	sd	ra,56(sp)
+    45aa:	f822                	sd	s0,48(sp)
+    45ac:	0080                	addi	s0,sp,64
+    45ae:	fc840513          	addi	a0,s0,-56
+    45b2:	4de000ef          	jal	4a90 <pipe>
+    45b6:	04054e63          	bltz	a0,4612 <countfree+0x6c>
+    45ba:	4be000ef          	jal	4a78 <fork>
+    45be:	06054663          	bltz	a0,462a <countfree+0x84>
+    45c2:	e159                	bnez	a0,4648 <countfree+0xa2>
+    45c4:	f426                	sd	s1,40(sp)
+    45c6:	f04a                	sd	s2,32(sp)
+    45c8:	ec4e                	sd	s3,24(sp)
+    45ca:	fc842503          	lw	a0,-56(s0)
+    45ce:	4da000ef          	jal	4aa8 <close>
+    45d2:	597d                	li	s2,-1
+    45d4:	4485                	li	s1,1
+    45d6:	00001997          	auipc	s3,0x1
+    45da:	b2298993          	addi	s3,s3,-1246 # 50f8 <malloc+0x1ac>
+    45de:	6505                	lui	a0,0x1
+    45e0:	528000ef          	jal	4b08 <sbrk>
+    45e4:	05250f63          	beq	a0,s2,4642 <countfree+0x9c>
+    45e8:	6785                	lui	a5,0x1
+    45ea:	97aa                	add	a5,a5,a0
+    45ec:	fe978fa3          	sb	s1,-1(a5) # fff <pgbug+0x2b>
+    45f0:	8626                	mv	a2,s1
+    45f2:	85ce                	mv	a1,s3
+    45f4:	fcc42503          	lw	a0,-52(s0)
+    45f8:	4a8000ef          	jal	4aa0 <write>
+    45fc:	fe9501e3          	beq	a0,s1,45de <countfree+0x38>
+    4600:	00003517          	auipc	a0,0x3
+    4604:	9a050513          	addi	a0,a0,-1632 # 6fa0 <malloc+0x2054>
+    4608:	091000ef          	jal	4e98 <printf>
+    460c:	4505                	li	a0,1
+    460e:	472000ef          	jal	4a80 <exit>
+    4612:	f426                	sd	s1,40(sp)
+    4614:	f04a                	sd	s2,32(sp)
+    4616:	ec4e                	sd	s3,24(sp)
+    4618:	00003517          	auipc	a0,0x3
+    461c:	94850513          	addi	a0,a0,-1720 # 6f60 <malloc+0x2014>
+    4620:	079000ef          	jal	4e98 <printf>
+    4624:	4505                	li	a0,1
+    4626:	45a000ef          	jal	4a80 <exit>
+    462a:	f426                	sd	s1,40(sp)
+    462c:	f04a                	sd	s2,32(sp)
+    462e:	ec4e                	sd	s3,24(sp)
+    4630:	00003517          	auipc	a0,0x3
+    4634:	95050513          	addi	a0,a0,-1712 # 6f80 <malloc+0x2034>
+    4638:	061000ef          	jal	4e98 <printf>
+    463c:	4505                	li	a0,1
+    463e:	442000ef          	jal	4a80 <exit>
+    4642:	4501                	li	a0,0
+    4644:	43c000ef          	jal	4a80 <exit>
+    4648:	f426                	sd	s1,40(sp)
+    464a:	fcc42503          	lw	a0,-52(s0)
+    464e:	45a000ef          	jal	4aa8 <close>
+    4652:	4481                	li	s1,0
+    4654:	4605                	li	a2,1
+    4656:	fc740593          	addi	a1,s0,-57
+    465a:	fc842503          	lw	a0,-56(s0)
+    465e:	43a000ef          	jal	4a98 <read>
+    4662:	00054563          	bltz	a0,466c <countfree+0xc6>
+    4666:	cd11                	beqz	a0,4682 <countfree+0xdc>
+    4668:	2485                	addiw	s1,s1,1
+    466a:	b7ed                	j	4654 <countfree+0xae>
+    466c:	f04a                	sd	s2,32(sp)
+    466e:	ec4e                	sd	s3,24(sp)
+    4670:	00003517          	auipc	a0,0x3
+    4674:	95050513          	addi	a0,a0,-1712 # 6fc0 <malloc+0x2074>
+    4678:	021000ef          	jal	4e98 <printf>
+    467c:	4505                	li	a0,1
+    467e:	402000ef          	jal	4a80 <exit>
+    4682:	fc842503          	lw	a0,-56(s0)
+    4686:	422000ef          	jal	4aa8 <close>
+    468a:	4501                	li	a0,0
+    468c:	3fc000ef          	jal	4a88 <wait>
+    4690:	8526                	mv	a0,s1
+    4692:	74a2                	ld	s1,40(sp)
+    4694:	70e2                	ld	ra,56(sp)
+    4696:	7442                	ld	s0,48(sp)
+    4698:	6121                	addi	sp,sp,64
+    469a:	8082                	ret
+
+000000000000469c <drivetests>:
+    469c:	711d                	addi	sp,sp,-96
+    469e:	ec86                	sd	ra,88(sp)
+    46a0:	e8a2                	sd	s0,80(sp)
+    46a2:	e4a6                	sd	s1,72(sp)
+    46a4:	e0ca                	sd	s2,64(sp)
+    46a6:	fc4e                	sd	s3,56(sp)
+    46a8:	f852                	sd	s4,48(sp)
+    46aa:	f456                	sd	s5,40(sp)
+    46ac:	f05a                	sd	s6,32(sp)
+    46ae:	ec5e                	sd	s7,24(sp)
+    46b0:	e862                	sd	s8,16(sp)
+    46b2:	e466                	sd	s9,8(sp)
+    46b4:	e06a                	sd	s10,0(sp)
+    46b6:	1080                	addi	s0,sp,96
+    46b8:	8aaa                	mv	s5,a0
+    46ba:	892e                	mv	s2,a1
+    46bc:	89b2                	mv	s3,a2
+    46be:	00003b97          	auipc	s7,0x3
+    46c2:	922b8b93          	addi	s7,s7,-1758 # 6fe0 <malloc+0x2094>
+    46c6:	00005b17          	auipc	s6,0x5
+    46ca:	94ab0b13          	addi	s6,s6,-1718 # 9010 <quicktests>
+    46ce:	4a09                	li	s4,2
+    46d0:	00005c17          	auipc	s8,0x5
+    46d4:	d10c0c13          	addi	s8,s8,-752 # 93e0 <slowtests>
+    46d8:	00003d17          	auipc	s10,0x3
+    46dc:	920d0d13          	addi	s10,s10,-1760 # 6ff8 <malloc+0x20ac>
+    46e0:	00003c97          	auipc	s9,0x3
+    46e4:	938c8c93          	addi	s9,s9,-1736 # 7018 <malloc+0x20cc>
+    46e8:	a819                	j	46fe <drivetests+0x62>
+    46ea:	856a                	mv	a0,s10
+    46ec:	7ac000ef          	jal	4e98 <printf>
+    46f0:	a80d                	j	4722 <drivetests+0x86>
+    46f2:	eb5ff0ef          	jal	45a6 <countfree>
+    46f6:	04954063          	blt	a0,s1,4736 <drivetests+0x9a>
+    46fa:	04090963          	beqz	s2,474c <drivetests+0xb0>
+    46fe:	855e                	mv	a0,s7
+    4700:	798000ef          	jal	4e98 <printf>
+    4704:	ea3ff0ef          	jal	45a6 <countfree>
+    4708:	84aa                	mv	s1,a0
+    470a:	864a                	mv	a2,s2
+    470c:	85ce                	mv	a1,s3
+    470e:	855a                	mv	a0,s6
+    4710:	e1dff0ef          	jal	452c <runtests>
+    4714:	c119                	beqz	a0,471a <drivetests+0x7e>
+    4716:	03491963          	bne	s2,s4,4748 <drivetests+0xac>
+    471a:	fc0a9ce3          	bnez	s5,46f2 <drivetests+0x56>
+    471e:	fc0986e3          	beqz	s3,46ea <drivetests+0x4e>
+    4722:	864a                	mv	a2,s2
+    4724:	85ce                	mv	a1,s3
+    4726:	8562                	mv	a0,s8
+    4728:	e05ff0ef          	jal	452c <runtests>
+    472c:	d179                	beqz	a0,46f2 <drivetests+0x56>
+    472e:	fd4902e3          	beq	s2,s4,46f2 <drivetests+0x56>
+    4732:	4505                	li	a0,1
+    4734:	a829                	j	474e <drivetests+0xb2>
+    4736:	8626                	mv	a2,s1
+    4738:	85aa                	mv	a1,a0
+    473a:	8566                	mv	a0,s9
+    473c:	75c000ef          	jal	4e98 <printf>
+    4740:	fb490fe3          	beq	s2,s4,46fe <drivetests+0x62>
+    4744:	4505                	li	a0,1
+    4746:	a021                	j	474e <drivetests+0xb2>
+    4748:	4505                	li	a0,1
+    474a:	a011                	j	474e <drivetests+0xb2>
+    474c:	854a                	mv	a0,s2
+    474e:	60e6                	ld	ra,88(sp)
+    4750:	6446                	ld	s0,80(sp)
+    4752:	64a6                	ld	s1,72(sp)
+    4754:	6906                	ld	s2,64(sp)
+    4756:	79e2                	ld	s3,56(sp)
+    4758:	7a42                	ld	s4,48(sp)
+    475a:	7aa2                	ld	s5,40(sp)
+    475c:	7b02                	ld	s6,32(sp)
+    475e:	6be2                	ld	s7,24(sp)
+    4760:	6c42                	ld	s8,16(sp)
+    4762:	6ca2                	ld	s9,8(sp)
+    4764:	6d02                	ld	s10,0(sp)
+    4766:	6125                	addi	sp,sp,96
+    4768:	8082                	ret
+
+000000000000476a <main>:
+    476a:	1101                	addi	sp,sp,-32
+    476c:	ec06                	sd	ra,24(sp)
+    476e:	e822                	sd	s0,16(sp)
+    4770:	e426                	sd	s1,8(sp)
+    4772:	e04a                	sd	s2,0(sp)
+    4774:	1000                	addi	s0,sp,32
+    4776:	84aa                	mv	s1,a0
+    4778:	4789                	li	a5,2
+    477a:	00f50f63          	beq	a0,a5,4798 <main+0x2e>
+    477e:	4785                	li	a5,1
+    4780:	06a7c063          	blt	a5,a0,47e0 <main+0x76>
+    4784:	4901                	li	s2,0
+    4786:	4501                	li	a0,0
+    4788:	4581                	li	a1,0
+    478a:	864a                	mv	a2,s2
+    478c:	f11ff0ef          	jal	469c <drivetests>
+    4790:	c935                	beqz	a0,4804 <main+0x9a>
+    4792:	4505                	li	a0,1
+    4794:	2ec000ef          	jal	4a80 <exit>
+    4798:	0085b903          	ld	s2,8(a1)
+    479c:	00003597          	auipc	a1,0x3
+    47a0:	8ac58593          	addi	a1,a1,-1876 # 7048 <malloc+0x20fc>
+    47a4:	854a                	mv	a0,s2
+    47a6:	09e000ef          	jal	4844 <strcmp>
+    47aa:	85aa                	mv	a1,a0
+    47ac:	c139                	beqz	a0,47f2 <main+0x88>
+    47ae:	00003597          	auipc	a1,0x3
+    47b2:	8a258593          	addi	a1,a1,-1886 # 7050 <malloc+0x2104>
+    47b6:	854a                	mv	a0,s2
+    47b8:	08c000ef          	jal	4844 <strcmp>
+    47bc:	cd15                	beqz	a0,47f8 <main+0x8e>
+    47be:	00003597          	auipc	a1,0x3
+    47c2:	89a58593          	addi	a1,a1,-1894 # 7058 <malloc+0x210c>
+    47c6:	854a                	mv	a0,s2
+    47c8:	07c000ef          	jal	4844 <strcmp>
+    47cc:	c90d                	beqz	a0,47fe <main+0x94>
+    47ce:	00094703          	lbu	a4,0(s2)
+    47d2:	02d00793          	li	a5,45
+    47d6:	00f70563          	beq	a4,a5,47e0 <main+0x76>
+    47da:	4501                	li	a0,0
+    47dc:	4581                	li	a1,0
+    47de:	b775                	j	478a <main+0x20>
+    47e0:	00003517          	auipc	a0,0x3
+    47e4:	88050513          	addi	a0,a0,-1920 # 7060 <malloc+0x2114>
+    47e8:	6b0000ef          	jal	4e98 <printf>
+    47ec:	4505                	li	a0,1
+    47ee:	292000ef          	jal	4a80 <exit>
+    47f2:	4901                	li	s2,0
+    47f4:	4505                	li	a0,1
+    47f6:	bf51                	j	478a <main+0x20>
+    47f8:	4901                	li	s2,0
+    47fa:	4585                	li	a1,1
+    47fc:	b779                	j	478a <main+0x20>
+    47fe:	85a6                	mv	a1,s1
+    4800:	4901                	li	s2,0
+    4802:	b761                	j	478a <main+0x20>
+    4804:	00003517          	auipc	a0,0x3
+    4808:	88c50513          	addi	a0,a0,-1908 # 7090 <malloc+0x2144>
+    480c:	68c000ef          	jal	4e98 <printf>
+    4810:	4501                	li	a0,0
+    4812:	26e000ef          	jal	4a80 <exit>
+
+0000000000004816 <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+    4816:	1141                	addi	sp,sp,-16
+    4818:	e406                	sd	ra,8(sp)
+    481a:	e022                	sd	s0,0(sp)
+    481c:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+    481e:	f4dff0ef          	jal	476a <main>
+  exit(0);
+    4822:	4501                	li	a0,0
+    4824:	25c000ef          	jal	4a80 <exit>
+
+0000000000004828 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+    4828:	1141                	addi	sp,sp,-16
+    482a:	e422                	sd	s0,8(sp)
+    482c:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+    482e:	87aa                	mv	a5,a0
+    4830:	0585                	addi	a1,a1,1
+    4832:	0785                	addi	a5,a5,1
+    4834:	fff5c703          	lbu	a4,-1(a1)
+    4838:	fee78fa3          	sb	a4,-1(a5)
+    483c:	fb75                	bnez	a4,4830 <strcpy+0x8>
+    ;
+  return os;
+}
+    483e:	6422                	ld	s0,8(sp)
+    4840:	0141                	addi	sp,sp,16
+    4842:	8082                	ret
+
+0000000000004844 <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+    4844:	1141                	addi	sp,sp,-16
+    4846:	e422                	sd	s0,8(sp)
+    4848:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+    484a:	00054783          	lbu	a5,0(a0)
+    484e:	cb91                	beqz	a5,4862 <strcmp+0x1e>
+    4850:	0005c703          	lbu	a4,0(a1)
+    4854:	00f71763          	bne	a4,a5,4862 <strcmp+0x1e>
+    p++, q++;
+    4858:	0505                	addi	a0,a0,1
+    485a:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+    485c:	00054783          	lbu	a5,0(a0)
+    4860:	fbe5                	bnez	a5,4850 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+    4862:	0005c503          	lbu	a0,0(a1)
+}
+    4866:	40a7853b          	subw	a0,a5,a0
+    486a:	6422                	ld	s0,8(sp)
+    486c:	0141                	addi	sp,sp,16
+    486e:	8082                	ret
+
+0000000000004870 <strlen>:
+
+uint
+strlen(const char *s)
+{
+    4870:	1141                	addi	sp,sp,-16
+    4872:	e422                	sd	s0,8(sp)
+    4874:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+    4876:	00054783          	lbu	a5,0(a0)
+    487a:	cf91                	beqz	a5,4896 <strlen+0x26>
+    487c:	0505                	addi	a0,a0,1
+    487e:	87aa                	mv	a5,a0
+    4880:	86be                	mv	a3,a5
+    4882:	0785                	addi	a5,a5,1
+    4884:	fff7c703          	lbu	a4,-1(a5)
+    4888:	ff65                	bnez	a4,4880 <strlen+0x10>
+    488a:	40a6853b          	subw	a0,a3,a0
+    488e:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+    4890:	6422                	ld	s0,8(sp)
+    4892:	0141                	addi	sp,sp,16
+    4894:	8082                	ret
+  for(n = 0; s[n]; n++)
+    4896:	4501                	li	a0,0
+    4898:	bfe5                	j	4890 <strlen+0x20>
+
+000000000000489a <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+    489a:	1141                	addi	sp,sp,-16
+    489c:	e422                	sd	s0,8(sp)
+    489e:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+    48a0:	ca19                	beqz	a2,48b6 <memset+0x1c>
+    48a2:	87aa                	mv	a5,a0
+    48a4:	1602                	slli	a2,a2,0x20
+    48a6:	9201                	srli	a2,a2,0x20
+    48a8:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+    48ac:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+    48b0:	0785                	addi	a5,a5,1
+    48b2:	fee79de3          	bne	a5,a4,48ac <memset+0x12>
+  }
+  return dst;
+}
+    48b6:	6422                	ld	s0,8(sp)
+    48b8:	0141                	addi	sp,sp,16
+    48ba:	8082                	ret
+
+00000000000048bc <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+    48bc:	1141                	addi	sp,sp,-16
+    48be:	e422                	sd	s0,8(sp)
+    48c0:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+    48c2:	00054783          	lbu	a5,0(a0)
+    48c6:	cb99                	beqz	a5,48dc <strchr+0x20>
+    if(*s == c)
+    48c8:	00f58763          	beq	a1,a5,48d6 <strchr+0x1a>
+  for(; *s; s++)
+    48cc:	0505                	addi	a0,a0,1
+    48ce:	00054783          	lbu	a5,0(a0)
+    48d2:	fbfd                	bnez	a5,48c8 <strchr+0xc>
+      return (char*)s;
+  return 0;
+    48d4:	4501                	li	a0,0
+}
+    48d6:	6422                	ld	s0,8(sp)
+    48d8:	0141                	addi	sp,sp,16
+    48da:	8082                	ret
+  return 0;
+    48dc:	4501                	li	a0,0
+    48de:	bfe5                	j	48d6 <strchr+0x1a>
+
+00000000000048e0 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+    48e0:	711d                	addi	sp,sp,-96
+    48e2:	ec86                	sd	ra,88(sp)
+    48e4:	e8a2                	sd	s0,80(sp)
+    48e6:	e4a6                	sd	s1,72(sp)
+    48e8:	e0ca                	sd	s2,64(sp)
+    48ea:	fc4e                	sd	s3,56(sp)
+    48ec:	f852                	sd	s4,48(sp)
+    48ee:	f456                	sd	s5,40(sp)
+    48f0:	f05a                	sd	s6,32(sp)
+    48f2:	ec5e                	sd	s7,24(sp)
+    48f4:	1080                	addi	s0,sp,96
+    48f6:	8baa                	mv	s7,a0
+    48f8:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+    48fa:	892a                	mv	s2,a0
+    48fc:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+    48fe:	4aa9                	li	s5,10
+    4900:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+    4902:	89a6                	mv	s3,s1
+    4904:	2485                	addiw	s1,s1,1
+    4906:	0344d663          	bge	s1,s4,4932 <gets+0x52>
+    cc = read(0, &c, 1);
+    490a:	4605                	li	a2,1
+    490c:	faf40593          	addi	a1,s0,-81
+    4910:	4501                	li	a0,0
+    4912:	186000ef          	jal	4a98 <read>
+    if(cc < 1)
+    4916:	00a05e63          	blez	a0,4932 <gets+0x52>
+    buf[i++] = c;
+    491a:	faf44783          	lbu	a5,-81(s0)
+    491e:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+    4922:	01578763          	beq	a5,s5,4930 <gets+0x50>
+    4926:	0905                	addi	s2,s2,1
+    4928:	fd679de3          	bne	a5,s6,4902 <gets+0x22>
+    buf[i++] = c;
+    492c:	89a6                	mv	s3,s1
+    492e:	a011                	j	4932 <gets+0x52>
+    4930:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+    4932:	99de                	add	s3,s3,s7
+    4934:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+    4938:	855e                	mv	a0,s7
+    493a:	60e6                	ld	ra,88(sp)
+    493c:	6446                	ld	s0,80(sp)
+    493e:	64a6                	ld	s1,72(sp)
+    4940:	6906                	ld	s2,64(sp)
+    4942:	79e2                	ld	s3,56(sp)
+    4944:	7a42                	ld	s4,48(sp)
+    4946:	7aa2                	ld	s5,40(sp)
+    4948:	7b02                	ld	s6,32(sp)
+    494a:	6be2                	ld	s7,24(sp)
+    494c:	6125                	addi	sp,sp,96
+    494e:	8082                	ret
+
+0000000000004950 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+    4950:	1101                	addi	sp,sp,-32
+    4952:	ec06                	sd	ra,24(sp)
+    4954:	e822                	sd	s0,16(sp)
+    4956:	e04a                	sd	s2,0(sp)
+    4958:	1000                	addi	s0,sp,32
+    495a:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+    495c:	4581                	li	a1,0
+    495e:	162000ef          	jal	4ac0 <open>
+  if(fd < 0)
+    4962:	02054263          	bltz	a0,4986 <stat+0x36>
+    4966:	e426                	sd	s1,8(sp)
+    4968:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+    496a:	85ca                	mv	a1,s2
+    496c:	16c000ef          	jal	4ad8 <fstat>
+    4970:	892a                	mv	s2,a0
+  close(fd);
+    4972:	8526                	mv	a0,s1
+    4974:	134000ef          	jal	4aa8 <close>
+  return r;
+    4978:	64a2                	ld	s1,8(sp)
+}
+    497a:	854a                	mv	a0,s2
+    497c:	60e2                	ld	ra,24(sp)
+    497e:	6442                	ld	s0,16(sp)
+    4980:	6902                	ld	s2,0(sp)
+    4982:	6105                	addi	sp,sp,32
+    4984:	8082                	ret
+    return -1;
+    4986:	597d                	li	s2,-1
+    4988:	bfcd                	j	497a <stat+0x2a>
+
+000000000000498a <atoi>:
+
+int
+atoi(const char *s)
+{
+    498a:	1141                	addi	sp,sp,-16
+    498c:	e422                	sd	s0,8(sp)
+    498e:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+    4990:	00054683          	lbu	a3,0(a0)
+    4994:	fd06879b          	addiw	a5,a3,-48
+    4998:	0ff7f793          	zext.b	a5,a5
+    499c:	4625                	li	a2,9
+    499e:	02f66863          	bltu	a2,a5,49ce <atoi+0x44>
+    49a2:	872a                	mv	a4,a0
+  n = 0;
+    49a4:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+    49a6:	0705                	addi	a4,a4,1
+    49a8:	0025179b          	slliw	a5,a0,0x2
+    49ac:	9fa9                	addw	a5,a5,a0
+    49ae:	0017979b          	slliw	a5,a5,0x1
+    49b2:	9fb5                	addw	a5,a5,a3
+    49b4:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+    49b8:	00074683          	lbu	a3,0(a4)
+    49bc:	fd06879b          	addiw	a5,a3,-48
+    49c0:	0ff7f793          	zext.b	a5,a5
+    49c4:	fef671e3          	bgeu	a2,a5,49a6 <atoi+0x1c>
+  return n;
+}
+    49c8:	6422                	ld	s0,8(sp)
+    49ca:	0141                	addi	sp,sp,16
+    49cc:	8082                	ret
+  n = 0;
+    49ce:	4501                	li	a0,0
+    49d0:	bfe5                	j	49c8 <atoi+0x3e>
+
+00000000000049d2 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+    49d2:	1141                	addi	sp,sp,-16
+    49d4:	e422                	sd	s0,8(sp)
+    49d6:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+    49d8:	02b57463          	bgeu	a0,a1,4a00 <memmove+0x2e>
+    while(n-- > 0)
+    49dc:	00c05f63          	blez	a2,49fa <memmove+0x28>
+    49e0:	1602                	slli	a2,a2,0x20
+    49e2:	9201                	srli	a2,a2,0x20
+    49e4:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+    49e8:	872a                	mv	a4,a0
+      *dst++ = *src++;
+    49ea:	0585                	addi	a1,a1,1
+    49ec:	0705                	addi	a4,a4,1
+    49ee:	fff5c683          	lbu	a3,-1(a1)
+    49f2:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+    49f6:	fef71ae3          	bne	a4,a5,49ea <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+    49fa:	6422                	ld	s0,8(sp)
+    49fc:	0141                	addi	sp,sp,16
+    49fe:	8082                	ret
+    dst += n;
+    4a00:	00c50733          	add	a4,a0,a2
+    src += n;
+    4a04:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+    4a06:	fec05ae3          	blez	a2,49fa <memmove+0x28>
+    4a0a:	fff6079b          	addiw	a5,a2,-1 # 2fff <subdir+0x423>
+    4a0e:	1782                	slli	a5,a5,0x20
+    4a10:	9381                	srli	a5,a5,0x20
+    4a12:	fff7c793          	not	a5,a5
+    4a16:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+    4a18:	15fd                	addi	a1,a1,-1
+    4a1a:	177d                	addi	a4,a4,-1
+    4a1c:	0005c683          	lbu	a3,0(a1)
+    4a20:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+    4a24:	fee79ae3          	bne	a5,a4,4a18 <memmove+0x46>
+    4a28:	bfc9                	j	49fa <memmove+0x28>
+
+0000000000004a2a <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+    4a2a:	1141                	addi	sp,sp,-16
+    4a2c:	e422                	sd	s0,8(sp)
+    4a2e:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+    4a30:	ca05                	beqz	a2,4a60 <memcmp+0x36>
+    4a32:	fff6069b          	addiw	a3,a2,-1
+    4a36:	1682                	slli	a3,a3,0x20
+    4a38:	9281                	srli	a3,a3,0x20
+    4a3a:	0685                	addi	a3,a3,1
+    4a3c:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+    4a3e:	00054783          	lbu	a5,0(a0)
+    4a42:	0005c703          	lbu	a4,0(a1)
+    4a46:	00e79863          	bne	a5,a4,4a56 <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+    4a4a:	0505                	addi	a0,a0,1
+    p2++;
+    4a4c:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+    4a4e:	fed518e3          	bne	a0,a3,4a3e <memcmp+0x14>
+  }
+  return 0;
+    4a52:	4501                	li	a0,0
+    4a54:	a019                	j	4a5a <memcmp+0x30>
+      return *p1 - *p2;
+    4a56:	40e7853b          	subw	a0,a5,a4
+}
+    4a5a:	6422                	ld	s0,8(sp)
+    4a5c:	0141                	addi	sp,sp,16
+    4a5e:	8082                	ret
+  return 0;
+    4a60:	4501                	li	a0,0
+    4a62:	bfe5                	j	4a5a <memcmp+0x30>
+
+0000000000004a64 <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+    4a64:	1141                	addi	sp,sp,-16
+    4a66:	e406                	sd	ra,8(sp)
+    4a68:	e022                	sd	s0,0(sp)
+    4a6a:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+    4a6c:	f67ff0ef          	jal	49d2 <memmove>
+}
+    4a70:	60a2                	ld	ra,8(sp)
+    4a72:	6402                	ld	s0,0(sp)
+    4a74:	0141                	addi	sp,sp,16
+    4a76:	8082                	ret
+
+0000000000004a78 <fork>:
+    4a78:	4885                	li	a7,1
+    4a7a:	00000073          	ecall
+    4a7e:	8082                	ret
+
+0000000000004a80 <exit>:
+    4a80:	4889                	li	a7,2
+    4a82:	00000073          	ecall
+    4a86:	8082                	ret
+
+0000000000004a88 <wait>:
+    4a88:	488d                	li	a7,3
+    4a8a:	00000073          	ecall
+    4a8e:	8082                	ret
+
+0000000000004a90 <pipe>:
+    4a90:	4891                	li	a7,4
+    4a92:	00000073          	ecall
+    4a96:	8082                	ret
+
+0000000000004a98 <read>:
+    4a98:	4895                	li	a7,5
+    4a9a:	00000073          	ecall
+    4a9e:	8082                	ret
+
+0000000000004aa0 <write>:
+    4aa0:	48c1                	li	a7,16
+    4aa2:	00000073          	ecall
+    4aa6:	8082                	ret
+
+0000000000004aa8 <close>:
+    4aa8:	48d5                	li	a7,21
+    4aaa:	00000073          	ecall
+    4aae:	8082                	ret
+
+0000000000004ab0 <kill>:
+    4ab0:	4899                	li	a7,6
+    4ab2:	00000073          	ecall
+    4ab6:	8082                	ret
+
+0000000000004ab8 <exec>:
+    4ab8:	489d                	li	a7,7
+    4aba:	00000073          	ecall
+    4abe:	8082                	ret
+
+0000000000004ac0 <open>:
+    4ac0:	48bd                	li	a7,15
+    4ac2:	00000073          	ecall
+    4ac6:	8082                	ret
+
+0000000000004ac8 <mknod>:
+    4ac8:	48c5                	li	a7,17
+    4aca:	00000073          	ecall
+    4ace:	8082                	ret
+
+0000000000004ad0 <unlink>:
+    4ad0:	48c9                	li	a7,18
+    4ad2:	00000073          	ecall
+    4ad6:	8082                	ret
+
+0000000000004ad8 <fstat>:
+    4ad8:	48a1                	li	a7,8
+    4ada:	00000073          	ecall
+    4ade:	8082                	ret
+
+0000000000004ae0 <link>:
+    4ae0:	48cd                	li	a7,19
+    4ae2:	00000073          	ecall
+    4ae6:	8082                	ret
+
+0000000000004ae8 <mkdir>:
+    4ae8:	48d1                	li	a7,20
+    4aea:	00000073          	ecall
+    4aee:	8082                	ret
+
+0000000000004af0 <chdir>:
+    4af0:	48a5                	li	a7,9
+    4af2:	00000073          	ecall
+    4af6:	8082                	ret
+
+0000000000004af8 <dup>:
+    4af8:	48a9                	li	a7,10
+    4afa:	00000073          	ecall
+    4afe:	8082                	ret
+
+0000000000004b00 <getpid>:
+    4b00:	48ad                	li	a7,11
+    4b02:	00000073          	ecall
+    4b06:	8082                	ret
+
+0000000000004b08 <sbrk>:
+    4b08:	48b1                	li	a7,12
+    4b0a:	00000073          	ecall
+    4b0e:	8082                	ret
+
+0000000000004b10 <sleep>:
+    4b10:	48b5                	li	a7,13
+    4b12:	00000073          	ecall
+    4b16:	8082                	ret
+
+0000000000004b18 <uptime>:
+    4b18:	48b9                	li	a7,14
+    4b1a:	00000073          	ecall
+    4b1e:	8082                	ret
+
+0000000000004b20 <putc>:
+    4b20:	1101                	addi	sp,sp,-32
+    4b22:	ec06                	sd	ra,24(sp)
+    4b24:	e822                	sd	s0,16(sp)
+    4b26:	1000                	addi	s0,sp,32
+    4b28:	feb407a3          	sb	a1,-17(s0)
+    4b2c:	4605                	li	a2,1
+    4b2e:	fef40593          	addi	a1,s0,-17
+    4b32:	f6fff0ef          	jal	4aa0 <write>
+    4b36:	60e2                	ld	ra,24(sp)
+    4b38:	6442                	ld	s0,16(sp)
+    4b3a:	6105                	addi	sp,sp,32
+    4b3c:	8082                	ret
+
+0000000000004b3e <printint>:
+    4b3e:	7139                	addi	sp,sp,-64
+    4b40:	fc06                	sd	ra,56(sp)
+    4b42:	f822                	sd	s0,48(sp)
+    4b44:	f426                	sd	s1,40(sp)
+    4b46:	0080                	addi	s0,sp,64
+    4b48:	84aa                	mv	s1,a0
+    4b4a:	c299                	beqz	a3,4b50 <printint+0x12>
+    4b4c:	0805c963          	bltz	a1,4bde <printint+0xa0>
+    4b50:	2581                	sext.w	a1,a1
+    4b52:	4881                	li	a7,0
+    4b54:	fc040693          	addi	a3,s0,-64
+    4b58:	4701                	li	a4,0
+    4b5a:	2601                	sext.w	a2,a2
+    4b5c:	00003517          	auipc	a0,0x3
+    4b60:	90450513          	addi	a0,a0,-1788 # 7460 <digits>
+    4b64:	883a                	mv	a6,a4
+    4b66:	2705                	addiw	a4,a4,1
+    4b68:	02c5f7bb          	remuw	a5,a1,a2
+    4b6c:	1782                	slli	a5,a5,0x20
+    4b6e:	9381                	srli	a5,a5,0x20
+    4b70:	97aa                	add	a5,a5,a0
+    4b72:	0007c783          	lbu	a5,0(a5)
+    4b76:	00f68023          	sb	a5,0(a3)
+    4b7a:	0005879b          	sext.w	a5,a1
+    4b7e:	02c5d5bb          	divuw	a1,a1,a2
+    4b82:	0685                	addi	a3,a3,1
+    4b84:	fec7f0e3          	bgeu	a5,a2,4b64 <printint+0x26>
+    4b88:	00088c63          	beqz	a7,4ba0 <printint+0x62>
+    4b8c:	fd070793          	addi	a5,a4,-48
+    4b90:	00878733          	add	a4,a5,s0
+    4b94:	02d00793          	li	a5,45
+    4b98:	fef70823          	sb	a5,-16(a4)
+    4b9c:	0028071b          	addiw	a4,a6,2
+    4ba0:	02e05a63          	blez	a4,4bd4 <printint+0x96>
+    4ba4:	f04a                	sd	s2,32(sp)
+    4ba6:	ec4e                	sd	s3,24(sp)
+    4ba8:	fc040793          	addi	a5,s0,-64
+    4bac:	00e78933          	add	s2,a5,a4
+    4bb0:	fff78993          	addi	s3,a5,-1
+    4bb4:	99ba                	add	s3,s3,a4
+    4bb6:	377d                	addiw	a4,a4,-1
+    4bb8:	1702                	slli	a4,a4,0x20
+    4bba:	9301                	srli	a4,a4,0x20
+    4bbc:	40e989b3          	sub	s3,s3,a4
+    4bc0:	fff94583          	lbu	a1,-1(s2)
+    4bc4:	8526                	mv	a0,s1
+    4bc6:	f5bff0ef          	jal	4b20 <putc>
+    4bca:	197d                	addi	s2,s2,-1
+    4bcc:	ff391ae3          	bne	s2,s3,4bc0 <printint+0x82>
+    4bd0:	7902                	ld	s2,32(sp)
+    4bd2:	69e2                	ld	s3,24(sp)
+    4bd4:	70e2                	ld	ra,56(sp)
+    4bd6:	7442                	ld	s0,48(sp)
+    4bd8:	74a2                	ld	s1,40(sp)
+    4bda:	6121                	addi	sp,sp,64
+    4bdc:	8082                	ret
+    4bde:	40b005bb          	negw	a1,a1
+    4be2:	4885                	li	a7,1
+    4be4:	bf85                	j	4b54 <printint+0x16>
+
+0000000000004be6 <vprintf>:
+    4be6:	711d                	addi	sp,sp,-96
+    4be8:	ec86                	sd	ra,88(sp)
+    4bea:	e8a2                	sd	s0,80(sp)
+    4bec:	e0ca                	sd	s2,64(sp)
+    4bee:	1080                	addi	s0,sp,96
+    4bf0:	0005c903          	lbu	s2,0(a1)
+    4bf4:	26090863          	beqz	s2,4e64 <vprintf+0x27e>
+    4bf8:	e4a6                	sd	s1,72(sp)
+    4bfa:	fc4e                	sd	s3,56(sp)
+    4bfc:	f852                	sd	s4,48(sp)
+    4bfe:	f456                	sd	s5,40(sp)
+    4c00:	f05a                	sd	s6,32(sp)
+    4c02:	ec5e                	sd	s7,24(sp)
+    4c04:	e862                	sd	s8,16(sp)
+    4c06:	e466                	sd	s9,8(sp)
+    4c08:	8b2a                	mv	s6,a0
+    4c0a:	8a2e                	mv	s4,a1
+    4c0c:	8bb2                	mv	s7,a2
+    4c0e:	4981                	li	s3,0
+    4c10:	4481                	li	s1,0
+    4c12:	4701                	li	a4,0
+    4c14:	02500a93          	li	s5,37
+    4c18:	06400c13          	li	s8,100
+    4c1c:	06c00c93          	li	s9,108
+    4c20:	a005                	j	4c40 <vprintf+0x5a>
+    4c22:	85ca                	mv	a1,s2
+    4c24:	855a                	mv	a0,s6
+    4c26:	efbff0ef          	jal	4b20 <putc>
+    4c2a:	a019                	j	4c30 <vprintf+0x4a>
+    4c2c:	03598263          	beq	s3,s5,4c50 <vprintf+0x6a>
+    4c30:	2485                	addiw	s1,s1,1
+    4c32:	8726                	mv	a4,s1
+    4c34:	009a07b3          	add	a5,s4,s1
+    4c38:	0007c903          	lbu	s2,0(a5)
+    4c3c:	20090c63          	beqz	s2,4e54 <vprintf+0x26e>
+    4c40:	0009079b          	sext.w	a5,s2
+    4c44:	fe0994e3          	bnez	s3,4c2c <vprintf+0x46>
+    4c48:	fd579de3          	bne	a5,s5,4c22 <vprintf+0x3c>
+    4c4c:	89be                	mv	s3,a5
+    4c4e:	b7cd                	j	4c30 <vprintf+0x4a>
+    4c50:	00ea06b3          	add	a3,s4,a4
+    4c54:	0016c683          	lbu	a3,1(a3)
+    4c58:	8636                	mv	a2,a3
+    4c5a:	c681                	beqz	a3,4c62 <vprintf+0x7c>
+    4c5c:	9752                	add	a4,a4,s4
+    4c5e:	00274603          	lbu	a2,2(a4)
+    4c62:	03878f63          	beq	a5,s8,4ca0 <vprintf+0xba>
+    4c66:	05978963          	beq	a5,s9,4cb8 <vprintf+0xd2>
+    4c6a:	07500713          	li	a4,117
+    4c6e:	0ee78363          	beq	a5,a4,4d54 <vprintf+0x16e>
+    4c72:	07800713          	li	a4,120
+    4c76:	12e78563          	beq	a5,a4,4da0 <vprintf+0x1ba>
+    4c7a:	07000713          	li	a4,112
+    4c7e:	14e78a63          	beq	a5,a4,4dd2 <vprintf+0x1ec>
+    4c82:	07300713          	li	a4,115
+    4c86:	18e78a63          	beq	a5,a4,4e1a <vprintf+0x234>
+    4c8a:	02500713          	li	a4,37
+    4c8e:	04e79563          	bne	a5,a4,4cd8 <vprintf+0xf2>
+    4c92:	02500593          	li	a1,37
+    4c96:	855a                	mv	a0,s6
+    4c98:	e89ff0ef          	jal	4b20 <putc>
+    4c9c:	4981                	li	s3,0
+    4c9e:	bf49                	j	4c30 <vprintf+0x4a>
+    4ca0:	008b8913          	addi	s2,s7,8
+    4ca4:	4685                	li	a3,1
+    4ca6:	4629                	li	a2,10
+    4ca8:	000ba583          	lw	a1,0(s7)
+    4cac:	855a                	mv	a0,s6
+    4cae:	e91ff0ef          	jal	4b3e <printint>
+    4cb2:	8bca                	mv	s7,s2
+    4cb4:	4981                	li	s3,0
+    4cb6:	bfad                	j	4c30 <vprintf+0x4a>
+    4cb8:	06400793          	li	a5,100
+    4cbc:	02f68963          	beq	a3,a5,4cee <vprintf+0x108>
+    4cc0:	06c00793          	li	a5,108
+    4cc4:	04f68263          	beq	a3,a5,4d08 <vprintf+0x122>
+    4cc8:	07500793          	li	a5,117
+    4ccc:	0af68063          	beq	a3,a5,4d6c <vprintf+0x186>
+    4cd0:	07800793          	li	a5,120
+    4cd4:	0ef68263          	beq	a3,a5,4db8 <vprintf+0x1d2>
+    4cd8:	02500593          	li	a1,37
+    4cdc:	855a                	mv	a0,s6
+    4cde:	e43ff0ef          	jal	4b20 <putc>
+    4ce2:	85ca                	mv	a1,s2
+    4ce4:	855a                	mv	a0,s6
+    4ce6:	e3bff0ef          	jal	4b20 <putc>
+    4cea:	4981                	li	s3,0
+    4cec:	b791                	j	4c30 <vprintf+0x4a>
+    4cee:	008b8913          	addi	s2,s7,8
+    4cf2:	4685                	li	a3,1
+    4cf4:	4629                	li	a2,10
+    4cf6:	000ba583          	lw	a1,0(s7)
+    4cfa:	855a                	mv	a0,s6
+    4cfc:	e43ff0ef          	jal	4b3e <printint>
+    4d00:	2485                	addiw	s1,s1,1
+    4d02:	8bca                	mv	s7,s2
+    4d04:	4981                	li	s3,0
+    4d06:	b72d                	j	4c30 <vprintf+0x4a>
+    4d08:	06400793          	li	a5,100
+    4d0c:	02f60763          	beq	a2,a5,4d3a <vprintf+0x154>
+    4d10:	07500793          	li	a5,117
+    4d14:	06f60963          	beq	a2,a5,4d86 <vprintf+0x1a0>
+    4d18:	07800793          	li	a5,120
+    4d1c:	faf61ee3          	bne	a2,a5,4cd8 <vprintf+0xf2>
+    4d20:	008b8913          	addi	s2,s7,8
+    4d24:	4681                	li	a3,0
+    4d26:	4641                	li	a2,16
+    4d28:	000ba583          	lw	a1,0(s7)
+    4d2c:	855a                	mv	a0,s6
+    4d2e:	e11ff0ef          	jal	4b3e <printint>
+    4d32:	2489                	addiw	s1,s1,2
+    4d34:	8bca                	mv	s7,s2
+    4d36:	4981                	li	s3,0
+    4d38:	bde5                	j	4c30 <vprintf+0x4a>
+    4d3a:	008b8913          	addi	s2,s7,8
+    4d3e:	4685                	li	a3,1
+    4d40:	4629                	li	a2,10
+    4d42:	000ba583          	lw	a1,0(s7)
+    4d46:	855a                	mv	a0,s6
+    4d48:	df7ff0ef          	jal	4b3e <printint>
+    4d4c:	2489                	addiw	s1,s1,2
+    4d4e:	8bca                	mv	s7,s2
+    4d50:	4981                	li	s3,0
+    4d52:	bdf9                	j	4c30 <vprintf+0x4a>
+    4d54:	008b8913          	addi	s2,s7,8
+    4d58:	4681                	li	a3,0
+    4d5a:	4629                	li	a2,10
+    4d5c:	000ba583          	lw	a1,0(s7)
+    4d60:	855a                	mv	a0,s6
+    4d62:	dddff0ef          	jal	4b3e <printint>
+    4d66:	8bca                	mv	s7,s2
+    4d68:	4981                	li	s3,0
+    4d6a:	b5d9                	j	4c30 <vprintf+0x4a>
+    4d6c:	008b8913          	addi	s2,s7,8
+    4d70:	4681                	li	a3,0
+    4d72:	4629                	li	a2,10
+    4d74:	000ba583          	lw	a1,0(s7)
+    4d78:	855a                	mv	a0,s6
+    4d7a:	dc5ff0ef          	jal	4b3e <printint>
+    4d7e:	2485                	addiw	s1,s1,1
+    4d80:	8bca                	mv	s7,s2
+    4d82:	4981                	li	s3,0
+    4d84:	b575                	j	4c30 <vprintf+0x4a>
+    4d86:	008b8913          	addi	s2,s7,8
+    4d8a:	4681                	li	a3,0
+    4d8c:	4629                	li	a2,10
+    4d8e:	000ba583          	lw	a1,0(s7)
+    4d92:	855a                	mv	a0,s6
+    4d94:	dabff0ef          	jal	4b3e <printint>
+    4d98:	2489                	addiw	s1,s1,2
+    4d9a:	8bca                	mv	s7,s2
+    4d9c:	4981                	li	s3,0
+    4d9e:	bd49                	j	4c30 <vprintf+0x4a>
+    4da0:	008b8913          	addi	s2,s7,8
+    4da4:	4681                	li	a3,0
+    4da6:	4641                	li	a2,16
+    4da8:	000ba583          	lw	a1,0(s7)
+    4dac:	855a                	mv	a0,s6
+    4dae:	d91ff0ef          	jal	4b3e <printint>
+    4db2:	8bca                	mv	s7,s2
+    4db4:	4981                	li	s3,0
+    4db6:	bdad                	j	4c30 <vprintf+0x4a>
+    4db8:	008b8913          	addi	s2,s7,8
+    4dbc:	4681                	li	a3,0
+    4dbe:	4641                	li	a2,16
+    4dc0:	000ba583          	lw	a1,0(s7)
+    4dc4:	855a                	mv	a0,s6
+    4dc6:	d79ff0ef          	jal	4b3e <printint>
+    4dca:	2485                	addiw	s1,s1,1
+    4dcc:	8bca                	mv	s7,s2
+    4dce:	4981                	li	s3,0
+    4dd0:	b585                	j	4c30 <vprintf+0x4a>
+    4dd2:	e06a                	sd	s10,0(sp)
+    4dd4:	008b8d13          	addi	s10,s7,8
+    4dd8:	000bb983          	ld	s3,0(s7)
+    4ddc:	03000593          	li	a1,48
+    4de0:	855a                	mv	a0,s6
+    4de2:	d3fff0ef          	jal	4b20 <putc>
+    4de6:	07800593          	li	a1,120
+    4dea:	855a                	mv	a0,s6
+    4dec:	d35ff0ef          	jal	4b20 <putc>
+    4df0:	4941                	li	s2,16
+    4df2:	00002b97          	auipc	s7,0x2
+    4df6:	66eb8b93          	addi	s7,s7,1646 # 7460 <digits>
+    4dfa:	03c9d793          	srli	a5,s3,0x3c
+    4dfe:	97de                	add	a5,a5,s7
+    4e00:	0007c583          	lbu	a1,0(a5)
+    4e04:	855a                	mv	a0,s6
+    4e06:	d1bff0ef          	jal	4b20 <putc>
+    4e0a:	0992                	slli	s3,s3,0x4
+    4e0c:	397d                	addiw	s2,s2,-1
+    4e0e:	fe0916e3          	bnez	s2,4dfa <vprintf+0x214>
+    4e12:	8bea                	mv	s7,s10
+    4e14:	4981                	li	s3,0
+    4e16:	6d02                	ld	s10,0(sp)
+    4e18:	bd21                	j	4c30 <vprintf+0x4a>
+    4e1a:	008b8993          	addi	s3,s7,8
+    4e1e:	000bb903          	ld	s2,0(s7)
+    4e22:	00090f63          	beqz	s2,4e40 <vprintf+0x25a>
+    4e26:	00094583          	lbu	a1,0(s2)
+    4e2a:	c195                	beqz	a1,4e4e <vprintf+0x268>
+    4e2c:	855a                	mv	a0,s6
+    4e2e:	cf3ff0ef          	jal	4b20 <putc>
+    4e32:	0905                	addi	s2,s2,1
+    4e34:	00094583          	lbu	a1,0(s2)
+    4e38:	f9f5                	bnez	a1,4e2c <vprintf+0x246>
+    4e3a:	8bce                	mv	s7,s3
+    4e3c:	4981                	li	s3,0
+    4e3e:	bbcd                	j	4c30 <vprintf+0x4a>
+    4e40:	00002917          	auipc	s2,0x2
+    4e44:	5a090913          	addi	s2,s2,1440 # 73e0 <malloc+0x2494>
+    4e48:	02800593          	li	a1,40
+    4e4c:	b7c5                	j	4e2c <vprintf+0x246>
+    4e4e:	8bce                	mv	s7,s3
+    4e50:	4981                	li	s3,0
+    4e52:	bbf9                	j	4c30 <vprintf+0x4a>
+    4e54:	64a6                	ld	s1,72(sp)
+    4e56:	79e2                	ld	s3,56(sp)
+    4e58:	7a42                	ld	s4,48(sp)
+    4e5a:	7aa2                	ld	s5,40(sp)
+    4e5c:	7b02                	ld	s6,32(sp)
+    4e5e:	6be2                	ld	s7,24(sp)
+    4e60:	6c42                	ld	s8,16(sp)
+    4e62:	6ca2                	ld	s9,8(sp)
+    4e64:	60e6                	ld	ra,88(sp)
+    4e66:	6446                	ld	s0,80(sp)
+    4e68:	6906                	ld	s2,64(sp)
+    4e6a:	6125                	addi	sp,sp,96
+    4e6c:	8082                	ret
+
+0000000000004e6e <fprintf>:
+    4e6e:	715d                	addi	sp,sp,-80
+    4e70:	ec06                	sd	ra,24(sp)
+    4e72:	e822                	sd	s0,16(sp)
+    4e74:	1000                	addi	s0,sp,32
+    4e76:	e010                	sd	a2,0(s0)
+    4e78:	e414                	sd	a3,8(s0)
+    4e7a:	e818                	sd	a4,16(s0)
+    4e7c:	ec1c                	sd	a5,24(s0)
+    4e7e:	03043023          	sd	a6,32(s0)
+    4e82:	03143423          	sd	a7,40(s0)
+    4e86:	fe843423          	sd	s0,-24(s0)
+    4e8a:	8622                	mv	a2,s0
+    4e8c:	d5bff0ef          	jal	4be6 <vprintf>
+    4e90:	60e2                	ld	ra,24(sp)
+    4e92:	6442                	ld	s0,16(sp)
+    4e94:	6161                	addi	sp,sp,80
+    4e96:	8082                	ret
+
+0000000000004e98 <printf>:
+    4e98:	711d                	addi	sp,sp,-96
+    4e9a:	ec06                	sd	ra,24(sp)
+    4e9c:	e822                	sd	s0,16(sp)
+    4e9e:	1000                	addi	s0,sp,32
+    4ea0:	e40c                	sd	a1,8(s0)
+    4ea2:	e810                	sd	a2,16(s0)
+    4ea4:	ec14                	sd	a3,24(s0)
+    4ea6:	f018                	sd	a4,32(s0)
+    4ea8:	f41c                	sd	a5,40(s0)
+    4eaa:	03043823          	sd	a6,48(s0)
+    4eae:	03143c23          	sd	a7,56(s0)
+    4eb2:	00840613          	addi	a2,s0,8
+    4eb6:	fec43423          	sd	a2,-24(s0)
+    4eba:	85aa                	mv	a1,a0
+    4ebc:	4505                	li	a0,1
+    4ebe:	d29ff0ef          	jal	4be6 <vprintf>
+    4ec2:	60e2                	ld	ra,24(sp)
+    4ec4:	6442                	ld	s0,16(sp)
+    4ec6:	6125                	addi	sp,sp,96
+    4ec8:	8082                	ret
+
+0000000000004eca <free>:
+    4eca:	1141                	addi	sp,sp,-16
+    4ecc:	e422                	sd	s0,8(sp)
+    4ece:	0800                	addi	s0,sp,16
+    4ed0:	ff050693          	addi	a3,a0,-16
+    4ed4:	00004797          	auipc	a5,0x4
+    4ed8:	57c7b783          	ld	a5,1404(a5) # 9450 <freep>
+    4edc:	a02d                	j	4f06 <free+0x3c>
+    4ede:	4618                	lw	a4,8(a2)
+    4ee0:	9f2d                	addw	a4,a4,a1
+    4ee2:	fee52c23          	sw	a4,-8(a0)
+    4ee6:	6398                	ld	a4,0(a5)
+    4ee8:	6310                	ld	a2,0(a4)
+    4eea:	a83d                	j	4f28 <free+0x5e>
+    4eec:	ff852703          	lw	a4,-8(a0)
+    4ef0:	9f31                	addw	a4,a4,a2
+    4ef2:	c798                	sw	a4,8(a5)
+    4ef4:	ff053683          	ld	a3,-16(a0)
+    4ef8:	a091                	j	4f3c <free+0x72>
+    4efa:	6398                	ld	a4,0(a5)
+    4efc:	00e7e463          	bltu	a5,a4,4f04 <free+0x3a>
+    4f00:	00e6ea63          	bltu	a3,a4,4f14 <free+0x4a>
+    4f04:	87ba                	mv	a5,a4
+    4f06:	fed7fae3          	bgeu	a5,a3,4efa <free+0x30>
+    4f0a:	6398                	ld	a4,0(a5)
+    4f0c:	00e6e463          	bltu	a3,a4,4f14 <free+0x4a>
+    4f10:	fee7eae3          	bltu	a5,a4,4f04 <free+0x3a>
+    4f14:	ff852583          	lw	a1,-8(a0)
+    4f18:	6390                	ld	a2,0(a5)
+    4f1a:	02059813          	slli	a6,a1,0x20
+    4f1e:	01c85713          	srli	a4,a6,0x1c
+    4f22:	9736                	add	a4,a4,a3
+    4f24:	fae60de3          	beq	a2,a4,4ede <free+0x14>
+    4f28:	fec53823          	sd	a2,-16(a0)
+    4f2c:	4790                	lw	a2,8(a5)
+    4f2e:	02061593          	slli	a1,a2,0x20
+    4f32:	01c5d713          	srli	a4,a1,0x1c
+    4f36:	973e                	add	a4,a4,a5
+    4f38:	fae68ae3          	beq	a3,a4,4eec <free+0x22>
+    4f3c:	e394                	sd	a3,0(a5)
+    4f3e:	00004717          	auipc	a4,0x4
+    4f42:	50f73923          	sd	a5,1298(a4) # 9450 <freep>
+    4f46:	6422                	ld	s0,8(sp)
+    4f48:	0141                	addi	sp,sp,16
+    4f4a:	8082                	ret
+
+0000000000004f4c <malloc>:
+    4f4c:	7139                	addi	sp,sp,-64
+    4f4e:	fc06                	sd	ra,56(sp)
+    4f50:	f822                	sd	s0,48(sp)
+    4f52:	f426                	sd	s1,40(sp)
+    4f54:	ec4e                	sd	s3,24(sp)
+    4f56:	0080                	addi	s0,sp,64
+    4f58:	02051493          	slli	s1,a0,0x20
+    4f5c:	9081                	srli	s1,s1,0x20
+    4f5e:	04bd                	addi	s1,s1,15
+    4f60:	8091                	srli	s1,s1,0x4
+    4f62:	0014899b          	addiw	s3,s1,1
+    4f66:	0485                	addi	s1,s1,1
+    4f68:	00004517          	auipc	a0,0x4
+    4f6c:	4e853503          	ld	a0,1256(a0) # 9450 <freep>
+    4f70:	c915                	beqz	a0,4fa4 <malloc+0x58>
+    4f72:	611c                	ld	a5,0(a0)
+    4f74:	4798                	lw	a4,8(a5)
+    4f76:	08977a63          	bgeu	a4,s1,500a <malloc+0xbe>
+    4f7a:	f04a                	sd	s2,32(sp)
+    4f7c:	e852                	sd	s4,16(sp)
+    4f7e:	e456                	sd	s5,8(sp)
+    4f80:	e05a                	sd	s6,0(sp)
+    4f82:	8a4e                	mv	s4,s3
+    4f84:	0009871b          	sext.w	a4,s3
+    4f88:	6685                	lui	a3,0x1
+    4f8a:	00d77363          	bgeu	a4,a3,4f90 <malloc+0x44>
+    4f8e:	6a05                	lui	s4,0x1
+    4f90:	000a0b1b          	sext.w	s6,s4
+    4f94:	004a1a1b          	slliw	s4,s4,0x4
+    4f98:	00004917          	auipc	s2,0x4
+    4f9c:	4b890913          	addi	s2,s2,1208 # 9450 <freep>
+    4fa0:	5afd                	li	s5,-1
+    4fa2:	a081                	j	4fe2 <malloc+0x96>
+    4fa4:	f04a                	sd	s2,32(sp)
+    4fa6:	e852                	sd	s4,16(sp)
+    4fa8:	e456                	sd	s5,8(sp)
+    4faa:	e05a                	sd	s6,0(sp)
+    4fac:	0000b797          	auipc	a5,0xb
+    4fb0:	ccc78793          	addi	a5,a5,-820 # fc78 <base>
+    4fb4:	00004717          	auipc	a4,0x4
+    4fb8:	48f73e23          	sd	a5,1180(a4) # 9450 <freep>
+    4fbc:	e39c                	sd	a5,0(a5)
+    4fbe:	0007a423          	sw	zero,8(a5)
+    4fc2:	b7c1                	j	4f82 <malloc+0x36>
+    4fc4:	6398                	ld	a4,0(a5)
+    4fc6:	e118                	sd	a4,0(a0)
+    4fc8:	a8a9                	j	5022 <malloc+0xd6>
+    4fca:	01652423          	sw	s6,8(a0)
+    4fce:	0541                	addi	a0,a0,16
+    4fd0:	efbff0ef          	jal	4eca <free>
+    4fd4:	00093503          	ld	a0,0(s2)
+    4fd8:	c12d                	beqz	a0,503a <malloc+0xee>
+    4fda:	611c                	ld	a5,0(a0)
+    4fdc:	4798                	lw	a4,8(a5)
+    4fde:	02977263          	bgeu	a4,s1,5002 <malloc+0xb6>
+    4fe2:	00093703          	ld	a4,0(s2)
+    4fe6:	853e                	mv	a0,a5
+    4fe8:	fef719e3          	bne	a4,a5,4fda <malloc+0x8e>
+    4fec:	8552                	mv	a0,s4
+    4fee:	b1bff0ef          	jal	4b08 <sbrk>
+    4ff2:	fd551ce3          	bne	a0,s5,4fca <malloc+0x7e>
+    4ff6:	4501                	li	a0,0
+    4ff8:	7902                	ld	s2,32(sp)
+    4ffa:	6a42                	ld	s4,16(sp)
+    4ffc:	6aa2                	ld	s5,8(sp)
+    4ffe:	6b02                	ld	s6,0(sp)
+    5000:	a03d                	j	502e <malloc+0xe2>
+    5002:	7902                	ld	s2,32(sp)
+    5004:	6a42                	ld	s4,16(sp)
+    5006:	6aa2                	ld	s5,8(sp)
+    5008:	6b02                	ld	s6,0(sp)
+    500a:	fae48de3          	beq	s1,a4,4fc4 <malloc+0x78>
+    500e:	4137073b          	subw	a4,a4,s3
+    5012:	c798                	sw	a4,8(a5)
+    5014:	02071693          	slli	a3,a4,0x20
+    5018:	01c6d713          	srli	a4,a3,0x1c
+    501c:	97ba                	add	a5,a5,a4
+    501e:	0137a423          	sw	s3,8(a5)
+    5022:	00004717          	auipc	a4,0x4
+    5026:	42a73723          	sd	a0,1070(a4) # 9450 <freep>
+    502a:	01078513          	addi	a0,a5,16
+    502e:	70e2                	ld	ra,56(sp)
+    5030:	7442                	ld	s0,48(sp)
+    5032:	74a2                	ld	s1,40(sp)
+    5034:	69e2                	ld	s3,24(sp)
+    5036:	6121                	addi	sp,sp,64
+    5038:	8082                	ret
+    503a:	7902                	ld	s2,32(sp)
+    503c:	6a42                	ld	s4,16(sp)
+    503e:	6aa2                	ld	s5,8(sp)
+    5040:	6b02                	ld	s6,0(sp)
+    5042:	b7f5                	j	502e <malloc+0xe2>
diff --git a/xv6-labs-2024/user/usertests.c b/xv6-labs-2024/user/usertests.c
new file mode 100644
index 0000000..28b53f9
--- /dev/null
+++ b/xv6-labs-2024/user/usertests.c
@@ -0,0 +1,3118 @@
+#include "kernel/param.h"
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/fs.h"
+#include "kernel/fcntl.h"
+#include "kernel/syscall.h"
+#include "kernel/memlayout.h"
+#include "kernel/riscv.h"
+
+//
+// Tests xv6 system calls.  usertests without arguments runs them all
+// and usertests <name> runs <name> test. The test runner creates for
+// each test a process and based on the exit status of the process,
+// the test runner reports "OK" or "FAILED".  Some tests result in
+// kernel printing usertrap messages, which can be ignored if test
+// prints "OK".
+//
+
+#define BUFSZ  ((MAXOPBLOCKS+2)*BSIZE)
+
+char buf[BUFSZ];
+
+//
+// Section with tests that run fairly quickly.  Use -q if you want to
+// run just those.  With -q usertests also runs the ones that take a
+// fair of time.
+//
+
+// what if you pass ridiculous pointers to system calls
+// that read user memory with copyin?
+void
+copyin(char *s)
+{
+  uint64 addrs[] = { 0x80000000LL, 0x3fffffe000, 0x3ffffff000, 0x4000000000,
+                     0xffffffffffffffff };
+
+  for(int ai = 0; ai < sizeof(addrs)/sizeof(addrs[0]); ai++){
+    uint64 addr = addrs[ai];
+    
+    int fd = open("copyin1", O_CREATE|O_WRONLY);
+    if(fd < 0){
+      printf("open(copyin1) failed\n");
+      exit(1);
+    }
+    int n = write(fd, (void*)addr, 8192);
+    if(n >= 0){
+      printf("write(fd, %p, 8192) returned %d, not -1\n", (void*)addr, n);
+      exit(1);
+    }
+    close(fd);
+    unlink("copyin1");
+    
+    n = write(1, (char*)addr, 8192);
+    if(n > 0){
+      printf("write(1, %p, 8192) returned %d, not -1 or 0\n", (void*)addr, n);
+      exit(1);
+    }
+    
+    int fds[2];
+    if(pipe(fds) < 0){
+      printf("pipe() failed\n");
+      exit(1);
+    }
+    n = write(fds[1], (char*)addr, 8192);
+    if(n > 0){
+      printf("write(pipe, %p, 8192) returned %d, not -1 or 0\n", (void*)addr, n);
+      exit(1);
+    }
+    close(fds[0]);
+    close(fds[1]);
+  }
+}
+
+// what if you pass ridiculous pointers to system calls
+// that write user memory with copyout?
+void
+copyout(char *s)
+{
+  uint64 addrs[] = { 0LL, 0x80000000LL, 0x3fffffe000, 0x3ffffff000, 0x4000000000,
+                     0xffffffffffffffff };
+
+  for(int ai = 0; ai < sizeof(addrs)/sizeof(addrs[0]); ai++){
+    uint64 addr = addrs[ai];
+
+    int fd = open("README", 0);
+    if(fd < 0){
+      printf("open(README) failed\n");
+      exit(1);
+    }
+    int n = read(fd, (void*)addr, 8192);
+    if(n > 0){
+      printf("read(fd, %p, 8192) returned %d, not -1 or 0\n", (void*)addr, n);
+      exit(1);
+    }
+    close(fd);
+
+    int fds[2];
+    if(pipe(fds) < 0){
+      printf("pipe() failed\n");
+      exit(1);
+    }
+    n = write(fds[1], "x", 1);
+    if(n != 1){
+      printf("pipe write failed\n");
+      exit(1);
+    }
+    n = read(fds[0], (void*)addr, 8192);
+    if(n > 0){
+      printf("read(pipe, %p, 8192) returned %d, not -1 or 0\n", (void*)addr, n);
+      exit(1);
+    }
+    close(fds[0]);
+    close(fds[1]);
+  }
+}
+
+// what if you pass ridiculous string pointers to system calls?
+void
+copyinstr1(char *s)
+{
+  uint64 addrs[] = { 0x80000000LL, 0x3fffffe000, 0x3ffffff000, 0x4000000000,
+                     0xffffffffffffffff };
+
+  for(int ai = 0; ai < sizeof(addrs)/sizeof(addrs[0]); ai++){
+    uint64 addr = addrs[ai];
+
+    int fd = open((char *)addr, O_CREATE|O_WRONLY);
+    if(fd >= 0){
+      printf("open(%p) returned %d, not -1\n", (void*)addr, fd);
+      exit(1);
+    }
+  }
+}
+
+// what if a string system call argument is exactly the size
+// of the kernel buffer it is copied into, so that the null
+// would fall just beyond the end of the kernel buffer?
+void
+copyinstr2(char *s)
+{
+  char b[MAXPATH+1];
+
+  for(int i = 0; i < MAXPATH; i++)
+    b[i] = 'x';
+  b[MAXPATH] = '\0';
+  
+  int ret = unlink(b);
+  if(ret != -1){
+    printf("unlink(%s) returned %d, not -1\n", b, ret);
+    exit(1);
+  }
+
+  int fd = open(b, O_CREATE | O_WRONLY);
+  if(fd != -1){
+    printf("open(%s) returned %d, not -1\n", b, fd);
+    exit(1);
+  }
+
+  ret = link(b, b);
+  if(ret != -1){
+    printf("link(%s, %s) returned %d, not -1\n", b, b, ret);
+    exit(1);
+  }
+
+  char *args[] = { "xx", 0 };
+  ret = exec(b, args);
+  if(ret != -1){
+    printf("exec(%s) returned %d, not -1\n", b, fd);
+    exit(1);
+  }
+
+  int pid = fork();
+  if(pid < 0){
+    printf("fork failed\n");
+    exit(1);
+  }
+  if(pid == 0){
+    static char big[PGSIZE+1];
+    for(int i = 0; i < PGSIZE; i++)
+      big[i] = 'x';
+    big[PGSIZE] = '\0';
+    char *args2[] = { big, big, big, 0 };
+    ret = exec("echo", args2);
+    if(ret != -1){
+      printf("exec(echo, BIG) returned %d, not -1\n", fd);
+      exit(1);
+    }
+    exit(747); // OK
+  }
+
+  int st = 0;
+  wait(&st);
+  if(st != 747){
+    printf("exec(echo, BIG) succeeded, should have failed\n");
+    exit(1);
+  }
+}
+
+// what if a string argument crosses over the end of last user page?
+void
+copyinstr3(char *s)
+{
+  sbrk(8192);
+  uint64 top = (uint64) sbrk(0);
+  if((top % PGSIZE) != 0){
+    sbrk(PGSIZE - (top % PGSIZE));
+  }
+  top = (uint64) sbrk(0);
+  if(top % PGSIZE){
+    printf("oops\n");
+    exit(1);
+  }
+
+  char *b = (char *) (top - 1);
+  *b = 'x';
+
+  int ret = unlink(b);
+  if(ret != -1){
+    printf("unlink(%s) returned %d, not -1\n", b, ret);
+    exit(1);
+  }
+
+  int fd = open(b, O_CREATE | O_WRONLY);
+  if(fd != -1){
+    printf("open(%s) returned %d, not -1\n", b, fd);
+    exit(1);
+  }
+
+  ret = link(b, b);
+  if(ret != -1){
+    printf("link(%s, %s) returned %d, not -1\n", b, b, ret);
+    exit(1);
+  }
+
+  char *args[] = { "xx", 0 };
+  ret = exec(b, args);
+  if(ret != -1){
+    printf("exec(%s) returned %d, not -1\n", b, fd);
+    exit(1);
+  }
+}
+
+// See if the kernel refuses to read/write user memory that the
+// application doesn't have anymore, because it returned it.
+void
+rwsbrk()
+{
+  int fd, n;
+  
+  uint64 a = (uint64) sbrk(8192);
+
+  if(a == 0xffffffffffffffffLL) {
+    printf("sbrk(rwsbrk) failed\n");
+    exit(1);
+  }
+  
+  if ((uint64) sbrk(-8192) ==  0xffffffffffffffffLL) {
+    printf("sbrk(rwsbrk) shrink failed\n");
+    exit(1);
+  }
+
+  fd = open("rwsbrk", O_CREATE|O_WRONLY);
+  if(fd < 0){
+    printf("open(rwsbrk) failed\n");
+    exit(1);
+  }
+  n = write(fd, (void*)(a+4096), 1024);
+  if(n >= 0){
+    printf("write(fd, %p, 1024) returned %d, not -1\n", (void*)a+4096, n);
+    exit(1);
+  }
+  close(fd);
+  unlink("rwsbrk");
+
+  fd = open("README", O_RDONLY);
+  if(fd < 0){
+    printf("open(rwsbrk) failed\n");
+    exit(1);
+  }
+  n = read(fd, (void*)(a+4096), 10);
+  if(n >= 0){
+    printf("read(fd, %p, 10) returned %d, not -1\n", (void*)a+4096, n);
+    exit(1);
+  }
+  close(fd);
+  
+  exit(0);
+}
+
+// test O_TRUNC.
+void
+truncate1(char *s)
+{
+  char buf[32];
+  
+  unlink("truncfile");
+  int fd1 = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
+  write(fd1, "abcd", 4);
+  close(fd1);
+
+  int fd2 = open("truncfile", O_RDONLY);
+  int n = read(fd2, buf, sizeof(buf));
+  if(n != 4){
+    printf("%s: read %d bytes, wanted 4\n", s, n);
+    exit(1);
+  }
+
+  fd1 = open("truncfile", O_WRONLY|O_TRUNC);
+
+  int fd3 = open("truncfile", O_RDONLY);
+  n = read(fd3, buf, sizeof(buf));
+  if(n != 0){
+    printf("aaa fd3=%d\n", fd3);
+    printf("%s: read %d bytes, wanted 0\n", s, n);
+    exit(1);
+  }
+
+  n = read(fd2, buf, sizeof(buf));
+  if(n != 0){
+    printf("bbb fd2=%d\n", fd2);
+    printf("%s: read %d bytes, wanted 0\n", s, n);
+    exit(1);
+  }
+  
+  write(fd1, "abcdef", 6);
+
+  n = read(fd3, buf, sizeof(buf));
+  if(n != 6){
+    printf("%s: read %d bytes, wanted 6\n", s, n);
+    exit(1);
+  }
+
+  n = read(fd2, buf, sizeof(buf));
+  if(n != 2){
+    printf("%s: read %d bytes, wanted 2\n", s, n);
+    exit(1);
+  }
+
+  unlink("truncfile");
+
+  close(fd1);
+  close(fd2);
+  close(fd3);
+}
+
+// write to an open FD whose file has just been truncated.
+// this causes a write at an offset beyond the end of the file.
+// such writes fail on xv6 (unlike POSIX) but at least
+// they don't crash.
+void
+truncate2(char *s)
+{
+  unlink("truncfile");
+
+  int fd1 = open("truncfile", O_CREATE|O_TRUNC|O_WRONLY);
+  write(fd1, "abcd", 4);
+
+  int fd2 = open("truncfile", O_TRUNC|O_WRONLY);
+
+  int n = write(fd1, "x", 1);
+  if(n != -1){
+    printf("%s: write returned %d, expected -1\n", s, n);
+    exit(1);
+  }
+
+  unlink("truncfile");
+  close(fd1);
+  close(fd2);
+}
+
+void
+truncate3(char *s)
+{
+  int pid, xstatus;
+
+  close(open("truncfile", O_CREATE|O_TRUNC|O_WRONLY));
+  
+  pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+
+  if(pid == 0){
+    for(int i = 0; i < 100; i++){
+      char buf[32];
+      int fd = open("truncfile", O_WRONLY);
+      if(fd < 0){
+        printf("%s: open failed\n", s);
+        exit(1);
+      }
+      int n = write(fd, "1234567890", 10);
+      if(n != 10){
+        printf("%s: write got %d, expected 10\n", s, n);
+        exit(1);
+      }
+      close(fd);
+      fd = open("truncfile", O_RDONLY);
+      read(fd, buf, sizeof(buf));
+      close(fd);
+    }
+    exit(0);
+  }
+
+  for(int i = 0; i < 150; i++){
+    int fd = open("truncfile", O_CREATE|O_WRONLY|O_TRUNC);
+    if(fd < 0){
+      printf("%s: open failed\n", s);
+      exit(1);
+    }
+    int n = write(fd, "xxx", 3);
+    if(n != 3){
+      printf("%s: write got %d, expected 3\n", s, n);
+      exit(1);
+    }
+    close(fd);
+  }
+
+  wait(&xstatus);
+  unlink("truncfile");
+  exit(xstatus);
+}
+  
+
+// does chdir() call iput(p->cwd) in a transaction?
+void
+iputtest(char *s)
+{
+  if(mkdir("iputdir") < 0){
+    printf("%s: mkdir failed\n", s);
+    exit(1);
+  }
+  if(chdir("iputdir") < 0){
+    printf("%s: chdir iputdir failed\n", s);
+    exit(1);
+  }
+  if(unlink("../iputdir") < 0){
+    printf("%s: unlink ../iputdir failed\n", s);
+    exit(1);
+  }
+  if(chdir("/") < 0){
+    printf("%s: chdir / failed\n", s);
+    exit(1);
+  }
+}
+
+// does exit() call iput(p->cwd) in a transaction?
+void
+exitiputtest(char *s)
+{
+  int pid, xstatus;
+
+  pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+  if(pid == 0){
+    if(mkdir("iputdir") < 0){
+      printf("%s: mkdir failed\n", s);
+      exit(1);
+    }
+    if(chdir("iputdir") < 0){
+      printf("%s: child chdir failed\n", s);
+      exit(1);
+    }
+    if(unlink("../iputdir") < 0){
+      printf("%s: unlink ../iputdir failed\n", s);
+      exit(1);
+    }
+    exit(0);
+  }
+  wait(&xstatus);
+  exit(xstatus);
+}
+
+// does the error path in open() for attempt to write a
+// directory call iput() in a transaction?
+// needs a hacked kernel that pauses just after the namei()
+// call in sys_open():
+//    if((ip = namei(path)) == 0)
+//      return -1;
+//    {
+//      int i;
+//      for(i = 0; i < 10000; i++)
+//        yield();
+//    }
+void
+openiputtest(char *s)
+{
+  int pid, xstatus;
+
+  if(mkdir("oidir") < 0){
+    printf("%s: mkdir oidir failed\n", s);
+    exit(1);
+  }
+  pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+  if(pid == 0){
+    int fd = open("oidir", O_RDWR);
+    if(fd >= 0){
+      printf("%s: open directory for write succeeded\n", s);
+      exit(1);
+    }
+    exit(0);
+  }
+  sleep(1);
+  if(unlink("oidir") != 0){
+    printf("%s: unlink failed\n", s);
+    exit(1);
+  }
+  wait(&xstatus);
+  exit(xstatus);
+}
+
+// simple file system tests
+
+void
+opentest(char *s)
+{
+  int fd;
+
+  fd = open("echo", 0);
+  if(fd < 0){
+    printf("%s: open echo failed!\n", s);
+    exit(1);
+  }
+  close(fd);
+  fd = open("doesnotexist", 0);
+  if(fd >= 0){
+    printf("%s: open doesnotexist succeeded!\n", s);
+    exit(1);
+  }
+}
+
+void
+writetest(char *s)
+{
+  int fd;
+  int i;
+  enum { N=100, SZ=10 };
+  
+  fd = open("small", O_CREATE|O_RDWR);
+  if(fd < 0){
+    printf("%s: error: creat small failed!\n", s);
+    exit(1);
+  }
+  for(i = 0; i < N; i++){
+    if(write(fd, "aaaaaaaaaa", SZ) != SZ){
+      printf("%s: error: write aa %d new file failed\n", s, i);
+      exit(1);
+    }
+    if(write(fd, "bbbbbbbbbb", SZ) != SZ){
+      printf("%s: error: write bb %d new file failed\n", s, i);
+      exit(1);
+    }
+  }
+  close(fd);
+  fd = open("small", O_RDONLY);
+  if(fd < 0){
+    printf("%s: error: open small failed!\n", s);
+    exit(1);
+  }
+  i = read(fd, buf, N*SZ*2);
+  if(i != N*SZ*2){
+    printf("%s: read failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(unlink("small") < 0){
+    printf("%s: unlink small failed\n", s);
+    exit(1);
+  }
+}
+
+void
+writebig(char *s)
+{
+  int i, fd, n;
+
+  fd = open("big", O_CREATE|O_RDWR);
+  if(fd < 0){
+    printf("%s: error: creat big failed!\n", s);
+    exit(1);
+  }
+
+  for(i = 0; i < MAXFILE; i++){
+    ((int*)buf)[0] = i;
+    if(write(fd, buf, BSIZE) != BSIZE){
+      printf("%s: error: write big file failed i=%d\n", s, i);
+      exit(1);
+    }
+  }
+
+  close(fd);
+
+  fd = open("big", O_RDONLY);
+  if(fd < 0){
+    printf("%s: error: open big failed!\n", s);
+    exit(1);
+  }
+
+  n = 0;
+  for(;;){
+    i = read(fd, buf, BSIZE);
+    if(i == 0){
+      if(n != MAXFILE){
+        printf("%s: read only %d blocks from big", s, n);
+        exit(1);
+      }
+      break;
+    } else if(i != BSIZE){
+      printf("%s: read failed %d\n", s, i);
+      exit(1);
+    }
+    if(((int*)buf)[0] != n){
+      printf("%s: read content of block %d is %d\n", s,
+             n, ((int*)buf)[0]);
+      exit(1);
+    }
+    n++;
+  }
+  close(fd);
+  if(unlink("big") < 0){
+    printf("%s: unlink big failed\n", s);
+    exit(1);
+  }
+}
+
+// many creates, followed by unlink test
+void
+createtest(char *s)
+{
+  int i, fd;
+  enum { N=52 };
+
+  char name[3];
+  name[0] = 'a';
+  name[2] = '\0';
+  for(i = 0; i < N; i++){
+    name[1] = '0' + i;
+    fd = open(name, O_CREATE|O_RDWR);
+    close(fd);
+  }
+  name[0] = 'a';
+  name[2] = '\0';
+  for(i = 0; i < N; i++){
+    name[1] = '0' + i;
+    unlink(name);
+  }
+}
+
+void dirtest(char *s)
+{
+  if(mkdir("dir0") < 0){
+    printf("%s: mkdir failed\n", s);
+    exit(1);
+  }
+
+  if(chdir("dir0") < 0){
+    printf("%s: chdir dir0 failed\n", s);
+    exit(1);
+  }
+
+  if(chdir("..") < 0){
+    printf("%s: chdir .. failed\n", s);
+    exit(1);
+  }
+
+  if(unlink("dir0") < 0){
+    printf("%s: unlink dir0 failed\n", s);
+    exit(1);
+  }
+}
+
+void
+exectest(char *s)
+{
+  int fd, xstatus, pid;
+  char *echoargv[] = { "echo", "OK", 0 };
+  char buf[3];
+
+  unlink("echo-ok");
+  pid = fork();
+  if(pid < 0) {
+     printf("%s: fork failed\n", s);
+     exit(1);
+  }
+  if(pid == 0) {
+    close(1);
+    fd = open("echo-ok", O_CREATE|O_WRONLY);
+    if(fd < 0) {
+      printf("%s: create failed\n", s);
+      exit(1);
+    }
+    if(fd != 1) {
+      printf("%s: wrong fd\n", s);
+      exit(1);
+    }
+    if(exec("echo", echoargv) < 0){
+      printf("%s: exec echo failed\n", s);
+      exit(1);
+    }
+    // won't get to here
+  }
+  if (wait(&xstatus) != pid) {
+    printf("%s: wait failed!\n", s);
+  }
+  if(xstatus != 0)
+    exit(xstatus);
+
+  fd = open("echo-ok", O_RDONLY);
+  if(fd < 0) {
+    printf("%s: open failed\n", s);
+    exit(1);
+  }
+  if (read(fd, buf, 2) != 2) {
+    printf("%s: read failed\n", s);
+    exit(1);
+  }
+  unlink("echo-ok");
+  if(buf[0] == 'O' && buf[1] == 'K')
+    exit(0);
+  else {
+    printf("%s: wrong output\n", s);
+    exit(1);
+  }
+
+}
+
+// simple fork and pipe read/write
+
+void
+pipe1(char *s)
+{
+  int fds[2], pid, xstatus;
+  int seq, i, n, cc, total;
+  enum { N=5, SZ=1033 };
+  
+  if(pipe(fds) != 0){
+    printf("%s: pipe() failed\n", s);
+    exit(1);
+  }
+  pid = fork();
+  seq = 0;
+  if(pid == 0){
+    close(fds[0]);
+    for(n = 0; n < N; n++){
+      for(i = 0; i < SZ; i++)
+        buf[i] = seq++;
+      if(write(fds[1], buf, SZ) != SZ){
+        printf("%s: pipe1 oops 1\n", s);
+        exit(1);
+      }
+    }
+    exit(0);
+  } else if(pid > 0){
+    close(fds[1]);
+    total = 0;
+    cc = 1;
+    while((n = read(fds[0], buf, cc)) > 0){
+      for(i = 0; i < n; i++){
+        if((buf[i] & 0xff) != (seq++ & 0xff)){
+          printf("%s: pipe1 oops 2\n", s);
+          return;
+        }
+      }
+      total += n;
+      cc = cc * 2;
+      if(cc > sizeof(buf))
+        cc = sizeof(buf);
+    }
+    if(total != N * SZ){
+      printf("%s: pipe1 oops 3 total %d\n", s, total);
+      exit(1);
+    }
+    close(fds[0]);
+    wait(&xstatus);
+    exit(xstatus);
+  } else {
+    printf("%s: fork() failed\n", s);
+    exit(1);
+  }
+}
+
+
+// test if child is killed (status = -1)
+void
+killstatus(char *s)
+{
+  int xst;
+  
+  for(int i = 0; i < 100; i++){
+    int pid1 = fork();
+    if(pid1 < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid1 == 0){
+      while(1) {
+        getpid();
+      }
+      exit(0);
+    }
+    sleep(1);
+    kill(pid1);
+    wait(&xst);
+    if(xst != -1) {
+       printf("%s: status should be -1\n", s);
+       exit(1);
+    }
+  }
+  exit(0);
+}
+
+// meant to be run w/ at most two CPUs
+void
+preempt(char *s)
+{
+  int pid1, pid2, pid3;
+  int pfds[2];
+
+  pid1 = fork();
+  if(pid1 < 0) {
+    printf("%s: fork failed", s);
+    exit(1);
+  }
+  if(pid1 == 0)
+    for(;;)
+      ;
+
+  pid2 = fork();
+  if(pid2 < 0) {
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+  if(pid2 == 0)
+    for(;;)
+      ;
+
+  pipe(pfds);
+  pid3 = fork();
+  if(pid3 < 0) {
+     printf("%s: fork failed\n", s);
+     exit(1);
+  }
+  if(pid3 == 0){
+    close(pfds[0]);
+    if(write(pfds[1], "x", 1) != 1)
+      printf("%s: preempt write error", s);
+    close(pfds[1]);
+    for(;;)
+      ;
+  }
+
+  close(pfds[1]);
+  if(read(pfds[0], buf, sizeof(buf)) != 1){
+    printf("%s: preempt read error", s);
+    return;
+  }
+  close(pfds[0]);
+  printf("kill... ");
+  kill(pid1);
+  kill(pid2);
+  kill(pid3);
+  printf("wait... ");
+  wait(0);
+  wait(0);
+  wait(0);
+}
+
+// try to find any races between exit and wait
+void
+exitwait(char *s)
+{
+  int i, pid;
+
+  for(i = 0; i < 100; i++){
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid){
+      int xstate;
+      if(wait(&xstate) != pid){
+        printf("%s: wait wrong pid\n", s);
+        exit(1);
+      }
+      if(i != xstate) {
+        printf("%s: wait wrong exit status\n", s);
+        exit(1);
+      }
+    } else {
+      exit(i);
+    }
+  }
+}
+
+// try to find races in the reparenting
+// code that handles a parent exiting
+// when it still has live children.
+void
+reparent(char *s)
+{
+  int master_pid = getpid();
+  for(int i = 0; i < 200; i++){
+    int pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid){
+      if(wait(0) != pid){
+        printf("%s: wait wrong pid\n", s);
+        exit(1);
+      }
+    } else {
+      int pid2 = fork();
+      if(pid2 < 0){
+        kill(master_pid);
+        exit(1);
+      }
+      exit(0);
+    }
+  }
+  exit(0);
+}
+
+// what if two children exit() at the same time?
+void
+twochildren(char *s)
+{
+  for(int i = 0; i < 1000; i++){
+    int pid1 = fork();
+    if(pid1 < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid1 == 0){
+      exit(0);
+    } else {
+      int pid2 = fork();
+      if(pid2 < 0){
+        printf("%s: fork failed\n", s);
+        exit(1);
+      }
+      if(pid2 == 0){
+        exit(0);
+      } else {
+        wait(0);
+        wait(0);
+      }
+    }
+  }
+}
+
+// concurrent forks to try to expose locking bugs.
+void
+forkfork(char *s)
+{
+  enum { N=2 };
+  
+  for(int i = 0; i < N; i++){
+    int pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed", s);
+      exit(1);
+    }
+    if(pid == 0){
+      for(int j = 0; j < 200; j++){
+        int pid1 = fork();
+        if(pid1 < 0){
+          exit(1);
+        }
+        if(pid1 == 0){
+          exit(0);
+        }
+        wait(0);
+      }
+      exit(0);
+    }
+  }
+
+  int xstatus;
+  for(int i = 0; i < N; i++){
+    wait(&xstatus);
+    if(xstatus != 0) {
+      printf("%s: fork in child failed", s);
+      exit(1);
+    }
+  }
+}
+
+void
+forkforkfork(char *s)
+{
+  unlink("stopforking");
+
+  int pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed", s);
+    exit(1);
+  }
+  if(pid == 0){
+    while(1){
+      int fd = open("stopforking", 0);
+      if(fd >= 0){
+        exit(0);
+      }
+      if(fork() < 0){
+        close(open("stopforking", O_CREATE|O_RDWR));
+      }
+    }
+
+    exit(0);
+  }
+
+  sleep(20); // two seconds
+  close(open("stopforking", O_CREATE|O_RDWR));
+  wait(0);
+  sleep(10); // one second
+}
+
+// regression test. does reparent() violate the parent-then-child
+// locking order when giving away a child to init, so that exit()
+// deadlocks against init's wait()? also used to trigger a "panic:
+// release" due to exit() releasing a different p->parent->lock than
+// it acquired.
+void
+reparent2(char *s)
+{
+  for(int i = 0; i < 800; i++){
+    int pid1 = fork();
+    if(pid1 < 0){
+      printf("fork failed\n");
+      exit(1);
+    }
+    if(pid1 == 0){
+      fork();
+      fork();
+      exit(0);
+    }
+    wait(0);
+  }
+
+  exit(0);
+}
+
+// allocate all mem, free it, and allocate again
+void
+mem(char *s)
+{
+  void *m1, *m2;
+  int pid;
+
+  if((pid = fork()) == 0){
+    m1 = 0;
+    while((m2 = malloc(10001)) != 0){
+      *(char**)m2 = m1;
+      m1 = m2;
+    }
+    while(m1){
+      m2 = *(char**)m1;
+      free(m1);
+      m1 = m2;
+    }
+    m1 = malloc(1024*20);
+    if(m1 == 0){
+      printf("%s: couldn't allocate mem?!!\n", s);
+      exit(1);
+    }
+    free(m1);
+    exit(0);
+  } else {
+    int xstatus;
+    wait(&xstatus);
+    if(xstatus == -1){
+      // probably page fault, so might be lazy lab,
+      // so OK.
+      exit(0);
+    }
+    exit(xstatus);
+  }
+}
+
+// More file system tests
+
+// two processes write to the same file descriptor
+// is the offset shared? does inode locking work?
+void
+sharedfd(char *s)
+{
+  int fd, pid, i, n, nc, np;
+  enum { N = 1000, SZ=10};
+  char buf[SZ];
+
+  unlink("sharedfd");
+  fd = open("sharedfd", O_CREATE|O_RDWR);
+  if(fd < 0){
+    printf("%s: cannot open sharedfd for writing", s);
+    exit(1);
+  }
+  pid = fork();
+  memset(buf, pid==0?'c':'p', sizeof(buf));
+  for(i = 0; i < N; i++){
+    if(write(fd, buf, sizeof(buf)) != sizeof(buf)){
+      printf("%s: write sharedfd failed\n", s);
+      exit(1);
+    }
+  }
+  if(pid == 0) {
+    exit(0);
+  } else {
+    int xstatus;
+    wait(&xstatus);
+    if(xstatus != 0)
+      exit(xstatus);
+  }
+  
+  close(fd);
+  fd = open("sharedfd", 0);
+  if(fd < 0){
+    printf("%s: cannot open sharedfd for reading\n", s);
+    exit(1);
+  }
+  nc = np = 0;
+  while((n = read(fd, buf, sizeof(buf))) > 0){
+    for(i = 0; i < sizeof(buf); i++){
+      if(buf[i] == 'c')
+        nc++;
+      if(buf[i] == 'p')
+        np++;
+    }
+  }
+  close(fd);
+  unlink("sharedfd");
+  if(nc == N*SZ && np == N*SZ){
+    exit(0);
+  } else {
+    printf("%s: nc/np test fails\n", s);
+    exit(1);
+  }
+}
+
+// four processes write different files at the same
+// time, to test block allocation.
+void
+fourfiles(char *s)
+{
+  int fd, pid, i, j, n, total, pi;
+  char *names[] = { "f0", "f1", "f2", "f3" };
+  char *fname;
+  enum { N=12, NCHILD=4, SZ=500 };
+  
+  for(pi = 0; pi < NCHILD; pi++){
+    fname = names[pi];
+    unlink(fname);
+
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+
+    if(pid == 0){
+      fd = open(fname, O_CREATE | O_RDWR);
+      if(fd < 0){
+        printf("%s: create failed\n", s);
+        exit(1);
+      }
+
+      memset(buf, '0'+pi, SZ);
+      for(i = 0; i < N; i++){
+        if((n = write(fd, buf, SZ)) != SZ){
+          printf("write failed %d\n", n);
+          exit(1);
+        }
+      }
+      exit(0);
+    }
+  }
+
+  int xstatus;
+  for(pi = 0; pi < NCHILD; pi++){
+    wait(&xstatus);
+    if(xstatus != 0)
+      exit(xstatus);
+  }
+
+  for(i = 0; i < NCHILD; i++){
+    fname = names[i];
+    fd = open(fname, 0);
+    total = 0;
+    while((n = read(fd, buf, sizeof(buf))) > 0){
+      for(j = 0; j < n; j++){
+        if(buf[j] != '0'+i){
+          printf("%s: wrong char\n", s);
+          exit(1);
+        }
+      }
+      total += n;
+    }
+    close(fd);
+    if(total != N*SZ){
+      printf("wrong length %d\n", total);
+      exit(1);
+    }
+    unlink(fname);
+  }
+}
+
+// four processes create and delete different files in same directory
+void
+createdelete(char *s)
+{
+  enum { N = 20, NCHILD=4 };
+  int pid, i, fd, pi;
+  char name[32];
+
+  for(pi = 0; pi < NCHILD; pi++){
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+
+    if(pid == 0){
+      name[0] = 'p' + pi;
+      name[2] = '\0';
+      for(i = 0; i < N; i++){
+        name[1] = '0' + i;
+        fd = open(name, O_CREATE | O_RDWR);
+        if(fd < 0){
+          printf("%s: create failed\n", s);
+          exit(1);
+        }
+        close(fd);
+        if(i > 0 && (i % 2 ) == 0){
+          name[1] = '0' + (i / 2);
+          if(unlink(name) < 0){
+            printf("%s: unlink failed\n", s);
+            exit(1);
+          }
+        }
+      }
+      exit(0);
+    }
+  }
+
+  int xstatus;
+  for(pi = 0; pi < NCHILD; pi++){
+    wait(&xstatus);
+    if(xstatus != 0)
+      exit(1);
+  }
+
+  name[0] = name[1] = name[2] = 0;
+  for(i = 0; i < N; i++){
+    for(pi = 0; pi < NCHILD; pi++){
+      name[0] = 'p' + pi;
+      name[1] = '0' + i;
+      fd = open(name, 0);
+      if((i == 0 || i >= N/2) && fd < 0){
+        printf("%s: oops createdelete %s didn't exist\n", s, name);
+        exit(1);
+      } else if((i >= 1 && i < N/2) && fd >= 0){
+        printf("%s: oops createdelete %s did exist\n", s, name);
+        exit(1);
+      }
+      if(fd >= 0)
+        close(fd);
+    }
+  }
+
+  for(i = 0; i < N; i++){
+    for(pi = 0; pi < NCHILD; pi++){
+      name[0] = 'p' + pi;
+      name[1] = '0' + i;
+      unlink(name);
+    }
+  }
+}
+
+// can I unlink a file and still read it?
+void
+unlinkread(char *s)
+{
+  enum { SZ = 5 };
+  int fd, fd1;
+
+  fd = open("unlinkread", O_CREATE | O_RDWR);
+  if(fd < 0){
+    printf("%s: create unlinkread failed\n", s);
+    exit(1);
+  }
+  write(fd, "hello", SZ);
+  close(fd);
+
+  fd = open("unlinkread", O_RDWR);
+  if(fd < 0){
+    printf("%s: open unlinkread failed\n", s);
+    exit(1);
+  }
+  if(unlink("unlinkread") != 0){
+    printf("%s: unlink unlinkread failed\n", s);
+    exit(1);
+  }
+
+  fd1 = open("unlinkread", O_CREATE | O_RDWR);
+  write(fd1, "yyy", 3);
+  close(fd1);
+
+  if(read(fd, buf, sizeof(buf)) != SZ){
+    printf("%s: unlinkread read failed", s);
+    exit(1);
+  }
+  if(buf[0] != 'h'){
+    printf("%s: unlinkread wrong data\n", s);
+    exit(1);
+  }
+  if(write(fd, buf, 10) != 10){
+    printf("%s: unlinkread write failed\n", s);
+    exit(1);
+  }
+  close(fd);
+  unlink("unlinkread");
+}
+
+void
+linktest(char *s)
+{
+  enum { SZ = 5 };
+  int fd;
+
+  unlink("lf1");
+  unlink("lf2");
+
+  fd = open("lf1", O_CREATE|O_RDWR);
+  if(fd < 0){
+    printf("%s: create lf1 failed\n", s);
+    exit(1);
+  }
+  if(write(fd, "hello", SZ) != SZ){
+    printf("%s: write lf1 failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(link("lf1", "lf2") < 0){
+    printf("%s: link lf1 lf2 failed\n", s);
+    exit(1);
+  }
+  unlink("lf1");
+
+  if(open("lf1", 0) >= 0){
+    printf("%s: unlinked lf1 but it is still there!\n", s);
+    exit(1);
+  }
+
+  fd = open("lf2", 0);
+  if(fd < 0){
+    printf("%s: open lf2 failed\n", s);
+    exit(1);
+  }
+  if(read(fd, buf, sizeof(buf)) != SZ){
+    printf("%s: read lf2 failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(link("lf2", "lf2") >= 0){
+    printf("%s: link lf2 lf2 succeeded! oops\n", s);
+    exit(1);
+  }
+
+  unlink("lf2");
+  if(link("lf2", "lf1") >= 0){
+    printf("%s: link non-existent succeeded! oops\n", s);
+    exit(1);
+  }
+
+  if(link(".", "lf1") >= 0){
+    printf("%s: link . lf1 succeeded! oops\n", s);
+    exit(1);
+  }
+}
+
+// test concurrent create/link/unlink of the same file
+void
+concreate(char *s)
+{
+  enum { N = 40 };
+  char file[3];
+  int i, pid, n, fd;
+  char fa[N];
+  struct {
+    ushort inum;
+    char name[DIRSIZ];
+  } de;
+
+  file[0] = 'C';
+  file[2] = '\0';
+  for(i = 0; i < N; i++){
+    file[1] = '0' + i;
+    unlink(file);
+    pid = fork();
+    if(pid && (i % 3) == 1){
+      link("C0", file);
+    } else if(pid == 0 && (i % 5) == 1){
+      link("C0", file);
+    } else {
+      fd = open(file, O_CREATE | O_RDWR);
+      if(fd < 0){
+        printf("concreate create %s failed\n", file);
+        exit(1);
+      }
+      close(fd);
+    }
+    if(pid == 0) {
+      exit(0);
+    } else {
+      int xstatus;
+      wait(&xstatus);
+      if(xstatus != 0)
+        exit(1);
+    }
+  }
+
+  memset(fa, 0, sizeof(fa));
+  fd = open(".", 0);
+  n = 0;
+  while(read(fd, &de, sizeof(de)) > 0){
+    if(de.inum == 0)
+      continue;
+    if(de.name[0] == 'C' && de.name[2] == '\0'){
+      i = de.name[1] - '0';
+      if(i < 0 || i >= sizeof(fa)){
+        printf("%s: concreate weird file %s\n", s, de.name);
+        exit(1);
+      }
+      if(fa[i]){
+        printf("%s: concreate duplicate file %s\n", s, de.name);
+        exit(1);
+      }
+      fa[i] = 1;
+      n++;
+    }
+  }
+  close(fd);
+
+  if(n != N){
+    printf("%s: concreate not enough files in directory listing\n", s);
+    exit(1);
+  }
+
+  for(i = 0; i < N; i++){
+    file[1] = '0' + i;
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(((i % 3) == 0 && pid == 0) ||
+       ((i % 3) == 1 && pid != 0)){
+      close(open(file, 0));
+      close(open(file, 0));
+      close(open(file, 0));
+      close(open(file, 0));
+      close(open(file, 0));
+      close(open(file, 0));
+    } else {
+      unlink(file);
+      unlink(file);
+      unlink(file);
+      unlink(file);
+      unlink(file);
+      unlink(file);
+    }
+    if(pid == 0)
+      exit(0);
+    else
+      wait(0);
+  }
+}
+
+// another concurrent link/unlink/create test,
+// to look for deadlocks.
+void
+linkunlink(char *s)
+{
+  int pid, i;
+
+  unlink("x");
+  pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+
+  unsigned int x = (pid ? 1 : 97);
+  for(i = 0; i < 100; i++){
+    x = x * 1103515245 + 12345;
+    if((x % 3) == 0){
+      close(open("x", O_RDWR | O_CREATE));
+    } else if((x % 3) == 1){
+      link("cat", "x");
+    } else {
+      unlink("x");
+    }
+  }
+
+  if(pid)
+    wait(0);
+  else
+    exit(0);
+}
+
+
+void
+subdir(char *s)
+{
+  int fd, cc;
+
+  unlink("ff");
+  if(mkdir("dd") != 0){
+    printf("%s: mkdir dd failed\n", s);
+    exit(1);
+  }
+
+  fd = open("dd/ff", O_CREATE | O_RDWR);
+  if(fd < 0){
+    printf("%s: create dd/ff failed\n", s);
+    exit(1);
+  }
+  write(fd, "ff", 2);
+  close(fd);
+
+  if(unlink("dd") >= 0){
+    printf("%s: unlink dd (non-empty dir) succeeded!\n", s);
+    exit(1);
+  }
+
+  if(mkdir("/dd/dd") != 0){
+    printf("%s: subdir mkdir dd/dd failed\n", s);
+    exit(1);
+  }
+
+  fd = open("dd/dd/ff", O_CREATE | O_RDWR);
+  if(fd < 0){
+    printf("%s: create dd/dd/ff failed\n", s);
+    exit(1);
+  }
+  write(fd, "FF", 2);
+  close(fd);
+
+  fd = open("dd/dd/../ff", 0);
+  if(fd < 0){
+    printf("%s: open dd/dd/../ff failed\n", s);
+    exit(1);
+  }
+  cc = read(fd, buf, sizeof(buf));
+  if(cc != 2 || buf[0] != 'f'){
+    printf("%s: dd/dd/../ff wrong content\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(link("dd/dd/ff", "dd/dd/ffff") != 0){
+    printf("%s: link dd/dd/ff dd/dd/ffff failed\n", s);
+    exit(1);
+  }
+
+  if(unlink("dd/dd/ff") != 0){
+    printf("%s: unlink dd/dd/ff failed\n", s);
+    exit(1);
+  }
+  if(open("dd/dd/ff", O_RDONLY) >= 0){
+    printf("%s: open (unlinked) dd/dd/ff succeeded\n", s);
+    exit(1);
+  }
+
+  if(chdir("dd") != 0){
+    printf("%s: chdir dd failed\n", s);
+    exit(1);
+  }
+  if(chdir("dd/../../dd") != 0){
+    printf("%s: chdir dd/../../dd failed\n", s);
+    exit(1);
+  }
+  if(chdir("dd/../../../dd") != 0){
+    printf("%s: chdir dd/../../../dd failed\n", s);
+    exit(1);
+  }
+  if(chdir("./..") != 0){
+    printf("%s: chdir ./.. failed\n", s);
+    exit(1);
+  }
+
+  fd = open("dd/dd/ffff", 0);
+  if(fd < 0){
+    printf("%s: open dd/dd/ffff failed\n", s);
+    exit(1);
+  }
+  if(read(fd, buf, sizeof(buf)) != 2){
+    printf("%s: read dd/dd/ffff wrong len\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(open("dd/dd/ff", O_RDONLY) >= 0){
+    printf("%s: open (unlinked) dd/dd/ff succeeded!\n", s);
+    exit(1);
+  }
+
+  if(open("dd/ff/ff", O_CREATE|O_RDWR) >= 0){
+    printf("%s: create dd/ff/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(open("dd/xx/ff", O_CREATE|O_RDWR) >= 0){
+    printf("%s: create dd/xx/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(open("dd", O_CREATE) >= 0){
+    printf("%s: create dd succeeded!\n", s);
+    exit(1);
+  }
+  if(open("dd", O_RDWR) >= 0){
+    printf("%s: open dd rdwr succeeded!\n", s);
+    exit(1);
+  }
+  if(open("dd", O_WRONLY) >= 0){
+    printf("%s: open dd wronly succeeded!\n", s);
+    exit(1);
+  }
+  if(link("dd/ff/ff", "dd/dd/xx") == 0){
+    printf("%s: link dd/ff/ff dd/dd/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(link("dd/xx/ff", "dd/dd/xx") == 0){
+    printf("%s: link dd/xx/ff dd/dd/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(link("dd/ff", "dd/dd/ffff") == 0){
+    printf("%s: link dd/ff dd/dd/ffff succeeded!\n", s);
+    exit(1);
+  }
+  if(mkdir("dd/ff/ff") == 0){
+    printf("%s: mkdir dd/ff/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(mkdir("dd/xx/ff") == 0){
+    printf("%s: mkdir dd/xx/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(mkdir("dd/dd/ffff") == 0){
+    printf("%s: mkdir dd/dd/ffff succeeded!\n", s);
+    exit(1);
+  }
+  if(unlink("dd/xx/ff") == 0){
+    printf("%s: unlink dd/xx/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(unlink("dd/ff/ff") == 0){
+    printf("%s: unlink dd/ff/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(chdir("dd/ff") == 0){
+    printf("%s: chdir dd/ff succeeded!\n", s);
+    exit(1);
+  }
+  if(chdir("dd/xx") == 0){
+    printf("%s: chdir dd/xx succeeded!\n", s);
+    exit(1);
+  }
+
+  if(unlink("dd/dd/ffff") != 0){
+    printf("%s: unlink dd/dd/ff failed\n", s);
+    exit(1);
+  }
+  if(unlink("dd/ff") != 0){
+    printf("%s: unlink dd/ff failed\n", s);
+    exit(1);
+  }
+  if(unlink("dd") == 0){
+    printf("%s: unlink non-empty dd succeeded!\n", s);
+    exit(1);
+  }
+  if(unlink("dd/dd") < 0){
+    printf("%s: unlink dd/dd failed\n", s);
+    exit(1);
+  }
+  if(unlink("dd") < 0){
+    printf("%s: unlink dd failed\n", s);
+    exit(1);
+  }
+}
+
+// test writes that are larger than the log.
+void
+bigwrite(char *s)
+{
+  int fd, sz;
+
+  unlink("bigwrite");
+  for(sz = 499; sz < (MAXOPBLOCKS+2)*BSIZE; sz += 471){
+    fd = open("bigwrite", O_CREATE | O_RDWR);
+    if(fd < 0){
+      printf("%s: cannot create bigwrite\n", s);
+      exit(1);
+    }
+    int i;
+    for(i = 0; i < 2; i++){
+      int cc = write(fd, buf, sz);
+      if(cc != sz){
+        printf("%s: write(%d) ret %d\n", s, sz, cc);
+        exit(1);
+      }
+    }
+    close(fd);
+    unlink("bigwrite");
+  }
+}
+
+
+void
+bigfile(char *s)
+{
+  enum { N = 20, SZ=600 };
+  int fd, i, total, cc;
+
+  unlink("bigfile.dat");
+  fd = open("bigfile.dat", O_CREATE | O_RDWR);
+  if(fd < 0){
+    printf("%s: cannot create bigfile", s);
+    exit(1);
+  }
+  for(i = 0; i < N; i++){
+    memset(buf, i, SZ);
+    if(write(fd, buf, SZ) != SZ){
+      printf("%s: write bigfile failed\n", s);
+      exit(1);
+    }
+  }
+  close(fd);
+
+  fd = open("bigfile.dat", 0);
+  if(fd < 0){
+    printf("%s: cannot open bigfile\n", s);
+    exit(1);
+  }
+  total = 0;
+  for(i = 0; ; i++){
+    cc = read(fd, buf, SZ/2);
+    if(cc < 0){
+      printf("%s: read bigfile failed\n", s);
+      exit(1);
+    }
+    if(cc == 0)
+      break;
+    if(cc != SZ/2){
+      printf("%s: short read bigfile\n", s);
+      exit(1);
+    }
+    if(buf[0] != i/2 || buf[SZ/2-1] != i/2){
+      printf("%s: read bigfile wrong data\n", s);
+      exit(1);
+    }
+    total += cc;
+  }
+  close(fd);
+  if(total != N*SZ){
+    printf("%s: read bigfile wrong total\n", s);
+    exit(1);
+  }
+  unlink("bigfile.dat");
+}
+
+void
+fourteen(char *s)
+{
+  int fd;
+
+  // DIRSIZ is 14.
+
+  if(mkdir("12345678901234") != 0){
+    printf("%s: mkdir 12345678901234 failed\n", s);
+    exit(1);
+  }
+  if(mkdir("12345678901234/123456789012345") != 0){
+    printf("%s: mkdir 12345678901234/123456789012345 failed\n", s);
+    exit(1);
+  }
+  fd = open("123456789012345/123456789012345/123456789012345", O_CREATE);
+  if(fd < 0){
+    printf("%s: create 123456789012345/123456789012345/123456789012345 failed\n", s);
+    exit(1);
+  }
+  close(fd);
+  fd = open("12345678901234/12345678901234/12345678901234", 0);
+  if(fd < 0){
+    printf("%s: open 12345678901234/12345678901234/12345678901234 failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  if(mkdir("12345678901234/12345678901234") == 0){
+    printf("%s: mkdir 12345678901234/12345678901234 succeeded!\n", s);
+    exit(1);
+  }
+  if(mkdir("123456789012345/12345678901234") == 0){
+    printf("%s: mkdir 12345678901234/123456789012345 succeeded!\n", s);
+    exit(1);
+  }
+
+  // clean up
+  unlink("123456789012345/12345678901234");
+  unlink("12345678901234/12345678901234");
+  unlink("12345678901234/12345678901234/12345678901234");
+  unlink("123456789012345/123456789012345/123456789012345");
+  unlink("12345678901234/123456789012345");
+  unlink("12345678901234");
+}
+
+void
+rmdot(char *s)
+{
+  if(mkdir("dots") != 0){
+    printf("%s: mkdir dots failed\n", s);
+    exit(1);
+  }
+  if(chdir("dots") != 0){
+    printf("%s: chdir dots failed\n", s);
+    exit(1);
+  }
+  if(unlink(".") == 0){
+    printf("%s: rm . worked!\n", s);
+    exit(1);
+  }
+  if(unlink("..") == 0){
+    printf("%s: rm .. worked!\n", s);
+    exit(1);
+  }
+  if(chdir("/") != 0){
+    printf("%s: chdir / failed\n", s);
+    exit(1);
+  }
+  if(unlink("dots/.") == 0){
+    printf("%s: unlink dots/. worked!\n", s);
+    exit(1);
+  }
+  if(unlink("dots/..") == 0){
+    printf("%s: unlink dots/.. worked!\n", s);
+    exit(1);
+  }
+  if(unlink("dots") != 0){
+    printf("%s: unlink dots failed!\n", s);
+    exit(1);
+  }
+}
+
+void
+dirfile(char *s)
+{
+  int fd;
+
+  fd = open("dirfile", O_CREATE);
+  if(fd < 0){
+    printf("%s: create dirfile failed\n", s);
+    exit(1);
+  }
+  close(fd);
+  if(chdir("dirfile") == 0){
+    printf("%s: chdir dirfile succeeded!\n", s);
+    exit(1);
+  }
+  fd = open("dirfile/xx", 0);
+  if(fd >= 0){
+    printf("%s: create dirfile/xx succeeded!\n", s);
+    exit(1);
+  }
+  fd = open("dirfile/xx", O_CREATE);
+  if(fd >= 0){
+    printf("%s: create dirfile/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(mkdir("dirfile/xx") == 0){
+    printf("%s: mkdir dirfile/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(unlink("dirfile/xx") == 0){
+    printf("%s: unlink dirfile/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(link("README", "dirfile/xx") == 0){
+    printf("%s: link to dirfile/xx succeeded!\n", s);
+    exit(1);
+  }
+  if(unlink("dirfile") != 0){
+    printf("%s: unlink dirfile failed!\n", s);
+    exit(1);
+  }
+
+  fd = open(".", O_RDWR);
+  if(fd >= 0){
+    printf("%s: open . for writing succeeded!\n", s);
+    exit(1);
+  }
+  fd = open(".", 0);
+  if(write(fd, "x", 1) > 0){
+    printf("%s: write . succeeded!\n", s);
+    exit(1);
+  }
+  close(fd);
+}
+
+// test that iput() is called at the end of _namei().
+// also tests empty file names.
+void
+iref(char *s)
+{
+  int i, fd;
+
+  for(i = 0; i < NINODE + 1; i++){
+    if(mkdir("irefd") != 0){
+      printf("%s: mkdir irefd failed\n", s);
+      exit(1);
+    }
+    if(chdir("irefd") != 0){
+      printf("%s: chdir irefd failed\n", s);
+      exit(1);
+    }
+
+    mkdir("");
+    link("README", "");
+    fd = open("", O_CREATE);
+    if(fd >= 0)
+      close(fd);
+    fd = open("xx", O_CREATE);
+    if(fd >= 0)
+      close(fd);
+    unlink("xx");
+  }
+
+  // clean up
+  for(i = 0; i < NINODE + 1; i++){
+    chdir("..");
+    unlink("irefd");
+  }
+
+  chdir("/");
+}
+
+// test that fork fails gracefully
+// the forktest binary also does this, but it runs out of proc entries first.
+// inside the bigger usertests binary, we run out of memory first.
+void
+forktest(char *s)
+{
+  enum{ N = 1000 };
+  int n, pid;
+
+  for(n=0; n<N; n++){
+    pid = fork();
+    if(pid < 0)
+      break;
+    if(pid == 0)
+      exit(0);
+  }
+
+  if (n == 0) {
+    printf("%s: no fork at all!\n", s);
+    exit(1);
+  }
+
+  if(n == N){
+    printf("%s: fork claimed to work 1000 times!\n", s);
+    exit(1);
+  }
+
+  for(; n > 0; n--){
+    if(wait(0) < 0){
+      printf("%s: wait stopped early\n", s);
+      exit(1);
+    }
+  }
+
+  if(wait(0) != -1){
+    printf("%s: wait got too many\n", s);
+    exit(1);
+  }
+}
+
+void
+sbrkbasic(char *s)
+{
+  enum { TOOMUCH=1024*1024*1024};
+  int i, pid, xstatus;
+  char *c, *a, *b;
+
+  // does sbrk() return the expected failure value?
+  pid = fork();
+  if(pid < 0){
+    printf("fork failed in sbrkbasic\n");
+    exit(1);
+  }
+  if(pid == 0){
+    a = sbrk(TOOMUCH);
+    if(a == (char*)0xffffffffffffffffL){
+      // it's OK if this fails.
+      exit(0);
+    }
+    
+    for(b = a; b < a+TOOMUCH; b += 4096){
+      *b = 99;
+    }
+    
+    // we should not get here! either sbrk(TOOMUCH)
+    // should have failed, or (with lazy allocation)
+    // a pagefault should have killed this process.
+    exit(1);
+  }
+
+  wait(&xstatus);
+  if(xstatus == 1){
+    printf("%s: too much memory allocated!\n", s);
+    exit(1);
+  }
+
+  // can one sbrk() less than a page?
+  a = sbrk(0);
+  for(i = 0; i < 5000; i++){
+    b = sbrk(1);
+    if(b != a){
+      printf("%s: sbrk test failed %d %p %p\n", s, i, a, b);
+      exit(1);
+    }
+    *b = 1;
+    a = b + 1;
+  }
+  pid = fork();
+  if(pid < 0){
+    printf("%s: sbrk test fork failed\n", s);
+    exit(1);
+  }
+  c = sbrk(1);
+  c = sbrk(1);
+  if(c != a + 1){
+    printf("%s: sbrk test failed post-fork\n", s);
+    exit(1);
+  }
+  if(pid == 0)
+    exit(0);
+  wait(&xstatus);
+  exit(xstatus);
+}
+
+void
+sbrkmuch(char *s)
+{
+  enum { BIG=100*1024*1024 };
+  char *c, *oldbrk, *a, *lastaddr, *p;
+  uint64 amt;
+
+  oldbrk = sbrk(0);
+
+  // can one grow address space to something big?
+  a = sbrk(0);
+  amt = BIG - (uint64)a;
+  p = sbrk(amt);
+  if (p != a) {
+    printf("%s: sbrk test failed to grow big address space; enough phys mem?\n", s);
+    exit(1);
+  }
+
+  // touch each page to make sure it exists.
+  char *eee = sbrk(0);
+  for(char *pp = a; pp < eee; pp += 4096)
+    *pp = 1;
+
+  lastaddr = (char*) (BIG-1);
+  *lastaddr = 99;
+
+  // can one de-allocate?
+  a = sbrk(0);
+  c = sbrk(-PGSIZE);
+  if(c == (char*)0xffffffffffffffffL){
+    printf("%s: sbrk could not deallocate\n", s);
+    exit(1);
+  }
+  c = sbrk(0);
+  if(c != a - PGSIZE){
+    printf("%s: sbrk deallocation produced wrong address, a %p c %p\n", s, a, c);
+    exit(1);
+  }
+
+  // can one re-allocate that page?
+  a = sbrk(0);
+  c = sbrk(PGSIZE);
+  if(c != a || sbrk(0) != a + PGSIZE){
+    printf("%s: sbrk re-allocation failed, a %p c %p\n", s, a, c);
+    exit(1);
+  }
+  if(*lastaddr == 99){
+    // should be zero
+    printf("%s: sbrk de-allocation didn't really deallocate\n", s);
+    exit(1);
+  }
+
+  a = sbrk(0);
+  c = sbrk(-(sbrk(0) - oldbrk));
+  if(c != a){
+    printf("%s: sbrk downsize failed, a %p c %p\n", s, a, c);
+    exit(1);
+  }
+}
+
+// can we read the kernel's memory?
+void
+kernmem(char *s)
+{
+  char *a;
+  int pid;
+
+  for(a = (char*)(KERNBASE); a < (char*) (KERNBASE+2000000); a += 50000){
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid == 0){
+      printf("%s: oops could read %p = %x\n", s, a, *a);
+      exit(1);
+    }
+    int xstatus;
+    wait(&xstatus);
+    if(xstatus != -1)  // did kernel kill child?
+      exit(1);
+  }
+}
+
+// user code should not be able to write to addresses above MAXVA.
+void
+MAXVAplus(char *s)
+{
+  volatile uint64 a = MAXVA;
+  for( ; a != 0; a <<= 1){
+    int pid;
+    pid = fork();
+    if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    if(pid == 0){
+      *(char*)a = 99;
+      printf("%s: oops wrote %p\n", s, (void*)a);
+      exit(1);
+    }
+    int xstatus;
+    wait(&xstatus);
+    if(xstatus != -1)  // did kernel kill child?
+      exit(1);
+  }
+}
+
+// if we run the system out of memory, does it clean up the last
+// failed allocation?
+void
+sbrkfail(char *s)
+{
+  enum { BIG=100*1024*1024 };
+  int i, xstatus;
+  int fds[2];
+  char scratch;
+  char *c, *a;
+  int pids[10];
+  int pid;
+ 
+  if(pipe(fds) != 0){
+    printf("%s: pipe() failed\n", s);
+    exit(1);
+  }
+  for(i = 0; i < sizeof(pids)/sizeof(pids[0]); i++){
+    if((pids[i] = fork()) == 0){
+      // allocate a lot of memory
+      sbrk(BIG - (uint64)sbrk(0));
+      write(fds[1], "x", 1);
+      // sit around until killed
+      for(;;) sleep(1000);
+    }
+    if(pids[i] != -1)
+      read(fds[0], &scratch, 1);
+  }
+
+  // if those failed allocations freed up the pages they did allocate,
+  // we'll be able to allocate here
+  c = sbrk(PGSIZE);
+  for(i = 0; i < sizeof(pids)/sizeof(pids[0]); i++){
+    if(pids[i] == -1)
+      continue;
+    kill(pids[i]);
+    wait(0);
+  }
+  if(c == (char*)0xffffffffffffffffL){
+    printf("%s: failed sbrk leaked memory\n", s);
+    exit(1);
+  }
+
+  // test running fork with the above allocated page 
+  pid = fork();
+  if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+  if(pid == 0){
+    // allocate a lot of memory.
+    // this should produce a page fault,
+    // and thus not complete.
+    a = sbrk(0);
+    sbrk(10*BIG);
+    int n = 0;
+    for (i = 0; i < 10*BIG; i += PGSIZE) {
+      n += *(a+i);
+    }
+    // print n so the compiler doesn't optimize away
+    // the for loop.
+    printf("%s: allocate a lot of memory succeeded %d\n", s, n);
+    exit(1);
+  }
+  wait(&xstatus);
+  if(xstatus != -1 && xstatus != 2)
+    exit(1);
+}
+
+  
+// test reads/writes from/to allocated memory
+void
+sbrkarg(char *s)
+{
+  char *a;
+  int fd, n;
+
+  a = sbrk(PGSIZE);
+  fd = open("sbrk", O_CREATE|O_WRONLY);
+  unlink("sbrk");
+  if(fd < 0)  {
+    printf("%s: open sbrk failed\n", s);
+    exit(1);
+  }
+  if ((n = write(fd, a, PGSIZE)) < 0) {
+    printf("%s: write sbrk failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  // test writes to allocated memory
+  a = sbrk(PGSIZE);
+  if(pipe((int *) a) != 0){
+    printf("%s: pipe() failed\n", s);
+    exit(1);
+  } 
+}
+
+void
+validatetest(char *s)
+{
+  int hi;
+  uint64 p;
+
+  hi = 1100*1024;
+  for(p = 0; p <= (uint)hi; p += PGSIZE){
+    // try to crash the kernel by passing in a bad string pointer
+    if(link("nosuchfile", (char*)p) != -1){
+      printf("%s: link should not succeed\n", s);
+      exit(1);
+    }
+  }
+}
+
+// does uninitialized data start out zero?
+char uninit[10000];
+void
+bsstest(char *s)
+{
+  int i;
+
+  for(i = 0; i < sizeof(uninit); i++){
+    if(uninit[i] != '\0'){
+      printf("%s: bss test failed\n", s);
+      exit(1);
+    }
+  }
+}
+
+// does exec return an error if the arguments
+// are larger than a page? or does it write
+// below the stack and wreck the instructions/data?
+void
+bigargtest(char *s)
+{
+  int pid, fd, xstatus;
+
+  unlink("bigarg-ok");
+  pid = fork();
+  if(pid == 0){
+    static char *args[MAXARG];
+    int i;
+    char big[400];
+    memset(big, ' ', sizeof(big));
+    big[sizeof(big)-1] = '\0';
+    for(i = 0; i < MAXARG-1; i++)
+      args[i] = big;
+    args[MAXARG-1] = 0;
+    // this exec() should fail (and return) because the
+    // arguments are too large.
+    exec("echo", args);
+    fd = open("bigarg-ok", O_CREATE);
+    close(fd);
+    exit(0);
+  } else if(pid < 0){
+    printf("%s: bigargtest: fork failed\n", s);
+    exit(1);
+  }
+  
+  wait(&xstatus);
+  if(xstatus != 0)
+    exit(xstatus);
+  fd = open("bigarg-ok", 0);
+  if(fd < 0){
+    printf("%s: bigarg test failed!\n", s);
+    exit(1);
+  }
+  close(fd);
+}
+
+// what happens when the file system runs out of blocks?
+// answer: balloc panics, so this test is not useful.
+void
+fsfull()
+{
+  int nfiles;
+  int fsblocks = 0;
+
+  printf("fsfull test\n");
+
+  for(nfiles = 0; ; nfiles++){
+    char name[64];
+    name[0] = 'f';
+    name[1] = '0' + nfiles / 1000;
+    name[2] = '0' + (nfiles % 1000) / 100;
+    name[3] = '0' + (nfiles % 100) / 10;
+    name[4] = '0' + (nfiles % 10);
+    name[5] = '\0';
+    printf("writing %s\n", name);
+    int fd = open(name, O_CREATE|O_RDWR);
+    if(fd < 0){
+      printf("open %s failed\n", name);
+      break;
+    }
+    int total = 0;
+    while(1){
+      int cc = write(fd, buf, BSIZE);
+      if(cc < BSIZE)
+        break;
+      total += cc;
+      fsblocks++;
+    }
+    printf("wrote %d bytes\n", total);
+    close(fd);
+    if(total == 0)
+      break;
+  }
+
+  while(nfiles >= 0){
+    char name[64];
+    name[0] = 'f';
+    name[1] = '0' + nfiles / 1000;
+    name[2] = '0' + (nfiles % 1000) / 100;
+    name[3] = '0' + (nfiles % 100) / 10;
+    name[4] = '0' + (nfiles % 10);
+    name[5] = '\0';
+    unlink(name);
+    nfiles--;
+  }
+
+  printf("fsfull test finished\n");
+}
+
+void argptest(char *s)
+{
+  int fd;
+  fd = open("init", O_RDONLY);
+  if (fd < 0) {
+    printf("%s: open failed\n", s);
+    exit(1);
+  }
+  read(fd, sbrk(0) - 1, -1);
+  close(fd);
+}
+
+// check that there's an invalid page beneath
+// the user stack, to catch stack overflow.
+void
+stacktest(char *s)
+{
+  int pid;
+  int xstatus;
+  
+  pid = fork();
+  if(pid == 0) {
+    char *sp = (char *) r_sp();
+    sp -= USERSTACK*PGSIZE;
+    // the *sp should cause a trap.
+    printf("%s: stacktest: read below stack %d\n", s, *sp);
+    exit(1);
+  } else if(pid < 0){
+    printf("%s: fork failed\n", s);
+    exit(1);
+  }
+  wait(&xstatus);
+  if(xstatus == -1)  // kernel killed child?
+    exit(0);
+  else
+    exit(xstatus);
+}
+
+// check that writes to a few forbidden addresses
+// cause a fault, e.g. process's text and TRAMPOLINE.
+void
+nowrite(char *s)
+{
+  int pid;
+  int xstatus;
+  uint64 addrs[] = { 0, 0x80000000LL, 0x3fffffe000, 0x3ffffff000, 0x4000000000,
+                     0xffffffffffffffff };
+  
+  for(int ai = 0; ai < sizeof(addrs)/sizeof(addrs[0]); ai++){
+    pid = fork();
+    if(pid == 0) {
+      volatile int *addr = (int *) addrs[ai];
+      *addr = 10;
+      printf("%s: write to %p did not fail!\n", s, addr);
+      exit(0);
+    } else if(pid < 0){
+      printf("%s: fork failed\n", s);
+      exit(1);
+    }
+    wait(&xstatus);
+    if(xstatus == 0){
+      // kernel did not kill child!
+      exit(1);
+    }
+  }
+  exit(0);
+}
+
+// regression test. copyin(), copyout(), and copyinstr() used to cast
+// the virtual page address to uint, which (with certain wild system
+// call arguments) resulted in a kernel page faults.
+void *big = (void*) 0xeaeb0b5b00002f5e;
+void
+pgbug(char *s)
+{
+  char *argv[1];
+  argv[0] = 0;
+  exec(big, argv);
+  pipe(big);
+
+  exit(0);
+}
+
+// regression test. does the kernel panic if a process sbrk()s its
+// size to be less than a page, or zero, or reduces the break by an
+// amount too small to cause a page to be freed?
+void
+sbrkbugs(char *s)
+{
+  int pid = fork();
+  if(pid < 0){
+    printf("fork failed\n");
+    exit(1);
+  }
+  if(pid == 0){
+    int sz = (uint64) sbrk(0);
+    // free all user memory; there used to be a bug that
+    // would not adjust p->sz correctly in this case,
+    // causing exit() to panic.
+    sbrk(-sz);
+    // user page fault here.
+    exit(0);
+  }
+  wait(0);
+
+  pid = fork();
+  if(pid < 0){
+    printf("fork failed\n");
+    exit(1);
+  }
+  if(pid == 0){
+    int sz = (uint64) sbrk(0);
+    // set the break to somewhere in the very first
+    // page; there used to be a bug that would incorrectly
+    // free the first page.
+    sbrk(-(sz - 3500));
+    exit(0);
+  }
+  wait(0);
+
+  pid = fork();
+  if(pid < 0){
+    printf("fork failed\n");
+    exit(1);
+  }
+  if(pid == 0){
+    // set the break in the middle of a page.
+    sbrk((10*4096 + 2048) - (uint64)sbrk(0));
+
+    // reduce the break a bit, but not enough to
+    // cause a page to be freed. this used to cause
+    // a panic.
+    sbrk(-10);
+
+    exit(0);
+  }
+  wait(0);
+
+  exit(0);
+}
+
+// if process size was somewhat more than a page boundary, and then
+// shrunk to be somewhat less than that page boundary, can the kernel
+// still copyin() from addresses in the last page?
+void
+sbrklast(char *s)
+{
+  uint64 top = (uint64) sbrk(0);
+  if((top % 4096) != 0)
+    sbrk(4096 - (top % 4096));
+  sbrk(4096);
+  sbrk(10);
+  sbrk(-20);
+  top = (uint64) sbrk(0);
+  char *p = (char *) (top - 64);
+  p[0] = 'x';
+  p[1] = '\0';
+  int fd = open(p, O_RDWR|O_CREATE);
+  write(fd, p, 1);
+  close(fd);
+  fd = open(p, O_RDWR);
+  p[0] = '\0';
+  read(fd, p, 1);
+  if(p[0] != 'x')
+    exit(1);
+}
+
+
+// does sbrk handle signed int32 wrap-around with
+// negative arguments?
+void
+sbrk8000(char *s)
+{
+  sbrk(0x80000004);
+  volatile char *top = sbrk(0);
+  *(top-1) = *(top-1) + 1;
+}
+
+
+
+// regression test. test whether exec() leaks memory if one of the
+// arguments is invalid. the test passes if the kernel doesn't panic.
+void
+badarg(char *s)
+{
+  for(int i = 0; i < 50000; i++){
+    char *argv[2];
+    argv[0] = (char*)0xffffffff;
+    argv[1] = 0;
+    exec("echo", argv);
+  }
+  
+  exit(0);
+}
+
+struct test {
+  void (*f)(char *);
+  char *s;
+} quicktests[] = {
+  {copyin, "copyin"},
+  {copyout, "copyout"},
+  {copyinstr1, "copyinstr1"},
+  {copyinstr2, "copyinstr2"},
+  {copyinstr3, "copyinstr3"},
+  {rwsbrk, "rwsbrk" },
+  {truncate1, "truncate1"},
+  {truncate2, "truncate2"},
+  {truncate3, "truncate3"},
+  {openiputtest, "openiput"},
+  {exitiputtest, "exitiput"},
+  {iputtest, "iput"},
+  {opentest, "opentest"},
+  {writetest, "writetest"},
+  {writebig, "writebig"},
+  {createtest, "createtest"},
+  {dirtest, "dirtest"},
+  {exectest, "exectest"},
+  {pipe1, "pipe1"},
+  {killstatus, "killstatus"},
+  {preempt, "preempt"},
+  {exitwait, "exitwait"},
+  {reparent, "reparent" },
+  {twochildren, "twochildren"},
+  {forkfork, "forkfork"},
+  {forkforkfork, "forkforkfork"},
+  {reparent2, "reparent2"},
+  {mem, "mem"},
+  {sharedfd, "sharedfd"},
+  {fourfiles, "fourfiles"},
+  {createdelete, "createdelete"},
+  {unlinkread, "unlinkread"},
+  {linktest, "linktest"},
+  {concreate, "concreate"},
+  {linkunlink, "linkunlink"},
+  {subdir, "subdir"},
+  {bigwrite, "bigwrite"},
+  {bigfile, "bigfile"},
+  {fourteen, "fourteen"},
+  {rmdot, "rmdot"},
+  {dirfile, "dirfile"},
+  {iref, "iref"},
+  {forktest, "forktest"},
+  {sbrkbasic, "sbrkbasic"},
+  {sbrkmuch, "sbrkmuch"},
+  {kernmem, "kernmem"},
+  {MAXVAplus, "MAXVAplus"},
+  {sbrkfail, "sbrkfail"},
+  {sbrkarg, "sbrkarg"},
+  {validatetest, "validatetest"},
+  {bsstest, "bsstest"},
+  {bigargtest, "bigargtest"},
+  {argptest, "argptest"},
+  {stacktest, "stacktest"},
+  {nowrite, "nowrite"},
+  {pgbug, "pgbug" },
+  {sbrkbugs, "sbrkbugs" },
+  {sbrklast, "sbrklast"},
+  {sbrk8000, "sbrk8000"},
+  {badarg, "badarg" },
+
+  { 0, 0},
+};
+
+//
+// Section with tests that take a fair bit of time
+//
+
+// directory that uses indirect blocks
+void
+bigdir(char *s)
+{
+  enum { N = 500 };
+  int i, fd;
+  char name[10];
+
+  unlink("bd");
+
+  fd = open("bd", O_CREATE);
+  if(fd < 0){
+    printf("%s: bigdir create failed\n", s);
+    exit(1);
+  }
+  close(fd);
+
+  for(i = 0; i < N; i++){
+    name[0] = 'x';
+    name[1] = '0' + (i / 64);
+    name[2] = '0' + (i % 64);
+    name[3] = '\0';
+    if(link("bd", name) != 0){
+      printf("%s: bigdir i=%d link(bd, %s) failed\n", s, i, name);
+      exit(1);
+    }
+  }
+
+  unlink("bd");
+  for(i = 0; i < N; i++){
+    name[0] = 'x';
+    name[1] = '0' + (i / 64);
+    name[2] = '0' + (i % 64);
+    name[3] = '\0';
+    if(unlink(name) != 0){
+      printf("%s: bigdir unlink failed", s);
+      exit(1);
+    }
+  }
+}
+
+// concurrent writes to try to provoke deadlock in the virtio disk
+// driver.
+void
+manywrites(char *s)
+{
+  int nchildren = 4;
+  int howmany = 30; // increase to look for deadlock
+  
+  for(int ci = 0; ci < nchildren; ci++){
+    int pid = fork();
+    if(pid < 0){
+      printf("fork failed\n");
+      exit(1);
+    }
+
+    if(pid == 0){
+      char name[3];
+      name[0] = 'b';
+      name[1] = 'a' + ci;
+      name[2] = '\0';
+      unlink(name);
+      
+      for(int iters = 0; iters < howmany; iters++){
+        for(int i = 0; i < ci+1; i++){
+          int fd = open(name, O_CREATE | O_RDWR);
+          if(fd < 0){
+            printf("%s: cannot create %s\n", s, name);
+            exit(1);
+          }
+          int sz = sizeof(buf);
+          int cc = write(fd, buf, sz);
+          if(cc != sz){
+            printf("%s: write(%d) ret %d\n", s, sz, cc);
+            exit(1);
+          }
+          close(fd);
+        }
+        unlink(name);
+      }
+
+      unlink(name);
+      exit(0);
+    }
+  }
+
+  for(int ci = 0; ci < nchildren; ci++){
+    int st = 0;
+    wait(&st);
+    if(st != 0)
+      exit(st);
+  }
+  exit(0);
+}
+
+// regression test. does write() with an invalid buffer pointer cause
+// a block to be allocated for a file that is then not freed when the
+// file is deleted? if the kernel has this bug, it will panic: balloc:
+// out of blocks. assumed_free may need to be raised to be more than
+// the number of free blocks. this test takes a long time.
+void
+badwrite(char *s)
+{
+  int assumed_free = 600;
+  
+  unlink("junk");
+  for(int i = 0; i < assumed_free; i++){
+    int fd = open("junk", O_CREATE|O_WRONLY);
+    if(fd < 0){
+      printf("open junk failed\n");
+      exit(1);
+    }
+    write(fd, (char*)0xffffffffffL, 1);
+    close(fd);
+    unlink("junk");
+  }
+
+  int fd = open("junk", O_CREATE|O_WRONLY);
+  if(fd < 0){
+    printf("open junk failed\n");
+    exit(1);
+  }
+  if(write(fd, "x", 1) != 1){
+    printf("write failed\n");
+    exit(1);
+  }
+  close(fd);
+  unlink("junk");
+
+  exit(0);
+}
+
+// test the exec() code that cleans up if it runs out
+// of memory. it's really a test that such a condition
+// doesn't cause a panic.
+void
+execout(char *s)
+{
+  for(int avail = 0; avail < 15; avail++){
+    int pid = fork();
+    if(pid < 0){
+      printf("fork failed\n");
+      exit(1);
+    } else if(pid == 0){
+      // allocate all of memory.
+      while(1){
+        uint64 a = (uint64) sbrk(4096);
+        if(a == 0xffffffffffffffffLL)
+          break;
+        *(char*)(a + 4096 - 1) = 1;
+      }
+
+      // free a few pages, in order to let exec() make some
+      // progress.
+      for(int i = 0; i < avail; i++)
+        sbrk(-4096);
+      
+      close(1);
+      char *args[] = { "echo", "x", 0 };
+      exec("echo", args);
+      exit(0);
+    } else {
+      wait((int*)0);
+    }
+  }
+
+  exit(0);
+}
+
+// can the kernel tolerate running out of disk space?
+void
+diskfull(char *s)
+{
+  int fi;
+  int done = 0;
+
+  unlink("diskfulldir");
+  
+  for(fi = 0; done == 0 && '0' + fi < 0177; fi++){
+    char name[32];
+    name[0] = 'b';
+    name[1] = 'i';
+    name[2] = 'g';
+    name[3] = '0' + fi;
+    name[4] = '\0';
+    unlink(name);
+    int fd = open(name, O_CREATE|O_RDWR|O_TRUNC);
+    if(fd < 0){
+      // oops, ran out of inodes before running out of blocks.
+      printf("%s: could not create file %s\n", s, name);
+      done = 1;
+      break;
+    }
+    for(int i = 0; i < MAXFILE; i++){
+      char buf[BSIZE];
+      if(write(fd, buf, BSIZE) != BSIZE){
+        done = 1;
+        close(fd);
+        break;
+      }
+    }
+    close(fd);
+  }
+
+  // now that there are no free blocks, test that dirlink()
+  // merely fails (doesn't panic) if it can't extend
+  // directory content. one of these file creations
+  // is expected to fail.
+  int nzz = 128;
+  for(int i = 0; i < nzz; i++){
+    char name[32];
+    name[0] = 'z';
+    name[1] = 'z';
+    name[2] = '0' + (i / 32);
+    name[3] = '0' + (i % 32);
+    name[4] = '\0';
+    unlink(name);
+    int fd = open(name, O_CREATE|O_RDWR|O_TRUNC);
+    if(fd < 0)
+      break;
+    close(fd);
+  }
+
+  // this mkdir() is expected to fail.
+  if(mkdir("diskfulldir") == 0)
+    printf("%s: mkdir(diskfulldir) unexpectedly succeeded!\n", s);
+
+  unlink("diskfulldir");
+
+  for(int i = 0; i < nzz; i++){
+    char name[32];
+    name[0] = 'z';
+    name[1] = 'z';
+    name[2] = '0' + (i / 32);
+    name[3] = '0' + (i % 32);
+    name[4] = '\0';
+    unlink(name);
+  }
+
+  for(int i = 0; '0' + i < 0177; i++){
+    char name[32];
+    name[0] = 'b';
+    name[1] = 'i';
+    name[2] = 'g';
+    name[3] = '0' + i;
+    name[4] = '\0';
+    unlink(name);
+  }
+}
+
+void
+outofinodes(char *s)
+{
+  int nzz = 32*32;
+  for(int i = 0; i < nzz; i++){
+    char name[32];
+    name[0] = 'z';
+    name[1] = 'z';
+    name[2] = '0' + (i / 32);
+    name[3] = '0' + (i % 32);
+    name[4] = '\0';
+    unlink(name);
+    int fd = open(name, O_CREATE|O_RDWR|O_TRUNC);
+    if(fd < 0){
+      // failure is eventually expected.
+      break;
+    }
+    close(fd);
+  }
+
+  for(int i = 0; i < nzz; i++){
+    char name[32];
+    name[0] = 'z';
+    name[1] = 'z';
+    name[2] = '0' + (i / 32);
+    name[3] = '0' + (i % 32);
+    name[4] = '\0';
+    unlink(name);
+  }
+}
+
+struct test slowtests[] = {
+  {bigdir, "bigdir"},
+  {manywrites, "manywrites"},
+  {badwrite, "badwrite" },
+  {execout, "execout"},
+  {diskfull, "diskfull"},
+  {outofinodes, "outofinodes"},
+    
+  { 0, 0},
+};
+
+//
+// drive tests
+//
+
+// run each test in its own process. run returns 1 if child's exit()
+// indicates success.
+int
+run(void f(char *), char *s) {
+  int pid;
+  int xstatus;
+
+  printf("test %s: ", s);
+  if((pid = fork()) < 0) {
+    printf("runtest: fork error\n");
+    exit(1);
+  }
+  if(pid == 0) {
+    f(s);
+    exit(0);
+  } else {
+    wait(&xstatus);
+    if(xstatus != 0) 
+      printf("FAILED\n");
+    else
+      printf("OK\n");
+    return xstatus == 0;
+  }
+}
+
+int
+runtests(struct test *tests, char *justone, int continuous) {
+  for (struct test *t = tests; t->s != 0; t++) {
+    if((justone == 0) || strcmp(t->s, justone) == 0) {
+      if(!run(t->f, t->s)){
+        if(continuous != 2){
+          printf("SOME TESTS FAILED\n");
+          return 1;
+        }
+      }
+    }
+  }
+  return 0;
+}
+
+
+//
+// use sbrk() to count how many free physical memory pages there are.
+// touches the pages to force allocation.
+// because out of memory with lazy allocation results in the process
+// taking a fault and being killed, fork and report back.
+//
+int
+countfree()
+{
+  int fds[2];
+
+  if(pipe(fds) < 0){
+    printf("pipe() failed in countfree()\n");
+    exit(1);
+  }
+  
+  int pid = fork();
+
+  if(pid < 0){
+    printf("fork failed in countfree()\n");
+    exit(1);
+  }
+
+  if(pid == 0){
+    close(fds[0]);
+    
+    while(1){
+      uint64 a = (uint64) sbrk(4096);
+      if(a == 0xffffffffffffffff){
+        break;
+      }
+
+      // modify the memory to make sure it's really allocated.
+      *(char *)(a + 4096 - 1) = 1;
+
+      // report back one more page.
+      if(write(fds[1], "x", 1) != 1){
+        printf("write() failed in countfree()\n");
+        exit(1);
+      }
+    }
+
+    exit(0);
+  }
+
+  close(fds[1]);
+
+  int n = 0;
+  while(1){
+    char c;
+    int cc = read(fds[0], &c, 1);
+    if(cc < 0){
+      printf("read() failed in countfree()\n");
+      exit(1);
+    }
+    if(cc == 0)
+      break;
+    n += 1;
+  }
+
+  close(fds[0]);
+  wait((int*)0);
+  
+  return n;
+}
+
+int
+drivetests(int quick, int continuous, char *justone) {
+  do {
+    printf("usertests starting\n");
+    int free0 = countfree();
+    int free1 = 0;
+    if (runtests(quicktests, justone, continuous)) {
+      if(continuous != 2) {
+        return 1;
+      }
+    }
+    if(!quick) {
+      if (justone == 0)
+        printf("usertests slow tests starting\n");
+      if (runtests(slowtests, justone, continuous)) {
+        if(continuous != 2) {
+          return 1;
+        }
+      }
+    }
+    if((free1 = countfree()) < free0) {
+      printf("FAILED -- lost some free pages %d (out of %d)\n", free1, free0);
+      if(continuous != 2) {
+        return 1;
+      }
+    }
+  } while(continuous);
+  return 0;
+}
+
+int
+main(int argc, char *argv[])
+{
+  int continuous = 0;
+  int quick = 0;
+  char *justone = 0;
+
+  if(argc == 2 && strcmp(argv[1], "-q") == 0){
+    quick = 1;
+  } else if(argc == 2 && strcmp(argv[1], "-c") == 0){
+    continuous = 1;
+  } else if(argc == 2 && strcmp(argv[1], "-C") == 0){
+    continuous = 2;
+  } else if(argc == 2 && argv[1][0] != '-'){
+    justone = argv[1];
+  } else if(argc > 1){
+    printf("Usage: usertests [-c] [-C] [-q] [testname]\n");
+    exit(1);
+  }
+  if (drivetests(quick, continuous, justone)) {
+    exit(1);
+  }
+  printf("ALL TESTS PASSED\n");
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/usertests.d b/xv6-labs-2024/user/usertests.d
new file mode 100644
index 0000000..091b123
--- /dev/null
+++ b/xv6-labs-2024/user/usertests.d
@@ -0,0 +1,4 @@
+user/usertests.o: user/usertests.c \
+ /usr/riscv64-linux-gnu/include/stdc-predef.h kernel/param.h \
+ kernel/types.h kernel/stat.h user/user.h kernel/fs.h kernel/fcntl.h \
+ kernel/syscall.h kernel/memlayout.h kernel/riscv.h
diff --git a/xv6-labs-2024/user/usertests.o b/xv6-labs-2024/user/usertests.o
new file mode 100644
index 0000000..f541c59
Binary files /dev/null and b/xv6-labs-2024/user/usertests.o differ
diff --git a/xv6-labs-2024/user/usertests.sym b/xv6-labs-2024/user/usertests.sym
new file mode 100644
index 0000000..6972d3d
--- /dev/null
+++ b/xv6-labs-2024/user/usertests.sym
@@ -0,0 +1,141 @@
+0000000000000000 .text
+0000000000005048 .rodata
+0000000000007478 .eh_frame
+0000000000009000 .data
+0000000000009450 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_ranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 usertests.c
+0000000000009560 big.0
+0000000000009460 args.1
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000004b20 putc
+0000000000004b3e printint
+0000000000007460 digits
+0000000000000000 umalloc.c
+0000000000009450 freep
+000000000000fc78 base
+00000000000009be writebig
+00000000000025ca sbrk8000
+0000000000004828 strcpy
+0000000000001650 exitwait
+0000000000001db6 manywrites
+0000000000004e98 printf
+00000000000003be outofinodes
+000000000000425a bigargtest
+00000000000049d2 memmove
+000000000000359a openiputtest
+0000000000004ac8 mknod
+00000000000038a0 reparent
+00000000000048e0 gets
+0000000000004b00 getpid
+00000000000014b4 pipe1
+0000000000004a64 memcpy
+00000000000034a0 iref
+0000000000000fd4 pgbug
+0000000000001d12 nowrite
+0000000000004f4c malloc
+00000000000005aa copyout
+0000000000004b10 sleep
+0000000000001cae stacktest
+00000000000025f8 execout
+000000000000246c sbrkbugs
+0000000000002a8a exitiputtest
+0000000000004338 fsfull
+0000000000000e9e bigdir
+0000000000001ae4 forktest
+0000000000001fce rwsbrk
+00000000000011dc truncate3
+000000000000022c bigwrite
+0000000000003af2 sharedfd
+0000000000004a90 pipe
+00000000000036ea killstatus
+000000000000a568 uninit
+00000000000032f0 dirfile
+0000000000004aa0 write
+0000000000000078 bsstest
+0000000000004ad8 fstat
+0000000000004e6e fprintf
+0000000000004ab0 kill
+00000000000027d0 diskfull
+0000000000000e3c validatetest
+0000000000009010 quicktests
+00000000000031ca rmdot
+000000000000047e copyin
+0000000000004be6 vprintf
+0000000000000118 truncate2
+0000000000004af0 chdir
+0000000000009000 big
+000000000000133e exectest
+0000000000004ab8 exec
+00000000000002ee badwrite
+0000000000004a88 wait
+0000000000004a98 read
+0000000000003764 preempt
+0000000000004ad0 unlink
+0000000000001000 badarg
+0000000000002412 argptest
+0000000000003a7a mem
+000000000000452c runtests
+0000000000004a2a memcmp
+0000000000004a78 fork
+0000000000002528 sbrklast
+0000000000001eca copyinstr3
+0000000000001752 forkfork
+0000000000004b08 sbrk
+00000000000093e0 slowtests
+0000000000004b18 uptime
+00000000000016e0 twochildren
+0000000000001c1c MAXVAplus
+000000000000489a memset
+0000000000001b8c kernmem
+00000000000001b8 createtest
+000000000000476a main
+0000000000001830 createdelete
+000000000000364c forkforkfork
+0000000000003920 sbrkfail
+0000000000004844 strcmp
+000000000000087e writetest
+0000000000004af8 dup
+00000000000006e0 truncate1
+00000000000000b2 opentest
+00000000000044ae run
+0000000000002bdc subdir
+000000000000103e copyinstr2
+0000000000000c74 linktest
+000000000000cc78 buf
+0000000000002b36 dirtest
+000000000000469c drivetests
+000000000000236e sbrkarg
+00000000000029e4 iputtest
+0000000000004950 stat
+00000000000040d6 bigfile
+00000000000045a6 countfree
+0000000000000b1e unlinkread
+0000000000004ae0 link
+0000000000004a80 exit
+0000000000004816 start
+000000000000498a atoi
+0000000000000000 copyinstr1
+0000000000001a08 linkunlink
+00000000000020d4 sbrkbasic
+0000000000004870 strlen
+0000000000004ac0 open
+00000000000048bc strchr
+0000000000003e32 concreate
+0000000000002694 fourteen
+0000000000003c5e fourfiles
+0000000000002216 sbrkmuch
+0000000000004ae8 mkdir
+0000000000004aa8 close
+00000000000017e8 reparent2
+0000000000004eca free
diff --git a/xv6-labs-2024/user/usys.S b/xv6-labs-2024/user/usys.S
new file mode 100644
index 0000000..e761942
--- /dev/null
+++ b/xv6-labs-2024/user/usys.S
@@ -0,0 +1,107 @@
+# generated by usys.pl - do not edit
+#include "kernel/syscall.h"
+.global fork
+fork:
+ li a7, SYS_fork
+ ecall
+ ret
+.global exit
+exit:
+ li a7, SYS_exit
+ ecall
+ ret
+.global wait
+wait:
+ li a7, SYS_wait
+ ecall
+ ret
+.global pipe
+pipe:
+ li a7, SYS_pipe
+ ecall
+ ret
+.global read
+read:
+ li a7, SYS_read
+ ecall
+ ret
+.global write
+write:
+ li a7, SYS_write
+ ecall
+ ret
+.global close
+close:
+ li a7, SYS_close
+ ecall
+ ret
+.global kill
+kill:
+ li a7, SYS_kill
+ ecall
+ ret
+.global exec
+exec:
+ li a7, SYS_exec
+ ecall
+ ret
+.global open
+open:
+ li a7, SYS_open
+ ecall
+ ret
+.global mknod
+mknod:
+ li a7, SYS_mknod
+ ecall
+ ret
+.global unlink
+unlink:
+ li a7, SYS_unlink
+ ecall
+ ret
+.global fstat
+fstat:
+ li a7, SYS_fstat
+ ecall
+ ret
+.global link
+link:
+ li a7, SYS_link
+ ecall
+ ret
+.global mkdir
+mkdir:
+ li a7, SYS_mkdir
+ ecall
+ ret
+.global chdir
+chdir:
+ li a7, SYS_chdir
+ ecall
+ ret
+.global dup
+dup:
+ li a7, SYS_dup
+ ecall
+ ret
+.global getpid
+getpid:
+ li a7, SYS_getpid
+ ecall
+ ret
+.global sbrk
+sbrk:
+ li a7, SYS_sbrk
+ ecall
+ ret
+.global sleep
+sleep:
+ li a7, SYS_sleep
+ ecall
+ ret
+.global uptime
+uptime:
+ li a7, SYS_uptime
+ ecall
+ ret
diff --git a/xv6-labs-2024/user/usys.d b/xv6-labs-2024/user/usys.d
new file mode 100644
index 0000000..9a2c506
--- /dev/null
+++ b/xv6-labs-2024/user/usys.d
@@ -0,0 +1,2 @@
+user/usys.o: user/usys.S /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/syscall.h
diff --git a/xv6-labs-2024/user/usys.o b/xv6-labs-2024/user/usys.o
new file mode 100644
index 0000000..55a5eeb
Binary files /dev/null and b/xv6-labs-2024/user/usys.o differ
diff --git a/xv6-labs-2024/user/usys.pl b/xv6-labs-2024/user/usys.pl
new file mode 100644
index 0000000..01e426e
--- /dev/null
+++ b/xv6-labs-2024/user/usys.pl
@@ -0,0 +1,38 @@
+#!/usr/bin/perl -w
+
+# Generate usys.S, the stubs for syscalls.
+
+print "# generated by usys.pl - do not edit\n";
+
+print "#include \"kernel/syscall.h\"\n";
+
+sub entry {
+    my $name = shift;
+    print ".global $name\n";
+    print "${name}:\n";
+    print " li a7, SYS_${name}\n";
+    print " ecall\n";
+    print " ret\n";
+}
+	
+entry("fork");
+entry("exit");
+entry("wait");
+entry("pipe");
+entry("read");
+entry("write");
+entry("close");
+entry("kill");
+entry("exec");
+entry("open");
+entry("mknod");
+entry("unlink");
+entry("fstat");
+entry("link");
+entry("mkdir");
+entry("chdir");
+entry("dup");
+entry("getpid");
+entry("sbrk");
+entry("sleep");
+entry("uptime");
diff --git a/xv6-labs-2024/user/wc.asm b/xv6-labs-2024/user/wc.asm
new file mode 100644
index 0000000..7ec1a38
--- /dev/null
+++ b/xv6-labs-2024/user/wc.asm
@@ -0,0 +1,1156 @@
+
+user/_wc:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <wc>:
+   0:	7119                	addi	sp,sp,-128
+   2:	fc86                	sd	ra,120(sp)
+   4:	f8a2                	sd	s0,112(sp)
+   6:	f4a6                	sd	s1,104(sp)
+   8:	f0ca                	sd	s2,96(sp)
+   a:	ecce                	sd	s3,88(sp)
+   c:	e8d2                	sd	s4,80(sp)
+   e:	e4d6                	sd	s5,72(sp)
+  10:	e0da                	sd	s6,64(sp)
+  12:	fc5e                	sd	s7,56(sp)
+  14:	f862                	sd	s8,48(sp)
+  16:	f466                	sd	s9,40(sp)
+  18:	f06a                	sd	s10,32(sp)
+  1a:	ec6e                	sd	s11,24(sp)
+  1c:	0100                	addi	s0,sp,128
+  1e:	f8a43423          	sd	a0,-120(s0)
+  22:	f8b43023          	sd	a1,-128(s0)
+  26:	4901                	li	s2,0
+  28:	4d01                	li	s10,0
+  2a:	4c81                	li	s9,0
+  2c:	4c01                	li	s8,0
+  2e:	00001d97          	auipc	s11,0x1
+  32:	fe2d8d93          	addi	s11,s11,-30 # 1010 <buf>
+  36:	4aa9                	li	s5,10
+  38:	00001a17          	auipc	s4,0x1
+  3c:	958a0a13          	addi	s4,s4,-1704 # 990 <malloc+0xfe>
+  40:	4b81                	li	s7,0
+  42:	a035                	j	6e <wc+0x6e>
+  44:	8552                	mv	a0,s4
+  46:	1bc000ef          	jal	202 <strchr>
+  4a:	c919                	beqz	a0,60 <wc+0x60>
+  4c:	895e                	mv	s2,s7
+  4e:	0485                	addi	s1,s1,1
+  50:	01348d63          	beq	s1,s3,6a <wc+0x6a>
+  54:	0004c583          	lbu	a1,0(s1)
+  58:	ff5596e3          	bne	a1,s5,44 <wc+0x44>
+  5c:	2c05                	addiw	s8,s8,1
+  5e:	b7dd                	j	44 <wc+0x44>
+  60:	fe0917e3          	bnez	s2,4e <wc+0x4e>
+  64:	2c85                	addiw	s9,s9,1
+  66:	4905                	li	s2,1
+  68:	b7dd                	j	4e <wc+0x4e>
+  6a:	01ab0d3b          	addw	s10,s6,s10
+  6e:	20000613          	li	a2,512
+  72:	85ee                	mv	a1,s11
+  74:	f8843503          	ld	a0,-120(s0)
+  78:	366000ef          	jal	3de <read>
+  7c:	8b2a                	mv	s6,a0
+  7e:	00a05963          	blez	a0,90 <wc+0x90>
+  82:	00001497          	auipc	s1,0x1
+  86:	f8e48493          	addi	s1,s1,-114 # 1010 <buf>
+  8a:	009509b3          	add	s3,a0,s1
+  8e:	b7d9                	j	54 <wc+0x54>
+  90:	02054c63          	bltz	a0,c8 <wc+0xc8>
+  94:	f8043703          	ld	a4,-128(s0)
+  98:	86ea                	mv	a3,s10
+  9a:	8666                	mv	a2,s9
+  9c:	85e2                	mv	a1,s8
+  9e:	00001517          	auipc	a0,0x1
+  a2:	91250513          	addi	a0,a0,-1774 # 9b0 <malloc+0x11e>
+  a6:	738000ef          	jal	7de <printf>
+  aa:	70e6                	ld	ra,120(sp)
+  ac:	7446                	ld	s0,112(sp)
+  ae:	74a6                	ld	s1,104(sp)
+  b0:	7906                	ld	s2,96(sp)
+  b2:	69e6                	ld	s3,88(sp)
+  b4:	6a46                	ld	s4,80(sp)
+  b6:	6aa6                	ld	s5,72(sp)
+  b8:	6b06                	ld	s6,64(sp)
+  ba:	7be2                	ld	s7,56(sp)
+  bc:	7c42                	ld	s8,48(sp)
+  be:	7ca2                	ld	s9,40(sp)
+  c0:	7d02                	ld	s10,32(sp)
+  c2:	6de2                	ld	s11,24(sp)
+  c4:	6109                	addi	sp,sp,128
+  c6:	8082                	ret
+  c8:	00001517          	auipc	a0,0x1
+  cc:	8d850513          	addi	a0,a0,-1832 # 9a0 <malloc+0x10e>
+  d0:	70e000ef          	jal	7de <printf>
+  d4:	4505                	li	a0,1
+  d6:	2f0000ef          	jal	3c6 <exit>
+
+00000000000000da <main>:
+  da:	7179                	addi	sp,sp,-48
+  dc:	f406                	sd	ra,40(sp)
+  de:	f022                	sd	s0,32(sp)
+  e0:	1800                	addi	s0,sp,48
+  e2:	4785                	li	a5,1
+  e4:	04a7d463          	bge	a5,a0,12c <main+0x52>
+  e8:	ec26                	sd	s1,24(sp)
+  ea:	e84a                	sd	s2,16(sp)
+  ec:	e44e                	sd	s3,8(sp)
+  ee:	00858913          	addi	s2,a1,8
+  f2:	ffe5099b          	addiw	s3,a0,-2
+  f6:	02099793          	slli	a5,s3,0x20
+  fa:	01d7d993          	srli	s3,a5,0x1d
+  fe:	05c1                	addi	a1,a1,16
+ 100:	99ae                	add	s3,s3,a1
+ 102:	4581                	li	a1,0
+ 104:	00093503          	ld	a0,0(s2)
+ 108:	2fe000ef          	jal	406 <open>
+ 10c:	84aa                	mv	s1,a0
+ 10e:	02054c63          	bltz	a0,146 <main+0x6c>
+ 112:	00093583          	ld	a1,0(s2)
+ 116:	eebff0ef          	jal	0 <wc>
+ 11a:	8526                	mv	a0,s1
+ 11c:	2d2000ef          	jal	3ee <close>
+ 120:	0921                	addi	s2,s2,8
+ 122:	ff3910e3          	bne	s2,s3,102 <main+0x28>
+ 126:	4501                	li	a0,0
+ 128:	29e000ef          	jal	3c6 <exit>
+ 12c:	ec26                	sd	s1,24(sp)
+ 12e:	e84a                	sd	s2,16(sp)
+ 130:	e44e                	sd	s3,8(sp)
+ 132:	00001597          	auipc	a1,0x1
+ 136:	86658593          	addi	a1,a1,-1946 # 998 <malloc+0x106>
+ 13a:	4501                	li	a0,0
+ 13c:	ec5ff0ef          	jal	0 <wc>
+ 140:	4501                	li	a0,0
+ 142:	284000ef          	jal	3c6 <exit>
+ 146:	00093583          	ld	a1,0(s2)
+ 14a:	00001517          	auipc	a0,0x1
+ 14e:	87650513          	addi	a0,a0,-1930 # 9c0 <malloc+0x12e>
+ 152:	68c000ef          	jal	7de <printf>
+ 156:	4505                	li	a0,1
+ 158:	26e000ef          	jal	3c6 <exit>
+
+000000000000015c <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 15c:	1141                	addi	sp,sp,-16
+ 15e:	e406                	sd	ra,8(sp)
+ 160:	e022                	sd	s0,0(sp)
+ 162:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 164:	f77ff0ef          	jal	da <main>
+  exit(0);
+ 168:	4501                	li	a0,0
+ 16a:	25c000ef          	jal	3c6 <exit>
+
+000000000000016e <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 16e:	1141                	addi	sp,sp,-16
+ 170:	e422                	sd	s0,8(sp)
+ 172:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 174:	87aa                	mv	a5,a0
+ 176:	0585                	addi	a1,a1,1
+ 178:	0785                	addi	a5,a5,1
+ 17a:	fff5c703          	lbu	a4,-1(a1)
+ 17e:	fee78fa3          	sb	a4,-1(a5)
+ 182:	fb75                	bnez	a4,176 <strcpy+0x8>
+    ;
+  return os;
+}
+ 184:	6422                	ld	s0,8(sp)
+ 186:	0141                	addi	sp,sp,16
+ 188:	8082                	ret
+
+000000000000018a <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 18a:	1141                	addi	sp,sp,-16
+ 18c:	e422                	sd	s0,8(sp)
+ 18e:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 190:	00054783          	lbu	a5,0(a0)
+ 194:	cb91                	beqz	a5,1a8 <strcmp+0x1e>
+ 196:	0005c703          	lbu	a4,0(a1)
+ 19a:	00f71763          	bne	a4,a5,1a8 <strcmp+0x1e>
+    p++, q++;
+ 19e:	0505                	addi	a0,a0,1
+ 1a0:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 1a2:	00054783          	lbu	a5,0(a0)
+ 1a6:	fbe5                	bnez	a5,196 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 1a8:	0005c503          	lbu	a0,0(a1)
+}
+ 1ac:	40a7853b          	subw	a0,a5,a0
+ 1b0:	6422                	ld	s0,8(sp)
+ 1b2:	0141                	addi	sp,sp,16
+ 1b4:	8082                	ret
+
+00000000000001b6 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 1b6:	1141                	addi	sp,sp,-16
+ 1b8:	e422                	sd	s0,8(sp)
+ 1ba:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 1bc:	00054783          	lbu	a5,0(a0)
+ 1c0:	cf91                	beqz	a5,1dc <strlen+0x26>
+ 1c2:	0505                	addi	a0,a0,1
+ 1c4:	87aa                	mv	a5,a0
+ 1c6:	86be                	mv	a3,a5
+ 1c8:	0785                	addi	a5,a5,1
+ 1ca:	fff7c703          	lbu	a4,-1(a5)
+ 1ce:	ff65                	bnez	a4,1c6 <strlen+0x10>
+ 1d0:	40a6853b          	subw	a0,a3,a0
+ 1d4:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 1d6:	6422                	ld	s0,8(sp)
+ 1d8:	0141                	addi	sp,sp,16
+ 1da:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 1dc:	4501                	li	a0,0
+ 1de:	bfe5                	j	1d6 <strlen+0x20>
+
+00000000000001e0 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 1e0:	1141                	addi	sp,sp,-16
+ 1e2:	e422                	sd	s0,8(sp)
+ 1e4:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 1e6:	ca19                	beqz	a2,1fc <memset+0x1c>
+ 1e8:	87aa                	mv	a5,a0
+ 1ea:	1602                	slli	a2,a2,0x20
+ 1ec:	9201                	srli	a2,a2,0x20
+ 1ee:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 1f2:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 1f6:	0785                	addi	a5,a5,1
+ 1f8:	fee79de3          	bne	a5,a4,1f2 <memset+0x12>
+  }
+  return dst;
+}
+ 1fc:	6422                	ld	s0,8(sp)
+ 1fe:	0141                	addi	sp,sp,16
+ 200:	8082                	ret
+
+0000000000000202 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 202:	1141                	addi	sp,sp,-16
+ 204:	e422                	sd	s0,8(sp)
+ 206:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 208:	00054783          	lbu	a5,0(a0)
+ 20c:	cb99                	beqz	a5,222 <strchr+0x20>
+    if(*s == c)
+ 20e:	00f58763          	beq	a1,a5,21c <strchr+0x1a>
+  for(; *s; s++)
+ 212:	0505                	addi	a0,a0,1
+ 214:	00054783          	lbu	a5,0(a0)
+ 218:	fbfd                	bnez	a5,20e <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 21a:	4501                	li	a0,0
+}
+ 21c:	6422                	ld	s0,8(sp)
+ 21e:	0141                	addi	sp,sp,16
+ 220:	8082                	ret
+  return 0;
+ 222:	4501                	li	a0,0
+ 224:	bfe5                	j	21c <strchr+0x1a>
+
+0000000000000226 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 226:	711d                	addi	sp,sp,-96
+ 228:	ec86                	sd	ra,88(sp)
+ 22a:	e8a2                	sd	s0,80(sp)
+ 22c:	e4a6                	sd	s1,72(sp)
+ 22e:	e0ca                	sd	s2,64(sp)
+ 230:	fc4e                	sd	s3,56(sp)
+ 232:	f852                	sd	s4,48(sp)
+ 234:	f456                	sd	s5,40(sp)
+ 236:	f05a                	sd	s6,32(sp)
+ 238:	ec5e                	sd	s7,24(sp)
+ 23a:	1080                	addi	s0,sp,96
+ 23c:	8baa                	mv	s7,a0
+ 23e:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 240:	892a                	mv	s2,a0
+ 242:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 244:	4aa9                	li	s5,10
+ 246:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 248:	89a6                	mv	s3,s1
+ 24a:	2485                	addiw	s1,s1,1
+ 24c:	0344d663          	bge	s1,s4,278 <gets+0x52>
+    cc = read(0, &c, 1);
+ 250:	4605                	li	a2,1
+ 252:	faf40593          	addi	a1,s0,-81
+ 256:	4501                	li	a0,0
+ 258:	186000ef          	jal	3de <read>
+    if(cc < 1)
+ 25c:	00a05e63          	blez	a0,278 <gets+0x52>
+    buf[i++] = c;
+ 260:	faf44783          	lbu	a5,-81(s0)
+ 264:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 268:	01578763          	beq	a5,s5,276 <gets+0x50>
+ 26c:	0905                	addi	s2,s2,1
+ 26e:	fd679de3          	bne	a5,s6,248 <gets+0x22>
+    buf[i++] = c;
+ 272:	89a6                	mv	s3,s1
+ 274:	a011                	j	278 <gets+0x52>
+ 276:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 278:	99de                	add	s3,s3,s7
+ 27a:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 27e:	855e                	mv	a0,s7
+ 280:	60e6                	ld	ra,88(sp)
+ 282:	6446                	ld	s0,80(sp)
+ 284:	64a6                	ld	s1,72(sp)
+ 286:	6906                	ld	s2,64(sp)
+ 288:	79e2                	ld	s3,56(sp)
+ 28a:	7a42                	ld	s4,48(sp)
+ 28c:	7aa2                	ld	s5,40(sp)
+ 28e:	7b02                	ld	s6,32(sp)
+ 290:	6be2                	ld	s7,24(sp)
+ 292:	6125                	addi	sp,sp,96
+ 294:	8082                	ret
+
+0000000000000296 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 296:	1101                	addi	sp,sp,-32
+ 298:	ec06                	sd	ra,24(sp)
+ 29a:	e822                	sd	s0,16(sp)
+ 29c:	e04a                	sd	s2,0(sp)
+ 29e:	1000                	addi	s0,sp,32
+ 2a0:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 2a2:	4581                	li	a1,0
+ 2a4:	162000ef          	jal	406 <open>
+  if(fd < 0)
+ 2a8:	02054263          	bltz	a0,2cc <stat+0x36>
+ 2ac:	e426                	sd	s1,8(sp)
+ 2ae:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 2b0:	85ca                	mv	a1,s2
+ 2b2:	16c000ef          	jal	41e <fstat>
+ 2b6:	892a                	mv	s2,a0
+  close(fd);
+ 2b8:	8526                	mv	a0,s1
+ 2ba:	134000ef          	jal	3ee <close>
+  return r;
+ 2be:	64a2                	ld	s1,8(sp)
+}
+ 2c0:	854a                	mv	a0,s2
+ 2c2:	60e2                	ld	ra,24(sp)
+ 2c4:	6442                	ld	s0,16(sp)
+ 2c6:	6902                	ld	s2,0(sp)
+ 2c8:	6105                	addi	sp,sp,32
+ 2ca:	8082                	ret
+    return -1;
+ 2cc:	597d                	li	s2,-1
+ 2ce:	bfcd                	j	2c0 <stat+0x2a>
+
+00000000000002d0 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 2d0:	1141                	addi	sp,sp,-16
+ 2d2:	e422                	sd	s0,8(sp)
+ 2d4:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 2d6:	00054683          	lbu	a3,0(a0)
+ 2da:	fd06879b          	addiw	a5,a3,-48
+ 2de:	0ff7f793          	zext.b	a5,a5
+ 2e2:	4625                	li	a2,9
+ 2e4:	02f66863          	bltu	a2,a5,314 <atoi+0x44>
+ 2e8:	872a                	mv	a4,a0
+  n = 0;
+ 2ea:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 2ec:	0705                	addi	a4,a4,1
+ 2ee:	0025179b          	slliw	a5,a0,0x2
+ 2f2:	9fa9                	addw	a5,a5,a0
+ 2f4:	0017979b          	slliw	a5,a5,0x1
+ 2f8:	9fb5                	addw	a5,a5,a3
+ 2fa:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 2fe:	00074683          	lbu	a3,0(a4)
+ 302:	fd06879b          	addiw	a5,a3,-48
+ 306:	0ff7f793          	zext.b	a5,a5
+ 30a:	fef671e3          	bgeu	a2,a5,2ec <atoi+0x1c>
+  return n;
+}
+ 30e:	6422                	ld	s0,8(sp)
+ 310:	0141                	addi	sp,sp,16
+ 312:	8082                	ret
+  n = 0;
+ 314:	4501                	li	a0,0
+ 316:	bfe5                	j	30e <atoi+0x3e>
+
+0000000000000318 <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 318:	1141                	addi	sp,sp,-16
+ 31a:	e422                	sd	s0,8(sp)
+ 31c:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 31e:	02b57463          	bgeu	a0,a1,346 <memmove+0x2e>
+    while(n-- > 0)
+ 322:	00c05f63          	blez	a2,340 <memmove+0x28>
+ 326:	1602                	slli	a2,a2,0x20
+ 328:	9201                	srli	a2,a2,0x20
+ 32a:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 32e:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 330:	0585                	addi	a1,a1,1
+ 332:	0705                	addi	a4,a4,1
+ 334:	fff5c683          	lbu	a3,-1(a1)
+ 338:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 33c:	fef71ae3          	bne	a4,a5,330 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 340:	6422                	ld	s0,8(sp)
+ 342:	0141                	addi	sp,sp,16
+ 344:	8082                	ret
+    dst += n;
+ 346:	00c50733          	add	a4,a0,a2
+    src += n;
+ 34a:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 34c:	fec05ae3          	blez	a2,340 <memmove+0x28>
+ 350:	fff6079b          	addiw	a5,a2,-1
+ 354:	1782                	slli	a5,a5,0x20
+ 356:	9381                	srli	a5,a5,0x20
+ 358:	fff7c793          	not	a5,a5
+ 35c:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 35e:	15fd                	addi	a1,a1,-1
+ 360:	177d                	addi	a4,a4,-1
+ 362:	0005c683          	lbu	a3,0(a1)
+ 366:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 36a:	fee79ae3          	bne	a5,a4,35e <memmove+0x46>
+ 36e:	bfc9                	j	340 <memmove+0x28>
+
+0000000000000370 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 370:	1141                	addi	sp,sp,-16
+ 372:	e422                	sd	s0,8(sp)
+ 374:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 376:	ca05                	beqz	a2,3a6 <memcmp+0x36>
+ 378:	fff6069b          	addiw	a3,a2,-1
+ 37c:	1682                	slli	a3,a3,0x20
+ 37e:	9281                	srli	a3,a3,0x20
+ 380:	0685                	addi	a3,a3,1
+ 382:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 384:	00054783          	lbu	a5,0(a0)
+ 388:	0005c703          	lbu	a4,0(a1)
+ 38c:	00e79863          	bne	a5,a4,39c <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 390:	0505                	addi	a0,a0,1
+    p2++;
+ 392:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 394:	fed518e3          	bne	a0,a3,384 <memcmp+0x14>
+  }
+  return 0;
+ 398:	4501                	li	a0,0
+ 39a:	a019                	j	3a0 <memcmp+0x30>
+      return *p1 - *p2;
+ 39c:	40e7853b          	subw	a0,a5,a4
+}
+ 3a0:	6422                	ld	s0,8(sp)
+ 3a2:	0141                	addi	sp,sp,16
+ 3a4:	8082                	ret
+  return 0;
+ 3a6:	4501                	li	a0,0
+ 3a8:	bfe5                	j	3a0 <memcmp+0x30>
+
+00000000000003aa <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 3aa:	1141                	addi	sp,sp,-16
+ 3ac:	e406                	sd	ra,8(sp)
+ 3ae:	e022                	sd	s0,0(sp)
+ 3b0:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 3b2:	f67ff0ef          	jal	318 <memmove>
+}
+ 3b6:	60a2                	ld	ra,8(sp)
+ 3b8:	6402                	ld	s0,0(sp)
+ 3ba:	0141                	addi	sp,sp,16
+ 3bc:	8082                	ret
+
+00000000000003be <fork>:
+ 3be:	4885                	li	a7,1
+ 3c0:	00000073          	ecall
+ 3c4:	8082                	ret
+
+00000000000003c6 <exit>:
+ 3c6:	4889                	li	a7,2
+ 3c8:	00000073          	ecall
+ 3cc:	8082                	ret
+
+00000000000003ce <wait>:
+ 3ce:	488d                	li	a7,3
+ 3d0:	00000073          	ecall
+ 3d4:	8082                	ret
+
+00000000000003d6 <pipe>:
+ 3d6:	4891                	li	a7,4
+ 3d8:	00000073          	ecall
+ 3dc:	8082                	ret
+
+00000000000003de <read>:
+ 3de:	4895                	li	a7,5
+ 3e0:	00000073          	ecall
+ 3e4:	8082                	ret
+
+00000000000003e6 <write>:
+ 3e6:	48c1                	li	a7,16
+ 3e8:	00000073          	ecall
+ 3ec:	8082                	ret
+
+00000000000003ee <close>:
+ 3ee:	48d5                	li	a7,21
+ 3f0:	00000073          	ecall
+ 3f4:	8082                	ret
+
+00000000000003f6 <kill>:
+ 3f6:	4899                	li	a7,6
+ 3f8:	00000073          	ecall
+ 3fc:	8082                	ret
+
+00000000000003fe <exec>:
+ 3fe:	489d                	li	a7,7
+ 400:	00000073          	ecall
+ 404:	8082                	ret
+
+0000000000000406 <open>:
+ 406:	48bd                	li	a7,15
+ 408:	00000073          	ecall
+ 40c:	8082                	ret
+
+000000000000040e <mknod>:
+ 40e:	48c5                	li	a7,17
+ 410:	00000073          	ecall
+ 414:	8082                	ret
+
+0000000000000416 <unlink>:
+ 416:	48c9                	li	a7,18
+ 418:	00000073          	ecall
+ 41c:	8082                	ret
+
+000000000000041e <fstat>:
+ 41e:	48a1                	li	a7,8
+ 420:	00000073          	ecall
+ 424:	8082                	ret
+
+0000000000000426 <link>:
+ 426:	48cd                	li	a7,19
+ 428:	00000073          	ecall
+ 42c:	8082                	ret
+
+000000000000042e <mkdir>:
+ 42e:	48d1                	li	a7,20
+ 430:	00000073          	ecall
+ 434:	8082                	ret
+
+0000000000000436 <chdir>:
+ 436:	48a5                	li	a7,9
+ 438:	00000073          	ecall
+ 43c:	8082                	ret
+
+000000000000043e <dup>:
+ 43e:	48a9                	li	a7,10
+ 440:	00000073          	ecall
+ 444:	8082                	ret
+
+0000000000000446 <getpid>:
+ 446:	48ad                	li	a7,11
+ 448:	00000073          	ecall
+ 44c:	8082                	ret
+
+000000000000044e <sbrk>:
+ 44e:	48b1                	li	a7,12
+ 450:	00000073          	ecall
+ 454:	8082                	ret
+
+0000000000000456 <sleep>:
+ 456:	48b5                	li	a7,13
+ 458:	00000073          	ecall
+ 45c:	8082                	ret
+
+000000000000045e <uptime>:
+ 45e:	48b9                	li	a7,14
+ 460:	00000073          	ecall
+ 464:	8082                	ret
+
+0000000000000466 <putc>:
+ 466:	1101                	addi	sp,sp,-32
+ 468:	ec06                	sd	ra,24(sp)
+ 46a:	e822                	sd	s0,16(sp)
+ 46c:	1000                	addi	s0,sp,32
+ 46e:	feb407a3          	sb	a1,-17(s0)
+ 472:	4605                	li	a2,1
+ 474:	fef40593          	addi	a1,s0,-17
+ 478:	f6fff0ef          	jal	3e6 <write>
+ 47c:	60e2                	ld	ra,24(sp)
+ 47e:	6442                	ld	s0,16(sp)
+ 480:	6105                	addi	sp,sp,32
+ 482:	8082                	ret
+
+0000000000000484 <printint>:
+ 484:	7139                	addi	sp,sp,-64
+ 486:	fc06                	sd	ra,56(sp)
+ 488:	f822                	sd	s0,48(sp)
+ 48a:	f426                	sd	s1,40(sp)
+ 48c:	0080                	addi	s0,sp,64
+ 48e:	84aa                	mv	s1,a0
+ 490:	c299                	beqz	a3,496 <printint+0x12>
+ 492:	0805c963          	bltz	a1,524 <printint+0xa0>
+ 496:	2581                	sext.w	a1,a1
+ 498:	4881                	li	a7,0
+ 49a:	fc040693          	addi	a3,s0,-64
+ 49e:	4701                	li	a4,0
+ 4a0:	2601                	sext.w	a2,a2
+ 4a2:	00000517          	auipc	a0,0x0
+ 4a6:	53e50513          	addi	a0,a0,1342 # 9e0 <digits>
+ 4aa:	883a                	mv	a6,a4
+ 4ac:	2705                	addiw	a4,a4,1
+ 4ae:	02c5f7bb          	remuw	a5,a1,a2
+ 4b2:	1782                	slli	a5,a5,0x20
+ 4b4:	9381                	srli	a5,a5,0x20
+ 4b6:	97aa                	add	a5,a5,a0
+ 4b8:	0007c783          	lbu	a5,0(a5)
+ 4bc:	00f68023          	sb	a5,0(a3)
+ 4c0:	0005879b          	sext.w	a5,a1
+ 4c4:	02c5d5bb          	divuw	a1,a1,a2
+ 4c8:	0685                	addi	a3,a3,1
+ 4ca:	fec7f0e3          	bgeu	a5,a2,4aa <printint+0x26>
+ 4ce:	00088c63          	beqz	a7,4e6 <printint+0x62>
+ 4d2:	fd070793          	addi	a5,a4,-48
+ 4d6:	00878733          	add	a4,a5,s0
+ 4da:	02d00793          	li	a5,45
+ 4de:	fef70823          	sb	a5,-16(a4)
+ 4e2:	0028071b          	addiw	a4,a6,2
+ 4e6:	02e05a63          	blez	a4,51a <printint+0x96>
+ 4ea:	f04a                	sd	s2,32(sp)
+ 4ec:	ec4e                	sd	s3,24(sp)
+ 4ee:	fc040793          	addi	a5,s0,-64
+ 4f2:	00e78933          	add	s2,a5,a4
+ 4f6:	fff78993          	addi	s3,a5,-1
+ 4fa:	99ba                	add	s3,s3,a4
+ 4fc:	377d                	addiw	a4,a4,-1
+ 4fe:	1702                	slli	a4,a4,0x20
+ 500:	9301                	srli	a4,a4,0x20
+ 502:	40e989b3          	sub	s3,s3,a4
+ 506:	fff94583          	lbu	a1,-1(s2)
+ 50a:	8526                	mv	a0,s1
+ 50c:	f5bff0ef          	jal	466 <putc>
+ 510:	197d                	addi	s2,s2,-1
+ 512:	ff391ae3          	bne	s2,s3,506 <printint+0x82>
+ 516:	7902                	ld	s2,32(sp)
+ 518:	69e2                	ld	s3,24(sp)
+ 51a:	70e2                	ld	ra,56(sp)
+ 51c:	7442                	ld	s0,48(sp)
+ 51e:	74a2                	ld	s1,40(sp)
+ 520:	6121                	addi	sp,sp,64
+ 522:	8082                	ret
+ 524:	40b005bb          	negw	a1,a1
+ 528:	4885                	li	a7,1
+ 52a:	bf85                	j	49a <printint+0x16>
+
+000000000000052c <vprintf>:
+ 52c:	711d                	addi	sp,sp,-96
+ 52e:	ec86                	sd	ra,88(sp)
+ 530:	e8a2                	sd	s0,80(sp)
+ 532:	e0ca                	sd	s2,64(sp)
+ 534:	1080                	addi	s0,sp,96
+ 536:	0005c903          	lbu	s2,0(a1)
+ 53a:	26090863          	beqz	s2,7aa <vprintf+0x27e>
+ 53e:	e4a6                	sd	s1,72(sp)
+ 540:	fc4e                	sd	s3,56(sp)
+ 542:	f852                	sd	s4,48(sp)
+ 544:	f456                	sd	s5,40(sp)
+ 546:	f05a                	sd	s6,32(sp)
+ 548:	ec5e                	sd	s7,24(sp)
+ 54a:	e862                	sd	s8,16(sp)
+ 54c:	e466                	sd	s9,8(sp)
+ 54e:	8b2a                	mv	s6,a0
+ 550:	8a2e                	mv	s4,a1
+ 552:	8bb2                	mv	s7,a2
+ 554:	4981                	li	s3,0
+ 556:	4481                	li	s1,0
+ 558:	4701                	li	a4,0
+ 55a:	02500a93          	li	s5,37
+ 55e:	06400c13          	li	s8,100
+ 562:	06c00c93          	li	s9,108
+ 566:	a005                	j	586 <vprintf+0x5a>
+ 568:	85ca                	mv	a1,s2
+ 56a:	855a                	mv	a0,s6
+ 56c:	efbff0ef          	jal	466 <putc>
+ 570:	a019                	j	576 <vprintf+0x4a>
+ 572:	03598263          	beq	s3,s5,596 <vprintf+0x6a>
+ 576:	2485                	addiw	s1,s1,1
+ 578:	8726                	mv	a4,s1
+ 57a:	009a07b3          	add	a5,s4,s1
+ 57e:	0007c903          	lbu	s2,0(a5)
+ 582:	20090c63          	beqz	s2,79a <vprintf+0x26e>
+ 586:	0009079b          	sext.w	a5,s2
+ 58a:	fe0994e3          	bnez	s3,572 <vprintf+0x46>
+ 58e:	fd579de3          	bne	a5,s5,568 <vprintf+0x3c>
+ 592:	89be                	mv	s3,a5
+ 594:	b7cd                	j	576 <vprintf+0x4a>
+ 596:	00ea06b3          	add	a3,s4,a4
+ 59a:	0016c683          	lbu	a3,1(a3)
+ 59e:	8636                	mv	a2,a3
+ 5a0:	c681                	beqz	a3,5a8 <vprintf+0x7c>
+ 5a2:	9752                	add	a4,a4,s4
+ 5a4:	00274603          	lbu	a2,2(a4)
+ 5a8:	03878f63          	beq	a5,s8,5e6 <vprintf+0xba>
+ 5ac:	05978963          	beq	a5,s9,5fe <vprintf+0xd2>
+ 5b0:	07500713          	li	a4,117
+ 5b4:	0ee78363          	beq	a5,a4,69a <vprintf+0x16e>
+ 5b8:	07800713          	li	a4,120
+ 5bc:	12e78563          	beq	a5,a4,6e6 <vprintf+0x1ba>
+ 5c0:	07000713          	li	a4,112
+ 5c4:	14e78a63          	beq	a5,a4,718 <vprintf+0x1ec>
+ 5c8:	07300713          	li	a4,115
+ 5cc:	18e78a63          	beq	a5,a4,760 <vprintf+0x234>
+ 5d0:	02500713          	li	a4,37
+ 5d4:	04e79563          	bne	a5,a4,61e <vprintf+0xf2>
+ 5d8:	02500593          	li	a1,37
+ 5dc:	855a                	mv	a0,s6
+ 5de:	e89ff0ef          	jal	466 <putc>
+ 5e2:	4981                	li	s3,0
+ 5e4:	bf49                	j	576 <vprintf+0x4a>
+ 5e6:	008b8913          	addi	s2,s7,8
+ 5ea:	4685                	li	a3,1
+ 5ec:	4629                	li	a2,10
+ 5ee:	000ba583          	lw	a1,0(s7)
+ 5f2:	855a                	mv	a0,s6
+ 5f4:	e91ff0ef          	jal	484 <printint>
+ 5f8:	8bca                	mv	s7,s2
+ 5fa:	4981                	li	s3,0
+ 5fc:	bfad                	j	576 <vprintf+0x4a>
+ 5fe:	06400793          	li	a5,100
+ 602:	02f68963          	beq	a3,a5,634 <vprintf+0x108>
+ 606:	06c00793          	li	a5,108
+ 60a:	04f68263          	beq	a3,a5,64e <vprintf+0x122>
+ 60e:	07500793          	li	a5,117
+ 612:	0af68063          	beq	a3,a5,6b2 <vprintf+0x186>
+ 616:	07800793          	li	a5,120
+ 61a:	0ef68263          	beq	a3,a5,6fe <vprintf+0x1d2>
+ 61e:	02500593          	li	a1,37
+ 622:	855a                	mv	a0,s6
+ 624:	e43ff0ef          	jal	466 <putc>
+ 628:	85ca                	mv	a1,s2
+ 62a:	855a                	mv	a0,s6
+ 62c:	e3bff0ef          	jal	466 <putc>
+ 630:	4981                	li	s3,0
+ 632:	b791                	j	576 <vprintf+0x4a>
+ 634:	008b8913          	addi	s2,s7,8
+ 638:	4685                	li	a3,1
+ 63a:	4629                	li	a2,10
+ 63c:	000ba583          	lw	a1,0(s7)
+ 640:	855a                	mv	a0,s6
+ 642:	e43ff0ef          	jal	484 <printint>
+ 646:	2485                	addiw	s1,s1,1
+ 648:	8bca                	mv	s7,s2
+ 64a:	4981                	li	s3,0
+ 64c:	b72d                	j	576 <vprintf+0x4a>
+ 64e:	06400793          	li	a5,100
+ 652:	02f60763          	beq	a2,a5,680 <vprintf+0x154>
+ 656:	07500793          	li	a5,117
+ 65a:	06f60963          	beq	a2,a5,6cc <vprintf+0x1a0>
+ 65e:	07800793          	li	a5,120
+ 662:	faf61ee3          	bne	a2,a5,61e <vprintf+0xf2>
+ 666:	008b8913          	addi	s2,s7,8
+ 66a:	4681                	li	a3,0
+ 66c:	4641                	li	a2,16
+ 66e:	000ba583          	lw	a1,0(s7)
+ 672:	855a                	mv	a0,s6
+ 674:	e11ff0ef          	jal	484 <printint>
+ 678:	2489                	addiw	s1,s1,2
+ 67a:	8bca                	mv	s7,s2
+ 67c:	4981                	li	s3,0
+ 67e:	bde5                	j	576 <vprintf+0x4a>
+ 680:	008b8913          	addi	s2,s7,8
+ 684:	4685                	li	a3,1
+ 686:	4629                	li	a2,10
+ 688:	000ba583          	lw	a1,0(s7)
+ 68c:	855a                	mv	a0,s6
+ 68e:	df7ff0ef          	jal	484 <printint>
+ 692:	2489                	addiw	s1,s1,2
+ 694:	8bca                	mv	s7,s2
+ 696:	4981                	li	s3,0
+ 698:	bdf9                	j	576 <vprintf+0x4a>
+ 69a:	008b8913          	addi	s2,s7,8
+ 69e:	4681                	li	a3,0
+ 6a0:	4629                	li	a2,10
+ 6a2:	000ba583          	lw	a1,0(s7)
+ 6a6:	855a                	mv	a0,s6
+ 6a8:	dddff0ef          	jal	484 <printint>
+ 6ac:	8bca                	mv	s7,s2
+ 6ae:	4981                	li	s3,0
+ 6b0:	b5d9                	j	576 <vprintf+0x4a>
+ 6b2:	008b8913          	addi	s2,s7,8
+ 6b6:	4681                	li	a3,0
+ 6b8:	4629                	li	a2,10
+ 6ba:	000ba583          	lw	a1,0(s7)
+ 6be:	855a                	mv	a0,s6
+ 6c0:	dc5ff0ef          	jal	484 <printint>
+ 6c4:	2485                	addiw	s1,s1,1
+ 6c6:	8bca                	mv	s7,s2
+ 6c8:	4981                	li	s3,0
+ 6ca:	b575                	j	576 <vprintf+0x4a>
+ 6cc:	008b8913          	addi	s2,s7,8
+ 6d0:	4681                	li	a3,0
+ 6d2:	4629                	li	a2,10
+ 6d4:	000ba583          	lw	a1,0(s7)
+ 6d8:	855a                	mv	a0,s6
+ 6da:	dabff0ef          	jal	484 <printint>
+ 6de:	2489                	addiw	s1,s1,2
+ 6e0:	8bca                	mv	s7,s2
+ 6e2:	4981                	li	s3,0
+ 6e4:	bd49                	j	576 <vprintf+0x4a>
+ 6e6:	008b8913          	addi	s2,s7,8
+ 6ea:	4681                	li	a3,0
+ 6ec:	4641                	li	a2,16
+ 6ee:	000ba583          	lw	a1,0(s7)
+ 6f2:	855a                	mv	a0,s6
+ 6f4:	d91ff0ef          	jal	484 <printint>
+ 6f8:	8bca                	mv	s7,s2
+ 6fa:	4981                	li	s3,0
+ 6fc:	bdad                	j	576 <vprintf+0x4a>
+ 6fe:	008b8913          	addi	s2,s7,8
+ 702:	4681                	li	a3,0
+ 704:	4641                	li	a2,16
+ 706:	000ba583          	lw	a1,0(s7)
+ 70a:	855a                	mv	a0,s6
+ 70c:	d79ff0ef          	jal	484 <printint>
+ 710:	2485                	addiw	s1,s1,1
+ 712:	8bca                	mv	s7,s2
+ 714:	4981                	li	s3,0
+ 716:	b585                	j	576 <vprintf+0x4a>
+ 718:	e06a                	sd	s10,0(sp)
+ 71a:	008b8d13          	addi	s10,s7,8
+ 71e:	000bb983          	ld	s3,0(s7)
+ 722:	03000593          	li	a1,48
+ 726:	855a                	mv	a0,s6
+ 728:	d3fff0ef          	jal	466 <putc>
+ 72c:	07800593          	li	a1,120
+ 730:	855a                	mv	a0,s6
+ 732:	d35ff0ef          	jal	466 <putc>
+ 736:	4941                	li	s2,16
+ 738:	00000b97          	auipc	s7,0x0
+ 73c:	2a8b8b93          	addi	s7,s7,680 # 9e0 <digits>
+ 740:	03c9d793          	srli	a5,s3,0x3c
+ 744:	97de                	add	a5,a5,s7
+ 746:	0007c583          	lbu	a1,0(a5)
+ 74a:	855a                	mv	a0,s6
+ 74c:	d1bff0ef          	jal	466 <putc>
+ 750:	0992                	slli	s3,s3,0x4
+ 752:	397d                	addiw	s2,s2,-1
+ 754:	fe0916e3          	bnez	s2,740 <vprintf+0x214>
+ 758:	8bea                	mv	s7,s10
+ 75a:	4981                	li	s3,0
+ 75c:	6d02                	ld	s10,0(sp)
+ 75e:	bd21                	j	576 <vprintf+0x4a>
+ 760:	008b8993          	addi	s3,s7,8
+ 764:	000bb903          	ld	s2,0(s7)
+ 768:	00090f63          	beqz	s2,786 <vprintf+0x25a>
+ 76c:	00094583          	lbu	a1,0(s2)
+ 770:	c195                	beqz	a1,794 <vprintf+0x268>
+ 772:	855a                	mv	a0,s6
+ 774:	cf3ff0ef          	jal	466 <putc>
+ 778:	0905                	addi	s2,s2,1
+ 77a:	00094583          	lbu	a1,0(s2)
+ 77e:	f9f5                	bnez	a1,772 <vprintf+0x246>
+ 780:	8bce                	mv	s7,s3
+ 782:	4981                	li	s3,0
+ 784:	bbcd                	j	576 <vprintf+0x4a>
+ 786:	00000917          	auipc	s2,0x0
+ 78a:	25290913          	addi	s2,s2,594 # 9d8 <malloc+0x146>
+ 78e:	02800593          	li	a1,40
+ 792:	b7c5                	j	772 <vprintf+0x246>
+ 794:	8bce                	mv	s7,s3
+ 796:	4981                	li	s3,0
+ 798:	bbf9                	j	576 <vprintf+0x4a>
+ 79a:	64a6                	ld	s1,72(sp)
+ 79c:	79e2                	ld	s3,56(sp)
+ 79e:	7a42                	ld	s4,48(sp)
+ 7a0:	7aa2                	ld	s5,40(sp)
+ 7a2:	7b02                	ld	s6,32(sp)
+ 7a4:	6be2                	ld	s7,24(sp)
+ 7a6:	6c42                	ld	s8,16(sp)
+ 7a8:	6ca2                	ld	s9,8(sp)
+ 7aa:	60e6                	ld	ra,88(sp)
+ 7ac:	6446                	ld	s0,80(sp)
+ 7ae:	6906                	ld	s2,64(sp)
+ 7b0:	6125                	addi	sp,sp,96
+ 7b2:	8082                	ret
+
+00000000000007b4 <fprintf>:
+ 7b4:	715d                	addi	sp,sp,-80
+ 7b6:	ec06                	sd	ra,24(sp)
+ 7b8:	e822                	sd	s0,16(sp)
+ 7ba:	1000                	addi	s0,sp,32
+ 7bc:	e010                	sd	a2,0(s0)
+ 7be:	e414                	sd	a3,8(s0)
+ 7c0:	e818                	sd	a4,16(s0)
+ 7c2:	ec1c                	sd	a5,24(s0)
+ 7c4:	03043023          	sd	a6,32(s0)
+ 7c8:	03143423          	sd	a7,40(s0)
+ 7cc:	fe843423          	sd	s0,-24(s0)
+ 7d0:	8622                	mv	a2,s0
+ 7d2:	d5bff0ef          	jal	52c <vprintf>
+ 7d6:	60e2                	ld	ra,24(sp)
+ 7d8:	6442                	ld	s0,16(sp)
+ 7da:	6161                	addi	sp,sp,80
+ 7dc:	8082                	ret
+
+00000000000007de <printf>:
+ 7de:	711d                	addi	sp,sp,-96
+ 7e0:	ec06                	sd	ra,24(sp)
+ 7e2:	e822                	sd	s0,16(sp)
+ 7e4:	1000                	addi	s0,sp,32
+ 7e6:	e40c                	sd	a1,8(s0)
+ 7e8:	e810                	sd	a2,16(s0)
+ 7ea:	ec14                	sd	a3,24(s0)
+ 7ec:	f018                	sd	a4,32(s0)
+ 7ee:	f41c                	sd	a5,40(s0)
+ 7f0:	03043823          	sd	a6,48(s0)
+ 7f4:	03143c23          	sd	a7,56(s0)
+ 7f8:	00840613          	addi	a2,s0,8
+ 7fc:	fec43423          	sd	a2,-24(s0)
+ 800:	85aa                	mv	a1,a0
+ 802:	4505                	li	a0,1
+ 804:	d29ff0ef          	jal	52c <vprintf>
+ 808:	60e2                	ld	ra,24(sp)
+ 80a:	6442                	ld	s0,16(sp)
+ 80c:	6125                	addi	sp,sp,96
+ 80e:	8082                	ret
+
+0000000000000810 <free>:
+ 810:	1141                	addi	sp,sp,-16
+ 812:	e422                	sd	s0,8(sp)
+ 814:	0800                	addi	s0,sp,16
+ 816:	ff050693          	addi	a3,a0,-16
+ 81a:	00000797          	auipc	a5,0x0
+ 81e:	7e67b783          	ld	a5,2022(a5) # 1000 <freep>
+ 822:	a02d                	j	84c <free+0x3c>
+ 824:	4618                	lw	a4,8(a2)
+ 826:	9f2d                	addw	a4,a4,a1
+ 828:	fee52c23          	sw	a4,-8(a0)
+ 82c:	6398                	ld	a4,0(a5)
+ 82e:	6310                	ld	a2,0(a4)
+ 830:	a83d                	j	86e <free+0x5e>
+ 832:	ff852703          	lw	a4,-8(a0)
+ 836:	9f31                	addw	a4,a4,a2
+ 838:	c798                	sw	a4,8(a5)
+ 83a:	ff053683          	ld	a3,-16(a0)
+ 83e:	a091                	j	882 <free+0x72>
+ 840:	6398                	ld	a4,0(a5)
+ 842:	00e7e463          	bltu	a5,a4,84a <free+0x3a>
+ 846:	00e6ea63          	bltu	a3,a4,85a <free+0x4a>
+ 84a:	87ba                	mv	a5,a4
+ 84c:	fed7fae3          	bgeu	a5,a3,840 <free+0x30>
+ 850:	6398                	ld	a4,0(a5)
+ 852:	00e6e463          	bltu	a3,a4,85a <free+0x4a>
+ 856:	fee7eae3          	bltu	a5,a4,84a <free+0x3a>
+ 85a:	ff852583          	lw	a1,-8(a0)
+ 85e:	6390                	ld	a2,0(a5)
+ 860:	02059813          	slli	a6,a1,0x20
+ 864:	01c85713          	srli	a4,a6,0x1c
+ 868:	9736                	add	a4,a4,a3
+ 86a:	fae60de3          	beq	a2,a4,824 <free+0x14>
+ 86e:	fec53823          	sd	a2,-16(a0)
+ 872:	4790                	lw	a2,8(a5)
+ 874:	02061593          	slli	a1,a2,0x20
+ 878:	01c5d713          	srli	a4,a1,0x1c
+ 87c:	973e                	add	a4,a4,a5
+ 87e:	fae68ae3          	beq	a3,a4,832 <free+0x22>
+ 882:	e394                	sd	a3,0(a5)
+ 884:	00000717          	auipc	a4,0x0
+ 888:	76f73e23          	sd	a5,1916(a4) # 1000 <freep>
+ 88c:	6422                	ld	s0,8(sp)
+ 88e:	0141                	addi	sp,sp,16
+ 890:	8082                	ret
+
+0000000000000892 <malloc>:
+ 892:	7139                	addi	sp,sp,-64
+ 894:	fc06                	sd	ra,56(sp)
+ 896:	f822                	sd	s0,48(sp)
+ 898:	f426                	sd	s1,40(sp)
+ 89a:	ec4e                	sd	s3,24(sp)
+ 89c:	0080                	addi	s0,sp,64
+ 89e:	02051493          	slli	s1,a0,0x20
+ 8a2:	9081                	srli	s1,s1,0x20
+ 8a4:	04bd                	addi	s1,s1,15
+ 8a6:	8091                	srli	s1,s1,0x4
+ 8a8:	0014899b          	addiw	s3,s1,1
+ 8ac:	0485                	addi	s1,s1,1
+ 8ae:	00000517          	auipc	a0,0x0
+ 8b2:	75253503          	ld	a0,1874(a0) # 1000 <freep>
+ 8b6:	c915                	beqz	a0,8ea <malloc+0x58>
+ 8b8:	611c                	ld	a5,0(a0)
+ 8ba:	4798                	lw	a4,8(a5)
+ 8bc:	08977a63          	bgeu	a4,s1,950 <malloc+0xbe>
+ 8c0:	f04a                	sd	s2,32(sp)
+ 8c2:	e852                	sd	s4,16(sp)
+ 8c4:	e456                	sd	s5,8(sp)
+ 8c6:	e05a                	sd	s6,0(sp)
+ 8c8:	8a4e                	mv	s4,s3
+ 8ca:	0009871b          	sext.w	a4,s3
+ 8ce:	6685                	lui	a3,0x1
+ 8d0:	00d77363          	bgeu	a4,a3,8d6 <malloc+0x44>
+ 8d4:	6a05                	lui	s4,0x1
+ 8d6:	000a0b1b          	sext.w	s6,s4
+ 8da:	004a1a1b          	slliw	s4,s4,0x4
+ 8de:	00000917          	auipc	s2,0x0
+ 8e2:	72290913          	addi	s2,s2,1826 # 1000 <freep>
+ 8e6:	5afd                	li	s5,-1
+ 8e8:	a081                	j	928 <malloc+0x96>
+ 8ea:	f04a                	sd	s2,32(sp)
+ 8ec:	e852                	sd	s4,16(sp)
+ 8ee:	e456                	sd	s5,8(sp)
+ 8f0:	e05a                	sd	s6,0(sp)
+ 8f2:	00001797          	auipc	a5,0x1
+ 8f6:	91e78793          	addi	a5,a5,-1762 # 1210 <base>
+ 8fa:	00000717          	auipc	a4,0x0
+ 8fe:	70f73323          	sd	a5,1798(a4) # 1000 <freep>
+ 902:	e39c                	sd	a5,0(a5)
+ 904:	0007a423          	sw	zero,8(a5)
+ 908:	b7c1                	j	8c8 <malloc+0x36>
+ 90a:	6398                	ld	a4,0(a5)
+ 90c:	e118                	sd	a4,0(a0)
+ 90e:	a8a9                	j	968 <malloc+0xd6>
+ 910:	01652423          	sw	s6,8(a0)
+ 914:	0541                	addi	a0,a0,16
+ 916:	efbff0ef          	jal	810 <free>
+ 91a:	00093503          	ld	a0,0(s2)
+ 91e:	c12d                	beqz	a0,980 <malloc+0xee>
+ 920:	611c                	ld	a5,0(a0)
+ 922:	4798                	lw	a4,8(a5)
+ 924:	02977263          	bgeu	a4,s1,948 <malloc+0xb6>
+ 928:	00093703          	ld	a4,0(s2)
+ 92c:	853e                	mv	a0,a5
+ 92e:	fef719e3          	bne	a4,a5,920 <malloc+0x8e>
+ 932:	8552                	mv	a0,s4
+ 934:	b1bff0ef          	jal	44e <sbrk>
+ 938:	fd551ce3          	bne	a0,s5,910 <malloc+0x7e>
+ 93c:	4501                	li	a0,0
+ 93e:	7902                	ld	s2,32(sp)
+ 940:	6a42                	ld	s4,16(sp)
+ 942:	6aa2                	ld	s5,8(sp)
+ 944:	6b02                	ld	s6,0(sp)
+ 946:	a03d                	j	974 <malloc+0xe2>
+ 948:	7902                	ld	s2,32(sp)
+ 94a:	6a42                	ld	s4,16(sp)
+ 94c:	6aa2                	ld	s5,8(sp)
+ 94e:	6b02                	ld	s6,0(sp)
+ 950:	fae48de3          	beq	s1,a4,90a <malloc+0x78>
+ 954:	4137073b          	subw	a4,a4,s3
+ 958:	c798                	sw	a4,8(a5)
+ 95a:	02071693          	slli	a3,a4,0x20
+ 95e:	01c6d713          	srli	a4,a3,0x1c
+ 962:	97ba                	add	a5,a5,a4
+ 964:	0137a423          	sw	s3,8(a5)
+ 968:	00000717          	auipc	a4,0x0
+ 96c:	68a73c23          	sd	a0,1688(a4) # 1000 <freep>
+ 970:	01078513          	addi	a0,a5,16
+ 974:	70e2                	ld	ra,56(sp)
+ 976:	7442                	ld	s0,48(sp)
+ 978:	74a2                	ld	s1,40(sp)
+ 97a:	69e2                	ld	s3,24(sp)
+ 97c:	6121                	addi	sp,sp,64
+ 97e:	8082                	ret
+ 980:	7902                	ld	s2,32(sp)
+ 982:	6a42                	ld	s4,16(sp)
+ 984:	6aa2                	ld	s5,8(sp)
+ 986:	6b02                	ld	s6,0(sp)
+ 988:	b7f5                	j	974 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/wc.c b/xv6-labs-2024/user/wc.c
new file mode 100644
index 0000000..d8f3b2a
--- /dev/null
+++ b/xv6-labs-2024/user/wc.c
@@ -0,0 +1,55 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "kernel/fcntl.h"
+#include "user/user.h"
+
+char buf[512];
+
+void
+wc(int fd, char *name)
+{
+  int i, n;
+  int l, w, c, inword;
+
+  l = w = c = 0;
+  inword = 0;
+  while((n = read(fd, buf, sizeof(buf))) > 0){
+    for(i=0; i<n; i++){
+      c++;
+      if(buf[i] == '\n')
+        l++;
+      if(strchr(" \r\t\n\v", buf[i]))
+        inword = 0;
+      else if(!inword){
+        w++;
+        inword = 1;
+      }
+    }
+  }
+  if(n < 0){
+    printf("wc: read error\n");
+    exit(1);
+  }
+  printf("%d %d %d %s\n", l, w, c, name);
+}
+
+int
+main(int argc, char *argv[])
+{
+  int fd, i;
+
+  if(argc <= 1){
+    wc(0, "");
+    exit(0);
+  }
+
+  for(i = 1; i < argc; i++){
+    if((fd = open(argv[i], O_RDONLY)) < 0){
+      printf("wc: cannot open %s\n", argv[i]);
+      exit(1);
+    }
+    wc(fd, argv[i]);
+    close(fd);
+  }
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/wc.d b/xv6-labs-2024/user/wc.d
new file mode 100644
index 0000000..46d2d3a
--- /dev/null
+++ b/xv6-labs-2024/user/wc.d
@@ -0,0 +1,2 @@
+user/wc.o: user/wc.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h kernel/fcntl.h user/user.h
diff --git a/xv6-labs-2024/user/wc.o b/xv6-labs-2024/user/wc.o
new file mode 100644
index 0000000..a28885e
Binary files /dev/null and b/xv6-labs-2024/user/wc.o differ
diff --git a/xv6-labs-2024/user/wc.sym b/xv6-labs-2024/user/wc.sym
new file mode 100644
index 0000000..927a695
--- /dev/null
+++ b/xv6-labs-2024/user/wc.sym
@@ -0,0 +1,65 @@
+0000000000000000 .text
+0000000000000990 .rodata
+00000000000009f8 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 wc.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000466 putc
+0000000000000484 printint
+00000000000009e0 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001210 base
+000000000000016e strcpy
+00000000000007de printf
+0000000000000318 memmove
+000000000000040e mknod
+0000000000000226 gets
+0000000000000446 getpid
+00000000000003aa memcpy
+0000000000000892 malloc
+0000000000000456 sleep
+00000000000003d6 pipe
+00000000000003e6 write
+000000000000041e fstat
+00000000000007b4 fprintf
+00000000000003f6 kill
+000000000000052c vprintf
+0000000000000436 chdir
+00000000000003fe exec
+00000000000003ce wait
+00000000000003de read
+0000000000000416 unlink
+0000000000000000 wc
+0000000000000370 memcmp
+00000000000003be fork
+000000000000044e sbrk
+000000000000045e uptime
+00000000000001e0 memset
+00000000000000da main
+000000000000018a strcmp
+000000000000043e dup
+0000000000001010 buf
+0000000000000296 stat
+0000000000000426 link
+00000000000003c6 exit
+000000000000015c start
+00000000000002d0 atoi
+00000000000001b6 strlen
+0000000000000406 open
+0000000000000202 strchr
+000000000000042e mkdir
+00000000000003ee close
+0000000000000810 free
diff --git a/xv6-labs-2024/user/xargs.asm b/xv6-labs-2024/user/xargs.asm
new file mode 100644
index 0000000..07b96d2
--- /dev/null
+++ b/xv6-labs-2024/user/xargs.asm
@@ -0,0 +1,1409 @@
+
+user/_xargs:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <getcmd>:
+#include "user/user.h"
+#include "kernel/param.h"
+#include "kernel/fcntl.h"
+
+// Hàm để đọc lệnh từ stdin
+int getcmd(char* buf, int nbuf) {
+   0:	1101                	addi	sp,sp,-32
+   2:	ec06                	sd	ra,24(sp)
+   4:	e822                	sd	s0,16(sp)
+   6:	e426                	sd	s1,8(sp)
+   8:	e04a                	sd	s2,0(sp)
+   a:	1000                	addi	s0,sp,32
+   c:	892a                	mv	s2,a0
+   e:	84ae                	mv	s1,a1
+  memset(buf, 0, nbuf);// Xóa bộ nhớ đệm
+  10:	862e                	mv	a2,a1
+  12:	4581                	li	a1,0
+  14:	2de000ef          	jal	2f2 <memset>
+  if (read(0, buf, nbuf) <= 0) 
+  18:	8626                	mv	a2,s1
+  1a:	85ca                	mv	a1,s2
+  1c:	4501                	li	a0,0
+  1e:	4d2000ef          	jal	4f0 <read>
+  22:	00152513          	slti	a0,a0,1
+  26:	40a0053b          	negw	a0,a0
+  {  // Đọc từ stdin
+    return -1;
+  }
+  return 0;
+}
+  2a:	2501                	sext.w	a0,a0
+  2c:	60e2                	ld	ra,24(sp)
+  2e:	6442                	ld	s0,16(sp)
+  30:	64a2                	ld	s1,8(sp)
+  32:	6902                	ld	s2,0(sp)
+  34:	6105                	addi	sp,sp,32
+  36:	8082                	ret
+
+0000000000000038 <gettoken>:
+
+// Mảng chứa các kí tự trắng như dấu cách, tab, xuống dòng
+char whitespace[] = " \t\r\n\v";
+
+// Hàm để tách các đối số từ chuỗi
+int gettoken(char** ps, char* es, char** q, char** eq) {
+  38:	7139                	addi	sp,sp,-64
+  3a:	fc06                	sd	ra,56(sp)
+  3c:	f822                	sd	s0,48(sp)
+  3e:	f426                	sd	s1,40(sp)
+  40:	f04a                	sd	s2,32(sp)
+  42:	ec4e                	sd	s3,24(sp)
+  44:	e852                	sd	s4,16(sp)
+  46:	e456                	sd	s5,8(sp)
+  48:	e05a                	sd	s6,0(sp)
+  4a:	0080                	addi	s0,sp,64
+  4c:	8a2a                	mv	s4,a0
+  4e:	892e                	mv	s2,a1
+  50:	8ab2                	mv	s5,a2
+  52:	8b36                	mv	s6,a3
+  char* s; //
+  int ret; 
+  s = *ps; //*ps dùng để giữ vị trí đang xét của chuỗi đầu vào, gán cho s để xử lý tiếp 
+  54:	6104                	ld	s1,0(a0)
+
+  while (s < es && strchr(whitespace, *s))//Bỏ qua các kí tự trắng
+  56:	00001997          	auipc	s3,0x1
+  5a:	faa98993          	addi	s3,s3,-86 # 1000 <whitespace>
+  5e:	00b4fc63          	bgeu	s1,a1,76 <gettoken+0x3e>
+  62:	0004c583          	lbu	a1,0(s1)
+  66:	854e                	mv	a0,s3
+  68:	2ac000ef          	jal	314 <strchr>
+  6c:	c509                	beqz	a0,76 <gettoken+0x3e>
+    s++;
+  6e:	0485                	addi	s1,s1,1
+  while (s < es && strchr(whitespace, *s))//Bỏ qua các kí tự trắng
+  70:	fe9919e3          	bne	s2,s1,62 <gettoken+0x2a>
+  74:	84ca                	mv	s1,s2
+  
+  if (q)
+  76:	000a8463          	beqz	s5,7e <gettoken+0x46>
+    *q = s; // Lưu vị trí bắt đầu của đối số vào con trỏ q
+  7a:	009ab023          	sd	s1,0(s5)
+
+  ret = *s; 
+  switch (*s) {
+  7e:	0004c783          	lbu	a5,0(s1)
+  82:	cb8d                	beqz	a5,b4 <gettoken+0x7c>
+      break;
+      
+    default:// Nếu không phải kí tự trắng
+      ret = 'a';
+
+      while (s < es && !strchr(whitespace, *s)) // Đọc đến khi gặp kí tự trắng
+  84:	00001997          	auipc	s3,0x1
+  88:	f7c98993          	addi	s3,s3,-132 # 1000 <whitespace>
+  8c:	0724f963          	bgeu	s1,s2,fe <gettoken+0xc6>
+  90:	0004c583          	lbu	a1,0(s1)
+  94:	854e                	mv	a0,s3
+  96:	27e000ef          	jal	314 <strchr>
+  9a:	e911                	bnez	a0,ae <gettoken+0x76>
+        s++; 
+  9c:	0485                	addi	s1,s1,1
+      while (s < es && !strchr(whitespace, *s)) // Đọc đến khi gặp kí tự trắng
+  9e:	fe9919e3          	bne	s2,s1,90 <gettoken+0x58>
+
+      break; // Kết thúc
+  }
+  if (eq)
+  a2:	84ca                	mv	s1,s2
+      ret = 'a';
+  a4:	06100a93          	li	s5,97
+  if (eq)
+  a8:	000b1963          	bnez	s6,ba <gettoken+0x82>
+  ac:	a825                	j	e4 <gettoken+0xac>
+      ret = 'a';
+  ae:	06100a93          	li	s5,97
+  b2:	a011                	j	b6 <gettoken+0x7e>
+  ret = *s; 
+  b4:	4a81                	li	s5,0
+  if (eq)
+  b6:	000b0463          	beqz	s6,be <gettoken+0x86>
+    *eq = s; // Lưu vị trí kết thúc của đối số vào con trỏ eq
+  ba:	009b3023          	sd	s1,0(s6)
+
+  while (s < es && strchr(whitespace, *s)) // Bỏ qua các kí tự trắng
+  be:	00001997          	auipc	s3,0x1
+  c2:	f4298993          	addi	s3,s3,-190 # 1000 <whitespace>
+  c6:	0124fc63          	bgeu	s1,s2,de <gettoken+0xa6>
+  ca:	0004c583          	lbu	a1,0(s1)
+  ce:	854e                	mv	a0,s3
+  d0:	244000ef          	jal	314 <strchr>
+  d4:	c519                	beqz	a0,e2 <gettoken+0xaa>
+    s++;
+  d6:	0485                	addi	s1,s1,1
+  while (s < es && strchr(whitespace, *s)) // Bỏ qua các kí tự trắng
+  d8:	fe9919e3          	bne	s2,s1,ca <gettoken+0x92>
+  dc:	a021                	j	e4 <gettoken+0xac>
+  de:	8926                	mv	s2,s1
+  e0:	a011                	j	e4 <gettoken+0xac>
+  e2:	8926                	mv	s2,s1
+
+  *ps = s; // Cập nhật vị trí của con trỏ ps
+  e4:	012a3023          	sd	s2,0(s4)
+  return ret;
+}
+  e8:	8556                	mv	a0,s5
+  ea:	70e2                	ld	ra,56(sp)
+  ec:	7442                	ld	s0,48(sp)
+  ee:	74a2                	ld	s1,40(sp)
+  f0:	7902                	ld	s2,32(sp)
+  f2:	69e2                	ld	s3,24(sp)
+  f4:	6a42                	ld	s4,16(sp)
+  f6:	6aa2                	ld	s5,8(sp)
+  f8:	6b02                	ld	s6,0(sp)
+  fa:	6121                	addi	sp,sp,64
+  fc:	8082                	ret
+      ret = 'a';
+  fe:	06100a93          	li	s5,97
+  if (eq)
+ 102:	fa0b1ce3          	bnez	s6,ba <gettoken+0x82>
+ 106:	8926                	mv	s2,s1
+ 108:	bff1                	j	e4 <gettoken+0xac>
+
+000000000000010a <main>:
+
+//
+int main(int argc, char* argv[]) {
+ 10a:	7165                	addi	sp,sp,-400
+ 10c:	e706                	sd	ra,392(sp)
+ 10e:	e322                	sd	s0,384(sp)
+ 110:	fea6                	sd	s1,376(sp)
+ 112:	faca                	sd	s2,368(sp)
+ 114:	f6ce                	sd	s3,360(sp)
+ 116:	f2d2                	sd	s4,352(sp)
+ 118:	eed6                	sd	s5,344(sp)
+ 11a:	eada                	sd	s6,336(sp)
+ 11c:	e6de                	sd	s7,328(sp)
+ 11e:	e2e2                	sd	s8,320(sp)
+ 120:	fe66                	sd	s9,312(sp)
+ 122:	fa6a                	sd	s10,304(sp)
+ 124:	f66e                	sd	s11,296(sp)
+ 126:	0b00                	addi	s0,sp,400
+  int n=0;
+  int flag = 0;
+  int argstart = 0;
+
+  // Xử lý tùy chọn `-n`
+  for (int i = 1; i < argc; i++) {
+ 128:	4785                	li	a5,1
+ 12a:	06a7d163          	bge	a5,a0,18c <main+0x82>
+ 12e:	89aa                	mv	s3,a0
+ 130:	8a2e                	mv	s4,a1
+ 132:	4485                	li	s1,1
+  int argstart = 0;
+ 134:	4c01                	li	s8,0
+  int flag = 0;
+ 136:	4a81                	li	s5,0
+  int n=0;
+ 138:	4b81                	li	s7,0
+    if (strcmp(argv[i], "-n") == 0 && i + 1 < argc) 
+ 13a:	00001b17          	auipc	s6,0x1
+ 13e:	966b0b13          	addi	s6,s6,-1690 # aa0 <malloc+0xfc>
+    {
+      n = atoi(argv[i + 1]);  // Lấy giá trị sau `-n`
+      flag = 1;
+ 142:	4c85                	li	s9,1
+ 144:	a821                	j	15c <main+0x52>
+      i++;  // Bỏ qua giá trị sau `-n`
+    } 
+    else 
+    {
+      xargs[argstart++] = argv[i];  // Thêm đối số khác vào xargs
+ 146:	003c1793          	slli	a5,s8,0x3
+ 14a:	f9078793          	addi	a5,a5,-112
+ 14e:	97a2                	add	a5,a5,s0
+ 150:	f127b023          	sd	s2,-256(a5)
+ 154:	2c05                	addiw	s8,s8,1
+  for (int i = 1; i < argc; i++) {
+ 156:	2485                	addiw	s1,s1,1
+ 158:	0334dd63          	bge	s1,s3,192 <main+0x88>
+    if (strcmp(argv[i], "-n") == 0 && i + 1 < argc) 
+ 15c:	00349d13          	slli	s10,s1,0x3
+ 160:	01aa07b3          	add	a5,s4,s10
+ 164:	0007b903          	ld	s2,0(a5)
+ 168:	85da                	mv	a1,s6
+ 16a:	854a                	mv	a0,s2
+ 16c:	130000ef          	jal	29c <strcmp>
+ 170:	f979                	bnez	a0,146 <main+0x3c>
+ 172:	00148d9b          	addiw	s11,s1,1
+ 176:	fd3dd8e3          	bge	s11,s3,146 <main+0x3c>
+      n = atoi(argv[i + 1]);  // Lấy giá trị sau `-n`
+ 17a:	9d52                	add	s10,s10,s4
+ 17c:	008d3503          	ld	a0,8(s10)
+ 180:	262000ef          	jal	3e2 <atoi>
+ 184:	8baa                	mv	s7,a0
+      i++;  // Bỏ qua giá trị sau `-n`
+ 186:	84ee                	mv	s1,s11
+      flag = 1;
+ 188:	8ae6                	mv	s5,s9
+      i++;  // Bỏ qua giá trị sau `-n`
+ 18a:	b7f1                	j	156 <main+0x4c>
+  int argstart = 0;
+ 18c:	4c01                	li	s8,0
+  int flag = 0;
+ 18e:	4a81                	li	s5,0
+  int n=0;
+ 190:	4b81                	li	s7,0
+    }
+  }
+
+  static char buf[MAXARG][512];
+  char* q, *eq;
+  int j = argstart;  // Chỉ số bắt đầu để lưu đối số từ input
+ 192:	84e2                	mv	s1,s8
+  int count = 0;  // Đếm số đối số hiện tại
+  int i = 0;
+ 194:	4981                	li	s3,0
+  int count = 0;  // Đếm số đối số hiện tại
+ 196:	4901                	li	s2,0
+  // Đọc input từ stdin
+  while (getcmd(buf[i], sizeof(buf[i])) >= 0) {
+ 198:	00001c97          	auipc	s9,0x1
+ 19c:	e88c8c93          	addi	s9,s9,-376 # 1020 <buf.0>
+      xargs[j++] = q;  // Lưu đối số vào xargs
+      count++;
+      i++;
+
+      // Khi đủ số đối số bằng với giá trị `-n`
+      if (flag==1 && count == n) {
+ 1a0:	4b05                	li	s6,1
+  while (getcmd(buf[i], sizeof(buf[i])) >= 0) {
+ 1a2:	00999a13          	slli	s4,s3,0x9
+ 1a6:	9a66                	add	s4,s4,s9
+ 1a8:	20000593          	li	a1,512
+ 1ac:	8552                	mv	a0,s4
+ 1ae:	e53ff0ef          	jal	0 <getcmd>
+ 1b2:	08054363          	bltz	a0,238 <main+0x12e>
+    char* s = buf[i];
+ 1b6:	e7443c23          	sd	s4,-392(s0)
+    char* es = s + strlen(s);
+ 1ba:	8552                	mv	a0,s4
+ 1bc:	10c000ef          	jal	2c8 <strlen>
+ 1c0:	1502                	slli	a0,a0,0x20
+ 1c2:	9101                	srli	a0,a0,0x20
+ 1c4:	9a2a                	add	s4,s4,a0
+    while (gettoken(&s, es, &q, &eq) != 0) {
+ 1c6:	a819                	j	1dc <main+0xd2>
+
+        // Tạo tiến trình con để thực thi lệnh
+        int pid = fork();
+        if (pid == 0) 
+        {
+          exec(xargs[0], xargs);  // Thực thi lệnh với các đối số
+ 1c8:	e9040593          	addi	a1,s0,-368
+ 1cc:	e9043503          	ld	a0,-368(s0)
+ 1d0:	340000ef          	jal	510 <exec>
+          exit(0);  // Thoát khi kết thúc
+ 1d4:	4501                	li	a0,0
+ 1d6:	302000ef          	jal	4d8 <exit>
+        } 
+        wait(0);  // Chờ tiến trình con
+        // Đặt lại chỉ số `j` và đếm lại số đối số
+        j = argstart;
+        count = 0;
+ 1da:	84be                	mv	s1,a5
+    while (gettoken(&s, es, &q, &eq) != 0) {
+ 1dc:	e8040693          	addi	a3,s0,-384
+ 1e0:	e8840613          	addi	a2,s0,-376
+ 1e4:	85d2                	mv	a1,s4
+ 1e6:	e7840513          	addi	a0,s0,-392
+ 1ea:	e4fff0ef          	jal	38 <gettoken>
+ 1ee:	d955                	beqz	a0,1a2 <main+0x98>
+      *eq = 0;  // Kết thúc chuỗi
+ 1f0:	e8043783          	ld	a5,-384(s0)
+ 1f4:	00078023          	sb	zero,0(a5)
+      xargs[j++] = q;  // Lưu đối số vào xargs
+ 1f8:	0014879b          	addiw	a5,s1,1
+ 1fc:	048e                	slli	s1,s1,0x3
+ 1fe:	f9048713          	addi	a4,s1,-112
+ 202:	008704b3          	add	s1,a4,s0
+ 206:	e8843703          	ld	a4,-376(s0)
+ 20a:	f0e4b023          	sd	a4,-256(s1)
+      count++;
+ 20e:	2905                	addiw	s2,s2,1
+      i++;
+ 210:	2985                	addiw	s3,s3,1
+      if (flag==1 && count == n) {
+ 212:	fd6a94e3          	bne	s5,s6,1da <main+0xd0>
+ 216:	fd7912e3          	bne	s2,s7,1da <main+0xd0>
+        xargs[j] = 0;  // Thiết lập kết thúc mảng đối số
+ 21a:	078e                	slli	a5,a5,0x3
+ 21c:	f9078793          	addi	a5,a5,-112
+ 220:	97a2                	add	a5,a5,s0
+ 222:	f007b023          	sd	zero,-256(a5)
+        int pid = fork();
+ 226:	2aa000ef          	jal	4d0 <fork>
+        if (pid == 0) 
+ 22a:	dd59                	beqz	a0,1c8 <main+0xbe>
+        wait(0);  // Chờ tiến trình con
+ 22c:	4501                	li	a0,0
+ 22e:	2b2000ef          	jal	4e0 <wait>
+        j = argstart;
+ 232:	87e2                	mv	a5,s8
+        count = 0;
+ 234:	4901                	li	s2,0
+ 236:	b755                	j	1da <main+0xd0>
+      }
+    }
+  }
+
+  // Xử lý các đối số còn lại chưa đủ `-n` để thực thi
+  if (count > 0) 
+ 238:	03205863          	blez	s2,268 <main+0x15e>
+  {
+    xargs[j] = 0;  // Thiết lập kết thúc mảng đối số
+ 23c:	00349793          	slli	a5,s1,0x3
+ 240:	f9078793          	addi	a5,a5,-112
+ 244:	97a2                	add	a5,a5,s0
+ 246:	f007b023          	sd	zero,-256(a5)
+    int pid = fork();
+ 24a:	286000ef          	jal	4d0 <fork>
+    if (pid == 0) 
+ 24e:	e911                	bnez	a0,262 <main+0x158>
+    {
+      exec(xargs[0], xargs);  // Thực thi lệnh với các đối số còn lại
+ 250:	e9040593          	addi	a1,s0,-368
+ 254:	e9043503          	ld	a0,-368(s0)
+ 258:	2b8000ef          	jal	510 <exec>
+      exit(0);  // Thoát khi kết thúc
+ 25c:	4501                	li	a0,0
+ 25e:	27a000ef          	jal	4d8 <exit>
+    } 
+    wait(0);  // Chờ tiến trình con
+ 262:	4501                	li	a0,0
+ 264:	27c000ef          	jal	4e0 <wait>
+  }
+  exit(0);
+ 268:	4501                	li	a0,0
+ 26a:	26e000ef          	jal	4d8 <exit>
+
+000000000000026e <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+ 26e:	1141                	addi	sp,sp,-16
+ 270:	e406                	sd	ra,8(sp)
+ 272:	e022                	sd	s0,0(sp)
+ 274:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+ 276:	e95ff0ef          	jal	10a <main>
+  exit(0);
+ 27a:	4501                	li	a0,0
+ 27c:	25c000ef          	jal	4d8 <exit>
+
+0000000000000280 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+ 280:	1141                	addi	sp,sp,-16
+ 282:	e422                	sd	s0,8(sp)
+ 284:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+ 286:	87aa                	mv	a5,a0
+ 288:	0585                	addi	a1,a1,1
+ 28a:	0785                	addi	a5,a5,1
+ 28c:	fff5c703          	lbu	a4,-1(a1)
+ 290:	fee78fa3          	sb	a4,-1(a5)
+ 294:	fb75                	bnez	a4,288 <strcpy+0x8>
+    ;
+  return os;
+}
+ 296:	6422                	ld	s0,8(sp)
+ 298:	0141                	addi	sp,sp,16
+ 29a:	8082                	ret
+
+000000000000029c <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+ 29c:	1141                	addi	sp,sp,-16
+ 29e:	e422                	sd	s0,8(sp)
+ 2a0:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+ 2a2:	00054783          	lbu	a5,0(a0)
+ 2a6:	cb91                	beqz	a5,2ba <strcmp+0x1e>
+ 2a8:	0005c703          	lbu	a4,0(a1)
+ 2ac:	00f71763          	bne	a4,a5,2ba <strcmp+0x1e>
+    p++, q++;
+ 2b0:	0505                	addi	a0,a0,1
+ 2b2:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+ 2b4:	00054783          	lbu	a5,0(a0)
+ 2b8:	fbe5                	bnez	a5,2a8 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+ 2ba:	0005c503          	lbu	a0,0(a1)
+}
+ 2be:	40a7853b          	subw	a0,a5,a0
+ 2c2:	6422                	ld	s0,8(sp)
+ 2c4:	0141                	addi	sp,sp,16
+ 2c6:	8082                	ret
+
+00000000000002c8 <strlen>:
+
+uint
+strlen(const char *s)
+{
+ 2c8:	1141                	addi	sp,sp,-16
+ 2ca:	e422                	sd	s0,8(sp)
+ 2cc:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+ 2ce:	00054783          	lbu	a5,0(a0)
+ 2d2:	cf91                	beqz	a5,2ee <strlen+0x26>
+ 2d4:	0505                	addi	a0,a0,1
+ 2d6:	87aa                	mv	a5,a0
+ 2d8:	86be                	mv	a3,a5
+ 2da:	0785                	addi	a5,a5,1
+ 2dc:	fff7c703          	lbu	a4,-1(a5)
+ 2e0:	ff65                	bnez	a4,2d8 <strlen+0x10>
+ 2e2:	40a6853b          	subw	a0,a3,a0
+ 2e6:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+ 2e8:	6422                	ld	s0,8(sp)
+ 2ea:	0141                	addi	sp,sp,16
+ 2ec:	8082                	ret
+  for(n = 0; s[n]; n++)
+ 2ee:	4501                	li	a0,0
+ 2f0:	bfe5                	j	2e8 <strlen+0x20>
+
+00000000000002f2 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+ 2f2:	1141                	addi	sp,sp,-16
+ 2f4:	e422                	sd	s0,8(sp)
+ 2f6:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+ 2f8:	ca19                	beqz	a2,30e <memset+0x1c>
+ 2fa:	87aa                	mv	a5,a0
+ 2fc:	1602                	slli	a2,a2,0x20
+ 2fe:	9201                	srli	a2,a2,0x20
+ 300:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+ 304:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+ 308:	0785                	addi	a5,a5,1
+ 30a:	fee79de3          	bne	a5,a4,304 <memset+0x12>
+  }
+  return dst;
+}
+ 30e:	6422                	ld	s0,8(sp)
+ 310:	0141                	addi	sp,sp,16
+ 312:	8082                	ret
+
+0000000000000314 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+ 314:	1141                	addi	sp,sp,-16
+ 316:	e422                	sd	s0,8(sp)
+ 318:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+ 31a:	00054783          	lbu	a5,0(a0)
+ 31e:	cb99                	beqz	a5,334 <strchr+0x20>
+    if(*s == c)
+ 320:	00f58763          	beq	a1,a5,32e <strchr+0x1a>
+  for(; *s; s++)
+ 324:	0505                	addi	a0,a0,1
+ 326:	00054783          	lbu	a5,0(a0)
+ 32a:	fbfd                	bnez	a5,320 <strchr+0xc>
+      return (char*)s;
+  return 0;
+ 32c:	4501                	li	a0,0
+}
+ 32e:	6422                	ld	s0,8(sp)
+ 330:	0141                	addi	sp,sp,16
+ 332:	8082                	ret
+  return 0;
+ 334:	4501                	li	a0,0
+ 336:	bfe5                	j	32e <strchr+0x1a>
+
+0000000000000338 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+ 338:	711d                	addi	sp,sp,-96
+ 33a:	ec86                	sd	ra,88(sp)
+ 33c:	e8a2                	sd	s0,80(sp)
+ 33e:	e4a6                	sd	s1,72(sp)
+ 340:	e0ca                	sd	s2,64(sp)
+ 342:	fc4e                	sd	s3,56(sp)
+ 344:	f852                	sd	s4,48(sp)
+ 346:	f456                	sd	s5,40(sp)
+ 348:	f05a                	sd	s6,32(sp)
+ 34a:	ec5e                	sd	s7,24(sp)
+ 34c:	1080                	addi	s0,sp,96
+ 34e:	8baa                	mv	s7,a0
+ 350:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 352:	892a                	mv	s2,a0
+ 354:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 356:	4aa9                	li	s5,10
+ 358:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 35a:	89a6                	mv	s3,s1
+ 35c:	2485                	addiw	s1,s1,1
+ 35e:	0344d663          	bge	s1,s4,38a <gets+0x52>
+    cc = read(0, &c, 1);
+ 362:	4605                	li	a2,1
+ 364:	faf40593          	addi	a1,s0,-81
+ 368:	4501                	li	a0,0
+ 36a:	186000ef          	jal	4f0 <read>
+    if(cc < 1)
+ 36e:	00a05e63          	blez	a0,38a <gets+0x52>
+    buf[i++] = c;
+ 372:	faf44783          	lbu	a5,-81(s0)
+ 376:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 37a:	01578763          	beq	a5,s5,388 <gets+0x50>
+ 37e:	0905                	addi	s2,s2,1
+ 380:	fd679de3          	bne	a5,s6,35a <gets+0x22>
+    buf[i++] = c;
+ 384:	89a6                	mv	s3,s1
+ 386:	a011                	j	38a <gets+0x52>
+ 388:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 38a:	99de                	add	s3,s3,s7
+ 38c:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 390:	855e                	mv	a0,s7
+ 392:	60e6                	ld	ra,88(sp)
+ 394:	6446                	ld	s0,80(sp)
+ 396:	64a6                	ld	s1,72(sp)
+ 398:	6906                	ld	s2,64(sp)
+ 39a:	79e2                	ld	s3,56(sp)
+ 39c:	7a42                	ld	s4,48(sp)
+ 39e:	7aa2                	ld	s5,40(sp)
+ 3a0:	7b02                	ld	s6,32(sp)
+ 3a2:	6be2                	ld	s7,24(sp)
+ 3a4:	6125                	addi	sp,sp,96
+ 3a6:	8082                	ret
+
+00000000000003a8 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 3a8:	1101                	addi	sp,sp,-32
+ 3aa:	ec06                	sd	ra,24(sp)
+ 3ac:	e822                	sd	s0,16(sp)
+ 3ae:	e04a                	sd	s2,0(sp)
+ 3b0:	1000                	addi	s0,sp,32
+ 3b2:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 3b4:	4581                	li	a1,0
+ 3b6:	162000ef          	jal	518 <open>
+  if(fd < 0)
+ 3ba:	02054263          	bltz	a0,3de <stat+0x36>
+ 3be:	e426                	sd	s1,8(sp)
+ 3c0:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 3c2:	85ca                	mv	a1,s2
+ 3c4:	16c000ef          	jal	530 <fstat>
+ 3c8:	892a                	mv	s2,a0
+  close(fd);
+ 3ca:	8526                	mv	a0,s1
+ 3cc:	134000ef          	jal	500 <close>
+  return r;
+ 3d0:	64a2                	ld	s1,8(sp)
+}
+ 3d2:	854a                	mv	a0,s2
+ 3d4:	60e2                	ld	ra,24(sp)
+ 3d6:	6442                	ld	s0,16(sp)
+ 3d8:	6902                	ld	s2,0(sp)
+ 3da:	6105                	addi	sp,sp,32
+ 3dc:	8082                	ret
+    return -1;
+ 3de:	597d                	li	s2,-1
+ 3e0:	bfcd                	j	3d2 <stat+0x2a>
+
+00000000000003e2 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 3e2:	1141                	addi	sp,sp,-16
+ 3e4:	e422                	sd	s0,8(sp)
+ 3e6:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 3e8:	00054683          	lbu	a3,0(a0)
+ 3ec:	fd06879b          	addiw	a5,a3,-48
+ 3f0:	0ff7f793          	zext.b	a5,a5
+ 3f4:	4625                	li	a2,9
+ 3f6:	02f66863          	bltu	a2,a5,426 <atoi+0x44>
+ 3fa:	872a                	mv	a4,a0
+  n = 0;
+ 3fc:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 3fe:	0705                	addi	a4,a4,1
+ 400:	0025179b          	slliw	a5,a0,0x2
+ 404:	9fa9                	addw	a5,a5,a0
+ 406:	0017979b          	slliw	a5,a5,0x1
+ 40a:	9fb5                	addw	a5,a5,a3
+ 40c:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 410:	00074683          	lbu	a3,0(a4)
+ 414:	fd06879b          	addiw	a5,a3,-48
+ 418:	0ff7f793          	zext.b	a5,a5
+ 41c:	fef671e3          	bgeu	a2,a5,3fe <atoi+0x1c>
+  return n;
+}
+ 420:	6422                	ld	s0,8(sp)
+ 422:	0141                	addi	sp,sp,16
+ 424:	8082                	ret
+  n = 0;
+ 426:	4501                	li	a0,0
+ 428:	bfe5                	j	420 <atoi+0x3e>
+
+000000000000042a <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 42a:	1141                	addi	sp,sp,-16
+ 42c:	e422                	sd	s0,8(sp)
+ 42e:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 430:	02b57463          	bgeu	a0,a1,458 <memmove+0x2e>
+    while(n-- > 0)
+ 434:	00c05f63          	blez	a2,452 <memmove+0x28>
+ 438:	1602                	slli	a2,a2,0x20
+ 43a:	9201                	srli	a2,a2,0x20
+ 43c:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 440:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 442:	0585                	addi	a1,a1,1
+ 444:	0705                	addi	a4,a4,1
+ 446:	fff5c683          	lbu	a3,-1(a1)
+ 44a:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 44e:	fef71ae3          	bne	a4,a5,442 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 452:	6422                	ld	s0,8(sp)
+ 454:	0141                	addi	sp,sp,16
+ 456:	8082                	ret
+    dst += n;
+ 458:	00c50733          	add	a4,a0,a2
+    src += n;
+ 45c:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 45e:	fec05ae3          	blez	a2,452 <memmove+0x28>
+ 462:	fff6079b          	addiw	a5,a2,-1
+ 466:	1782                	slli	a5,a5,0x20
+ 468:	9381                	srli	a5,a5,0x20
+ 46a:	fff7c793          	not	a5,a5
+ 46e:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 470:	15fd                	addi	a1,a1,-1
+ 472:	177d                	addi	a4,a4,-1
+ 474:	0005c683          	lbu	a3,0(a1)
+ 478:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 47c:	fee79ae3          	bne	a5,a4,470 <memmove+0x46>
+ 480:	bfc9                	j	452 <memmove+0x28>
+
+0000000000000482 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 482:	1141                	addi	sp,sp,-16
+ 484:	e422                	sd	s0,8(sp)
+ 486:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 488:	ca05                	beqz	a2,4b8 <memcmp+0x36>
+ 48a:	fff6069b          	addiw	a3,a2,-1
+ 48e:	1682                	slli	a3,a3,0x20
+ 490:	9281                	srli	a3,a3,0x20
+ 492:	0685                	addi	a3,a3,1
+ 494:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 496:	00054783          	lbu	a5,0(a0)
+ 49a:	0005c703          	lbu	a4,0(a1)
+ 49e:	00e79863          	bne	a5,a4,4ae <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 4a2:	0505                	addi	a0,a0,1
+    p2++;
+ 4a4:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 4a6:	fed518e3          	bne	a0,a3,496 <memcmp+0x14>
+  }
+  return 0;
+ 4aa:	4501                	li	a0,0
+ 4ac:	a019                	j	4b2 <memcmp+0x30>
+      return *p1 - *p2;
+ 4ae:	40e7853b          	subw	a0,a5,a4
+}
+ 4b2:	6422                	ld	s0,8(sp)
+ 4b4:	0141                	addi	sp,sp,16
+ 4b6:	8082                	ret
+  return 0;
+ 4b8:	4501                	li	a0,0
+ 4ba:	bfe5                	j	4b2 <memcmp+0x30>
+
+00000000000004bc <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 4bc:	1141                	addi	sp,sp,-16
+ 4be:	e406                	sd	ra,8(sp)
+ 4c0:	e022                	sd	s0,0(sp)
+ 4c2:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 4c4:	f67ff0ef          	jal	42a <memmove>
+}
+ 4c8:	60a2                	ld	ra,8(sp)
+ 4ca:	6402                	ld	s0,0(sp)
+ 4cc:	0141                	addi	sp,sp,16
+ 4ce:	8082                	ret
+
+00000000000004d0 <fork>:
+ 4d0:	4885                	li	a7,1
+ 4d2:	00000073          	ecall
+ 4d6:	8082                	ret
+
+00000000000004d8 <exit>:
+ 4d8:	4889                	li	a7,2
+ 4da:	00000073          	ecall
+ 4de:	8082                	ret
+
+00000000000004e0 <wait>:
+ 4e0:	488d                	li	a7,3
+ 4e2:	00000073          	ecall
+ 4e6:	8082                	ret
+
+00000000000004e8 <pipe>:
+ 4e8:	4891                	li	a7,4
+ 4ea:	00000073          	ecall
+ 4ee:	8082                	ret
+
+00000000000004f0 <read>:
+ 4f0:	4895                	li	a7,5
+ 4f2:	00000073          	ecall
+ 4f6:	8082                	ret
+
+00000000000004f8 <write>:
+ 4f8:	48c1                	li	a7,16
+ 4fa:	00000073          	ecall
+ 4fe:	8082                	ret
+
+0000000000000500 <close>:
+ 500:	48d5                	li	a7,21
+ 502:	00000073          	ecall
+ 506:	8082                	ret
+
+0000000000000508 <kill>:
+ 508:	4899                	li	a7,6
+ 50a:	00000073          	ecall
+ 50e:	8082                	ret
+
+0000000000000510 <exec>:
+ 510:	489d                	li	a7,7
+ 512:	00000073          	ecall
+ 516:	8082                	ret
+
+0000000000000518 <open>:
+ 518:	48bd                	li	a7,15
+ 51a:	00000073          	ecall
+ 51e:	8082                	ret
+
+0000000000000520 <mknod>:
+ 520:	48c5                	li	a7,17
+ 522:	00000073          	ecall
+ 526:	8082                	ret
+
+0000000000000528 <unlink>:
+ 528:	48c9                	li	a7,18
+ 52a:	00000073          	ecall
+ 52e:	8082                	ret
+
+0000000000000530 <fstat>:
+ 530:	48a1                	li	a7,8
+ 532:	00000073          	ecall
+ 536:	8082                	ret
+
+0000000000000538 <link>:
+ 538:	48cd                	li	a7,19
+ 53a:	00000073          	ecall
+ 53e:	8082                	ret
+
+0000000000000540 <mkdir>:
+ 540:	48d1                	li	a7,20
+ 542:	00000073          	ecall
+ 546:	8082                	ret
+
+0000000000000548 <chdir>:
+ 548:	48a5                	li	a7,9
+ 54a:	00000073          	ecall
+ 54e:	8082                	ret
+
+0000000000000550 <dup>:
+ 550:	48a9                	li	a7,10
+ 552:	00000073          	ecall
+ 556:	8082                	ret
+
+0000000000000558 <getpid>:
+ 558:	48ad                	li	a7,11
+ 55a:	00000073          	ecall
+ 55e:	8082                	ret
+
+0000000000000560 <sbrk>:
+ 560:	48b1                	li	a7,12
+ 562:	00000073          	ecall
+ 566:	8082                	ret
+
+0000000000000568 <sleep>:
+ 568:	48b5                	li	a7,13
+ 56a:	00000073          	ecall
+ 56e:	8082                	ret
+
+0000000000000570 <uptime>:
+ 570:	48b9                	li	a7,14
+ 572:	00000073          	ecall
+ 576:	8082                	ret
+
+0000000000000578 <putc>:
+ 578:	1101                	addi	sp,sp,-32
+ 57a:	ec06                	sd	ra,24(sp)
+ 57c:	e822                	sd	s0,16(sp)
+ 57e:	1000                	addi	s0,sp,32
+ 580:	feb407a3          	sb	a1,-17(s0)
+ 584:	4605                	li	a2,1
+ 586:	fef40593          	addi	a1,s0,-17
+ 58a:	f6fff0ef          	jal	4f8 <write>
+ 58e:	60e2                	ld	ra,24(sp)
+ 590:	6442                	ld	s0,16(sp)
+ 592:	6105                	addi	sp,sp,32
+ 594:	8082                	ret
+
+0000000000000596 <printint>:
+ 596:	7139                	addi	sp,sp,-64
+ 598:	fc06                	sd	ra,56(sp)
+ 59a:	f822                	sd	s0,48(sp)
+ 59c:	f426                	sd	s1,40(sp)
+ 59e:	0080                	addi	s0,sp,64
+ 5a0:	84aa                	mv	s1,a0
+ 5a2:	c299                	beqz	a3,5a8 <printint+0x12>
+ 5a4:	0805c963          	bltz	a1,636 <printint+0xa0>
+ 5a8:	2581                	sext.w	a1,a1
+ 5aa:	4881                	li	a7,0
+ 5ac:	fc040693          	addi	a3,s0,-64
+ 5b0:	4701                	li	a4,0
+ 5b2:	2601                	sext.w	a2,a2
+ 5b4:	00000517          	auipc	a0,0x0
+ 5b8:	4fc50513          	addi	a0,a0,1276 # ab0 <digits>
+ 5bc:	883a                	mv	a6,a4
+ 5be:	2705                	addiw	a4,a4,1
+ 5c0:	02c5f7bb          	remuw	a5,a1,a2
+ 5c4:	1782                	slli	a5,a5,0x20
+ 5c6:	9381                	srli	a5,a5,0x20
+ 5c8:	97aa                	add	a5,a5,a0
+ 5ca:	0007c783          	lbu	a5,0(a5)
+ 5ce:	00f68023          	sb	a5,0(a3)
+ 5d2:	0005879b          	sext.w	a5,a1
+ 5d6:	02c5d5bb          	divuw	a1,a1,a2
+ 5da:	0685                	addi	a3,a3,1
+ 5dc:	fec7f0e3          	bgeu	a5,a2,5bc <printint+0x26>
+ 5e0:	00088c63          	beqz	a7,5f8 <printint+0x62>
+ 5e4:	fd070793          	addi	a5,a4,-48
+ 5e8:	00878733          	add	a4,a5,s0
+ 5ec:	02d00793          	li	a5,45
+ 5f0:	fef70823          	sb	a5,-16(a4)
+ 5f4:	0028071b          	addiw	a4,a6,2
+ 5f8:	02e05a63          	blez	a4,62c <printint+0x96>
+ 5fc:	f04a                	sd	s2,32(sp)
+ 5fe:	ec4e                	sd	s3,24(sp)
+ 600:	fc040793          	addi	a5,s0,-64
+ 604:	00e78933          	add	s2,a5,a4
+ 608:	fff78993          	addi	s3,a5,-1
+ 60c:	99ba                	add	s3,s3,a4
+ 60e:	377d                	addiw	a4,a4,-1
+ 610:	1702                	slli	a4,a4,0x20
+ 612:	9301                	srli	a4,a4,0x20
+ 614:	40e989b3          	sub	s3,s3,a4
+ 618:	fff94583          	lbu	a1,-1(s2)
+ 61c:	8526                	mv	a0,s1
+ 61e:	f5bff0ef          	jal	578 <putc>
+ 622:	197d                	addi	s2,s2,-1
+ 624:	ff391ae3          	bne	s2,s3,618 <printint+0x82>
+ 628:	7902                	ld	s2,32(sp)
+ 62a:	69e2                	ld	s3,24(sp)
+ 62c:	70e2                	ld	ra,56(sp)
+ 62e:	7442                	ld	s0,48(sp)
+ 630:	74a2                	ld	s1,40(sp)
+ 632:	6121                	addi	sp,sp,64
+ 634:	8082                	ret
+ 636:	40b005bb          	negw	a1,a1
+ 63a:	4885                	li	a7,1
+ 63c:	bf85                	j	5ac <printint+0x16>
+
+000000000000063e <vprintf>:
+ 63e:	711d                	addi	sp,sp,-96
+ 640:	ec86                	sd	ra,88(sp)
+ 642:	e8a2                	sd	s0,80(sp)
+ 644:	e0ca                	sd	s2,64(sp)
+ 646:	1080                	addi	s0,sp,96
+ 648:	0005c903          	lbu	s2,0(a1)
+ 64c:	26090863          	beqz	s2,8bc <vprintf+0x27e>
+ 650:	e4a6                	sd	s1,72(sp)
+ 652:	fc4e                	sd	s3,56(sp)
+ 654:	f852                	sd	s4,48(sp)
+ 656:	f456                	sd	s5,40(sp)
+ 658:	f05a                	sd	s6,32(sp)
+ 65a:	ec5e                	sd	s7,24(sp)
+ 65c:	e862                	sd	s8,16(sp)
+ 65e:	e466                	sd	s9,8(sp)
+ 660:	8b2a                	mv	s6,a0
+ 662:	8a2e                	mv	s4,a1
+ 664:	8bb2                	mv	s7,a2
+ 666:	4981                	li	s3,0
+ 668:	4481                	li	s1,0
+ 66a:	4701                	li	a4,0
+ 66c:	02500a93          	li	s5,37
+ 670:	06400c13          	li	s8,100
+ 674:	06c00c93          	li	s9,108
+ 678:	a005                	j	698 <vprintf+0x5a>
+ 67a:	85ca                	mv	a1,s2
+ 67c:	855a                	mv	a0,s6
+ 67e:	efbff0ef          	jal	578 <putc>
+ 682:	a019                	j	688 <vprintf+0x4a>
+ 684:	03598263          	beq	s3,s5,6a8 <vprintf+0x6a>
+ 688:	2485                	addiw	s1,s1,1
+ 68a:	8726                	mv	a4,s1
+ 68c:	009a07b3          	add	a5,s4,s1
+ 690:	0007c903          	lbu	s2,0(a5)
+ 694:	20090c63          	beqz	s2,8ac <vprintf+0x26e>
+ 698:	0009079b          	sext.w	a5,s2
+ 69c:	fe0994e3          	bnez	s3,684 <vprintf+0x46>
+ 6a0:	fd579de3          	bne	a5,s5,67a <vprintf+0x3c>
+ 6a4:	89be                	mv	s3,a5
+ 6a6:	b7cd                	j	688 <vprintf+0x4a>
+ 6a8:	00ea06b3          	add	a3,s4,a4
+ 6ac:	0016c683          	lbu	a3,1(a3)
+ 6b0:	8636                	mv	a2,a3
+ 6b2:	c681                	beqz	a3,6ba <vprintf+0x7c>
+ 6b4:	9752                	add	a4,a4,s4
+ 6b6:	00274603          	lbu	a2,2(a4)
+ 6ba:	03878f63          	beq	a5,s8,6f8 <vprintf+0xba>
+ 6be:	05978963          	beq	a5,s9,710 <vprintf+0xd2>
+ 6c2:	07500713          	li	a4,117
+ 6c6:	0ee78363          	beq	a5,a4,7ac <vprintf+0x16e>
+ 6ca:	07800713          	li	a4,120
+ 6ce:	12e78563          	beq	a5,a4,7f8 <vprintf+0x1ba>
+ 6d2:	07000713          	li	a4,112
+ 6d6:	14e78a63          	beq	a5,a4,82a <vprintf+0x1ec>
+ 6da:	07300713          	li	a4,115
+ 6de:	18e78a63          	beq	a5,a4,872 <vprintf+0x234>
+ 6e2:	02500713          	li	a4,37
+ 6e6:	04e79563          	bne	a5,a4,730 <vprintf+0xf2>
+ 6ea:	02500593          	li	a1,37
+ 6ee:	855a                	mv	a0,s6
+ 6f0:	e89ff0ef          	jal	578 <putc>
+ 6f4:	4981                	li	s3,0
+ 6f6:	bf49                	j	688 <vprintf+0x4a>
+ 6f8:	008b8913          	addi	s2,s7,8
+ 6fc:	4685                	li	a3,1
+ 6fe:	4629                	li	a2,10
+ 700:	000ba583          	lw	a1,0(s7)
+ 704:	855a                	mv	a0,s6
+ 706:	e91ff0ef          	jal	596 <printint>
+ 70a:	8bca                	mv	s7,s2
+ 70c:	4981                	li	s3,0
+ 70e:	bfad                	j	688 <vprintf+0x4a>
+ 710:	06400793          	li	a5,100
+ 714:	02f68963          	beq	a3,a5,746 <vprintf+0x108>
+ 718:	06c00793          	li	a5,108
+ 71c:	04f68263          	beq	a3,a5,760 <vprintf+0x122>
+ 720:	07500793          	li	a5,117
+ 724:	0af68063          	beq	a3,a5,7c4 <vprintf+0x186>
+ 728:	07800793          	li	a5,120
+ 72c:	0ef68263          	beq	a3,a5,810 <vprintf+0x1d2>
+ 730:	02500593          	li	a1,37
+ 734:	855a                	mv	a0,s6
+ 736:	e43ff0ef          	jal	578 <putc>
+ 73a:	85ca                	mv	a1,s2
+ 73c:	855a                	mv	a0,s6
+ 73e:	e3bff0ef          	jal	578 <putc>
+ 742:	4981                	li	s3,0
+ 744:	b791                	j	688 <vprintf+0x4a>
+ 746:	008b8913          	addi	s2,s7,8
+ 74a:	4685                	li	a3,1
+ 74c:	4629                	li	a2,10
+ 74e:	000ba583          	lw	a1,0(s7)
+ 752:	855a                	mv	a0,s6
+ 754:	e43ff0ef          	jal	596 <printint>
+ 758:	2485                	addiw	s1,s1,1
+ 75a:	8bca                	mv	s7,s2
+ 75c:	4981                	li	s3,0
+ 75e:	b72d                	j	688 <vprintf+0x4a>
+ 760:	06400793          	li	a5,100
+ 764:	02f60763          	beq	a2,a5,792 <vprintf+0x154>
+ 768:	07500793          	li	a5,117
+ 76c:	06f60963          	beq	a2,a5,7de <vprintf+0x1a0>
+ 770:	07800793          	li	a5,120
+ 774:	faf61ee3          	bne	a2,a5,730 <vprintf+0xf2>
+ 778:	008b8913          	addi	s2,s7,8
+ 77c:	4681                	li	a3,0
+ 77e:	4641                	li	a2,16
+ 780:	000ba583          	lw	a1,0(s7)
+ 784:	855a                	mv	a0,s6
+ 786:	e11ff0ef          	jal	596 <printint>
+ 78a:	2489                	addiw	s1,s1,2
+ 78c:	8bca                	mv	s7,s2
+ 78e:	4981                	li	s3,0
+ 790:	bde5                	j	688 <vprintf+0x4a>
+ 792:	008b8913          	addi	s2,s7,8
+ 796:	4685                	li	a3,1
+ 798:	4629                	li	a2,10
+ 79a:	000ba583          	lw	a1,0(s7)
+ 79e:	855a                	mv	a0,s6
+ 7a0:	df7ff0ef          	jal	596 <printint>
+ 7a4:	2489                	addiw	s1,s1,2
+ 7a6:	8bca                	mv	s7,s2
+ 7a8:	4981                	li	s3,0
+ 7aa:	bdf9                	j	688 <vprintf+0x4a>
+ 7ac:	008b8913          	addi	s2,s7,8
+ 7b0:	4681                	li	a3,0
+ 7b2:	4629                	li	a2,10
+ 7b4:	000ba583          	lw	a1,0(s7)
+ 7b8:	855a                	mv	a0,s6
+ 7ba:	dddff0ef          	jal	596 <printint>
+ 7be:	8bca                	mv	s7,s2
+ 7c0:	4981                	li	s3,0
+ 7c2:	b5d9                	j	688 <vprintf+0x4a>
+ 7c4:	008b8913          	addi	s2,s7,8
+ 7c8:	4681                	li	a3,0
+ 7ca:	4629                	li	a2,10
+ 7cc:	000ba583          	lw	a1,0(s7)
+ 7d0:	855a                	mv	a0,s6
+ 7d2:	dc5ff0ef          	jal	596 <printint>
+ 7d6:	2485                	addiw	s1,s1,1
+ 7d8:	8bca                	mv	s7,s2
+ 7da:	4981                	li	s3,0
+ 7dc:	b575                	j	688 <vprintf+0x4a>
+ 7de:	008b8913          	addi	s2,s7,8
+ 7e2:	4681                	li	a3,0
+ 7e4:	4629                	li	a2,10
+ 7e6:	000ba583          	lw	a1,0(s7)
+ 7ea:	855a                	mv	a0,s6
+ 7ec:	dabff0ef          	jal	596 <printint>
+ 7f0:	2489                	addiw	s1,s1,2
+ 7f2:	8bca                	mv	s7,s2
+ 7f4:	4981                	li	s3,0
+ 7f6:	bd49                	j	688 <vprintf+0x4a>
+ 7f8:	008b8913          	addi	s2,s7,8
+ 7fc:	4681                	li	a3,0
+ 7fe:	4641                	li	a2,16
+ 800:	000ba583          	lw	a1,0(s7)
+ 804:	855a                	mv	a0,s6
+ 806:	d91ff0ef          	jal	596 <printint>
+ 80a:	8bca                	mv	s7,s2
+ 80c:	4981                	li	s3,0
+ 80e:	bdad                	j	688 <vprintf+0x4a>
+ 810:	008b8913          	addi	s2,s7,8
+ 814:	4681                	li	a3,0
+ 816:	4641                	li	a2,16
+ 818:	000ba583          	lw	a1,0(s7)
+ 81c:	855a                	mv	a0,s6
+ 81e:	d79ff0ef          	jal	596 <printint>
+ 822:	2485                	addiw	s1,s1,1
+ 824:	8bca                	mv	s7,s2
+ 826:	4981                	li	s3,0
+ 828:	b585                	j	688 <vprintf+0x4a>
+ 82a:	e06a                	sd	s10,0(sp)
+ 82c:	008b8d13          	addi	s10,s7,8
+ 830:	000bb983          	ld	s3,0(s7)
+ 834:	03000593          	li	a1,48
+ 838:	855a                	mv	a0,s6
+ 83a:	d3fff0ef          	jal	578 <putc>
+ 83e:	07800593          	li	a1,120
+ 842:	855a                	mv	a0,s6
+ 844:	d35ff0ef          	jal	578 <putc>
+ 848:	4941                	li	s2,16
+ 84a:	00000b97          	auipc	s7,0x0
+ 84e:	266b8b93          	addi	s7,s7,614 # ab0 <digits>
+ 852:	03c9d793          	srli	a5,s3,0x3c
+ 856:	97de                	add	a5,a5,s7
+ 858:	0007c583          	lbu	a1,0(a5)
+ 85c:	855a                	mv	a0,s6
+ 85e:	d1bff0ef          	jal	578 <putc>
+ 862:	0992                	slli	s3,s3,0x4
+ 864:	397d                	addiw	s2,s2,-1
+ 866:	fe0916e3          	bnez	s2,852 <vprintf+0x214>
+ 86a:	8bea                	mv	s7,s10
+ 86c:	4981                	li	s3,0
+ 86e:	6d02                	ld	s10,0(sp)
+ 870:	bd21                	j	688 <vprintf+0x4a>
+ 872:	008b8993          	addi	s3,s7,8
+ 876:	000bb903          	ld	s2,0(s7)
+ 87a:	00090f63          	beqz	s2,898 <vprintf+0x25a>
+ 87e:	00094583          	lbu	a1,0(s2)
+ 882:	c195                	beqz	a1,8a6 <vprintf+0x268>
+ 884:	855a                	mv	a0,s6
+ 886:	cf3ff0ef          	jal	578 <putc>
+ 88a:	0905                	addi	s2,s2,1
+ 88c:	00094583          	lbu	a1,0(s2)
+ 890:	f9f5                	bnez	a1,884 <vprintf+0x246>
+ 892:	8bce                	mv	s7,s3
+ 894:	4981                	li	s3,0
+ 896:	bbcd                	j	688 <vprintf+0x4a>
+ 898:	00000917          	auipc	s2,0x0
+ 89c:	21090913          	addi	s2,s2,528 # aa8 <malloc+0x104>
+ 8a0:	02800593          	li	a1,40
+ 8a4:	b7c5                	j	884 <vprintf+0x246>
+ 8a6:	8bce                	mv	s7,s3
+ 8a8:	4981                	li	s3,0
+ 8aa:	bbf9                	j	688 <vprintf+0x4a>
+ 8ac:	64a6                	ld	s1,72(sp)
+ 8ae:	79e2                	ld	s3,56(sp)
+ 8b0:	7a42                	ld	s4,48(sp)
+ 8b2:	7aa2                	ld	s5,40(sp)
+ 8b4:	7b02                	ld	s6,32(sp)
+ 8b6:	6be2                	ld	s7,24(sp)
+ 8b8:	6c42                	ld	s8,16(sp)
+ 8ba:	6ca2                	ld	s9,8(sp)
+ 8bc:	60e6                	ld	ra,88(sp)
+ 8be:	6446                	ld	s0,80(sp)
+ 8c0:	6906                	ld	s2,64(sp)
+ 8c2:	6125                	addi	sp,sp,96
+ 8c4:	8082                	ret
+
+00000000000008c6 <fprintf>:
+ 8c6:	715d                	addi	sp,sp,-80
+ 8c8:	ec06                	sd	ra,24(sp)
+ 8ca:	e822                	sd	s0,16(sp)
+ 8cc:	1000                	addi	s0,sp,32
+ 8ce:	e010                	sd	a2,0(s0)
+ 8d0:	e414                	sd	a3,8(s0)
+ 8d2:	e818                	sd	a4,16(s0)
+ 8d4:	ec1c                	sd	a5,24(s0)
+ 8d6:	03043023          	sd	a6,32(s0)
+ 8da:	03143423          	sd	a7,40(s0)
+ 8de:	fe843423          	sd	s0,-24(s0)
+ 8e2:	8622                	mv	a2,s0
+ 8e4:	d5bff0ef          	jal	63e <vprintf>
+ 8e8:	60e2                	ld	ra,24(sp)
+ 8ea:	6442                	ld	s0,16(sp)
+ 8ec:	6161                	addi	sp,sp,80
+ 8ee:	8082                	ret
+
+00000000000008f0 <printf>:
+ 8f0:	711d                	addi	sp,sp,-96
+ 8f2:	ec06                	sd	ra,24(sp)
+ 8f4:	e822                	sd	s0,16(sp)
+ 8f6:	1000                	addi	s0,sp,32
+ 8f8:	e40c                	sd	a1,8(s0)
+ 8fa:	e810                	sd	a2,16(s0)
+ 8fc:	ec14                	sd	a3,24(s0)
+ 8fe:	f018                	sd	a4,32(s0)
+ 900:	f41c                	sd	a5,40(s0)
+ 902:	03043823          	sd	a6,48(s0)
+ 906:	03143c23          	sd	a7,56(s0)
+ 90a:	00840613          	addi	a2,s0,8
+ 90e:	fec43423          	sd	a2,-24(s0)
+ 912:	85aa                	mv	a1,a0
+ 914:	4505                	li	a0,1
+ 916:	d29ff0ef          	jal	63e <vprintf>
+ 91a:	60e2                	ld	ra,24(sp)
+ 91c:	6442                	ld	s0,16(sp)
+ 91e:	6125                	addi	sp,sp,96
+ 920:	8082                	ret
+
+0000000000000922 <free>:
+ 922:	1141                	addi	sp,sp,-16
+ 924:	e422                	sd	s0,8(sp)
+ 926:	0800                	addi	s0,sp,16
+ 928:	ff050693          	addi	a3,a0,-16
+ 92c:	00000797          	auipc	a5,0x0
+ 930:	6e47b783          	ld	a5,1764(a5) # 1010 <freep>
+ 934:	a02d                	j	95e <free+0x3c>
+ 936:	4618                	lw	a4,8(a2)
+ 938:	9f2d                	addw	a4,a4,a1
+ 93a:	fee52c23          	sw	a4,-8(a0)
+ 93e:	6398                	ld	a4,0(a5)
+ 940:	6310                	ld	a2,0(a4)
+ 942:	a83d                	j	980 <free+0x5e>
+ 944:	ff852703          	lw	a4,-8(a0)
+ 948:	9f31                	addw	a4,a4,a2
+ 94a:	c798                	sw	a4,8(a5)
+ 94c:	ff053683          	ld	a3,-16(a0)
+ 950:	a091                	j	994 <free+0x72>
+ 952:	6398                	ld	a4,0(a5)
+ 954:	00e7e463          	bltu	a5,a4,95c <free+0x3a>
+ 958:	00e6ea63          	bltu	a3,a4,96c <free+0x4a>
+ 95c:	87ba                	mv	a5,a4
+ 95e:	fed7fae3          	bgeu	a5,a3,952 <free+0x30>
+ 962:	6398                	ld	a4,0(a5)
+ 964:	00e6e463          	bltu	a3,a4,96c <free+0x4a>
+ 968:	fee7eae3          	bltu	a5,a4,95c <free+0x3a>
+ 96c:	ff852583          	lw	a1,-8(a0)
+ 970:	6390                	ld	a2,0(a5)
+ 972:	02059813          	slli	a6,a1,0x20
+ 976:	01c85713          	srli	a4,a6,0x1c
+ 97a:	9736                	add	a4,a4,a3
+ 97c:	fae60de3          	beq	a2,a4,936 <free+0x14>
+ 980:	fec53823          	sd	a2,-16(a0)
+ 984:	4790                	lw	a2,8(a5)
+ 986:	02061593          	slli	a1,a2,0x20
+ 98a:	01c5d713          	srli	a4,a1,0x1c
+ 98e:	973e                	add	a4,a4,a5
+ 990:	fae68ae3          	beq	a3,a4,944 <free+0x22>
+ 994:	e394                	sd	a3,0(a5)
+ 996:	00000717          	auipc	a4,0x0
+ 99a:	66f73d23          	sd	a5,1658(a4) # 1010 <freep>
+ 99e:	6422                	ld	s0,8(sp)
+ 9a0:	0141                	addi	sp,sp,16
+ 9a2:	8082                	ret
+
+00000000000009a4 <malloc>:
+ 9a4:	7139                	addi	sp,sp,-64
+ 9a6:	fc06                	sd	ra,56(sp)
+ 9a8:	f822                	sd	s0,48(sp)
+ 9aa:	f426                	sd	s1,40(sp)
+ 9ac:	ec4e                	sd	s3,24(sp)
+ 9ae:	0080                	addi	s0,sp,64
+ 9b0:	02051493          	slli	s1,a0,0x20
+ 9b4:	9081                	srli	s1,s1,0x20
+ 9b6:	04bd                	addi	s1,s1,15
+ 9b8:	8091                	srli	s1,s1,0x4
+ 9ba:	0014899b          	addiw	s3,s1,1
+ 9be:	0485                	addi	s1,s1,1
+ 9c0:	00000517          	auipc	a0,0x0
+ 9c4:	65053503          	ld	a0,1616(a0) # 1010 <freep>
+ 9c8:	c915                	beqz	a0,9fc <malloc+0x58>
+ 9ca:	611c                	ld	a5,0(a0)
+ 9cc:	4798                	lw	a4,8(a5)
+ 9ce:	08977a63          	bgeu	a4,s1,a62 <malloc+0xbe>
+ 9d2:	f04a                	sd	s2,32(sp)
+ 9d4:	e852                	sd	s4,16(sp)
+ 9d6:	e456                	sd	s5,8(sp)
+ 9d8:	e05a                	sd	s6,0(sp)
+ 9da:	8a4e                	mv	s4,s3
+ 9dc:	0009871b          	sext.w	a4,s3
+ 9e0:	6685                	lui	a3,0x1
+ 9e2:	00d77363          	bgeu	a4,a3,9e8 <malloc+0x44>
+ 9e6:	6a05                	lui	s4,0x1
+ 9e8:	000a0b1b          	sext.w	s6,s4
+ 9ec:	004a1a1b          	slliw	s4,s4,0x4
+ 9f0:	00000917          	auipc	s2,0x0
+ 9f4:	62090913          	addi	s2,s2,1568 # 1010 <freep>
+ 9f8:	5afd                	li	s5,-1
+ 9fa:	a081                	j	a3a <malloc+0x96>
+ 9fc:	f04a                	sd	s2,32(sp)
+ 9fe:	e852                	sd	s4,16(sp)
+ a00:	e456                	sd	s5,8(sp)
+ a02:	e05a                	sd	s6,0(sp)
+ a04:	00004797          	auipc	a5,0x4
+ a08:	61c78793          	addi	a5,a5,1564 # 5020 <base>
+ a0c:	00000717          	auipc	a4,0x0
+ a10:	60f73223          	sd	a5,1540(a4) # 1010 <freep>
+ a14:	e39c                	sd	a5,0(a5)
+ a16:	0007a423          	sw	zero,8(a5)
+ a1a:	b7c1                	j	9da <malloc+0x36>
+ a1c:	6398                	ld	a4,0(a5)
+ a1e:	e118                	sd	a4,0(a0)
+ a20:	a8a9                	j	a7a <malloc+0xd6>
+ a22:	01652423          	sw	s6,8(a0)
+ a26:	0541                	addi	a0,a0,16
+ a28:	efbff0ef          	jal	922 <free>
+ a2c:	00093503          	ld	a0,0(s2)
+ a30:	c12d                	beqz	a0,a92 <malloc+0xee>
+ a32:	611c                	ld	a5,0(a0)
+ a34:	4798                	lw	a4,8(a5)
+ a36:	02977263          	bgeu	a4,s1,a5a <malloc+0xb6>
+ a3a:	00093703          	ld	a4,0(s2)
+ a3e:	853e                	mv	a0,a5
+ a40:	fef719e3          	bne	a4,a5,a32 <malloc+0x8e>
+ a44:	8552                	mv	a0,s4
+ a46:	b1bff0ef          	jal	560 <sbrk>
+ a4a:	fd551ce3          	bne	a0,s5,a22 <malloc+0x7e>
+ a4e:	4501                	li	a0,0
+ a50:	7902                	ld	s2,32(sp)
+ a52:	6a42                	ld	s4,16(sp)
+ a54:	6aa2                	ld	s5,8(sp)
+ a56:	6b02                	ld	s6,0(sp)
+ a58:	a03d                	j	a86 <malloc+0xe2>
+ a5a:	7902                	ld	s2,32(sp)
+ a5c:	6a42                	ld	s4,16(sp)
+ a5e:	6aa2                	ld	s5,8(sp)
+ a60:	6b02                	ld	s6,0(sp)
+ a62:	fae48de3          	beq	s1,a4,a1c <malloc+0x78>
+ a66:	4137073b          	subw	a4,a4,s3
+ a6a:	c798                	sw	a4,8(a5)
+ a6c:	02071693          	slli	a3,a4,0x20
+ a70:	01c6d713          	srli	a4,a3,0x1c
+ a74:	97ba                	add	a5,a5,a4
+ a76:	0137a423          	sw	s3,8(a5)
+ a7a:	00000717          	auipc	a4,0x0
+ a7e:	58a73b23          	sd	a0,1430(a4) # 1010 <freep>
+ a82:	01078513          	addi	a0,a5,16
+ a86:	70e2                	ld	ra,56(sp)
+ a88:	7442                	ld	s0,48(sp)
+ a8a:	74a2                	ld	s1,40(sp)
+ a8c:	69e2                	ld	s3,24(sp)
+ a8e:	6121                	addi	sp,sp,64
+ a90:	8082                	ret
+ a92:	7902                	ld	s2,32(sp)
+ a94:	6a42                	ld	s4,16(sp)
+ a96:	6aa2                	ld	s5,8(sp)
+ a98:	6b02                	ld	s6,0(sp)
+ a9a:	b7f5                	j	a86 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/xargs.c b/xv6-labs-2024/user/xargs.c
new file mode 100644
index 0000000..e77ba59
--- /dev/null
+++ b/xv6-labs-2024/user/xargs.c
@@ -0,0 +1,125 @@
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+#include "kernel/param.h"
+#include "kernel/fcntl.h"
+
+// Hàm để đọc lệnh từ stdin
+int getcmd(char* buf, int nbuf) {
+  memset(buf, 0, nbuf);// Xóa bộ nhớ đệm
+  if (read(0, buf, nbuf) <= 0) 
+  {  // Đọc từ stdin
+    return -1;
+  }
+  return 0;
+}
+
+// Mảng chứa các kí tự trắng như dấu cách, tab, xuống dòng
+char whitespace[] = " \t\r\n\v";
+
+// Hàm để tách các đối số từ chuỗi
+int gettoken(char** ps, char* es, char** q, char** eq) {
+  char* s; //
+  int ret; 
+  s = *ps; //*ps dùng để giữ vị trí đang xét của chuỗi đầu vào, gán cho s để xử lý tiếp 
+
+  while (s < es && strchr(whitespace, *s))//Bỏ qua các kí tự trắng
+    s++;
+  
+  if (q)
+    *q = s; // Lưu vị trí bắt đầu của đối số vào con trỏ q
+
+  ret = *s; 
+  switch (*s) {
+    case 0: // Nếu là ký tự NULL (hết chuỗi)
+      break;
+      
+    default:// Nếu không phải kí tự trắng
+      ret = 'a';
+
+      while (s < es && !strchr(whitespace, *s)) // Đọc đến khi gặp kí tự trắng
+        s++; 
+
+      break; // Kết thúc
+  }
+  if (eq)
+    *eq = s; // Lưu vị trí kết thúc của đối số vào con trỏ eq
+
+  while (s < es && strchr(whitespace, *s)) // Bỏ qua các kí tự trắng
+    s++;
+
+  *ps = s; // Cập nhật vị trí của con trỏ ps
+  return ret;
+}
+
+//
+int main(int argc, char* argv[]) {
+  char* xargs[MAXARG]; // Mảng chứa các đối số
+  int n=0;
+  int flag = 0;
+  int argstart = 0;
+
+  // Xử lý tùy chọn `-n`
+  for (int i = 1; i < argc; i++) {
+    if (strcmp(argv[i], "-n") == 0 && i + 1 < argc) 
+    {
+      n = atoi(argv[i + 1]);  // Lấy giá trị sau `-n`
+      flag = 1;
+      i++;  // Bỏ qua giá trị sau `-n`
+    } 
+    else 
+    {
+      xargs[argstart++] = argv[i];  // Thêm đối số khác vào xargs
+    }
+  }
+
+  static char buf[MAXARG][512];
+  char* q, *eq;
+  int j = argstart;  // Chỉ số bắt đầu để lưu đối số từ input
+  int count = 0;  // Đếm số đối số hiện tại
+  int i = 0;
+  // Đọc input từ stdin
+  while (getcmd(buf[i], sizeof(buf[i])) >= 0) {
+    char* s = buf[i];
+    //print buf[i]
+
+    char* es = s + strlen(s);
+    while (gettoken(&s, es, &q, &eq) != 0) {
+      *eq = 0;  // Kết thúc chuỗi
+      xargs[j++] = q;  // Lưu đối số vào xargs
+      count++;
+      i++;
+
+      // Khi đủ số đối số bằng với giá trị `-n`
+      if (flag==1 && count == n) {
+        xargs[j] = 0;  // Thiết lập kết thúc mảng đối số
+
+        // Tạo tiến trình con để thực thi lệnh
+        int pid = fork();
+        if (pid == 0) 
+        {
+          exec(xargs[0], xargs);  // Thực thi lệnh với các đối số
+          exit(0);  // Thoát khi kết thúc
+        } 
+        wait(0);  // Chờ tiến trình con
+        // Đặt lại chỉ số `j` và đếm lại số đối số
+        j = argstart;
+        count = 0;
+      }
+    }
+  }
+
+  // Xử lý các đối số còn lại chưa đủ `-n` để thực thi
+  if (count > 0) 
+  {
+    xargs[j] = 0;  // Thiết lập kết thúc mảng đối số
+    int pid = fork();
+    if (pid == 0) 
+    {
+      exec(xargs[0], xargs);  // Thực thi lệnh với các đối số còn lại
+      exit(0);  // Thoát khi kết thúc
+    } 
+    wait(0);  // Chờ tiến trình con
+  }
+  exit(0);
+}
\ No newline at end of file
diff --git a/xv6-labs-2024/user/xargs.d b/xv6-labs-2024/user/xargs.d
new file mode 100644
index 0000000..02b6a5e
--- /dev/null
+++ b/xv6-labs-2024/user/xargs.d
@@ -0,0 +1,2 @@
+user/xargs.o: user/xargs.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h kernel/param.h kernel/fcntl.h
diff --git a/xv6-labs-2024/user/xargs.o b/xv6-labs-2024/user/xargs.o
new file mode 100644
index 0000000..7bbce79
Binary files /dev/null and b/xv6-labs-2024/user/xargs.o differ
diff --git a/xv6-labs-2024/user/xargs.sym b/xv6-labs-2024/user/xargs.sym
new file mode 100644
index 0000000..c10e365
--- /dev/null
+++ b/xv6-labs-2024/user/xargs.sym
@@ -0,0 +1,67 @@
+0000000000000000 .text
+0000000000000aa0 .rodata
+0000000000000ac8 .eh_frame
+0000000000001000 .data
+0000000000001010 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_ranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 xargs.c
+0000000000001020 buf.0
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000578 putc
+0000000000000596 printint
+0000000000000ab0 digits
+0000000000000000 umalloc.c
+0000000000001010 freep
+0000000000005020 base
+0000000000000280 strcpy
+00000000000008f0 printf
+000000000000042a memmove
+0000000000000520 mknod
+0000000000000338 gets
+0000000000000558 getpid
+00000000000004bc memcpy
+0000000000000038 gettoken
+00000000000009a4 malloc
+0000000000000568 sleep
+0000000000001000 whitespace
+00000000000004e8 pipe
+0000000000000000 getcmd
+00000000000004f8 write
+0000000000000530 fstat
+00000000000008c6 fprintf
+0000000000000508 kill
+000000000000063e vprintf
+0000000000000548 chdir
+0000000000000510 exec
+00000000000004e0 wait
+00000000000004f0 read
+0000000000000528 unlink
+0000000000000482 memcmp
+00000000000004d0 fork
+0000000000000560 sbrk
+0000000000000570 uptime
+00000000000002f2 memset
+000000000000010a main
+000000000000029c strcmp
+0000000000000550 dup
+00000000000003a8 stat
+0000000000000538 link
+00000000000004d8 exit
+000000000000026e start
+00000000000003e2 atoi
+00000000000002c8 strlen
+0000000000000518 open
+0000000000000314 strchr
+0000000000000540 mkdir
+0000000000000500 close
+0000000000000922 free
diff --git a/xv6-labs-2024/user/xargstest.sh b/xv6-labs-2024/user/xargstest.sh
new file mode 100644
index 0000000..4362589
--- /dev/null
+++ b/xv6-labs-2024/user/xargstest.sh
@@ -0,0 +1,6 @@
+mkdir a
+echo hello > a/b
+mkdir c
+echo hello > c/b
+echo hello > b
+find . b | xargs grep hello
diff --git a/xv6-labs-2024/user/zombie.asm b/xv6-labs-2024/user/zombie.asm
new file mode 100644
index 0000000..d921df4
--- /dev/null
+++ b/xv6-labs-2024/user/zombie.asm
@@ -0,0 +1,1041 @@
+
+user/_zombie:     file format elf64-littleriscv
+
+
+Disassembly of section .text:
+
+0000000000000000 <main>:
+   0:	1141                	addi	sp,sp,-16
+   2:	e406                	sd	ra,8(sp)
+   4:	e022                	sd	s0,0(sp)
+   6:	0800                	addi	s0,sp,16
+   8:	278000ef          	jal	280 <fork>
+   c:	00a04563          	bgtz	a0,16 <main+0x16>
+  10:	4501                	li	a0,0
+  12:	276000ef          	jal	288 <exit>
+  16:	4515                	li	a0,5
+  18:	300000ef          	jal	318 <sleep>
+  1c:	bfd5                	j	10 <main+0x10>
+
+000000000000001e <start>:
+//
+// wrapper so that it's OK if main() does not call exit().
+//
+void
+start()
+{
+  1e:	1141                	addi	sp,sp,-16
+  20:	e406                	sd	ra,8(sp)
+  22:	e022                	sd	s0,0(sp)
+  24:	0800                	addi	s0,sp,16
+  extern int main();
+  main();
+  26:	fdbff0ef          	jal	0 <main>
+  exit(0);
+  2a:	4501                	li	a0,0
+  2c:	25c000ef          	jal	288 <exit>
+
+0000000000000030 <strcpy>:
+}
+
+char*
+strcpy(char *s, const char *t)
+{
+  30:	1141                	addi	sp,sp,-16
+  32:	e422                	sd	s0,8(sp)
+  34:	0800                	addi	s0,sp,16
+  char *os;
+
+  os = s;
+  while((*s++ = *t++) != 0)
+  36:	87aa                	mv	a5,a0
+  38:	0585                	addi	a1,a1,1
+  3a:	0785                	addi	a5,a5,1
+  3c:	fff5c703          	lbu	a4,-1(a1)
+  40:	fee78fa3          	sb	a4,-1(a5)
+  44:	fb75                	bnez	a4,38 <strcpy+0x8>
+    ;
+  return os;
+}
+  46:	6422                	ld	s0,8(sp)
+  48:	0141                	addi	sp,sp,16
+  4a:	8082                	ret
+
+000000000000004c <strcmp>:
+
+int
+strcmp(const char *p, const char *q)
+{
+  4c:	1141                	addi	sp,sp,-16
+  4e:	e422                	sd	s0,8(sp)
+  50:	0800                	addi	s0,sp,16
+  while(*p && *p == *q)
+  52:	00054783          	lbu	a5,0(a0)
+  56:	cb91                	beqz	a5,6a <strcmp+0x1e>
+  58:	0005c703          	lbu	a4,0(a1)
+  5c:	00f71763          	bne	a4,a5,6a <strcmp+0x1e>
+    p++, q++;
+  60:	0505                	addi	a0,a0,1
+  62:	0585                	addi	a1,a1,1
+  while(*p && *p == *q)
+  64:	00054783          	lbu	a5,0(a0)
+  68:	fbe5                	bnez	a5,58 <strcmp+0xc>
+  return (uchar)*p - (uchar)*q;
+  6a:	0005c503          	lbu	a0,0(a1)
+}
+  6e:	40a7853b          	subw	a0,a5,a0
+  72:	6422                	ld	s0,8(sp)
+  74:	0141                	addi	sp,sp,16
+  76:	8082                	ret
+
+0000000000000078 <strlen>:
+
+uint
+strlen(const char *s)
+{
+  78:	1141                	addi	sp,sp,-16
+  7a:	e422                	sd	s0,8(sp)
+  7c:	0800                	addi	s0,sp,16
+  int n;
+
+  for(n = 0; s[n]; n++)
+  7e:	00054783          	lbu	a5,0(a0)
+  82:	cf91                	beqz	a5,9e <strlen+0x26>
+  84:	0505                	addi	a0,a0,1
+  86:	87aa                	mv	a5,a0
+  88:	86be                	mv	a3,a5
+  8a:	0785                	addi	a5,a5,1
+  8c:	fff7c703          	lbu	a4,-1(a5)
+  90:	ff65                	bnez	a4,88 <strlen+0x10>
+  92:	40a6853b          	subw	a0,a3,a0
+  96:	2505                	addiw	a0,a0,1
+    ;
+  return n;
+}
+  98:	6422                	ld	s0,8(sp)
+  9a:	0141                	addi	sp,sp,16
+  9c:	8082                	ret
+  for(n = 0; s[n]; n++)
+  9e:	4501                	li	a0,0
+  a0:	bfe5                	j	98 <strlen+0x20>
+
+00000000000000a2 <memset>:
+
+void*
+memset(void *dst, int c, uint n)
+{
+  a2:	1141                	addi	sp,sp,-16
+  a4:	e422                	sd	s0,8(sp)
+  a6:	0800                	addi	s0,sp,16
+  char *cdst = (char *) dst;
+  int i;
+  for(i = 0; i < n; i++){
+  a8:	ca19                	beqz	a2,be <memset+0x1c>
+  aa:	87aa                	mv	a5,a0
+  ac:	1602                	slli	a2,a2,0x20
+  ae:	9201                	srli	a2,a2,0x20
+  b0:	00a60733          	add	a4,a2,a0
+    cdst[i] = c;
+  b4:	00b78023          	sb	a1,0(a5)
+  for(i = 0; i < n; i++){
+  b8:	0785                	addi	a5,a5,1
+  ba:	fee79de3          	bne	a5,a4,b4 <memset+0x12>
+  }
+  return dst;
+}
+  be:	6422                	ld	s0,8(sp)
+  c0:	0141                	addi	sp,sp,16
+  c2:	8082                	ret
+
+00000000000000c4 <strchr>:
+
+char*
+strchr(const char *s, char c)
+{
+  c4:	1141                	addi	sp,sp,-16
+  c6:	e422                	sd	s0,8(sp)
+  c8:	0800                	addi	s0,sp,16
+  for(; *s; s++)
+  ca:	00054783          	lbu	a5,0(a0)
+  ce:	cb99                	beqz	a5,e4 <strchr+0x20>
+    if(*s == c)
+  d0:	00f58763          	beq	a1,a5,de <strchr+0x1a>
+  for(; *s; s++)
+  d4:	0505                	addi	a0,a0,1
+  d6:	00054783          	lbu	a5,0(a0)
+  da:	fbfd                	bnez	a5,d0 <strchr+0xc>
+      return (char*)s;
+  return 0;
+  dc:	4501                	li	a0,0
+}
+  de:	6422                	ld	s0,8(sp)
+  e0:	0141                	addi	sp,sp,16
+  e2:	8082                	ret
+  return 0;
+  e4:	4501                	li	a0,0
+  e6:	bfe5                	j	de <strchr+0x1a>
+
+00000000000000e8 <gets>:
+
+char*
+gets(char *buf, int max)
+{
+  e8:	711d                	addi	sp,sp,-96
+  ea:	ec86                	sd	ra,88(sp)
+  ec:	e8a2                	sd	s0,80(sp)
+  ee:	e4a6                	sd	s1,72(sp)
+  f0:	e0ca                	sd	s2,64(sp)
+  f2:	fc4e                	sd	s3,56(sp)
+  f4:	f852                	sd	s4,48(sp)
+  f6:	f456                	sd	s5,40(sp)
+  f8:	f05a                	sd	s6,32(sp)
+  fa:	ec5e                	sd	s7,24(sp)
+  fc:	1080                	addi	s0,sp,96
+  fe:	8baa                	mv	s7,a0
+ 100:	8a2e                	mv	s4,a1
+  int i, cc;
+  char c;
+
+  for(i=0; i+1 < max; ){
+ 102:	892a                	mv	s2,a0
+ 104:	4481                	li	s1,0
+    cc = read(0, &c, 1);
+    if(cc < 1)
+      break;
+    buf[i++] = c;
+    if(c == '\n' || c == '\r')
+ 106:	4aa9                	li	s5,10
+ 108:	4b35                	li	s6,13
+  for(i=0; i+1 < max; ){
+ 10a:	89a6                	mv	s3,s1
+ 10c:	2485                	addiw	s1,s1,1
+ 10e:	0344d663          	bge	s1,s4,13a <gets+0x52>
+    cc = read(0, &c, 1);
+ 112:	4605                	li	a2,1
+ 114:	faf40593          	addi	a1,s0,-81
+ 118:	4501                	li	a0,0
+ 11a:	186000ef          	jal	2a0 <read>
+    if(cc < 1)
+ 11e:	00a05e63          	blez	a0,13a <gets+0x52>
+    buf[i++] = c;
+ 122:	faf44783          	lbu	a5,-81(s0)
+ 126:	00f90023          	sb	a5,0(s2)
+    if(c == '\n' || c == '\r')
+ 12a:	01578763          	beq	a5,s5,138 <gets+0x50>
+ 12e:	0905                	addi	s2,s2,1
+ 130:	fd679de3          	bne	a5,s6,10a <gets+0x22>
+    buf[i++] = c;
+ 134:	89a6                	mv	s3,s1
+ 136:	a011                	j	13a <gets+0x52>
+ 138:	89a6                	mv	s3,s1
+      break;
+  }
+  buf[i] = '\0';
+ 13a:	99de                	add	s3,s3,s7
+ 13c:	00098023          	sb	zero,0(s3)
+  return buf;
+}
+ 140:	855e                	mv	a0,s7
+ 142:	60e6                	ld	ra,88(sp)
+ 144:	6446                	ld	s0,80(sp)
+ 146:	64a6                	ld	s1,72(sp)
+ 148:	6906                	ld	s2,64(sp)
+ 14a:	79e2                	ld	s3,56(sp)
+ 14c:	7a42                	ld	s4,48(sp)
+ 14e:	7aa2                	ld	s5,40(sp)
+ 150:	7b02                	ld	s6,32(sp)
+ 152:	6be2                	ld	s7,24(sp)
+ 154:	6125                	addi	sp,sp,96
+ 156:	8082                	ret
+
+0000000000000158 <stat>:
+
+int
+stat(const char *n, struct stat *st)
+{
+ 158:	1101                	addi	sp,sp,-32
+ 15a:	ec06                	sd	ra,24(sp)
+ 15c:	e822                	sd	s0,16(sp)
+ 15e:	e04a                	sd	s2,0(sp)
+ 160:	1000                	addi	s0,sp,32
+ 162:	892e                	mv	s2,a1
+  int fd;
+  int r;
+
+  fd = open(n, O_RDONLY);
+ 164:	4581                	li	a1,0
+ 166:	162000ef          	jal	2c8 <open>
+  if(fd < 0)
+ 16a:	02054263          	bltz	a0,18e <stat+0x36>
+ 16e:	e426                	sd	s1,8(sp)
+ 170:	84aa                	mv	s1,a0
+    return -1;
+  r = fstat(fd, st);
+ 172:	85ca                	mv	a1,s2
+ 174:	16c000ef          	jal	2e0 <fstat>
+ 178:	892a                	mv	s2,a0
+  close(fd);
+ 17a:	8526                	mv	a0,s1
+ 17c:	134000ef          	jal	2b0 <close>
+  return r;
+ 180:	64a2                	ld	s1,8(sp)
+}
+ 182:	854a                	mv	a0,s2
+ 184:	60e2                	ld	ra,24(sp)
+ 186:	6442                	ld	s0,16(sp)
+ 188:	6902                	ld	s2,0(sp)
+ 18a:	6105                	addi	sp,sp,32
+ 18c:	8082                	ret
+    return -1;
+ 18e:	597d                	li	s2,-1
+ 190:	bfcd                	j	182 <stat+0x2a>
+
+0000000000000192 <atoi>:
+
+int
+atoi(const char *s)
+{
+ 192:	1141                	addi	sp,sp,-16
+ 194:	e422                	sd	s0,8(sp)
+ 196:	0800                	addi	s0,sp,16
+  int n;
+
+  n = 0;
+  while('0' <= *s && *s <= '9')
+ 198:	00054683          	lbu	a3,0(a0)
+ 19c:	fd06879b          	addiw	a5,a3,-48
+ 1a0:	0ff7f793          	zext.b	a5,a5
+ 1a4:	4625                	li	a2,9
+ 1a6:	02f66863          	bltu	a2,a5,1d6 <atoi+0x44>
+ 1aa:	872a                	mv	a4,a0
+  n = 0;
+ 1ac:	4501                	li	a0,0
+    n = n*10 + *s++ - '0';
+ 1ae:	0705                	addi	a4,a4,1
+ 1b0:	0025179b          	slliw	a5,a0,0x2
+ 1b4:	9fa9                	addw	a5,a5,a0
+ 1b6:	0017979b          	slliw	a5,a5,0x1
+ 1ba:	9fb5                	addw	a5,a5,a3
+ 1bc:	fd07851b          	addiw	a0,a5,-48
+  while('0' <= *s && *s <= '9')
+ 1c0:	00074683          	lbu	a3,0(a4)
+ 1c4:	fd06879b          	addiw	a5,a3,-48
+ 1c8:	0ff7f793          	zext.b	a5,a5
+ 1cc:	fef671e3          	bgeu	a2,a5,1ae <atoi+0x1c>
+  return n;
+}
+ 1d0:	6422                	ld	s0,8(sp)
+ 1d2:	0141                	addi	sp,sp,16
+ 1d4:	8082                	ret
+  n = 0;
+ 1d6:	4501                	li	a0,0
+ 1d8:	bfe5                	j	1d0 <atoi+0x3e>
+
+00000000000001da <memmove>:
+
+void*
+memmove(void *vdst, const void *vsrc, int n)
+{
+ 1da:	1141                	addi	sp,sp,-16
+ 1dc:	e422                	sd	s0,8(sp)
+ 1de:	0800                	addi	s0,sp,16
+  char *dst;
+  const char *src;
+
+  dst = vdst;
+  src = vsrc;
+  if (src > dst) {
+ 1e0:	02b57463          	bgeu	a0,a1,208 <memmove+0x2e>
+    while(n-- > 0)
+ 1e4:	00c05f63          	blez	a2,202 <memmove+0x28>
+ 1e8:	1602                	slli	a2,a2,0x20
+ 1ea:	9201                	srli	a2,a2,0x20
+ 1ec:	00c507b3          	add	a5,a0,a2
+  dst = vdst;
+ 1f0:	872a                	mv	a4,a0
+      *dst++ = *src++;
+ 1f2:	0585                	addi	a1,a1,1
+ 1f4:	0705                	addi	a4,a4,1
+ 1f6:	fff5c683          	lbu	a3,-1(a1)
+ 1fa:	fed70fa3          	sb	a3,-1(a4)
+    while(n-- > 0)
+ 1fe:	fef71ae3          	bne	a4,a5,1f2 <memmove+0x18>
+    src += n;
+    while(n-- > 0)
+      *--dst = *--src;
+  }
+  return vdst;
+}
+ 202:	6422                	ld	s0,8(sp)
+ 204:	0141                	addi	sp,sp,16
+ 206:	8082                	ret
+    dst += n;
+ 208:	00c50733          	add	a4,a0,a2
+    src += n;
+ 20c:	95b2                	add	a1,a1,a2
+    while(n-- > 0)
+ 20e:	fec05ae3          	blez	a2,202 <memmove+0x28>
+ 212:	fff6079b          	addiw	a5,a2,-1
+ 216:	1782                	slli	a5,a5,0x20
+ 218:	9381                	srli	a5,a5,0x20
+ 21a:	fff7c793          	not	a5,a5
+ 21e:	97ba                	add	a5,a5,a4
+      *--dst = *--src;
+ 220:	15fd                	addi	a1,a1,-1
+ 222:	177d                	addi	a4,a4,-1
+ 224:	0005c683          	lbu	a3,0(a1)
+ 228:	00d70023          	sb	a3,0(a4)
+    while(n-- > 0)
+ 22c:	fee79ae3          	bne	a5,a4,220 <memmove+0x46>
+ 230:	bfc9                	j	202 <memmove+0x28>
+
+0000000000000232 <memcmp>:
+
+int
+memcmp(const void *s1, const void *s2, uint n)
+{
+ 232:	1141                	addi	sp,sp,-16
+ 234:	e422                	sd	s0,8(sp)
+ 236:	0800                	addi	s0,sp,16
+  const char *p1 = s1, *p2 = s2;
+  while (n-- > 0) {
+ 238:	ca05                	beqz	a2,268 <memcmp+0x36>
+ 23a:	fff6069b          	addiw	a3,a2,-1
+ 23e:	1682                	slli	a3,a3,0x20
+ 240:	9281                	srli	a3,a3,0x20
+ 242:	0685                	addi	a3,a3,1
+ 244:	96aa                	add	a3,a3,a0
+    if (*p1 != *p2) {
+ 246:	00054783          	lbu	a5,0(a0)
+ 24a:	0005c703          	lbu	a4,0(a1)
+ 24e:	00e79863          	bne	a5,a4,25e <memcmp+0x2c>
+      return *p1 - *p2;
+    }
+    p1++;
+ 252:	0505                	addi	a0,a0,1
+    p2++;
+ 254:	0585                	addi	a1,a1,1
+  while (n-- > 0) {
+ 256:	fed518e3          	bne	a0,a3,246 <memcmp+0x14>
+  }
+  return 0;
+ 25a:	4501                	li	a0,0
+ 25c:	a019                	j	262 <memcmp+0x30>
+      return *p1 - *p2;
+ 25e:	40e7853b          	subw	a0,a5,a4
+}
+ 262:	6422                	ld	s0,8(sp)
+ 264:	0141                	addi	sp,sp,16
+ 266:	8082                	ret
+  return 0;
+ 268:	4501                	li	a0,0
+ 26a:	bfe5                	j	262 <memcmp+0x30>
+
+000000000000026c <memcpy>:
+
+void *
+memcpy(void *dst, const void *src, uint n)
+{
+ 26c:	1141                	addi	sp,sp,-16
+ 26e:	e406                	sd	ra,8(sp)
+ 270:	e022                	sd	s0,0(sp)
+ 272:	0800                	addi	s0,sp,16
+  return memmove(dst, src, n);
+ 274:	f67ff0ef          	jal	1da <memmove>
+}
+ 278:	60a2                	ld	ra,8(sp)
+ 27a:	6402                	ld	s0,0(sp)
+ 27c:	0141                	addi	sp,sp,16
+ 27e:	8082                	ret
+
+0000000000000280 <fork>:
+ 280:	4885                	li	a7,1
+ 282:	00000073          	ecall
+ 286:	8082                	ret
+
+0000000000000288 <exit>:
+ 288:	4889                	li	a7,2
+ 28a:	00000073          	ecall
+ 28e:	8082                	ret
+
+0000000000000290 <wait>:
+ 290:	488d                	li	a7,3
+ 292:	00000073          	ecall
+ 296:	8082                	ret
+
+0000000000000298 <pipe>:
+ 298:	4891                	li	a7,4
+ 29a:	00000073          	ecall
+ 29e:	8082                	ret
+
+00000000000002a0 <read>:
+ 2a0:	4895                	li	a7,5
+ 2a2:	00000073          	ecall
+ 2a6:	8082                	ret
+
+00000000000002a8 <write>:
+ 2a8:	48c1                	li	a7,16
+ 2aa:	00000073          	ecall
+ 2ae:	8082                	ret
+
+00000000000002b0 <close>:
+ 2b0:	48d5                	li	a7,21
+ 2b2:	00000073          	ecall
+ 2b6:	8082                	ret
+
+00000000000002b8 <kill>:
+ 2b8:	4899                	li	a7,6
+ 2ba:	00000073          	ecall
+ 2be:	8082                	ret
+
+00000000000002c0 <exec>:
+ 2c0:	489d                	li	a7,7
+ 2c2:	00000073          	ecall
+ 2c6:	8082                	ret
+
+00000000000002c8 <open>:
+ 2c8:	48bd                	li	a7,15
+ 2ca:	00000073          	ecall
+ 2ce:	8082                	ret
+
+00000000000002d0 <mknod>:
+ 2d0:	48c5                	li	a7,17
+ 2d2:	00000073          	ecall
+ 2d6:	8082                	ret
+
+00000000000002d8 <unlink>:
+ 2d8:	48c9                	li	a7,18
+ 2da:	00000073          	ecall
+ 2de:	8082                	ret
+
+00000000000002e0 <fstat>:
+ 2e0:	48a1                	li	a7,8
+ 2e2:	00000073          	ecall
+ 2e6:	8082                	ret
+
+00000000000002e8 <link>:
+ 2e8:	48cd                	li	a7,19
+ 2ea:	00000073          	ecall
+ 2ee:	8082                	ret
+
+00000000000002f0 <mkdir>:
+ 2f0:	48d1                	li	a7,20
+ 2f2:	00000073          	ecall
+ 2f6:	8082                	ret
+
+00000000000002f8 <chdir>:
+ 2f8:	48a5                	li	a7,9
+ 2fa:	00000073          	ecall
+ 2fe:	8082                	ret
+
+0000000000000300 <dup>:
+ 300:	48a9                	li	a7,10
+ 302:	00000073          	ecall
+ 306:	8082                	ret
+
+0000000000000308 <getpid>:
+ 308:	48ad                	li	a7,11
+ 30a:	00000073          	ecall
+ 30e:	8082                	ret
+
+0000000000000310 <sbrk>:
+ 310:	48b1                	li	a7,12
+ 312:	00000073          	ecall
+ 316:	8082                	ret
+
+0000000000000318 <sleep>:
+ 318:	48b5                	li	a7,13
+ 31a:	00000073          	ecall
+ 31e:	8082                	ret
+
+0000000000000320 <uptime>:
+ 320:	48b9                	li	a7,14
+ 322:	00000073          	ecall
+ 326:	8082                	ret
+
+0000000000000328 <putc>:
+ 328:	1101                	addi	sp,sp,-32
+ 32a:	ec06                	sd	ra,24(sp)
+ 32c:	e822                	sd	s0,16(sp)
+ 32e:	1000                	addi	s0,sp,32
+ 330:	feb407a3          	sb	a1,-17(s0)
+ 334:	4605                	li	a2,1
+ 336:	fef40593          	addi	a1,s0,-17
+ 33a:	f6fff0ef          	jal	2a8 <write>
+ 33e:	60e2                	ld	ra,24(sp)
+ 340:	6442                	ld	s0,16(sp)
+ 342:	6105                	addi	sp,sp,32
+ 344:	8082                	ret
+
+0000000000000346 <printint>:
+ 346:	7139                	addi	sp,sp,-64
+ 348:	fc06                	sd	ra,56(sp)
+ 34a:	f822                	sd	s0,48(sp)
+ 34c:	f426                	sd	s1,40(sp)
+ 34e:	0080                	addi	s0,sp,64
+ 350:	84aa                	mv	s1,a0
+ 352:	c299                	beqz	a3,358 <printint+0x12>
+ 354:	0805c963          	bltz	a1,3e6 <printint+0xa0>
+ 358:	2581                	sext.w	a1,a1
+ 35a:	4881                	li	a7,0
+ 35c:	fc040693          	addi	a3,s0,-64
+ 360:	4701                	li	a4,0
+ 362:	2601                	sext.w	a2,a2
+ 364:	00000517          	auipc	a0,0x0
+ 368:	4f450513          	addi	a0,a0,1268 # 858 <digits>
+ 36c:	883a                	mv	a6,a4
+ 36e:	2705                	addiw	a4,a4,1
+ 370:	02c5f7bb          	remuw	a5,a1,a2
+ 374:	1782                	slli	a5,a5,0x20
+ 376:	9381                	srli	a5,a5,0x20
+ 378:	97aa                	add	a5,a5,a0
+ 37a:	0007c783          	lbu	a5,0(a5)
+ 37e:	00f68023          	sb	a5,0(a3)
+ 382:	0005879b          	sext.w	a5,a1
+ 386:	02c5d5bb          	divuw	a1,a1,a2
+ 38a:	0685                	addi	a3,a3,1
+ 38c:	fec7f0e3          	bgeu	a5,a2,36c <printint+0x26>
+ 390:	00088c63          	beqz	a7,3a8 <printint+0x62>
+ 394:	fd070793          	addi	a5,a4,-48
+ 398:	00878733          	add	a4,a5,s0
+ 39c:	02d00793          	li	a5,45
+ 3a0:	fef70823          	sb	a5,-16(a4)
+ 3a4:	0028071b          	addiw	a4,a6,2
+ 3a8:	02e05a63          	blez	a4,3dc <printint+0x96>
+ 3ac:	f04a                	sd	s2,32(sp)
+ 3ae:	ec4e                	sd	s3,24(sp)
+ 3b0:	fc040793          	addi	a5,s0,-64
+ 3b4:	00e78933          	add	s2,a5,a4
+ 3b8:	fff78993          	addi	s3,a5,-1
+ 3bc:	99ba                	add	s3,s3,a4
+ 3be:	377d                	addiw	a4,a4,-1
+ 3c0:	1702                	slli	a4,a4,0x20
+ 3c2:	9301                	srli	a4,a4,0x20
+ 3c4:	40e989b3          	sub	s3,s3,a4
+ 3c8:	fff94583          	lbu	a1,-1(s2)
+ 3cc:	8526                	mv	a0,s1
+ 3ce:	f5bff0ef          	jal	328 <putc>
+ 3d2:	197d                	addi	s2,s2,-1
+ 3d4:	ff391ae3          	bne	s2,s3,3c8 <printint+0x82>
+ 3d8:	7902                	ld	s2,32(sp)
+ 3da:	69e2                	ld	s3,24(sp)
+ 3dc:	70e2                	ld	ra,56(sp)
+ 3de:	7442                	ld	s0,48(sp)
+ 3e0:	74a2                	ld	s1,40(sp)
+ 3e2:	6121                	addi	sp,sp,64
+ 3e4:	8082                	ret
+ 3e6:	40b005bb          	negw	a1,a1
+ 3ea:	4885                	li	a7,1
+ 3ec:	bf85                	j	35c <printint+0x16>
+
+00000000000003ee <vprintf>:
+ 3ee:	711d                	addi	sp,sp,-96
+ 3f0:	ec86                	sd	ra,88(sp)
+ 3f2:	e8a2                	sd	s0,80(sp)
+ 3f4:	e0ca                	sd	s2,64(sp)
+ 3f6:	1080                	addi	s0,sp,96
+ 3f8:	0005c903          	lbu	s2,0(a1)
+ 3fc:	26090863          	beqz	s2,66c <vprintf+0x27e>
+ 400:	e4a6                	sd	s1,72(sp)
+ 402:	fc4e                	sd	s3,56(sp)
+ 404:	f852                	sd	s4,48(sp)
+ 406:	f456                	sd	s5,40(sp)
+ 408:	f05a                	sd	s6,32(sp)
+ 40a:	ec5e                	sd	s7,24(sp)
+ 40c:	e862                	sd	s8,16(sp)
+ 40e:	e466                	sd	s9,8(sp)
+ 410:	8b2a                	mv	s6,a0
+ 412:	8a2e                	mv	s4,a1
+ 414:	8bb2                	mv	s7,a2
+ 416:	4981                	li	s3,0
+ 418:	4481                	li	s1,0
+ 41a:	4701                	li	a4,0
+ 41c:	02500a93          	li	s5,37
+ 420:	06400c13          	li	s8,100
+ 424:	06c00c93          	li	s9,108
+ 428:	a005                	j	448 <vprintf+0x5a>
+ 42a:	85ca                	mv	a1,s2
+ 42c:	855a                	mv	a0,s6
+ 42e:	efbff0ef          	jal	328 <putc>
+ 432:	a019                	j	438 <vprintf+0x4a>
+ 434:	03598263          	beq	s3,s5,458 <vprintf+0x6a>
+ 438:	2485                	addiw	s1,s1,1
+ 43a:	8726                	mv	a4,s1
+ 43c:	009a07b3          	add	a5,s4,s1
+ 440:	0007c903          	lbu	s2,0(a5)
+ 444:	20090c63          	beqz	s2,65c <vprintf+0x26e>
+ 448:	0009079b          	sext.w	a5,s2
+ 44c:	fe0994e3          	bnez	s3,434 <vprintf+0x46>
+ 450:	fd579de3          	bne	a5,s5,42a <vprintf+0x3c>
+ 454:	89be                	mv	s3,a5
+ 456:	b7cd                	j	438 <vprintf+0x4a>
+ 458:	00ea06b3          	add	a3,s4,a4
+ 45c:	0016c683          	lbu	a3,1(a3)
+ 460:	8636                	mv	a2,a3
+ 462:	c681                	beqz	a3,46a <vprintf+0x7c>
+ 464:	9752                	add	a4,a4,s4
+ 466:	00274603          	lbu	a2,2(a4)
+ 46a:	03878f63          	beq	a5,s8,4a8 <vprintf+0xba>
+ 46e:	05978963          	beq	a5,s9,4c0 <vprintf+0xd2>
+ 472:	07500713          	li	a4,117
+ 476:	0ee78363          	beq	a5,a4,55c <vprintf+0x16e>
+ 47a:	07800713          	li	a4,120
+ 47e:	12e78563          	beq	a5,a4,5a8 <vprintf+0x1ba>
+ 482:	07000713          	li	a4,112
+ 486:	14e78a63          	beq	a5,a4,5da <vprintf+0x1ec>
+ 48a:	07300713          	li	a4,115
+ 48e:	18e78a63          	beq	a5,a4,622 <vprintf+0x234>
+ 492:	02500713          	li	a4,37
+ 496:	04e79563          	bne	a5,a4,4e0 <vprintf+0xf2>
+ 49a:	02500593          	li	a1,37
+ 49e:	855a                	mv	a0,s6
+ 4a0:	e89ff0ef          	jal	328 <putc>
+ 4a4:	4981                	li	s3,0
+ 4a6:	bf49                	j	438 <vprintf+0x4a>
+ 4a8:	008b8913          	addi	s2,s7,8
+ 4ac:	4685                	li	a3,1
+ 4ae:	4629                	li	a2,10
+ 4b0:	000ba583          	lw	a1,0(s7)
+ 4b4:	855a                	mv	a0,s6
+ 4b6:	e91ff0ef          	jal	346 <printint>
+ 4ba:	8bca                	mv	s7,s2
+ 4bc:	4981                	li	s3,0
+ 4be:	bfad                	j	438 <vprintf+0x4a>
+ 4c0:	06400793          	li	a5,100
+ 4c4:	02f68963          	beq	a3,a5,4f6 <vprintf+0x108>
+ 4c8:	06c00793          	li	a5,108
+ 4cc:	04f68263          	beq	a3,a5,510 <vprintf+0x122>
+ 4d0:	07500793          	li	a5,117
+ 4d4:	0af68063          	beq	a3,a5,574 <vprintf+0x186>
+ 4d8:	07800793          	li	a5,120
+ 4dc:	0ef68263          	beq	a3,a5,5c0 <vprintf+0x1d2>
+ 4e0:	02500593          	li	a1,37
+ 4e4:	855a                	mv	a0,s6
+ 4e6:	e43ff0ef          	jal	328 <putc>
+ 4ea:	85ca                	mv	a1,s2
+ 4ec:	855a                	mv	a0,s6
+ 4ee:	e3bff0ef          	jal	328 <putc>
+ 4f2:	4981                	li	s3,0
+ 4f4:	b791                	j	438 <vprintf+0x4a>
+ 4f6:	008b8913          	addi	s2,s7,8
+ 4fa:	4685                	li	a3,1
+ 4fc:	4629                	li	a2,10
+ 4fe:	000ba583          	lw	a1,0(s7)
+ 502:	855a                	mv	a0,s6
+ 504:	e43ff0ef          	jal	346 <printint>
+ 508:	2485                	addiw	s1,s1,1
+ 50a:	8bca                	mv	s7,s2
+ 50c:	4981                	li	s3,0
+ 50e:	b72d                	j	438 <vprintf+0x4a>
+ 510:	06400793          	li	a5,100
+ 514:	02f60763          	beq	a2,a5,542 <vprintf+0x154>
+ 518:	07500793          	li	a5,117
+ 51c:	06f60963          	beq	a2,a5,58e <vprintf+0x1a0>
+ 520:	07800793          	li	a5,120
+ 524:	faf61ee3          	bne	a2,a5,4e0 <vprintf+0xf2>
+ 528:	008b8913          	addi	s2,s7,8
+ 52c:	4681                	li	a3,0
+ 52e:	4641                	li	a2,16
+ 530:	000ba583          	lw	a1,0(s7)
+ 534:	855a                	mv	a0,s6
+ 536:	e11ff0ef          	jal	346 <printint>
+ 53a:	2489                	addiw	s1,s1,2
+ 53c:	8bca                	mv	s7,s2
+ 53e:	4981                	li	s3,0
+ 540:	bde5                	j	438 <vprintf+0x4a>
+ 542:	008b8913          	addi	s2,s7,8
+ 546:	4685                	li	a3,1
+ 548:	4629                	li	a2,10
+ 54a:	000ba583          	lw	a1,0(s7)
+ 54e:	855a                	mv	a0,s6
+ 550:	df7ff0ef          	jal	346 <printint>
+ 554:	2489                	addiw	s1,s1,2
+ 556:	8bca                	mv	s7,s2
+ 558:	4981                	li	s3,0
+ 55a:	bdf9                	j	438 <vprintf+0x4a>
+ 55c:	008b8913          	addi	s2,s7,8
+ 560:	4681                	li	a3,0
+ 562:	4629                	li	a2,10
+ 564:	000ba583          	lw	a1,0(s7)
+ 568:	855a                	mv	a0,s6
+ 56a:	dddff0ef          	jal	346 <printint>
+ 56e:	8bca                	mv	s7,s2
+ 570:	4981                	li	s3,0
+ 572:	b5d9                	j	438 <vprintf+0x4a>
+ 574:	008b8913          	addi	s2,s7,8
+ 578:	4681                	li	a3,0
+ 57a:	4629                	li	a2,10
+ 57c:	000ba583          	lw	a1,0(s7)
+ 580:	855a                	mv	a0,s6
+ 582:	dc5ff0ef          	jal	346 <printint>
+ 586:	2485                	addiw	s1,s1,1
+ 588:	8bca                	mv	s7,s2
+ 58a:	4981                	li	s3,0
+ 58c:	b575                	j	438 <vprintf+0x4a>
+ 58e:	008b8913          	addi	s2,s7,8
+ 592:	4681                	li	a3,0
+ 594:	4629                	li	a2,10
+ 596:	000ba583          	lw	a1,0(s7)
+ 59a:	855a                	mv	a0,s6
+ 59c:	dabff0ef          	jal	346 <printint>
+ 5a0:	2489                	addiw	s1,s1,2
+ 5a2:	8bca                	mv	s7,s2
+ 5a4:	4981                	li	s3,0
+ 5a6:	bd49                	j	438 <vprintf+0x4a>
+ 5a8:	008b8913          	addi	s2,s7,8
+ 5ac:	4681                	li	a3,0
+ 5ae:	4641                	li	a2,16
+ 5b0:	000ba583          	lw	a1,0(s7)
+ 5b4:	855a                	mv	a0,s6
+ 5b6:	d91ff0ef          	jal	346 <printint>
+ 5ba:	8bca                	mv	s7,s2
+ 5bc:	4981                	li	s3,0
+ 5be:	bdad                	j	438 <vprintf+0x4a>
+ 5c0:	008b8913          	addi	s2,s7,8
+ 5c4:	4681                	li	a3,0
+ 5c6:	4641                	li	a2,16
+ 5c8:	000ba583          	lw	a1,0(s7)
+ 5cc:	855a                	mv	a0,s6
+ 5ce:	d79ff0ef          	jal	346 <printint>
+ 5d2:	2485                	addiw	s1,s1,1
+ 5d4:	8bca                	mv	s7,s2
+ 5d6:	4981                	li	s3,0
+ 5d8:	b585                	j	438 <vprintf+0x4a>
+ 5da:	e06a                	sd	s10,0(sp)
+ 5dc:	008b8d13          	addi	s10,s7,8
+ 5e0:	000bb983          	ld	s3,0(s7)
+ 5e4:	03000593          	li	a1,48
+ 5e8:	855a                	mv	a0,s6
+ 5ea:	d3fff0ef          	jal	328 <putc>
+ 5ee:	07800593          	li	a1,120
+ 5f2:	855a                	mv	a0,s6
+ 5f4:	d35ff0ef          	jal	328 <putc>
+ 5f8:	4941                	li	s2,16
+ 5fa:	00000b97          	auipc	s7,0x0
+ 5fe:	25eb8b93          	addi	s7,s7,606 # 858 <digits>
+ 602:	03c9d793          	srli	a5,s3,0x3c
+ 606:	97de                	add	a5,a5,s7
+ 608:	0007c583          	lbu	a1,0(a5)
+ 60c:	855a                	mv	a0,s6
+ 60e:	d1bff0ef          	jal	328 <putc>
+ 612:	0992                	slli	s3,s3,0x4
+ 614:	397d                	addiw	s2,s2,-1
+ 616:	fe0916e3          	bnez	s2,602 <vprintf+0x214>
+ 61a:	8bea                	mv	s7,s10
+ 61c:	4981                	li	s3,0
+ 61e:	6d02                	ld	s10,0(sp)
+ 620:	bd21                	j	438 <vprintf+0x4a>
+ 622:	008b8993          	addi	s3,s7,8
+ 626:	000bb903          	ld	s2,0(s7)
+ 62a:	00090f63          	beqz	s2,648 <vprintf+0x25a>
+ 62e:	00094583          	lbu	a1,0(s2)
+ 632:	c195                	beqz	a1,656 <vprintf+0x268>
+ 634:	855a                	mv	a0,s6
+ 636:	cf3ff0ef          	jal	328 <putc>
+ 63a:	0905                	addi	s2,s2,1
+ 63c:	00094583          	lbu	a1,0(s2)
+ 640:	f9f5                	bnez	a1,634 <vprintf+0x246>
+ 642:	8bce                	mv	s7,s3
+ 644:	4981                	li	s3,0
+ 646:	bbcd                	j	438 <vprintf+0x4a>
+ 648:	00000917          	auipc	s2,0x0
+ 64c:	20890913          	addi	s2,s2,520 # 850 <malloc+0xfc>
+ 650:	02800593          	li	a1,40
+ 654:	b7c5                	j	634 <vprintf+0x246>
+ 656:	8bce                	mv	s7,s3
+ 658:	4981                	li	s3,0
+ 65a:	bbf9                	j	438 <vprintf+0x4a>
+ 65c:	64a6                	ld	s1,72(sp)
+ 65e:	79e2                	ld	s3,56(sp)
+ 660:	7a42                	ld	s4,48(sp)
+ 662:	7aa2                	ld	s5,40(sp)
+ 664:	7b02                	ld	s6,32(sp)
+ 666:	6be2                	ld	s7,24(sp)
+ 668:	6c42                	ld	s8,16(sp)
+ 66a:	6ca2                	ld	s9,8(sp)
+ 66c:	60e6                	ld	ra,88(sp)
+ 66e:	6446                	ld	s0,80(sp)
+ 670:	6906                	ld	s2,64(sp)
+ 672:	6125                	addi	sp,sp,96
+ 674:	8082                	ret
+
+0000000000000676 <fprintf>:
+ 676:	715d                	addi	sp,sp,-80
+ 678:	ec06                	sd	ra,24(sp)
+ 67a:	e822                	sd	s0,16(sp)
+ 67c:	1000                	addi	s0,sp,32
+ 67e:	e010                	sd	a2,0(s0)
+ 680:	e414                	sd	a3,8(s0)
+ 682:	e818                	sd	a4,16(s0)
+ 684:	ec1c                	sd	a5,24(s0)
+ 686:	03043023          	sd	a6,32(s0)
+ 68a:	03143423          	sd	a7,40(s0)
+ 68e:	fe843423          	sd	s0,-24(s0)
+ 692:	8622                	mv	a2,s0
+ 694:	d5bff0ef          	jal	3ee <vprintf>
+ 698:	60e2                	ld	ra,24(sp)
+ 69a:	6442                	ld	s0,16(sp)
+ 69c:	6161                	addi	sp,sp,80
+ 69e:	8082                	ret
+
+00000000000006a0 <printf>:
+ 6a0:	711d                	addi	sp,sp,-96
+ 6a2:	ec06                	sd	ra,24(sp)
+ 6a4:	e822                	sd	s0,16(sp)
+ 6a6:	1000                	addi	s0,sp,32
+ 6a8:	e40c                	sd	a1,8(s0)
+ 6aa:	e810                	sd	a2,16(s0)
+ 6ac:	ec14                	sd	a3,24(s0)
+ 6ae:	f018                	sd	a4,32(s0)
+ 6b0:	f41c                	sd	a5,40(s0)
+ 6b2:	03043823          	sd	a6,48(s0)
+ 6b6:	03143c23          	sd	a7,56(s0)
+ 6ba:	00840613          	addi	a2,s0,8
+ 6be:	fec43423          	sd	a2,-24(s0)
+ 6c2:	85aa                	mv	a1,a0
+ 6c4:	4505                	li	a0,1
+ 6c6:	d29ff0ef          	jal	3ee <vprintf>
+ 6ca:	60e2                	ld	ra,24(sp)
+ 6cc:	6442                	ld	s0,16(sp)
+ 6ce:	6125                	addi	sp,sp,96
+ 6d0:	8082                	ret
+
+00000000000006d2 <free>:
+ 6d2:	1141                	addi	sp,sp,-16
+ 6d4:	e422                	sd	s0,8(sp)
+ 6d6:	0800                	addi	s0,sp,16
+ 6d8:	ff050693          	addi	a3,a0,-16
+ 6dc:	00001797          	auipc	a5,0x1
+ 6e0:	9247b783          	ld	a5,-1756(a5) # 1000 <freep>
+ 6e4:	a02d                	j	70e <free+0x3c>
+ 6e6:	4618                	lw	a4,8(a2)
+ 6e8:	9f2d                	addw	a4,a4,a1
+ 6ea:	fee52c23          	sw	a4,-8(a0)
+ 6ee:	6398                	ld	a4,0(a5)
+ 6f0:	6310                	ld	a2,0(a4)
+ 6f2:	a83d                	j	730 <free+0x5e>
+ 6f4:	ff852703          	lw	a4,-8(a0)
+ 6f8:	9f31                	addw	a4,a4,a2
+ 6fa:	c798                	sw	a4,8(a5)
+ 6fc:	ff053683          	ld	a3,-16(a0)
+ 700:	a091                	j	744 <free+0x72>
+ 702:	6398                	ld	a4,0(a5)
+ 704:	00e7e463          	bltu	a5,a4,70c <free+0x3a>
+ 708:	00e6ea63          	bltu	a3,a4,71c <free+0x4a>
+ 70c:	87ba                	mv	a5,a4
+ 70e:	fed7fae3          	bgeu	a5,a3,702 <free+0x30>
+ 712:	6398                	ld	a4,0(a5)
+ 714:	00e6e463          	bltu	a3,a4,71c <free+0x4a>
+ 718:	fee7eae3          	bltu	a5,a4,70c <free+0x3a>
+ 71c:	ff852583          	lw	a1,-8(a0)
+ 720:	6390                	ld	a2,0(a5)
+ 722:	02059813          	slli	a6,a1,0x20
+ 726:	01c85713          	srli	a4,a6,0x1c
+ 72a:	9736                	add	a4,a4,a3
+ 72c:	fae60de3          	beq	a2,a4,6e6 <free+0x14>
+ 730:	fec53823          	sd	a2,-16(a0)
+ 734:	4790                	lw	a2,8(a5)
+ 736:	02061593          	slli	a1,a2,0x20
+ 73a:	01c5d713          	srli	a4,a1,0x1c
+ 73e:	973e                	add	a4,a4,a5
+ 740:	fae68ae3          	beq	a3,a4,6f4 <free+0x22>
+ 744:	e394                	sd	a3,0(a5)
+ 746:	00001717          	auipc	a4,0x1
+ 74a:	8af73d23          	sd	a5,-1862(a4) # 1000 <freep>
+ 74e:	6422                	ld	s0,8(sp)
+ 750:	0141                	addi	sp,sp,16
+ 752:	8082                	ret
+
+0000000000000754 <malloc>:
+ 754:	7139                	addi	sp,sp,-64
+ 756:	fc06                	sd	ra,56(sp)
+ 758:	f822                	sd	s0,48(sp)
+ 75a:	f426                	sd	s1,40(sp)
+ 75c:	ec4e                	sd	s3,24(sp)
+ 75e:	0080                	addi	s0,sp,64
+ 760:	02051493          	slli	s1,a0,0x20
+ 764:	9081                	srli	s1,s1,0x20
+ 766:	04bd                	addi	s1,s1,15
+ 768:	8091                	srli	s1,s1,0x4
+ 76a:	0014899b          	addiw	s3,s1,1
+ 76e:	0485                	addi	s1,s1,1
+ 770:	00001517          	auipc	a0,0x1
+ 774:	89053503          	ld	a0,-1904(a0) # 1000 <freep>
+ 778:	c915                	beqz	a0,7ac <malloc+0x58>
+ 77a:	611c                	ld	a5,0(a0)
+ 77c:	4798                	lw	a4,8(a5)
+ 77e:	08977a63          	bgeu	a4,s1,812 <malloc+0xbe>
+ 782:	f04a                	sd	s2,32(sp)
+ 784:	e852                	sd	s4,16(sp)
+ 786:	e456                	sd	s5,8(sp)
+ 788:	e05a                	sd	s6,0(sp)
+ 78a:	8a4e                	mv	s4,s3
+ 78c:	0009871b          	sext.w	a4,s3
+ 790:	6685                	lui	a3,0x1
+ 792:	00d77363          	bgeu	a4,a3,798 <malloc+0x44>
+ 796:	6a05                	lui	s4,0x1
+ 798:	000a0b1b          	sext.w	s6,s4
+ 79c:	004a1a1b          	slliw	s4,s4,0x4
+ 7a0:	00001917          	auipc	s2,0x1
+ 7a4:	86090913          	addi	s2,s2,-1952 # 1000 <freep>
+ 7a8:	5afd                	li	s5,-1
+ 7aa:	a081                	j	7ea <malloc+0x96>
+ 7ac:	f04a                	sd	s2,32(sp)
+ 7ae:	e852                	sd	s4,16(sp)
+ 7b0:	e456                	sd	s5,8(sp)
+ 7b2:	e05a                	sd	s6,0(sp)
+ 7b4:	00001797          	auipc	a5,0x1
+ 7b8:	85c78793          	addi	a5,a5,-1956 # 1010 <base>
+ 7bc:	00001717          	auipc	a4,0x1
+ 7c0:	84f73223          	sd	a5,-1980(a4) # 1000 <freep>
+ 7c4:	e39c                	sd	a5,0(a5)
+ 7c6:	0007a423          	sw	zero,8(a5)
+ 7ca:	b7c1                	j	78a <malloc+0x36>
+ 7cc:	6398                	ld	a4,0(a5)
+ 7ce:	e118                	sd	a4,0(a0)
+ 7d0:	a8a9                	j	82a <malloc+0xd6>
+ 7d2:	01652423          	sw	s6,8(a0)
+ 7d6:	0541                	addi	a0,a0,16
+ 7d8:	efbff0ef          	jal	6d2 <free>
+ 7dc:	00093503          	ld	a0,0(s2)
+ 7e0:	c12d                	beqz	a0,842 <malloc+0xee>
+ 7e2:	611c                	ld	a5,0(a0)
+ 7e4:	4798                	lw	a4,8(a5)
+ 7e6:	02977263          	bgeu	a4,s1,80a <malloc+0xb6>
+ 7ea:	00093703          	ld	a4,0(s2)
+ 7ee:	853e                	mv	a0,a5
+ 7f0:	fef719e3          	bne	a4,a5,7e2 <malloc+0x8e>
+ 7f4:	8552                	mv	a0,s4
+ 7f6:	b1bff0ef          	jal	310 <sbrk>
+ 7fa:	fd551ce3          	bne	a0,s5,7d2 <malloc+0x7e>
+ 7fe:	4501                	li	a0,0
+ 800:	7902                	ld	s2,32(sp)
+ 802:	6a42                	ld	s4,16(sp)
+ 804:	6aa2                	ld	s5,8(sp)
+ 806:	6b02                	ld	s6,0(sp)
+ 808:	a03d                	j	836 <malloc+0xe2>
+ 80a:	7902                	ld	s2,32(sp)
+ 80c:	6a42                	ld	s4,16(sp)
+ 80e:	6aa2                	ld	s5,8(sp)
+ 810:	6b02                	ld	s6,0(sp)
+ 812:	fae48de3          	beq	s1,a4,7cc <malloc+0x78>
+ 816:	4137073b          	subw	a4,a4,s3
+ 81a:	c798                	sw	a4,8(a5)
+ 81c:	02071693          	slli	a3,a4,0x20
+ 820:	01c6d713          	srli	a4,a3,0x1c
+ 824:	97ba                	add	a5,a5,a4
+ 826:	0137a423          	sw	s3,8(a5)
+ 82a:	00000717          	auipc	a4,0x0
+ 82e:	7ca73b23          	sd	a0,2006(a4) # 1000 <freep>
+ 832:	01078513          	addi	a0,a5,16
+ 836:	70e2                	ld	ra,56(sp)
+ 838:	7442                	ld	s0,48(sp)
+ 83a:	74a2                	ld	s1,40(sp)
+ 83c:	69e2                	ld	s3,24(sp)
+ 83e:	6121                	addi	sp,sp,64
+ 840:	8082                	ret
+ 842:	7902                	ld	s2,32(sp)
+ 844:	6a42                	ld	s4,16(sp)
+ 846:	6aa2                	ld	s5,8(sp)
+ 848:	6b02                	ld	s6,0(sp)
+ 84a:	b7f5                	j	836 <malloc+0xe2>
diff --git a/xv6-labs-2024/user/zombie.c b/xv6-labs-2024/user/zombie.c
new file mode 100644
index 0000000..8b89a33
--- /dev/null
+++ b/xv6-labs-2024/user/zombie.c
@@ -0,0 +1,14 @@
+// Create a zombie process that
+// must be reparented at exit.
+
+#include "kernel/types.h"
+#include "kernel/stat.h"
+#include "user/user.h"
+
+int
+main(void)
+{
+  if(fork() > 0)
+    sleep(5);  // Let child exit before parent.
+  exit(0);
+}
diff --git a/xv6-labs-2024/user/zombie.d b/xv6-labs-2024/user/zombie.d
new file mode 100644
index 0000000..51a3fac
--- /dev/null
+++ b/xv6-labs-2024/user/zombie.d
@@ -0,0 +1,2 @@
+user/zombie.o: user/zombie.c /usr/riscv64-linux-gnu/include/stdc-predef.h \
+ kernel/types.h kernel/stat.h user/user.h
diff --git a/xv6-labs-2024/user/zombie.o b/xv6-labs-2024/user/zombie.o
new file mode 100644
index 0000000..956c726
Binary files /dev/null and b/xv6-labs-2024/user/zombie.o differ
diff --git a/xv6-labs-2024/user/zombie.sym b/xv6-labs-2024/user/zombie.sym
new file mode 100644
index 0000000..4cc709c
--- /dev/null
+++ b/xv6-labs-2024/user/zombie.sym
@@ -0,0 +1,63 @@
+0000000000000000 .text
+0000000000000850 .rodata
+0000000000000870 .eh_frame
+0000000000001000 .data
+0000000000001000 .bss
+0000000000000000 .debug_info
+0000000000000000 .debug_abbrev
+0000000000000000 .debug_loc
+0000000000000000 .debug_aranges
+0000000000000000 .debug_line
+0000000000000000 .debug_str
+0000000000000000 .comment
+0000000000000000 .riscv.attributes
+0000000000000000 .debug_ranges
+0000000000000000 zombie.c
+0000000000000000 ulib.c
+0000000000000000 usys.o
+0000000000000000 printf.c
+0000000000000328 putc
+0000000000000346 printint
+0000000000000858 digits
+0000000000000000 umalloc.c
+0000000000001000 freep
+0000000000001010 base
+0000000000000030 strcpy
+00000000000006a0 printf
+00000000000001da memmove
+00000000000002d0 mknod
+00000000000000e8 gets
+0000000000000308 getpid
+000000000000026c memcpy
+0000000000000754 malloc
+0000000000000318 sleep
+0000000000000298 pipe
+00000000000002a8 write
+00000000000002e0 fstat
+0000000000000676 fprintf
+00000000000002b8 kill
+00000000000003ee vprintf
+00000000000002f8 chdir
+00000000000002c0 exec
+0000000000000290 wait
+00000000000002a0 read
+00000000000002d8 unlink
+0000000000000232 memcmp
+0000000000000280 fork
+0000000000000310 sbrk
+0000000000000320 uptime
+00000000000000a2 memset
+0000000000000000 main
+000000000000004c strcmp
+0000000000000300 dup
+0000000000000158 stat
+00000000000002e8 link
+0000000000000288 exit
+000000000000001e start
+0000000000000192 atoi
+0000000000000078 strlen
+00000000000002c8 open
+00000000000000c4 strchr
+00000000000002f0 mkdir
+00000000000002b0 close
+00000000000006d2 free
